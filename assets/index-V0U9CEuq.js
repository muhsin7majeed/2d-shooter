const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-ro3XrH3F.js","assets/webworkerAll-DOHJI95m.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function qy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var X0={exports:{}},qf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q2;function BM(){if(q2)return qf;q2=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,o){var h=null;if(o!==void 0&&(h=""+o),a.key!==void 0&&(h=""+a.key),"key"in a){o={};for(var f in a)f!=="key"&&(o[f]=a[f])}else o=a;return a=o.ref,{$$typeof:n,type:i,key:h,ref:a!==void 0?a:null,props:o}}return qf.Fragment=t,qf.jsx=e,qf.jsxs=e,qf}var j2;function RM(){return j2||(j2=1,X0.exports=BM()),X0.exports}var Qt=RM(),I0={exports:{}},jf={},Y0={exports:{}},q0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K2;function MM(){return K2||(K2=1,function(n){function t(V,j){var ut=V.length;V.push(j);t:for(;0<ut;){var ct=ut-1>>>1,z=V[ct];if(0<a(z,j))V[ct]=j,V[ut]=z,ut=ct;else break t}}function e(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var j=V[0],ut=V.pop();if(ut!==j){V[0]=ut;t:for(var ct=0,z=V.length,tt=z>>>1;ct<tt;){var Tt=2*(ct+1)-1,Rt=V[Tt],yt=Tt+1,Mt=V[yt];if(0>a(Rt,ut))yt<z&&0>a(Mt,Rt)?(V[ct]=Mt,V[yt]=ut,ct=yt):(V[ct]=Rt,V[Tt]=ut,ct=Tt);else if(yt<z&&0>a(Mt,ut))V[ct]=Mt,V[yt]=ut,ct=yt;else break t}}return j}function a(V,j){var ut=V.sortIndex-j.sortIndex;return ut!==0?ut:V.id-j.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var h=Date,f=h.now();n.unstable_now=function(){return h.now()-f}}var m=[],g=[],b=1,x=null,E=3,T=!1,R=!1,D=!1,C=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function H(V){for(var j=e(g);j!==null;){if(j.callback===null)i(g);else if(j.startTime<=V)i(g),j.sortIndex=j.expirationTime,t(m,j);else break;j=e(g)}}function q(V){if(D=!1,H(V),!R)if(e(m)!==null)R=!0,St();else{var j=e(g);j!==null&&Ct(q,j.startTime-V)}}var et=!1,ot=-1,Y=5,ht=-1;function N(){return!(n.unstable_now()-ht<Y)}function X(){if(et){var V=n.unstable_now();ht=V;var j=!0;try{t:{R=!1,D&&(D=!1,G(ot),ot=-1),T=!0;var ut=E;try{e:{for(H(V),x=e(m);x!==null&&!(x.expirationTime>V&&N());){var ct=x.callback;if(typeof ct=="function"){x.callback=null,E=x.priorityLevel;var z=ct(x.expirationTime<=V);if(V=n.unstable_now(),typeof z=="function"){x.callback=z,H(V),j=!0;break e}x===e(m)&&i(m),H(V)}else i(m);x=e(m)}if(x!==null)j=!0;else{var tt=e(g);tt!==null&&Ct(q,tt.startTime-V),j=!1}}break t}finally{x=null,E=ut,T=!1}j=void 0}}finally{j?W():et=!1}}}var W;if(typeof P=="function")W=function(){P(X)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,ft=rt.port2;rt.port1.onmessage=X,W=function(){ft.postMessage(null)}}else W=function(){C(X,0)};function St(){et||(et=!0,W())}function Ct(V,j){ot=C(function(){V(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){R||T||(R=!0,St())},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return e(m)},n.unstable_next=function(V){switch(E){case 1:case 2:case 3:var j=3;break;default:j=E}var ut=E;E=j;try{return V()}finally{E=ut}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,j){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ut=E;E=V;try{return j()}finally{E=ut}},n.unstable_scheduleCallback=function(V,j,ut){var ct=n.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?ct+ut:ct):ut=ct,V){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=ut+z,V={id:b++,callback:j,priorityLevel:V,startTime:ut,expirationTime:z,sortIndex:-1},ut>ct?(V.sortIndex=ut,t(g,V),e(m)===null&&V===e(g)&&(D?(G(ot),ot=-1):D=!0,Ct(q,ut-ct))):(V.sortIndex=z,t(m,V),R||T||(R=!0,St())),V},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(V){var j=E;return function(){var ut=E;E=j;try{return V.apply(this,arguments)}finally{E=ut}}}}(q0)),q0}var W2;function DM(){return W2||(W2=1,Y0.exports=MM()),Y0.exports}var j0={exports:{}},ee={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q2;function wM(){if(Q2)return ee;Q2=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.iterator;function E(z){return z===null||typeof z!="object"?null:(z=x&&z[x]||z["@@iterator"],typeof z=="function"?z:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,D={};function C(z,tt,Tt){this.props=z,this.context=tt,this.refs=D,this.updater=Tt||T}C.prototype.isReactComponent={},C.prototype.setState=function(z,tt){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,tt,"setState")},C.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function G(){}G.prototype=C.prototype;function P(z,tt,Tt){this.props=z,this.context=tt,this.refs=D,this.updater=Tt||T}var H=P.prototype=new G;H.constructor=P,R(H,C.prototype),H.isPureReactComponent=!0;var q=Array.isArray,et={H:null,A:null,T:null,S:null},ot=Object.prototype.hasOwnProperty;function Y(z,tt,Tt,Rt,yt,Mt){return Tt=Mt.ref,{$$typeof:n,type:z,key:tt,ref:Tt!==void 0?Tt:null,props:Mt}}function ht(z,tt){return Y(z.type,tt,void 0,void 0,void 0,z.props)}function N(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function X(z){var tt={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Tt){return tt[Tt]})}var W=/\/+/g;function rt(z,tt){return typeof z=="object"&&z!==null&&z.key!=null?X(""+z.key):tt.toString(36)}function ft(){}function St(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(ft,ft):(z.status="pending",z.then(function(tt){z.status==="pending"&&(z.status="fulfilled",z.value=tt)},function(tt){z.status==="pending"&&(z.status="rejected",z.reason=tt)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function Ct(z,tt,Tt,Rt,yt){var Mt=typeof z;(Mt==="undefined"||Mt==="boolean")&&(z=null);var Lt=!1;if(z===null)Lt=!0;else switch(Mt){case"bigint":case"string":case"number":Lt=!0;break;case"object":switch(z.$$typeof){case n:case t:Lt=!0;break;case b:return Lt=z._init,Ct(Lt(z._payload),tt,Tt,Rt,yt)}}if(Lt)return yt=yt(z),Lt=Rt===""?"."+rt(z,0):Rt,q(yt)?(Tt="",Lt!=null&&(Tt=Lt.replace(W,"$&/")+"/"),Ct(yt,tt,Tt,"",function(ne){return ne})):yt!=null&&(N(yt)&&(yt=ht(yt,Tt+(yt.key==null||z&&z.key===yt.key?"":(""+yt.key).replace(W,"$&/")+"/")+Lt)),tt.push(yt)),1;Lt=0;var Ge=Rt===""?".":Rt+":";if(q(z))for(var Pt=0;Pt<z.length;Pt++)Rt=z[Pt],Mt=Ge+rt(Rt,Pt),Lt+=Ct(Rt,tt,Tt,Mt,yt);else if(Pt=E(z),typeof Pt=="function")for(z=Pt.call(z),Pt=0;!(Rt=z.next()).done;)Rt=Rt.value,Mt=Ge+rt(Rt,Pt++),Lt+=Ct(Rt,tt,Tt,Mt,yt);else if(Mt==="object"){if(typeof z.then=="function")return Ct(St(z),tt,Tt,Rt,yt);throw tt=String(z),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return Lt}function V(z,tt,Tt){if(z==null)return z;var Rt=[],yt=0;return Ct(z,Rt,"","",function(Mt){return tt.call(Tt,Mt,yt++)}),Rt}function j(z){if(z._status===-1){var tt=z._result;tt=tt(),tt.then(function(Tt){(z._status===0||z._status===-1)&&(z._status=1,z._result=Tt)},function(Tt){(z._status===0||z._status===-1)&&(z._status=2,z._result=Tt)}),z._status===-1&&(z._status=0,z._result=tt)}if(z._status===1)return z._result.default;throw z._result}var ut=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function ct(){}return ee.Children={map:V,forEach:function(z,tt,Tt){V(z,function(){tt.apply(this,arguments)},Tt)},count:function(z){var tt=0;return V(z,function(){tt++}),tt},toArray:function(z){return V(z,function(tt){return tt})||[]},only:function(z){if(!N(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},ee.Component=C,ee.Fragment=e,ee.Profiler=a,ee.PureComponent=P,ee.StrictMode=i,ee.Suspense=m,ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=et,ee.act=function(){throw Error("act(...) is not supported in production builds of React.")},ee.cache=function(z){return function(){return z.apply(null,arguments)}},ee.cloneElement=function(z,tt,Tt){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var Rt=R({},z.props),yt=z.key,Mt=void 0;if(tt!=null)for(Lt in tt.ref!==void 0&&(Mt=void 0),tt.key!==void 0&&(yt=""+tt.key),tt)!ot.call(tt,Lt)||Lt==="key"||Lt==="__self"||Lt==="__source"||Lt==="ref"&&tt.ref===void 0||(Rt[Lt]=tt[Lt]);var Lt=arguments.length-2;if(Lt===1)Rt.children=Tt;else if(1<Lt){for(var Ge=Array(Lt),Pt=0;Pt<Lt;Pt++)Ge[Pt]=arguments[Pt+2];Rt.children=Ge}return Y(z.type,yt,void 0,void 0,Mt,Rt)},ee.createContext=function(z){return z={$$typeof:h,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:o,_context:z},z},ee.createElement=function(z,tt,Tt){var Rt,yt={},Mt=null;if(tt!=null)for(Rt in tt.key!==void 0&&(Mt=""+tt.key),tt)ot.call(tt,Rt)&&Rt!=="key"&&Rt!=="__self"&&Rt!=="__source"&&(yt[Rt]=tt[Rt]);var Lt=arguments.length-2;if(Lt===1)yt.children=Tt;else if(1<Lt){for(var Ge=Array(Lt),Pt=0;Pt<Lt;Pt++)Ge[Pt]=arguments[Pt+2];yt.children=Ge}if(z&&z.defaultProps)for(Rt in Lt=z.defaultProps,Lt)yt[Rt]===void 0&&(yt[Rt]=Lt[Rt]);return Y(z,Mt,void 0,void 0,null,yt)},ee.createRef=function(){return{current:null}},ee.forwardRef=function(z){return{$$typeof:f,render:z}},ee.isValidElement=N,ee.lazy=function(z){return{$$typeof:b,_payload:{_status:-1,_result:z},_init:j}},ee.memo=function(z,tt){return{$$typeof:g,type:z,compare:tt===void 0?null:tt}},ee.startTransition=function(z){var tt=et.T,Tt={};et.T=Tt;try{var Rt=z(),yt=et.S;yt!==null&&yt(Tt,Rt),typeof Rt=="object"&&Rt!==null&&typeof Rt.then=="function"&&Rt.then(ct,ut)}catch(Mt){ut(Mt)}finally{et.T=tt}},ee.unstable_useCacheRefresh=function(){return et.H.useCacheRefresh()},ee.use=function(z){return et.H.use(z)},ee.useActionState=function(z,tt,Tt){return et.H.useActionState(z,tt,Tt)},ee.useCallback=function(z,tt){return et.H.useCallback(z,tt)},ee.useContext=function(z){return et.H.useContext(z)},ee.useDebugValue=function(){},ee.useDeferredValue=function(z,tt){return et.H.useDeferredValue(z,tt)},ee.useEffect=function(z,tt){return et.H.useEffect(z,tt)},ee.useId=function(){return et.H.useId()},ee.useImperativeHandle=function(z,tt,Tt){return et.H.useImperativeHandle(z,tt,Tt)},ee.useInsertionEffect=function(z,tt){return et.H.useInsertionEffect(z,tt)},ee.useLayoutEffect=function(z,tt){return et.H.useLayoutEffect(z,tt)},ee.useMemo=function(z,tt){return et.H.useMemo(z,tt)},ee.useOptimistic=function(z,tt){return et.H.useOptimistic(z,tt)},ee.useReducer=function(z,tt,Tt){return et.H.useReducer(z,tt,Tt)},ee.useRef=function(z){return et.H.useRef(z)},ee.useState=function(z){return et.H.useState(z)},ee.useSyncExternalStore=function(z,tt,Tt){return et.H.useSyncExternalStore(z,tt,Tt)},ee.useTransition=function(){return et.H.useTransition()},ee.version="19.0.0",ee}var Z2;function jy(){return Z2||(Z2=1,j0.exports=wM()),j0.exports}var K0={exports:{}},ki={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J2;function UM(){if(J2)return ki;J2=1;var n=jy();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(m,g,b){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:x==null?null:""+x,children:m,containerInfo:g,implementation:b}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ki.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ki.createPortal=function(m,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return o(m,g,null,b)},ki.flushSync=function(m){var g=h.T,b=i.p;try{if(h.T=null,i.p=2,m)return m()}finally{h.T=g,i.p=b,i.d.f()}},ki.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},ki.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},ki.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var b=g.as,x=f(b,g.crossOrigin),E=typeof g.integrity=="string"?g.integrity:void 0,T=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:E,fetchPriority:T}):b==="script"&&i.d.X(m,{crossOrigin:x,integrity:E,fetchPriority:T,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ki.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=f(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},ki.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,x=f(b,g.crossOrigin);i.d.L(m,b,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ki.preloadModule=function(m,g){if(typeof m=="string")if(g){var b=f(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},ki.requestFormReset=function(m){i.d.r(m)},ki.unstable_batchedUpdates=function(m,g){return m(g)},ki.useFormState=function(m,g,b){return h.H.useFormState(m,g,b)},ki.useFormStatus=function(){return h.H.useHostTransitionStatus()},ki.version="19.0.0",ki}var $2;function OM(){if($2)return K0.exports;$2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),K0.exports=UM(),K0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx;function GM(){if(tx)return jf;tx=1;var n=DM(),t=jy(),e=OM();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}var o=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),T=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),q=Symbol.for("react.memo_cache_sentinel"),et=Symbol.iterator;function ot(r){return r===null||typeof r!="object"?null:(r=et&&r[et]||r["@@iterator"],typeof r=="function"?r:null)}var Y=Symbol.for("react.client.reference");function ht(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===Y?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case m:return"Fragment";case f:return"Portal";case b:return"Profiler";case g:return"StrictMode";case D:return"Suspense";case C:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case T:return(r.displayName||"Context")+".Provider";case E:return(r._context.displayName||"Context")+".Consumer";case R:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case G:return s=r.displayName||null,s!==null?s:ht(r.type)||"Memo";case P:s=r._payload,r=r._init;try{return ht(r(s))}catch{}}return null}var N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=Object.assign,W,rt;function ft(r){if(W===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);W=s&&s[1]||"",rt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+W+r+rt}var St=!1;function Ct(r,s){if(!r||St)return"";St=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var _t=function(){throw Error()};if(Object.defineProperty(_t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_t,[])}catch(dt){var st=dt}Reflect.construct(r,[],_t)}else{try{_t.call()}catch(dt){st=dt}r.call(_t.prototype)}}else{try{throw Error()}catch(dt){st=dt}(_t=r())&&typeof _t.catch=="function"&&_t.catch(function(){})}}catch(dt){if(dt&&st&&typeof dt.stack=="string")return[dt.stack,st.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),B=v[0],w=v[1];if(B&&w){var L=B.split(`
`),Q=w.split(`
`);for(_=d=0;d<L.length&&!L[d].includes("DetermineComponentFrameRoot");)d++;for(;_<Q.length&&!Q[_].includes("DetermineComponentFrameRoot");)_++;if(d===L.length||_===Q.length)for(d=L.length-1,_=Q.length-1;1<=d&&0<=_&&L[d]!==Q[_];)_--;for(;1<=d&&0<=_;d--,_--)if(L[d]!==Q[_]){if(d!==1||_!==1)do if(d--,_--,0>_||L[d]!==Q[_]){var mt=`
`+L[d].replace(" at new "," at ");return r.displayName&&mt.includes("<anonymous>")&&(mt=mt.replace("<anonymous>",r.displayName)),mt}while(1<=d&&0<=_);break}}}finally{St=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?ft(c):""}function V(r){switch(r.tag){case 26:case 27:case 5:return ft(r.type);case 16:return ft("Lazy");case 13:return ft("Suspense");case 19:return ft("SuspenseList");case 0:case 15:return r=Ct(r.type,!1),r;case 11:return r=Ct(r.type.render,!1),r;case 1:return r=Ct(r.type,!0),r;default:return""}}function j(r){try{var s="";do s+=V(r),r=r.return;while(r);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function ut(r){var s=r,c=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(c=s.return),r=s.return;while(r)}return s.tag===3?c:null}function ct(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function z(r){if(ut(r)!==r)throw Error(i(188))}function tt(r){var s=r.alternate;if(!s){if(s=ut(r),s===null)throw Error(i(188));return s!==r?null:r}for(var c=r,d=s;;){var _=c.return;if(_===null)break;var v=_.alternate;if(v===null){if(d=_.return,d!==null){c=d;continue}break}if(_.child===v.child){for(v=_.child;v;){if(v===c)return z(_),r;if(v===d)return z(_),s;v=v.sibling}throw Error(i(188))}if(c.return!==d.return)c=_,d=v;else{for(var B=!1,w=_.child;w;){if(w===c){B=!0,c=_,d=v;break}if(w===d){B=!0,d=_,c=v;break}w=w.sibling}if(!B){for(w=v.child;w;){if(w===c){B=!0,c=v,d=_;break}if(w===d){B=!0,d=v,c=_;break}w=w.sibling}if(!B)throw Error(i(189))}}if(c.alternate!==d)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:s}function Tt(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=Tt(r),s!==null)return s;r=r.sibling}return null}var Rt=Array.isArray,yt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Mt={pending:!1,data:null,method:null,action:null},Lt=[],Ge=-1;function Pt(r){return{current:r}}function ne(r){0>Ge||(r.current=Lt[Ge],Lt[Ge]=null,Ge--)}function ce(r,s){Ge++,Lt[Ge]=r.current,r.current=s}var Te=Pt(null),Be=Pt(null),Fe=Pt(null),ve=Pt(null);function ln(r,s){switch(ce(Fe,s),ce(Be,r),ce(Te,null),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)&&(s=s.namespaceURI)?x2(s):0;break;default:if(r=r===8?s.parentNode:s,s=r.tagName,r=r.namespaceURI)r=x2(r),s=S2(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ne(Te),ce(Te,s)}function Pe(){ne(Te),ne(Be),ne(Fe)}function Xn(r){r.memoizedState!==null&&ce(ve,r);var s=Te.current,c=S2(s,r.type);s!==c&&(ce(Be,r),ce(Te,c))}function ir(r){Be.current===r&&(ne(Te),ne(Be)),ve.current===r&&(ne(ve),Vf._currentValue=Mt)}var ti=Object.prototype.hasOwnProperty,jn=n.unstable_scheduleCallback,ie=n.unstable_cancelCallback,Pn=n.unstable_shouldYield,Kr=n.unstable_requestPaint,pi=n.unstable_now,Xl=n.unstable_getCurrentPriorityLevel,Il=n.unstable_ImmediatePriority,xa=n.unstable_UserBlockingPriority,Js=n.unstable_NormalPriority,Yo=n.unstable_LowPriority,Yl=n.unstable_IdlePriority,is=n.log,$s=n.unstable_setDisableYieldValue,mi=null,an=null;function rs(r){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(mi,r,void 0,(r.current.flags&128)===128)}catch{}}function Mi(r){if(typeof is=="function"&&$s(r),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(mi,r)}catch{}}var Ze=Math.clz32?Math.clz32:qo,as=Math.log,ql=Math.LN2;function qo(r){return r>>>=0,r===0?32:31-(as(r)/ql|0)|0}var M=128,O=4194304;function F(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function at(r,s){var c=r.pendingLanes;if(c===0)return 0;var d=0,_=r.suspendedLanes,v=r.pingedLanes,B=r.warmLanes;r=r.finishedLanes!==0;var w=c&134217727;return w!==0?(c=w&~_,c!==0?d=F(c):(v&=w,v!==0?d=F(v):r||(B=w&~B,B!==0&&(d=F(B))))):(w=c&~_,w!==0?d=F(w):v!==0?d=F(v):r||(B=c&~B,B!==0&&(d=F(B)))),d===0?0:s!==0&&s!==d&&(s&_)===0&&(_=d&-d,B=s&-s,_>=B||_===32&&(B&4194176)!==0)?s:d}function Et(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Ft(r,s){switch(r){case 1:case 2:case 4:case 8:return s+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xe(){var r=M;return M<<=1,(M&4194176)===0&&(M=128),r}function En(){var r=O;return O<<=1,(O&62914560)===0&&(O=4194304),r}function Di(r){for(var s=[],c=0;31>c;c++)s.push(r);return s}function gi(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function rr(r,s,c,d,_,v){var B=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var w=r.entanglements,L=r.expirationTimes,Q=r.hiddenUpdates;for(c=B&~c;0<c;){var mt=31-Ze(c),_t=1<<mt;w[mt]=0,L[mt]=-1;var st=Q[mt];if(st!==null)for(Q[mt]=null,mt=0;mt<st.length;mt++){var dt=st[mt];dt!==null&&(dt.lane&=-536870913)}c&=~_t}d!==0&&ar(r,d,0),v!==0&&_===0&&r.tag!==0&&(r.suspendedLanes|=v&~(B&~s))}function ar(r,s,c){r.pendingLanes|=s,r.suspendedLanes&=~s;var d=31-Ze(s);r.entangledLanes|=s,r.entanglements[d]=r.entanglements[d]|1073741824|c&4194218}function sr(r,s){var c=r.entangledLanes|=s;for(r=r.entanglements;c;){var d=31-Ze(c),_=1<<d;_&s|r[d]&s&&(r[d]|=s),c&=~_}}function Kn(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function wi(){var r=yt.p;return r!==0?r:(r=window.event,r===void 0?32:F2(r.type))}function ei(r,s){var c=yt.p;try{return yt.p=r,s()}finally{yt.p=c}}var on=Math.random().toString(36).slice(2),he="__reactFiber$"+on,se="__reactProps$"+on,_i="__reactContainer$"+on,ss="__reactEvents$"+on,qd="__reactListeners$"+on,jd="__reactHandles$"+on,Kd="__reactResources$"+on,tl="__reactMarker$"+on;function jo(r){delete r[he],delete r[se],delete r[ss],delete r[qd],delete r[jd]}function Sa(r){var s=r[he];if(s)return s;for(var c=r.parentNode;c;){if(s=c[_i]||c[he]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(r=A2(r);r!==null;){if(c=r[he])return c;r=A2(r)}return s}r=c,c=r.parentNode}return null}function Nn(r){if(r=r[he]||r[_i]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function Je(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Wr(r){var s=r[Kd];return s||(s=r[Kd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function hn(r){r[tl]=!0}var ec=new Set,Qr={};function Zr(r,s){ls(r,s),ls(r+"Capture",s)}function ls(r,s){for(Qr[r]=s,r=0;r<s.length;r++)ec.add(s[r])}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mh={},Dh={};function Qd(r){return ti.call(Dh,r)?!0:ti.call(Mh,r)?!1:Wd.test(r)?Dh[r]=!0:(Mh[r]=!0,!1)}function Ko(r,s,c){if(Qd(s))if(c===null)r.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+c)}}function Wo(r,s,c){if(c===null)r.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+c)}}function wr(r,s,c,d){if(d===null)r.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(s,c,""+d)}}function Yi(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Zd(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Jd(r){var s=Zd(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),d=""+r[s];if(!r.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var _=c.get,v=c.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return _.call(this)},set:function(B){d=""+B,v.call(this,B)}}),Object.defineProperty(r,s,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(B){d=""+B},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Qo(r){r._valueTracker||(r._valueTracker=Jd(r))}function wh(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var c=s.getValue(),d="";return r&&(d=Zd(r)?r.checked?"true":"false":r.value),r=d,r!==c?(s.setValue(r),!0):!1}function jl(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var $d=/[\n"\\]/g;function qi(r){return r.replace($d,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function nc(r,s,c,d,_,v,B,w){r.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?r.type=B:r.removeAttribute("type"),s!=null?B==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Yi(s)):r.value!==""+Yi(s)&&(r.value=""+Yi(s)):B!=="submit"&&B!=="reset"||r.removeAttribute("value"),s!=null?ic(r,B,Yi(s)):c!=null?ic(r,B,Yi(c)):d!=null&&r.removeAttribute("value"),_==null&&v!=null&&(r.defaultChecked=!!v),_!=null&&(r.checked=_&&typeof _!="function"&&typeof _!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+Yi(w):r.removeAttribute("name")}function Uh(r,s,c,d,_,v,B,w){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.type=v),s!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||s!=null))return;c=c!=null?""+Yi(c):"",s=s!=null?""+Yi(s):c,w||s===r.value||(r.value=s),r.defaultValue=s}d=d??_,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=w?r.checked:!!d,r.defaultChecked=!!d,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(r.name=B)}function ic(r,s,c){s==="number"&&jl(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Kl(r,s,c,d){if(r=r.options,s){s={};for(var _=0;_<c.length;_++)s["$"+c[_]]=!0;for(c=0;c<r.length;c++)_=s.hasOwnProperty("$"+r[c].value),r[c].selected!==_&&(r[c].selected=_),_&&d&&(r[c].defaultSelected=!0)}else{for(c=""+Yi(c),s=null,_=0;_<r.length;_++){if(r[_].value===c){r[_].selected=!0,d&&(r[_].defaultSelected=!0);return}s!==null||r[_].disabled||(s=r[_])}s!==null&&(s.selected=!0)}}function Oh(r,s,c){if(s!=null&&(s=""+Yi(s),s!==r.value&&(r.value=s),c==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=c!=null?""+Yi(c):""}function el(r,s,c,d){if(s==null){if(d!=null){if(c!=null)throw Error(i(92));if(Rt(d)){if(1<d.length)throw Error(i(93));d=d[0]}c=d}c==null&&(c=""),s=c}c=Yi(s),r.defaultValue=c,d=r.textContent,d===c&&d!==""&&d!==null&&(r.value=d)}function nl(r,s){if(s){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=s;return}}r.textContent=s}var rc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zo(r,s,c){var d=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":d?r.setProperty(s,c):typeof c!="number"||c===0||rc.has(s)?s==="float"?r.cssFloat=c:r[s]=(""+c).trim():r[s]=c+"px"}function Gh(r,s,c){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var _ in s)d=s[_],s.hasOwnProperty(_)&&c[_]!==d&&Zo(r,_,d)}else for(var v in s)s.hasOwnProperty(v)&&Zo(r,v,s[v])}function Jo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ep=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $o(r){return ep.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var ac=null;function tu(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var il=null,rl=null;function sc(r){var s=Nn(r);if(s&&(r=s.stateNode)){var c=r[se]||null;t:switch(r=s.stateNode,s.type){case"input":if(nc(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+qi(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var d=c[s];if(d!==r&&d.form===r.form){var _=d[se]||null;if(!_)throw Error(i(90));nc(d,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(s=0;s<c.length;s++)d=c[s],d.form===r.form&&wh(d)}break t;case"textarea":Oh(r,c.value,c.defaultValue);break t;case"select":s=c.value,s!=null&&Kl(r,!!c.multiple,s,!1)}}}var lc=!1;function Ph(r,s,c){if(lc)return r(s,c);lc=!0;try{var d=r(s);return d}finally{if(lc=!1,(il!==null||rl!==null)&&(Cl(),il&&(s=il,r=rl,rl=il=null,sc(s),r)))for(s=0;s<r.length;s++)sc(r[s])}}function Wl(r,s){var c=r.stateNode;if(c===null)return null;var d=c[se]||null;if(d===null)return null;c=d[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break t;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,s,typeof c));return c}var eu=!1;if(Dr)try{var Ql={};Object.defineProperty(Ql,"passive",{get:function(){eu=!0}}),window.addEventListener("test",Ql,Ql),window.removeEventListener("test",Ql,Ql)}catch{eu=!1}var Ea=null,Nh=null,oc=null;function zh(){if(oc)return oc;var r,s=Nh,c=s.length,d,_="value"in Ea?Ea.value:Ea.textContent,v=_.length;for(r=0;r<c&&s[r]===_[r];r++);var B=c-r;for(d=1;d<=B&&s[c-d]===_[v-d];d++);return oc=_.slice(r,1<d?1-d:void 0)}function os(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Zl(){return!0}function nu(){return!1}function yi(r){function s(c,d,_,v,B){this._reactName=c,this._targetInst=_,this.type=d,this.nativeEvent=v,this.target=B,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(c=r[w],this[w]=c?c(v):v[w]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Zl:nu,this.isPropagationStopped=nu,this}return X(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Zl)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Zl)},persist:function(){},isPersistent:Zl}),s}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jl=yi(us),$l=X({},us,{view:0,detail:0}),np=yi($l),Ta,to,eo,no=X({},$l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ru,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==eo&&(eo&&r.type==="mousemove"?(Ta=r.screenX-eo.screenX,to=r.screenY-eo.screenY):to=Ta=0,eo=r),Ta)},movementY:function(r){return"movementY"in r?r.movementY:to}}),Hh=yi(no),ip=X({},no,{dataTransfer:0}),o0=yi(ip),Wn=X({},$l,{relatedTarget:0}),uc=yi(Wn),rp=X({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),ap=yi(rp),sp=X({},us,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),lp=yi(sp),iu=X({},us,{data:0}),cc=yi(iu),op={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},up={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lh(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=cp[r])?!!s[r]:!1}function ru(){return Lh}var hp=X({},$l,{key:function(r){if(r.key){var s=op[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=os(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?up[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ru,charCode:function(r){return r.type==="keypress"?os(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?os(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Fh=yi(hp),Vh=X({},no,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hc=yi(Vh),fp=X({},$l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ru}),kh=yi(fp),dp=X({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),Aa=yi(dp),Xh=X({},no,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),u0=yi(Xh),pp=X({},us,{newState:0,oldState:0}),cs=yi(pp),Ca=[9,13,27,32],au=Dr&&"CompositionEvent"in window,al=null;Dr&&"documentMode"in document&&(al=document.documentMode);var su=Dr&&"TextEvent"in window&&!al,lu=Dr&&(!au||al&&8<al&&11>=al),hs=" ",Qn=!1;function ou(r,s){switch(r){case"keyup":return Ca.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ih(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var fs=!1;function uu(r,s){switch(r){case"compositionend":return Ih(s);case"keypress":return s.which!==32?null:(Qn=!0,hs);case"textInput":return r=s.data,r===hs&&Qn?null:r;default:return null}}function Yh(r,s){if(fs)return r==="compositionend"||!au&&ou(r,s)?(r=zh(),oc=Nh=Ea=null,fs=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return lu&&s.locale!=="ko"?null:s.data;default:return null}}var fc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!fc[r.type]:s==="textarea"}function Ui(r,s,c,d){il?rl?rl.push(d):rl=[d]:il=d,s=pm(s,"onChange"),0<s.length&&(c=new Jl("onChange","change",null,c,d),r.push({event:c,listeners:s}))}var io=null,sl=null;function mp(r){g2(r,0)}function cu(r){var s=Je(r);if(wh(s))return r}function dc(r,s){if(r==="change")return s}var pc=!1;if(Dr){var mc;if(Dr){var ro="oninput"in document;if(!ro){var ao=document.createElement("div");ao.setAttribute("oninput","return;"),ro=typeof ao.oninput=="function"}mc=ro}else mc=!1;pc=mc&&(!document.documentMode||9<document.documentMode)}function $e(){io&&(io.detachEvent("onpropertychange",gp),sl=io=null)}function gp(r){if(r.propertyName==="value"&&cu(sl)){var s=[];Ui(s,sl,r,tu(r)),Ph(mp,s)}}function c0(r,s,c){r==="focusin"?($e(),io=s,sl=c,io.attachEvent("onpropertychange",gp)):r==="focusout"&&$e()}function _p(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return cu(sl)}function hu(r,s){if(r==="click")return cu(s)}function ds(r,s){if(r==="input"||r==="change")return cu(s)}function yp(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Oi=typeof Object.is=="function"?Object.is:yp;function Ur(r,s){if(Oi(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var c=Object.keys(r),d=Object.keys(s);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var _=c[d];if(!ti.call(s,_)||!Oi(r[_],s[_]))return!1}return!0}function Gi(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function jh(r,s){var c=Gi(r);r=0;for(var d;c;){if(c.nodeType===3){if(d=r+c.textContent.length,r<=s&&d>=s)return{node:c,offset:s-r};r=d}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=Gi(c)}}function Kh(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Kh(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Wh(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=jl(r.document);s instanceof r.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)r=s.contentWindow;else break;s=jl(r.document)}return s}function fu(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function Qh(r,s){var c=Wh(s);s=r.focusedElem;var d=r.selectionRange;if(c!==s&&s&&s.ownerDocument&&Kh(s.ownerDocument.documentElement,s)){if(d!==null&&fu(s)){if(r=d.start,c=d.end,c===void 0&&(c=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(c,s.value.length);else if(c=(r=s.ownerDocument||document)&&r.defaultView||window,c.getSelection){c=c.getSelection();var _=s.textContent.length,v=Math.min(d.start,_);d=d.end===void 0?v:Math.min(d.end,_),!c.extend&&v>d&&(_=d,d=v,v=_),_=jh(s,v);var B=jh(s,d);_&&B&&(c.rangeCount!==1||c.anchorNode!==_.node||c.anchorOffset!==_.offset||c.focusNode!==B.node||c.focusOffset!==B.offset)&&(r=r.createRange(),r.setStart(_.node,_.offset),c.removeAllRanges(),v>d?(c.addRange(r),c.extend(B.node,B.offset)):(r.setEnd(B.node,B.offset),c.addRange(r)))}}for(r=[],c=s;c=c.parentNode;)c.nodeType===1&&r.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)c=r[s],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var gc=Dr&&"documentMode"in document&&11>=document.documentMode,ll=null,Zh=null,so=null,_c=!1;function lr(r,s,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;_c||ll==null||ll!==jl(d)||(d=ll,"selectionStart"in d&&fu(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),so&&Ur(so,d)||(so=d,d=pm(Zh,"onSelect"),0<d.length&&(s=new Jl("onSelect","select",null,s,c),r.push({event:s,listeners:d}),s.target=ll)))}function Ba(r,s){var c={};return c[r.toLowerCase()]=s.toLowerCase(),c["Webkit"+r]="webkit"+s,c["Moz"+r]="moz"+s,c}var ol={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionrun:Ba("Transition","TransitionRun"),transitionstart:Ba("Transition","TransitionStart"),transitioncancel:Ba("Transition","TransitionCancel"),transitionend:Ba("Transition","TransitionEnd")},Jh={},yc={};Dr&&(yc=document.createElement("div").style,"AnimationEvent"in window||(delete ol.animationend.animation,delete ol.animationiteration.animation,delete ol.animationstart.animation),"TransitionEvent"in window||delete ol.transitionend.transition);function Tn(r){if(Jh[r])return Jh[r];if(!ol[r])return r;var s=ol[r],c;for(c in s)if(s.hasOwnProperty(c)&&c in yc)return Jh[r]=s[c];return r}var $h=Tn("animationend"),Pi=Tn("animationiteration"),tf=Tn("animationstart"),Ra=Tn("transitionrun"),lo=Tn("transitionstart"),ps=Tn("transitioncancel"),bc=Tn("transitionend"),vc=new Map,Ma="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function or(r,s){vc.set(r,s),Zr(s,[r])}var Zn=[],Jr=0,Da=0;function du(){for(var r=Jr,s=Da=Jr=0;s<r;){var c=Zn[s];Zn[s++]=null;var d=Zn[s];Zn[s++]=null;var _=Zn[s];Zn[s++]=null;var v=Zn[s];if(Zn[s++]=null,d!==null&&_!==null){var B=d.pending;B===null?_.next=_:(_.next=B.next,B.next=_),d.pending=_}v!==0&&mu(c,_,v)}}function pu(r,s,c,d){Zn[Jr++]=r,Zn[Jr++]=s,Zn[Jr++]=c,Zn[Jr++]=d,Da|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function ul(r,s,c,d){return pu(r,s,c,d),gu(r)}function wa(r,s){return pu(r,null,null,s),gu(r)}function mu(r,s,c){r.lanes|=c;var d=r.alternate;d!==null&&(d.lanes|=c);for(var _=!1,v=r.return;v!==null;)v.childLanes|=c,d=v.alternate,d!==null&&(d.childLanes|=c),v.tag===22&&(r=v.stateNode,r===null||r._visibility&1||(_=!0)),r=v,v=v.return;_&&s!==null&&r.tag===3&&(v=r.stateNode,_=31-Ze(c),v=v.hiddenUpdates,r=v[_],r===null?v[_]=[s]:r.push(s),s.lane=c|536870912)}function gu(r){if(50<yr)throw yr=0,Ja=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var ms={},xc=new WeakMap;function Ni(r,s){if(typeof r=="object"&&r!==null){var c=xc.get(r);return c!==void 0?c:(s={value:r,source:s,stack:j(s)},xc.set(r,s),s)}return{value:r,source:s,stack:j(s)}}var cl=[],gs=0,ni=null,_u=0,Ie=[],ji=0,Ua=null,$r=1,Oa="";function bi(r,s){cl[gs++]=_u,cl[gs++]=ni,ni=r,_u=s}function ef(r,s,c){Ie[ji++]=$r,Ie[ji++]=Oa,Ie[ji++]=Ua,Ua=r;var d=$r;r=Oa;var _=32-Ze(d)-1;d&=~(1<<_),c+=1;var v=32-Ze(s)+_;if(30<v){var B=_-_%5;v=(d&(1<<B)-1).toString(32),d>>=B,_-=B,$r=1<<32-Ze(s)+_|c<<_|d,Oa=v+r}else $r=1<<v|c<<_|d,Oa=r}function yu(r){r.return!==null&&(bi(r,1),ef(r,1,0))}function _s(r){for(;r===ni;)ni=cl[--gs],cl[gs]=null,_u=cl[--gs],cl[gs]=null;for(;r===Ua;)Ua=Ie[--ji],Ie[ji]=null,Oa=Ie[--ji],Ie[ji]=null,$r=Ie[--ji],Ie[ji]=null}var ii=null,In=null,ge=!1,ur=null,cr=!1,bu=Error(i(519));function hl(r){var s=Error(i(418,""));throw ta(Ni(s,r)),bu}function bp(r){var s=r.stateNode,c=r.type,d=r.memoizedProps;switch(s[he]=r,s[se]=d,c){case"dialog":ye("cancel",s),ye("close",s);break;case"iframe":case"object":case"embed":ye("load",s);break;case"video":case"audio":for(c=0;c<Nf.length;c++)ye(Nf[c],s);break;case"source":ye("error",s);break;case"img":case"image":case"link":ye("error",s),ye("load",s);break;case"details":ye("toggle",s);break;case"input":ye("invalid",s),Uh(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Qo(s);break;case"select":ye("invalid",s);break;case"textarea":ye("invalid",s),el(s,d.value,d.defaultValue,d.children),Qo(s)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||d.suppressHydrationWarning===!0||v2(s.textContent,c)?(d.popover!=null&&(ye("beforetoggle",s),ye("toggle",s)),d.onScroll!=null&&ye("scroll",s),d.onScrollEnd!=null&&ye("scrollend",s),d.onClick!=null&&(s.onclick=mm),s=!0):s=!1,s||hl(r)}function vp(r){for(ii=r.return;ii;)switch(ii.tag){case 3:case 27:cr=!0;return;case 5:case 13:cr=!1;return;default:ii=ii.return}}function oo(r){if(r!==ii)return!1;if(!ge)return vp(r),ge=!0,!1;var s=!1,c;if((c=r.tag!==3&&r.tag!==27)&&((c=r.tag===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||D0(r.type,r.memoizedProps)),c=!c),c&&(s=!0),s&&In&&hl(r),vp(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));t:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(c=r.data,c==="/$"){if(s===0){In=ts(r.nextSibling);break t}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++;r=r.nextSibling}In=null}}else In=ii?ts(r.stateNode.nextSibling):null;return!0}function uo(){In=ii=null,ge=!1}function ta(r){ur===null?ur=[r]:ur.push(r)}var ys=Error(i(460)),nf=Error(i(474)),Sc={then:function(){}};function xp(r){return r=r.status,r==="fulfilled"||r==="rejected"}function vu(){}function bs(r,s,c){switch(c=r[c],c===void 0?r.push(s):c!==s&&(s.then(vu,vu),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===ys?Error(i(483)):r;default:if(typeof s.status=="string")s.then(vu,vu);else{if(r=ze,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(d){if(s.status==="pending"){var _=s;_.status="fulfilled",_.value=d}},function(d){if(s.status==="pending"){var _=s;_.status="rejected",_.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,r===ys?Error(i(483)):r}throw co=s,ys}}var co=null;function Re(){if(co===null)throw Error(i(459));var r=co;return co=null,r}var vs=null,xu=0;function Su(r){var s=xu;return xu+=1,vs===null&&(vs=[]),bs(vs,r,s)}function Eu(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Ec(r,s){throw s.$$typeof===o?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Sp(r){var s=r._init;return s(r._payload)}function Ep(r){function s(J,K){if(r){var nt=J.deletions;nt===null?(J.deletions=[K],J.flags|=16):nt.push(K)}}function c(J,K){if(!r)return null;for(;K!==null;)s(J,K),K=K.sibling;return null}function d(J){for(var K=new Map;J!==null;)J.key!==null?K.set(J.key,J):K.set(J.index,J),J=J.sibling;return K}function _(J,K){return J=Ei(J,K),J.index=0,J.sibling=null,J}function v(J,K,nt){return J.index=nt,r?(nt=J.alternate,nt!==null?(nt=nt.index,nt<K?(J.flags|=33554434,K):nt):(J.flags|=33554434,K)):(J.flags|=1048576,K)}function B(J){return r&&J.alternate===null&&(J.flags|=33554434),J}function w(J,K,nt,gt){return K===null||K.tag!==6?(K=Rn(nt,J.mode,gt),K.return=J,K):(K=_(K,nt),K.return=J,K)}function L(J,K,nt,gt){var Dt=nt.type;return Dt===m?mt(J,K,nt.props.children,gt,nt.key):K!==null&&(K.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===P&&Sp(Dt)===K.type)?(K=_(K,nt.props),Eu(K,nt),K.return=J,K):(K=Co(nt.type,nt.key,nt.props,null,J.mode,gt),Eu(K,nt),K.return=J,K)}function Q(J,K,nt,gt){return K===null||K.tag!==4||K.stateNode.containerInfo!==nt.containerInfo||K.stateNode.implementation!==nt.implementation?(K=Pu(nt,J.mode,gt),K.return=J,K):(K=_(K,nt.children||[]),K.return=J,K)}function mt(J,K,nt,gt,Dt){return K===null||K.tag!==7?(K=Ls(nt,J.mode,gt,Dt),K.return=J,K):(K=_(K,nt),K.return=J,K)}function _t(J,K,nt){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Rn(""+K,J.mode,nt),K.return=J,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case h:return nt=Co(K.type,K.key,K.props,null,J.mode,nt),Eu(nt,K),nt.return=J,nt;case f:return K=Pu(K,J.mode,nt),K.return=J,K;case P:var gt=K._init;return K=gt(K._payload),_t(J,K,nt)}if(Rt(K)||ot(K))return K=Ls(K,J.mode,nt,null),K.return=J,K;if(typeof K.then=="function")return _t(J,Su(K),nt);if(K.$$typeof===T)return _t(J,Fc(J,K),nt);Ec(J,K)}return null}function st(J,K,nt,gt){var Dt=K!==null?K.key:null;if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return Dt!==null?null:w(J,K,""+nt,gt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case h:return nt.key===Dt?L(J,K,nt,gt):null;case f:return nt.key===Dt?Q(J,K,nt,gt):null;case P:return Dt=nt._init,nt=Dt(nt._payload),st(J,K,nt,gt)}if(Rt(nt)||ot(nt))return Dt!==null?null:mt(J,K,nt,gt,null);if(typeof nt.then=="function")return st(J,K,Su(nt),gt);if(nt.$$typeof===T)return st(J,K,Fc(J,nt),gt);Ec(J,nt)}return null}function dt(J,K,nt,gt,Dt){if(typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint")return J=J.get(nt)||null,w(K,J,""+gt,Dt);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case h:return J=J.get(gt.key===null?nt:gt.key)||null,L(K,J,gt,Dt);case f:return J=J.get(gt.key===null?nt:gt.key)||null,Q(K,J,gt,Dt);case P:var de=gt._init;return gt=de(gt._payload),dt(J,K,nt,gt,Dt)}if(Rt(gt)||ot(gt))return J=J.get(nt)||null,mt(K,J,gt,Dt,null);if(typeof gt.then=="function")return dt(J,K,nt,Su(gt),Dt);if(gt.$$typeof===T)return dt(J,K,nt,Fc(K,gt),Dt);Ec(K,gt)}return null}function Ot(J,K,nt,gt){for(var Dt=null,de=null,Nt=K,Yt=K=0,ci=null;Nt!==null&&Yt<nt.length;Yt++){Nt.index>Yt?(ci=Nt,Nt=null):ci=Nt.sibling;var Me=st(J,Nt,nt[Yt],gt);if(Me===null){Nt===null&&(Nt=ci);break}r&&Nt&&Me.alternate===null&&s(J,Nt),K=v(Me,K,Yt),de===null?Dt=Me:de.sibling=Me,de=Me,Nt=ci}if(Yt===nt.length)return c(J,Nt),ge&&bi(J,Yt),Dt;if(Nt===null){for(;Yt<nt.length;Yt++)Nt=_t(J,nt[Yt],gt),Nt!==null&&(K=v(Nt,K,Yt),de===null?Dt=Nt:de.sibling=Nt,de=Nt);return ge&&bi(J,Yt),Dt}for(Nt=d(Nt);Yt<nt.length;Yt++)ci=dt(Nt,J,Yt,nt[Yt],gt),ci!==null&&(r&&ci.alternate!==null&&Nt.delete(ci.key===null?Yt:ci.key),K=v(ci,K,Yt),de===null?Dt=ci:de.sibling=ci,de=ci);return r&&Nt.forEach(function(Po){return s(J,Po)}),ge&&bi(J,Yt),Dt}function Zt(J,K,nt,gt){if(nt==null)throw Error(i(151));for(var Dt=null,de=null,Nt=K,Yt=K=0,ci=null,Me=nt.next();Nt!==null&&!Me.done;Yt++,Me=nt.next()){Nt.index>Yt?(ci=Nt,Nt=null):ci=Nt.sibling;var Po=st(J,Nt,Me.value,gt);if(Po===null){Nt===null&&(Nt=ci);break}r&&Nt&&Po.alternate===null&&s(J,Nt),K=v(Po,K,Yt),de===null?Dt=Po:de.sibling=Po,de=Po,Nt=ci}if(Me.done)return c(J,Nt),ge&&bi(J,Yt),Dt;if(Nt===null){for(;!Me.done;Yt++,Me=nt.next())Me=_t(J,Me.value,gt),Me!==null&&(K=v(Me,K,Yt),de===null?Dt=Me:de.sibling=Me,de=Me);return ge&&bi(J,Yt),Dt}for(Nt=d(Nt);!Me.done;Yt++,Me=nt.next())Me=dt(Nt,J,Yt,Me.value,gt),Me!==null&&(r&&Me.alternate!==null&&Nt.delete(Me.key===null?Yt:Me.key),K=v(Me,K,Yt),de===null?Dt=Me:de.sibling=Me,de=Me);return r&&Nt.forEach(function(CM){return s(J,CM)}),ge&&bi(J,Yt),Dt}function wn(J,K,nt,gt){if(typeof nt=="object"&&nt!==null&&nt.type===m&&nt.key===null&&(nt=nt.props.children),typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case h:t:{for(var Dt=nt.key;K!==null;){if(K.key===Dt){if(Dt=nt.type,Dt===m){if(K.tag===7){c(J,K.sibling),gt=_(K,nt.props.children),gt.return=J,J=gt;break t}}else if(K.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===P&&Sp(Dt)===K.type){c(J,K.sibling),gt=_(K,nt.props),Eu(gt,nt),gt.return=J,J=gt;break t}c(J,K);break}else s(J,K);K=K.sibling}nt.type===m?(gt=Ls(nt.props.children,J.mode,gt,nt.key),gt.return=J,J=gt):(gt=Co(nt.type,nt.key,nt.props,null,J.mode,gt),Eu(gt,nt),gt.return=J,J=gt)}return B(J);case f:t:{for(Dt=nt.key;K!==null;){if(K.key===Dt)if(K.tag===4&&K.stateNode.containerInfo===nt.containerInfo&&K.stateNode.implementation===nt.implementation){c(J,K.sibling),gt=_(K,nt.children||[]),gt.return=J,J=gt;break t}else{c(J,K);break}else s(J,K);K=K.sibling}gt=Pu(nt,J.mode,gt),gt.return=J,J=gt}return B(J);case P:return Dt=nt._init,nt=Dt(nt._payload),wn(J,K,nt,gt)}if(Rt(nt))return Ot(J,K,nt,gt);if(ot(nt)){if(Dt=ot(nt),typeof Dt!="function")throw Error(i(150));return nt=Dt.call(nt),Zt(J,K,nt,gt)}if(typeof nt.then=="function")return wn(J,K,Su(nt),gt);if(nt.$$typeof===T)return wn(J,K,Fc(J,nt),gt);Ec(J,nt)}return typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint"?(nt=""+nt,K!==null&&K.tag===6?(c(J,K.sibling),gt=_(K,nt),gt.return=J,J=gt):(c(J,K),gt=Rn(nt,J.mode,gt),gt.return=J,J=gt),B(J)):c(J,K)}return function(J,K,nt,gt){try{xu=0;var Dt=wn(J,K,nt,gt);return vs=null,Dt}catch(Nt){if(Nt===ys)throw Nt;var de=yn(29,Nt,null,J.mode);return de.lanes=gt,de.return=J,de}finally{}}}var Ga=Ep(!0),Pa=Ep(!1),fl=Pt(null),dl=Pt(0);function xs(r,s){r=Za,ce(dl,r),ce(fl,s),Za=r|s.baseLanes}function Tc(){ce(dl,Za),ce(fl,fl.current)}function Tu(){Za=dl.current,ne(fl),ne(dl)}var zi=Pt(null),ea=null;function Na(r){var s=r.alternate;ce(An,An.current&1),ce(zi,r),ea===null&&(s===null||fl.current!==null||s.memoizedState!==null)&&(ea=r)}function rf(r){if(r.tag===22){if(ce(An,An.current),ce(zi,r),ea===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(ea=r)}}else za()}function za(){ce(An,An.current),ce(zi,zi.current)}function na(r){ne(zi),ea===r&&(ea=null),ne(An)}var An=Pt(0);function ho(r){for(var s=r;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var le=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(c,d){r.push(d)}};this.abort=function(){s.aborted=!0,r.forEach(function(c){return c()})}},h0=n.unstable_scheduleCallback,Ki=n.unstable_NormalPriority,fn={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function af(){return{controller:new le,data:new Map,refCount:0}}function Ss(r){r.refCount--,r.refCount===0&&h0(Ki,function(){r.controller.abort()})}var ia=null,Es=0,pl=0,Ts=null;function f0(r,s){if(ia===null){var c=ia=[];Es=0,pl=x0(),Ts={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Es++,s.then(sf,sf),s}function sf(){if(--Es===0&&ia!==null){Ts!==null&&(Ts.status="fulfilled");var r=ia;ia=null,pl=0,Ts=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function As(r,s){var c=[],d={status:"pending",value:null,reason:null,then:function(_){c.push(_)}};return r.then(function(){d.status="fulfilled",d.value=s;for(var _=0;_<c.length;_++)(0,c[_])(s)},function(_){for(d.status="rejected",d.reason=_,_=0;_<c.length;_++)(0,c[_])(void 0)}),d}var Ac=N.S;N.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&f0(r,s),Ac!==null&&Ac(r,s)};var Ha=Pt(null);function Au(){var r=Ha.current;return r!==null?r:ze.pooledCache}function fo(r,s){s===null?ce(Ha,Ha.current):ce(Ha,s.pool)}function La(){var r=Au();return r===null?null:{parent:fn._currentValue,pool:r}}var Fa=0,$t=null,De=null,Cn=null,It=!1,Cs=!1,Bs=!1,po=0,Rs=0,mo=null,d0=0;function un(){throw Error(i(321))}function ml(r,s){if(s===null)return!1;for(var c=0;c<s.length&&c<r.length;c++)if(!Oi(r[c],s[c]))return!1;return!0}function lf(r,s,c,d,_,v){return Fa=v,$t=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,N.H=r===null||r.memoizedState===null?Ds:ka,Bs=!1,v=c(d,_),Bs=!1,Cs&&(v=Ap(s,c,d,_)),Tp(r),v}function Tp(r){N.H=aa;var s=De!==null&&De.next!==null;if(Fa=0,Cn=De=$t=null,It=!1,Rs=0,mo=null,s)throw Error(i(300));r===null||zn||(r=r.dependencies,r!==null&&vo(r)&&(zn=!0))}function Ap(r,s,c,d){$t=r;var _=0;do{if(Cs&&(mo=null),Rs=0,Cs=!1,25<=_)throw Error(i(301));if(_+=1,Cn=De=null,r.updateQueue!=null){var v=r.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}N.H=yl,v=s(c,d)}while(Cs);return v}function p0(){var r=N.H,s=r.useState()[0];return s=typeof s.then=="function"?Bu(s):s,r=r.useState()[0],(De!==null?De.memoizedState:null)!==r&&($t.flags|=1024),s}function of(){var r=po!==0;return po=0,r}function Cu(r,s,c){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~c}function Cc(r){if(It){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}It=!1}Fa=0,Cn=De=$t=null,Cs=!1,Rs=po=0,mo=null}function Jn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?$t.memoizedState=Cn=r:Cn=Cn.next=r,Cn}function dn(){if(De===null){var r=$t.alternate;r=r!==null?r.memoizedState:null}else r=De.next;var s=Cn===null?$t.memoizedState:Cn.next;if(s!==null)Cn=s,De=r;else{if(r===null)throw $t.alternate===null?Error(i(467)):Error(i(310));De=r,r={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Cn===null?$t.memoizedState=Cn=r:Cn=Cn.next=r}return Cn}var Bc;Bc=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Bu(r){var s=Rs;return Rs+=1,mo===null&&(mo=[]),r=bs(mo,r,s),s=$t,(Cn===null?s.memoizedState:Cn.next)===null&&(s=s.alternate,N.H=s===null||s.memoizedState===null?Ds:ka),r}function go(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Bu(r);if(r.$$typeof===T)return ri(r)}throw Error(i(438,String(r)))}function Or(r){var s=null,c=$t.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var d=$t.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(_){return _.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Bc(),$t.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(r),d=0;d<r;d++)c[d]=q;return s.index++,c}function tn(r,s){return typeof s=="function"?s(r):s}function Gr(r){var s=dn();return Hi(s,De,r)}function Hi(r,s,c){var d=r.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=c;var _=r.baseQueue,v=d.pending;if(v!==null){if(_!==null){var B=_.next;_.next=v.next,v.next=B}s.baseQueue=_=v,d.pending=null}if(v=r.baseState,_===null)r.memoizedState=v;else{s=_.next;var w=B=null,L=null,Q=s,mt=!1;do{var _t=Q.lane&-536870913;if(_t!==Q.lane?(Vt&_t)===_t:(Fa&_t)===_t){var st=Q.revertLane;if(st===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),_t===pl&&(mt=!0);else if((Fa&st)===st){Q=Q.next,st===pl&&(mt=!0);continue}else _t={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(w=L=_t,B=v):L=L.next=_t,$t.lanes|=st,Vr|=st;_t=Q.action,Bs&&c(v,_t),v=Q.hasEagerState?Q.eagerState:c(v,_t)}else st={lane:_t,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(w=L=st,B=v):L=L.next=st,$t.lanes|=_t,Vr|=_t;Q=Q.next}while(Q!==null&&Q!==s);if(L===null?B=v:L.next=w,!Oi(v,r.memoizedState)&&(zn=!0,mt&&(c=Ts,c!==null)))throw c;r.memoizedState=v,r.baseState=B,r.baseQueue=L,d.lastRenderedState=v}return _===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function Rc(r){var s=dn(),c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var d=c.dispatch,_=c.pending,v=s.memoizedState;if(_!==null){c.pending=null;var B=_=_.next;do v=r(v,B.action),B=B.next;while(B!==_);Oi(v,s.memoizedState)||(zn=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),c.lastRenderedState=v}return[v,d]}function Cp(r,s,c){var d=$t,_=dn(),v=ge;if(v){if(c===void 0)throw Error(i(407));c=c()}else c=s();var B=!Oi((De||_).memoizedState,c);if(B&&(_.memoizedState=c,zn=!0),_=_.queue,ff(Bp.bind(null,d,_,r),[r]),_.getSnapshot!==s||B||Cn!==null&&Cn.memoizedState.tag&1){if(d.flags|=2048,ra(9,Ms.bind(null,d,_,c,s),{destroy:void 0},null),ze===null)throw Error(i(349));v||(Fa&60)!==0||vi(d,s,c)}return c}function vi(r,s,c){r.flags|=16384,r={getSnapshot:s,value:c},s=$t.updateQueue,s===null?(s=Bc(),$t.updateQueue=s,s.stores=[r]):(c=s.stores,c===null?s.stores=[r]:c.push(r))}function Ms(r,s,c,d){s.value=c,s.getSnapshot=d,Rp(s)&&Mp(r)}function Bp(r,s,c){return c(function(){Rp(s)&&Mp(r)})}function Rp(r){var s=r.getSnapshot;r=r.value;try{var c=s();return!Oi(r,c)}catch{return!0}}function Mp(r){var s=wa(r,2);s!==null&&Dn(s,r,2)}function uf(r){var s=Jn();if(typeof r=="function"){var c=r;if(r=c(),Bs){Mi(!0);try{c()}finally{Mi(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tn,lastRenderedState:r},s}function cf(r,s,c,d){return r.baseState=c,Hi(r,De,typeof d=="function"?d:tn)}function m0(r,s,c,d,_){if(Oc(r))throw Error(i(485));if(r=s.action,r!==null){var v={payload:_,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){v.listeners.push(B)}};N.T!==null?c(!0):v.isTransition=!1,d(v),c=s.pending,c===null?(v.next=s.pending=v,hf(s,v)):(v.next=c.next,s.pending=c.next=v)}}function hf(r,s){var c=s.action,d=s.payload,_=r.state;if(s.isTransition){var v=N.T,B={};N.T=B;try{var w=c(_,d),L=N.S;L!==null&&L(B,w),Dp(r,s,w)}catch(Q){Va(r,s,Q)}finally{N.T=v}}else try{v=c(_,d),Dp(r,s,v)}catch(Q){Va(r,s,Q)}}function Dp(r,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){gl(r,s,d)},function(d){return Va(r,s,d)}):gl(r,s,c)}function gl(r,s,c){s.status="fulfilled",s.value=c,wp(s),r.state=c,s=r.pending,s!==null&&(c=s.next,c===s?r.pending=null:(c=c.next,s.next=c,hf(r,c)))}function Va(r,s,c){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=c,wp(s),s=s.next;while(s!==d)}r.action=null}function wp(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Up(r,s){return s}function Op(r,s){if(ge){var c=ze.formState;if(c!==null){t:{var d=$t;if(ge){if(In){e:{for(var _=In,v=cr;_.nodeType!==8;){if(!v){_=null;break e}if(_=ts(_.nextSibling),_===null){_=null;break e}}v=_.data,_=v==="F!"||v==="F"?_:null}if(_){In=ts(_.nextSibling),d=_.data==="F!";break t}}hl(d)}d=!1}d&&(s=c[0])}}return c=Jn(),c.memoizedState=c.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Up,lastRenderedState:s},c.queue=d,c=gf.bind(null,$t,d),d.dispatch=c,d=uf(!1),v=Ru.bind(null,$t,!1,d.queue),d=Jn(),_={state:s,dispatch:null,action:r,pending:null},d.queue=_,c=m0.bind(null,$t,_,v,c),_.dispatch=c,d.memoizedState=r,[s,c,!1]}function _o(r){var s=dn();return Gp(s,De,r)}function Gp(r,s,c){s=Hi(r,s,Up)[0],r=Gr(tn)[0],s=typeof s=="object"&&s!==null&&typeof s.then=="function"?Bu(s):s;var d=dn(),_=d.queue,v=_.dispatch;return c!==d.memoizedState&&($t.flags|=2048,ra(9,g0.bind(null,_,c),{destroy:void 0},null)),[s,v,r]}function g0(r,s){r.action=s}function Pp(r){var s=dn(),c=De;if(c!==null)return Gp(s,c,r);dn(),s=s.memoizedState,c=dn();var d=c.queue.dispatch;return c.memoizedState=r,[s,d,!1]}function ra(r,s,c,d){return r={tag:r,create:s,inst:c,deps:d,next:null},s=$t.updateQueue,s===null&&(s=Bc(),$t.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=r.next=r:(d=c.next,c.next=r,r.next=d,s.lastEffect=r),r}function Np(){return dn().memoizedState}function Mc(r,s,c,d){var _=Jn();$t.flags|=r,_.memoizedState=ra(1|s,c,{destroy:void 0},d===void 0?null:d)}function Dc(r,s,c,d){var _=dn();d=d===void 0?null:d;var v=_.memoizedState.inst;De!==null&&d!==null&&ml(d,De.memoizedState.deps)?_.memoizedState=ra(s,c,v,d):($t.flags|=r,_.memoizedState=ra(1|s,c,v,d))}function zp(r,s){Mc(8390656,8,r,s)}function ff(r,s){Dc(2048,8,r,s)}function Hp(r,s){return Dc(4,2,r,s)}function Lp(r,s){return Dc(4,4,r,s)}function Fp(r,s){if(typeof s=="function"){r=r();var c=s(r);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Vp(r,s,c){c=c!=null?c.concat([r]):null,Dc(4,4,Fp.bind(null,s,r),c)}function df(){}function kp(r,s){var c=dn();s=s===void 0?null:s;var d=c.memoizedState;return s!==null&&ml(s,d[1])?d[0]:(c.memoizedState=[r,s],r)}function Xp(r,s){var c=dn();s=s===void 0?null:s;var d=c.memoizedState;if(s!==null&&ml(s,d[1]))return d[0];if(d=r(),Bs){Mi(!0);try{r()}finally{Mi(!1)}}return c.memoizedState=[d,s],d}function wc(r,s,c){return c===void 0||(Fa&1073741824)!==0?r.memoizedState=s:(r.memoizedState=c,r=$i(),$t.lanes|=r,Vr|=r,c)}function Ip(r,s,c,d){return Oi(c,s)?c:fl.current!==null?(r=wc(r,c,d),Oi(r,s)||(zn=!0),r):(Fa&42)===0?(zn=!0,r.memoizedState=c):(r=$i(),$t.lanes|=r,Vr|=r,s)}function Yp(r,s,c,d,_){var v=yt.p;yt.p=v!==0&&8>v?v:8;var B=N.T,w={};N.T=w,Ru(r,!1,s,c);try{var L=_(),Q=N.S;if(Q!==null&&Q(w,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var mt=As(L,d);_l(r,s,mt,Ai(r))}else _l(r,s,d,Ai(r))}catch(_t){_l(r,s,{then:function(){},status:"rejected",reason:_t},Ai())}finally{yt.p=v,N.T=B}}function _0(){}function pf(r,s,c,d){if(r.tag!==5)throw Error(i(476));var _=qp(r).queue;Yp(r,_,s,Mt,c===null?_0:function(){return jp(r),c(d)})}function qp(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:Mt,baseState:Mt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tn,lastRenderedState:Mt},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tn,lastRenderedState:c},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function jp(r){var s=qp(r).next.queue;_l(r,s,{},Ai())}function Uc(){return ri(Vf)}function mf(){return dn().memoizedState}function Kp(){return dn().memoizedState}function Wp(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var c=Ai();r=Zi(c);var d=Ji(s,r,c);d!==null&&(Dn(d,s,c),Os(d,s,c)),s={cache:af()},r.payload=s;return}s=s.return}}function Qp(r,s,c){var d=Ai();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Oc(r)?Zp(s,c):(c=ul(r,s,c,d),c!==null&&(Dn(c,r,d),Jp(c,s,d)))}function gf(r,s,c){var d=Ai();_l(r,s,c,d)}function _l(r,s,c,d){var _={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Oc(r))Zp(s,_);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var B=s.lastRenderedState,w=v(B,c);if(_.hasEagerState=!0,_.eagerState=w,Oi(w,B))return pu(r,s,_,0),ze===null&&du(),!1}catch{}finally{}if(c=ul(r,s,_,d),c!==null)return Dn(c,r,d),Jp(c,s,d),!0}return!1}function Ru(r,s,c,d){if(d={lane:2,revertLane:x0(),action:d,hasEagerState:!1,eagerState:null,next:null},Oc(r)){if(s)throw Error(i(479))}else s=ul(r,c,d,2),s!==null&&Dn(s,r,2)}function Oc(r){var s=r.alternate;return r===$t||s!==null&&s===$t}function Zp(r,s){Cs=It=!0;var c=r.pending;c===null?s.next=s:(s.next=c.next,c.next=s),r.pending=s}function Jp(r,s,c){if((c&4194176)!==0){var d=s.lanes;d&=r.pendingLanes,c|=d,s.lanes=c,sr(r,c)}}var aa={readContext:ri,use:go,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useLayoutEffect:un,useInsertionEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useSyncExternalStore:un,useId:un};aa.useCacheRefresh=un,aa.useMemoCache=un,aa.useHostTransitionStatus=un,aa.useFormState=un,aa.useActionState=un,aa.useOptimistic=un;var Ds={readContext:ri,use:go,useCallback:function(r,s){return Jn().memoizedState=[r,s===void 0?null:s],r},useContext:ri,useEffect:zp,useImperativeHandle:function(r,s,c){c=c!=null?c.concat([r]):null,Mc(4194308,4,Fp.bind(null,s,r),c)},useLayoutEffect:function(r,s){return Mc(4194308,4,r,s)},useInsertionEffect:function(r,s){Mc(4,2,r,s)},useMemo:function(r,s){var c=Jn();s=s===void 0?null:s;var d=r();if(Bs){Mi(!0);try{r()}finally{Mi(!1)}}return c.memoizedState=[d,s],d},useReducer:function(r,s,c){var d=Jn();if(c!==void 0){var _=c(s);if(Bs){Mi(!0);try{c(s)}finally{Mi(!1)}}}else _=s;return d.memoizedState=d.baseState=_,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:_},d.queue=r,r=r.dispatch=Qp.bind(null,$t,r),[d.memoizedState,r]},useRef:function(r){var s=Jn();return r={current:r},s.memoizedState=r},useState:function(r){r=uf(r);var s=r.queue,c=gf.bind(null,$t,s);return s.dispatch=c,[r.memoizedState,c]},useDebugValue:df,useDeferredValue:function(r,s){var c=Jn();return wc(c,r,s)},useTransition:function(){var r=uf(!1);return r=Yp.bind(null,$t,r.queue,!0,!1),Jn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,c){var d=$t,_=Jn();if(ge){if(c===void 0)throw Error(i(407));c=c()}else{if(c=s(),ze===null)throw Error(i(349));(Vt&60)!==0||vi(d,s,c)}_.memoizedState=c;var v={value:c,getSnapshot:s};return _.queue=v,zp(Bp.bind(null,d,v,r),[r]),d.flags|=2048,ra(9,Ms.bind(null,d,v,c,s),{destroy:void 0},null),c},useId:function(){var r=Jn(),s=ze.identifierPrefix;if(ge){var c=Oa,d=$r;c=(d&~(1<<32-Ze(d)-1)).toString(32)+c,s=":"+s+"R"+c,c=po++,0<c&&(s+="H"+c.toString(32)),s+=":"}else c=d0++,s=":"+s+"r"+c.toString(32)+":";return r.memoizedState=s},useCacheRefresh:function(){return Jn().memoizedState=Wp.bind(null,$t)}};Ds.useMemoCache=Or,Ds.useHostTransitionStatus=Uc,Ds.useFormState=Op,Ds.useActionState=Op,Ds.useOptimistic=function(r){var s=Jn();s.memoizedState=s.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=Ru.bind(null,$t,!0,c),c.dispatch=s,[r,s]};var ka={readContext:ri,use:go,useCallback:kp,useContext:ri,useEffect:ff,useImperativeHandle:Vp,useInsertionEffect:Hp,useLayoutEffect:Lp,useMemo:Xp,useReducer:Gr,useRef:Np,useState:function(){return Gr(tn)},useDebugValue:df,useDeferredValue:function(r,s){var c=dn();return Ip(c,De.memoizedState,r,s)},useTransition:function(){var r=Gr(tn)[0],s=dn().memoizedState;return[typeof r=="boolean"?r:Bu(r),s]},useSyncExternalStore:Cp,useId:mf};ka.useCacheRefresh=Kp,ka.useMemoCache=Or,ka.useHostTransitionStatus=Uc,ka.useFormState=_o,ka.useActionState=_o,ka.useOptimistic=function(r,s){var c=dn();return cf(c,De,r,s)};var yl={readContext:ri,use:go,useCallback:kp,useContext:ri,useEffect:ff,useImperativeHandle:Vp,useInsertionEffect:Hp,useLayoutEffect:Lp,useMemo:Xp,useReducer:Rc,useRef:Np,useState:function(){return Rc(tn)},useDebugValue:df,useDeferredValue:function(r,s){var c=dn();return De===null?wc(c,r,s):Ip(c,De.memoizedState,r,s)},useTransition:function(){var r=Rc(tn)[0],s=dn().memoizedState;return[typeof r=="boolean"?r:Bu(r),s]},useSyncExternalStore:Cp,useId:mf};yl.useCacheRefresh=Kp,yl.useMemoCache=Or,yl.useHostTransitionStatus=Uc,yl.useFormState=Pp,yl.useActionState=Pp,yl.useOptimistic=function(r,s){var c=dn();return De!==null?cf(c,De,r,s):(c.baseState=r,[r,c.queue.dispatch])};function _f(r,s,c,d){s=r.memoizedState,c=c(d,s),c=c==null?s:X({},s,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var yf={isMounted:function(r){return(r=r._reactInternals)?ut(r)===r:!1},enqueueSetState:function(r,s,c){r=r._reactInternals;var d=Ai(),_=Zi(d);_.payload=s,c!=null&&(_.callback=c),s=Ji(r,_,d),s!==null&&(Dn(s,r,d),Os(s,r,d))},enqueueReplaceState:function(r,s,c){r=r._reactInternals;var d=Ai(),_=Zi(d);_.tag=1,_.payload=s,c!=null&&(_.callback=c),s=Ji(r,_,d),s!==null&&(Dn(s,r,d),Os(s,r,d))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var c=Ai(),d=Zi(c);d.tag=2,s!=null&&(d.callback=s),s=Ji(r,d,c),s!==null&&(Dn(s,r,c),Os(s,r,c))}};function $p(r,s,c,d,_,v,B){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,v,B):s.prototype&&s.prototype.isPureReactComponent?!Ur(c,d)||!Ur(_,v):!0}function tm(r,s,c,d){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,d),s.state!==r&&yf.enqueueReplaceState(s,s.state,null)}function bl(r,s){var c=s;if("ref"in s){c={};for(var d in s)d!=="ref"&&(c[d]=s[d])}if(r=r.defaultProps){c===s&&(c=X({},c));for(var _ in r)c[_]===void 0&&(c[_]=r[_])}return c}var Gc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function em(r){Gc(r)}function nm(r){console.error(r)}function im(r){Gc(r)}function Pc(r,s){try{var c=r.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function rm(r,s,c){try{var d=r.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function bf(r,s,c){return c=Zi(c),c.tag=3,c.payload={element:null},c.callback=function(){Pc(r,s)},c}function vf(r){return r=Zi(r),r.tag=3,r}function am(r,s,c,d){var _=c.type.getDerivedStateFromError;if(typeof _=="function"){var v=d.value;r.payload=function(){return _(v)},r.callback=function(){rm(s,c,d)}}var B=c.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(r.callback=function(){rm(s,c,d),typeof _!="function"&&(Mn===null?Mn=new Set([this]):Mn.add(this));var w=d.stack;this.componentDidCatch(d.value,{componentStack:w!==null?w:""})})}function y0(r,s,c,d,_){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=c.alternate,s!==null&&Du(s,c,_,!0),c=zi.current,c!==null){switch(c.tag){case 13:return ea===null?Hu():c.alternate===null&&We===0&&(We=3),c.flags&=-257,c.flags|=65536,c.lanes=_,d===Sc?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([d]):s.add(d),Kt(r,d,_)),!1;case 22:return c.flags|=65536,d===Sc?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([d]):c.add(d)),Kt(r,d,_)),!1}throw Error(i(435,c.tag))}return Kt(r,d,_),Hu(),!1}if(ge)return s=zi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=_,d!==bu&&(r=Error(i(422),{cause:d}),ta(Ni(r,c)))):(d!==bu&&(s=Error(i(423),{cause:d}),ta(Ni(s,c))),r=r.current.alternate,r.flags|=65536,_&=-_,r.lanes|=_,d=Ni(d,c),_=bf(r.stateNode,d,_),So(r,_),We!==4&&(We=2)),!1;var v=Error(i(520),{cause:d});if(v=Ni(v,c),zu===null?zu=[v]:zu.push(v),We!==4&&(We=2),s===null)return!0;d=Ni(d,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,r=_&-_,c.lanes|=r,r=bf(c.stateNode,d,r),So(c,r),!1;case 1:if(s=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Mn===null||!Mn.has(v))))return c.flags|=65536,_&=-_,c.lanes|=_,_=vf(_),am(_,r,c,d),So(c,_),!1}c=c.return}while(c!==null);return!1}var Wi=Error(i(461)),zn=!1;function Hn(r,s,c,d){s.child=r===null?Pa(s,null,c,d):Ga(s,r.child,c,d)}function xf(r,s,c,d,_){c=c.render;var v=s.ref;if("ref"in d){var B={};for(var w in d)w!=="ref"&&(B[w]=d[w])}else B=d;return xl(s),d=lf(r,s,c,B,v,_),w=of(),r!==null&&!zn?(Cu(r,s,_),pn(r,s,_)):(ge&&w&&yu(s),s.flags|=1,Hn(r,s,d,_),s.child)}function Sf(r,s,c,d,_){if(r===null){var v=c.type;return typeof v=="function"&&!Wa(v)&&v.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=v,Ef(r,s,v,d,_)):(r=Co(c.type,null,d,s,s.mode,_),r.ref=s.ref,r.return=s,s.child=r)}if(v=r.child,!Df(r,_)){var B=v.memoizedProps;if(c=c.compare,c=c!==null?c:Ur,c(B,d)&&r.ref===s.ref)return pn(r,s,_)}return s.flags|=1,r=Ei(v,d),r.ref=s.ref,r.return=s,s.child=r}function Ef(r,s,c,d,_){if(r!==null){var v=r.memoizedProps;if(Ur(v,d)&&r.ref===s.ref)if(zn=!1,s.pendingProps=d=v,Df(r,_))(r.flags&131072)!==0&&(zn=!0);else return s.lanes=r.lanes,pn(r,s,_)}return Af(r,s,c,d,_)}function sm(r,s,c){var d=s.pendingProps,_=d.children,v=(s.stateNode._pendingVisibility&2)!==0,B=r!==null?r.memoizedState:null;if(yo(r,s),d.mode==="hidden"||v){if((s.flags&128)!==0){if(d=B!==null?B.baseLanes|c:c,r!==null){for(_=s.child=r.child,v=0;_!==null;)v=v|_.lanes|_.childLanes,_=_.sibling;s.childLanes=v&~d}else s.childLanes=0,s.child=null;return Tf(r,s,d,c)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&fo(s,B!==null?B.cachePool:null),B!==null?xs(s,B):Tc(),rf(s);else return s.lanes=s.childLanes=536870912,Tf(r,s,B!==null?B.baseLanes|c:c,c)}else B!==null?(fo(s,B.cachePool),xs(s,B),za(),s.memoizedState=null):(r!==null&&fo(s,null),Tc(),za());return Hn(r,s,_,c),s.child}function Tf(r,s,c,d){var _=Au();return _=_===null?null:{parent:fn._currentValue,pool:_},s.memoizedState={baseLanes:c,cachePool:_},r!==null&&fo(s,null),Tc(),rf(s),r!==null&&Du(r,s,d,!0),null}function yo(r,s){var c=s.ref;if(c===null)r!==null&&r.ref!==null&&(s.flags|=2097664);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(s.flags|=2097664)}}function Af(r,s,c,d,_){return xl(s),c=lf(r,s,c,d,void 0,_),d=of(),r!==null&&!zn?(Cu(r,s,_),pn(r,s,_)):(ge&&d&&yu(s),s.flags|=1,Hn(r,s,c,_),s.child)}function lm(r,s,c,d,_,v){return xl(s),s.updateQueue=null,c=Ap(s,d,c,_),Tp(r),d=of(),r!==null&&!zn?(Cu(r,s,v),pn(r,s,v)):(ge&&d&&yu(s),s.flags|=1,Hn(r,s,c,v),s.child)}function om(r,s,c,d,_){if(xl(s),s.stateNode===null){var v=ms,B=c.contextType;typeof B=="object"&&B!==null&&(v=ri(B)),v=new c(d,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=yf,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=d,v.state=s.memoizedState,v.refs={},xi(s),B=c.contextType,v.context=typeof B=="object"&&B!==null?ri(B):ms,v.state=s.memoizedState,B=c.getDerivedStateFromProps,typeof B=="function"&&(_f(s,c,B,d),v.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(B=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),B!==v.state&&yf.enqueueReplaceState(v,v.state,null),Nr(s,d,v,_),ai(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(r===null){v=s.stateNode;var w=s.memoizedProps,L=bl(c,w);v.props=L;var Q=v.context,mt=c.contextType;B=ms,typeof mt=="object"&&mt!==null&&(B=ri(mt));var _t=c.getDerivedStateFromProps;mt=typeof _t=="function"||typeof v.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,mt||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w||Q!==B)&&tm(s,v,d,B),Bn=!1;var st=s.memoizedState;v.state=st,Nr(s,d,v,_),ai(),Q=s.memoizedState,w||st!==Q||Bn?(typeof _t=="function"&&(_f(s,c,_t,d),Q=s.memoizedState),(L=Bn||$p(s,c,L,d,st,Q,B))?(mt||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=Q),v.props=d,v.state=Q,v.context=B,d=L):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{v=s.stateNode,Vc(r,s),B=s.memoizedProps,mt=bl(c,B),v.props=mt,_t=s.pendingProps,st=v.context,Q=c.contextType,L=ms,typeof Q=="object"&&Q!==null&&(L=ri(Q)),w=c.getDerivedStateFromProps,(Q=typeof w=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(B!==_t||st!==L)&&tm(s,v,d,L),Bn=!1,st=s.memoizedState,v.state=st,Nr(s,d,v,_),ai();var dt=s.memoizedState;B!==_t||st!==dt||Bn||r!==null&&r.dependencies!==null&&vo(r.dependencies)?(typeof w=="function"&&(_f(s,c,w,d),dt=s.memoizedState),(mt=Bn||$p(s,c,mt,d,st,dt,L)||r!==null&&r.dependencies!==null&&vo(r.dependencies))?(Q||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,dt,L),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,dt,L)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||B===r.memoizedProps&&st===r.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||B===r.memoizedProps&&st===r.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=dt),v.props=d,v.state=dt,v.context=L,d=mt):(typeof v.componentDidUpdate!="function"||B===r.memoizedProps&&st===r.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||B===r.memoizedProps&&st===r.memoizedState||(s.flags|=1024),d=!1)}return v=d,yo(r,s),d=(s.flags&128)!==0,v||d?(v=s.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,r!==null&&d?(s.child=Ga(s,r.child,null,_),s.child=Ga(s,null,c,_)):Hn(r,s,c,_),s.memoizedState=v.state,r=s.child):r=pn(r,s,_),r}function Cf(r,s,c,d){return uo(),s.flags|=256,Hn(r,s,c,d),s.child}var Bf={dehydrated:null,treeContext:null,retryLane:0};function Yn(r){return{baseLanes:r,cachePool:La()}}function Nc(r,s,c){return r=r!==null?r.childLanes&~c:0,s&&(r|=Ti),r}function um(r,s,c){var d=s.pendingProps,_=!1,v=(s.flags&128)!==0,B;if((B=v)||(B=r!==null&&r.memoizedState===null?!1:(An.current&2)!==0),B&&(_=!0,s.flags&=-129),B=(s.flags&32)!==0,s.flags&=-33,r===null){if(ge){if(_?Na(s):za(),ge){var w=In,L;if(L=w){t:{for(L=w,w=cr;L.nodeType!==8;){if(!w){w=null;break t}if(L=ts(L.nextSibling),L===null){w=null;break t}}w=L}w!==null?(s.memoizedState={dehydrated:w,treeContext:Ua!==null?{id:$r,overflow:Oa}:null,retryLane:536870912},L=yn(18,null,null,0),L.stateNode=w,L.return=s,s.child=L,ii=s,In=null,L=!0):L=!1}L||hl(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return w.data==="$!"?s.lanes=16:s.lanes=536870912,null;na(s)}return w=d.children,d=d.fallback,_?(za(),_=s.mode,w=Mf({mode:"hidden",children:w},_),d=Ls(d,_,c,null),w.return=s,d.return=s,w.sibling=d,s.child=w,_=s.child,_.memoizedState=Yn(c),_.childLanes=Nc(r,B,c),s.memoizedState=Bf,d):(Na(s),Rf(s,w))}if(L=r.memoizedState,L!==null&&(w=L.dehydrated,w!==null)){if(v)s.flags&256?(Na(s),s.flags&=-257,s=zc(r,s,c)):s.memoizedState!==null?(za(),s.child=r.child,s.flags|=128,s=null):(za(),_=d.fallback,w=s.mode,d=Mf({mode:"visible",children:d.children},w),_=Ls(_,w,c,null),_.flags|=2,d.return=s,_.return=s,d.sibling=_,s.child=d,Ga(s,r.child,null,c),d=s.child,d.memoizedState=Yn(c),d.childLanes=Nc(r,B,c),s.memoizedState=Bf,s=_);else if(Na(s),w.data==="$!"){if(B=w.nextSibling&&w.nextSibling.dataset,B)var Q=B.dgst;B=Q,d=Error(i(419)),d.stack="",d.digest=B,ta({value:d,source:null,stack:null}),s=zc(r,s,c)}else if(zn||Du(r,s,c,!1),B=(c&r.childLanes)!==0,zn||B){if(B=ze,B!==null){if(d=c&-c,(d&42)!==0)d=1;else switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=64;break;case 268435456:d=134217728;break;default:d=0}if(d=(d&(B.suspendedLanes|c))!==0?0:d,d!==0&&d!==L.retryLane)throw L.retryLane=d,wa(r,d),Dn(B,r,d),Wi}w.data==="$?"||Hu(),s=zc(r,s,c)}else w.data==="$?"?(s.flags|=128,s.child=r.child,s=Rl.bind(null,r),w._reactRetry=s,s=null):(r=L.treeContext,In=ts(w.nextSibling),ii=s,ge=!0,ur=null,cr=!1,r!==null&&(Ie[ji++]=$r,Ie[ji++]=Oa,Ie[ji++]=Ua,$r=r.id,Oa=r.overflow,Ua=s),s=Rf(s,d.children),s.flags|=4096);return s}return _?(za(),_=d.fallback,w=s.mode,L=r.child,Q=L.sibling,d=Ei(L,{mode:"hidden",children:d.children}),d.subtreeFlags=L.subtreeFlags&31457280,Q!==null?_=Ei(Q,_):(_=Ls(_,w,c,null),_.flags|=2),_.return=s,d.return=s,d.sibling=_,s.child=d,d=_,_=s.child,w=r.child.memoizedState,w===null?w=Yn(c):(L=w.cachePool,L!==null?(Q=fn._currentValue,L=L.parent!==Q?{parent:Q,pool:Q}:L):L=La(),w={baseLanes:w.baseLanes|c,cachePool:L}),_.memoizedState=w,_.childLanes=Nc(r,B,c),s.memoizedState=Bf,d):(Na(s),c=r.child,r=c.sibling,c=Ei(c,{mode:"visible",children:d.children}),c.return=s,c.sibling=null,r!==null&&(B=s.deletions,B===null?(s.deletions=[r],s.flags|=16):B.push(r)),s.child=c,s.memoizedState=null,c)}function Rf(r,s){return s=Mf({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Mf(r,s){return Uf(r,s,0,null)}function zc(r,s,c){return Ga(s,r.child,null,c),r=Rf(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Hc(r,s,c){r.lanes|=s;var d=r.alternate;d!==null&&(d.lanes|=s),Qi(r.return,s,c)}function ws(r,s,c,d,_){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:_}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=c,v.tailMode=_)}function vl(r,s,c){var d=s.pendingProps,_=d.revealOrder,v=d.tail;if(Hn(r,s,d.children,c),d=An.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Hc(r,c,s);else if(r.tag===19)Hc(r,c,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}switch(ce(An,d),_){case"forwards":for(c=s.child,_=null;c!==null;)r=c.alternate,r!==null&&ho(r)===null&&(_=c),c=c.sibling;c=_,c===null?(_=s.child,s.child=null):(_=c.sibling,c.sibling=null),ws(s,!1,_,c,v);break;case"backwards":for(c=null,_=s.child,s.child=null;_!==null;){if(r=_.alternate,r!==null&&ho(r)===null){s.child=_;break}r=_.sibling,_.sibling=c,c=_,_=r}ws(s,!0,c,null,v);break;case"together":ws(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function pn(r,s,c){if(r!==null&&(s.dependencies=r.dependencies),Vr|=s.lanes,(c&s.childLanes)===0)if(r!==null){if(Du(r,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,c=Ei(r,r.pendingProps),s.child=c,c.return=s;r.sibling!==null;)r=r.sibling,c=c.sibling=Ei(r,r.pendingProps),c.return=s;c.sibling=null}return s.child}function Df(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&vo(r)))}function b0(r,s,c){switch(s.tag){case 3:ln(s,s.stateNode.containerInfo),Us(s,fn,r.memoizedState.cache),uo();break;case 27:case 5:Xn(s);break;case 4:ln(s,s.stateNode.containerInfo);break;case 10:Us(s,s.type,s.memoizedProps.value);break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(Na(s),s.flags|=128,null):(c&s.child.childLanes)!==0?um(r,s,c):(Na(s),r=pn(r,s,c),r!==null?r.sibling:null);Na(s);break;case 19:var _=(r.flags&128)!==0;if(d=(c&s.childLanes)!==0,d||(Du(r,s,c,!1),d=(c&s.childLanes)!==0),_){if(d)return vl(r,s,c);s.flags|=128}if(_=s.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),ce(An,An.current),d)break;return null;case 22:case 23:return s.lanes=0,sm(r,s,c);case 24:Us(s,fn,r.memoizedState.cache)}return pn(r,s,c)}function Mu(r,s,c){if(r!==null)if(r.memoizedProps!==s.pendingProps)zn=!0;else{if(!Df(r,c)&&(s.flags&128)===0)return zn=!1,b0(r,s,c);zn=(r.flags&131072)!==0}else zn=!1,ge&&(s.flags&1048576)!==0&&ef(s,_u,s.index);switch(s.lanes=0,s.tag){case 16:t:{r=s.pendingProps;var d=s.elementType,_=d._init;if(d=_(d._payload),s.type=d,typeof d=="function")Wa(d)?(r=bl(d,r),s.tag=1,s=om(null,s,d,r,c)):(s.tag=0,s=Af(null,s,d,r,c));else{if(d!=null){if(_=d.$$typeof,_===R){s.tag=11,s=xf(null,s,d,r,c);break t}else if(_===G){s.tag=14,s=Sf(null,s,d,r,c);break t}}throw s=ht(d)||d,Error(i(306,s,""))}}return s;case 0:return Af(r,s,s.type,s.pendingProps,c);case 1:return d=s.type,_=bl(d,s.pendingProps),om(r,s,d,_,c);case 3:t:{if(ln(s,s.stateNode.containerInfo),r===null)throw Error(i(387));var v=s.pendingProps;_=s.memoizedState,d=_.element,Vc(r,s),Nr(s,v,null,c);var B=s.memoizedState;if(v=B.cache,Us(s,fn,v),v!==_.cache&&Lc(s,[fn],c,!0),ai(),v=B.element,_.isDehydrated)if(_={element:v,isDehydrated:!1,cache:B.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=Cf(r,s,v,c);break t}else if(v!==d){d=Ni(Error(i(424)),s),ta(d),s=Cf(r,s,v,c);break t}else for(In=ts(s.stateNode.containerInfo.firstChild),ii=s,ge=!0,ur=null,cr=!0,c=Pa(s,null,v,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(uo(),v===d){s=pn(r,s,c);break t}Hn(r,s,v,c)}s=s.child}return s;case 26:return yo(r,s),r===null?(c=M2(s.type,null,s.pendingProps,null))?s.memoizedState=c:ge||(c=s.type,r=s.pendingProps,d=gm(Fe.current).createElement(c),d[he]=s,d[se]=r,Ci(d,c,r),hn(d),s.stateNode=d):s.memoizedState=M2(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Xn(s),r===null&&ge&&(d=s.stateNode=C2(s.type,s.pendingProps,Fe.current),ii=s,cr=!0,In=ts(d.firstChild)),d=s.pendingProps.children,r!==null||ge?Hn(r,s,d,c):s.child=Ga(s,null,d,c),yo(r,s),s.child;case 5:return r===null&&ge&&((_=d=In)&&(d=nM(d,s.type,s.pendingProps,cr),d!==null?(s.stateNode=d,ii=s,In=ts(d.firstChild),cr=!1,_=!0):_=!1),_||hl(s)),Xn(s),_=s.type,v=s.pendingProps,B=r!==null?r.memoizedProps:null,d=v.children,D0(_,v)?d=null:B!==null&&D0(_,B)&&(s.flags|=32),s.memoizedState!==null&&(_=lf(r,s,p0,null,null,c),Vf._currentValue=_),yo(r,s),Hn(r,s,d,c),s.child;case 6:return r===null&&ge&&((r=c=In)&&(c=iM(c,s.pendingProps,cr),c!==null?(s.stateNode=c,ii=s,In=null,r=!0):r=!1),r||hl(s)),null;case 13:return um(r,s,c);case 4:return ln(s,s.stateNode.containerInfo),d=s.pendingProps,r===null?s.child=Ga(s,null,d,c):Hn(r,s,d,c),s.child;case 11:return xf(r,s,s.type,s.pendingProps,c);case 7:return Hn(r,s,s.pendingProps,c),s.child;case 8:return Hn(r,s,s.pendingProps.children,c),s.child;case 12:return Hn(r,s,s.pendingProps.children,c),s.child;case 10:return d=s.pendingProps,Us(s,s.type,d.value),Hn(r,s,d.children,c),s.child;case 9:return _=s.type._context,d=s.pendingProps.children,xl(s),_=ri(_),d=d(_),s.flags|=1,Hn(r,s,d,c),s.child;case 14:return Sf(r,s,s.type,s.pendingProps,c);case 15:return Ef(r,s,s.type,s.pendingProps,c);case 19:return vl(r,s,c);case 22:return sm(r,s,c);case 24:return xl(s),d=ri(fn),r===null?(_=Au(),_===null&&(_=ze,v=af(),_.pooledCache=v,v.refCount++,v!==null&&(_.pooledCacheLanes|=c),_=v),s.memoizedState={parent:d,cache:_},xi(s),Us(s,fn,_)):((r.lanes&c)!==0&&(Vc(r,s),Nr(s,null,null,c),ai()),_=r.memoizedState,v=s.memoizedState,_.parent!==d?(_={parent:d,cache:d},s.memoizedState=_,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=_),Us(s,fn,d)):(d=v.cache,Us(s,fn,d),d!==_.cache&&Lc(s,[fn],c,!0))),Hn(r,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}var bo=Pt(null),sa=null,Pr=null;function Us(r,s,c){ce(bo,s._currentValue),s._currentValue=c}function Xa(r){r._currentValue=bo.current,ne(bo)}function Qi(r,s,c){for(;r!==null;){var d=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),r===c)break;r=r.return}}function Lc(r,s,c,d){var _=r.child;for(_!==null&&(_.return=r);_!==null;){var v=_.dependencies;if(v!==null){var B=_.child;v=v.firstContext;t:for(;v!==null;){var w=v;v=_;for(var L=0;L<s.length;L++)if(w.context===s[L]){v.lanes|=c,w=v.alternate,w!==null&&(w.lanes|=c),Qi(v.return,c,r),d||(B=null);break t}v=w.next}}else if(_.tag===18){if(B=_.return,B===null)throw Error(i(341));B.lanes|=c,v=B.alternate,v!==null&&(v.lanes|=c),Qi(B,c,r),B=null}else B=_.child;if(B!==null)B.return=_;else for(B=_;B!==null;){if(B===r){B=null;break}if(_=B.sibling,_!==null){_.return=B.return,B=_;break}B=B.return}_=B}}function Du(r,s,c,d){r=null;for(var _=s,v=!1;_!==null;){if(!v){if((_.flags&524288)!==0)v=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var B=_.alternate;if(B===null)throw Error(i(387));if(B=B.memoizedProps,B!==null){var w=_.type;Oi(_.pendingProps.value,B.value)||(r!==null?r.push(w):r=[w])}}else if(_===ve.current){if(B=_.alternate,B===null)throw Error(i(387));B.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(r!==null?r.push(Vf):r=[Vf])}_=_.return}r!==null&&Lc(s,r,c,d),s.flags|=262144}function vo(r){for(r=r.firstContext;r!==null;){if(!Oi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function xl(r){sa=r,Pr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function ri(r){return xo(sa,r)}function Fc(r,s){return sa===null&&xl(r),xo(r,s)}function xo(r,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Pr===null){if(r===null)throw Error(i(308));Pr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Pr=Pr.next=s;return c}var Bn=!1;function xi(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vc(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Zi(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ji(r,s,c){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(jt&2)!==0){var _=d.pending;return _===null?s.next=s:(s.next=_.next,_.next=s),d.pending=s,s=gu(r),mu(r,null,c),s}return pu(r,d,s,c),gu(r)}function Os(r,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194176)!==0)){var d=s.lanes;d&=r.pendingLanes,c|=d,s.lanes=c,sr(r,c)}}function So(r,s){var c=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var _=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var B={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?_=v=B:v=v.next=B,c=c.next}while(c!==null);v===null?_=v=s:v=v.next=s}else _=v=s;c={baseState:d.baseState,firstBaseUpdate:_,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=s:r.next=s,c.lastBaseUpdate=s}var Li=!1;function ai(){if(Li){var r=Ts;if(r!==null)throw r}}function Nr(r,s,c,d){Li=!1;var _=r.updateQueue;Bn=!1;var v=_.firstBaseUpdate,B=_.lastBaseUpdate,w=_.shared.pending;if(w!==null){_.shared.pending=null;var L=w,Q=L.next;L.next=null,B===null?v=Q:B.next=Q,B=L;var mt=r.alternate;mt!==null&&(mt=mt.updateQueue,w=mt.lastBaseUpdate,w!==B&&(w===null?mt.firstBaseUpdate=Q:w.next=Q,mt.lastBaseUpdate=L))}if(v!==null){var _t=_.baseState;B=0,mt=Q=L=null,w=v;do{var st=w.lane&-536870913,dt=st!==w.lane;if(dt?(Vt&st)===st:(d&st)===st){st!==0&&st===pl&&(Li=!0),mt!==null&&(mt=mt.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});t:{var Ot=r,Zt=w;st=s;var wn=c;switch(Zt.tag){case 1:if(Ot=Zt.payload,typeof Ot=="function"){_t=Ot.call(wn,_t,st);break t}_t=Ot;break t;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Zt.payload,st=typeof Ot=="function"?Ot.call(wn,_t,st):Ot,st==null)break t;_t=X({},_t,st);break t;case 2:Bn=!0}}st=w.callback,st!==null&&(r.flags|=64,dt&&(r.flags|=8192),dt=_.callbacks,dt===null?_.callbacks=[st]:dt.push(st))}else dt={lane:st,tag:w.tag,payload:w.payload,callback:w.callback,next:null},mt===null?(Q=mt=dt,L=_t):mt=mt.next=dt,B|=st;if(w=w.next,w===null){if(w=_.shared.pending,w===null)break;dt=w,w=dt.next,dt.next=null,_.lastBaseUpdate=dt,_.shared.pending=null}}while(!0);mt===null&&(L=_t),_.baseState=L,_.firstBaseUpdate=Q,_.lastBaseUpdate=mt,v===null&&(_.shared.lanes=0),Vr|=B,r.lanes=B,r.memoizedState=_t}}function la(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function oa(r,s){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)la(c[r],s)}function mn(r,s){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var _=d.next;c=_;do{if((c.tag&r)===r){d=void 0;var v=c.create,B=c.inst;d=v(),B.destroy=d}c=c.next}while(c!==_)}}catch(w){vt(s,s.return,w)}}function hr(r,s,c){try{var d=s.updateQueue,_=d!==null?d.lastEffect:null;if(_!==null){var v=_.next;d=v;do{if((d.tag&r)===r){var B=d.inst,w=B.destroy;if(w!==void 0){B.destroy=void 0,_=s;var L=c;try{w()}catch(Q){vt(_,L,Q)}}}d=d.next}while(d!==v)}}catch(Q){vt(s,s.return,Q)}}function Ia(r){var s=r.updateQueue;if(s!==null){var c=r.stateNode;try{oa(s,c)}catch(d){vt(r,r.return,d)}}}function wu(r,s,c){c.props=bl(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(d){vt(r,s,d)}}function gn(r,s){try{var c=r.ref;if(c!==null){var d=r.stateNode;switch(r.tag){case 26:case 27:case 5:var _=d;break;default:_=d}typeof c=="function"?r.refCleanup=c(_):c.current=_}}catch(v){vt(r,s,v)}}function Ne(r,s){var c=r.ref,d=r.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(_){vt(r,s,_)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(_){vt(r,s,_)}else c.current=null}function _e(r){var s=r.type,c=r.memoizedProps,d=r.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break t;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(_){vt(r,r.return,_)}}function fr(r,s,c){try{var d=r.stateNode;ZR(d,r.type,c,s),d[se]=s}catch(_){vt(r,r.return,_)}}function zr(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27||r.tag===4}function Uu(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||zr(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==27&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Fi(r,s,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?c.nodeType===8?c.parentNode.insertBefore(r,s):c.insertBefore(r,s):(c.nodeType===8?(s=c.parentNode,s.insertBefore(r,c)):(s=c,s.appendChild(r)),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=mm));else if(d!==4&&d!==27&&(r=r.child,r!==null))for(Fi(r,s,c),r=r.sibling;r!==null;)Fi(r,s,c),r=r.sibling}function Ya(r,s,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?c.insertBefore(r,s):c.appendChild(r);else if(d!==4&&d!==27&&(r=r.child,r!==null))for(Ya(r,s,c),r=r.sibling;r!==null;)Ya(r,s,c),r=r.sibling}var Hr=!1,je=!1,Gs=!1,kc=typeof WeakSet=="function"?WeakSet:Set,_n=null,Xc=!1;function Eo(r,s){if(r=r.containerInfo,R0=Sm,r=Wh(r),fu(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else t:{c=(c=r.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var _=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break t}var B=0,w=-1,L=-1,Q=0,mt=0,_t=r,st=null;e:for(;;){for(var dt;_t!==c||_!==0&&_t.nodeType!==3||(w=B+_),_t!==v||d!==0&&_t.nodeType!==3||(L=B+d),_t.nodeType===3&&(B+=_t.nodeValue.length),(dt=_t.firstChild)!==null;)st=_t,_t=dt;for(;;){if(_t===r)break e;if(st===c&&++Q===_&&(w=B),st===v&&++mt===d&&(L=B),(dt=_t.nextSibling)!==null)break;_t=st,st=_t.parentNode}_t=dt}c=w===-1||L===-1?null:{start:w,end:L}}else c=null}c=c||{start:0,end:0}}else c=null;for(M0={focusedElem:r,selectionRange:c},Sm=!1,_n=s;_n!==null;)if(s=_n,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,_n=r;else for(;_n!==null;){switch(s=_n,v=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&v!==null){r=void 0,c=s,_=v.memoizedProps,v=v.memoizedState,d=c.stateNode;try{var Ot=bl(c.type,_,c.elementType===c.type);r=d.getSnapshotBeforeUpdate(Ot,v),d.__reactInternalSnapshotBeforeUpdate=r}catch(Zt){vt(c,c.return,Zt)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,c=r.nodeType,c===9)O0(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":O0(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,_n=r;break}_n=s.return}return Ot=Xc,Xc=!1,Ot}function To(r,s,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:ua(r,c),d&4&&mn(5,c);break;case 1:if(ua(r,c),d&4)if(r=c.stateNode,s===null)try{r.componentDidMount()}catch(w){vt(c,c.return,w)}else{var _=bl(c.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(_,s,r.__reactInternalSnapshotBeforeUpdate)}catch(w){vt(c,c.return,w)}}d&64&&Ia(c),d&512&&gn(c,c.return);break;case 3:if(ua(r,c),d&64&&(d=c.updateQueue,d!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{oa(d,r)}catch(w){vt(c,c.return,w)}}break;case 26:ua(r,c),d&512&&gn(c,c.return);break;case 27:case 5:ua(r,c),s===null&&d&4&&_e(c),d&512&&gn(c,c.return);break;case 12:ua(r,c);break;case 13:ua(r,c),d&4&&cm(r,c);break;case 22:if(_=c.memoizedState!==null||Hr,!_){s=s!==null&&s.memoizedState!==null||je;var v=Hr,B=je;Hr=_,(je=s)&&!B?Fr(r,c,(c.subtreeFlags&8772)!==0):ua(r,c),Hr=v,je=B}d&512&&(c.memoizedProps.mode==="manual"?gn(c,c.return):Ne(c,c.return));break;default:ua(r,c)}}function Ic(r){var s=r.alternate;s!==null&&(r.alternate=null,Ic(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&jo(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Ke=null,qn=!1;function si(r,s,c){for(c=c.child;c!==null;)Yc(r,s,c),c=c.sibling}function Yc(r,s,c){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(mi,c)}catch{}switch(c.tag){case 26:je||Ne(c,s),si(r,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:je||Ne(c,s);var d=Ke,_=qn;for(Ke=c.stateNode,si(r,s,c),c=c.stateNode,s=c.attributes;s.length;)c.removeAttributeNode(s[0]);jo(c),Ke=d,qn=_;break;case 5:je||Ne(c,s);case 6:_=Ke;var v=qn;if(Ke=null,si(r,s,c),Ke=_,qn=v,Ke!==null)if(qn)try{r=Ke,d=c.stateNode,r.nodeType===8?r.parentNode.removeChild(d):r.removeChild(d)}catch(B){vt(c,s,B)}else try{Ke.removeChild(c.stateNode)}catch(B){vt(c,s,B)}break;case 18:Ke!==null&&(qn?(s=Ke,c=c.stateNode,s.nodeType===8?U0(s.parentNode,c):s.nodeType===1&&U0(s,c),Yf(s)):U0(Ke,c.stateNode));break;case 4:d=Ke,_=qn,Ke=c.stateNode.containerInfo,qn=!0,si(r,s,c),Ke=d,qn=_;break;case 0:case 11:case 14:case 15:je||hr(2,c,s),je||hr(4,c,s),si(r,s,c);break;case 1:je||(Ne(c,s),d=c.stateNode,typeof d.componentWillUnmount=="function"&&wu(c,s,d)),si(r,s,c);break;case 21:si(r,s,c);break;case 22:je||Ne(c,s),je=(d=je)||c.memoizedState!==null,si(r,s,c),je=d;break;default:si(r,s,c)}}function cm(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Yf(r)}catch(c){vt(s,s.return,c)}}function Ou(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new kc),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new kc),s;default:throw Error(i(435,r.tag))}}function Gu(r,s){var c=Ou(r);s.forEach(function(d){var _=it.bind(null,r,d);c.has(d)||(c.add(d),d.then(_,_))})}function Si(r,s){var c=s.deletions;if(c!==null)for(var d=0;d<c.length;d++){var _=c[d],v=r,B=s,w=B;t:for(;w!==null;){switch(w.tag){case 27:case 5:Ke=w.stateNode,qn=!1;break t;case 3:Ke=w.stateNode.containerInfo,qn=!0;break t;case 4:Ke=w.stateNode.containerInfo,qn=!0;break t}w=w.return}if(Ke===null)throw Error(i(160));Yc(v,B,_),Ke=null,qn=!1,v=_.alternate,v!==null&&(v.return=null),_.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Sl(s,r),s=s.sibling}var li=null;function Sl(r,s){var c=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Si(s,r),oi(r),d&4&&(hr(3,r,r.return),mn(3,r),hr(5,r,r.return));break;case 1:Si(s,r),oi(r),d&512&&(je||c===null||Ne(c,c.return)),d&64&&Hr&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var _=li;if(Si(s,r),oi(r),d&512&&(je||c===null||Ne(c,c.return)),d&4){var v=c!==null?c.memoizedState:null;if(d=r.memoizedState,c===null)if(d===null)if(r.stateNode===null){t:{d=r.type,c=r.memoizedProps,_=_.ownerDocument||_;e:switch(d){case"title":v=_.getElementsByTagName("title")[0],(!v||v[tl]||v[he]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=_.createElement(d),_.head.insertBefore(v,_.querySelector("head > title"))),Ci(v,d,c),v[he]=r,hn(v),d=v;break t;case"link":var B=U2("link","href",_).get(d+(c.href||""));if(B){for(var w=0;w<B.length;w++)if(v=B[w],v.getAttribute("href")===(c.href==null?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){B.splice(w,1);break e}}v=_.createElement(d),Ci(v,d,c),_.head.appendChild(v);break;case"meta":if(B=U2("meta","content",_).get(d+(c.content||""))){for(w=0;w<B.length;w++)if(v=B[w],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){B.splice(w,1);break e}}v=_.createElement(d),Ci(v,d,c),_.head.appendChild(v);break;default:throw Error(i(468,d))}v[he]=r,hn(v),d=v}r.stateNode=d}else O2(_,r.type,r.stateNode);else r.stateNode=w2(_,d,r.memoizedProps);else v!==d?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,d===null?O2(_,r.type,r.stateNode):w2(_,d,r.memoizedProps)):d===null&&r.stateNode!==null&&fr(r,r.memoizedProps,c.memoizedProps)}break;case 27:if(d&4&&r.alternate===null){_=r.stateNode,v=r.memoizedProps;try{for(var L=_.firstChild;L;){var Q=L.nextSibling,mt=L.nodeName;L[tl]||mt==="HEAD"||mt==="BODY"||mt==="SCRIPT"||mt==="STYLE"||mt==="LINK"&&L.rel.toLowerCase()==="stylesheet"||_.removeChild(L),L=Q}for(var _t=r.type,st=_.attributes;st.length;)_.removeAttributeNode(st[0]);Ci(_,_t,v),_[he]=r,_[se]=v}catch(Ot){vt(r,r.return,Ot)}}case 5:if(Si(s,r),oi(r),d&512&&(je||c===null||Ne(c,c.return)),r.flags&32){_=r.stateNode;try{nl(_,"")}catch(Ot){vt(r,r.return,Ot)}}d&4&&r.stateNode!=null&&(_=r.memoizedProps,fr(r,_,c!==null?c.memoizedProps:_)),d&1024&&(Gs=!0);break;case 6:if(Si(s,r),oi(r),d&4){if(r.stateNode===null)throw Error(i(162));d=r.memoizedProps,c=r.stateNode;try{c.nodeValue=d}catch(Ot){vt(r,r.return,Ot)}}break;case 3:if(bm=null,_=li,li=_m(s.containerInfo),Si(s,r),li=_,oi(r),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Yf(s.containerInfo)}catch(Ot){vt(r,r.return,Ot)}Gs&&(Gs=!1,Ps(r));break;case 4:d=li,li=_m(r.stateNode.containerInfo),Si(s,r),oi(r),li=d;break;case 12:Si(s,r),oi(r);break;case 13:Si(s,r),oi(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(te=pi()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Gu(r,d)));break;case 22:if(d&512&&(je||c===null||Ne(c,c.return)),L=r.memoizedState!==null,Q=c!==null&&c.memoizedState!==null,mt=Hr,_t=je,Hr=mt||L,je=_t||Q,Si(s,r),je=_t,Hr=mt,oi(r),s=r.stateNode,s._current=r,s._visibility&=-3,s._visibility|=s._pendingVisibility&2,d&8192&&(s._visibility=L?s._visibility&-2:s._visibility|1,L&&(s=Hr||je,c===null||Q||s||Lr(r)),r.memoizedProps===null||r.memoizedProps.mode!=="manual"))t:for(c=null,s=r;;){if(s.tag===5||s.tag===26||s.tag===27){if(c===null){Q=c=s;try{if(_=Q.stateNode,L)v=_.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{B=Q.stateNode,w=Q.memoizedProps.style;var dt=w!=null&&w.hasOwnProperty("display")?w.display:null;B.style.display=dt==null||typeof dt=="boolean"?"":(""+dt).trim()}}catch(Ot){vt(Q,Q.return,Ot)}}}else if(s.tag===6){if(c===null){Q=s;try{Q.stateNode.nodeValue=L?"":Q.memoizedProps}catch(Ot){vt(Q,Q.return,Ot)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=r.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Gu(r,c))));break;case 19:Si(s,r),oi(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Gu(r,d)));break;case 21:break;default:Si(s,r),oi(r)}}function oi(r){var s=r.flags;if(s&2){try{if(r.tag!==27){t:{for(var c=r.return;c!==null;){if(zr(c)){var d=c;break t}c=c.return}throw Error(i(160))}switch(d.tag){case 27:var _=d.stateNode,v=Uu(r);Ya(r,v,_);break;case 5:var B=d.stateNode;d.flags&32&&(nl(B,""),d.flags&=-33);var w=Uu(r);Ya(r,w,B);break;case 3:case 4:var L=d.stateNode.containerInfo,Q=Uu(r);Fi(r,Q,L);break;default:throw Error(i(161))}}}catch(mt){vt(r,r.return,mt)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function Ps(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;Ps(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function ua(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)To(r,s.alternate,s),s=s.sibling}function Lr(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:hr(4,s,s.return),Lr(s);break;case 1:Ne(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&wu(s,s.return,c),Lr(s);break;case 26:case 27:case 5:Ne(s,s.return),Lr(s);break;case 22:Ne(s,s.return),s.memoizedState===null&&Lr(s);break;default:Lr(s)}r=r.sibling}}function Fr(r,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,_=r,v=s,B=v.flags;switch(v.tag){case 0:case 11:case 15:Fr(_,v,c),mn(4,v);break;case 1:if(Fr(_,v,c),d=v,_=d.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Q){vt(d,d.return,Q)}if(d=v,_=d.updateQueue,_!==null){var w=d.stateNode;try{var L=_.shared.hiddenCallbacks;if(L!==null)for(_.shared.hiddenCallbacks=null,_=0;_<L.length;_++)la(L[_],w)}catch(Q){vt(d,d.return,Q)}}c&&B&64&&Ia(v),gn(v,v.return);break;case 26:case 27:case 5:Fr(_,v,c),c&&d===null&&B&4&&_e(v),gn(v,v.return);break;case 12:Fr(_,v,c);break;case 13:Fr(_,v,c),c&&B&4&&cm(_,v);break;case 22:v.memoizedState===null&&Fr(_,v,c),gn(v,v.return);break;default:Fr(_,v,c)}s=s.sibling}}function Vi(r,s){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&Ss(c))}function dr(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ss(r))}function Ye(r,s,c,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)qa(r,s,c,d),s=s.sibling}function qa(r,s,c,d){var _=s.flags;switch(s.tag){case 0:case 11:case 15:Ye(r,s,c,d),_&2048&&mn(9,s);break;case 3:Ye(r,s,c,d),_&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Ss(r)));break;case 12:if(_&2048){Ye(r,s,c,d),r=s.stateNode;try{var v=s.memoizedProps,B=v.id,w=v.onPostCommit;typeof w=="function"&&w(B,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(L){vt(s,s.return,L)}}else Ye(r,s,c,d);break;case 23:break;case 22:v=s.stateNode,s.memoizedState!==null?v._visibility&4?Ye(r,s,c,d):Se(r,s):v._visibility&4?Ye(r,s,c,d):(v._visibility|=4,qt(r,s,c,d,(s.subtreeFlags&10256)!==0)),_&2048&&Vi(s.alternate,s);break;case 24:Ye(r,s,c,d),_&2048&&dr(s.alternate,s);break;default:Ye(r,s,c,d)}}function qt(r,s,c,d,_){for(_=_&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var v=r,B=s,w=c,L=d,Q=B.flags;switch(B.tag){case 0:case 11:case 15:qt(v,B,w,L,_),mn(8,B);break;case 23:break;case 22:var mt=B.stateNode;B.memoizedState!==null?mt._visibility&4?qt(v,B,w,L,_):Se(v,B):(mt._visibility|=4,qt(v,B,w,L,_)),_&&Q&2048&&Vi(B.alternate,B);break;case 24:qt(v,B,w,L,_),_&&Q&2048&&dr(B.alternate,B);break;default:qt(v,B,w,L,_)}s=s.sibling}}function Se(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=r,d=s,_=d.flags;switch(d.tag){case 22:Se(c,d),_&2048&&Vi(d.alternate,d);break;case 24:Se(c,d),_&2048&&dr(d.alternate,d);break;default:Se(c,d)}s=s.sibling}}var en=8192;function ja(r){if(r.subtreeFlags&en)for(r=r.child;r!==null;)El(r),r=r.sibling}function El(r){switch(r.tag){case 26:ja(r),r.flags&en&&r.memoizedState!==null&&gM(li,r.memoizedState,r.memoizedProps);break;case 5:ja(r);break;case 3:case 4:var s=li;li=_m(r.stateNode.containerInfo),ja(r),li=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=en,en=16777216,ja(r),en=s):ja(r));break;default:ja(r)}}function Ns(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function zs(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];_n=d,hm(d,r)}Ns(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ao(r),r=r.sibling}function Ao(r){switch(r.tag){case 0:case 11:case 15:zs(r),r.flags&2048&&hr(9,r,r.return);break;case 3:zs(r);break;case 12:zs(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&4&&(r.return===null||r.return.tag!==13)?(s._visibility&=-5,Ka(r)):zs(r);break;default:zs(r)}}function Ka(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];_n=d,hm(d,r)}Ns(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:hr(8,s,s.return),Ka(s);break;case 22:c=s.stateNode,c._visibility&4&&(c._visibility&=-5,Ka(s));break;default:Ka(s)}r=r.sibling}}function hm(r,s){for(;_n!==null;){var c=_n;switch(c.tag){case 0:case 11:case 15:hr(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Ss(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,_n=d;else t:for(c=r;_n!==null;){d=_n;var _=d.sibling,v=d.return;if(Ic(d),d===c){_n=null;break t}if(_!==null){_.return=v,_n=_;break t}_n=v}}}function wf(r,s,c,d){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(r,s,c,d){return new wf(r,s,c,d)}function Wa(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ei(r,s){var c=r.alternate;return c===null?(c=yn(r.tag,s,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=s,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&31457280,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,s=r.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Hs(r,s){r.flags&=31457282;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,s=c.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Co(r,s,c,d,_,v){var B=0;if(d=r,typeof r=="function")Wa(r)&&(B=1);else if(typeof r=="string")B=pM(r,c,Te.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case m:return Ls(c.children,_,v,s);case g:B=8,_|=24;break;case b:return r=yn(12,c,s,_|2),r.elementType=b,r.lanes=v,r;case D:return r=yn(13,c,s,_),r.elementType=D,r.lanes=v,r;case C:return r=yn(19,c,s,_),r.elementType=C,r.lanes=v,r;case H:return Uf(c,_,v,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case x:case T:B=10;break t;case E:B=9;break t;case R:B=11;break t;case G:B=14;break t;case P:B=16,d=null;break t}B=29,c=Error(i(130,r===null?"null":typeof r,"")),d=null}return s=yn(B,c,s,_),s.elementType=r,s.type=d,s.lanes=v,s}function Ls(r,s,c,d){return r=yn(7,r,d,s),r.lanes=c,r}function Uf(r,s,c,d){r=yn(22,r,d,s),r.elementType=H,r.lanes=c;var _={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var v=_._current;if(v===null)throw Error(i(456));if((_._pendingVisibility&2)===0){var B=wa(v,2);B!==null&&(_._pendingVisibility|=2,Dn(B,v,2))}},attach:function(){var v=_._current;if(v===null)throw Error(i(456));if((_._pendingVisibility&2)!==0){var B=wa(v,2);B!==null&&(_._pendingVisibility&=-3,Dn(B,v,2))}}};return r.stateNode=_,r}function Rn(r,s,c){return r=yn(6,r,null,s),r.lanes=c,r}function Pu(r,s,c){return s=yn(4,r.children!==null?r.children:[],r.key,s),s.lanes=c,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function pr(r){r.flags|=4}function Fs(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!G2(s)){if(s=zi.current,s!==null&&((Vt&4194176)===Vt?ea!==null:(Vt&62914560)!==Vt&&(Vt&536870912)===0||s!==ea))throw co=Sc,nf;r.flags|=8192}}function mr(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?En():536870912,r.lanes|=s,ha|=s)}function Nu(r,s){if(!ge)switch(r.tailMode){case"hidden":s=r.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function sn(r){var s=r.alternate!==null&&r.alternate.child===r.child,c=0,d=0;if(s)for(var _=r.child;_!==null;)c|=_.lanes|_.childLanes,d|=_.subtreeFlags&31457280,d|=_.flags&31457280,_.return=r,_=_.sibling;else for(_=r.child;_!==null;)c|=_.lanes|_.childLanes,d|=_.subtreeFlags,d|=_.flags,_.return=r,_=_.sibling;return r.subtreeFlags|=d,r.childLanes=c,s}function v0(r,s,c){var d=s.pendingProps;switch(_s(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(s),null;case 1:return sn(s),null;case 3:return c=s.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),Xa(fn),Pe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(oo(s)?pr(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ur!==null&&(br(ur),ur=null))),sn(s),null;case 26:return c=s.memoizedState,r===null?(pr(s),c!==null?(sn(s),Fs(s,c)):(sn(s),s.flags&=-16777217)):c?c!==r.memoizedState?(pr(s),sn(s),Fs(s,c)):(sn(s),s.flags&=-16777217):(r.memoizedProps!==d&&pr(s),sn(s),s.flags&=-16777217),null;case 27:ir(s),c=Fe.current;var _=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==d&&pr(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return sn(s),null}r=Te.current,oo(s)?bp(s):(r=C2(_,d,c),s.stateNode=r,pr(s))}return sn(s),null;case 5:if(ir(s),c=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==d&&pr(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return sn(s),null}if(r=Te.current,oo(s))bp(s);else{switch(_=gm(Fe.current),r){case 1:r=_.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:r=_.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":r=_.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":r=_.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":r=_.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof d.is=="string"?_.createElement("select",{is:d.is}):_.createElement("select"),d.multiple?r.multiple=!0:d.size&&(r.size=d.size);break;default:r=typeof d.is=="string"?_.createElement(c,{is:d.is}):_.createElement(c)}}r[he]=s,r[se]=d;t:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)r.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break t;for(;_.sibling===null;){if(_.return===null||_.return===s)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=r;t:switch(Ci(r,c,d),c){case"button":case"input":case"select":case"textarea":r=!!d.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&pr(s)}}return sn(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==d&&pr(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(i(166));if(r=Fe.current,oo(s)){if(r=s.stateNode,c=s.memoizedProps,d=null,_=ii,_!==null)switch(_.tag){case 27:case 5:d=_.memoizedProps}r[he]=s,r=!!(r.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||v2(r.nodeValue,c)),r||hl(s)}else r=gm(r).createTextNode(d),r[he]=s,s.stateNode=r}return sn(s),null;case 13:if(d=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(_=oo(s),d!==null&&d.dehydrated!==null){if(r===null){if(!_)throw Error(i(318));if(_=s.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[he]=s}else uo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;sn(s),_=!1}else ur!==null&&(br(ur),ur=null),_=!0;if(!_)return s.flags&256?(na(s),s):(na(s),null)}if(na(s),(s.flags&128)!==0)return s.lanes=c,s;if(c=d!==null,r=r!==null&&r.memoizedState!==null,c){d=s.child,_=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(_=d.alternate.memoizedState.cachePool.pool);var v=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==_&&(d.flags|=2048)}return c!==r&&c&&(s.child.flags|=8192),mr(s,s.updateQueue),sn(s),null;case 4:return Pe(),r===null&&A0(s.stateNode.containerInfo),sn(s),null;case 10:return Xa(s.type),sn(s),null;case 19:if(ne(An),_=s.memoizedState,_===null)return sn(s),null;if(d=(s.flags&128)!==0,v=_.rendering,v===null)if(d)Nu(_,!1);else{if(We!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(v=ho(r),v!==null){for(s.flags|=128,Nu(_,!1),r=v.updateQueue,s.updateQueue=r,mr(s,r),s.subtreeFlags=0,r=c,c=s.child;c!==null;)Hs(c,r),c=c.sibling;return ce(An,An.current&1|2),s.child}r=r.sibling}_.tail!==null&&pi()>ue&&(s.flags|=128,d=!0,Nu(_,!1),s.lanes=4194304)}else{if(!d)if(r=ho(v),r!==null){if(s.flags|=128,d=!0,r=r.updateQueue,s.updateQueue=r,mr(s,r),Nu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!v.alternate&&!ge)return sn(s),null}else 2*pi()-_.renderingStartTime>ue&&c!==536870912&&(s.flags|=128,d=!0,Nu(_,!1),s.lanes=4194304);_.isBackwards?(v.sibling=s.child,s.child=v):(r=_.last,r!==null?r.sibling=v:s.child=v,_.last=v)}return _.tail!==null?(s=_.tail,_.rendering=s,_.tail=s.sibling,_.renderingStartTime=pi(),s.sibling=null,r=An.current,ce(An,d?r&1|2:r&1),s):(sn(s),null);case 22:case 23:return na(s),Tu(),d=s.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(c&536870912)!==0&&(s.flags&128)===0&&(sn(s),s.subtreeFlags&6&&(s.flags|=8192)):sn(s),c=s.updateQueue,c!==null&&mr(s,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==c&&(s.flags|=2048),r!==null&&ne(Ha),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Xa(fn),sn(s),null;case 25:return null}throw Error(i(156,s.tag))}function cn(r,s){switch(_s(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Xa(fn),Pe(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return ir(s),null;case 13:if(na(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));uo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return ne(An),null;case 4:return Pe(),null;case 10:return Xa(s.type),null;case 22:case 23:return na(s),Tu(),r!==null&&ne(Ha),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Xa(fn),null;case 25:return null;default:return null}}function Of(r,s){switch(_s(s),s.tag){case 3:Xa(fn),Pe();break;case 26:case 27:case 5:ir(s);break;case 4:Pe();break;case 13:na(s);break;case 19:ne(An);break;case 10:Xa(s.type);break;case 22:case 23:na(s),Tu(),r!==null&&ne(Ha);break;case 24:Xa(fn)}}var Tl={getCacheForType:function(r){var s=ri(fn),c=s.data.get(r);return c===void 0&&(c=r(),s.data.set(r,c)),c}},Qa=typeof WeakMap=="function"?WeakMap:Map,jt=0,ze=null,re=null,Vt=0,Ve=0,Ee=null,bn=!1,ui=!1,Vs=!1,Za=0,We=0,Vr=0,ca=0,Bo=0,Ti=0,ha=0,zu=null,oe=null,He=!1,te=0,ue=1/0,we=null,Mn=null,gr=!1,_r=null,Al=0,kr=0,nn=null,yr=0,Ja=null;function Ai(){if((jt&2)!==0&&Vt!==0)return Vt&-Vt;if(N.T!==null){var r=pl;return r!==0?r:x0()}return wi()}function $i(){Ti===0&&(Ti=(Vt&536870912)===0||ge?xe():536870912);var r=zi.current;return r!==null&&(r.flags|=32),Ti}function Dn(r,s,c){(r===ze&&Ve===2||r.cancelPendingCommit!==null)&&($a(r,0),tr(r,Vt,Ti,!1)),gi(r,c),((jt&2)===0||r!==ze)&&(r===ze&&((jt&2)===0&&(ca|=c),We===4&&tr(r,Vt,Ti,!1)),ke(r))}function Ro(r,s,c){if((jt&6)!==0)throw Error(i(327));var d=!c&&(s&60)===0&&(s&r.expiredLanes)===0||Et(r,s),_=d?l(r,s):Bl(r,s,!0),v=d;do{if(_===0){ui&&!d&&tr(r,s,0,!1);break}else if(_===6)tr(r,s,0,!bn);else{if(c=r.current.alternate,v&&!Gf(c)){_=Bl(r,s,!1),v=!1;continue}if(_===2){if(v=s,r.errorRecoveryDisabledLanes&v)var B=0;else B=r.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){s=B;t:{var w=r;_=zu;var L=w.current.memoizedState.isDehydrated;if(L&&($a(w,B).flags|=256),B=Bl(w,B,!1),B!==2){if(Vs&&!L){w.errorRecoveryDisabledLanes|=v,ca|=v,_=4;break t}v=oe,oe=_,v!==null&&br(v)}_=B}if(v=!1,_!==2)continue}}if(_===1){$a(r,0),tr(r,s,0,!0);break}t:{switch(d=r,_){case 0:case 1:throw Error(i(345));case 4:if((s&4194176)===s){tr(d,s,Ti,!bn);break t}break;case 2:oe=null;break;case 3:case 5:break;default:throw Error(i(329))}if(d.finishedWork=c,d.finishedLanes=s,(s&62914560)===s&&(v=te+300-pi(),10<v)){if(tr(d,s,Ti,!bn),at(d,0)!==0)break t;d.timeoutHandle=E2(qc.bind(null,d,c,oe,we,He,s,Ti,ca,ha,bn,2,-0,0),v);break t}qc(d,c,oe,we,He,s,Ti,ca,ha,bn,0,-0,0)}}break}while(!0);ke(r)}function br(r){oe===null?oe=r:oe.push.apply(oe,r)}function qc(r,s,c,d,_,v,B,w,L,Q,mt,_t,st){var dt=s.subtreeFlags;if((dt&8192||(dt&16785408)===16785408)&&(Ff={stylesheets:null,count:0,unsuspend:mM},El(s),s=_M(),s!==null)){r.cancelPendingCommit=s(k.bind(null,r,c,d,_,B,w,L,1,_t,st)),tr(r,v,B,!Q);return}k(r,c,d,_,B,w,L,mt,_t,st)}function Gf(r){for(var s=r;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var _=c[d],v=_.getSnapshot;_=_.value;try{if(!Oi(v(),_))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function tr(r,s,c,d){s&=~Bo,s&=~ca,r.suspendedLanes|=s,r.pingedLanes&=~s,d&&(r.warmLanes|=s),d=r.expirationTimes;for(var _=s;0<_;){var v=31-Ze(_),B=1<<v;d[v]=-1,_&=~B}c!==0&&ar(r,c,s)}function Cl(){return(jt&6)===0?(fe(0),!1):!0}function fa(){if(re!==null){if(Ve===0)var r=re.return;else r=re,Pr=sa=null,Cc(r),vs=null,xu=0,r=re;for(;r!==null;)Of(r.alternate,r),r=r.return;re=null}}function $a(r,s){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,$R(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),fa(),ze=r,re=c=Ei(r.current,null),Vt=s,Ve=0,Ee=null,bn=!1,ui=Et(r,s),Vs=!1,ha=Ti=Bo=ca=Vr=We=0,oe=zu=null,He=!1,(s&8)!==0&&(s|=s&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=s;0<d;){var _=31-Ze(d),v=1<<_;s|=r[_],d&=~v}return Za=s,du(),c}function ks(r,s){$t=null,N.H=aa,s===ys?(s=Re(),Ve=3):s===nf?(s=Re(),Ve=4):Ve=s===Wi?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ee=s,re===null&&(We=1,Pc(r,Ni(s,r.current)))}function Mo(){var r=N.H;return N.H=aa,r===null?aa:r}function jc(){var r=N.A;return N.A=Tl,r}function Hu(){We=4,bn||(Vt&4194176)!==Vt&&zi.current!==null||(ui=!0),(Vr&134217727)===0&&(ca&134217727)===0||ze===null||tr(ze,Vt,Ti,!1)}function Bl(r,s,c){var d=jt;jt|=2;var _=Mo(),v=jc();(ze!==r||Vt!==s)&&(we=null,$a(r,s)),s=!1;var B=We;t:do try{if(Ve!==0&&re!==null){var w=re,L=Ee;switch(Ve){case 8:fa(),B=6;break t;case 3:case 2:case 6:zi.current===null&&(s=!0);var Q=Ve;if(Ve=0,Ee=null,S(r,w,L,Q),c&&ui){B=0;break t}break;default:Q=Ve,Ve=0,Ee=null,S(r,w,L,Q)}}Pf(),B=We;break}catch(mt){ks(r,mt)}while(!0);return s&&r.shellSuspendCounter++,Pr=sa=null,jt=d,N.H=_,N.A=v,re===null&&(ze=null,Vt=0,du()),B}function Pf(){for(;re!==null;)p(re)}function l(r,s){var c=jt;jt|=2;var d=Mo(),_=jc();ze!==r||Vt!==s?(we=null,ue=pi()+500,$a(r,s)):ui=Et(r,s);t:do try{if(Ve!==0&&re!==null){s=re;var v=Ee;e:switch(Ve){case 1:Ve=0,Ee=null,S(r,s,v,1);break;case 2:if(xp(v)){Ve=0,Ee=null,y(s);break}s=function(){Ve===2&&ze===r&&(Ve=7),ke(r)},v.then(s,s);break t;case 3:Ve=7;break t;case 4:Ve=5;break t;case 7:xp(v)?(Ve=0,Ee=null,y(s)):(Ve=0,Ee=null,S(r,s,v,7));break;case 5:var B=null;switch(re.tag){case 26:B=re.memoizedState;case 5:case 27:var w=re;if(!B||G2(B)){Ve=0,Ee=null;var L=w.sibling;if(L!==null)re=L;else{var Q=w.return;Q!==null?(re=Q,A(Q)):re=null}break e}}Ve=0,Ee=null,S(r,s,v,5);break;case 6:Ve=0,Ee=null,S(r,s,v,6);break;case 8:fa(),We=6;break t;default:throw Error(i(462))}}u();break}catch(mt){ks(r,mt)}while(!0);return Pr=sa=null,N.H=d,N.A=_,jt=c,re!==null?0:(ze=null,Vt=0,du(),We)}function u(){for(;re!==null&&!Pn();)p(re)}function p(r){var s=Mu(r.alternate,r,Za);r.memoizedProps=r.pendingProps,s===null?A(r):re=s}function y(r){var s=r,c=s.alternate;switch(s.tag){case 15:case 0:s=lm(c,s,s.pendingProps,s.type,void 0,Vt);break;case 11:s=lm(c,s,s.pendingProps,s.type.render,s.ref,Vt);break;case 5:Cc(s);default:Of(c,s),s=re=Hs(s,Za),s=Mu(c,s,Za)}r.memoizedProps=r.pendingProps,s===null?A(r):re=s}function S(r,s,c,d){Pr=sa=null,Cc(s),vs=null,xu=0;var _=s.return;try{if(y0(r,_,s,c,Vt)){We=1,Pc(r,Ni(c,r.current)),re=null;return}}catch(v){if(_!==null)throw re=_,v;We=1,Pc(r,Ni(c,r.current)),re=null;return}s.flags&32768?(ge||d===1?r=!0:ui||(Vt&536870912)!==0?r=!1:(bn=r=!0,(d===2||d===3||d===6)&&(d=zi.current,d!==null&&d.tag===13&&(d.flags|=16384))),U(s,r)):A(s)}function A(r){var s=r;do{if((s.flags&32768)!==0){U(s,bn);return}r=s.return;var c=v0(s.alternate,s,Za);if(c!==null){re=c;return}if(s=s.sibling,s!==null){re=s;return}re=s=r}while(s!==null);We===0&&(We=5)}function U(r,s){do{var c=cn(r.alternate,r);if(c!==null){c.flags&=32767,re=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(r=r.sibling,r!==null)){re=r;return}re=r=c}while(r!==null);We=6,re=null}function k(r,s,c,d,_,v,B,w,L,Q){var mt=N.T,_t=yt.p;try{yt.p=2,N.T=null,$(r,s,c,d,_t,_,v,B,w,L,Q)}finally{N.T=mt,yt.p=_t}}function $(r,s,c,d,_,v,B,w){do xt();while(_r!==null);if((jt&6)!==0)throw Error(i(327));var L=r.finishedWork;if(d=r.finishedLanes,L===null)return null;if(r.finishedWork=null,r.finishedLanes=0,L===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var Q=L.lanes|L.childLanes;if(Q|=Da,rr(r,d,Q,v,B,w),r===ze&&(re=ze=null,Vt=0),(L.subtreeFlags&10256)===0&&(L.flags&10256)===0||gr||(gr=!0,kr=Q,nn=c,Z(Js,function(){return xt(),null})),c=(L.flags&15990)!==0,(L.subtreeFlags&15990)!==0||c?(c=N.T,N.T=null,v=yt.p,yt.p=2,B=jt,jt|=4,Eo(r,L),Sl(L,r),Qh(M0,r.containerInfo),Sm=!!R0,M0=R0=null,r.current=L,To(r,L.alternate,L),Kr(),jt=B,yt.p=v,N.T=c):r.current=L,gr?(gr=!1,_r=r,Al=d):pt(r,Q),Q=r.pendingLanes,Q===0&&(Mn=null),rs(L.stateNode),ke(r),s!==null)for(_=r.onRecoverableError,L=0;L<s.length;L++)Q=s[L],_(Q.value,{componentStack:Q.stack});return(Al&3)!==0&&xt(),Q=r.pendingLanes,(d&4194218)!==0&&(Q&42)!==0?r===Ja?yr++:(yr=0,Ja=r):yr=0,fe(0),null}function pt(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Ss(s)))}function xt(){if(_r!==null){var r=_r,s=kr;kr=0;var c=Kn(Al),d=N.T,_=yt.p;try{if(yt.p=32>c?32:c,N.T=null,_r===null)var v=!1;else{c=nn,nn=null;var B=_r,w=Al;if(_r=null,Al=0,(jt&6)!==0)throw Error(i(331));var L=jt;if(jt|=4,Ao(B.current),qa(B,B.current,w,c),jt=L,fe(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(mi,B)}catch{}v=!0}return v}finally{yt.p=_,N.T=d,pt(r,s)}}return!1}function Bt(r,s,c){s=Ni(c,s),s=bf(r.stateNode,s,2),r=Ji(r,s,2),r!==null&&(gi(r,2),ke(r))}function vt(r,s,c){if(r.tag===3)Bt(r,r,c);else for(;s!==null;){if(s.tag===3){Bt(s,r,c);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Mn===null||!Mn.has(d))){r=Ni(c,r),c=vf(2),d=Ji(s,c,2),d!==null&&(am(c,d,s,r),gi(d,2),ke(d));break}}s=s.return}}function Kt(r,s,c){var d=r.pingCache;if(d===null){d=r.pingCache=new Qa;var _=new Set;d.set(s,_)}else _=d.get(s),_===void 0&&(_=new Set,d.set(s,_));_.has(c)||(Vs=!0,_.add(c),r=vr.bind(null,r,s,c),s.then(r,r))}function vr(r,s,c){var d=r.pingCache;d!==null&&d.delete(s),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,ze===r&&(Vt&c)===c&&(We===4||We===3&&(Vt&62914560)===Vt&&300>pi()-te?(jt&2)===0&&$a(r,0):Bo|=c,ha===Vt&&(ha=0)),ke(r)}function Do(r,s){s===0&&(s=En()),r=wa(r,s),r!==null&&(gi(r,s),ke(r))}function Rl(r){var s=r.memoizedState,c=0;s!==null&&(c=s.retryLane),Do(r,c)}function it(r,s){var c=0;switch(r.tag){case 13:var d=r.stateNode,_=r.memoizedState;_!==null&&(c=_.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(s),Do(r,c)}function Z(r,s){return jn(r,s)}var lt=null,bt=null,Ut=!1,Le=!1,Xt=!1,ae=0;function ke(r){r!==bt&&r.next===null&&(bt===null?lt=bt=r:bt=bt.next=r),Le=!0,Ut||(Ut=!0,IR(Xs))}function fe(r,s){if(!Xt&&Le){Xt=!0;do for(var c=!1,d=lt;d!==null;){if(r!==0){var _=d.pendingLanes;if(_===0)var v=0;else{var B=d.suspendedLanes,w=d.pingedLanes;v=(1<<31-Ze(42|r)+1)-1,v&=_&~(B&~w),v=v&201326677?v&201326677|1:v?v|2:0}v!==0&&(c=!0,d2(d,v))}else v=Vt,v=at(d,d===ze?v:0),(v&3)===0||Et(d,v)||(c=!0,d2(d,v));d=d.next}while(c);Xt=!1}}function Xs(){Le=Ut=!1;var r=0;ae!==0&&(JR()&&(r=ae),ae=0);for(var s=pi(),c=null,d=lt;d!==null;){var _=d.next,v=fm(d,s);v===0?(d.next=null,c===null?lt=_:c.next=_,_===null&&(bt=c)):(c=d,(r!==0||(v&3)!==0)&&(Le=!0)),d=_}fe(r)}function fm(r,s){for(var c=r.suspendedLanes,d=r.pingedLanes,_=r.expirationTimes,v=r.pendingLanes&-62914561;0<v;){var B=31-Ze(v),w=1<<B,L=_[B];L===-1?((w&c)===0||(w&d)!==0)&&(_[B]=Ft(w,s)):L<=s&&(r.expiredLanes|=w),v&=~w}if(s=ze,c=Vt,c=at(r,r===s?c:0),d=r.callbackNode,c===0||r===s&&Ve===2||r.cancelPendingCommit!==null)return d!==null&&d!==null&&ie(d),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||Et(r,c)){if(s=c&-c,s===r.callbackPriority)return s;switch(d!==null&&ie(d),Kn(c)){case 2:case 8:c=xa;break;case 32:c=Js;break;case 268435456:c=Yl;break;default:c=Js}return d=f2.bind(null,r),c=jn(c,d),r.callbackPriority=s,r.callbackNode=c,s}return d!==null&&d!==null&&ie(d),r.callbackPriority=2,r.callbackNode=null,2}function f2(r,s){var c=r.callbackNode;if(xt()&&r.callbackNode!==c)return null;var d=Vt;return d=at(r,r===ze?d:0),d===0?null:(Ro(r,d,s),fm(r,pi()),r.callbackNode!=null&&r.callbackNode===c?f2.bind(null,r):null)}function d2(r,s){if(xt())return null;Ro(r,s,!0)}function IR(r){tM(function(){(jt&6)!==0?jn(Il,r):r()})}function x0(){return ae===0&&(ae=xe()),ae}function p2(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:$o(""+r)}function m2(r,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,r.id&&c.setAttribute("form",r.id),s.parentNode.insertBefore(c,s),r=new FormData(r),c.parentNode.removeChild(c),r}function YR(r,s,c,d,_){if(s==="submit"&&c&&c.stateNode===_){var v=p2((_[se]||null).action),B=d.submitter;B&&(s=(s=B[se]||null)?p2(s.formAction):B.getAttribute("formAction"),s!==null&&(v=s,B=null));var w=new Jl("action","action",null,d,_);r.push({event:w,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ae!==0){var L=B?m2(_,B):new FormData(_);pf(c,{pending:!0,data:L,method:_.method,action:v},null,L)}}else typeof v=="function"&&(w.preventDefault(),L=B?m2(_,B):new FormData(_),pf(c,{pending:!0,data:L,method:_.method,action:v},v,L))},currentTarget:_}]})}}for(var S0=0;S0<Ma.length;S0++){var E0=Ma[S0],qR=E0.toLowerCase(),jR=E0[0].toUpperCase()+E0.slice(1);or(qR,"on"+jR)}or($h,"onAnimationEnd"),or(Pi,"onAnimationIteration"),or(tf,"onAnimationStart"),or("dblclick","onDoubleClick"),or("focusin","onFocus"),or("focusout","onBlur"),or(Ra,"onTransitionRun"),or(lo,"onTransitionStart"),or(ps,"onTransitionCancel"),or(bc,"onTransitionEnd"),ls("onMouseEnter",["mouseout","mouseover"]),ls("onMouseLeave",["mouseout","mouseover"]),ls("onPointerEnter",["pointerout","pointerover"]),ls("onPointerLeave",["pointerout","pointerover"]),Zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nf));function g2(r,s){s=(s&4)!==0;for(var c=0;c<r.length;c++){var d=r[c],_=d.event;d=d.listeners;t:{var v=void 0;if(s)for(var B=d.length-1;0<=B;B--){var w=d[B],L=w.instance,Q=w.currentTarget;if(w=w.listener,L!==v&&_.isPropagationStopped())break t;v=w,_.currentTarget=Q;try{v(_)}catch(mt){Gc(mt)}_.currentTarget=null,v=L}else for(B=0;B<d.length;B++){if(w=d[B],L=w.instance,Q=w.currentTarget,w=w.listener,L!==v&&_.isPropagationStopped())break t;v=w,_.currentTarget=Q;try{v(_)}catch(mt){Gc(mt)}_.currentTarget=null,v=L}}}}function ye(r,s){var c=s[ss];c===void 0&&(c=s[ss]=new Set);var d=r+"__bubble";c.has(d)||(_2(s,r,2,!1),c.add(d))}function T0(r,s,c){var d=0;s&&(d|=4),_2(c,r,d,s)}var dm="_reactListening"+Math.random().toString(36).slice(2);function A0(r){if(!r[dm]){r[dm]=!0,ec.forEach(function(c){c!=="selectionchange"&&(KR.has(c)||T0(c,!1,r),T0(c,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[dm]||(s[dm]=!0,T0("selectionchange",!1,s))}}function _2(r,s,c,d){switch(F2(s)){case 2:var _=vM;break;case 8:_=xM;break;default:_=H0}c=_.bind(null,s,c,r),_=void 0,!eu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(_=!0),d?_!==void 0?r.addEventListener(s,c,{capture:!0,passive:_}):r.addEventListener(s,c,!0):_!==void 0?r.addEventListener(s,c,{passive:_}):r.addEventListener(s,c,!1)}function C0(r,s,c,d,_){var v=d;if((s&1)===0&&(s&2)===0&&d!==null)t:for(;;){if(d===null)return;var B=d.tag;if(B===3||B===4){var w=d.stateNode.containerInfo;if(w===_||w.nodeType===8&&w.parentNode===_)break;if(B===4)for(B=d.return;B!==null;){var L=B.tag;if((L===3||L===4)&&(L=B.stateNode.containerInfo,L===_||L.nodeType===8&&L.parentNode===_))return;B=B.return}for(;w!==null;){if(B=Sa(w),B===null)return;if(L=B.tag,L===5||L===6||L===26||L===27){d=v=B;continue t}w=w.parentNode}}d=d.return}Ph(function(){var Q=v,mt=tu(c),_t=[];t:{var st=vc.get(r);if(st!==void 0){var dt=Jl,Ot=r;switch(r){case"keypress":if(os(c)===0)break t;case"keydown":case"keyup":dt=Fh;break;case"focusin":Ot="focus",dt=uc;break;case"focusout":Ot="blur",dt=uc;break;case"beforeblur":case"afterblur":dt=uc;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dt=Hh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dt=o0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dt=kh;break;case $h:case Pi:case tf:dt=ap;break;case bc:dt=Aa;break;case"scroll":case"scrollend":dt=np;break;case"wheel":dt=u0;break;case"copy":case"cut":case"paste":dt=lp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dt=hc;break;case"toggle":case"beforetoggle":dt=cs}var Zt=(s&4)!==0,wn=!Zt&&(r==="scroll"||r==="scrollend"),J=Zt?st!==null?st+"Capture":null:st;Zt=[];for(var K=Q,nt;K!==null;){var gt=K;if(nt=gt.stateNode,gt=gt.tag,gt!==5&&gt!==26&&gt!==27||nt===null||J===null||(gt=Wl(K,J),gt!=null&&Zt.push(zf(K,gt,nt))),wn)break;K=K.return}0<Zt.length&&(st=new dt(st,Ot,null,c,mt),_t.push({event:st,listeners:Zt}))}}if((s&7)===0){t:{if(st=r==="mouseover"||r==="pointerover",dt=r==="mouseout"||r==="pointerout",st&&c!==ac&&(Ot=c.relatedTarget||c.fromElement)&&(Sa(Ot)||Ot[_i]))break t;if((dt||st)&&(st=mt.window===mt?mt:(st=mt.ownerDocument)?st.defaultView||st.parentWindow:window,dt?(Ot=c.relatedTarget||c.toElement,dt=Q,Ot=Ot?Sa(Ot):null,Ot!==null&&(wn=ut(Ot),Zt=Ot.tag,Ot!==wn||Zt!==5&&Zt!==27&&Zt!==6)&&(Ot=null)):(dt=null,Ot=Q),dt!==Ot)){if(Zt=Hh,gt="onMouseLeave",J="onMouseEnter",K="mouse",(r==="pointerout"||r==="pointerover")&&(Zt=hc,gt="onPointerLeave",J="onPointerEnter",K="pointer"),wn=dt==null?st:Je(dt),nt=Ot==null?st:Je(Ot),st=new Zt(gt,K+"leave",dt,c,mt),st.target=wn,st.relatedTarget=nt,gt=null,Sa(mt)===Q&&(Zt=new Zt(J,K+"enter",Ot,c,mt),Zt.target=nt,Zt.relatedTarget=wn,gt=Zt),wn=gt,dt&&Ot)e:{for(Zt=dt,J=Ot,K=0,nt=Zt;nt;nt=Kc(nt))K++;for(nt=0,gt=J;gt;gt=Kc(gt))nt++;for(;0<K-nt;)Zt=Kc(Zt),K--;for(;0<nt-K;)J=Kc(J),nt--;for(;K--;){if(Zt===J||J!==null&&Zt===J.alternate)break e;Zt=Kc(Zt),J=Kc(J)}Zt=null}else Zt=null;dt!==null&&y2(_t,st,dt,Zt,!1),Ot!==null&&wn!==null&&y2(_t,wn,Ot,Zt,!0)}}t:{if(st=Q?Je(Q):window,dt=st.nodeName&&st.nodeName.toLowerCase(),dt==="select"||dt==="input"&&st.type==="file")var Dt=dc;else if(qh(st))if(pc)Dt=ds;else{Dt=_p;var de=c0}else dt=st.nodeName,!dt||dt.toLowerCase()!=="input"||st.type!=="checkbox"&&st.type!=="radio"?Q&&Jo(Q.elementType)&&(Dt=dc):Dt=hu;if(Dt&&(Dt=Dt(r,Q))){Ui(_t,Dt,c,mt);break t}de&&de(r,st,Q),r==="focusout"&&Q&&st.type==="number"&&Q.memoizedProps.value!=null&&ic(st,"number",st.value)}switch(de=Q?Je(Q):window,r){case"focusin":(qh(de)||de.contentEditable==="true")&&(ll=de,Zh=Q,so=null);break;case"focusout":so=Zh=ll=null;break;case"mousedown":_c=!0;break;case"contextmenu":case"mouseup":case"dragend":_c=!1,lr(_t,c,mt);break;case"selectionchange":if(gc)break;case"keydown":case"keyup":lr(_t,c,mt)}var Nt;if(au)t:{switch(r){case"compositionstart":var Yt="onCompositionStart";break t;case"compositionend":Yt="onCompositionEnd";break t;case"compositionupdate":Yt="onCompositionUpdate";break t}Yt=void 0}else fs?ou(r,c)&&(Yt="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Yt="onCompositionStart");Yt&&(lu&&c.locale!=="ko"&&(fs||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&fs&&(Nt=zh()):(Ea=mt,Nh="value"in Ea?Ea.value:Ea.textContent,fs=!0)),de=pm(Q,Yt),0<de.length&&(Yt=new cc(Yt,r,null,c,mt),_t.push({event:Yt,listeners:de}),Nt?Yt.data=Nt:(Nt=Ih(c),Nt!==null&&(Yt.data=Nt)))),(Nt=su?uu(r,c):Yh(r,c))&&(Yt=pm(Q,"onBeforeInput"),0<Yt.length&&(de=new cc("onBeforeInput","beforeinput",null,c,mt),_t.push({event:de,listeners:Yt}),de.data=Nt)),YR(_t,r,Q,c,mt)}g2(_t,s)})}function zf(r,s,c){return{instance:r,listener:s,currentTarget:c}}function pm(r,s){for(var c=s+"Capture",d=[];r!==null;){var _=r,v=_.stateNode;_=_.tag,_!==5&&_!==26&&_!==27||v===null||(_=Wl(r,c),_!=null&&d.unshift(zf(r,_,v)),_=Wl(r,s),_!=null&&d.push(zf(r,_,v))),r=r.return}return d}function Kc(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function y2(r,s,c,d,_){for(var v=s._reactName,B=[];c!==null&&c!==d;){var w=c,L=w.alternate,Q=w.stateNode;if(w=w.tag,L!==null&&L===d)break;w!==5&&w!==26&&w!==27||Q===null||(L=Q,_?(Q=Wl(c,v),Q!=null&&B.unshift(zf(c,Q,L))):_||(Q=Wl(c,v),Q!=null&&B.push(zf(c,Q,L)))),c=c.return}B.length!==0&&r.push({event:s,listeners:B})}var WR=/\r\n?/g,QR=/\u0000|\uFFFD/g;function b2(r){return(typeof r=="string"?r:""+r).replace(WR,`
`).replace(QR,"")}function v2(r,s){return s=b2(s),b2(r)===s}function mm(){}function qe(r,s,c,d,_,v){switch(c){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||nl(r,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&nl(r,""+d);break;case"className":Wo(r,"class",d);break;case"tabIndex":Wo(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Wo(r,c,d);break;case"style":Gh(r,d,v);break;case"data":if(s!=="object"){Wo(r,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||c!=="href")){r.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=$o(""+d),r.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(s!=="input"&&qe(r,s,"name",_.name,_,null),qe(r,s,"formEncType",_.formEncType,_,null),qe(r,s,"formMethod",_.formMethod,_,null),qe(r,s,"formTarget",_.formTarget,_,null)):(qe(r,s,"encType",_.encType,_,null),qe(r,s,"method",_.method,_,null),qe(r,s,"target",_.target,_,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=$o(""+d),r.setAttribute(c,d);break;case"onClick":d!=null&&(r.onclick=mm);break;case"onScroll":d!=null&&ye("scroll",r);break;case"onScrollEnd":d!=null&&ye("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(_.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}c=$o(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""+d):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":d===!0?r.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,d):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(c,d):r.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(c):r.setAttribute(c,d);break;case"popover":ye("beforetoggle",r),ye("toggle",r),Ko(r,"popover",d);break;case"xlinkActuate":wr(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":wr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":wr(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":wr(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":wr(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":wr(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":wr(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":wr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":wr(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ko(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=tp.get(c)||c,Ko(r,c,d))}}function B0(r,s,c,d,_,v){switch(c){case"style":Gh(r,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(_.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof d=="string"?nl(r,d):(typeof d=="number"||typeof d=="bigint")&&nl(r,""+d);break;case"onScroll":d!=null&&ye("scroll",r);break;case"onScrollEnd":d!=null&&ye("scrollend",r);break;case"onClick":d!=null&&(r.onclick=mm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qr.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(_=c.endsWith("Capture"),s=c.slice(2,_?c.length-7:void 0),v=r[se]||null,v=v!=null?v[c]:null,typeof v=="function"&&r.removeEventListener(s,v,_),typeof d=="function")){typeof v!="function"&&v!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(s,d,_);break t}c in r?r[c]=d:d===!0?r.setAttribute(c,""):Ko(r,c,d)}}}function Ci(r,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ye("error",r),ye("load",r);var d=!1,_=!1,v;for(v in c)if(c.hasOwnProperty(v)){var B=c[v];if(B!=null)switch(v){case"src":d=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:qe(r,s,v,B,c,null)}}_&&qe(r,s,"srcSet",c.srcSet,c,null),d&&qe(r,s,"src",c.src,c,null);return;case"input":ye("invalid",r);var w=v=B=_=null,L=null,Q=null;for(d in c)if(c.hasOwnProperty(d)){var mt=c[d];if(mt!=null)switch(d){case"name":_=mt;break;case"type":B=mt;break;case"checked":L=mt;break;case"defaultChecked":Q=mt;break;case"value":v=mt;break;case"defaultValue":w=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(i(137,s));break;default:qe(r,s,d,mt,c,null)}}Uh(r,v,w,L,Q,B,_,!1),Qo(r);return;case"select":ye("invalid",r),d=B=v=null;for(_ in c)if(c.hasOwnProperty(_)&&(w=c[_],w!=null))switch(_){case"value":v=w;break;case"defaultValue":B=w;break;case"multiple":d=w;default:qe(r,s,_,w,c,null)}s=v,c=B,r.multiple=!!d,s!=null?Kl(r,!!d,s,!1):c!=null&&Kl(r,!!d,c,!0);return;case"textarea":ye("invalid",r),v=_=d=null;for(B in c)if(c.hasOwnProperty(B)&&(w=c[B],w!=null))switch(B){case"value":d=w;break;case"defaultValue":_=w;break;case"children":v=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:qe(r,s,B,w,c,null)}el(r,d,_,v),Qo(r);return;case"option":for(L in c)if(c.hasOwnProperty(L)&&(d=c[L],d!=null))switch(L){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:qe(r,s,L,d,c,null)}return;case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":ye("load",r);break;case"video":case"audio":for(d=0;d<Nf.length;d++)ye(Nf[d],r);break;case"image":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"embed":case"source":case"link":ye("error",r),ye("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in c)if(c.hasOwnProperty(Q)&&(d=c[Q],d!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:qe(r,s,Q,d,c,null)}return;default:if(Jo(s)){for(mt in c)c.hasOwnProperty(mt)&&(d=c[mt],d!==void 0&&B0(r,s,mt,d,c,void 0));return}}for(w in c)c.hasOwnProperty(w)&&(d=c[w],d!=null&&qe(r,s,w,d,c,null))}function ZR(r,s,c,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,v=null,B=null,w=null,L=null,Q=null,mt=null;for(dt in c){var _t=c[dt];if(c.hasOwnProperty(dt)&&_t!=null)switch(dt){case"checked":break;case"value":break;case"defaultValue":L=_t;default:d.hasOwnProperty(dt)||qe(r,s,dt,null,d,_t)}}for(var st in d){var dt=d[st];if(_t=c[st],d.hasOwnProperty(st)&&(dt!=null||_t!=null))switch(st){case"type":v=dt;break;case"name":_=dt;break;case"checked":Q=dt;break;case"defaultChecked":mt=dt;break;case"value":B=dt;break;case"defaultValue":w=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(i(137,s));break;default:dt!==_t&&qe(r,s,st,dt,d,_t)}}nc(r,B,w,L,Q,mt,v,_);return;case"select":dt=B=w=st=null;for(v in c)if(L=c[v],c.hasOwnProperty(v)&&L!=null)switch(v){case"value":break;case"multiple":dt=L;default:d.hasOwnProperty(v)||qe(r,s,v,null,d,L)}for(_ in d)if(v=d[_],L=c[_],d.hasOwnProperty(_)&&(v!=null||L!=null))switch(_){case"value":st=v;break;case"defaultValue":w=v;break;case"multiple":B=v;default:v!==L&&qe(r,s,_,v,d,L)}s=w,c=B,d=dt,st!=null?Kl(r,!!c,st,!1):!!d!=!!c&&(s!=null?Kl(r,!!c,s,!0):Kl(r,!!c,c?[]:"",!1));return;case"textarea":dt=st=null;for(w in c)if(_=c[w],c.hasOwnProperty(w)&&_!=null&&!d.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:qe(r,s,w,null,d,_)}for(B in d)if(_=d[B],v=c[B],d.hasOwnProperty(B)&&(_!=null||v!=null))switch(B){case"value":st=_;break;case"defaultValue":dt=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==v&&qe(r,s,B,_,d,v)}Oh(r,st,dt);return;case"option":for(var Ot in c)if(st=c[Ot],c.hasOwnProperty(Ot)&&st!=null&&!d.hasOwnProperty(Ot))switch(Ot){case"selected":r.selected=!1;break;default:qe(r,s,Ot,null,d,st)}for(L in d)if(st=d[L],dt=c[L],d.hasOwnProperty(L)&&st!==dt&&(st!=null||dt!=null))switch(L){case"selected":r.selected=st&&typeof st!="function"&&typeof st!="symbol";break;default:qe(r,s,L,st,d,dt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Zt in c)st=c[Zt],c.hasOwnProperty(Zt)&&st!=null&&!d.hasOwnProperty(Zt)&&qe(r,s,Zt,null,d,st);for(Q in d)if(st=d[Q],dt=c[Q],d.hasOwnProperty(Q)&&st!==dt&&(st!=null||dt!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(i(137,s));break;default:qe(r,s,Q,st,d,dt)}return;default:if(Jo(s)){for(var wn in c)st=c[wn],c.hasOwnProperty(wn)&&st!==void 0&&!d.hasOwnProperty(wn)&&B0(r,s,wn,void 0,d,st);for(mt in d)st=d[mt],dt=c[mt],!d.hasOwnProperty(mt)||st===dt||st===void 0&&dt===void 0||B0(r,s,mt,st,d,dt);return}}for(var J in c)st=c[J],c.hasOwnProperty(J)&&st!=null&&!d.hasOwnProperty(J)&&qe(r,s,J,null,d,st);for(_t in d)st=d[_t],dt=c[_t],!d.hasOwnProperty(_t)||st===dt||st==null&&dt==null||qe(r,s,_t,st,d,dt)}var R0=null,M0=null;function gm(r){return r.nodeType===9?r:r.ownerDocument}function x2(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function S2(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function D0(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var w0=null;function JR(){var r=window.event;return r&&r.type==="popstate"?r===w0?!1:(w0=r,!0):(w0=null,!1)}var E2=typeof setTimeout=="function"?setTimeout:void 0,$R=typeof clearTimeout=="function"?clearTimeout:void 0,T2=typeof Promise=="function"?Promise:void 0,tM=typeof queueMicrotask=="function"?queueMicrotask:typeof T2<"u"?function(r){return T2.resolve(null).then(r).catch(eM)}:E2;function eM(r){setTimeout(function(){throw r})}function U0(r,s){var c=s,d=0;do{var _=c.nextSibling;if(r.removeChild(c),_&&_.nodeType===8)if(c=_.data,c==="/$"){if(d===0){r.removeChild(_),Yf(s);return}d--}else c!=="$"&&c!=="$?"&&c!=="$!"||d++;c=_}while(c);Yf(s)}function O0(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":O0(c),jo(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function nM(r,s,c,d){for(;r.nodeType===1;){var _=c;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[tl])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(v=r.getAttribute("rel"),v==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(v!==_.rel||r.getAttribute("href")!==(_.href==null?null:_.href)||r.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||r.getAttribute("title")!==(_.title==null?null:_.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(v=r.getAttribute("src"),(v!==(_.src==null?null:_.src)||r.getAttribute("type")!==(_.type==null?null:_.type)||r.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&v&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var v=_.name==null?null:""+_.name;if(_.type==="hidden"&&r.getAttribute("name")===v)return r}else return r;if(r=ts(r.nextSibling),r===null)break}return null}function iM(r,s,c){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=ts(r.nextSibling),r===null))return null;return r}function ts(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}function A2(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return r;s--}else c==="/$"&&s++}r=r.previousSibling}return null}function C2(r,s,c){switch(s=gm(c),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}var da=new Map,B2=new Set;function _m(r){return typeof r.getRootNode=="function"?r.getRootNode():r.ownerDocument}var Ml=yt.d;yt.d={f:rM,r:aM,D:sM,C:lM,L:oM,m:uM,X:hM,S:cM,M:fM};function rM(){var r=Ml.f(),s=Cl();return r||s}function aM(r){var s=Nn(r);s!==null&&s.tag===5&&s.type==="form"?jp(s):Ml.r(r)}var Wc=typeof document>"u"?null:document;function R2(r,s,c){var d=Wc;if(d&&typeof s=="string"&&s){var _=qi(s);_='link[rel="'+r+'"][href="'+_+'"]',typeof c=="string"&&(_+='[crossorigin="'+c+'"]'),B2.has(_)||(B2.add(_),r={rel:r,crossOrigin:c,href:s},d.querySelector(_)===null&&(s=d.createElement("link"),Ci(s,"link",r),hn(s),d.head.appendChild(s)))}}function sM(r){Ml.D(r),R2("dns-prefetch",r,null)}function lM(r,s){Ml.C(r,s),R2("preconnect",r,s)}function oM(r,s,c){Ml.L(r,s,c);var d=Wc;if(d&&r&&s){var _='link[rel="preload"][as="'+qi(s)+'"]';s==="image"&&c&&c.imageSrcSet?(_+='[imagesrcset="'+qi(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(_+='[imagesizes="'+qi(c.imageSizes)+'"]')):_+='[href="'+qi(r)+'"]';var v=_;switch(s){case"style":v=Qc(r);break;case"script":v=Zc(r)}da.has(v)||(r=X({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:r,as:s},c),da.set(v,r),d.querySelector(_)!==null||s==="style"&&d.querySelector(Hf(v))||s==="script"&&d.querySelector(Lf(v))||(s=d.createElement("link"),Ci(s,"link",r),hn(s),d.head.appendChild(s)))}}function uM(r,s){Ml.m(r,s);var c=Wc;if(c&&r){var d=s&&typeof s.as=="string"?s.as:"script",_='link[rel="modulepreload"][as="'+qi(d)+'"][href="'+qi(r)+'"]',v=_;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Zc(r)}if(!da.has(v)&&(r=X({rel:"modulepreload",href:r},s),da.set(v,r),c.querySelector(_)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Lf(v)))return}d=c.createElement("link"),Ci(d,"link",r),hn(d),c.head.appendChild(d)}}}function cM(r,s,c){Ml.S(r,s,c);var d=Wc;if(d&&r){var _=Wr(d).hoistableStyles,v=Qc(r);s=s||"default";var B=_.get(v);if(!B){var w={loading:0,preload:null};if(B=d.querySelector(Hf(v)))w.loading=5;else{r=X({rel:"stylesheet",href:r,"data-precedence":s},c),(c=da.get(v))&&G0(r,c);var L=B=d.createElement("link");hn(L),Ci(L,"link",r),L._p=new Promise(function(Q,mt){L.onload=Q,L.onerror=mt}),L.addEventListener("load",function(){w.loading|=1}),L.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ym(B,s,d)}B={type:"stylesheet",instance:B,count:1,state:w},_.set(v,B)}}}function hM(r,s){Ml.X(r,s);var c=Wc;if(c&&r){var d=Wr(c).hoistableScripts,_=Zc(r),v=d.get(_);v||(v=c.querySelector(Lf(_)),v||(r=X({src:r,async:!0},s),(s=da.get(_))&&P0(r,s),v=c.createElement("script"),hn(v),Ci(v,"link",r),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(_,v))}}function fM(r,s){Ml.M(r,s);var c=Wc;if(c&&r){var d=Wr(c).hoistableScripts,_=Zc(r),v=d.get(_);v||(v=c.querySelector(Lf(_)),v||(r=X({src:r,async:!0,type:"module"},s),(s=da.get(_))&&P0(r,s),v=c.createElement("script"),hn(v),Ci(v,"link",r),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(_,v))}}function M2(r,s,c,d){var _=(_=Fe.current)?_m(_):null;if(!_)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Qc(c.href),c=Wr(_).hoistableStyles,d=c.get(s),d||(d={type:"style",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Qc(c.href);var v=Wr(_).hoistableStyles,B=v.get(r);if(B||(_=_.ownerDocument||_,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(r,B),(v=_.querySelector(Hf(r)))&&!v._p&&(B.instance=v,B.state.loading=5),da.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},da.set(r,c),v||dM(_,r,c,B.state))),s&&d===null)throw Error(i(528,""));return B}if(s&&d!==null)throw Error(i(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Zc(c),c=Wr(_).hoistableScripts,d=c.get(s),d||(d={type:"script",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Qc(r){return'href="'+qi(r)+'"'}function Hf(r){return'link[rel="stylesheet"]['+r+"]"}function D2(r){return X({},r,{"data-precedence":r.precedence,precedence:null})}function dM(r,s,c,d){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=r.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),Ci(s,"link",c),hn(s),r.head.appendChild(s))}function Zc(r){return'[src="'+qi(r)+'"]'}function Lf(r){return"script[async]"+r}function w2(r,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var d=r.querySelector('style[data-href~="'+qi(c.href)+'"]');if(d)return s.instance=d,hn(d),d;var _=X({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),hn(d),Ci(d,"style",_),ym(d,c.precedence,r),s.instance=d;case"stylesheet":_=Qc(c.href);var v=r.querySelector(Hf(_));if(v)return s.state.loading|=4,s.instance=v,hn(v),v;d=D2(c),(_=da.get(_))&&G0(d,_),v=(r.ownerDocument||r).createElement("link"),hn(v);var B=v;return B._p=new Promise(function(w,L){B.onload=w,B.onerror=L}),Ci(v,"link",d),s.state.loading|=4,ym(v,c.precedence,r),s.instance=v;case"script":return v=Zc(c.src),(_=r.querySelector(Lf(v)))?(s.instance=_,hn(_),_):(d=c,(_=da.get(v))&&(d=X({},c),P0(d,_)),r=r.ownerDocument||r,_=r.createElement("script"),hn(_),Ci(_,"link",d),r.head.appendChild(_),s.instance=_);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,ym(d,c.precedence,r));return s.instance}function ym(r,s,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=d.length?d[d.length-1]:null,v=_,B=0;B<d.length;B++){var w=d[B];if(w.dataset.precedence===s)v=w;else if(v!==_)break}v?v.parentNode.insertBefore(r,v.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(r,s.firstChild))}function G0(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function P0(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var bm=null;function U2(r,s,c){if(bm===null){var d=new Map,_=bm=new Map;_.set(c,d)}else _=bm,d=_.get(c),d||(d=new Map,_.set(c,d));if(d.has(r))return d;for(d.set(r,null),c=c.getElementsByTagName(r),_=0;_<c.length;_++){var v=c[_];if(!(v[tl]||v[he]||r==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var B=v.getAttribute(s)||"";B=r+B;var w=d.get(B);w?w.push(v):d.set(B,[v])}}return d}function O2(r,s,c){r=r.ownerDocument||r,r.head.insertBefore(c,s==="title"?r.querySelector("head > title"):null)}function pM(r,s,c){if(c===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function G2(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Ff=null;function mM(){}function gM(r,s,c){if(Ff===null)throw Error(i(475));var d=Ff;if(s.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var _=Qc(c.href),v=r.querySelector(Hf(_));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(d.count++,d=vm.bind(d),r.then(d,d)),s.state.loading|=4,s.instance=v,hn(v);return}v=r.ownerDocument||r,c=D2(c),(_=da.get(_))&&G0(c,_),v=v.createElement("link"),hn(v);var B=v;B._p=new Promise(function(w,L){B.onload=w,B.onerror=L}),Ci(v,"link",c),s.instance=v}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(d.count++,s=vm.bind(d),r.addEventListener("load",s),r.addEventListener("error",s))}}function _M(){if(Ff===null)throw Error(i(475));var r=Ff;return r.stylesheets&&r.count===0&&N0(r,r.stylesheets),0<r.count?function(s){var c=setTimeout(function(){if(r.stylesheets&&N0(r,r.stylesheets),r.unsuspend){var d=r.unsuspend;r.unsuspend=null,d()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(c)}}:null}function vm(){if(this.count--,this.count===0){if(this.stylesheets)N0(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var xm=null;function N0(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,xm=new Map,s.forEach(yM,r),xm=null,vm.call(r))}function yM(r,s){if(!(s.state.loading&4)){var c=xm.get(r);if(c)var d=c.get(null);else{c=new Map,xm.set(r,c);for(var _=r.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<_.length;v++){var B=_[v];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(c.set(B.dataset.precedence,B),d=B)}d&&c.set(null,d)}_=s.instance,B=_.getAttribute("data-precedence"),v=c.get(B)||d,v===d&&c.set(null,_),c.set(B,_),this.count++,d=vm.bind(this),_.addEventListener("load",d),_.addEventListener("error",d),v?v.parentNode.insertBefore(_,v.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(_,r.firstChild)),s.state.loading|=4}}var Vf={$$typeof:T,Provider:null,Consumer:null,_currentValue:Mt,_currentValue2:Mt,_threadCount:0};function bM(r,s,c,d,_,v,B,w){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Di(0),this.hiddenUpdates=Di(null),this.identifierPrefix=d,this.onUncaughtError=_,this.onCaughtError=v,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function P2(r,s,c,d,_,v,B,w,L,Q,mt,_t){return r=new bM(r,s,c,B,w,L,Q,_t),s=1,v===!0&&(s|=24),v=yn(3,null,null,s),r.current=v,v.stateNode=r,s=af(),s.refCount++,r.pooledCache=s,s.refCount++,v.memoizedState={element:d,isDehydrated:c,cache:s},xi(v),r}function N2(r){return r?(r=ms,r):ms}function z2(r,s,c,d,_,v){_=N2(_),d.context===null?d.context=_:d.pendingContext=_,d=Zi(s),d.payload={element:c},v=v===void 0?null:v,v!==null&&(d.callback=v),c=Ji(r,d,s),c!==null&&(Dn(c,r,s),Os(c,r,s))}function H2(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<s?c:s}}function z0(r,s){H2(r,s),(r=r.alternate)&&H2(r,s)}function L2(r){if(r.tag===13){var s=wa(r,67108864);s!==null&&Dn(s,r,67108864),z0(r,67108864)}}var Sm=!0;function vM(r,s,c,d){var _=N.T;N.T=null;var v=yt.p;try{yt.p=2,H0(r,s,c,d)}finally{yt.p=v,N.T=_}}function xM(r,s,c,d){var _=N.T;N.T=null;var v=yt.p;try{yt.p=8,H0(r,s,c,d)}finally{yt.p=v,N.T=_}}function H0(r,s,c,d){if(Sm){var _=L0(d);if(_===null)C0(r,s,d,Em,c),V2(r,d);else if(EM(_,r,s,c,d))d.stopPropagation();else if(V2(r,d),s&4&&-1<SM.indexOf(r)){for(;_!==null;){var v=Nn(_);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var B=F(v.pendingLanes);if(B!==0){var w=v;for(w.pendingLanes|=2,w.entangledLanes|=2;B;){var L=1<<31-Ze(B);w.entanglements[1]|=L,B&=~L}ke(v),(jt&6)===0&&(ue=pi()+500,fe(0))}}break;case 13:w=wa(v,2),w!==null&&Dn(w,v,2),Cl(),z0(v,2)}if(v=L0(d),v===null&&C0(r,s,d,Em,c),v===_)break;_=v}_!==null&&d.stopPropagation()}else C0(r,s,d,null,c)}}function L0(r){return r=tu(r),F0(r)}var Em=null;function F0(r){if(Em=null,r=Sa(r),r!==null){var s=ut(r);if(s===null)r=null;else{var c=s.tag;if(c===13){if(r=ct(s),r!==null)return r;r=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Em=r,null}function F2(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xl()){case Il:return 2;case xa:return 8;case Js:case Yo:return 32;case Yl:return 268435456;default:return 32}default:return 32}}var V0=!1,wo=null,Uo=null,Oo=null,kf=new Map,Xf=new Map,Go=[],SM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function V2(r,s){switch(r){case"focusin":case"focusout":wo=null;break;case"dragenter":case"dragleave":Uo=null;break;case"mouseover":case"mouseout":Oo=null;break;case"pointerover":case"pointerout":kf.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xf.delete(s.pointerId)}}function If(r,s,c,d,_,v){return r===null||r.nativeEvent!==v?(r={blockedOn:s,domEventName:c,eventSystemFlags:d,nativeEvent:v,targetContainers:[_]},s!==null&&(s=Nn(s),s!==null&&L2(s)),r):(r.eventSystemFlags|=d,s=r.targetContainers,_!==null&&s.indexOf(_)===-1&&s.push(_),r)}function EM(r,s,c,d,_){switch(s){case"focusin":return wo=If(wo,r,s,c,d,_),!0;case"dragenter":return Uo=If(Uo,r,s,c,d,_),!0;case"mouseover":return Oo=If(Oo,r,s,c,d,_),!0;case"pointerover":var v=_.pointerId;return kf.set(v,If(kf.get(v)||null,r,s,c,d,_)),!0;case"gotpointercapture":return v=_.pointerId,Xf.set(v,If(Xf.get(v)||null,r,s,c,d,_)),!0}return!1}function k2(r){var s=Sa(r.target);if(s!==null){var c=ut(s);if(c!==null){if(s=c.tag,s===13){if(s=ct(c),s!==null){r.blockedOn=s,ei(r.priority,function(){if(c.tag===13){var d=Ai(),_=wa(c,d);_!==null&&Dn(_,c,d),z0(c,d)}});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Tm(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var c=L0(r.nativeEvent);if(c===null){c=r.nativeEvent;var d=new c.constructor(c.type,c);ac=d,c.target.dispatchEvent(d),ac=null}else return s=Nn(c),s!==null&&L2(s),r.blockedOn=c,!1;s.shift()}return!0}function X2(r,s,c){Tm(r)&&c.delete(s)}function TM(){V0=!1,wo!==null&&Tm(wo)&&(wo=null),Uo!==null&&Tm(Uo)&&(Uo=null),Oo!==null&&Tm(Oo)&&(Oo=null),kf.forEach(X2),Xf.forEach(X2)}function Am(r,s){r.blockedOn===s&&(r.blockedOn=null,V0||(V0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,TM)))}var Cm=null;function I2(r){Cm!==r&&(Cm=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Cm===r&&(Cm=null);for(var s=0;s<r.length;s+=3){var c=r[s],d=r[s+1],_=r[s+2];if(typeof d!="function"){if(F0(d||c)===null)continue;break}var v=Nn(c);v!==null&&(r.splice(s,3),s-=3,pf(v,{pending:!0,data:_,method:c.method,action:d},d,_))}}))}function Yf(r){function s(L){return Am(L,r)}wo!==null&&Am(wo,r),Uo!==null&&Am(Uo,r),Oo!==null&&Am(Oo,r),kf.forEach(s),Xf.forEach(s);for(var c=0;c<Go.length;c++){var d=Go[c];d.blockedOn===r&&(d.blockedOn=null)}for(;0<Go.length&&(c=Go[0],c.blockedOn===null);)k2(c),c.blockedOn===null&&Go.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var _=c[d],v=c[d+1],B=_[se]||null;if(typeof v=="function")B||I2(c);else if(B){var w=null;if(v&&v.hasAttribute("formAction")){if(_=v,B=v[se]||null)w=B.formAction;else if(F0(_)!==null)continue}else w=B.action;typeof w=="function"?c[d+1]=w:(c.splice(d,3),d-=3),I2(c)}}}function k0(r){this._internalRoot=r}Bm.prototype.render=k0.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var c=s.current,d=Ai();z2(c,d,r,s,null,null)},Bm.prototype.unmount=k0.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;r.tag===0&&xt(),z2(r.current,2,null,r,null,null),Cl(),s[_i]=null}};function Bm(r){this._internalRoot=r}Bm.prototype.unstable_scheduleHydration=function(r){if(r){var s=wi();r={blockedOn:null,target:r,priority:s};for(var c=0;c<Go.length&&s!==0&&s<Go[c].priority;c++);Go.splice(c,0,r),c===0&&k2(r)}};var Y2=t.version;if(Y2!=="19.0.0")throw Error(i(527,Y2,"19.0.0"));yt.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=tt(s),r=r!==null?Tt(r):null,r=r===null?null:r.stateNode,r};var AM={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:N,findFiberByHostInstance:Sa,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rm.isDisabled&&Rm.supportsFiber)try{mi=Rm.inject(AM),an=Rm}catch{}}return jf.createRoot=function(r,s){if(!a(r))throw Error(i(299));var c=!1,d="",_=em,v=nm,B=im,w=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(_=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(B=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=P2(r,1,!1,null,null,c,d,_,v,B,w,null),r[_i]=s.current,A0(r.nodeType===8?r.parentNode:r),new k0(s)},jf.hydrateRoot=function(r,s,c){if(!a(r))throw Error(i(299));var d=!1,_="",v=em,B=nm,w=im,L=null,Q=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(B=c.onCaughtError),c.onRecoverableError!==void 0&&(w=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(L=c.unstable_transitionCallbacks),c.formState!==void 0&&(Q=c.formState)),s=P2(r,1,!0,s,c??null,d,_,v,B,w,L,Q),s.context=N2(null),c=s.current,d=Ai(),_=Zi(d),_.callback=null,Ji(c,_,d),s.current.lanes=d,gi(s,d),ke(s),r[_i]=s.current,A0(r),new Bm(s)},jf.version="19.0.0",jf}var ex;function PM(){if(ex)return I0.exports;ex=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),I0.exports=GM(),I0.exports}var NM=PM(),Ht=jy();const Ky=qy(Ht);var zM=Object.defineProperty,HM=Object.defineProperties,LM=Object.getOwnPropertyDescriptors,nx=Object.getOwnPropertySymbols,FM=Object.prototype.hasOwnProperty,VM=Object.prototype.propertyIsEnumerable,ix=(n,t,e)=>t in n?zM(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,rx=(n,t)=>{for(var e in t||(t={}))FM.call(t,e)&&ix(n,e,t[e]);if(nx)for(var e of nx(t))VM.call(t,e)&&ix(n,e,t[e]);return n},kM=(n,t)=>HM(n,LM(t)),ax,sx;typeof window<"u"&&((ax=window.document)!=null&&ax.createElement||((sx=window.navigator)==null?void 0:sx.product)==="ReactNative")?Ht.useLayoutEffect:Ht.useEffect;function oS(n,t,e){if(!n)return;if(e(n)===!0)return n;let i=n.child;for(;i;){const a=oS(i,t,e);if(a)return a;i=i.sibling}}function uS(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const lx=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=lx;return}return lx.apply(this,arguments)};const Wy=uS(Ht.createContext(null));class cS extends Ht.Component{render(){return Ht.createElement(Wy.Provider,{value:this._reactInternals},this.props.children)}}function XM(){const n=Ht.useContext(Wy);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=Ht.useId();return Ht.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const a=oS(i,!1,o=>{let h=o.memoizedState;for(;h;){if(h.memoizedState===t)return!0;h=h.next}});if(a)return a}},[n,t])}function IM(){const n=XM(),[t]=Ht.useState(()=>new Map);t.clear();let e=n;for(;e;){if(e.type&&typeof e.type=="object"){const a=e.type._context===void 0&&e.type.Provider===e.type?e.type:e.type._context;a&&a!==Wy&&!t.has(a)&&t.set(a,Ht.useContext(uS(a)))}e=e.return}return t}function YM(){const n=IM();return Ht.useMemo(()=>Array.from(n.keys()).reduce((t,e)=>i=>Ht.createElement(t,null,Ht.createElement(e.Provider,kM(rx({},i),{value:n.get(e)}))),t=>Ht.createElement(cS,rx({},t))),[n])}const qM="modulepreload",jM=function(n){return"/worlds-on-fire/"+n},ox={},vd=function(t,e,i){let a=Promise.resolve();if(e&&e.length>0){let h=function(g){return Promise.all(g.map(b=>Promise.resolve(b).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));a=h(e.map(g=>{if(g=jM(g),g in ox)return;ox[g]=!0;const b=g.endsWith(".css"),x=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${x}`))return;const E=document.createElement("link");if(E.rel=b?"stylesheet":qM,b||(E.as="script"),E.crossOrigin="",E.href=g,m&&E.setAttribute("nonce",m),document.head.appendChild(E),b)return new Promise((T,R)=>{E.addEventListener("load",T),E.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return a.then(h=>{for(const f of h||[])f.status==="rejected"&&o(f.reason);return t().catch(o)})};var I=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n.ShapeBuilder="shape-builder",n.Batcher="batcher",n))(I||{});const k_=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},rd=(n,t)=>k_(n).priority??t,Oe={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(k_).forEach(t=>{t.type.forEach(e=>{var i,a;return(a=(i=this._removeHandlers)[e])==null?void 0:a.call(i,t)})}),this},add(...n){return n.map(k_).forEach(t=>{t.type.forEach(e=>{var o,h;const i=this._addHandlers,a=this._queue;i[e]?(h=i[e])==null||h.call(i,t):(a[e]=a[e]||[],(o=a[e])==null||o.push(t))})}),this},handle(n,t,e){var h;const i=this._addHandlers,a=this._removeHandlers;if(i[n]||a[n])throw new Error(`Extension type ${n} already has a handler`);i[n]=t,a[n]=e;const o=this._queue;return o[n]&&((h=o[n])==null||h.forEach(f=>t(f)),delete o[n]),this},handleByMap(n,t){return this.handle(n,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(n,t,e=-1){return this.handle(n,i=>{t.findIndex(o=>o.name===i.name)>=0||(t.push({name:i.name,value:i.ref}),t.sort((o,h)=>rd(h.value,e)-rd(o.value,e)))},i=>{const a=t.findIndex(o=>o.name===i.name);a!==-1&&t.splice(a,1)})},handleByList(n,t,e=-1){return this.handle(n,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((a,o)=>rd(o,e)-rd(a,e)))},i=>{const a=t.indexOf(i.ref);a!==-1&&t.splice(a,1)})},mixin(n,...t){for(const e of t)Object.defineProperties(n.prototype,Object.getOwnPropertyDescriptors(e))}},hS={extension:{type:I.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await vd(()=>import("./browserAll-ro3XrH3F.js"),__vite__mapDeps([0,1]))}},fS={extension:{type:I.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await vd(()=>import("./webworkerAll-DOHJI95m.js"),[])}};class Ln{constructor(t,e,i){this._x=e||0,this._y=i||0,this._observer=t}clone(t){return new Ln(t??this._observer,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var W0={exports:{}},ux;function KM(){return ux||(ux=1,function(n){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function a(m,g,b){this.fn=m,this.context=g,this.once=b||!1}function o(m,g,b,x,E){if(typeof b!="function")throw new TypeError("The listener must be a function");var T=new a(b,x||m,E),R=e?e+g:g;return m._events[R]?m._events[R].fn?m._events[R]=[m._events[R],T]:m._events[R].push(T):(m._events[R]=T,m._eventsCount++),m}function h(m,g){--m._eventsCount===0?m._events=new i:delete m._events[g]}function f(){this._events=new i,this._eventsCount=0}f.prototype.eventNames=function(){var g=[],b,x;if(this._eventsCount===0)return g;for(x in b=this._events)t.call(b,x)&&g.push(e?x.slice(1):x);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(b)):g},f.prototype.listeners=function(g){var b=e?e+g:g,x=this._events[b];if(!x)return[];if(x.fn)return[x.fn];for(var E=0,T=x.length,R=new Array(T);E<T;E++)R[E]=x[E].fn;return R},f.prototype.listenerCount=function(g){var b=e?e+g:g,x=this._events[b];return x?x.fn?1:x.length:0},f.prototype.emit=function(g,b,x,E,T,R){var D=e?e+g:g;if(!this._events[D])return!1;var C=this._events[D],G=arguments.length,P,H;if(C.fn){switch(C.once&&this.removeListener(g,C.fn,void 0,!0),G){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,b),!0;case 3:return C.fn.call(C.context,b,x),!0;case 4:return C.fn.call(C.context,b,x,E),!0;case 5:return C.fn.call(C.context,b,x,E,T),!0;case 6:return C.fn.call(C.context,b,x,E,T,R),!0}for(H=1,P=new Array(G-1);H<G;H++)P[H-1]=arguments[H];C.fn.apply(C.context,P)}else{var q=C.length,et;for(H=0;H<q;H++)switch(C[H].once&&this.removeListener(g,C[H].fn,void 0,!0),G){case 1:C[H].fn.call(C[H].context);break;case 2:C[H].fn.call(C[H].context,b);break;case 3:C[H].fn.call(C[H].context,b,x);break;case 4:C[H].fn.call(C[H].context,b,x,E);break;default:if(!P)for(et=1,P=new Array(G-1);et<G;et++)P[et-1]=arguments[et];C[H].fn.apply(C[H].context,P)}}return!0},f.prototype.on=function(g,b,x){return o(this,g,b,x,!1)},f.prototype.once=function(g,b,x){return o(this,g,b,x,!0)},f.prototype.removeListener=function(g,b,x,E){var T=e?e+g:g;if(!this._events[T])return this;if(!b)return h(this,T),this;var R=this._events[T];if(R.fn)R.fn===b&&(!E||R.once)&&(!x||R.context===x)&&h(this,T);else{for(var D=0,C=[],G=R.length;D<G;D++)(R[D].fn!==b||E&&!R[D].once||x&&R[D].context!==x)&&C.push(R[D]);C.length?this._events[T]=C.length===1?C[0]:C:h(this,T)}return this},f.prototype.removeAllListeners=function(g){var b;return g?(b=e?e+g:g,this._events[b]&&h(this,b)):(this._events=new i,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=e,f.EventEmitter=f,n.exports=f}(W0)),W0.exports}var WM=KM();const Rr=qy(WM),dS=Math.PI*2,pS=180/Math.PI,mS=Math.PI/180;class Xe{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new Xe(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Q0.x=0,Q0.y=0,Q0}}const Q0=new Xe;class Gt{constructor(t=1,e=0,i=0,a=1,o=0,h=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=a,this.tx=o,this.ty=h}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,a,o,h){return this.a=t,this.b=e,this.c=i,this.d=a,this.tx=o,this.ty=h,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new Xe;const i=t.x,a=t.y;return e.x=this.a*i+this.c*a+this.tx,e.y=this.b*i+this.d*a+this.ty,e}applyInverse(t,e){e=e||new Xe;const i=this.a,a=this.b,o=this.c,h=this.d,f=this.tx,m=this.ty,g=1/(i*h+o*-a),b=t.x,x=t.y;return e.x=h*g*b+-o*g*x+(m*o-f*h)*g,e.y=i*g*x+-a*g*b+(-m*i+f*a)*g,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),a=this.a,o=this.c,h=this.tx;return this.a=a*e-this.b*i,this.b=a*i+this.b*e,this.c=o*e-this.d*i,this.d=o*i+this.d*e,this.tx=h*e-this.ty*i,this.ty=h*i+this.ty*e,this}append(t){const e=this.a,i=this.b,a=this.c,o=this.d;return this.a=t.a*e+t.b*a,this.b=t.a*i+t.b*o,this.c=t.c*e+t.d*a,this.d=t.c*i+t.d*o,this.tx=t.tx*e+t.ty*a+this.tx,this.ty=t.tx*i+t.ty*o+this.ty,this}appendFrom(t,e){const i=t.a,a=t.b,o=t.c,h=t.d,f=t.tx,m=t.ty,g=e.a,b=e.b,x=e.c,E=e.d;return this.a=i*g+a*x,this.b=i*b+a*E,this.c=o*g+h*x,this.d=o*b+h*E,this.tx=f*g+m*x+e.tx,this.ty=f*b+m*E+e.ty,this}setTransform(t,e,i,a,o,h,f,m,g){return this.a=Math.cos(f+g)*o,this.b=Math.sin(f+g)*o,this.c=-Math.sin(f-m)*h,this.d=Math.cos(f-m)*h,this.tx=t-(i*this.a+a*this.c),this.ty=e-(i*this.b+a*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,a=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=a*t.a+this.d*t.c,this.d=a*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,a=this.c,o=this.d,h=t.pivot,f=-Math.atan2(-a,o),m=Math.atan2(i,e),g=Math.abs(f+m);return g<1e-5||Math.abs(dS-g)<1e-5?(t.rotation=m,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=f,t.skew.y=m),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(a*a+o*o),t.position.x=this.tx+(h.x*e+h.y*a),t.position.y=this.ty+(h.x*i+h.y*o),t}invert(){const t=this.a,e=this.b,i=this.c,a=this.d,o=this.tx,h=t*a-e*i;return this.a=a/h,this.b=-e/h,this.c=-i/h,this.d=t/h,this.tx=(i*this.ty-a*o)/h,this.ty=-(t*this.ty-e*o)/h,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Gt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return ZM.identity()}static get shared(){return QM.identity()}}const QM=new Gt,ZM=new Gt,ku=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Xu=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Iu=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Yu=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],X_=[],gS=[],Mm=Math.sign;function JM(){for(let n=0;n<16;n++){const t=[];X_.push(t);for(let e=0;e<16;e++){const i=Mm(ku[n]*ku[e]+Iu[n]*Xu[e]),a=Mm(Xu[n]*ku[e]+Yu[n]*Xu[e]),o=Mm(ku[n]*Iu[e]+Iu[n]*Yu[e]),h=Mm(Xu[n]*Iu[e]+Yu[n]*Yu[e]);for(let f=0;f<16;f++)if(ku[f]===i&&Xu[f]===a&&Iu[f]===o&&Yu[f]===h){t.push(f);break}}}for(let n=0;n<16;n++){const t=new Gt;t.set(ku[n],Xu[n],Iu[n],Yu[n],0,0),gS.push(t)}}JM();const pe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>ku[n],uY:n=>Xu[n],vX:n=>Iu[n],vY:n=>Yu[n],inv:n=>n&8?n&15:-n&7,add:(n,t)=>X_[n][t],sub:(n,t)=>X_[n][pe.inv(t)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,t)=>Math.abs(n)*2<=Math.abs(t)?t>=0?pe.S:pe.N:Math.abs(t)*2<=Math.abs(n)?n>0?pe.E:pe.W:t>0?n>0?pe.SE:pe.SW:n>0?pe.NE:pe.NW,matrixAppendRotationInv:(n,t,e=0,i=0)=>{const a=gS[pe.inv(t)];a.tx=e,a.ty=i,n.append(a)}},Dm=[new Xe,new Xe,new Xe,new Xe];class Ue{constructor(t=0,e=0,i=0,a=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(a)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Ue(0,0,0,0)}clone(){return new Ue(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,i,a=.5){const{width:o,height:h}=this;if(o<=0||h<=0)return!1;const f=this.x,m=this.y,g=i*(1-a),b=i-g,x=f-g,E=f+o+g,T=m-g,R=m+h+g,D=f+b,C=f+o-b,G=m+b,P=m+h-b;return t>=x&&t<=E&&e>=T&&e<=R&&!(t>D&&t<C&&e>G&&e<P)}intersects(t,e){if(!e){const ht=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=ht)return!1;const X=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>X}const i=this.left,a=this.right,o=this.top,h=this.bottom;if(a<=i||h<=o)return!1;const f=Dm[0].set(t.left,t.top),m=Dm[1].set(t.left,t.bottom),g=Dm[2].set(t.right,t.top),b=Dm[3].set(t.right,t.bottom);if(g.x<=f.x||m.y<=f.y)return!1;const x=Math.sign(e.a*e.d-e.b*e.c);if(x===0||(e.apply(f,f),e.apply(m,m),e.apply(g,g),e.apply(b,b),Math.max(f.x,m.x,g.x,b.x)<=i||Math.min(f.x,m.x,g.x,b.x)>=a||Math.max(f.y,m.y,g.y,b.y)<=o||Math.min(f.y,m.y,g.y,b.y)>=h))return!1;const E=x*(m.y-f.y),T=x*(f.x-m.x),R=E*i+T*o,D=E*a+T*o,C=E*i+T*h,G=E*a+T*h;if(Math.max(R,D,C,G)<=E*f.x+T*f.y||Math.min(R,D,C,G)>=E*b.x+T*b.y)return!1;const P=x*(f.y-g.y),H=x*(g.x-f.x),q=P*i+H*o,et=P*a+H*o,ot=P*i+H*h,Y=P*a+H*h;return!(Math.max(q,et,ot,Y)<=P*f.x+H*f.y||Math.min(q,et,ot,Y)>=P*b.x+H*b.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),a=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=a,this.height=Math.max(o-a,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,a=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=a-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),a=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=a,this.height=o-a,this}getBounds(t){return t||(t=new Ue),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const e=t.x,i=t.y,a=t.x+t.width,o=t.y+t.height;return e>=this.x&&e<this.x+this.width&&i>=this.y&&i<this.y+this.height&&a>=this.x&&a<this.x+this.width&&o>=this.y&&o<this.y+this.height}set(t,e,i,a){return this.x=t,this.y=e,this.width=i,this.height=a,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const fd={default:-1};function rn(n="default"){return fd[n]===void 0&&(fd[n]=-1),++fd[n]}function $M(){for(const n in fd)delete fd[n]}const cx={},Jt="8.0.0",_S="8.3.4";function wt(n,t,e=3){if(cx[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${n}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`),console.warn(i))),cx[t]=!0}const Qy=()=>{};function ju(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function I_(n){return!(n&n-1)&&!!n}function tD(n){let t=(n>65535?1:0)<<4;n>>>=t;let e=(n>255?1:0)<<3;return n>>>=e,t|=e,e=(n>15?1:0)<<2,n>>>=e,t|=e,e=(n>3?1:0)<<1,n>>>=e,t|=e,t|n>>1}function ns(n){const t={};for(const e in n)n[e]!==void 0&&(t[e]=n[e]);return t}const hx=Object.create(null);function eD(n){const t=hx[n];return t===void 0&&(hx[n]=rn("resource")),t}const yS=class bS extends Rr{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...bS.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){wt(Jt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=eD(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};yS.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let ba=yS;const vS=class xS extends Rr{constructor(t={}){super(),this.options=t,this.uid=rn("textureSource"),this._resourceType="textureSource",this._resourceId=rn("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...xS.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new ba(ns(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){var e,i;this.style!==t&&((e=this._style)==null||e.off("change",this._onStyleChange,this),this._style=t,(i=this._style)==null||i.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=rn("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,i){i||(i=this._resolution),t||(t=this.width),e||(e=this.height);const a=Math.round(t*i),o=Math.round(e*i);return this.width=a/i,this.height=o/i,this._resolution=i,this.pixelWidth===a&&this.pixelHeight===o?!1:(this._refreshPOT(),this.pixelWidth=a,this.pixelHeight=o,this.emit("resize",this),this._resourceId=rn("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=I_(this.pixelWidth)&&I_(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};vS.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Sn=vS;class Ag extends Sn{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let i=t.format;i||(e instanceof Float32Array?i="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?i="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?i="rgba16uint":(e instanceof Int8Array,i="bgra8unorm")),super({...t,resource:e,format:i}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}Ag.extension=I.TextureSource;const fx=new Gt;class Zy{constructor(t,e){this.mapCoord=new Gt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var e;this.texture!==t&&((e=this._texture)==null||e.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let a=0;a<t.length;a+=2){const o=t[a],h=t[a+1];e[a]=o*i.a+h*i.c+i.tx,e[a+1]=o*i.b+h*i.d+i.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const i=t.orig,a=t.trim;a&&(fx.set(i.width/a.width,0,0,i.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(fx));const o=t.source,h=this.uClampFrame,f=this.clampMargin/o._resolution,m=this.clampOffset/o._resolution;return h[0]=(t.frame.x+f+m)/o.width,h[1]=(t.frame.y+f+m)/o.height,h[2]=(t.frame.x+t.frame.width-f+m)/o.width,h[3]=(t.frame.y+t.frame.height-f+m)/o.height,this.uClampOffset[0]=this.clampOffset/o.pixelWidth,this.uClampOffset[1]=this.clampOffset/o.pixelHeight,this.isSimple=t.frame.width===o.width&&t.frame.height===o.height&&t.rotate===0,!0}}class At extends Rr{constructor({source:t,label:e,frame:i,orig:a,trim:o,defaultAnchor:h,defaultBorders:f,rotate:m,dynamic:g}={}){if(super(),this.uid=rn("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Ue,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=(t==null?void 0:t.source)??new Sn,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:b,height:x}=this._source;this.frame.width=b,this.frame.height=x}this.orig=a||this.frame,this.trim=o,this.rotate=m??0,this.defaultAnchor=h,this.defaultBorders=f,this.destroyed=!1,this.dynamic=g||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Zy(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:i,height:a}=this._source,o=e.x/i,h=e.y/a,f=e.width/i,m=e.height/a;let g=this.rotate;if(g){const b=f/2,x=m/2,E=o+b,T=h+x;g=pe.add(g,pe.NW),t.x0=E+b*pe.uX(g),t.y0=T+x*pe.uY(g),g=pe.add(g,2),t.x1=E+b*pe.uX(g),t.y1=T+x*pe.uY(g),g=pe.add(g,2),t.x2=E+b*pe.uX(g),t.y2=T+x*pe.uY(g),g=pe.add(g,2),t.x3=E+b*pe.uX(g),t.y3=T+x*pe.uY(g)}else t.x0=o,t.y0=h,t.x1=o+f,t.y1=h,t.x2=o+f,t.y2=h+m,t.x3=o,t.y3=h+m}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return wt(Jt,"Texture.baseTexture is now Texture.source"),this._source}}At.EMPTY=new At({label:"EMPTY",source:new Sn({label:"EMPTY"})});At.EMPTY.destroy=Qy;At.WHITE=new At({source:new Ag({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});At.WHITE.destroy=Qy;function Jy(n,t,e){const{width:i,height:a}=e.orig,o=e.trim;if(o){const h=o.width,f=o.height;n.minX=o.x-t._x*i,n.maxX=n.minX+h,n.minY=o.y-t._y*a,n.maxY=n.minY+f}else n.minX=-t._x*i,n.maxX=n.minX+i,n.minY=-t._y*a,n.maxY=n.minY+a}const dx=new Gt;class $n{constructor(t=1/0,e=1/0,i=-1/0,a=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=dx,this.minX=t,this.minY=e,this.maxX=i,this.maxY=a}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Ue);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=dx,this}set(t,e,i,a){this.minX=t,this.minY=e,this.maxX=i,this.maxY=a}addFrame(t,e,i,a,o){o||(o=this.matrix);const h=o.a,f=o.b,m=o.c,g=o.d,b=o.tx,x=o.ty;let E=this.minX,T=this.minY,R=this.maxX,D=this.maxY,C=h*t+m*e+b,G=f*t+g*e+x;C<E&&(E=C),G<T&&(T=G),C>R&&(R=C),G>D&&(D=G),C=h*i+m*e+b,G=f*i+g*e+x,C<E&&(E=C),G<T&&(T=G),C>R&&(R=C),G>D&&(D=G),C=h*t+m*a+b,G=f*t+g*a+x,C<E&&(E=C),G<T&&(T=G),C>R&&(R=C),G>D&&(D=G),C=h*i+m*a+b,G=f*i+g*a+x,C<E&&(E=C),G<T&&(T=G),C>R&&(R=C),G>D&&(D=G),this.minX=E,this.minY=T,this.maxX=R,this.maxY=D}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,i=this.minY,a=this.maxX,o=this.maxY,{a:h,b:f,c:m,d:g,tx:b,ty:x}=t;let E=h*e+m*i+b,T=f*e+g*i+x;this.minX=E,this.minY=T,this.maxX=E,this.maxY=T,E=h*a+m*i+b,T=f*a+g*i+x,this.minX=E<this.minX?E:this.minX,this.minY=T<this.minY?T:this.minY,this.maxX=E>this.maxX?E:this.maxX,this.maxY=T>this.maxY?T:this.maxY,E=h*e+m*o+b,T=f*e+g*o+x,this.minX=E<this.minX?E:this.minX,this.minY=T<this.minY?T:this.minY,this.maxX=E>this.maxX?E:this.maxX,this.maxY=T>this.maxY?T:this.maxY,E=h*a+m*o+b,T=f*a+g*o+x,this.minX=E<this.minX?E:this.minX,this.minY=T<this.minY?T:this.minY,this.maxX=E>this.maxX?E:this.maxX,this.maxY=T>this.maxY?T:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,i,a){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<i&&(this.minY=i),this.maxY>a&&(this.maxY=a),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new $n(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,i,a){let o=this.minX,h=this.minY,f=this.maxX,m=this.maxY;a||(a=this.matrix);const g=a.a,b=a.b,x=a.c,E=a.d,T=a.tx,R=a.ty;for(let D=e;D<i;D+=2){const C=t[D],G=t[D+1],P=g*C+x*G+T,H=b*C+E*G+R;o=P<o?P:o,h=H<h?H:h,f=P>f?P:f,m=H>m?H:m}this.minX=o,this.minY=h,this.maxX=f,this.maxY=m}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var nD={grad:.9,turn:360,rad:360/(2*Math.PI)},Dl=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},fi=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},_a=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},SS=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},px=function(n){return{r:_a(n.r,0,255),g:_a(n.g,0,255),b:_a(n.b,0,255),a:_a(n.a)}},Z0=function(n){return{r:fi(n.r),g:fi(n.g),b:fi(n.b),a:fi(n.a,3)}},iD=/^#([0-9a-f]{3,8})$/i,wm=function(n){var t=n.toString(16);return t.length<2?"0"+t:t},ES=function(n){var t=n.r,e=n.g,i=n.b,a=n.a,o=Math.max(t,e,i),h=o-Math.min(t,e,i),f=h?o===t?(e-i)/h:o===e?2+(i-t)/h:4+(t-e)/h:0;return{h:60*(f<0?f+6:f),s:o?h/o*100:0,v:o/255*100,a}},TS=function(n){var t=n.h,e=n.s,i=n.v,a=n.a;t=t/360*6,e/=100,i/=100;var o=Math.floor(t),h=i*(1-e),f=i*(1-(t-o)*e),m=i*(1-(1-t+o)*e),g=o%6;return{r:255*[i,f,h,h,m,i][g],g:255*[m,i,i,f,h,h][g],b:255*[h,h,m,i,i,f][g],a}},mx=function(n){return{h:SS(n.h),s:_a(n.s,0,100),l:_a(n.l,0,100),a:_a(n.a)}},gx=function(n){return{h:fi(n.h),s:fi(n.s),l:fi(n.l),a:fi(n.a,3)}},_x=function(n){return TS((e=(t=n).s,{h:t.h,s:(e*=((i=t.l)<50?i:100-i)/100)>0?2*e/(i+e)*100:0,v:i+e,a:t.a}));var t,e,i},dd=function(n){return{h:(t=ES(n)).h,s:(a=(200-(e=t.s))*(i=t.v)/100)>0&&a<200?e*i/100/(a<=100?a:200-a)*100:0,l:a/2,a:t.a};var t,e,i,a},rD=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,aD=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,sD=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,lD=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Y_={string:[[function(n){var t=iD.exec(n);return t?(n=t[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?fi(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?fi(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var t=sD.exec(n)||lD.exec(n);return t?t[2]!==t[4]||t[4]!==t[6]?null:px({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(n){var t=rD.exec(n)||aD.exec(n);if(!t)return null;var e,i,a=mx({h:(e=t[1],i=t[2],i===void 0&&(i="deg"),Number(e)*(nD[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return _x(a)},"hsl"]],object:[[function(n){var t=n.r,e=n.g,i=n.b,a=n.a,o=a===void 0?1:a;return Dl(t)&&Dl(e)&&Dl(i)?px({r:Number(t),g:Number(e),b:Number(i),a:Number(o)}):null},"rgb"],[function(n){var t=n.h,e=n.s,i=n.l,a=n.a,o=a===void 0?1:a;if(!Dl(t)||!Dl(e)||!Dl(i))return null;var h=mx({h:Number(t),s:Number(e),l:Number(i),a:Number(o)});return _x(h)},"hsl"],[function(n){var t=n.h,e=n.s,i=n.v,a=n.a,o=a===void 0?1:a;if(!Dl(t)||!Dl(e)||!Dl(i))return null;var h=function(f){return{h:SS(f.h),s:_a(f.s,0,100),v:_a(f.v,0,100),a:_a(f.a)}}({h:Number(t),s:Number(e),v:Number(i),a:Number(o)});return TS(h)},"hsv"]]},yx=function(n,t){for(var e=0;e<t.length;e++){var i=t[e][0](n);if(i)return[i,t[e][1]]}return[null,void 0]},oD=function(n){return typeof n=="string"?yx(n.trim(),Y_.string):typeof n=="object"&&n!==null?yx(n,Y_.object):[null,void 0]},J0=function(n,t){var e=dd(n);return{h:e.h,s:_a(e.s+100*t,0,100),l:e.l,a:e.a}},$0=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},bx=function(n,t){var e=dd(n);return{h:e.h,s:e.s,l:_a(e.l+100*t,0,100),a:e.a}},q_=function(){function n(t){this.parsed=oD(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return fi($0(this.rgba),2)},n.prototype.isDark=function(){return $0(this.rgba)<.5},n.prototype.isLight=function(){return $0(this.rgba)>=.5},n.prototype.toHex=function(){return t=Z0(this.rgba),e=t.r,i=t.g,a=t.b,h=(o=t.a)<1?wm(fi(255*o)):"","#"+wm(e)+wm(i)+wm(a)+h;var t,e,i,a,o,h},n.prototype.toRgb=function(){return Z0(this.rgba)},n.prototype.toRgbString=function(){return t=Z0(this.rgba),e=t.r,i=t.g,a=t.b,(o=t.a)<1?"rgba("+e+", "+i+", "+a+", "+o+")":"rgb("+e+", "+i+", "+a+")";var t,e,i,a,o},n.prototype.toHsl=function(){return gx(dd(this.rgba))},n.prototype.toHslString=function(){return t=gx(dd(this.rgba)),e=t.h,i=t.s,a=t.l,(o=t.a)<1?"hsla("+e+", "+i+"%, "+a+"%, "+o+")":"hsl("+e+", "+i+"%, "+a+"%)";var t,e,i,a,o},n.prototype.toHsv=function(){return t=ES(this.rgba),{h:fi(t.h),s:fi(t.s),v:fi(t.v),a:fi(t.a,3)};var t},n.prototype.invert=function(){return Is({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},n.prototype.saturate=function(t){return t===void 0&&(t=.1),Is(J0(this.rgba,t))},n.prototype.desaturate=function(t){return t===void 0&&(t=.1),Is(J0(this.rgba,-t))},n.prototype.grayscale=function(){return Is(J0(this.rgba,-1))},n.prototype.lighten=function(t){return t===void 0&&(t=.1),Is(bx(this.rgba,t))},n.prototype.darken=function(t){return t===void 0&&(t=.1),Is(bx(this.rgba,-t))},n.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},n.prototype.alpha=function(t){return typeof t=="number"?Is({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):fi(this.rgba.a,3);var e},n.prototype.hue=function(t){var e=dd(this.rgba);return typeof t=="number"?Is({h:t,s:e.s,l:e.l,a:e.a}):fi(e.h)},n.prototype.isEqual=function(t){return this.toHex()===Is(t).toHex()},n}(),Is=function(n){return n instanceof q_?n:new q_(n)},vx=[],uD=function(n){n.forEach(function(t){vx.indexOf(t)<0&&(t(q_,Y_),vx.push(t))})};function cD(n,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var a in e)i[e[a]]=a;var o={};n.prototype.toName=function(h){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var f,m,g=i[this.toHex()];if(g)return g;if(h!=null&&h.closest){var b=this.toRgb(),x=1/0,E="black";if(!o.length)for(var T in e)o[T]=new n(e[T]).toRgb();for(var R in e){var D=(f=b,m=o[R],Math.pow(f.r-m.r,2)+Math.pow(f.g-m.g,2)+Math.pow(f.b-m.b,2));D<x&&(x=D,E=R)}return E}},t.string.push([function(h){var f=h.toLowerCase(),m=f==="transparent"?"#0000":e[f];return m?new n(m).toRgb():null},"name"])}uD([cD]);const mh=class ad{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof ad)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((o,h)=>o===e[h]);if(t!==null&&e!==null){const o=Object.keys(t),h=Object.keys(e);return o.length!==h.length?!1:o.every(f=>t[f]===e[f])}return t===e}toRgba(){const[t,e,i,a]=this._components;return{r:t,g:e,b:i,a}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,a]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(a*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[e,i,a,o]=this._components;return t[0]=e,t[1]=i,t[2]=a,t[3]=o,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[e,i,a]=this._components;return t[0]=e,t[1]=i,t[2]=a,t}toNumber(){return this._int}toBgrNumber(){const[t,e,i]=this.toUint8RgbArray();return(i<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,i,a,o]=ad._temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=a,this._components[3]*=o,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,a=this._int>>8&255,o=this._int&255;return e&&(i=i*t+.5|0,a=a*t+.5|0,o=o*t+.5|0),(t*255<<24)+(i<<16)+(a<<8)+o}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let e,i,a,o;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const h=t;e=(h>>16&255)/255,i=(h>>8&255)/255,a=(h&255)/255,o=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,a,o=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,a,o=255]=t,e/=255,i/=255,a/=255,o/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const f=ad.HEX_PATTERN.exec(t);f&&(t=`#${f[2]}`)}const h=Is(t);h.isValid()&&({r:e,g:i,b:a,a:o}=h.rgba,e/=255,i/=255,a/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=a,this._components[3]=o,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((a,o)=>{t[o]=Math.min(Math.max(a,e),i)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof ad||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};mh.shared=new mh;mh._temp=new mh;mh.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Ce=mh;const AS={cullArea:null,cullable:!1,cullableChildren:!0};class Cg{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var i;let e;return this._index>0?e=this._pool[--this._index]:e=new this._classType,(i=e.init)==null||i.call(e,t),e}return(t){var e;(e=t.reset)==null||e.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class CS{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new Cg(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(e=>{const i=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[i]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}}const di=new CS,BS={get isCachedAsTexture(){var n;return!!((n=this.renderGroup)!=null&&n.isCachedAsTexture)},cacheAsTexture(n){typeof n=="boolean"&&n===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(n===!0?{}:n))},updateCacheTexture(){var n;(n=this.renderGroup)==null||n.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(n){wt("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(n)}};function $y(n,t,e){const i=n.length;let a;if(t>=i||e===0)return;e=t+e>i?i-t:e;const o=i-e;for(a=t;a<o;++a)n[a]=n[a+e];n.length=o}const RS={allowChildren:!0,removeChildren(n=0,t){var o;const e=t??this.children.length,i=e-n,a=[];if(i>0&&i<=e){for(let f=e-1;f>=n;f--){const m=this.children[f];m&&(a.push(m),m.parent=null)}$y(this.children,n,e);const h=this.renderGroup||this.parentRenderGroup;h&&h.removeChildren(a);for(let f=0;f<a.length;++f){const m=a[f];(o=m.parentRenderLayer)==null||o.detach(m),this.emit("childRemoved",m,this,f),a[f].emit("removed",this)}return a.length>0&&this._didViewChangeTick++,a}else if(i===0&&this.children.length===0)return a;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const t=this.getChildAt(n);return this.removeChild(t)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,t)},getChildIndex(n){const t=this.children.indexOf(n);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(n,t){this.allowChildren||wt(Jt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:e}=this;if(t<0||t>e.length)throw new Error(`${n}addChildAt: The index ${t} supplied is out of bounds ${e.length}`);if(n.parent){const a=n.parent.children.indexOf(n);if(n.parent===this&&a===t)return n;a!==-1&&n.parent.children.splice(a,1)}t===e.length?e.push(n):e.splice(t,0,n),n.parent=this,n.didChange=!0,n._updateFlags=15;const i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,t),n.emit("added",this),n},swapChildren(n,t){if(n===t)return;const e=this.getChildIndex(n),i=this.getChildIndex(t);this.children[e]=t,this.children[i]=n;const a=this.renderGroup||this.parentRenderGroup;a&&(a.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var n;(n=this.parent)==null||n.removeChild(this)},reparentChild(...n){return n.length===1?this.reparentChildAt(n[0],this.children.length):(n.forEach(t=>this.reparentChildAt(t,this.children.length)),n[0])},reparentChildAt(n,t){if(n.parent===this)return this.setChildIndex(n,t),n;const e=n.worldTransform.clone();n.removeFromParent(),this.addChildAt(n,t);const i=this.worldTransform.clone();return i.invert(),e.prepend(i),n.setFromMatrix(e),n}},MS={collectRenderables(n,t,e){this.parentRenderLayer&&this.parentRenderLayer!==e||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(n,t,e):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,n):this.collectRenderablesWithEffects(n,t,e))},collectRenderablesSimple(n,t,e){const i=this.children,a=i.length;for(let o=0;o<a;o++)i[o].collectRenderables(n,t,e)},collectRenderablesWithEffects(n,t,e){const{renderPipes:i}=t;for(let a=0;a<this.effects.length;a++){const o=this.effects[a];i[o.pipe].push(o,this,n)}this.collectRenderablesSimple(n,t,e);for(let a=this.effects.length-1;a>=0;a--){const o=this.effects[a];i[o.pipe].pop(o,this,n)}}};class xd{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class DS{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const i=this._tests[e];if(i.test(t))return di.get(i.maskClass,t)}return t}returnMaskEffect(t){di.return(t)}}const sg=new DS;Oe.handleByList(I.MaskEffect,sg._effectClasses);const wS={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0)},addEffect(n){this.effects.indexOf(n)===-1&&(this.effects.push(n),this.effects.sort((e,i)=>e.priority-i.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(n){const t=this.effects.indexOf(n);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(n){const t=this._maskEffect;(t==null?void 0:t.mask)!==n&&(t&&(this.removeEffect(t),sg.returnMaskEffect(t),this._maskEffect=null),n!=null&&(this._maskEffect=sg.getMaskEffect(n),this.addEffect(this._maskEffect)))},get mask(){var n;return(n=this._maskEffect)==null?void 0:n.mask},setMask(n){this._maskOptions={...this._maskOptions,...n},n.mask&&(this.mask=n.mask),this._markStructureAsChanged()},set filters(n){var o;!Array.isArray(n)&&n&&(n=[n]);const t=this._filterEffect||(this._filterEffect=new xd);n=n;const e=(n==null?void 0:n.length)>0,i=((o=t.filters)==null?void 0:o.length)>0,a=e!==i;n=Array.isArray(n)?n.slice(0):n,t.filters=Object.freeze(n),a&&(e?this.addEffect(t):(this.removeEffect(t),t.filters=n??null))},get filters(){var n;return(n=this._filterEffect)==null?void 0:n.filters},set filterArea(n){this._filterEffect||(this._filterEffect=new xd),this._filterEffect.filterArea=n},get filterArea(){var n;return(n=this._filterEffect)==null?void 0:n.filterArea}},US={label:null,get name(){return wt(Jt,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){wt(Jt,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,t=!1){return this.getChildByLabel(n,t)},getChildByLabel(n,t=!1){const e=this.children;for(let i=0;i<e.length;i++){const a=e[i];if(a.label===n||n instanceof RegExp&&n.test(a.label))return a}if(t)for(let i=0;i<e.length;i++){const o=e[i].getChildByLabel(n,!0);if(o)return o}return null},getChildrenByLabel(n,t=!1,e=[]){const i=this.children;for(let a=0;a<i.length;a++){const o=i[a];(o.label===n||n instanceof RegExp&&n.test(o.label))&&e.push(o)}if(t)for(let a=0;a<i.length;a++)i[a].getChildrenByLabel(n,!0,e);return e}},Xi=new Cg(Gt),qs=new Cg($n),hD=new Gt,OS={getFastGlobalBounds(n,t){t||(t=new $n),t.clear(),this._getGlobalBoundsRecursive(!!n,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const e=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(e.worldTransform),t},_getGlobalBoundsRecursive(n,t,e){let i=t;if(n&&this.parentRenderLayer&&this.parentRenderLayer!==e||this.localDisplayStatus!==7||!this.measurable)return;const a=!!this.effects.length;if((this.renderGroup||a)&&(i=qs.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const h=this.bounds;i.addFrame(h.minX,h.minY,h.maxX,h.maxY,this.groupTransform)}const o=this.children;for(let h=0;h<o.length;h++)o[h]._getGlobalBoundsRecursive(n,i,e)}if(a){let o=!1;const h=this.renderGroup||this.parentRenderGroup;for(let f=0;f<this.effects.length;f++)this.effects[f].addBounds&&(o||(o=!0,i.applyMatrix(h.worldTransform)),this.effects[f].addBounds(i,!0));o&&(i.applyMatrix(h.worldTransform.copyTo(hD).invert()),t.addBounds(i,this.relativeGroupTransform)),t.addBounds(i),qs.return(i)}else this.renderGroup&&(t.addBounds(i,this.relativeGroupTransform),qs.return(i))}};function Pd(n,t,e){e.clear();let i,a;return n.parent?t?i=n.parent.worldTransform:(a=Xi.get().identity(),i=Bg(n,a)):i=Gt.IDENTITY,GS(n,e,i,t),a&&Xi.return(a),e.isValid||e.set(0,0,0,0),e}function GS(n,t,e,i){var f,m;if(!n.visible||!n.measurable)return;let a;i?a=n.worldTransform:(n.updateLocalTransform(),a=Xi.get(),a.appendFrom(n.localTransform,e));const o=t,h=!!n.effects.length;if(h&&(t=qs.get().clear()),n.boundsArea)t.addRect(n.boundsArea,a);else{n.bounds&&(t.matrix=a,t.addBounds(n.bounds));for(let g=0;g<n.children.length;g++)GS(n.children[g],t,a,i)}if(h){for(let g=0;g<n.effects.length;g++)(m=(f=n.effects[g]).addBounds)==null||m.call(f,t);o.addBounds(t,Gt.IDENTITY),qs.return(t)}i||Xi.return(a)}function Bg(n,t){const e=n.parent;return e&&(Bg(e,t),e.updateLocalTransform(),t.append(e.localTransform)),t}function tb(n,t){if(n===16777215||!t)return t;if(t===16777215||!n)return n;const e=n>>16&255,i=n>>8&255,a=n&255,o=t>>16&255,h=t>>8&255,f=t&255,m=e*o/255|0,g=i*h/255|0,b=a*f/255|0;return(m<<16)+(g<<8)+b}const xx=16777215;function Sd(n,t){return n===xx?t:t===xx?n:tb(n,t)}function sh(n){return((n&255)<<16)+(n&65280)+(n>>16&255)}const PS={getGlobalAlpha(n){if(n)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,e=this.parent;for(;e;)t*=e.alpha,e=e.parent;return t},getGlobalTransform(n,t){if(t)return n.copyFrom(this.worldTransform);this.updateLocalTransform();const e=Bg(this,Xi.get().identity());return n.appendFrom(this.localTransform,e),Xi.return(e),n},getGlobalTint(n){if(n)return this.renderGroup?sh(this.renderGroup.worldColor):this.parentRenderGroup?sh(Sd(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,e=this.parent;for(;e;)t=Sd(t,e.localColor),e=e.parent;return sh(t)}};function Rg(n,t,e){return t.clear(),e||(e=Gt.IDENTITY),NS(n,t,e,n,!0),t.isValid||t.set(0,0,0,0),t}function NS(n,t,e,i,a){var m,g;let o;if(a)o=Xi.get(),o=e.copyTo(o);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const b=n.localTransform;o=Xi.get(),o.appendFrom(b,e)}const h=t,f=!!n.effects.length;if(f&&(t=qs.get().clear()),n.boundsArea)t.addRect(n.boundsArea,o);else{n.renderPipeId&&(t.matrix=o,t.addBounds(n.bounds));const b=n.children;for(let x=0;x<b.length;x++)NS(b[x],t,o,i,!1)}if(f){for(let b=0;b<n.effects.length;b++)(g=(m=n.effects[b]).addLocalBounds)==null||g.call(m,t,i);h.addBounds(t,Gt.IDENTITY),qs.return(t)}Xi.return(o)}function eb(n,t){const e=n.children;for(let i=0;i<e.length;i++){const a=e[i],o=a.uid,h=(a._didViewChangeTick&65535)<<16|a._didContainerChangeTick&65535,f=t.index;(t.data[f]!==o||t.data[f+1]!==h)&&(t.data[t.index]=o,t.data[t.index+1]=h,t.didChange=!0),t.index=f+2,a.children.length&&eb(a,t)}return t.didChange}const fD=new Gt,zS={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,t){const e=Math.sign(this.scale.x)||1;t!==0?this.scale.x=n/t*e:this.scale.x=e},_setHeight(n,t){const e=Math.sign(this.scale.y)||1;t!==0?this.scale.y=n/t*e:this.scale.y=e},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new $n});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didViewChangeTick&&(n.didChange=!0,n.data[0]=this._didViewChangeTick),eb(this,n),n.didChange&&Rg(this,n.localBounds,fD),n.localBounds},getBounds(n,t){return Pd(this,n,t||new $n)}},HS={_onRender:null,set onRender(n){const t=this.renderGroup||this.parentRenderGroup;if(!n){this._onRender&&(t==null||t.removeOnRender(this)),this._onRender=null;return}this._onRender||t==null||t.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},LS={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(dD))}};function dD(n,t){return n._zIndex-t._zIndex}const FS={getGlobalPosition(n=new Xe,t=!1){return this.parent?this.parent.toGlobal(this._position,n,t):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,t,e=!1){const i=this.getGlobalTransform(Xi.get(),e);return t=i.apply(n,t),Xi.return(i),t},toLocal(n,t,e,i){t&&(n=t.toGlobal(n,e,i));const a=this.getGlobalTransform(Xi.get(),i);return e=a.applyInverse(n,e),Xi.return(a),e}};class nb{constructor(){this.uid=rn("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let pD=0;class VS{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this.textureStyle=new ba(this.textureOptions)}createTexture(t,e,i){const a=new Sn({...this.textureOptions,width:t,height:e,resolution:1,antialias:i,autoGarbageCollect:!1});return new At({source:a,label:`texturePool_${pD++}`})}getOptimalTexture(t,e,i=1,a){let o=Math.ceil(t*i-1e-6),h=Math.ceil(e*i-1e-6);o=ju(o),h=ju(h);const f=(o<<17)+(h<<1)+(a?1:0);this._texturePool[f]||(this._texturePool[f]=[]);let m=this._texturePool[f].pop();return m||(m=this.createTexture(o,h,a)),m.source._resolution=i,m.source.width=o/i,m.source.height=h/i,m.source.pixelWidth=o,m.source.pixelHeight=h,m.frame.x=0,m.frame.y=0,m.frame.width=t,m.frame.height=e,m.updateUvs(),this._poolKeyHash[m.uid]=f,m}getSameSizeTexture(t,e=!1){const i=t.source;return this.getOptimalTexture(t.width,t.height,i._resolution,e)}returnTexture(t,e=!1){const i=this._poolKeyHash[t.uid];e&&(t.source.style=this.textureStyle),this._texturePool[i].push(t)}clear(t){if(t=t!==!1,t)for(const e in this._texturePool){const i=this._texturePool[e];if(i)for(let a=0;a<i.length;a++)i[a].destroy(!0)}this._texturePool={}}}const Fn=new VS;class kS{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Gt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new nb,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let i=0;i<e.length;i++){const a=e[i];a._updateFlags=15,this.addChild(a)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Fn.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const e=t.children;for(let i=0;i<e.length;i++)this.addChild(e[i])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const e=t.children;for(let i=0;i<e.length;i++)this.removeChild(e[i])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const e=this.root.children;for(let i=0;i<e.length;i++)this._getChildren(e[i],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;const i=t.children;for(let a=0;a<i.length;a++)this._getChildren(i[a],e);return e}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Gt),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Gt),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Gt),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function lg(n,t,e={}){for(const i in t)!e[i]&&t[i]!==void 0&&(n[i]=t[i])}const t_=new Ln(null),e_=new Ln(null),n_=new Ln(null,1,1),Ed=1,Mg=2,lh=4,mD=8;class Vn extends Rr{constructor(t={}){var e,i;super(),this.uid=rn("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new Gt,this.relativeGroupTransform=new Gt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Ln(this,0,0),this._scale=n_,this._pivot=e_,this._skew=t_,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],lg(this,t,{children:!0,parent:!0,effects:!0}),(e=t.children)==null||e.forEach(a=>this.addChild(a)),(i=t.parent)==null||i.addChild(this)}static mixin(t){wt("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Oe.mixin(Vn,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||wt(Jt,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let a=0;a<t.length;a++)this.addChild(t[a]);return t[0]}const e=t[0],i=this.renderGroup||this.parentRenderGroup;return e.parent===this?(this.children.splice(this.children.indexOf(e),1),this.children.push(e),i&&(i.structureDidChange=!0),e):(e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e._updateFlags=15,i&&i.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),this._didViewChangeTick++,e._zIndex!==0&&e.depthOfChildModified(),e)}removeChild(...t){if(t.length>1){for(let a=0;a<t.length;a++)this.removeChild(t[a]);return t[0]}const e=t[0],i=this.children.indexOf(e);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(e):this.parentRenderGroup&&this.parentRenderGroup.removeChild(e),e.parentRenderLayer&&e.parentRenderLayer.detach(e),e.parent=null,this.emit("childRemoved",e,this,i),e.emit("removed",this)),e}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),this.renderGroup=di.get(kS,this),this.groupTransform=Gt.IDENTITY,t==null||t.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),di.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t==null||t.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Gt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*pS}set angle(t){this.rotation=t*mS}get pivot(){return this._pivot===e_&&(this._pivot=new Ln(this,0,0)),this._pivot}set pivot(t){this._pivot===e_&&(this._pivot=new Ln(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===t_&&(this._skew=new Ln(this,0,0)),this._skew}set skew(t){this._skew===t_&&(this._skew=new Ln(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===n_&&(this._scale=new Ln(this,1,1)),this._scale}set scale(t){this._scale===n_&&(this._scale=new Ln(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const i=this.getLocalBounds();typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,i.width),e!==void 0&&this._setHeight(e,i.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const e=this.localTransform,i=this._scale,a=this._pivot,o=this._position,h=i._x,f=i._y,m=a._x,g=a._y;e.a=this._cx*h,e.b=this._sx*h,e.c=this._cy*f,e.d=this._sy*f,e.tx=o._x-(m*e.a+g*e.c),e.ty=o._y-(m*e.b+g*e.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=Ed,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const i=Ce.shared.setValue(t??16777215).toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=Ed,this._onUpdate())}get tint(){return sh(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Mg,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const e=t?2:0;(this.localDisplayStatus&2)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=lh,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const e=t?0:4;(this.localDisplayStatus&4)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=lh,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const e=t?1:0;(this.localDisplayStatus&1)!==e&&(this._updateFlags|=lh,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){var a;if(this.destroyed)return;this.destroyed=!0;let e;if(this.children.length&&(e=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t==null?void 0:t.children)&&e)for(let o=0;o<e.length;++o)e[o].destroy(t);(a=this.renderGroup)==null||a.destroy(),this.renderGroup=null}}Oe.mixin(Vn,RS,OS,FS,HS,zS,wS,US,LS,AS,BS,PS,MS);class Qs extends Vn{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new $n(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const e=this.bounds,{x:i,y:a}=t;return i>=e.minX&&i<=e.maxX&&a>=e.minY&&a<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){var e,i;super.destroy(t),this._bounds=null;for(const a in this._gpuData)(i=(e=this._gpuData[a]).destroy)==null||i.call(e);this._gpuData=null}collectRenderablesSimple(t,e,i){const{renderPipes:a}=e;a.blendMode.setBlendMode(this,this.groupBlendMode,t),a[this.renderPipeId].addRenderable(this,t),this.didViewUpdate=!1;const h=this.children,f=h.length;for(let m=0;m<f;m++)h[m].collectRenderables(t,e,i)}}class Ri extends Qs{constructor(t=At.EMPTY){t instanceof At&&(t={texture:t});const{texture:e=At.EMPTY,anchor:i,roundPixels:a,width:o,height:h,...f}=t;super({label:"Sprite",...f}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Ln({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=a??!1,o!==void 0&&(this.width=o),h!==void 0&&(this.height=h)}static from(t,e=!1){return t instanceof At?new Ri(t):new Ri(At.from(t,e))}set texture(t){t||(t=At.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Jy(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return wt("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,e=this._texture,i=this._bounds,{width:a,height:o}=e.orig;i.minX=-t._x*a,i.maxX=i.minX+a,i.minY=-t._y*o,i.maxY=i.minY+o}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(i)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),e!==void 0&&this._setHeight(e,this._texture.orig.height)}}const gD=new $n;function Dg(n,t,e){const i=gD;n.measurable=!0,Pd(n,e,i),t.addBoundsMask(i),n.measurable=!1}let i_=0;const Sx=500;function kt(...n){i_!==Sx&&(i_++,i_===Sx?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...n))}function wg(n,t,e){const i=qs.get();n.measurable=!0;const a=Xi.get().identity(),o=XS(n,e,a);Rg(n,i,o),n.measurable=!1,t.addBoundsMask(i),Xi.return(a),qs.return(i)}function XS(n,t,e){return n?(n!==t&&(XS(n.parent,t,e),n.updateLocalTransform(),e.append(n.localTransform)),e):(kt("Mask bounds, renderable is not inside the root container"),e)}class ib{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof Ri),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){this.inverse||Dg(this.mask,t,e)}addLocalBounds(t,e){wg(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Ri}}ib.extension=I.MaskEffect;class rb{constructor(t){this.priority=0,this.pipe="colorMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}rb.extension=I.MaskEffect;class ab{constructor(t){this.priority=0,this.pipe="stencilMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){Dg(this.mask,t,e)}addLocalBounds(t,e){wg(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Vn}}ab.extension=I.MaskEffect;const IS={createCanvas:(n,t)=>{const e=document.createElement("canvas");return e.width=n,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,t)=>fetch(n,t),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let Ex=IS;const me={get(){return Ex},set(n){Ex=n}};class js extends Sn{constructor(t){t.resource||(t.resource=me.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,i=this._resolution){const a=super.resize(t,e,i);return a&&this.resizeCanvas(),a}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}js.extension=I.TextureSource;class Vo extends Sn{constructor(t){super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}Vo.extension=I.TextureSource;var zl=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(zl||{});class $m{constructor(t,e=null,i=0,a=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=i,this._once=a}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const YS=class Xr{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new $m(null,null,1/0),this.deltaMS=1/Xr.targetFPMS,this.elapsedMS=1/Xr.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=zl.NORMAL){return this._addListener(new $m(t,e,i))}addOnce(t,e,i=zl.NORMAL){return this._addListener(new $m(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const o=t-this._lastFrame|0;if(o<this._minElapsedMS)return;this._lastFrame=t-o%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Xr.targetFPMS;const i=this._head;let a=i.next;for(;a;)a=a.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,Xr.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Xr._shared){const t=Xr._shared=new Xr;t.autoStart=!0,t._protected=!0}return Xr._shared}static get system(){if(!Xr._system){const t=Xr._system=new Xr;t.autoStart=!0,t._protected=!0}return Xr._system}};YS.targetFPMS=.06;let Bi=YS,r_;async function sb(){return r_??(r_=(async()=>{var h;const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise(f=>{const m=document.createElement("video");m.onloadeddata=()=>f(m),m.onerror=()=>f(null),m.autoplay=!1,m.crossOrigin="anonymous",m.preload="auto",m.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",m.load()});if(!e)return"premultiply-alpha-on-upload";const i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const o=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,o),t.deleteFramebuffer(a),t.deleteTexture(i),(h=t.getExtension("WEBGL_lose_context"))==null||h.loseContext(),o[0]<=o[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),r_}const Ug=class qS extends Sn{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...qS.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=Bi.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await sb(),this._load=new Promise((i,a)=>{this.isValid?i(this):(this._resolve=i,this._reject=a,e.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Bi.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Bi.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Bi.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};Ug.extension=I.TextureSource;Ug.defaultOptions={...Sn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Ug.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let pd=Ug;const ma=(n,t,e=!1)=>(Array.isArray(n)||(n=[n]),t?n.map(i=>typeof i=="string"||e?t(i):i):n);class _D{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||kt(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=ma(t);let a;for(let m=0;m<this.parsers.length;m++){const g=this.parsers[m];if(g.test(e)){a=g.getCacheableAssets(i,e);break}}const o=new Map(Object.entries(a||{}));a||i.forEach(m=>{o.set(m,e)});const h=[...o.keys()],f={cacheKeys:h,keys:i};i.forEach(m=>{this._cacheMap.set(m,f)}),h.forEach(m=>{const g=a?a[m]:e;this._cache.has(m)&&this._cache.get(m)!==g&&kt("[Cache] already has key:",m),this._cache.set(m,o.get(m))})}remove(t){if(!this._cacheMap.has(t)){kt(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(a=>{this._cache.delete(a)}),e.keys.forEach(a=>{this._cacheMap.delete(a)})}get parsers(){return this._parsers}}const Qe=new _D,j_=[];Oe.handleByList(I.TextureSource,j_);function yD(n={}){return lb(n)}function lb(n={}){const t=n&&n.resource,e=t?n.resource:n,i=t?n:{resource:n};for(let a=0;a<j_.length;a++){const o=j_[a];if(o.test(e))return new o(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function jS(n={},t=!1){const e=n&&n.resource,i=e?n.resource:n,a=e?n:{resource:n};if(!t&&Qe.has(i))return Qe.get(i);const o=new At({source:lb(a)});return o.on("destroy",()=>{Qe.has(i)&&Qe.remove(i)}),t||Qe.set(i,o),o}function KS(n,t=!1){return typeof n=="string"?Qe.get(n):n instanceof Sn?new At({source:n}):jS(n,t)}At.from=KS;Sn.from=lb;Oe.add(ib,rb,ab,pd,Vo,js,Ag);var Yr=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(Yr||{});function es(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function Kf(n){return n.split("?")[0].split("#")[0]}function bD(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function vD(n,t,e){return n.replace(new RegExp(bD(t),"g"),e)}function xD(n,t){let e="",i=0,a=-1,o=0,h=-1;for(let f=0;f<=n.length;++f){if(f<n.length)h=n.charCodeAt(f);else{if(h===47)break;h=47}if(h===47){if(!(a===f-1||o===1))if(a!==f-1&&o===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const m=e.lastIndexOf("/");if(m!==e.length-1){m===-1?(e="",i=0):(e=e.slice(0,m),i=e.length-1-e.lastIndexOf("/")),a=f,o=0;continue}}else if(e.length===2||e.length===1){e="",i=0,a=f,o=0;continue}}}else e.length>0?e+=`/${n.slice(a+1,f)}`:e=n.slice(a+1,f),i=f-a-1;a=f,o=0}else h===46&&o!==-1?++o:o=-1}return e}const Tr={toPosix(n){return vD(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){es(n),n=this.toPosix(n);const t=/^file:\/\/\//.exec(n);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(n);return e?e[0]:""},toAbsolute(n,t,e){if(es(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const i=Kf(this.toPosix(t??me.get().getBaseUrl())),a=Kf(this.toPosix(e??this.rootname(i)));return n=this.toPosix(n),n.startsWith("/")?Tr.join(a,n.slice(1)):this.isAbsolute(n)?n:this.join(i,n)},normalize(n){if(es(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let t="";const e=n.startsWith("/");this.hasProtocol(n)&&(t=this.rootname(n),n=n.slice(t.length));const i=n.endsWith("/");return n=xD(n),n.length>0&&i&&(n+="/"),e?`/${n}`:t+n},isAbsolute(n){return es(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let t;for(let e=0;e<n.length;++e){const i=n[e];if(es(i),i.length>0)if(t===void 0)t=i;else{const a=n[e-1]??"";this.joinExtensions.includes(this.extname(a).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(n){if(es(n),n.length===0)return".";n=this.toPosix(n);let t=n.charCodeAt(0);const e=t===47;let i=-1,a=!0;const o=this.getProtocol(n),h=n;n=n.slice(o.length);for(let f=n.length-1;f>=1;--f)if(t=n.charCodeAt(f),t===47){if(!a){i=f;break}}else a=!1;return i===-1?e?"/":this.isUrl(h)?o+n:o:e&&i===1?"//":o+n.slice(0,i)},rootname(n){es(n),n=this.toPosix(n);let t="";if(n.startsWith("/")?t="/":t=this.getProtocol(n),this.isUrl(n)){const e=n.indexOf("/",t.length);e!==-1?t=n.slice(0,e):t=n,t.endsWith("/")||(t+="/")}return t},basename(n,t){es(n),t&&es(t),n=Kf(this.toPosix(n));let e=0,i=-1,a=!0,o;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";let h=t.length-1,f=-1;for(o=n.length-1;o>=0;--o){const m=n.charCodeAt(o);if(m===47){if(!a){e=o+1;break}}else f===-1&&(a=!1,f=o+1),h>=0&&(m===t.charCodeAt(h)?--h===-1&&(i=o):(h=-1,i=f))}return e===i?i=f:i===-1&&(i=n.length),n.slice(e,i)}for(o=n.length-1;o>=0;--o)if(n.charCodeAt(o)===47){if(!a){e=o+1;break}}else i===-1&&(a=!1,i=o+1);return i===-1?"":n.slice(e,i)},extname(n){es(n),n=Kf(this.toPosix(n));let t=-1,e=0,i=-1,a=!0,o=0;for(let h=n.length-1;h>=0;--h){const f=n.charCodeAt(h);if(f===47){if(!a){e=h+1;break}continue}i===-1&&(a=!1,i=h+1),f===46?t===-1?t=h:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||i===-1||o===0||o===1&&t===i-1&&t===e+1?"":n.slice(t,i)},parse(n){es(n);const t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;n=Kf(this.toPosix(n));let e=n.charCodeAt(0);const i=this.isAbsolute(n);let a;t.root=this.rootname(n),i||this.hasProtocol(n)?a=1:a=0;let o=-1,h=0,f=-1,m=!0,g=n.length-1,b=0;for(;g>=a;--g){if(e=n.charCodeAt(g),e===47){if(!m){h=g+1;break}continue}f===-1&&(m=!1,f=g+1),e===46?o===-1?o=g:b!==1&&(b=1):o!==-1&&(b=-1)}return o===-1||f===-1||b===0||b===1&&o===f-1&&o===h+1?f!==-1&&(h===0&&i?t.base=t.name=n.slice(1,f):t.base=t.name=n.slice(h,f)):(h===0&&i?(t.name=n.slice(1,o),t.base=n.slice(1,f)):(t.name=n.slice(h,o),t.base=n.slice(h,f)),t.ext=n.slice(o,f)),t.dir=this.dirname(n),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function WS(n,t,e,i,a){const o=t[e];for(let h=0;h<o.length;h++){const f=o[h];e<t.length-1?WS(n.replace(i[e],f),t,e+1,i,a):a.push(n.replace(i[e],f))}}function QS(n){const t=/\{(.*?)\}/g,e=n.match(t),i=[];if(e){const a=[];e.forEach(o=>{const h=o.substring(1,o.length-1).split(",");a.push(h)}),WS(n,a,0,e,i)}else i.push(n);return i}const Td=n=>!Array.isArray(n);class Xo{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){const{alias:e,src:i}=t;return ma(e||i,o=>typeof o=="string"?o:Array.isArray(o)?o.map(h=>(h==null?void 0:h.src)??h):o!=null&&o.src?o.src:o,!0)}addManifest(t){this._manifest&&kt("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];let a=e;Array.isArray(e)||(a=Object.entries(e).map(([o,h])=>typeof h=="string"||Array.isArray(h)?{alias:o,src:h}:{alias:o,...h})),a.forEach(o=>{const h=o.src,f=o.alias;let m;if(typeof f=="string"){const g=this._createBundleAssetId(t,f);i.push(g),m=[f,g]}else{const g=f.map(b=>this._createBundleAssetId(t,b));i.push(...g),m=[...f,...g]}this.add({...o,alias:m,src:h})}),this._bundles[t]=i}add(t){const e=[];Array.isArray(t)?e.push(...t):e.push(t);let i;i=o=>{this.hasKey(o)&&kt(`[Resolver] already has key: ${o} overwriting`)},ma(e).forEach(o=>{const{src:h}=o;let{data:f,format:m,loadParser:g}=o;const b=ma(h).map(T=>typeof T=="string"?QS(T):Array.isArray(T)?T:[T]),x=this.getAlias(o);Array.isArray(x)?x.forEach(i):i(x);const E=[];b.forEach(T=>{T.forEach(R=>{let D={};if(typeof R!="object"){D.src=R;for(let C=0;C<this._parsers.length;C++){const G=this._parsers[C];if(G.test(R)){D=G.parse(R);break}}}else f=R.data??f,m=R.format??m,g=R.loadParser??g,D={...D,...R};if(!x)throw new Error(`[Resolver] alias is undefined for this asset: ${D.src}`);D=this._buildResolvedAsset(D,{aliases:x,data:f,format:m,loadParser:g}),E.push(D)})}),x.forEach(T=>{this._assetMap[T]=E})})}resolveBundle(t){const e=Td(t);t=ma(t);const i={};return t.forEach(a=>{const o=this._bundles[a];if(o){const h=this.resolve(o),f={};for(const m in h){const g=h[m];f[this._extractAssetIdFromBundle(a,m)]=g}i[a]=f}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const a in e)i[a]=e[a].src;return i}return e.src}resolve(t){const e=Td(t);t=ma(t);const i={};return t.forEach(a=>{if(!this._resolverHash[a])if(this._assetMap[a]){let o=this._assetMap[a];const h=this._getPreferredOrder(o);h==null||h.priority.forEach(f=>{h.params[f].forEach(m=>{const g=o.filter(b=>b[f]?b[f]===m:!1);g.length&&(o=g)})}),this._resolverHash[a]=o[0]}else this._resolverHash[a]=this._buildResolvedAsset({alias:[a],src:a},{});i[a]=this._resolverHash[a]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[e],a=this._preferredOrder.find(o=>o.params.format.includes(i.format));if(a)return a}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){const{aliases:i,data:a,loadParser:o,format:h}=e;return(this._basePath||this._rootPath)&&(t.src=Tr.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...a||{},...t.data},t.loadParser=o??t.loadParser,t.format=h??t.format??ZS(t.src),t}}Xo.RETINA_PREFIX=/@([0-9\.]+)x/;function ZS(n){return n.split(".").pop().split("?").shift().split("#").shift()}const og=(n,t)=>{const e=t.split("?")[1];return e&&(n+=`?${e}`),n},JS=class sd{constructor(t,e){this.linkedSheets=[];let i=t;(t==null?void 0:t.source)instanceof Sn&&(i={texture:t,data:e});const{texture:a,data:o,cachePrefix:h=""}=i;this.cachePrefix=h,this._texture=a instanceof At?a:null,this.textureSource=a.source,this.textures={},this.animations={},this.data=o;const f=parseFloat(o.meta.scale);f?(this.resolution=f,a.source.resolution=this.resolution):this.resolution=a.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=sd.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const i=sd.BATCH_SIZE;for(;e-t<i&&e<this._frameKeys.length;){const a=this._frameKeys[e],o=this._frames[a],h=o.frame;if(h){let f=null,m=null;const g=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,b=new Ue(0,0,Math.floor(g.w)/this.resolution,Math.floor(g.h)/this.resolution);o.rotated?f=new Ue(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.h)/this.resolution,Math.floor(h.w)/this.resolution):f=new Ue(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(m=new Ue(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution)),this.textures[a]=new At({source:this.textureSource,frame:f,orig:b,trim:m,rotate:o.rotated?2:0,defaultAnchor:o.anchor,defaultBorders:o.borders,label:a.toString()})}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const a=t[e][i];this.animations[e].push(this.textures[a])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*sd.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*sd.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};JS.BATCH_SIZE=1e3;let K_=JS;const SD=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function $S(n,t,e){const i={};if(n.forEach(a=>{i[a]=t}),Object.keys(t.textures).forEach(a=>{i[`${t.cachePrefix}${a}`]=t.textures[a]}),!e){const a=Tr.dirname(n[0]);t.linkedSheets.forEach((o,h)=>{const f=$S([`${a}/${t.data.meta.related_multi_packs[h]}`],o,!0);Object.assign(i,f)})}return i}const t3={extension:I.Asset,cache:{test:n=>n instanceof K_,getCacheableAssets:(n,t)=>$S(n,t,!1)},resolver:{extension:{type:I.ResolveParser,name:"resolveSpritesheet"},test:n=>{const e=n.split("?")[0].split("."),i=e.pop(),a=e.pop();return i==="json"&&SD.includes(a)},parse:n=>{var e;const t=n.split(".");return{resolution:parseFloat(((e=Xo.RETINA_PREFIX.exec(n))==null?void 0:e[1])??"1"),format:t[t.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:I.LoadParser,priority:Yr.Normal,name:"spritesheetLoader"},async testParse(n,t){return Tr.extname(t.src).toLowerCase()===".json"&&!!n.frames},async parse(n,t,e){var x,E;const{texture:i,imageFilename:a,textureOptions:o,cachePrefix:h}=(t==null?void 0:t.data)??{};let f=Tr.dirname(t.src);f&&f.lastIndexOf("/")!==f.length-1&&(f+="/");let m;if(i instanceof At)m=i;else{const T=og(f+(a??n.meta.image),t.src);m=(await e.load([{src:T,data:o}]))[T]}const g=new K_({texture:m.source,data:n,cachePrefix:h});await g.parse();const b=(x=n==null?void 0:n.meta)==null?void 0:x.related_multi_packs;if(Array.isArray(b)){const T=[];for(const D of b){if(typeof D!="string")continue;let C=f+D;(E=t.data)!=null&&E.ignoreMultiPack||(C=og(C,t.src),T.push(e.load({src:C,data:{textureOptions:o,ignoreMultiPack:!0}})))}const R=await Promise.all(T);g.linkedSheets=R,R.forEach(D=>{D.linkedSheets=[g].concat(g.linkedSheets.filter(C=>C!==D))})}return g},async unload(n,t,e){await e.unload(n.textureSource._sourceOrigin),n.destroy(!1)}}};Oe.add(t3);class xh{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=xh.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Xe,this.page=new Xe,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,i,a,o){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}var a_=/iPhone/i,Tx=/iPod/i,Ax=/iPad/i,Cx=/\biOS-universal(?:.+)Mac\b/i,s_=/\bAndroid(?:.+)Mobile\b/i,Bx=/Android/i,Jc=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Um=/Silk/i,wl=/Windows Phone/i,Rx=/\bWindows(?:.+)ARM\b/i,Mx=/BlackBerry/i,Dx=/BB10/i,wx=/Opera Mini/i,Ux=/\b(CriOS|Chrome)(?:.+)Mobile/i,Ox=/Mobile(?:.+)Firefox\b/i,Gx=function(n){return typeof n<"u"&&n.platform==="MacIntel"&&typeof n.maxTouchPoints=="number"&&n.maxTouchPoints>1&&typeof MSStream>"u"};function ED(n){return function(t){return t.test(n)}}function Px(n){var t={userAgent:"",platform:"",maxTouchPoints:0};!n&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof n=="string"?t.userAgent=n:n&&n.userAgent&&(t={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0});var e=t.userAgent,i=e.split("[FBAN");typeof i[1]<"u"&&(e=i[0]),i=e.split("Twitter"),typeof i[1]<"u"&&(e=i[0]);var a=ED(e),o={apple:{phone:a(a_)&&!a(wl),ipod:a(Tx),tablet:!a(a_)&&(a(Ax)||Gx(t))&&!a(wl),universal:a(Cx),device:(a(a_)||a(Tx)||a(Ax)||a(Cx)||Gx(t))&&!a(wl)},amazon:{phone:a(Jc),tablet:!a(Jc)&&a(Um),device:a(Jc)||a(Um)},android:{phone:!a(wl)&&a(Jc)||!a(wl)&&a(s_),tablet:!a(wl)&&!a(Jc)&&!a(s_)&&(a(Um)||a(Bx)),device:!a(wl)&&(a(Jc)||a(Um)||a(s_)||a(Bx))||a(/\bokhttp\b/i)},windows:{phone:a(wl),tablet:a(Rx),device:a(wl)||a(Rx)},other:{blackberry:a(Mx),blackberry10:a(Dx),opera:a(wx),firefox:a(Ox),chrome:a(Ux),device:a(Mx)||a(Dx)||a(wx)||a(Ox)||a(Ux)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}const TD=Px.default??Px,e3=TD(globalThis.navigator),AD=9,Om=100,CD=0,BD=0,Nx=2,zx=1,RD=-1e3,MD=-1e3,DD=2,ob=class n3{constructor(t,e=e3){this._mobileInfo=e,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(e.tablet||e.phone)&&this._createTouchHook(),this._renderer=t}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}_createTouchHook(){const t=document.createElement("button");t.style.width=`${zx}px`,t.style.height=`${zx}px`,t.style.position="absolute",t.style.top=`${RD}px`,t.style.left=`${MD}px`,t.style.zIndex=DD.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.width=`${Om}px`,this._div.style.height=`${Om}px`,this._div.style.position="absolute",this._div.style.top=`${CD}px`,this._div.style.left=`${BD}px`,this._div.style.zIndex=Nx.toString(),this._div.style.pointerEvents="none"),this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._deactivateOnMouseMove&&(this._onMouseMove=this._onMouseMove.bind(this),globalThis.document.addEventListener("mousemove",this._onMouseMove,!0));const t=this._renderer.view.canvas;if(t.parentNode)t.parentNode.appendChild(this._div),this._initAccessibilitySetup();else{const e=new MutationObserver(()=>{t.parentNode&&(t.parentNode.appendChild(this._div),e.disconnect(),this._initAccessibilitySetup())});e.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(!(!this._isActive||this._isMobileAccessibility)){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this);for(const t of this._children)t._accessibleDiv&&t._accessibleDiv.parentNode&&(t._accessibleDiv.parentNode.removeChild(t._accessibleDiv),t._accessibleDiv=null),t._accessibleActive=!1;this._pool.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div),this._pool=[],this._children=[]}}_updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&(t._accessibleActive||this._addChild(t),t._renderId=this._renderId);const e=t.children;if(e)for(let i=0;i<e.length;i++)this._updateAccessibleObjects(e[i])}init(t){const i={accessibilityOptions:{...n3.defaultOptions,...(t==null?void 0:t.accessibilityOptions)||{}}};this.debug=i.accessibilityOptions.debug,this._activateOnTab=i.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=i.accessibilityOptions.deactivateOnMouseMove,i.accessibilityOptions.enabledByDefault?this._activate():this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._renderer.runners.postrender.remove(this)}postrender(){const t=performance.now();if(this._mobileInfo.android.device&&t<this._androidUpdateCount||(this._androidUpdateCount=t+this._androidUpdateFrequency,!this._renderer.renderingToScreen||!this._renderer.view.canvas))return;const e=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(const i of this._children)i._renderId===this._renderId&&e.add(this._children.indexOf(i))}for(let i=this._children.length-1;i>=0;i--){const a=this._children[i];e.has(i)||(a._accessibleDiv&&a._accessibleDiv.parentNode&&(a._accessibleDiv.parentNode.removeChild(a._accessibleDiv),this._pool.push(a._accessibleDiv),a._accessibleDiv=null),a._accessibleActive=!1,$y(this._children,i,1))}if(this._renderer.renderingToScreen){const{x:i,y:a,width:o,height:h}=this._renderer.screen,f=this._div;f.style.left=`${i}px`,f.style.top=`${a}px`,f.style.width=`${o}px`,f.style.height=`${h}px`}for(let i=0;i<this._children.length;i++){const a=this._children[i];if(!a._accessibleActive||!a._accessibleDiv)continue;const o=a._accessibleDiv,h=a.hitArea||a.getBounds().rectangle;if(a.hitArea){const f=a.worldTransform,m=this._renderer.resolution,g=this._renderer.resolution;o.style.left=`${(f.tx+h.x*f.a)*m}px`,o.style.top=`${(f.ty+h.y*f.d)*g}px`,o.style.width=`${h.width*f.a*m}px`,o.style.height=`${h.height*f.d*g}px`}else{this._capHitArea(h);const f=this._renderer.resolution,m=this._renderer.resolution;o.style.left=`${h.x*f}px`,o.style.top=`${h.y*m}px`,o.style.width=`${h.width*f}px`,o.style.height=`${h.height*m}px`}}this._renderId++}_updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}_capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:i}=this._renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>i&&(t.height=i-t.y)}_addChild(t){let e=this._pool.pop();e||(t.accessibleType==="button"?e=document.createElement("button"):(e=document.createElement(t.accessibleType),e.style.cssText=`
                        color: transparent;
                        pointer-events: none;
                        padding: 0;
                        margin: 0;
                        border: 0;
                        outline: 0;
                        background: transparent;
                        box-sizing: border-box;
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                        -ms-user-select: none;
                    `,t.accessibleText&&(e.innerText=t.accessibleText)),e.style.width=`${Om}px`,e.style.height=`${Om}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=Nx.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`container ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this._updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.container=t,this._children.push(t),this._div.appendChild(t._accessibleDiv),t.interactive&&(t._accessibleDiv.tabIndex=t.tabIndex)}_dispatchEvent(t,e){const{container:i}=t.target,a=this._renderer.events.rootBoundary,o=Object.assign(new xh(a),{target:i});a.rootTarget=this._renderer.lastObjectRendered,e.forEach(h=>a.dispatchEvent(o,h))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode!==AD||!this._activateOnTab||this._activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._div=null,this._pool=null,this._children=null,this._renderer=null,this._activateOnTab&&globalThis.removeEventListener("keydown",this._onKeyDown)}setAccessibilityEnabled(t){t?this._activate():this._deactivate()}};ob.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"accessibility"};ob.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};let wD=ob;const UD={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_accessibleActive:!1,_accessibleDiv:null,_renderId:-1},l_=Object.create(null),Hx=Object.create(null);function gh(n,t){let e=Hx[n];return e===void 0&&(l_[t]===void 0&&(l_[t]=1),Hx[n]=e=l_[t]++),e}let $c;function ub(){return(!$c||$c!=null&&$c.isContextLost())&&($c=me.get().createCanvas().getContext("webgl",{})),$c}let Gm;function i3(){if(!Gm){Gm="mediump";const n=ub();n&&n.getShaderPrecisionFormat&&(Gm=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?"highp":"mediump")}return Gm}function r3(n,t,e){return t?n:e?(n=n.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${n}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${n}
        `}function a3(n,t,e){const i=e?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(n.substring(0,9)!=="precision"){let a=e?t.requestedFragmentPrecision:t.requestedVertexPrecision;return a==="highp"&&i!=="highp"&&(a="mediump"),`precision ${a} float;
${n}`}else if(i!=="highp"&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}function s3(n,t){return t?`#version 300 es
${n}`:n}const OD={},GD={};function l3(n,{name:t="pixi-program"},e=!0){t=t.replace(/\s+/g,"-"),t+=e?"-fragment":"-vertex";const i=e?OD:GD;return i[t]?(i[t]++,t+=`-${i[t]}`):i[t]=1,n.indexOf("#define SHADER_NAME")!==-1?n:`${`#define SHADER_NAME ${t}`}
${n}`}function o3(n,t){return t?n.replace("#version 300 es",""):n}const o_={stripVersion:o3,ensurePrecision:a3,addProgramDefines:r3,setProgramName:l3,insertVersion:s3},u_=Object.create(null),u3=class W_{constructor(t){t={...W_.defaultOptions,...t};const e=t.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:e,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:i3()},setProgramName:{name:t.name},addProgramDefines:e,insertVersion:e};let a=t.fragment,o=t.vertex;Object.keys(o_).forEach(h=>{const f=i[h];a=o_[h](a,f,!0),o=o_[h](o,f,!1)}),this.fragment=a,this.vertex=o,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=gh(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(t){const e=`${t.vertex}:${t.fragment}`;return u_[e]||(u_[e]=new W_(t)),u_[e]}};u3.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let qr=u3;const Lx={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function Hl(n){return Lx[n]??Lx.float32}const PD={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function c3({source:n,entryPoint:t}){const e={},i=n.indexOf(`fn ${t}`);if(i!==-1){const a=n.indexOf("->",i);if(a!==-1){const o=n.substring(i,a),h=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let f;for(;(f=h.exec(o))!==null;){const m=PD[f[3]]??"float32";e[f[2]]={location:parseInt(f[1],10),format:m,stride:Hl(m).stride,offset:0,instance:!1,start:0}}}}return e}function tg(n){var x,E;const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,e=/@group\((\d+)\)/,i=/@binding\((\d+)\)/,a=/var(<[^>]+>)? (\w+)/,o=/:\s*(\w+)/,h=/struct\s+(\w+)\s*{([^}]+)}/g,f=/(\w+)\s*:\s*([\w\<\>]+)/g,m=/struct\s+(\w+)/,g=(x=n.match(t))==null?void 0:x.map(T=>({group:parseInt(T.match(e)[1],10),binding:parseInt(T.match(i)[1],10),name:T.match(a)[2],isUniform:T.match(a)[1]==="<uniform>",type:T.match(o)[1]}));if(!g)return{groups:[],structs:[]};const b=((E=n.match(h))==null?void 0:E.map(T=>{const R=T.match(m)[1],D=T.match(f).reduce((C,G)=>{const[P,H]=G.split(":");return C[P.trim()]=H.trim(),C},{});return D?{name:R,members:D}:null}).filter(({name:T})=>g.some(R=>R.type===T)))??[];return{groups:g,structs:b}}var rh=(n=>(n[n.VERTEX=1]="VERTEX",n[n.FRAGMENT=2]="FRAGMENT",n[n.COMPUTE=4]="COMPUTE",n))(rh||{});function h3({groups:n}){const t=[];for(let e=0;e<n.length;e++){const i=n[e];t[i.group]||(t[i.group]=[]),i.isUniform?t[i.group].push({binding:i.binding,visibility:rh.VERTEX|rh.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?t[i.group].push({binding:i.binding,visibility:rh.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"&&t[i.group].push({binding:i.binding,visibility:rh.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function f3({groups:n}){const t=[];for(let e=0;e<n.length;e++){const i=n[e];t[i.group]||(t[i.group]={}),t[i.group][i.name]=i.binding}return t}function d3(n,t){const e=new Set,i=new Set,a=[...n.structs,...t.structs].filter(h=>e.has(h.name)?!1:(e.add(h.name),!0)),o=[...n.groups,...t.groups].filter(h=>{const f=`${h.name}-${h.binding}`;return i.has(f)?!1:(i.add(f),!0)});return{structs:a,groups:o}}const c_=Object.create(null);class Mr{constructor(t){var f,m;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:e,vertex:i,layout:a,gpuLayout:o,name:h}=t;if(this.name=h,this.fragment=e,this.vertex=i,e.source===i.source){const g=tg(e.source);this.structsAndGroups=g}else{const g=tg(i.source),b=tg(e.source);this.structsAndGroups=d3(g,b)}this.layout=a??f3(this.structsAndGroups),this.gpuLayout=o??h3(this.structsAndGroups),this.autoAssignGlobalUniforms=((f=this.layout[0])==null?void 0:f.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((m=this.layout[1])==null?void 0:m.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:e}=this,i=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=gh(i,"program")}get attributeData(){return this._attributeData??(this._attributeData=c3(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return c_[e]||(c_[e]=new Mr(t)),c_[e]}}const cb=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],p3=cb.reduce((n,t)=>(n[t]=!0,n),{});function m3(n,t){switch(n){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const g3=class _3{constructor(t,e){this._touched=0,this.uid=rn("uniform"),this._resourceType="uniformGroup",this._resourceId=rn("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,e={..._3.defaultOptions,...e},this.uniformStructures=t;const i={};for(const a in t){const o=t[a];if(o.name=a,o.size=o.size??1,!p3[o.type])throw new Error(`Uniform type ${o.type} is not supported. Supported uniform types are: ${cb.join(", ")}`);o.value??(o.value=m3(o.type,o.size)),i[a]=o.value}this.uniforms=i,this._dirtyId=1,this.ubo=e.ubo,this.isStatic=e.isStatic,this._signature=gh(Object.keys(i).map(a=>`${a}-${t[a].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};g3.defaultOptions={ubo:!1,isStatic:!1};let kn=g3;class Ks{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const i in t){const a=t[i];this.setResource(a,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const i in this.resources)t[e++]=this.resources[i]._resourceId;this._key=t.join("|")}setResource(t,e){var a,o;const i=this.resources[e];t!==i&&(i&&((a=t.off)==null||a.call(t,"change",this.onResourceChange,this)),(o=t.on)==null||o.call(t,"change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const i in e)e[i]._touched=t}destroy(){var e;const t=this.resources;for(const i in t){const a=t[i];(e=a.off)==null||e.call(a,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const i in e)e[i]===t&&(e[i]=null)}else this._updateKey()}}var Cr=(n=>(n[n.WEBGL=1]="WEBGL",n[n.WEBGPU=2]="WEBGPU",n[n.BOTH=3]="BOTH",n))(Cr||{});class jr extends Rr{constructor(t){super(),this.uid=rn("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:e,glProgram:i,groups:a,resources:o,compatibleRenderers:h,groupMap:f}=t;this.gpuProgram=e,this.glProgram=i,h===void 0&&(h=0,e&&(h|=Cr.WEBGPU),i&&(h|=Cr.WEBGL)),this.compatibleRenderers=h;const m={};if(!o&&!a&&(o={}),o&&a)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&a&&!f)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&a&&f)for(const g in f)for(const b in f[g]){const x=f[g][b];m[x]={group:g,binding:b,name:x}}else if(e&&a&&!f){const g=e.structsAndGroups.groups;f={},g.forEach(b=>{f[b.group]=f[b.group]||{},f[b.group][b.binding]=b.name,m[b.name]=b})}else if(o){a={},f={},e&&e.structsAndGroups.groups.forEach(x=>{f[x.group]=f[x.group]||{},f[x.group][x.binding]=x.name,m[x.name]=x});let g=0;for(const b in o)m[b]||(a[99]||(a[99]=new Ks,this._ownedBindGroups.push(a[99])),m[b]={group:99,binding:g,name:b},f[99]=f[99]||{},f[99][g]=b,g++);for(const b in o){const x=b;let E=o[b];!E.source&&!E._resourceType&&(E=new kn(E));const T=m[x];T&&(a[T.group]||(a[T.group]=new Ks,this._ownedBindGroups.push(a[T.group])),a[T.group].setResource(E,T.binding))}}this.groups=a,this._uniformBindMap=f,this.resources=this._buildResourceAccessor(a,m)}addResource(t,e,i){var a,o;(a=this._uniformBindMap)[e]||(a[e]={}),(o=this._uniformBindMap[e])[i]||(o[i]=t),this.groups[e]||(this.groups[e]=new Ks,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){const i={};for(const a in e){const o=e[a];Object.defineProperty(i,o.name,{get(){return t[o.group].getResource(o.binding)},set(h){t[o.group].setResource(h,o.binding)}})}return i}destroy(t=!1){var e,i;this.emit("destroy",this),t&&((e=this.gpuProgram)==null||e.destroy(),(i=this.glProgram)==null||i.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(a=>{a.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:e,gl:i,...a}=t;let o,h;return e&&(o=Mr.from(e)),i&&(h=qr.from(i)),new jr({gpuProgram:o,glProgram:h,...a})}}const ND={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},h_=0,f_=1,d_=2,p_=3,m_=4,g_=5,Q_=class y3{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<h_)}set blend(t){!!(this.data&1<<h_)!==t&&(this.data^=1<<h_)}get offsets(){return!!(this.data&1<<f_)}set offsets(t){!!(this.data&1<<f_)!==t&&(this.data^=1<<f_)}set cullMode(t){if(t==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=t==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<d_)}set culling(t){!!(this.data&1<<d_)!==t&&(this.data^=1<<d_)}get depthTest(){return!!(this.data&1<<p_)}set depthTest(t){!!(this.data&1<<p_)!==t&&(this.data^=1<<p_)}get depthMask(){return!!(this.data&1<<g_)}set depthMask(t){!!(this.data&1<<g_)!==t&&(this.data^=1<<g_)}get clockwiseFrontFace(){return!!(this.data&1<<m_)}set clockwiseFrontFace(t){!!(this.data&1<<m_)!==t&&(this.data^=1<<m_)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!=="none",this._blendMode=t,this._blendModeId=ND[t]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new y3;return t.depthTest=!1,t.blend=!0,t}};Q_.default2d=Q_.for2d();let Ir=Q_;const b3=class Z_ extends jr{constructor(t){t={...Z_.defaultOptions,...t},super(t),this.enabled=!0,this._state=Ir.for2d(),this.blendMode=t.blendMode,this.padding=t.padding,typeof t.antialias=="boolean"?this.antialias=t.antialias?"on":"off":this.antialias=t.antialias,this.resolution=t.resolution,this.blendRequired=t.blendRequired,this.clipToViewport=t.clipToViewport,this.addResource("uTexture",0,1)}apply(t,e,i,a){t.applyFilter(this,e,i,a)}get blendMode(){return this._state.blendMode}set blendMode(t){this._state.blendMode=t}static from(t){const{gpu:e,gl:i,...a}=t;let o,h;return e&&(o=Mr.from(e)),i&&(h=qr.from(i)),new Z_({gpuProgram:o,glProgram:h,...a})}};b3.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let Ii=b3;var v3=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uBlend;

uniform sampler2D uTexture;
uniform sampler2D uBackTexture;

{FUNCTIONS}

void main()
{ 
    vec4 back = texture(uBackTexture, vTextureCoord);
    vec4 front = texture(uTexture, vTextureCoord);
    float blendedAlpha = front.a + back.a * (1.0 - front.a);
    
    {MAIN}
}
`,x3=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 backgroundUv;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,S3=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlendUniforms {
  uBlend:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(0) @binding(3) var uBackTexture: texture_2d<f32>;

@group(1) @binding(0) var<uniform> blendUniforms : BlendUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

{FUNCTIONS}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>
) -> @location(0) vec4<f32> {


   var back =  textureSample(uBackTexture, uSampler, uv);
   var front = textureSample(uTexture, uSampler, uv);
   var blendedAlpha = front.a + back.a * (1.0 - front.a);
   
   var out = vec4<f32>(0.0,0.0,0.0,0.0);

   {MAIN}

   return out;
}`;class Gn extends Ii{constructor(t){const e=t.gpu,i=Fx({source:S3,...e}),a=Mr.from({vertex:{source:i,entryPoint:"mainVertex"},fragment:{source:i,entryPoint:"mainFragment"}}),o=t.gl,h=Fx({source:v3,...o}),f=qr.from({vertex:x3,fragment:h}),m=new kn({uBlend:{value:1,type:"f32"}});super({gpuProgram:a,glProgram:f,blendRequired:!0,resources:{blendUniforms:m,uBackTexture:At.EMPTY}})}}function Fx(n){const{source:t,functions:e,main:i}=n;return t.replace("{FUNCTIONS}",e).replace("{MAIN}",i)}const Og=`
	float getLuminosity(vec3 c) {
		return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
	}

	vec3 setLuminosity(vec3 c, float lum) {
		float modLum = lum - getLuminosity(c);
		vec3 color = c.rgb + vec3(modLum);

		// clip back into legal range
		modLum = getLuminosity(color);
		vec3 modLumVec = vec3(modLum);

		float cMin = min(color.r, min(color.g, color.b));
		float cMax = max(color.r, max(color.g, color.b));

		if(cMin < 0.0) {
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0) {
			color = mix(modLumVec, color, (1.0 - modLum) / (cMax - modLum));
		}

		return color;
	}

	float getSaturation(vec3 c) {
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	vec3 setSaturationMinMidMax(vec3 cSorted, float s) {
		vec3 colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x) {
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else {
			colorSorted.y = 0.0;
			colorSorted.z = 0.0;
		}

		colorSorted.x = 0.0;

		return colorSorted;
	}

	vec3 setSaturation(vec3 c, float s) {
		vec3 color = c;

		if(color.r <= color.g && color.r <= color.b) {
			if(color.g <= color.b) {
				color = setSaturationMinMidMax(color.rgb, s).rgb;
			}
			else {
				color = setSaturationMinMidMax(color.rbg, s).rbg;
			}
		}
		else if(color.g <= color.r && color.g <= color.b) {
			if(color.r <= color.b) {
				color = setSaturationMinMidMax(color.grb, s).grb;
			}
			else {
				color = setSaturationMinMidMax(color.gbr, s).gbr;
			}
		}
		else {
			// Using bgr for both fixes part of hue
			if(color.r <= color.g) {
				color = setSaturationMinMidMax(color.brg, s).brg;
			}
			else {
				color = setSaturationMinMidMax(color.bgr, s).bgr;
			}
		}

		return color;
	}
    `,Gg=`
	fn getLuminosity(c: vec3<f32>) -> f32
	{
		return 0.3*c.r + 0.59*c.g + 0.11*c.b;
	}

	fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32>
	{
		var modLum: f32 = lum - getLuminosity(c);
		var color: vec3<f32> = c.rgb + modLum;

		// clip back into legal range
		modLum = getLuminosity(color);
		let modLumVec = vec3<f32>(modLum);

		let cMin: f32 = min(color.r, min(color.g, color.b));
		let cMax: f32 = max(color.r, max(color.g, color.b));

		if(cMin < 0.0)
		{
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0)
		{
			color = mix(modLumVec, color, (1 - modLum) / (cMax - modLum));
		}

		return color;
	}

	fn getSaturation(c: vec3<f32>) -> f32
	{
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32>
	{
		var colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x)
		{
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else
		{
			colorSorted.y = 0;
			colorSorted.z = 0;
		}

		colorSorted.x = 0;

		return colorSorted;
	}

	fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32>
	{
		var color = c;

		if (color.r <= color.g && color.r <= color.b)
		{
			if (color.g <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rgb, s)).rgb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rbg, s)).rbg;
			}
		}
		else if (color.g <= color.r && color.g <= color.b)
		{
			if (color.r <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.grb, s)).grb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.gbr, s)).gbr;
			}
		}
		else
		{
			// Using bgr for both fixes part of hue
			if (color.r <= color.g)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.brg, s)).brg;
			}
			else
			{
				color  = vec3<f32>(setSaturationMinMidMax(color.bgr, s)).bgr;
			}
		}

		return color;
	}
	`;class E3 extends Gn{constructor(){super({gl:{functions:`
                ${Og}

                vec3 blendColor(vec3 base, vec3 blend,  float opacity)
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColor(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${Gg}

                fn blendColorOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendColorOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}E3.extension={name:"color",type:I.BlendMode};class T3 extends Gn{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0 - ((1.0 - base) / blend)), 0.0);
                }

                vec3 blendColorBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendColorBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn blendColorBurn(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendColorBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}T3.extension={name:"color-burn",type:I.BlendMode};class A3 extends Gn{constructor(){super({gl:{functions:`
                float colorDodge(float base, float blend)
                {
                    return base / (1.0 - blend);
                }

                vec3 blendColorDodge(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColorDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return base / (1.0 - blend);
                }

                fn blendColorDodge(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                    out = vec4<f32>(blendColorDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}A3.extension={name:"color-dodge",type:I.BlendMode};class C3 extends Gn{constructor(){super({gl:{functions:`
                vec3 blendDarken(vec3 base, vec3 blend, float opacity)
                {
                    return (min(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDarken(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendDarken(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (min(blend,base) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendDarken(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}C3.extension={name:"darken",type:I.BlendMode};class B3 extends Gn{constructor(){super({gl:{functions:`
                vec3 blendDifference(vec3 base, vec3 blend,  float opacity)
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendDifference(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn blendDifference(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDifference(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}B3.extension={name:"difference",type:I.BlendMode};class R3 extends Gn{constructor(){super({gl:{functions:`
                float divide(float base, float blend)
                {
                    return (blend > 0.0) ? clamp(base / blend, 0.0, 1.0) : 1.0;
                }

                vec3 blendDivide(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDivide(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn divide(base: f32, blend: f32) -> f32
                {
                    return select(1.0, clamp(base / blend, 0.0, 1.0), blend > 0.0);
                }

                fn blendDivide(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDivide(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}R3.extension={name:"divide",type:I.BlendMode};class M3 extends Gn{constructor(){super({gl:{functions:`
                vec3 exclusion(vec3 base, vec3 blend)
                {
                    return base + blend - 2.0 * base * blend;
                }

                vec3 blendExclusion(vec3 base, vec3 blend, float opacity)
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendExclusion(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn exclusion(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return base+blend-2.0*base*blend;
                }

                fn blendExclusion(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendExclusion(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}M3.extension={name:"exclusion",type:I.BlendMode};class D3 extends Gn{constructor(){super({gl:{functions:`
                float hardLight(float base, float blend)
                {
                    return (blend < 0.5) ? 2.0 * base * blend : 1.0 - 2.0 * (1.0 - base) * (1.0 - blend);
                }

                vec3 blendHardLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardLight(base: f32, blend: f32) -> f32
                {
                    return select(1.0 - 2.0 * (1.0 - base) * (1.0 - blend), 2.0 * base * blend, blend < 0.5);
                }

                fn blendHardLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendHardLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}D3.extension={name:"hard-light",type:I.BlendMode};class w3 extends Gn{constructor(){super({gl:{functions:`
                float hardMix(float base, float blend)
                {
                    return (base + blend >= 1.0) ? 1.0 : 0.0;
                }

                vec3 blendHardMix(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blended = vec3(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardMix(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardMix(base: f32, blend: f32) -> f32
                {
                    return select(0.0, 1.0, base + blend >= 1.0);
                }

                fn blendHardMix(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendHardMix(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}w3.extension={name:"hard-mix",type:I.BlendMode};class U3 extends Gn{constructor(){super({gl:{functions:`
                vec3 blendLighten(vec3 base, vec3 blend, float opacity)
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLighten(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendLighten(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLighten(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}U3.extension={name:"lighten",type:I.BlendMode};class O3 extends Gn{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend)
                {
                    return max(0.0, base + blend - 1.0);
                }

                vec3 blendLinearBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn blendLinearBurn(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendLinearBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}O3.extension={name:"linear-burn",type:I.BlendMode};class G3 extends Gn{constructor(){super({gl:{functions:`
                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                vec3 blendLinearDodge(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1, base + blend);
                }

                fn blendLinearDodge(base:vec3<f32>, blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}G3.extension={name:"linear-dodge",type:I.BlendMode};class P3 extends Gn{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend) {
                    return max(0.0, base + blend - 1.0);
                }

                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                float linearLight(float base, float blend) {
                    return (blend <= 0.5) ? linearBurn(base,2.0*blend) : linearBurn(base,2.0*(blend-0.5));
                }

                vec3 blendLinearLight(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendLinearLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base + blend);
                }

                fn linearLight(base: f32, blend: f32) -> f32
                {
                    return select(linearBurn(base,2.0*(blend-0.5)), linearBurn(base,2.0*blend), blend <= 0.5);
                }

                fn blendLinearLightOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearLightOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}P3.extension={name:"linear-light",type:I.BlendMode};class N3 extends Gn{constructor(){super({gl:{functions:`
                ${Og}

                vec3 blendLuminosity(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendLuminosity = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLuminosity(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${Gg}

                fn blendLuminosity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendLuminosity: vec3<f32> = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLuminosity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}N3.extension={name:"luminosity",type:I.BlendMode};class z3 extends Gn{constructor(){super({gl:{functions:`
                vec3 negation(vec3 base, vec3 blend)
                {
                    return 1.0-abs(1.0-base-blend);
                }

                vec3 blendNegation(vec3 base, vec3 blend, float opacity)
                {
                    return (negation(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendNegation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendNegation(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return 1.0-abs(1.0-base-blend);
                }

                fn blendNegationOpacity(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (blendNegation(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendNegationOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}z3.extension={name:"negation",type:I.BlendMode};class H3 extends Gn{constructor(){super({gl:{functions:`
                float overlay(float base, float blend)
                {
                    return (base < 0.5) ? (2.0*base*blend) : (1.0-2.0*(1.0-base)*(1.0-blend));
                }

                vec3 blendOverlay(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendOverlay(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn overlay(base: f32, blend: f32) -> f32
                {
                    return select((1.0-2.0*(1.0-base)*(1.0-blend)), (2.0*base*blend), base < 0.5);
                }

                fn blendOverlay(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendOverlay(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}H3.extension={name:"overlay",type:I.BlendMode};class L3 extends Gn{constructor(){super({gl:{functions:`
                float pinLight(float base, float blend)
                {
                    return (blend <= 0.5) ? min(base, 2.0 * blend) : max(base, 2.0 * (blend - 0.5));
                }

                vec3 blendPinLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn pinLight(base: f32, blend: f32) -> f32
                {
                    return select(max(base,2.0*(blend-0.5)), min(base,2.0*blend), blend <= 0.5);
                }

                fn blendPinLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}L3.extension={name:"pin-light",type:I.BlendMode};class F3 extends Gn{constructor(){super({gl:{functions:`
                ${Og}

                vec3 blendSaturation(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                ${Gg}

                fn blendSaturation(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}F3.extension={name:"saturation",type:I.BlendMode};class V3 extends Gn{constructor(){super({gl:{functions:`
                float softLight(float base, float blend)
                {
                    return (blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend));
                }

                vec3 blendSoftLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn softLight(base: f32, blend: f32) -> f32
                {
                    return select(2.0 * base * blend + base * base * (1.0 - 2.0 * blend), sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend), blend < 0.5);
                }

                fn blendSoftLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}V3.extension={name:"soft-light",type:I.BlendMode};class k3 extends Gn{constructor(){super({gl:{functions:`
                float subtract(float base, float blend)
                {
                    return max(0.0, base - blend);
                }

                vec3 blendSubtract(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn subtract(base: f32, blend: f32) -> f32
                {
                    return max(0, base - blend);
                }

                fn blendSubtract(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}k3.extension={name:"subtract",type:I.BlendMode};class X3 extends Gn{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                float colorDodge(float base, float blend)
                {
                    return min(1.0, base / (1.0-blend));
                }

                float vividLight(float base, float blend)
                {
                    return (blend < 0.5) ? colorBurn(base,(2.0*blend)) : colorDodge(base,(2.0*(blend-0.5)));
                }

                vec3 blendVividLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendVividLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base / (1.0-blend));
                }

                fn vividLight(base: f32, blend: f32) -> f32
                {
                    return select(colorDodge(base,(2.0*(blend-0.5))), colorBurn(base,(2.0*blend)), blend<0.5);
                }

                fn blendVividLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendVividLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}X3.extension={name:"vivid-light",type:I.BlendMode};const J_=[];Oe.handleByNamedList(I.Environment,J_);async function hb(n){if(!n)for(let t=0;t<J_.length;t++){const e=J_[t];if(e.value.test()){await e.value.load();return}}}async function zD(n){return hb(!n)}let Wf;function fb(){if(typeof Wf=="boolean")return Wf;try{Wf=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Wf=!1}return Wf}function Vx(n,t,e=2){const i=t&&t.length,a=i?t[0]*e:n.length;let o=I3(n,0,a,e,!0);const h=[];if(!o||o.next===o.prev)return h;let f,m,g;if(i&&(o=kD(n,t,o,e)),n.length>80*e){f=1/0,m=1/0;let b=-1/0,x=-1/0;for(let E=e;E<a;E+=e){const T=n[E],R=n[E+1];T<f&&(f=T),R<m&&(m=R),T>b&&(b=T),R>x&&(x=R)}g=Math.max(b-f,x-m),g=g!==0?32767/g:0}return Ad(o,h,e,f,m,g,0),h}function I3(n,t,e,i,a){let o;if(a===$D(n,t,e,i)>0)for(let h=t;h<e;h+=i)o=kx(h/i|0,n[h],n[h+1],o);else for(let h=e-i;h>=t;h-=i)o=kx(h/i|0,n[h],n[h+1],o);return o&&_h(o,o.next)&&(Bd(o),o=o.next),o}function Ku(n,t){if(!n)return n;t||(t=n);let e=n,i;do if(i=!1,!e.steiner&&(_h(e,e.next)||xn(e.prev,e,e.next)===0)){if(Bd(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function Ad(n,t,e,i,a,o,h){if(!n)return;!h&&o&&jD(n,i,a,o);let f=n;for(;n.prev!==n.next;){const m=n.prev,g=n.next;if(o?LD(n,i,a,o):HD(n)){t.push(m.i,n.i,g.i),Bd(n),n=g.next,f=g.next;continue}if(n=g,n===f){h?h===1?(n=FD(Ku(n),t),Ad(n,t,e,i,a,o,2)):h===2&&VD(n,t,e,i,a,o):Ad(Ku(n),t,e,i,a,o,1);break}}}function HD(n){const t=n.prev,e=n,i=n.next;if(xn(t,e,i)>=0)return!1;const a=t.x,o=e.x,h=i.x,f=t.y,m=e.y,g=i.y,b=Math.min(a,o,h),x=Math.min(f,m,g),E=Math.max(a,o,h),T=Math.max(f,m,g);let R=i.next;for(;R!==t;){if(R.x>=b&&R.x<=E&&R.y>=x&&R.y<=T&&ld(a,f,o,m,h,g,R.x,R.y)&&xn(R.prev,R,R.next)>=0)return!1;R=R.next}return!0}function LD(n,t,e,i){const a=n.prev,o=n,h=n.next;if(xn(a,o,h)>=0)return!1;const f=a.x,m=o.x,g=h.x,b=a.y,x=o.y,E=h.y,T=Math.min(f,m,g),R=Math.min(b,x,E),D=Math.max(f,m,g),C=Math.max(b,x,E),G=$_(T,R,t,e,i),P=$_(D,C,t,e,i);let H=n.prevZ,q=n.nextZ;for(;H&&H.z>=G&&q&&q.z<=P;){if(H.x>=T&&H.x<=D&&H.y>=R&&H.y<=C&&H!==a&&H!==h&&ld(f,b,m,x,g,E,H.x,H.y)&&xn(H.prev,H,H.next)>=0||(H=H.prevZ,q.x>=T&&q.x<=D&&q.y>=R&&q.y<=C&&q!==a&&q!==h&&ld(f,b,m,x,g,E,q.x,q.y)&&xn(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;H&&H.z>=G;){if(H.x>=T&&H.x<=D&&H.y>=R&&H.y<=C&&H!==a&&H!==h&&ld(f,b,m,x,g,E,H.x,H.y)&&xn(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;q&&q.z<=P;){if(q.x>=T&&q.x<=D&&q.y>=R&&q.y<=C&&q!==a&&q!==h&&ld(f,b,m,x,g,E,q.x,q.y)&&xn(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function FD(n,t){let e=n;do{const i=e.prev,a=e.next.next;!_h(i,a)&&q3(i,e,e.next,a)&&Cd(i,a)&&Cd(a,i)&&(t.push(i.i,e.i,a.i),Bd(e),Bd(e.next),e=n=a),e=e.next}while(e!==n);return Ku(e)}function VD(n,t,e,i,a,o){let h=n;do{let f=h.next.next;for(;f!==h.prev;){if(h.i!==f.i&&QD(h,f)){let m=j3(h,f);h=Ku(h,h.next),m=Ku(m,m.next),Ad(h,t,e,i,a,o,0),Ad(m,t,e,i,a,o,0);return}f=f.next}h=h.next}while(h!==n)}function kD(n,t,e,i){const a=[];for(let o=0,h=t.length;o<h;o++){const f=t[o]*i,m=o<h-1?t[o+1]*i:n.length,g=I3(n,f,m,i,!1);g===g.next&&(g.steiner=!0),a.push(WD(g))}a.sort(XD);for(let o=0;o<a.length;o++)e=ID(a[o],e);return e}function XD(n,t){let e=n.x-t.x;if(e===0&&(e=n.y-t.y,e===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),a=(t.next.y-t.y)/(t.next.x-t.x);e=i-a}return e}function ID(n,t){const e=YD(n,t);if(!e)return t;const i=j3(e,n);return Ku(i,i.next),Ku(e,e.next)}function YD(n,t){let e=t;const i=n.x,a=n.y;let o=-1/0,h;if(_h(n,e))return e;do{if(_h(n,e.next))return e.next;if(a<=e.y&&a>=e.next.y&&e.next.y!==e.y){const x=e.x+(a-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(x<=i&&x>o&&(o=x,h=e.x<e.next.x?e:e.next,x===i))return h}e=e.next}while(e!==t);if(!h)return null;const f=h,m=h.x,g=h.y;let b=1/0;e=h;do{if(i>=e.x&&e.x>=m&&i!==e.x&&Y3(a<g?i:o,a,m,g,a<g?o:i,a,e.x,e.y)){const x=Math.abs(a-e.y)/(i-e.x);Cd(e,n)&&(x<b||x===b&&(e.x>h.x||e.x===h.x&&qD(h,e)))&&(h=e,b=x)}e=e.next}while(e!==f);return h}function qD(n,t){return xn(n.prev,n,t.prev)<0&&xn(t.next,n,n.next)<0}function jD(n,t,e,i){let a=n;do a.z===0&&(a.z=$_(a.x,a.y,t,e,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==n);a.prevZ.nextZ=null,a.prevZ=null,KD(a)}function KD(n){let t,e=1;do{let i=n,a;n=null;let o=null;for(t=0;i;){t++;let h=i,f=0;for(let g=0;g<e&&(f++,h=h.nextZ,!!h);g++);let m=e;for(;f>0||m>0&&h;)f!==0&&(m===0||!h||i.z<=h.z)?(a=i,i=i.nextZ,f--):(a=h,h=h.nextZ,m--),o?o.nextZ=a:n=a,a.prevZ=o,o=a;i=h}o.nextZ=null,e*=2}while(t>1);return n}function $_(n,t,e,i,a){return n=(n-e)*a|0,t=(t-i)*a|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function WD(n){let t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function Y3(n,t,e,i,a,o,h,f){return(a-h)*(t-f)>=(n-h)*(o-f)&&(n-h)*(i-f)>=(e-h)*(t-f)&&(e-h)*(o-f)>=(a-h)*(i-f)}function ld(n,t,e,i,a,o,h,f){return!(n===h&&t===f)&&Y3(n,t,e,i,a,o,h,f)}function QD(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!ZD(n,t)&&(Cd(n,t)&&Cd(t,n)&&JD(n,t)&&(xn(n.prev,n,t.prev)||xn(n,t.prev,t))||_h(n,t)&&xn(n.prev,n,n.next)>0&&xn(t.prev,t,t.next)>0)}function xn(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function _h(n,t){return n.x===t.x&&n.y===t.y}function q3(n,t,e,i){const a=Nm(xn(n,t,e)),o=Nm(xn(n,t,i)),h=Nm(xn(e,i,n)),f=Nm(xn(e,i,t));return!!(a!==o&&h!==f||a===0&&Pm(n,e,t)||o===0&&Pm(n,i,t)||h===0&&Pm(e,n,i)||f===0&&Pm(e,t,i))}function Pm(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function Nm(n){return n>0?1:n<0?-1:0}function ZD(n,t){let e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&q3(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function Cd(n,t){return xn(n.prev,n,n.next)<0?xn(n,t,n.next)>=0&&xn(n,n.prev,t)>=0:xn(n,t,n.prev)<0||xn(n,n.next,t)<0}function JD(n,t){let e=n,i=!1;const a=(n.x+t.x)/2,o=(n.y+t.y)/2;do e.y>o!=e.next.y>o&&e.next.y!==e.y&&a<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==n);return i}function j3(n,t){const e=ty(n.i,n.x,n.y),i=ty(t.i,t.x,t.y),a=n.next,o=t.prev;return n.next=t,t.prev=n,e.next=a,a.prev=e,i.next=e,e.prev=i,o.next=i,i.prev=o,i}function kx(n,t,e,i){const a=ty(n,t,e);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function Bd(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function ty(n,t,e){return{i:n,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function $D(n,t,e,i){let a=0;for(let o=t,h=e-i;o<e;o+=i)a+=(n[h]-n[o])*(n[o+1]+n[h+1]),h=o;return a}const K3=Vx.default||Vx;var Er=(n=>(n[n.NONE=0]="NONE",n[n.COLOR=16384]="COLOR",n[n.STENCIL=1024]="STENCIL",n[n.DEPTH=256]="DEPTH",n[n.COLOR_DEPTH=16640]="COLOR_DEPTH",n[n.COLOR_STENCIL=17408]="COLOR_STENCIL",n[n.DEPTH_STENCIL=1280]="DEPTH_STENCIL",n[n.ALL=17664]="ALL",n))(Er||{});class db{constructor(t){this.items=[],this._name=t}emit(t,e,i,a,o,h,f,m){const{name:g,items:b}=this;for(let x=0,E=b.length;x<E;x++)b[x][g](t,e,i,a,o,h,f,m);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&this.items.splice(e,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const t4=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],W3=class Q3 extends Rr{constructor(t){super(),this.uid=rn("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const e=[...t4,...this.config.runners??[]];this._addRunners(...e),this._unsafeEvalCheck()}async init(t={}){const e=t.skipExtensionImports===!0?!0:t.manageImports===!1;await hb(e),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const i in this._systemsHash)t={...this._systemsHash[i].constructor.defaultOptions,...t};t={...Q3.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let i=0;i<this.runners.init.items.length;i++)await this.runners.init.items[i].init(t);this._initOptions=t}render(t,e){let i=t;if(i instanceof Vn&&(i={container:i},e&&(wt(Jt,"passing a second argument is deprecated, please use render options instead"),i.target=e.renderTexture)),i.target||(i.target=this.view.renderTarget),i.target===this.view.renderTarget&&(this._lastObjectRendered=i.container,i.clearColor??(i.clearColor=this.background.colorRgba),i.clear??(i.clear=this.background.clearBeforeRender)),i.clearColor){const a=Array.isArray(i.clearColor)&&i.clearColor.length===4;i.clearColor=a?i.clearColor:Ce.shared.setValue(i.clearColor).toArray()}i.transform||(i.container.updateLocalTransform(),i.transform=i.container.localTransform),i.container.enableRenderGroup(),this.runners.prerender.emit(i),this.runners.renderStart.emit(i),this.runners.render.emit(i),this.runners.renderEnd.emit(i),this.runners.postrender.emit(i)}resize(t,e,i){const a=this.view.resolution;this.view.resize(t,e,i),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),i!==void 0&&i!==a&&this.runners.resolutionChange.emit(i)}clear(t={}){const e=this;t.target||(t.target=e.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=Er.ALL);const{clear:i,clearColor:a,target:o}=t;Ce.shared.setValue(a??this.background.colorRgba),e.renderTarget.clear(o,i,Ce.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(e=>{this.runners[e]=new db(e)})}_addSystems(t){let e;for(e in t){const i=t[e];this._addSystem(i.value,i.name)}}_addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const a in this.runners)this.runners[a].add(i);return this}_addPipes(t,e){const i=e.reduce((a,o)=>(a[o.name]=o.value,a),{});t.forEach(a=>{const o=a.value,h=a.name,f=i[h];this.renderPipes[h]=new o(this,f?new f:null)})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!fb())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};W3.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let Nd=W3,zm;function zd(n){return zm!==void 0||(zm=(()=>{var e;const t={stencil:!0,failIfMajorPerformanceCaveat:n??Nd.defaultOptions.failIfMajorPerformanceCaveat};try{if(!me.get().getWebGLRenderingContext())return!1;let a=me.get().createCanvas().getContext("webgl",t);const o=!!((e=a==null?void 0:a.getContextAttributes())!=null&&e.stencil);if(a){const h=a.getExtension("WEBGL_lose_context");h&&h.loseContext()}return a=null,o}catch{return!1}})()),zm}let Hm;async function Hd(n={}){return Hm!==void 0||(Hm=await(async()=>{const t=me.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(n)).requestDevice(),!0}catch{return!1}})()),Hm}const Xx=["webgl","webgpu","canvas"];async function Z3(n){let t=[];n.preference?(t.push(n.preference),Xx.forEach(o=>{o!==n.preference&&t.push(o)})):t=Xx.slice();let e,i={};for(let o=0;o<t.length;o++){const h=t[o];if(h==="webgpu"&&await Hd()){const{WebGPURenderer:f}=await vd(async()=>{const{WebGPURenderer:m}=await Promise.resolve().then(()=>w5);return{WebGPURenderer:m}},void 0);e=f,i={...n,...n.webgpu};break}else if(h==="webgl"&&zd(n.failIfMajorPerformanceCaveat??Nd.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:f}=await vd(async()=>{const{WebGLRenderer:m}=await Promise.resolve().then(()=>E5);return{WebGLRenderer:m}},void 0);e=f,i={...n,...n.webgl};break}else if(h==="canvas")throw i={...n},new Error("CanvasRenderer is not yet implemented")}if(delete i.webgpu,delete i.webgl,!e)throw new Error("No available renderer for the current environment");const a=new e;return await a.init(i),a}const e4=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,Rd="8.10.1";class pb{static init(){var t;(t=globalThis.__PIXI_APP_INIT__)==null||t.call(globalThis,this,Rd)}static destroy(){}}pb.extension=I.Application;class mb{constructor(t){this._renderer=t}init(){var t;(t=globalThis.__PIXI_RENDERER_INIT__)==null||t.call(globalThis,this._renderer,Rd)}destroy(){this._renderer=null}}mb.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"initHook",priority:-10};const J3=class ey{constructor(...t){this.stage=new Vn,t[0]!==void 0&&wt(Jt,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.renderer=await Z3(t),ey._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return wt(Jt,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,e=!1){const i=ey._plugins.slice(0);i.reverse(),i.forEach(a=>{a.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};J3._plugins=[];let Pg=J3;Oe.handleByList(I.Application,Pg._plugins);Oe.add(pb);class $3{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let e,i;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:a,clientHeight:o}=this._resizeTo;e=a,i=o}this.renderer.resize(e,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}$3.extension=I.Application;class tE{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,zl.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Bi.shared:new Bi,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}tE.extension=I.Application;class gb extends Rr{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return wt(Jt,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return wt(Jt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return wt(Jt,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return wt(Jt,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return wt(Jt,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){var e;this.emit("destroy",this),this.removeAllListeners();for(const i in this.chars)(e=this.chars[i].texture)==null||e.destroy();this.chars=null,t&&(this.pages.forEach(i=>i.texture.destroy(!0)),this.pages=null)}}const n4=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function Md(n){const t=typeof n.fontSize=="number"?`${n.fontSize}px`:n.fontSize;let e=n.fontFamily;Array.isArray(n.fontFamily)||(e=n.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let a=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(a)&&!n4.includes(a)&&(a=`"${a}"`),e[i]=a}return`${n.fontStyle} ${n.fontVariant} ${n.fontWeight} ${t} ${e.join(",")}`}const __={willReadFrequently:!0},Zs=class zt{static get experimentalLetterSpacingSupported(){let t=zt._experimentalLetterSpacingSupported;if(t===void 0){const e=me.get().getCanvasRenderingContext2D().prototype;t=zt._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,a,o,h,f,m,g){this.text=t,this.style=e,this.width=i,this.height=a,this.lines=o,this.lineWidths=h,this.lineHeight=f,this.maxLineWidth=m,this.fontProperties=g}static measureText(t=" ",e,i=zt._canvas,a=e.wordWrap){var G;const o=Md(e),h=zt.measureFont(o);h.fontSize===0&&(h.fontSize=e.fontSize,h.ascent=e.fontSize);const f=zt.__context;f.font=o;const g=(a?zt._wordWrap(t,e,i):t).split(/(?:\r\n|\r|\n)/),b=new Array(g.length);let x=0;for(let P=0;P<g.length;P++){const H=zt._measureText(g[P],e.letterSpacing,f);b[P]=H,x=Math.max(x,H)}const E=((G=e._stroke)==null?void 0:G.width)||0;let T=x+E;e.dropShadow&&(T+=e.dropShadow.distance);const R=e.lineHeight||h.fontSize;let D=Math.max(R,h.fontSize+E)+(g.length-1)*(R+e.leading);return e.dropShadow&&(D+=e.dropShadow.distance),new zt(t,e,T,D,g,b,R+e.leading,x,h)}static _measureText(t,e,i){let a=!1;zt.experimentalLetterSpacingSupported&&(zt.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,a=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));const o=i.measureText(t);let h=o.width;const f=-o.actualBoundingBoxLeft;let g=o.actualBoundingBoxRight-f;if(h>0)if(a)h-=e,g-=e;else{const b=(zt.graphemeSegmenter(t).length-1)*e;h+=b,g+=b}return Math.max(h,g)}static _wordWrap(t,e,i=zt._canvas){const a=i.getContext("2d",__);let o=0,h="",f="";const m=Object.create(null),{letterSpacing:g,whiteSpace:b}=e,x=zt._collapseSpaces(b),E=zt._collapseNewlines(b);let T=!x;const R=e.wordWrapWidth+g,D=zt._tokenize(t);for(let C=0;C<D.length;C++){let G=D[C];if(zt._isNewline(G)){if(!E){f+=zt._addLine(h),T=!x,h="",o=0;continue}G=" "}if(x){const H=zt.isBreakingSpace(G),q=zt.isBreakingSpace(h[h.length-1]);if(H&&q)continue}const P=zt._getFromCache(G,g,m,a);if(P>R)if(h!==""&&(f+=zt._addLine(h),h="",o=0),zt.canBreakWords(G,e.breakWords)){const H=zt.wordWrapSplit(G);for(let q=0;q<H.length;q++){let et=H[q],ot=et,Y=1;for(;H[q+Y];){const N=H[q+Y];if(!zt.canBreakChars(ot,N,G,q,e.breakWords))et+=N;else break;ot=N,Y++}q+=Y-1;const ht=zt._getFromCache(et,g,m,a);ht+o>R&&(f+=zt._addLine(h),T=!1,h="",o=0),h+=et,o+=ht}}else{h.length>0&&(f+=zt._addLine(h),h="",o=0);const H=C===D.length-1;f+=zt._addLine(G,!H),T=!1,h="",o=0}else P+o>R&&(T=!1,f+=zt._addLine(h),h="",o=0),(h.length>0||!zt.isBreakingSpace(G)||T)&&(h+=G,o+=P)}return f+=zt._addLine(h,!1),f}static _addLine(t,e=!0){return t=zt._trimRight(t),t=e?`${t}
`:t,t}static _getFromCache(t,e,i,a){let o=i[t];return typeof o!="number"&&(o=zt._measureText(t,e,a)+e,i[t]=o),o}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const i=t[e];if(!zt.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:zt._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:zt._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const e=[];let i="";if(typeof t!="string")return e;for(let a=0;a<t.length;a++){const o=t[a],h=t[a+1];if(zt.isBreakingSpace(o,h)||zt._isNewline(o)){i!==""&&(e.push(i),i=""),e.push(o);continue}i+=o}return i!==""&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,a,o){return!0}static wordWrapSplit(t){return zt.graphemeSegmenter(t)}static measureFont(t){if(zt._fonts[t])return zt._fonts[t];const e=zt._context;e.font=t;const i=e.measureText(zt.METRICS_STRING+zt.BASELINE_SYMBOL),a={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return zt._fonts[t]=a,a}static clearMetrics(t=""){t?delete zt._fonts[t]:zt._fonts={}}static get _canvas(){if(!zt.__canvas){let t;try{const e=new OffscreenCanvas(0,0),i=e.getContext("2d",__);if(i!=null&&i.measureText)return zt.__canvas=e,e;t=me.get().createCanvas()}catch{t=me.get().createCanvas()}t.width=t.height=10,zt.__canvas=t}return zt.__canvas}static get _context(){return zt.__context||(zt.__context=zt._canvas.getContext("2d",__)),zt.__context}};Zs.METRICS_STRING="|ÉqÅ";Zs.BASELINE_SYMBOL="M";Zs.BASELINE_MULTIPLIER=1.4;Zs.HEIGHT_MULTIPLIER=2;Zs.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const n=new Intl.Segmenter;return t=>{const e=n.segment(t),i=[];let a=0;for(const o of e)i[a++]=o.segment;return i}}return n=>[...n]})();Zs.experimentalLetterSpacing=!1;Zs._fonts={};Zs._newlines=[10,13];Zs._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let ga=Zs;const Ix=[{offset:0,color:"white"},{offset:1,color:"black"}],_b=class ny{constructor(...t){this.uid=rn("fillGradient"),this.type="linear",this.colorStops=[];let e=i4(t);e={...e.type==="radial"?ny.defaultRadialOptions:ny.defaultLinearOptions,...ns(e)},this._textureSize=e.textureSize,this._wrapMode=e.wrapMode,e.type==="radial"?(this.center=e.center,this.outerCenter=e.outerCenter??this.center,this.innerRadius=e.innerRadius,this.outerRadius=e.outerRadius,this.scale=e.scale,this.rotation=e.rotation):(this.start=e.start,this.end=e.end),this.textureSpace=e.textureSpace,this.type=e.type,e.colorStops.forEach(a=>{this.addColorStop(a.offset,a.color)})}addColorStop(t,e){return this.colorStops.push({offset:t,color:Ce.shared.setValue(e).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:t,y:e}=this.start,{x:i,y:a}=this.end,o=i-t,h=a-e;const f=o<0||h<0;if(this._wrapMode==="clamp-to-edge"){if(o<0){const C=t;t=i,i=C,o*=-1}if(h<0){const C=e;e=a,a=C,h*=-1}}const m=this.colorStops.length?this.colorStops:Ix,g=this._textureSize,{canvas:b,context:x}=qx(g,1),E=f?x.createLinearGradient(this._textureSize,0,0,0):x.createLinearGradient(0,0,this._textureSize,0);Yx(E,m),x.fillStyle=E,x.fillRect(0,0,g,1),this.texture=new At({source:new Vo({resource:b,addressMode:this._wrapMode})});const T=Math.sqrt(o*o+h*h),R=Math.atan2(h,o),D=new Gt;D.scale(T/g,1),D.rotate(R),D.translate(t,e),this.textureSpace==="local"&&D.scale(g,g),this.transform=D}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:Ix,e=this._textureSize,{canvas:i,context:a}=qx(e,e),{x:o,y:h}=this.center,{x:f,y:m}=this.outerCenter,g=this.innerRadius,b=this.outerRadius,x=f-b,E=m-b,T=e/(b*2),R=(o-x)*T,D=(h-E)*T,C=a.createRadialGradient(R,D,g*T,(f-x)*T,(m-E)*T,b*T);Yx(C,t),a.fillStyle=t[t.length-1].color,a.fillRect(0,0,e,e),a.fillStyle=C,a.translate(R,D),a.rotate(this.rotation),a.scale(1,this.scale),a.translate(-R,-D),a.fillRect(0,0,e,e),this.texture=new At({source:new Vo({resource:i,addressMode:this._wrapMode})});const G=new Gt;G.scale(1/T,1/T),G.translate(x,E),this.textureSpace==="local"&&G.scale(e,e),this.transform=G}get styleKey(){return this.uid}destroy(){var t;(t=this.texture)==null||t.destroy(!0),this.texture=null}};_b.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};_b.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let Ws=_b;function Yx(n,t){for(let e=0;e<t.length;e++){const i=t[e];n.addColorStop(i.offset,i.color)}}function qx(n,t){const e=me.get().createCanvas(n,t),i=e.getContext("2d");return{canvas:e,context:i}}function i4(n){let t=n[0]??{};return(typeof t=="number"||n[1])&&(wt("8.5.2","use options object instead"),t={type:"linear",start:{x:n[0],y:n[1]},end:{x:n[2],y:n[3]},textureSpace:n[4],textureSize:n[5]??Ws.defaultLinearOptions.textureSize}),t}const jx={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Ld{constructor(t,e){this.uid=rn("fillPattern"),this.transform=new Gt,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=jx[e].addressModeU,t.source.style.addressModeV=jx[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var y_,Kx;function r4(){if(Kx)return y_;Kx=1,y_=e;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function e(o){var h=[];return o.replace(t,function(f,m,g){var b=m.toLowerCase();for(g=a(g),b=="m"&&g.length>2&&(h.push([m].concat(g.splice(0,2))),b="l",m=m=="m"?"l":"L");;){if(g.length==n[b])return g.unshift(m),h.push(g);if(g.length<n[b])throw new Error("malformed path data");h.push([m].concat(g.splice(0,n[b])))}}),h}var i=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function a(o){var h=o.match(i);return h?h.map(Number):[]}return y_}var a4=r4();const s4=qy(a4);function eE(n,t){const e=s4(n),i=[];let a=null,o=0,h=0;for(let f=0;f<e.length;f++){const m=e[f],g=m[0],b=m;switch(g){case"M":o=b[1],h=b[2],t.moveTo(o,h);break;case"m":o+=b[1],h+=b[2],t.moveTo(o,h);break;case"H":o=b[1],t.lineTo(o,h);break;case"h":o+=b[1],t.lineTo(o,h);break;case"V":h=b[1],t.lineTo(o,h);break;case"v":h+=b[1],t.lineTo(o,h);break;case"L":o=b[1],h=b[2],t.lineTo(o,h);break;case"l":o+=b[1],h+=b[2],t.lineTo(o,h);break;case"C":o=b[5],h=b[6],t.bezierCurveTo(b[1],b[2],b[3],b[4],o,h);break;case"c":t.bezierCurveTo(o+b[1],h+b[2],o+b[3],h+b[4],o+b[5],h+b[6]),o+=b[5],h+=b[6];break;case"S":o=b[3],h=b[4],t.bezierCurveToShort(b[1],b[2],o,h);break;case"s":t.bezierCurveToShort(o+b[1],h+b[2],o+b[3],h+b[4]),o+=b[3],h+=b[4];break;case"Q":o=b[3],h=b[4],t.quadraticCurveTo(b[1],b[2],o,h);break;case"q":t.quadraticCurveTo(o+b[1],h+b[2],o+b[3],h+b[4]),o+=b[3],h+=b[4];break;case"T":o=b[1],h=b[2],t.quadraticCurveToShort(o,h);break;case"t":o+=b[1],h+=b[2],t.quadraticCurveToShort(o,h);break;case"A":o=b[6],h=b[7],t.arcToSvg(b[1],b[2],b[3],b[4],b[5],o,h);break;case"a":o+=b[6],h+=b[7],t.arcToSvg(b[1],b[2],b[3],b[4],b[5],o,h);break;case"Z":case"z":t.closePath(),i.length>0&&(a=i.pop(),a?(o=a.startX,h=a.startY):(o=0,h=0)),a=null;break;default:kt(`Unknown SVG path command: ${g}`)}g!=="Z"&&g!=="z"&&a===null&&(a={startX:o,startY:h},i.push(a))}return t}class Ng{constructor(t=0,e=0,i=0){this.type="circle",this.x=t,this.y=e,this.radius=i}clone(){return new Ng(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let a=this.x-t,o=this.y-e;return a*=a,o*=o,a+o<=i}strokeContains(t,e,i,a=.5){if(this.radius===0)return!1;const o=this.x-t,h=this.y-e,f=this.radius,m=(1-a)*i,g=Math.sqrt(o*o+h*h);return g<=f+m&&g>f-(i-m)}getBounds(t){return t||(t=new Ue),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class zg{constructor(t=0,e=0,i=0,a=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=i,this.halfHeight=a}clone(){return new zg(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(t-this.x)/this.halfWidth,a=(e-this.y)/this.halfHeight;return i*=i,a*=a,i+a<=1}strokeContains(t,e,i,a=.5){const{halfWidth:o,halfHeight:h}=this;if(o<=0||h<=0)return!1;const f=i*(1-a),m=i-f,g=o-m,b=h-m,x=o+f,E=h+f,T=t-this.x,R=e-this.y,D=T*T/(g*g)+R*R/(b*b),C=T*T/(x*x)+R*R/(E*E);return D>1&&C<=1}getBounds(t){return t||(t=new Ue),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function md(n,t,e,i,a,o){const h=n-e,f=t-i,m=a-e,g=o-i,b=h*m+f*g,x=m*m+g*g;let E=-1;x!==0&&(E=b/x);let T,R;E<0?(T=e,R=i):E>1?(T=a,R=o):(T=e+E*m,R=i+E*g);const D=n-T,C=t-R;return D*D+C*C}let l4,o4;class oh{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let a=0,o=e.length;a<o;a++)i.push(e[a].x,e[a].y);e=i}this.points=e,this.closePath=!0}isClockwise(){let t=0;const e=this.points,i=e.length;for(let a=0;a<i;a+=2){const o=e[a],h=e[a+1],f=e[(a+2)%i],m=e[(a+3)%i];t+=(f-o)*(m+h)}return t<0}containsPolygon(t){const e=this.getBounds(l4),i=t.getBounds(o4);if(!e.containsRect(i))return!1;const a=t.points;for(let o=0;o<a.length;o+=2){const h=a[o],f=a[o+1];if(!this.contains(h,f))return!1}return!0}clone(){const t=this.points.slice(),e=new oh(t);return e.closePath=this.closePath,e}contains(t,e){let i=!1;const a=this.points.length/2;for(let o=0,h=a-1;o<a;h=o++){const f=this.points[o*2],m=this.points[o*2+1],g=this.points[h*2],b=this.points[h*2+1];m>e!=b>e&&t<(g-f)*((e-m)/(b-m))+f&&(i=!i)}return i}strokeContains(t,e,i,a=.5){const o=i*i,h=o*(1-a),f=o-h,{points:m}=this,g=m.length-(this.closePath?0:2);for(let b=0;b<g;b+=2){const x=m[b],E=m[b+1],T=m[(b+2)%m.length],R=m[(b+3)%m.length],D=md(t,e,x,E,T,R),C=Math.sign((T-x)*(e-E)-(R-E)*(t-x));if(D<=(C<0?f:h))return!0}return!1}getBounds(t){t||(t=new Ue);const e=this.points;let i=1/0,a=-1/0,o=1/0,h=-1/0;for(let f=0,m=e.length;f<m;f+=2){const g=e[f],b=e[f+1];i=g<i?g:i,a=g>a?g:a,o=b<o?b:o,h=b>h?b:h}return t.x=i,t.width=a-i,t.y=o,t.height=h-o,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const Lm=(n,t,e,i,a,o,h)=>{const f=n-e,m=t-i,g=Math.sqrt(f*f+m*m);return g>=a-o&&g<=a+h};class Hg{constructor(t=0,e=0,i=0,a=0,o=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=i,this.height=a,this.radius=o}getBounds(t){return t||(t=new Ue),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new Hg(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let a=t-(this.x+i),o=e-(this.y+i);const h=i*i;if(a*a+o*o<=h||(a=t-(this.x+this.width-i),a*a+o*o<=h)||(o=e-(this.y+this.height-i),a*a+o*o<=h)||(a=t-(this.x+i),a*a+o*o<=h))return!0}return!1}strokeContains(t,e,i,a=.5){const{x:o,y:h,width:f,height:m,radius:g}=this,b=i*(1-a),x=i-b,E=o+g,T=h+g,R=f-g*2,D=m-g*2,C=o+f,G=h+m;return(t>=o-b&&t<=o+x||t>=C-x&&t<=C+b)&&e>=T&&e<=T+D||(e>=h-b&&e<=h+x||e>=G-x&&e<=G+b)&&t>=E&&t<=E+R?!0:t<E&&e<T&&Lm(t,e,E,T,g,x,b)||t>C-g&&e<T&&Lm(t,e,C-g,T,g,x,b)||t>C-g&&e>G-g&&Lm(t,e,C-g,G-g,g,x,b)||t<E&&e>G-g&&Lm(t,e,E,G-g,g,x,b)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const nE={};function Lg(n,t,e){let i=2166136261;for(let a=0;a<t;a++)i^=n[a].uid,i=Math.imul(i,16777619),i>>>=0;return nE[i]||u4(n,t,i,e)}function u4(n,t,e,i){const a={};let o=0;for(let f=0;f<i;f++){const m=f<t?n[f]:At.EMPTY.source;a[o++]=m.source,a[o++]=m.style}const h=new Ks(a);return nE[e]=h,h}class qu{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function ug(n,t){const e=n.byteLength/8|0,i=new Float64Array(n,0,e);new Float64Array(t,0,e).set(i);const o=n.byteLength-e*8;if(o>0){const h=new Uint8Array(n,e*8,o);new Uint8Array(t,e*8,o).set(h)}}const iE={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var On=(n=>(n[n.DISABLED=0]="DISABLED",n[n.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",n[n.MASK_ACTIVE=2]="MASK_ACTIVE",n[n.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",n[n.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",n[n.NONE=5]="NONE",n))(On||{});function yh(n,t){return t.alphaMode==="no-premultiply-alpha"&&iE[n]||n}const c4=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function h4(n){let t="";for(let e=0;e<n;++e)e>0&&(t+=`
else `),e<n-1&&(t+=`if(test == ${e}.0){}`);return t}function yb(n,t){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const i=c4.replace(/%forloop%/gi,h4(n));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))n=n/2|0;else break}}finally{t.deleteShader(e)}return n}let th=null;function rE(){var t;if(th)return th;const n=ub();return th=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),th=yb(th,n),(t=n.getExtension("WEBGL_lose_context"))==null||t.loseContext(),th}class aE{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}class sE{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new aE,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const lE=[];let iy=0;function Wx(){return iy>0?lE[--iy]:new sE}function Qx(n){lE[iy++]=n}let Qf=0;const oE=class uE{constructor(t){this.uid=rn("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],t={...uE.defaultOptions,...t},t.maxTextures||(wt("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),t.maxTextures=rE());const{maxTextures:e,attributesInitialSize:i,indicesInitialSize:a}=t;this.attributeBuffer=new qu(i*4),this.indexBuffer=new Uint16Array(a),this.maxTextures=e}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)Qx(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){const i=t._batch.textures.ids[e._source.uid];return!i&&i!==0?!1:(t._textureId=i,t.texture=e,!0)}updateElement(t){this.dirty=!0;const e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){const e=this._elements;if(!e[this.elementStart])return;let i=Wx(),a=i.textures;a.clear();const o=e[this.elementStart];let h=yh(o.blendMode,o.texture._source),f=o.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const m=this.attributeBuffer.float32View,g=this.attributeBuffer.uint32View,b=this.indexBuffer;let x=this._batchIndexSize,E=this._batchIndexStart,T="startBatch";const R=this.maxTextures;for(let D=this.elementStart;D<this.elementSize;++D){const C=e[D];e[D]=null;const P=C.texture._source,H=yh(C.blendMode,P),q=h!==H||f!==C.topology;if(P._batchTick===Qf&&!q){C._textureId=P._textureBindLocation,x+=C.indexSize,C.packAsQuad?(this.packQuadAttributes(C,m,g,C._attributeStart,C._textureId),this.packQuadIndex(b,C._indexStart,C._attributeStart/this.vertexSize)):(this.packAttributes(C,m,g,C._attributeStart,C._textureId),this.packIndex(C,b,C._indexStart,C._attributeStart/this.vertexSize)),C._batch=i;continue}P._batchTick=Qf,(a.count>=R||q)&&(this._finishBatch(i,E,x-E,a,h,f,t,T),T="renderBatch",E=x,h=H,f=C.topology,i=Wx(),a=i.textures,a.clear(),++Qf),C._textureId=P._textureBindLocation=a.count,a.ids[P.uid]=a.count,a.textures[a.count++]=P,C._batch=i,x+=C.indexSize,C.packAsQuad?(this.packQuadAttributes(C,m,g,C._attributeStart,C._textureId),this.packQuadIndex(b,C._indexStart,C._attributeStart/this.vertexSize)):(this.packAttributes(C,m,g,C._attributeStart,C._textureId),this.packIndex(C,b,C._indexStart,C._attributeStart/this.vertexSize))}a.count>0&&(this._finishBatch(i,E,x-E,a,h,f,t,T),E=x,++Qf),this.elementStart=this.elementSize,this._batchIndexStart=E,this._batchIndexSize=x}_finishBatch(t,e,i,a,o,h,f,m){t.gpuBindGroup=null,t.bindGroup=null,t.action=m,t.batcher=this,t.textures=a,t.blendMode=o,t.topology=h,t.start=e,t.size=i,++Qf,this.batches[this.batchIndex++]=t,f.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,this.attributeBuffer.size*2),i=new qu(e);ug(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(t){const e=this.indexBuffer;let i=Math.max(t,e.length*1.5);i+=i%2;const a=i>65535?new Uint32Array(i):new Uint16Array(i);if(a.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let o=0;o<e.length;o++)a[o]=e[o];else ug(e.buffer,a.buffer);this.indexBuffer=a}packQuadIndex(t,e,i){t[e]=i+0,t[e+1]=i+1,t[e+2]=i+2,t[e+3]=i+0,t[e+4]=i+2,t[e+5]=i+3}packIndex(t,e,i,a){const o=t.indices,h=t.indexSize,f=t.indexOffset,m=t.attributeOffset;for(let g=0;g<h;g++)e[i++]=a+o[g+f]-m}destroy(){for(let t=0;t<this.batches.length;t++)Qx(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};oE.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let cE=oE;var be=(n=>(n[n.MAP_READ=1]="MAP_READ",n[n.MAP_WRITE=2]="MAP_WRITE",n[n.COPY_SRC=4]="COPY_SRC",n[n.COPY_DST=8]="COPY_DST",n[n.INDEX=16]="INDEX",n[n.VERTEX=32]="VERTEX",n[n.UNIFORM=64]="UNIFORM",n[n.STORAGE=128]="STORAGE",n[n.INDIRECT=256]="INDIRECT",n[n.QUERY_RESOLVE=512]="QUERY_RESOLVE",n[n.STATIC=1024]="STATIC",n))(be||{});class Ar extends Rr{constructor(t){let{data:e,size:i}=t;const{usage:a,label:o,shrinkToFit:h}=t;super(),this.uid=rn("buffer"),this._resourceType="buffer",this._resourceId=rn("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,i??(i=e==null?void 0:e.byteLength);const f=!!e;this.descriptor={size:i,usage:a,mappedAtCreation:f,label:o},this.shrinkToFit=h??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&be.STATIC)}set static(t){t?this.descriptor.usage|=be.STATIC:this.descriptor.usage&=~be.STATIC}setDataWithSize(t,e,i){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){i&&this.emit("update",this);return}const a=this._data;if(this._data=t,this._dataInt32=null,!a||a.length!==t.length){!this.shrinkToFit&&a&&t.byteLength<a.byteLength?i&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=rn("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function bb(n,t){if(!(n instanceof Ar)){let e=t?be.INDEX:be.VERTEX;n instanceof Array&&(t?(n=new Uint32Array(n),e=be.INDEX|be.COPY_DST):(n=new Float32Array(n),e=be.VERTEX|be.COPY_DST)),n=new Ar({data:n,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:e})}return n}function hE(n,t,e){const i=n.getAttribute(t);if(!i)return e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e;const a=i.buffer.data;let o=1/0,h=1/0,f=-1/0,m=-1/0;const g=a.BYTES_PER_ELEMENT,b=(i.offset||0)/g,x=(i.stride||2*4)/g;for(let E=b;E<a.length;E+=x){const T=a[E],R=a[E+1];T>f&&(f=T),R>m&&(m=R),T<o&&(o=T),R<h&&(h=R)}return e.minX=o,e.minY=h,e.maxX=f,e.maxY=m,e}function f4(n){return(n instanceof Ar||Array.isArray(n)||n.BYTES_PER_ELEMENT)&&(n={buffer:n}),n.buffer=bb(n.buffer,!1),n}class Ju extends Rr{constructor(t={}){super(),this.uid=rn("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new $n,this._boundsDirty=!0;const{attributes:e,indexBuffer:i,topology:a}=t;if(this.buffers=[],this.attributes={},e)for(const o in e)this.addAttribute(o,e[o]);this.instanceCount=t.instanceCount??1,i&&this.addIndex(i),this.topology=a||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){const i=f4(e);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=i}addIndex(t){this.indexBuffer=bb(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,hE(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const d4=new Float32Array(1),p4=new Uint32Array(1);class fE extends Ju{constructor(){const e=new Ar({data:d4,label:"attribute-batch-buffer",usage:be.VERTEX|be.COPY_DST,shrinkToFit:!1}),i=new Ar({data:p4,label:"index-batch-buffer",usage:be.INDEX|be.COPY_DST,shrinkToFit:!1}),a=6*4;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:a,offset:0},aUV:{buffer:e,format:"float32x2",stride:a,offset:2*4},aColor:{buffer:e,format:"unorm8x4",stride:a,offset:4*4},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:a,offset:5*4}},indexBuffer:i})}}function ry(n,t,e){if(n)for(const i in n){const a=i.toLocaleLowerCase(),o=t[a];if(o){let h=n[i];i==="header"&&(h=h.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),e&&o.push(`//----${e}----//`),o.push(h)}else kt(`${i} placement hook does not exist in shader`)}}const m4=/\{\{(.*?)\}\}/g;function ay(n){var i;const t={};return(((i=n.match(m4))==null?void 0:i.map(a=>a.replace(/[{()}]/g,"")))??[]).forEach(a=>{t[a]=[]}),t}function Zx(n,t){let e;const i=/@in\s+([^;]+);/g;for(;(e=i.exec(n))!==null;)t.push(e[1])}function sy(n,t,e=!1){const i=[];Zx(t,i),n.forEach(f=>{f.header&&Zx(f.header,i)});const a=i;e&&a.sort();const o=a.map((f,m)=>`       @location(${m}) ${f},`).join(`
`);let h=t.replace(/@in\s+[^;]+;\s*/g,"");return h=h.replace("{{in}}",`
${o}
`),h}function Jx(n,t){let e;const i=/@out\s+([^;]+);/g;for(;(e=i.exec(n))!==null;)t.push(e[1])}function g4(n){const e=/\b(\w+)\s*:/g.exec(n);return e?e[1]:""}function _4(n){const t=/@.*?\s+/g;return n.replace(t,"")}function dE(n,t){const e=[];Jx(t,e),n.forEach(m=>{m.header&&Jx(m.header,e)});let i=0;const a=e.sort().map(m=>m.indexOf("builtin")>-1?m:`@location(${i++}) ${m}`).join(`,
`),o=e.sort().map(m=>`       var ${_4(m)};`).join(`
`),h=`return VSOutput(
            ${e.sort().map(m=>` ${g4(m)}`).join(`,
`)});`;let f=t.replace(/@out\s+[^;]+;\s*/g,"");return f=f.replace("{{struct}}",`
${a}
`),f=f.replace("{{start}}",`
${o}
`),f=f.replace("{{return}}",`
${h}
`),f}function ly(n,t){let e=n;for(const i in t){const a=t[i];a.join(`
`).length?e=e.replace(`{{${i}}}`,`//-----${i} START-----//
${a.join(`
`)}
//----${i} FINISH----//`):e=e.replace(`{{${i}}}`,"")}return e}const Ho=Object.create(null),b_=new Map;let y4=0;function pE({template:n,bits:t}){const e=gE(n,t);if(Ho[e])return Ho[e];const{vertex:i,fragment:a}=b4(n,t);return Ho[e]=_E(i,a,t),Ho[e]}function mE({template:n,bits:t}){const e=gE(n,t);return Ho[e]||(Ho[e]=_E(n.vertex,n.fragment,t)),Ho[e]}function b4(n,t){const e=t.map(h=>h.vertex).filter(h=>!!h),i=t.map(h=>h.fragment).filter(h=>!!h);let a=sy(e,n.vertex,!0);a=dE(e,a);const o=sy(i,n.fragment,!0);return{vertex:a,fragment:o}}function gE(n,t){return t.map(e=>(b_.has(e)||b_.set(e,y4++),b_.get(e))).sort((e,i)=>e-i).join("-")+n.vertex+n.fragment}function _E(n,t,e){const i=ay(n),a=ay(t);return e.forEach(o=>{ry(o.vertex,i,o.name),ry(o.fragment,a,o.name)}),{vertex:ly(n,i),fragment:ly(t,a)}}const yE=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,bE=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,vE=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,xE=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,SE={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},v4={name:"global-uniforms-ubo-bit",vertex:{header:`
          uniform globalUniforms {
            mat3 uProjectionMatrix;
            mat3 uWorldTransformMatrix;
            vec4 uWorldColorAlpha;
            vec2 uResolution;
          };
        `}},EE={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function Sh({bits:n,name:t}){const e=pE({template:{fragment:bE,vertex:yE},bits:[SE,...n]});return Mr.from({name:t,vertex:{source:e.vertex,entryPoint:"main"},fragment:{source:e.fragment,entryPoint:"main"}})}function Eh({bits:n,name:t}){return new qr({name:t,...mE({template:{vertex:vE,fragment:xE},bits:[EE,...n]})})}const Fg={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},Vg={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},v_={};function x4(n){const t=[];if(n===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let e=0;for(let i=0;i<n;i++)t.push(`@group(1) @binding(${e++}) var textureSource${i+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${e++}) var textureSampler${i+1}: sampler;`)}return t.join(`
`)}function S4(n){const t=[];if(n===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let e=0;e<n;e++)e===n-1?t.push("  default:{"):t.push(`  case ${e}:{`),t.push(`      outColor = textureSampleGrad(textureSource${e+1}, textureSampler${e+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function kg(n){return v_[n]||(v_[n]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${x4(n)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${S4(n)}
            `}}),v_[n]}const x_={};function E4(n){const t=[];for(let e=0;e<n;e++)e>0&&t.push("else"),e<n-1&&t.push(`if(vTextureId < ${e}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${e}], vUV);`),t.push("}");return t.join(`
`)}function Xg(n){return x_[n]||(x_[n]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${n}];

            `,main:`

                ${E4(n)}
            `}}),x_[n]}const Th={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Ah={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},$x={};function Ig(n){let t=$x[n];if(t)return t;const e=new Int32Array(n);for(let i=0;i<n;i++)e[i]=i;return t=$x[n]=new kn({uTextures:{value:e,type:"i32",size:n}},{isStatic:!0}),t}class TE extends jr{constructor(t){const e=Eh({name:"batch",bits:[Vg,Xg(t),Ah]}),i=Sh({name:"batch",bits:[Fg,kg(t),Th]});super({glProgram:e,gpuProgram:i,resources:{batchSamplers:Ig(t)}})}}let S_=null;const AE=class CE extends cE{constructor(t){super(t),this.geometry=new fE,this.name=CE.extension.name,this.vertexSize=6,S_??(S_=new TE(t.maxTextures)),this.shader=S_}packAttributes(t,e,i,a,o){const h=o<<16|t.roundPixels&65535,f=t.transform,m=f.a,g=f.b,b=f.c,x=f.d,E=f.tx,T=f.ty,{positions:R,uvs:D}=t,C=t.color,G=t.attributeOffset,P=G+t.attributeSize;for(let H=G;H<P;H++){const q=H*2,et=R[q],ot=R[q+1];e[a++]=m*et+b*ot+E,e[a++]=x*ot+g*et+T,e[a++]=D[q],e[a++]=D[q+1],i[a++]=C,i[a++]=h}}packQuadAttributes(t,e,i,a,o){const h=t.texture,f=t.transform,m=f.a,g=f.b,b=f.c,x=f.d,E=f.tx,T=f.ty,R=t.bounds,D=R.maxX,C=R.minX,G=R.maxY,P=R.minY,H=h.uvs,q=t.color,et=o<<16|t.roundPixels&65535;e[a+0]=m*C+b*P+E,e[a+1]=x*P+g*C+T,e[a+2]=H.x0,e[a+3]=H.y0,i[a+4]=q,i[a+5]=et,e[a+6]=m*D+b*P+E,e[a+7]=x*P+g*D+T,e[a+8]=H.x1,e[a+9]=H.y1,i[a+10]=q,i[a+11]=et,e[a+12]=m*D+b*G+E,e[a+13]=x*G+g*D+T,e[a+14]=H.x2,e[a+15]=H.y2,i[a+16]=q,i[a+17]=et,e[a+18]=m*C+b*G+E,e[a+19]=x*G+g*C+T,e[a+20]=H.x3,e[a+21]=H.y3,i[a+22]=q,i[a+23]=et}};AE.extension={type:[I.Batcher],name:"default"};let Yg=AE;function BE(n,t,e,i,a,o,h,f=null){let m=0;e*=t,a*=o;const g=f.a,b=f.b,x=f.c,E=f.d,T=f.tx,R=f.ty;for(;m<h;){const D=n[e],C=n[e+1];i[a]=g*D+x*C+T,i[a+1]=b*D+E*C+R,a+=o,e+=t,m++}}function RE(n,t,e,i){let a=0;for(t*=e;a<i;)n[t]=0,n[t+1]=0,t+=e,a++}function vb(n,t,e,i,a){const o=t.a,h=t.b,f=t.c,m=t.d,g=t.tx,b=t.ty;e||(e=0),i||(i=2),a||(a=n.length/i-e);let x=e*i;for(let E=0;E<a;E++){const T=n[x],R=n[x+1];n[x]=o*T+f*R+g,n[x+1]=h*T+m*R+b,x+=i}}const T4=new Gt;class qg{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,e=t>>16|t&65280|(t&255)<<16,i=this.renderable;return i?tb(e,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):e+(this.alpha*255<<24)}get transform(){var t;return((t=this.renderable)==null?void 0:t.groupTransform)||T4}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const bh={extension:{type:I.ShapeBuilder,name:"circle"},build(n,t){let e,i,a,o,h,f;if(n.type==="circle"){const q=n;if(h=f=q.radius,h<=0)return!1;e=q.x,i=q.y,a=o=0}else if(n.type==="ellipse"){const q=n;if(h=q.halfWidth,f=q.halfHeight,h<=0||f<=0)return!1;e=q.x,i=q.y,a=o=0}else{const q=n,et=q.width/2,ot=q.height/2;e=q.x+et,i=q.y+ot,h=f=Math.max(0,Math.min(q.radius,Math.min(et,ot))),a=et-h,o=ot-f}if(a<0||o<0)return!1;const m=Math.ceil(2.3*Math.sqrt(h+f)),g=m*8+(a?4:0)+(o?4:0);if(g===0)return!1;if(m===0)return t[0]=t[6]=e+a,t[1]=t[3]=i+o,t[2]=t[4]=e-a,t[5]=t[7]=i-o,!0;let b=0,x=m*4+(a?2:0)+2,E=x,T=g,R=a+h,D=o,C=e+R,G=e-R,P=i+D;if(t[b++]=C,t[b++]=P,t[--x]=P,t[--x]=G,o){const q=i-D;t[E++]=G,t[E++]=q,t[--T]=q,t[--T]=C}for(let q=1;q<m;q++){const et=Math.PI/2*(q/m),ot=a+Math.cos(et)*h,Y=o+Math.sin(et)*f,ht=e+ot,N=e-ot,X=i+Y,W=i-Y;t[b++]=ht,t[b++]=X,t[--x]=X,t[--x]=N,t[E++]=N,t[E++]=W,t[--T]=W,t[--T]=ht}R=a,D=o+f,C=e+R,G=e-R,P=i+D;const H=i-D;return t[b++]=C,t[b++]=P,t[--T]=H,t[--T]=C,a&&(t[b++]=G,t[b++]=P,t[--T]=H,t[--T]=G),!0},triangulate(n,t,e,i,a,o){if(n.length===0)return;let h=0,f=0;for(let b=0;b<n.length;b+=2)h+=n[b],f+=n[b+1];h/=n.length/2,f/=n.length/2;let m=i;t[m*e]=h,t[m*e+1]=f;const g=m++;for(let b=0;b<n.length;b+=2)t[m*e]=n[b],t[m*e+1]=n[b+1],b>0&&(a[o++]=m,a[o++]=g,a[o++]=m-1),m++;a[o++]=g+1,a[o++]=g,a[o++]=m-1}},ME={...bh,extension:{...bh.extension,name:"ellipse"}},DE={...bh,extension:{...bh.extension,name:"roundedRectangle"}},xb=1e-4,oy=1e-4;function wE(n){const t=n.length;if(t<6)return 1;let e=0;for(let i=0,a=n[t-2],o=n[t-1];i<t;i+=2){const h=n[i],f=n[i+1];e+=(h-a)*(f+o),a=h,o=f}return e<0?-1:1}function t1(n,t,e,i,a,o,h,f){const m=n-e*a,g=t-i*a,b=n+e*o,x=t+i*o;let E,T;h?(E=i,T=-e):(E=-i,T=e);const R=m+E,D=g+T,C=b+E,G=x+T;return f.push(R,D),f.push(C,G),2}function Lu(n,t,e,i,a,o,h,f){const m=e-n,g=i-t;let b=Math.atan2(m,g),x=Math.atan2(a-n,o-t);f&&b<x?b+=Math.PI*2:!f&&b>x&&(x+=Math.PI*2);let E=b;const T=x-b,R=Math.abs(T),D=Math.sqrt(m*m+g*g),C=(15*R*Math.sqrt(D)/Math.PI>>0)+1,G=T/C;if(E+=G,f){h.push(n,t),h.push(e,i);for(let P=1,H=E;P<C;P++,H+=G)h.push(n,t),h.push(n+Math.sin(H)*D,t+Math.cos(H)*D);h.push(n,t),h.push(a,o)}else{h.push(e,i),h.push(n,t);for(let P=1,H=E;P<C;P++,H+=G)h.push(n+Math.sin(H)*D,t+Math.cos(H)*D),h.push(n,t);h.push(a,o),h.push(n,t)}return C*2}function UE(n,t,e,i,a,o){const h=xb;if(n.length===0)return;const f=t;let m=f.alignment;if(t.alignment!==.5){let ct=wE(n);e&&(ct*=-1),m=(m-.5)*ct+.5}const g=new Xe(n[0],n[1]),b=new Xe(n[n.length-2],n[n.length-1]),x=i,E=Math.abs(g.x-b.x)<h&&Math.abs(g.y-b.y)<h;if(x){n=n.slice(),E&&(n.pop(),n.pop(),b.set(n[n.length-2],n[n.length-1]));const ct=(g.x+b.x)*.5,z=(b.y+g.y)*.5;n.unshift(ct,z),n.push(ct,z)}const T=a,R=n.length/2;let D=n.length;const C=T.length/2,G=f.width/2,P=G*G,H=f.miterLimit*f.miterLimit;let q=n[0],et=n[1],ot=n[2],Y=n[3],ht=0,N=0,X=-(et-Y),W=q-ot,rt=0,ft=0,St=Math.sqrt(X*X+W*W);X/=St,W/=St,X*=G,W*=G;const Ct=m,V=(1-Ct)*2,j=Ct*2;x||(f.cap==="round"?D+=Lu(q-X*(V-j)*.5,et-W*(V-j)*.5,q-X*V,et-W*V,q+X*j,et+W*j,T,!0)+2:f.cap==="square"&&(D+=t1(q,et,X,W,V,j,!0,T))),T.push(q-X*V,et-W*V),T.push(q+X*j,et+W*j);for(let ct=1;ct<R-1;++ct){q=n[(ct-1)*2],et=n[(ct-1)*2+1],ot=n[ct*2],Y=n[ct*2+1],ht=n[(ct+1)*2],N=n[(ct+1)*2+1],X=-(et-Y),W=q-ot,St=Math.sqrt(X*X+W*W),X/=St,W/=St,X*=G,W*=G,rt=-(Y-N),ft=ot-ht,St=Math.sqrt(rt*rt+ft*ft),rt/=St,ft/=St,rt*=G,ft*=G;const z=ot-q,tt=et-Y,Tt=ot-ht,Rt=N-Y,yt=z*Tt+tt*Rt,Mt=tt*Tt-Rt*z,Lt=Mt<0;if(Math.abs(Mt)<.001*Math.abs(yt)){T.push(ot-X*V,Y-W*V),T.push(ot+X*j,Y+W*j),yt>=0&&(f.join==="round"?D+=Lu(ot,Y,ot-X*V,Y-W*V,ot-rt*V,Y-ft*V,T,!1)+4:D+=2,T.push(ot-rt*j,Y-ft*j),T.push(ot+rt*V,Y+ft*V));continue}const Ge=(-X+q)*(-W+Y)-(-X+ot)*(-W+et),Pt=(-rt+ht)*(-ft+Y)-(-rt+ot)*(-ft+N),ne=(z*Pt-Tt*Ge)/Mt,ce=(Rt*Ge-tt*Pt)/Mt,Te=(ne-ot)*(ne-ot)+(ce-Y)*(ce-Y),Be=ot+(ne-ot)*V,Fe=Y+(ce-Y)*V,ve=ot-(ne-ot)*j,ln=Y-(ce-Y)*j,Pe=Math.min(z*z+tt*tt,Tt*Tt+Rt*Rt),Xn=Lt?V:j,ir=Pe+Xn*Xn*P;Te<=ir?f.join==="bevel"||Te/P>H?(Lt?(T.push(Be,Fe),T.push(ot+X*j,Y+W*j),T.push(Be,Fe),T.push(ot+rt*j,Y+ft*j)):(T.push(ot-X*V,Y-W*V),T.push(ve,ln),T.push(ot-rt*V,Y-ft*V),T.push(ve,ln)),D+=2):f.join==="round"?Lt?(T.push(Be,Fe),T.push(ot+X*j,Y+W*j),D+=Lu(ot,Y,ot+X*j,Y+W*j,ot+rt*j,Y+ft*j,T,!0)+4,T.push(Be,Fe),T.push(ot+rt*j,Y+ft*j)):(T.push(ot-X*V,Y-W*V),T.push(ve,ln),D+=Lu(ot,Y,ot-X*V,Y-W*V,ot-rt*V,Y-ft*V,T,!1)+4,T.push(ot-rt*V,Y-ft*V),T.push(ve,ln)):(T.push(Be,Fe),T.push(ve,ln)):(T.push(ot-X*V,Y-W*V),T.push(ot+X*j,Y+W*j),f.join==="round"?Lt?D+=Lu(ot,Y,ot+X*j,Y+W*j,ot+rt*j,Y+ft*j,T,!0)+2:D+=Lu(ot,Y,ot-X*V,Y-W*V,ot-rt*V,Y-ft*V,T,!1)+2:f.join==="miter"&&Te/P<=H&&(Lt?(T.push(ve,ln),T.push(ve,ln)):(T.push(Be,Fe),T.push(Be,Fe)),D+=2),T.push(ot-rt*V,Y-ft*V),T.push(ot+rt*j,Y+ft*j),D+=2)}q=n[(R-2)*2],et=n[(R-2)*2+1],ot=n[(R-1)*2],Y=n[(R-1)*2+1],X=-(et-Y),W=q-ot,St=Math.sqrt(X*X+W*W),X/=St,W/=St,X*=G,W*=G,T.push(ot-X*V,Y-W*V),T.push(ot+X*j,Y+W*j),x||(f.cap==="round"?D+=Lu(ot-X*(V-j)*.5,Y-W*(V-j)*.5,ot-X*V,Y-W*V,ot+X*j,Y+W*j,T,!1)+2:f.cap==="square"&&(D+=t1(ot,Y,X,W,V,j,!1,T)));const ut=oy*oy;for(let ct=C;ct<D+C-2;++ct)q=T[ct*2],et=T[ct*2+1],ot=T[(ct+1)*2],Y=T[(ct+1)*2+1],ht=T[(ct+2)*2],N=T[(ct+2)*2+1],!(Math.abs(q*(Y-N)+ot*(N-et)+ht*(et-Y))<ut)&&o.push(ct,ct+1,ct+2)}function OE(n,t,e,i){const a=xb;if(n.length===0)return;const o=n[0],h=n[1],f=n[n.length-2],m=n[n.length-1],g=t||Math.abs(o-f)<a&&Math.abs(h-m)<a,b=e,x=n.length/2,E=b.length/2;for(let T=0;T<x;T++)b.push(n[T*2]),b.push(n[T*2+1]);for(let T=0;T<x-1;T++)i.push(E+T,E+T+1);g&&i.push(E+x-1,E)}function Sb(n,t,e,i,a,o,h){const f=K3(n,t,2);if(!f)return;for(let g=0;g<f.length;g+=3)o[h++]=f[g]+a,o[h++]=f[g+1]+a,o[h++]=f[g+2]+a;let m=a*i;for(let g=0;g<n.length;g+=2)e[m]=n[g],e[m+1]=n[g+1],m+=i}const A4=[],GE={extension:{type:I.ShapeBuilder,name:"polygon"},build(n,t){for(let e=0;e<n.points.length;e++)t[e]=n.points[e];return!0},triangulate(n,t,e,i,a,o){Sb(n,A4,t,e,i,a,o)}},PE={extension:{type:I.ShapeBuilder,name:"rectangle"},build(n,t){const e=n,i=e.x,a=e.y,o=e.width,h=e.height;return o>0&&h>0?(t[0]=i,t[1]=a,t[2]=i+o,t[3]=a,t[4]=i+o,t[5]=a+h,t[6]=i,t[7]=a+h,!0):!1},triangulate(n,t,e,i,a,o){let h=0;i*=e,t[i+h]=n[0],t[i+h+1]=n[1],h+=e,t[i+h]=n[2],t[i+h+1]=n[3],h+=e,t[i+h]=n[6],t[i+h+1]=n[7],h+=e,t[i+h]=n[4],t[i+h+1]=n[5],h+=e;const f=i/e;a[o++]=f,a[o++]=f+1,a[o++]=f+2,a[o++]=f+1,a[o++]=f+3,a[o++]=f+2}},NE={extension:{type:I.ShapeBuilder,name:"triangle"},build(n,t){return t[0]=n.x,t[1]=n.y,t[2]=n.x2,t[3]=n.y2,t[4]=n.x3,t[5]=n.y3,!0},triangulate(n,t,e,i,a,o){let h=0;i*=e,t[i+h]=n[0],t[i+h+1]=n[1],h+=e,t[i+h]=n[2],t[i+h+1]=n[3],h+=e,t[i+h]=n[4],t[i+h+1]=n[5];const f=i/e;a[o++]=f,a[o++]=f+1,a[o++]=f+2}},C4=new Gt,B4=new Ue;function zE(n,t,e,i){const a=t.matrix?n.copyFrom(t.matrix).invert():n.identity();if(t.textureSpace==="local"){const h=e.getBounds(B4);t.width&&h.pad(t.width);const{x:f,y:m}=h,g=1/h.width,b=1/h.height,x=-f*g,E=-m*b,T=a.a,R=a.b,D=a.c,C=a.d;a.a*=g,a.b*=g,a.c*=b,a.d*=b,a.tx=x*T+E*D+a.tx,a.ty=x*R+E*C+a.ty}else a.translate(t.texture.frame.x,t.texture.frame.y),a.scale(1/t.texture.source.width,1/t.texture.source.height);const o=t.texture.source.style;return!(t.fill instanceof Ws)&&o.addressMode==="clamp-to-edge"&&(o.addressMode="repeat",o.update()),i&&a.append(C4.copyFrom(i).invert()),a}const Fd={};Oe.handleByMap(I.ShapeBuilder,Fd);Oe.add(PE,GE,NE,bh,ME,DE);const R4=new Ue,M4=new Gt;function HE(n,t){const{geometryData:e,batches:i}=t;i.length=0,e.indices.length=0,e.vertices.length=0,e.uvs.length=0;for(let a=0;a<n.instructions.length;a++){const o=n.instructions[a];if(o.action==="texture")D4(o.data,i,e);else if(o.action==="fill"||o.action==="stroke"){const h=o.action==="stroke",f=o.data.path.shapePath,m=o.data.style,g=o.data.hole;h&&g&&e1(g.shapePath,m,!0,i,e),g&&(f.shapePrimitives[f.shapePrimitives.length-1].holes=g.shapePath.shapePrimitives),e1(f,m,h,i,e)}}}function D4(n,t,e){const i=[],a=Fd.rectangle,o=R4;o.x=n.dx,o.y=n.dy,o.width=n.dw,o.height=n.dh;const h=n.transform;if(!a.build(o,i))return;const{vertices:f,uvs:m,indices:g}=e,b=g.length,x=f.length/2;h&&vb(i,h),a.triangulate(i,f,2,x,g,b);const E=n.image,T=E.uvs;m.push(T.x0,T.y0,T.x1,T.y1,T.x3,T.y3,T.x2,T.y2);const R=di.get(qg);R.indexOffset=b,R.indexSize=g.length-b,R.attributeOffset=x,R.attributeSize=f.length/2-x,R.baseColor=n.style,R.alpha=n.alpha,R.texture=E,R.geometryData=e,t.push(R)}function e1(n,t,e,i,a){const{vertices:o,uvs:h,indices:f}=a;n.shapePrimitives.forEach(({shape:m,transform:g,holes:b})=>{const x=[],E=Fd[m.type];if(!E.build(m,x))return;const T=f.length,R=o.length/2;let D="triangle-list";if(g&&vb(x,g),e){const H=m.closePath??!0,q=t;q.pixelLine?(OE(x,H,o,f),D="line-list"):UE(x,q,!1,H,o,f)}else if(b){const H=[],q=x.slice();w4(b).forEach(ot=>{H.push(q.length/2),q.push(...ot)}),Sb(q,H,o,2,R,f,T)}else E.triangulate(x,o,2,R,f,T);const C=h.length/2,G=t.texture;if(G!==At.WHITE){const H=zE(M4,t,m,g);BE(o,2,R,h,C,2,o.length/2-R,H)}else RE(h,C,2,o.length/2-R);const P=di.get(qg);P.indexOffset=T,P.indexSize=f.length-T,P.attributeOffset=R,P.attributeSize=o.length/2-R,P.baseColor=t.color,P.alpha=t.alpha,P.texture=G,P.geometryData=a,P.topology=D,i.push(P)})}function w4(n){const t=[];for(let e=0;e<n.length;e++){const i=n[e].shape,a=[];Fd[i.type].build(i,a)&&t.push(a)}return t}class LE{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class FE{constructor(){this.instructions=new nb}init(t){this.batcher=new Yg({maxTextures:t}),this.instructions.reset()}get geometry(){return wt(_S,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const Eb=class uy{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(t){uy.defaultOptions.bezierSmoothness=(t==null?void 0:t.bezierSmoothness)??uy.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),HE(t,e);const i=t.batchMode;t.customShader||i==="no-batch"?e.isBatchable=!1:i==="auto"?e.isBatchable=e.geometryData.vertices.length<400:e.isBatchable=!0,t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const e=di.get(FE,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:i,geometryData:a}=this._gpuContextHash[t.uid],o=a.vertices.length,h=a.indices.length;for(let b=0;b<i.length;b++)i[b].applyTransform=!1;const f=e.batcher;f.ensureAttributeBuffer(o),f.ensureIndexBuffer(h),f.begin();for(let b=0;b<i.length;b++){const x=i[b];f.add(x)}f.finish(e.instructions);const m=f.geometry;m.indexBuffer.setDataWithSize(f.indexBuffer,f.indexSize,!0),m.buffers[0].setDataWithSize(f.attributeBuffer.float32View,f.attributeSize,!0);const g=f.batches;for(let b=0;b<g.length;b++){const x=g[b];x.bindGroup=Lg(x.textures.textures,x.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new LE;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(di.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(i=>{di.return(i)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};Eb.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"graphicsContext"};Eb.defaultOptions={bezierSmoothness:.5};let Tb=Eb;const U4=8,Fm=11920929e-14,O4=1;function Ab(n,t,e,i,a,o,h,f,m,g){const x=Math.min(.99,Math.max(0,g??Tb.defaultOptions.bezierSmoothness));let E=(O4-x)/1;return E*=E,G4(t,e,i,a,o,h,f,m,n,E),n}function G4(n,t,e,i,a,o,h,f,m,g){cy(n,t,e,i,a,o,h,f,m,g,0),m.push(h,f)}function cy(n,t,e,i,a,o,h,f,m,g,b){if(b>U4)return;const x=(n+e)/2,E=(t+i)/2,T=(e+a)/2,R=(i+o)/2,D=(a+h)/2,C=(o+f)/2,G=(x+T)/2,P=(E+R)/2,H=(T+D)/2,q=(R+C)/2,et=(G+H)/2,ot=(P+q)/2;if(b>0){let Y=h-n,ht=f-t;const N=Math.abs((e-h)*ht-(i-f)*Y),X=Math.abs((a-h)*ht-(o-f)*Y);if(N>Fm&&X>Fm){if((N+X)*(N+X)<=g*(Y*Y+ht*ht)){m.push(et,ot);return}}else if(N>Fm){if(N*N<=g*(Y*Y+ht*ht)){m.push(et,ot);return}}else if(X>Fm){if(X*X<=g*(Y*Y+ht*ht)){m.push(et,ot);return}}else if(Y=et-(n+h)/2,ht=ot-(t+f)/2,Y*Y+ht*ht<=g){m.push(et,ot);return}}cy(n,t,x,E,G,P,et,ot,m,g,b+1),cy(et,ot,H,q,D,C,h,f,m,g,b+1)}const P4=8,N4=11920929e-14,z4=1;function VE(n,t,e,i,a,o,h,f){const g=Math.min(.99,Math.max(0,f??Tb.defaultOptions.bezierSmoothness));let b=(z4-g)/1;return b*=b,H4(t,e,i,a,o,h,n,b),n}function H4(n,t,e,i,a,o,h,f){hy(h,n,t,e,i,a,o,f,0),h.push(a,o)}function hy(n,t,e,i,a,o,h,f,m){if(m>P4)return;const g=(t+i)/2,b=(e+a)/2,x=(i+o)/2,E=(a+h)/2,T=(g+x)/2,R=(b+E)/2;let D=o-t,C=h-e;const G=Math.abs((i-o)*C-(a-h)*D);if(G>N4){if(G*G<=f*(D*D+C*C)){n.push(T,R);return}}else if(D=T-(t+o)/2,C=R-(e+h)/2,D*D+C*C<=f){n.push(T,R);return}hy(n,t,e,g,b,T,R,f,m+1),hy(n,T,R,x,E,o,h,f,m+1)}function Cb(n,t,e,i,a,o,h,f){let m=Math.abs(a-o);(!h&&a>o||h&&o>a)&&(m=2*Math.PI-m),f||(f=Math.max(6,Math.floor(6*Math.pow(i,1/3)*(m/Math.PI)))),f=Math.max(f,3);let g=m/f,b=a;g*=h?-1:1;for(let x=0;x<f+1;x++){const E=Math.cos(b),T=Math.sin(b),R=t+E*i,D=e+T*i;n.push(R,D),b+=g}}function kE(n,t,e,i,a,o){const h=n[n.length-2],m=n[n.length-1]-e,g=h-t,b=a-e,x=i-t,E=Math.abs(m*x-g*b);if(E<1e-8||o===0){(n[n.length-2]!==t||n[n.length-1]!==e)&&n.push(t,e);return}const T=m*m+g*g,R=b*b+x*x,D=m*b+g*x,C=o*Math.sqrt(T)/E,G=o*Math.sqrt(R)/E,P=C*D/T,H=G*D/R,q=C*x+G*g,et=C*b+G*m,ot=g*(G+P),Y=m*(G+P),ht=x*(C+H),N=b*(C+H),X=Math.atan2(Y-et,ot-q),W=Math.atan2(N-et,ht-q);Cb(n,q+t,et+e,o,X,W,g*b>x*m)}const gd=Math.PI*2,E_={centerX:0,centerY:0,ang1:0,ang2:0},T_=({x:n,y:t},e,i,a,o,h,f,m)=>{n*=e,t*=i;const g=a*n-o*t,b=o*n+a*t;return m.x=g+h,m.y=b+f,m};function L4(n,t){const e=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=t===1.5707963267948966?.551915024494:e,a=Math.cos(n),o=Math.sin(n),h=Math.cos(n+t),f=Math.sin(n+t);return[{x:a-o*i,y:o+a*i},{x:h+f*i,y:f-h*i},{x:h,y:f}]}const n1=(n,t,e,i)=>{const a=n*i-t*e<0?-1:1;let o=n*e+t*i;return o>1&&(o=1),o<-1&&(o=-1),a*Math.acos(o)},F4=(n,t,e,i,a,o,h,f,m,g,b,x,E)=>{const T=Math.pow(a,2),R=Math.pow(o,2),D=Math.pow(b,2),C=Math.pow(x,2);let G=T*R-T*C-R*D;G<0&&(G=0),G/=T*C+R*D,G=Math.sqrt(G)*(h===f?-1:1);const P=G*a/o*x,H=G*-o/a*b,q=g*P-m*H+(n+e)/2,et=m*P+g*H+(t+i)/2,ot=(b-P)/a,Y=(x-H)/o,ht=(-b-P)/a,N=(-x-H)/o,X=n1(1,0,ot,Y);let W=n1(ot,Y,ht,N);f===0&&W>0&&(W-=gd),f===1&&W<0&&(W+=gd),E.centerX=q,E.centerY=et,E.ang1=X,E.ang2=W};function XE(n,t,e,i,a,o,h,f=0,m=0,g=0){if(o===0||h===0)return;const b=Math.sin(f*gd/360),x=Math.cos(f*gd/360),E=x*(t-i)/2+b*(e-a)/2,T=-b*(t-i)/2+x*(e-a)/2;if(E===0&&T===0)return;o=Math.abs(o),h=Math.abs(h);const R=Math.pow(E,2)/Math.pow(o,2)+Math.pow(T,2)/Math.pow(h,2);R>1&&(o*=Math.sqrt(R),h*=Math.sqrt(R)),F4(t,e,i,a,o,h,m,g,b,x,E,T,E_);let{ang1:D,ang2:C}=E_;const{centerX:G,centerY:P}=E_;let H=Math.abs(C)/(gd/4);Math.abs(1-H)<1e-7&&(H=1);const q=Math.max(Math.ceil(H),1);C/=q;let et=n[n.length-2],ot=n[n.length-1];const Y={x:0,y:0};for(let ht=0;ht<q;ht++){const N=L4(D,C),{x:X,y:W}=T_(N[0],o,h,x,b,G,P,Y),{x:rt,y:ft}=T_(N[1],o,h,x,b,G,P,Y),{x:St,y:Ct}=T_(N[2],o,h,x,b,G,P,Y);Ab(n,et,ot,X,W,rt,ft,St,Ct),et=St,ot=Ct,D+=C}}function IE(n,t,e){const i=(h,f)=>{const m=f.x-h.x,g=f.y-h.y,b=Math.sqrt(m*m+g*g),x=m/b,E=g/b;return{len:b,nx:x,ny:E}},a=(h,f)=>{h===0?n.moveTo(f.x,f.y):n.lineTo(f.x,f.y)};let o=t[t.length-1];for(let h=0;h<t.length;h++){const f=t[h%t.length],m=f.radius??e;if(m<=0){a(h,f),o=f;continue}const g=t[(h+1)%t.length],b=i(f,o),x=i(f,g);if(b.len<1e-4||x.len<1e-4){a(h,f),o=f;continue}let E=Math.asin(b.nx*x.ny-b.ny*x.nx),T=1,R=!1;b.nx*x.nx-b.ny*-x.ny<0?E<0?E=Math.PI+E:(E=Math.PI-E,T=-1,R=!0):E>0&&(T=-1,R=!0);const D=E/2;let C,G=Math.abs(Math.cos(D)*m/Math.sin(D));G>Math.min(b.len/2,x.len/2)?(G=Math.min(b.len/2,x.len/2),C=Math.abs(G*Math.sin(D)/Math.cos(D))):C=m;const P=f.x+x.nx*G+-x.ny*C*T,H=f.y+x.ny*G+x.nx*C*T,q=Math.atan2(b.ny,b.nx)+Math.PI/2*T,et=Math.atan2(x.ny,x.nx)-Math.PI/2*T;h===0&&n.moveTo(P+Math.cos(q)*C,H+Math.sin(q)*C),n.arc(P,H,C,q,et,R),o=f}}function YE(n,t,e,i){const a=(f,m)=>Math.sqrt((f.x-m.x)**2+(f.y-m.y)**2),o=(f,m,g)=>({x:f.x+(m.x-f.x)*g,y:f.y+(m.y-f.y)*g}),h=t.length;for(let f=0;f<h;f++){const m=t[(f+1)%h],g=m.radius??e;if(g<=0){f===0?n.moveTo(m.x,m.y):n.lineTo(m.x,m.y);continue}const b=t[f],x=t[(f+2)%h],E=a(b,m);let T;if(E<1e-4)T=m;else{const C=Math.min(E/2,g);T=o(m,b,C/E)}const R=a(x,m);let D;if(R<1e-4)D=m;else{const C=Math.min(R/2,g);D=o(m,x,C/R)}f===0?n.moveTo(T.x,T.y):n.lineTo(T.x,T.y),n.quadraticCurveTo(m.x,m.y,D.x,D.y,i)}}const V4=new Ue;class qE{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new $n,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const i=this._currentPoly.points,a=i[i.length-2],o=i[i.length-1];return(a!==t||o!==e)&&i.push(t,e),this}arc(t,e,i,a,o,h){this._ensurePoly(!1);const f=this._currentPoly.points;return Cb(f,t,e,i,a,o,h),this}arcTo(t,e,i,a,o){this._ensurePoly();const h=this._currentPoly.points;return kE(h,t,e,i,a,o),this}arcToSvg(t,e,i,a,o,h,f){const m=this._currentPoly.points;return XE(m,this._currentPoly.lastX,this._currentPoly.lastY,h,f,t,e,i,a,o),this}bezierCurveTo(t,e,i,a,o,h,f){this._ensurePoly();const m=this._currentPoly;return Ab(this._currentPoly.points,m.lastX,m.lastY,t,e,i,a,o,h,f),this}quadraticCurveTo(t,e,i,a,o){this._ensurePoly();const h=this._currentPoly;return VE(this._currentPoly.points,h.lastX,h.lastY,t,e,i,a,o),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));const i=this.shapePrimitives,a=i.length;for(let o=0;o<t.instructions.length;o++){const h=t.instructions[o];this[h.action](...h.data)}if(t.checkForHoles&&i.length-a>1){let o=null;for(let h=a;h<i.length;h++){const f=i[h];if(f.shape.type==="polygon"){const m=f.shape,g=o==null?void 0:o.shape;g&&g.containsPolygon(m)?(o.holes||(o.holes=[]),o.holes.push(f),i.copyWithin(h,h+1),i.length--,h--):o=f}}}return this}finish(t=!1){this.endPoly(t)}rect(t,e,i,a,o){return this.drawShape(new Ue(t,e,i,a),o),this}circle(t,e,i,a){return this.drawShape(new Ng(t,e,i),a),this}poly(t,e,i){const a=new oh(t);return a.closePath=e,this.drawShape(a,i),this}regularPoly(t,e,i,a,o=0,h){a=Math.max(a|0,3);const f=-1*Math.PI/2+o,m=Math.PI*2/a,g=[];for(let b=0;b<a;b++){const x=f-b*m;g.push(t+i*Math.cos(x),e+i*Math.sin(x))}return this.poly(g,!0,h),this}roundPoly(t,e,i,a,o,h=0,f){if(a=Math.max(a|0,3),o<=0)return this.regularPoly(t,e,i,a,h);const m=i*Math.sin(Math.PI/a)-.001;o=Math.min(o,m);const g=-1*Math.PI/2+h,b=Math.PI*2/a,x=(a-2)*Math.PI/a/2;for(let E=0;E<a;E++){const T=E*b+g,R=t+i*Math.cos(T),D=e+i*Math.sin(T),C=T+Math.PI+x,G=T-Math.PI-x,P=R+o*Math.cos(C),H=D+o*Math.sin(C),q=R+o*Math.cos(G),et=D+o*Math.sin(G);E===0?this.moveTo(P,H):this.lineTo(P,H),this.quadraticCurveTo(R,D,q,et,f)}return this.closePath()}roundShape(t,e,i=!1,a){return t.length<3?this:(i?YE(this,t,e,a):IE(this,t,e),this.closePath())}filletRect(t,e,i,a,o){if(o===0)return this.rect(t,e,i,a);const h=Math.min(i,a)/2,f=Math.min(h,Math.max(-h,o)),m=t+i,g=e+a,b=f<0?-f:0,x=Math.abs(f);return this.moveTo(t,e+x).arcTo(t+b,e+b,t+x,e,x).lineTo(m-x,e).arcTo(m-b,e+b,m,e+x,x).lineTo(m,g-x).arcTo(m-b,g-b,t+i-x,g,x).lineTo(t+x,g).arcTo(t+b,g-b,t,g-x,x).closePath()}chamferRect(t,e,i,a,o,h){if(o<=0)return this.rect(t,e,i,a);const f=Math.min(o,Math.min(i,a)/2),m=t+i,g=e+a,b=[t+f,e,m-f,e,m,e+f,m,g-f,m-f,g,t+f,g,t,g-f,t,e+f];for(let x=b.length-1;x>=2;x-=2)b[x]===b[x-2]&&b[x-1]===b[x-3]&&b.splice(x-1,2);return this.poly(b,!0,h)}ellipse(t,e,i,a,o){return this.drawShape(new zg(t,e,i,a),o),this}roundRect(t,e,i,a,o,h){return this.drawShape(new Hg(t,e,i,a,o),h),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),i=new oh,i.points.push(t,e),this._currentPoly=i,this}endPoly(t=!1){const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new oh,t)){const e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let i=e.shape.x,a=e.shape.y;if(e.transform&&!e.transform.isIdentity()){const o=e.transform,h=i;i=o.a*i+o.c*a+o.tx,a=o.b*h+o.d*a+o.ty}this._currentPoly.points.push(i,a)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let i=0;i<e.length;i++){const a=e[i],o=a.shape.getBounds(V4);a.transform?t.addRect(o,a.transform):t.addRect(o)}return t}}class Wu{constructor(t,e=!1){this.instructions=[],this.uid=rn("graphicsPath"),this._dirty=!0,this.checkForHoles=e,typeof t=="string"?eE(t,this):this.instructions=(t==null?void 0:t.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new qE(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,i,a,o){const h=this.instructions[this.instructions.length-1],f=this.getLastPoint(Xe.shared);let m=0,g=0;if(!h||h.action!=="bezierCurveTo")m=f.x,g=f.y;else{m=h.data[2],g=h.data[3];const b=f.x,x=f.y;m=b+(b-m),g=x+(x-g)}return this.instructions.push({action:"bezierCurveTo",data:[m,g,t,e,i,a,o]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,i){const a=this.instructions[this.instructions.length-1],o=this.getLastPoint(Xe.shared);let h=0,f=0;if(!a||a.action!=="quadraticCurveTo")h=o.x,f=o.y;else{h=a.data[0],f=a.data[1];const m=o.x,g=o.y;h=m+(m-h),f=g+(g-f)}return this.instructions.push({action:"quadraticCurveTo",data:[h,f,t,e,i]}),this._dirty=!0,this}rect(t,e,i,a,o){return this.instructions.push({action:"rect",data:[t,e,i,a,o]}),this._dirty=!0,this}circle(t,e,i,a){return this.instructions.push({action:"circle",data:[t,e,i,a]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,i,a,o,h,f){o||(o=a/2);const m=-1*Math.PI/2+h,g=i*2,b=Math.PI*2/g,x=[];for(let E=0;E<g;E++){const T=E%2?o:a,R=E*b+m;x.push(t+T*Math.cos(R),e+T*Math.sin(R))}return this.poly(x,!0,f),this}clone(t=!1){const e=new Wu;if(e.checkForHoles=this.checkForHoles,!t)e.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){const a=this.instructions[i];e.instructions.push({action:a.action,data:a.data.slice()})}return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,i=t.b,a=t.c,o=t.d,h=t.tx,f=t.ty;let m=0,g=0,b=0,x=0,E=0,T=0,R=0,D=0;for(let C=0;C<this.instructions.length;C++){const G=this.instructions[C],P=G.data;switch(G.action){case"moveTo":case"lineTo":m=P[0],g=P[1],P[0]=e*m+a*g+h,P[1]=i*m+o*g+f;break;case"bezierCurveTo":b=P[0],x=P[1],E=P[2],T=P[3],m=P[4],g=P[5],P[0]=e*b+a*x+h,P[1]=i*b+o*x+f,P[2]=e*E+a*T+h,P[3]=i*E+o*T+f,P[4]=e*m+a*g+h,P[5]=i*m+o*g+f;break;case"quadraticCurveTo":b=P[0],x=P[1],m=P[2],g=P[3],P[0]=e*b+a*x+h,P[1]=i*b+o*x+f,P[2]=e*m+a*g+h,P[3]=i*m+o*g+f;break;case"arcToSvg":m=P[5],g=P[6],R=P[0],D=P[1],P[0]=e*R+a*D,P[1]=i*R+o*D,P[5]=e*m+a*g+h,P[6]=i*m+o*g+f;break;case"circle":P[4]=Zf(P[3],t);break;case"rect":P[4]=Zf(P[4],t);break;case"ellipse":P[8]=Zf(P[8],t);break;case"roundRect":P[5]=Zf(P[5],t);break;case"addPath":P[0].transform(t);break;case"poly":P[2]=Zf(P[2],t);break;default:kt("unknown transform action",G.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,i=this.instructions[e];if(!i)return t.x=0,t.y=0,t;for(;i.action==="closePath";){if(e--,e<0)return t.x=0,t.y=0,t;i=this.instructions[e]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t);break}return t}}function Zf(n,t){return n?n.prepend(t):t.clone()}function vn(n,t,e){const i=n.getAttribute(t);return i?Number(i):e}function jE(n,t){const e=n.querySelectorAll("defs");for(let i=0;i<e.length;i++){const a=e[i];for(let o=0;o<a.children.length;o++){const h=a.children[o];switch(h.nodeName.toLowerCase()){case"lineargradient":t.defs[h.id]=k4(h);break;case"radialgradient":t.defs[h.id]=X4();break}}}}function k4(n){const t=vn(n,"x1",0),e=vn(n,"y1",0),i=vn(n,"x2",1),a=vn(n,"y2",0),o=n.getAttribute("gradientUnits")||"objectBoundingBox",h=new Ws(t,e,i,a,o==="objectBoundingBox"?"local":"global");for(let f=0;f<n.children.length;f++){const m=n.children[f],g=vn(m,"offset",0),b=Ce.shared.setValue(m.getAttribute("stop-color")).toNumber();h.addColorStop(g,b)}return h}function X4(n){return kt("[SVG Parser] Radial gradients are not yet supported"),new Ws(0,0,1,0)}function fy(n){const t=n.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const dy={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function Bb(n,t){const e=n.getAttribute("style"),i={},a={},o={strokeStyle:i,fillStyle:a,useFill:!1,useStroke:!1};for(const h in dy){const f=n.getAttribute(h);f&&i1(t,o,h,f.trim())}if(e){const h=e.split(";");for(let f=0;f<h.length;f++){const m=h[f].trim(),[g,b]=m.split(":");dy[g]&&i1(t,o,g,b.trim())}}return{strokeStyle:o.useStroke?i:null,fillStyle:o.useFill?a:null,useFill:o.useFill,useStroke:o.useStroke}}function i1(n,t,e,i){switch(e){case"stroke":if(i!=="none"){if(i.startsWith("url(")){const a=fy(i);t.strokeStyle.fill=n.defs[a]}else t.strokeStyle.color=Ce.shared.setValue(i).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(i);break;case"fill":if(i!=="none"){if(i.startsWith("url(")){const a=fy(i);t.fillStyle.fill=n.defs[a]}else t.fillStyle.color=Ce.shared.setValue(i).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(i);break;case"stroke-opacity":t.strokeStyle.alpha=Number(i);break;case"opacity":t.fillStyle.alpha=Number(i),t.strokeStyle.alpha=Number(i);break}}function KE(n,t){if(typeof n=="string"){const h=document.createElement("div");h.innerHTML=n.trim(),n=h.querySelector("svg")}const e={context:t,defs:{},path:new Wu};jE(n,e);const i=n.children,{fillStyle:a,strokeStyle:o}=Bb(n,e);for(let h=0;h<i.length;h++){const f=i[h];f.nodeName.toLowerCase()!=="defs"&&WE(f,e,a,o)}return t}function WE(n,t,e,i){const a=n.children,{fillStyle:o,strokeStyle:h}=Bb(n,t);o&&e?e={...e,...o}:o&&(e=o),h&&i?i={...i,...h}:h&&(i=h);const f=!e&&!i;f&&(e={color:0});let m,g,b,x,E,T,R,D,C,G,P,H,q,et,ot,Y,ht;switch(n.nodeName.toLowerCase()){case"path":et=n.getAttribute("d"),n.getAttribute("fill-rule")==="evenodd"&&kt("SVG Evenodd fill rule not supported, your svg may render incorrectly"),ot=new Wu(et,!0),t.context.path(ot),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"circle":R=vn(n,"cx",0),D=vn(n,"cy",0),C=vn(n,"r",0),t.context.ellipse(R,D,C,C),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"rect":m=vn(n,"x",0),g=vn(n,"y",0),Y=vn(n,"width",0),ht=vn(n,"height",0),G=vn(n,"rx",0),P=vn(n,"ry",0),G||P?t.context.roundRect(m,g,Y,ht,G||P):t.context.rect(m,g,Y,ht),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"ellipse":R=vn(n,"cx",0),D=vn(n,"cy",0),G=vn(n,"rx",0),P=vn(n,"ry",0),t.context.beginPath(),t.context.ellipse(R,D,G,P),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"line":b=vn(n,"x1",0),x=vn(n,"y1",0),E=vn(n,"x2",0),T=vn(n,"y2",0),t.context.beginPath(),t.context.moveTo(b,x),t.context.lineTo(E,T),i&&t.context.stroke(i);break;case"polygon":q=n.getAttribute("points"),H=q.match(/\d+/g).map(N=>parseInt(N,10)),t.context.poly(H,!0),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"polyline":q=n.getAttribute("points"),H=q.match(/\d+/g).map(N=>parseInt(N,10)),t.context.poly(H,!1),i&&t.context.stroke(i);break;case"g":case"svg":break;default:{kt(`[SVG parser] <${n.nodeName}> elements unsupported`);break}}f&&(e=null);for(let N=0;N<a.length;N++)WE(a[N],t,e,i)}function I4(n){return Ce.isColorLike(n)}function r1(n){return n instanceof Ld}function a1(n){return n instanceof Ws}function Y4(n){return n instanceof At}function q4(n,t,e){const i=Ce.shared.setValue(t??0);return n.color=i.toNumber(),n.alpha=i.alpha===1?e.alpha:i.alpha,n.texture=At.WHITE,{...e,...n}}function j4(n,t,e){return n.texture=t,{...e,...n}}function s1(n,t,e){return n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,{...e,...n}}function l1(n,t,e){return t.buildGradient(),n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,n.textureSpace=t.textureSpace,{...e,...n}}function K4(n,t){const e={...t,...n},i=Ce.shared.setValue(e.color);return e.alpha*=i.alpha,e.color=i.toNumber(),e}function Lo(n,t){if(n==null)return null;const e={},i=n;return I4(n)?q4(e,n,t):Y4(n)?j4(e,n,t):r1(n)?s1(e,n,t):a1(n)?l1(e,n,t):i.fill&&r1(i.fill)?s1(i,i.fill,t):i.fill&&a1(i.fill)?l1(i,i.fill,t):K4(i,t)}function Dd(n,t){const{width:e,alignment:i,miterLimit:a,cap:o,join:h,pixelLine:f,...m}=t,g=Lo(n,m);return g?{width:e,alignment:i,miterLimit:a,cap:o,join:h,pixelLine:f,...g}:null}const W4=new Xe,o1=new Gt,Rb=class Ys extends Rr{constructor(){super(...arguments),this.uid=rn("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Wu,this._transform=new Gt,this._fillStyle={...Ys.defaultFillStyle},this._strokeStyle={...Ys.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new $n,this._boundsDirty=!0}clone(){const t=new Ys;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=Lo(t,Ys.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=Dd(t,Ys.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=Lo(t,Ys.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=Lo(t,Ys.defaultStrokeStyle),this}texture(t,e,i,a,o,h){return this.instructions.push({action:"texture",data:{image:t,dx:i||0,dy:a||0,dw:o||t.frame.width,dh:h||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?Ce.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Wu,this}fill(t,e){let i;const a=this.instructions[this.instructions.length-1];return this._tick===0&&a&&a.action==="stroke"?i=a.data.path:i=this._activePath.clone(),i?(t!=null&&(e!==void 0&&typeof t=="number"&&(wt(Jt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:e}),this._fillStyle=Lo(t,Ys.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(Xe.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(t){let e;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?e=i.data.path:e=this._activePath.clone(),e?(t!=null&&(this._strokeStyle=Dd(t,Ys.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:e}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(e&&(e.action==="stroke"||e.action==="fill"))if(e.data.hole)e.data.hole.addPath(i);else{e.data.hole=i;break}}return this._initNextPathLocation(),this}arc(t,e,i,a,o,h){this._tick++;const f=this._transform;return this._activePath.arc(f.a*t+f.c*e+f.tx,f.b*t+f.d*e+f.ty,i,a,o,h),this}arcTo(t,e,i,a,o){this._tick++;const h=this._transform;return this._activePath.arcTo(h.a*t+h.c*e+h.tx,h.b*t+h.d*e+h.ty,h.a*i+h.c*a+h.tx,h.b*i+h.d*a+h.ty,o),this}arcToSvg(t,e,i,a,o,h,f){this._tick++;const m=this._transform;return this._activePath.arcToSvg(t,e,i,a,o,m.a*h+m.c*f+m.tx,m.b*h+m.d*f+m.ty),this}bezierCurveTo(t,e,i,a,o,h,f){this._tick++;const m=this._transform;return this._activePath.bezierCurveTo(m.a*t+m.c*e+m.tx,m.b*t+m.d*e+m.ty,m.a*i+m.c*a+m.tx,m.b*i+m.d*a+m.ty,m.a*o+m.c*h+m.tx,m.b*o+m.d*h+m.ty,f),this}closePath(){var t;return this._tick++,(t=this._activePath)==null||t.closePath(),this}ellipse(t,e,i,a){return this._tick++,this._activePath.ellipse(t,e,i,a,this._transform.clone()),this}circle(t,e,i){return this._tick++,this._activePath.circle(t,e,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty),this}moveTo(t,e){this._tick++;const i=this._transform,a=this._activePath.instructions,o=i.a*t+i.c*e+i.tx,h=i.b*t+i.d*e+i.ty;return a.length===1&&a[0].action==="moveTo"?(a[0].data[0]=o,a[0].data[1]=h,this):(this._activePath.moveTo(o,h),this)}quadraticCurveTo(t,e,i,a,o){this._tick++;const h=this._transform;return this._activePath.quadraticCurveTo(h.a*t+h.c*e+h.tx,h.b*t+h.d*e+h.ty,h.a*i+h.c*a+h.tx,h.b*i+h.d*a+h.ty,o),this}rect(t,e,i,a){return this._tick++,this._activePath.rect(t,e,i,a,this._transform.clone()),this}roundRect(t,e,i,a,o){return this._tick++,this._activePath.roundRect(t,e,i,a,o,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,i,a,o=0,h){return this._tick++,this._activePath.regularPoly(t,e,i,a,o,h),this}roundPoly(t,e,i,a,o,h){return this._tick++,this._activePath.roundPoly(t,e,i,a,o,h),this}roundShape(t,e,i,a){return this._tick++,this._activePath.roundShape(t,e,i,a),this}filletRect(t,e,i,a,o){return this._tick++,this._activePath.filletRect(t,e,i,a,o),this}chamferRect(t,e,i,a,o,h){return this._tick++,this._activePath.chamferRect(t,e,i,a,o,h),this}star(t,e,i,a,o=0,h=0){return this._tick++,this._activePath.star(t,e,i,a,o,h,this._transform.clone()),this}svg(t){return this._tick++,KE(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,i,a,o,h){return t instanceof Gt?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,i,a,o,h),this)}transform(t,e,i,a,o,h){return t instanceof Gt?(this._transform.append(t),this):(o1.set(t,e,i,a,o,h),this._transform.append(o1),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const i=this.instructions[e],a=i.action;if(a==="fill"){const o=i.data;t.addBounds(o.path.bounds)}else if(a==="texture"){const o=i.data;t.addFrame(o.dx,o.dy,o.dx+o.dw,o.dy+o.dh,o.transform)}if(a==="stroke"){const o=i.data,h=o.style.alignment,f=o.style.width*(1-h),m=o.path.bounds;t.addFrame(m.minX-f,m.minY-f,m.maxX+f,m.maxY+f)}}return t}containsPoint(t){var a;if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let i=!1;for(let o=0;o<e.length;o++){const h=e[o],f=h.data,m=f.path;if(!h.action||!m)continue;const g=f.style,b=m.shapePath.shapePrimitives;for(let x=0;x<b.length;x++){const E=b[x].shape;if(!g||!E)continue;const T=b[x].transform,R=T?T.applyInverse(t,W4):t;if(h.action==="fill")i=E.contains(R.x,R.y);else{const C=g;i=E.strokeContains(R.x,R.y,C.width,C.alignment)}const D=f.hole;if(D){const C=(a=D.shapePath)==null?void 0:a.shapePrimitives;if(C)for(let G=0;G<C.length;G++)C[G].shape.contains(R.x,R.y)&&(i=!1)}if(i)return!0}}return i}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(i),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(i)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Rb.defaultFillStyle={color:16777215,alpha:1,texture:At.WHITE,matrix:null,fill:null,textureSpace:"local"};Rb.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:At.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let er=Rb;const u1=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function QE(n){const t=[];let e=0;for(let i=0;i<u1.length;i++){const a=`_${u1[i]}`;t[e++]=n[a]}return e=ZE(n._fill,t,e),e=Z4(n._stroke,t,e),e=J4(n.dropShadow,t,e),e=Q4(n.filters,t,e),t.join("-")}function Q4(n,t,e){if(!n)return e;for(const i of n)t[e++]=i.uid;return e}function ZE(n,t,e){var i;return n&&(t[e++]=n.color,t[e++]=n.alpha,t[e++]=(i=n.fill)==null?void 0:i.styleKey),e}function Z4(n,t,e){return n&&(e=ZE(n,t,e),t[e++]=n.width,t[e++]=n.alignment,t[e++]=n.cap,t[e++]=n.join,t[e++]=n.miterLimit),e}function J4(n,t,e){return n&&(t[e++]=n.alpha,t[e++]=n.angle,t[e++]=n.blur,t[e++]=n.distance,t[e++]=Ce.shared.setValue(n.color).toNumber()),e}const Mb=class nh extends Rr{constructor(t={}){super(),$4(t);const e={...nh.defaultTextStyle,...t};for(const i in e){const a=i;this[a]=e[i]}this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(t){t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...nh.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...nh.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get filters(){return this._filters}set filters(t){this._filters=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...er.defaultFillStyle,...t},()=>{this._fill=Lo({...this._originalFill},er.defaultFillStyle)})),this._fill=Lo(t===0?"black":t,er.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...er.defaultStrokeStyle,...t},()=>{this._stroke=Dd({...this._originalStroke},er.defaultStrokeStyle)})),this._stroke=Dd(t,er.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=QE(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const t=nh.defaultTextStyle;for(const e in t)this[e]=t[e]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new nh({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let t=0;if(this._filters)for(let e=0;e<this._filters.length;e++)t+=this._filters[e].padding;return Math.max(this._padding,t)}destroy(t=!1){var i,a,o,h;if(this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const f=typeof t=="boolean"?t:t==null?void 0:t.textureSource;(i=this._fill)!=null&&i.texture&&this._fill.texture.destroy(f),(a=this._originalFill)!=null&&a.texture&&this._originalFill.texture.destroy(f),(o=this._stroke)!=null&&o.texture&&this._stroke.texture.destroy(f),(h=this._originalStroke)!=null&&h.texture&&this._originalStroke.texture.destroy(f)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(i,a,o)=>(i[a]=o,e==null||e(a,o),this.update(),!0)})}_isFillStyle(t){return(t??null)!==null&&!(Ce.isColorLike(t)||t instanceof Ws||t instanceof Ld)}};Mb.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};Mb.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Br=Mb;function $4(n){const t=n;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const e=Br.defaultDropShadow;n.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(t.strokeThickness!==void 0){wt(Jt,"strokeThickness is now a part of stroke");const e=t.stroke;let i={};if(Ce.isColorLike(e))i.color=e;else if(e instanceof Ws||e instanceof Ld)i.fill=e;else if(Object.hasOwnProperty.call(e,"color")||Object.hasOwnProperty.call(e,"fill"))i=e;else throw new Error("Invalid stroke value.");n.stroke={...i,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){wt(Jt,"gradient fill is now a fill pattern: `new FillGradient(...)`");let e;n.fontSize==null?n.fontSize=Br.defaultTextStyle.fontSize:typeof n.fontSize=="string"?e=parseInt(n.fontSize,10):e=n.fontSize;const i=new Ws({start:{x:0,y:0},end:{x:0,y:(e||0)*1.7}}),a=t.fillGradientStops.map(o=>Ce.shared.setValue(o).toNumber());a.forEach((o,h)=>{const f=h/(a.length-1);i.addColorStop(f,o)}),n.fill={fill:i}}}class JE{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,e){const i=me.get().createCanvas();i.width=t,i.height=e;const a=i.getContext("2d");return{canvas:i,context:a}}getOptimalCanvasAndContext(t,e,i=1){t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6),t=ju(t),e=ju(e);const a=(t<<17)+(e<<1);this._canvasPool[a]||(this._canvasPool[a]=[]);let o=this._canvasPool[a].pop();return o||(o=this._createCanvasAndContext(t,e)),o}returnCanvasAndContext(t){const e=t.canvas,{width:i,height:a}=e,o=(i<<17)+(a<<1);t.context.clearRect(0,0,i,a),this._canvasPool[o].push(t)}clear(){this._canvasPool={}}}const Ll=new JE,c1=1e5;function wd(n,t,e,i=0){if(n.texture===At.WHITE&&!n.fill)return Ce.shared.setValue(n.color).setAlpha(n.alpha??1).toHexa();if(n.fill){if(n.fill instanceof Ld){const a=n.fill,o=t.createPattern(a.texture.source.resource,"repeat"),h=a.transform.copyTo(Gt.shared);return h.scale(a.texture.frame.width,a.texture.frame.height),o.setTransform(h),o}else if(n.fill instanceof Ws){const a=n.fill,o=a.type==="linear",h=a.textureSpace==="local";let f=1,m=1;h&&e&&(f=e.width+i,m=e.height+i);let g,b=!1;if(o){const{start:x,end:E}=a;g=t.createLinearGradient(x.x*f,x.y*m,E.x*f,E.y*m),b=Math.abs(E.x-x.x)<Math.abs((E.y-x.y)*.1)}else{const{center:x,innerRadius:E,outerCenter:T,outerRadius:R}=a;g=t.createRadialGradient(x.x*f,x.y*m,E*f,T.x*f,T.y*m,R*f)}if(b&&h&&e){const x=e.lineHeight/m;for(let E=0;E<e.lines.length;E++){const T=(E*e.lineHeight+i/2)/m;a.colorStops.forEach(R=>{const D=T+R.offset*x;g.addColorStop(Math.floor(D*c1)/c1,Ce.shared.setValue(R.color).toHex())})}}else a.colorStops.forEach(x=>{g.addColorStop(x.offset,Ce.shared.setValue(x.color).toHex())});return g}}else{const a=t.createPattern(n.texture.source.resource,"repeat"),o=n.matrix.copyTo(Gt.shared);return o.scale(n.texture.frame.width,n.texture.frame.height),a.setTransform(o),a}return kt("FillStyle not recognised",n),"red"}const $E=class tT extends gb{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const e={...tT.defaultOptions,...t};this._textureSize=e.textureSize,this._mipmap=e.mipmap;const i=e.style.clone();e.overrideFill&&(i._fill.color=16777215,i._fill.alpha=1,i._fill.texture=At.WHITE,i._fill.fill=null),this.applyFillAsTint=e.overrideFill;const a=i.fontSize;i.fontSize=this.baseMeasurementFontSize;const o=Md(i);e.overrideSize?i._stroke&&(i._stroke.width*=this.baseRenderedFontSize/a):i.fontSize=this.baseRenderedFontSize=a,this._style=i,this._skipKerning=e.skipKerning??!1,this.resolution=e.resolution??1,this._padding=e.padding??4,e.textureStyle&&(this._textureStyle=e.textureStyle instanceof ba?e.textureStyle:new ba(e.textureStyle)),this.fontMetrics=ga.measureFont(o),this.lineHeight=i.lineHeight||this.fontMetrics.fontSize||i.fontSize}ensureCharacters(t){var C,G;const e=ga.graphemeSegmenter(t).filter(P=>!this._currentChars.includes(P)).filter((P,H,q)=>q.indexOf(P)===H);if(!e.length)return;this._currentChars=[...this._currentChars,...e];let i;this._currentPageIndex===-1?i=this._nextPage():i=this.pages[this._currentPageIndex];let{canvas:a,context:o}=i.canvasAndContext,h=i.texture.source;const f=this._style;let m=this._currentX,g=this._currentY,b=this._currentMaxCharHeight;const x=this.baseRenderedFontSize/this.baseMeasurementFontSize,E=this._padding*x;let T=!1;const R=a.width/this.resolution,D=a.height/this.resolution;for(let P=0;P<e.length;P++){const H=e[P],q=ga.measureText(H,f,a,!1);q.lineHeight=q.height;const et=q.width*x,ot=Math.ceil((f.fontStyle==="italic"?2:1)*et),Y=q.height*x,ht=ot+E*2,N=Y+E*2;if(T=!1,H!==`
`&&H!=="\r"&&H!=="	"&&H!==" "&&(T=!0,b=Math.ceil(Math.max(N,b))),m+ht>R&&(g+=b,b=N,m=0,g+b>D)){h.update();const W=this._nextPage();a=W.canvasAndContext.canvas,o=W.canvasAndContext.context,h=W.texture.source,m=0,g=0,b=0}const X=et/x-(((C=f.dropShadow)==null?void 0:C.distance)??0)-(((G=f._stroke)==null?void 0:G.width)??0);if(this.chars[H]={id:H.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:X,kerning:{}},T){this._drawGlyph(o,q,m+E,g+E,x,f);const W=h.width*x,rt=h.height*x,ft=new Ue(m/W*h.width,g/rt*h.height,ht/W*h.width,N/rt*h.height);this.chars[H].texture=new At({source:h,frame:ft}),m+=Math.ceil(ht)}}h.update(),this._currentX=m,this._currentY=g,this._currentMaxCharHeight=b,this._skipKerning&&this._applyKerning(e,o)}get pageTextures(){return wt(Jt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){const i=this._measureCache;for(let a=0;a<t.length;a++){const o=t[a];for(let h=0;h<this._currentChars.length;h++){const f=this._currentChars[h];let m=i[o];m||(m=i[o]=e.measureText(o).width);let g=i[f];g||(g=i[f]=e.measureText(f).width);let b=e.measureText(o+f).width,x=b-(m+g);x&&(this.chars[o].kerning[f]=x),b=e.measureText(o+f).width,x=b-(m+g),x&&(this.chars[f].kerning[o]=x)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,e=Ll.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(e.context,this._style,t);const i=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),a=new At({source:new Vo({resource:e.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(a.source.style=this._textureStyle);const o={canvasAndContext:e,texture:a};return this.pages[this._currentPageIndex]=o,o}_setupContext(t,e,i){e.fontSize=this.baseRenderedFontSize,t.scale(i,i),t.font=Md(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;const a=e._stroke,o=(a==null?void 0:a.width)??0;if(a&&(t.lineWidth=o,t.lineJoin=a.join,t.miterLimit=a.miterLimit,t.strokeStyle=wd(a,t)),e._fill&&(t.fillStyle=wd(e._fill,t)),e.dropShadow){const h=e.dropShadow,f=Ce.shared.setValue(h.color).toArray(),m=h.blur*i,g=h.distance*i;t.shadowColor=`rgba(${f[0]*255},${f[1]*255},${f[2]*255},${h.alpha})`,t.shadowBlur=m,t.shadowOffsetX=Math.cos(h.angle)*g,t.shadowOffsetY=Math.sin(h.angle)*g}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,i,a,o,h){const f=e.text,m=e.fontProperties,g=h._stroke,b=((g==null?void 0:g.width)??0)*o,x=i+b/2,E=a-b/2,T=m.descent*o,R=e.lineHeight*o;h.stroke&&b&&t.strokeText(f,x,E+R-T),h._fill&&t.fillText(f,x,E+R-T)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:e,texture:i}=this.pages[t];Ll.returnCanvasAndContext(e),i.destroy(!0)}this.pages=null}};$E.defaultOptions={textureSize:512,style:new Br,mipmap:!0};let py=$E;function Db(n,t,e,i){const a={width:0,height:0,offsetY:0,scale:t.fontSize/e.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};a.offsetY=e.baseLineOffset;let o=a.lines[0],h=null,f=!0;const m={width:0,start:0,index:0,positions:[],chars:[]},g=R=>{const D=o.width;for(let C=0;C<m.index;C++){const G=R.positions[C];o.chars.push(R.chars[C]),o.charPositions.push(G+D)}o.width+=R.width,f=!1,m.width=0,m.index=0,m.chars.length=0},b=()=>{let R=o.chars.length-1;if(i){let D=o.chars[R];for(;D===" ";)o.width-=e.chars[D].xAdvance,D=o.chars[--R]}a.width=Math.max(a.width,o.width),o={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},f=!0,a.lines.push(o),a.height+=e.lineHeight},x=e.baseMeasurementFontSize/t.fontSize,E=t.letterSpacing*x,T=t.wordWrapWidth*x;for(let R=0;R<n.length+1;R++){let D;const C=R===n.length;C||(D=n[R]);const G=e.chars[D]||e.chars[" "];if(/(?:\s)/.test(D)||D==="\r"||D===`
`||C){if(!f&&t.wordWrap&&o.width+m.width-E>T?(b(),g(m),C||o.charPositions.push(0)):(m.start=o.width,g(m),C||o.charPositions.push(0)),D==="\r"||D===`
`)o.width!==0&&b();else if(!C){const et=G.xAdvance+(G.kerning[h]||0)+E;o.width+=et,o.spaceWidth=et,o.spacesIndex.push(o.charPositions.length),o.chars.push(D)}}else{const q=G.kerning[h]||0,et=G.xAdvance+q+E;m.positions[m.index++]=m.width+q,m.chars.push(D),m.width+=et}h=D}return b(),t.align==="center"?tw(a):t.align==="right"?ew(a):t.align==="justify"&&nw(a),a}function tw(n){for(let t=0;t<n.lines.length;t++){const e=n.lines[t],i=n.width/2-e.width/2;for(let a=0;a<e.charPositions.length;a++)e.charPositions[a]+=i}}function ew(n){for(let t=0;t<n.lines.length;t++){const e=n.lines[t],i=n.width-e.width;for(let a=0;a<e.charPositions.length;a++)e.charPositions[a]+=i}}function nw(n){const t=n.width;for(let e=0;e<n.lines.length;e++){const i=n.lines[e];let a=0,o=i.spacesIndex[a++],h=0;const f=i.spacesIndex.length,g=(t-i.width)/f;for(let b=0;b<i.charPositions.length;b++)b===o&&(o=i.spacesIndex[a++],h+=g),i.charPositions[b]+=h}}function eT(n){if(n==="")return[];typeof n=="string"&&(n=[n]);const t=[];for(let e=0,i=n.length;e<i;e++){const a=n[e];if(Array.isArray(a)){if(a.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${a.length}.`);if(a[0].length===0||a[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const o=a[0].charCodeAt(0),h=a[1].charCodeAt(0);if(h<o)throw new Error("[BitmapFont]: Invalid character range.");for(let f=o,m=h;f<=m;f++)t.push(String.fromCharCode(f))}else t.push(...Array.from(a))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}let Vm=0;class iw{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null}}getFont(t,e){var h;let i=`${e.fontFamily}-bitmap`,a=!0;if(e._fill.fill&&!e._stroke)i+=e._fill.fill.styleKey,a=!1;else if(e._stroke||e.dropShadow){let f=e.styleKey;f=f.substring(0,f.lastIndexOf("-")),i=`${f}-bitmap`,a=!1}if(!Qe.has(i)){const f=new py({style:e,overrideFill:a,overrideSize:!0,...this.defaultOptions});Vm++,Vm>50&&kt("BitmapText",`You have dynamically created ${Vm} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),f.once("destroy",()=>{Vm--,Qe.remove(i)}),Qe.set(i,f)}const o=Qe.get(i);return(h=o.ensureCharacters)==null||h.call(o,t),o}getLayout(t,e,i=!0){const a=this.getFont(t,e),o=ga.graphemeSegmenter(t);return Db(o,e,a,i)}measureText(t,e,i=!0){return this.getLayout(t,e,i)}install(...t){var g,b,x,E;let e=t[0];typeof e=="string"&&(e={name:e,style:t[1],chars:(g=t[2])==null?void 0:g.chars,resolution:(b=t[2])==null?void 0:b.resolution,padding:(x=t[2])==null?void 0:x.padding,skipKerning:(E=t[2])==null?void 0:E.skipKerning},wt(Jt,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const i=e==null?void 0:e.name;if(!i)throw new Error("[BitmapFontManager] Property `name` is required.");e={...this.defaultOptions,...e};const a=e.style,o=a instanceof Br?a:new Br(a),h=o._fill.fill!==null&&o._fill.fill!==void 0,f=new py({style:o,overrideFill:h,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1,textureStyle:e.textureStyle}),m=eT(e.chars);return f.ensureCharacters(m.join("")),Qe.set(`${i}-bitmap`,f),f.once("destroy",()=>Qe.remove(`${i}-bitmap`)),f}uninstall(t){const e=`${t}-bitmap`,i=Qe.get(e);i&&i.destroy()}}const Ud=new iw;class wb extends gb{constructor(t,e){super();const{textures:i,data:a}=t;Object.keys(a.pages).forEach(o=>{const h=a.pages[parseInt(o,10)],f=i[h.id];this.pages.push({texture:f})}),Object.keys(a.chars).forEach(o=>{const h=a.chars[o],{frame:f,source:m}=i[h.page],g=new Ue(h.x+f.x,h.y+f.y,h.width,h.height),b=new At({source:m,frame:g});this.chars[o]={id:o.codePointAt(0),xOffset:h.xOffset,yOffset:h.yOffset,xAdvance:h.xAdvance,kerning:h.kerning??{},texture:b}}),this.baseRenderedFontSize=a.fontSize,this.baseMeasurementFontSize=a.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:a.fontSize},this.baseLineOffset=a.baseLineOffset,this.lineHeight=a.lineHeight,this.fontFamily=a.fontFamily,this.distanceField=a.distanceField??{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){Ud.install(t)}static uninstall(t){Ud.uninstall(t)}}const eg={test(n){return typeof n=="string"&&n.startsWith("info face=")},parse(n){const t=n.match(/^[a-z]+\s+.+$/gm),e={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const x in t){const E=t[x].match(/^[a-z]+/gm)[0],T=t[x].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),R={};for(const D in T){const C=T[D].split("="),G=C[0],P=C[1].replace(/"/gm,""),H=parseFloat(P),q=isNaN(H)?P:H;R[G]=q}e[E].push(R)}const i={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[a]=e.info,[o]=e.common,[h]=e.distanceField??[];h&&(i.distanceField={range:parseInt(h.distanceRange,10),type:h.fieldType}),i.fontSize=parseInt(a.size,10),i.fontFamily=a.face,i.lineHeight=parseInt(o.lineHeight,10);const f=e.page;for(let x=0;x<f.length;x++)i.pages.push({id:parseInt(f[x].id,10)||0,file:f[x].file});const m={};i.baseLineOffset=i.lineHeight-parseInt(o.base,10);const g=e.char;for(let x=0;x<g.length;x++){const E=g[x],T=parseInt(E.id,10);let R=E.letter??E.char??String.fromCharCode(T);R==="space"&&(R=" "),m[T]=R,i.chars[R]={id:T,page:parseInt(E.page,10)||0,x:parseInt(E.x,10),y:parseInt(E.y,10),width:parseInt(E.width,10),height:parseInt(E.height,10),xOffset:parseInt(E.xoffset,10),yOffset:parseInt(E.yoffset,10),xAdvance:parseInt(E.xadvance,10),kerning:{}}}const b=e.kerning||[];for(let x=0;x<b.length;x++){const E=parseInt(b[x].first,10),T=parseInt(b[x].second,10),R=parseInt(b[x].amount,10);i.chars[m[T]].kerning[m[E]]=R}return i}},my={test(n){const t=n;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(n){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},e=n.getElementsByTagName("info")[0],i=n.getElementsByTagName("common")[0],a=n.getElementsByTagName("distanceField")[0];a&&(t.distanceField={type:a.getAttribute("fieldType"),range:parseInt(a.getAttribute("distanceRange"),10)});const o=n.getElementsByTagName("page"),h=n.getElementsByTagName("char"),f=n.getElementsByTagName("kerning");t.fontSize=parseInt(e.getAttribute("size"),10),t.fontFamily=e.getAttribute("face"),t.lineHeight=parseInt(i.getAttribute("lineHeight"),10);for(let g=0;g<o.length;g++)t.pages.push({id:parseInt(o[g].getAttribute("id"),10)||0,file:o[g].getAttribute("file")});const m={};t.baseLineOffset=t.lineHeight-parseInt(i.getAttribute("base"),10);for(let g=0;g<h.length;g++){const b=h[g],x=parseInt(b.getAttribute("id"),10);let E=b.getAttribute("letter")??b.getAttribute("char")??String.fromCharCode(x);E==="space"&&(E=" "),m[x]=E,t.chars[E]={id:x,page:parseInt(b.getAttribute("page"),10)||0,x:parseInt(b.getAttribute("x"),10),y:parseInt(b.getAttribute("y"),10),width:parseInt(b.getAttribute("width"),10),height:parseInt(b.getAttribute("height"),10),xOffset:parseInt(b.getAttribute("xoffset"),10),yOffset:parseInt(b.getAttribute("yoffset"),10),xAdvance:parseInt(b.getAttribute("xadvance"),10),kerning:{}}}for(let g=0;g<f.length;g++){const b=parseInt(f[g].getAttribute("first"),10),x=parseInt(f[g].getAttribute("second"),10),E=parseInt(f[g].getAttribute("amount"),10);t.chars[m[x]].kerning[m[b]]=E}return t}},gy={test(n){return typeof n=="string"&&n.includes("<font>")?my.test(me.get().parseXML(n)):!1},parse(n){return my.parse(me.get().parseXML(n))}},rw=[".xml",".fnt"],nT={extension:{type:I.CacheParser,name:"cacheBitmapFont"},test:n=>n instanceof wb,getCacheableAssets(n,t){const e={};return n.forEach(i=>{e[i]=t,e[`${i}-bitmap`]=t}),e[`${t.fontFamily}-bitmap`]=t,e}},iT={extension:{type:I.LoadParser,priority:Yr.Normal},name:"loadBitmapFont",test(n){return rw.includes(Tr.extname(n).toLowerCase())},async testParse(n){return eg.test(n)||gy.test(n)},async parse(n,t,e){const i=eg.test(n)?eg.parse(n):gy.parse(n),{src:a}=t,{pages:o}=i,h=[],f=i.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let x=0;x<o.length;++x){const E=o[x].file;let T=Tr.join(Tr.dirname(a),E);T=og(T,a),h.push({src:T,data:f})}const m=await e.load(h),g=h.map(x=>m[x.src]);return new wb({data:i,textures:g},a)},async load(n,t){return await(await me.get().fetch(n)).text()},async unload(n,t,e){await Promise.all(n.pages.map(i=>e.unload(i.texture.source._sourceOrigin))),n.destroy()}};class rT{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}const aT={extension:{type:I.CacheParser,name:"cacheTextureArray"},test:n=>Array.isArray(n)&&n.every(t=>t instanceof At),getCacheableAssets:(n,t)=>{const e={};return n.forEach(i=>{t.forEach((a,o)=>{e[i+(o===0?"":o+1)]=a})}),e}};async function Ub(n){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(n)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const sT={extension:{type:I.DetectionParser,priority:1},test:async()=>Ub("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(t=>t!=="avif")},h1=["png","jpg","jpeg"],lT={extension:{type:I.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...h1],remove:async n=>n.filter(t=>!h1.includes(t))},aw="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function jg(n){return aw?!1:document.createElement("video").canPlayType(n)!==""}const oT={extension:{type:I.DetectionParser,priority:0},test:async()=>jg("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(t=>t!=="mp4"&&t!=="m4v")},uT={extension:{type:I.DetectionParser,priority:0},test:async()=>jg("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(t=>t!=="ogv")},cT={extension:{type:I.DetectionParser,priority:0},test:async()=>jg("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(t=>t!=="webm")},hT={extension:{type:I.DetectionParser,priority:0},test:async()=>Ub("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(t=>t!=="webp")};class fT{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,i)=>(this._parsersValidated=!1,t[e]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const i={promise:null,parser:null};return i.promise=(async()=>{var h,f;let a=null,o=null;if(e.loadParser&&(o=this._parserHash[e.loadParser],o||kt(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!o){for(let m=0;m<this.parsers.length;m++){const g=this.parsers[m];if(g.load&&((h=g.test)!=null&&h.call(g,t,e,this))){o=g;break}}if(!o)return kt(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}a=await o.load(t,e,this),i.parser=o;for(let m=0;m<this.parsers.length;m++){const g=this.parsers[m];g.parse&&g.parse&&await((f=g.testParse)==null?void 0:f.call(g,a,e,this))&&(a=await g.parse(a,e,this)||a,i.parser=g)}return a})(),i}async load(t,e){this._parsersValidated||this._validateParsers();let i=0;const a={},o=Td(t),h=ma(t,g=>({alias:[g],src:g,data:{}})),f=h.length,m=h.map(async g=>{const b=Tr.toAbsolute(g.src);if(!a[g.src])try{this.promiseCache[b]||(this.promiseCache[b]=this._getLoadPromiseAndParser(b,g)),a[g.src]=await this.promiseCache[b].promise,e&&e(++i/f)}catch(x){throw delete this.promiseCache[b],delete a[g.src],new Error(`[Loader.load] Failed to load ${b}.
${x}`)}});return await Promise.all(m),o?a[h[0].src]:a}async unload(t){const i=ma(t,a=>({alias:[a],src:a})).map(async a=>{var f,m;const o=Tr.toAbsolute(a.src),h=this.promiseCache[o];if(h){const g=await h.promise;delete this.promiseCache[o],await((m=(f=h.parser)==null?void 0:f.unload)==null?void 0:m.call(f,g,a,this))}});await Promise.all(i)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(e.name?t[e.name]&&kt(`[Assets] loadParser name conflict "${e.name}"`):kt("[Assets] loadParser should have a name"),{...t,[e.name]:e}),{})}}function $u(n,t){if(Array.isArray(t)){for(const e of t)if(n.startsWith(`data:${e}`))return!0;return!1}return n.startsWith(`data:${t}`)}function va(n,t){const e=n.split("?")[0],i=Tr.extname(e).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}const sw=".json",lw="application/json",dT={extension:{type:I.LoadParser,priority:Yr.Low},name:"loadJson",test(n){return $u(n,lw)||va(n,sw)},async load(n){return await(await me.get().fetch(n)).json()}},ow=".txt",uw="text/plain",pT={name:"loadTxt",extension:{type:I.LoadParser,priority:Yr.Low,name:"loadTxt"},test(n){return $u(n,uw)||va(n,ow)},async load(n){return await(await me.get().fetch(n)).text()}},cw=["normal","bold","100","200","300","400","500","600","700","800","900"],hw=[".ttf",".otf",".woff",".woff2"],fw=["font/ttf","font/otf","font/woff","font/woff2"],dw=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function mT(n){const t=Tr.extname(n),a=Tr.basename(n,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1));let o=a.length>0;for(const f of a)if(!f.match(dw)){o=!1;break}let h=a.join(" ");return o||(h=`"${h.replace(/[\\"]/g,"\\$&")}"`),h}const pw=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function mw(n){return pw.test(n)?n:encodeURI(n)}const gT={extension:{type:I.LoadParser,priority:Yr.Low},name:"loadWebFont",test(n){return $u(n,fw)||va(n,hw)},async load(n,t){var i,a,o;const e=me.get().getFontFaceSet();if(e){const h=[],f=((i=t.data)==null?void 0:i.family)??mT(n),m=((o=(a=t.data)==null?void 0:a.weights)==null?void 0:o.filter(b=>cw.includes(b)))??["normal"],g=t.data??{};for(let b=0;b<m.length;b++){const x=m[b],E=new FontFace(f,`url(${mw(n)})`,{...g,weight:x});await E.load(),e.add(E),h.push(E)}return Qe.set(`${f}-and-url`,{url:n,fontFaces:h}),h.length===1?h[0]:h}return kt("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){(Array.isArray(n)?n:[n]).forEach(t=>{Qe.remove(`${t.family}-and-url`),me.get().getFontFaceSet().delete(t)})}};function Kg(n,t=1){var i;const e=(i=Xo.RETINA_PREFIX)==null?void 0:i.exec(n);return e?parseFloat(e[1]):t}function Io(n,t,e){n.label=e,n._sourceOrigin=e;const i=new At({source:n,label:e}),a=()=>{delete t.promiseCache[e],Qe.has(e)&&Qe.remove(e)};return i.source.once("destroy",()=>{t.promiseCache[e]&&(kt("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),a())}),i.once("destroy",()=>{n.destroyed||(kt("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),a())}),i}const gw=".svg",_w="image/svg+xml",_T={extension:{type:I.LoadParser,priority:Yr.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(n){return $u(n,_w)||va(n,gw)},async load(n,t,e){var i;return((i=t.data)==null?void 0:i.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?bw(n):yw(n,t,e,this.config.crossOrigin)},unload(n){n.destroy(!0)}};async function yw(n,t,e,i){var C,G,P;const o=await(await me.get().fetch(n)).blob(),h=URL.createObjectURL(o),f=new Image;f.src=h,f.crossOrigin=i,await f.decode(),URL.revokeObjectURL(h);const m=document.createElement("canvas"),g=m.getContext("2d"),b=((C=t.data)==null?void 0:C.resolution)||Kg(n),x=((G=t.data)==null?void 0:G.width)??f.width,E=((P=t.data)==null?void 0:P.height)??f.height;m.width=x*b,m.height=E*b,g.drawImage(f,0,0,x*b,E*b);const{parseAsGraphicsContext:T,...R}=t.data??{},D=new Vo({resource:m,alphaMode:"premultiply-alpha-on-upload",resolution:b,...R});return Io(D,e,n)}async function bw(n){const e=await(await me.get().fetch(n)).text(),i=new er;return i.svg(e),i}const vw=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let uh=null,_y=class{constructor(){uh||(uh=URL.createObjectURL(new Blob([vw],{type:"application/javascript"}))),this.worker=new Worker(uh)}};_y.revokeObjectURL=function(){uh&&(URL.revokeObjectURL(uh),uh=null)};const xw=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let ch=null,yT=class{constructor(){ch||(ch=URL.createObjectURL(new Blob([xw],{type:"application/javascript"}))),this.worker=new Worker(ch)}};yT.revokeObjectURL=function(){ch&&(URL.revokeObjectURL(ch),ch=null)};let f1=0,A_;class Sw{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new _y;e.addEventListener("message",i=>{e.terminate(),_y.revokeObjectURL(),t(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,e){var i;return this._run("loadImageBitmap",[t,(i=e==null?void 0:e.data)==null?void 0:i.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){A_===void 0&&(A_=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<A_&&(this._createdWorkers++,t=new yT().worker,t.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),this._resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const i=new Promise((a,o)=>{this._queue.push({id:t,arguments:e,resolve:a,reject:o})});return this._next(),i}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const e=this._queue.pop(),i=e.id;this._resolveHash[f1]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:f1++,id:i})}}const yy=new Sw,Ew=[".jpeg",".jpg",".png",".webp",".avif"],Tw=["image/jpeg","image/png","image/webp","image/avif"];async function bT(n,t){var a;const e=await me.get().fetch(n);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${e.status} ${e.statusText}`);const i=await e.blob();return((a=t==null?void 0:t.data)==null?void 0:a.alphaMode)==="premultiplied-alpha"?createImageBitmap(i,{premultiplyAlpha:"none"}):createImageBitmap(i)}const Ob={name:"loadTextures",extension:{type:I.LoadParser,priority:Yr.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return $u(n,Tw)||va(n,Ew)},async load(n,t,e){var o;let i=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await yy.isImageBitmapSupported()?i=await yy.loadImageBitmap(n,t):i=await bT(n,t):i=await new Promise((h,f)=>{i=new Image,i.crossOrigin=this.config.crossOrigin,i.src=n,i.complete?h(i):(i.onload=()=>{h(i)},i.onerror=f)});const a=new Vo({resource:i,alphaMode:"premultiply-alpha-on-upload",resolution:((o=t.data)==null?void 0:o.resolution)||Kg(n),...t.data});return Io(a,e,n)},unload(n){n.destroy(!0)}},vT=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],Aw=vT.map(n=>`video/${n.substring(1)}`);function xT(n,t,e){e===void 0&&!t.startsWith("data:")?n.crossOrigin=ET(t):e!==!1&&(n.crossOrigin=typeof e=="string"?e:"anonymous")}function ST(n){return new Promise((t,e)=>{n.addEventListener("canplaythrough",i),n.addEventListener("error",a),n.load();function i(){o(),t()}function a(h){o(),e(h)}function o(){n.removeEventListener("canplaythrough",i),n.removeEventListener("error",a)}})}function ET(n,t=globalThis.location){if(n.startsWith("data:"))return"";t||(t=globalThis.location);const e=new URL(n,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}const TT={name:"loadVideo",extension:{type:I.LoadParser,name:"loadVideo"},test(n){const t=$u(n,Aw),e=va(n,vT);return t||e},async load(n,t,e){var m,g;const i={...pd.defaultOptions,resolution:((m=t.data)==null?void 0:m.resolution)||Kg(n),alphaMode:((g=t.data)==null?void 0:g.alphaMode)||await sb(),...t.data},a=document.createElement("video"),o={preload:i.autoLoad!==!1?"auto":void 0,"webkit-playsinline":i.playsinline!==!1?"":void 0,playsinline:i.playsinline!==!1?"":void 0,muted:i.muted===!0?"":void 0,loop:i.loop===!0?"":void 0,autoplay:i.autoPlay!==!1?"":void 0};Object.keys(o).forEach(b=>{const x=o[b];x!==void 0&&a.setAttribute(b,x)}),i.muted===!0&&(a.muted=!0),xT(a,n,i.crossorigin);const h=document.createElement("source");let f;if(n.startsWith("data:"))f=n.slice(5,n.indexOf(";"));else if(!n.startsWith("blob:")){const b=n.split("?")[0].slice(n.lastIndexOf(".")+1).toLowerCase();f=pd.MIME_TYPES[b]||`video/${b}`}return h.src=n,f&&(h.type=f),new Promise(b=>{const x=async()=>{const E=new pd({...i,resource:a});a.removeEventListener("canplay",x),t.data.preload&&await ST(a),b(Io(E,e,n))};i.preload&&!i.autoPlay&&a.load(),a.addEventListener("canplay",x),a.appendChild(h)})},unload(n){n.destroy(!0)}},Gb={extension:{type:I.ResolveParser,name:"resolveTexture"},test:Ob.test,parse:n=>{var t;return{resolution:parseFloat(((t=Xo.RETINA_PREFIX.exec(n))==null?void 0:t[1])??"1"),format:n.split(".").pop(),src:n}}},AT={extension:{type:I.ResolveParser,priority:-2,name:"resolveJson"},test:n=>Xo.RETINA_PREFIX.test(n)&&n.endsWith(".json"),parse:Gb.parse};class CT{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Xo,this.loader=new fT,this.cache=Qe,this._backgroundLoader=new rT(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var o,h;if(this._initialized){kt("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let f=t.manifest;typeof f=="string"&&(f=await this.load(f)),this.resolver.addManifest(f)}const e=((o=t.texturePreference)==null?void 0:o.resolution)??1,i=typeof e=="number"?[e]:e,a=await this._detectFormats({preferredFormats:(h=t.texturePreference)==null?void 0:h.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:a,resolution:i}}),t.preferences&&this.setPreferences(t.preferences)}add(t){this.resolver.add(t)}async load(t,e){this._initialized||await this.init();const i=Td(t),a=ma(t).map(f=>{if(typeof f!="string"){const m=this.resolver.getAlias(f);return m.some(g=>!this.resolver.hasKey(g))&&this.add(f),Array.isArray(m)?m[0]:m}return this.resolver.hasKey(f)||this.add({alias:f,src:f}),f}),o=this.resolver.resolve(a),h=await this._mapLoadToResolve(o,e);return i?h[a[0]]:h}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);const a=this.resolver.resolveBundle(t),o={},h=Object.keys(a);let f=0,m=0;const g=()=>{e==null||e(++f/m)},b=h.map(x=>{const E=a[x];return m+=Object.keys(E).length,this._mapLoadToResolve(E,g).then(T=>{o[x]=T})});return await Promise.all(b),i?o[t[0]]:o}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Qe.get(t);const e={};for(let i=0;i<t.length;i++)e[i]=Qe.get(t[i]);return e}async _mapLoadToResolve(t,e){const i=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const a=await this.loader.load(i,e);this._backgroundLoader.active=!0;const o={};return i.forEach(h=>{const f=a[h.src],m=[h.src];h.alias&&m.push(...h.alias),m.forEach(g=>{o[g]=f}),Qe.set(m,f)}),o}async unload(t){this._initialized||await this.init();const e=ma(t).map(a=>typeof a!="string"?a.src:a),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=ma(t);const e=this.resolver.resolveBundle(t),i=Object.keys(e).map(a=>this._unloadFromResolved(e[a]));await Promise.all(i)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(i=>{Qe.remove(i.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const i of t.detections)t.skipDetections||await i.test()?e=await i.add(e):t.skipDetections||(e=await i.remove(e));return e=e.filter((i,a)=>e.indexOf(i)===a),e}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(i=>i in t).forEach(i=>{e.config[i]=t[i]})})}}const ya=new CT;Oe.handleByList(I.LoadParser,ya.loader.parsers).handleByList(I.ResolveParser,ya.resolver.parsers).handleByList(I.CacheParser,ya.cache.parsers).handleByList(I.DetectionParser,ya.detections);Oe.add(aT,lT,sT,hT,oT,uT,cT,dT,pT,gT,_T,Ob,TT,iT,nT,Gb,AT);const d1={loader:I.LoadParser,resolver:I.ResolveParser,cache:I.CacheParser,detection:I.DetectionParser};Oe.handle(I.Asset,n=>{const t=n.ref;Object.entries(d1).filter(([e])=>!!t[e]).forEach(([e,i])=>Oe.add(Object.assign(t[e],{extension:t[e].extension??i})))},n=>{const t=n.ref;Object.keys(d1).filter(e=>!!t[e]).forEach(e=>Oe.remove(t[e]))});const Cw={extension:{type:I.DetectionParser,priority:3},test:async()=>!!(await Hd()||zd()),add:async n=>[...n,"basis"],remove:async n=>n.filter(t=>t!=="basis")};class Vd extends Sn{constructor(t){super(t),this.uploadMethodId="compressed",this.resource=t.resource,this.mipLevelCount=this.resource.length}}let km;function by(){if(km)return km;const t=document.createElement("canvas").getContext("webgl");return t?(km=[...t.getExtension("EXT_texture_compression_bptc")?["bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...t.getExtension("WEBGL_compressed_texture_s3tc")?["bc1-rgba-unorm","bc2-rgba-unorm","bc3-rgba-unorm"]:[],...t.getExtension("WEBGL_compressed_texture_s3tc_srgb")?["bc1-rgba-unorm-srgb","bc2-rgba-unorm-srgb","bc3-rgba-unorm-srgb"]:[],...t.getExtension("EXT_texture_compression_rgtc")?["bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm"]:[],...t.getExtension("WEBGL_compressed_texture_etc")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","eac-r11unorm","eac-rg11unorm"]:[],...t.getExtension("WEBGL_compressed_texture_astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],km):[]}let Xm;async function vy(){if(Xm)return Xm;const n=await me.get().getNavigator().gpu.requestAdapter();return Xm=[...n.features.has("texture-compression-bc")?["bc1-rgba-unorm","bc1-rgba-unorm-srgb","bc2-rgba-unorm","bc2-rgba-unorm-srgb","bc3-rgba-unorm","bc3-rgba-unorm-srgb","bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm","bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...n.features.has("texture-compression-etc2")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","eac-r11unorm","eac-r11snorm","eac-rg11unorm","eac-rg11snorm"]:[],...n.features.has("texture-compression-astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Xm}let Im;async function Pb(){return Im!==void 0||(Im=await(async()=>{const n=await Hd(),t=zd();if(n&&t){const e=await vy(),i=by();return e.filter(a=>i.includes(a))}else{if(n)return await vy();if(t)return by()}return[]})()),Im}const BT=["r8unorm","r8snorm","r8uint","r8sint","r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2unorm","rg11b10ufloat","rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float","rgba32uint","rgba32sint","rgba32float","stencil8","depth16unorm","depth24plus","depth24plus-stencil8","depth32float","depth32float-stencil8"];let Ym;async function kd(){if(Ym!==void 0)return Ym;const n=await Pb();return Ym=[...BT,...n],Ym}const Bw=`(function () {
    'use strict';

    function createLevelBuffers(basisTexture, basisTranscoderFormat) {
      const images = basisTexture.getNumImages();
      const levels = basisTexture.getNumLevels(0);
      const success = basisTexture.startTranscoding();
      if (!success) {
        throw new Error("startTranscoding failed");
      }
      const levelBuffers = [];
      for (let levelIndex = 0; levelIndex < levels; ++levelIndex) {
        for (let sliceIndex = 0; sliceIndex < images; ++sliceIndex) {
          const transcodeSize = basisTexture.getImageTranscodedSizeInBytes(sliceIndex, levelIndex, basisTranscoderFormat);
          const levelBuffer = new Uint8Array(transcodeSize);
          const success2 = basisTexture.transcodeImage(levelBuffer, sliceIndex, levelIndex, basisTranscoderFormat, 1, 0);
          if (!success2) {
            throw new Error("transcodeImage failed");
          }
          levelBuffers.push(levelBuffer);
        }
      }
      return levelBuffers;
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": 3,
      // cTFBC3_RGBA
      "bc7-rgba-unorm": 6,
      // cTFBC7_RGBA,
      "etc2-rgba8unorm": 1,
      // cTFETC2_RGBA,
      "astc-4x4-unorm": 10,
      // cTFASTC_4x4_RGBA,
      // Uncompressed
      rgba8unorm: 13,
      // cTFRGBA32,
      rgba4unorm: 16
      // cTFRGBA4444,
    };
    function gpuFormatToBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "basis/basis_transcoder.js",
      wasmUrl: "basis/basis_transcoder.wasm"
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let basisPromise;
    async function getBasis() {
      if (!basisPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        basisPromise = new Promise((resolve) => {
          BASIS({
            locateFile: (_file) => absoluteWasmUrl
          }).then((module) => {
            module.initializeBasis();
            resolve(module.BasisFile);
          });
        });
      }
      return basisPromise;
    }
    async function fetchBasisTexture(url, BasisTexture) {
      const basisResponse = await fetch(url);
      if (basisResponse.ok) {
        const basisArrayBuffer = await basisResponse.arrayBuffer();
        return new BasisTexture(new Uint8Array(basisArrayBuffer));
      }
      throw new Error(\`Failed to load Basis texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const BasisTexture = await getBasis();
      const basisTexture = await fetchBasisTexture(url, BasisTexture);
      const levelBuffers = createLevelBuffers(basisTexture, basisTranscoderFormat);
      return {
        width: basisTexture.getImageWidth(0, 0),
        height: basisTexture.getImageHeight(0, 0),
        format: basisTranscodedTextureFormat,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl)
        settings.jsUrl = jsUrl;
      if (wasmUrl)
        settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getBasis();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type](message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    };

})();
`;let hh=null,RT=class{constructor(){hh||(hh=URL.createObjectURL(new Blob([Bw],{type:"application/javascript"}))),this.worker=new Worker(hh)}};RT.revokeObjectURL=function(){hh&&(URL.revokeObjectURL(hh),hh=null)};const cg={jsUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.js",wasmUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.wasm"};function Rw(n){Object.assign(cg,n)}let Jf;const MT={};function Mw(n){return Jf||(Jf=new RT().worker,Jf.onmessage=t=>{const{success:e,url:i,textureOptions:a}=t.data;e||console.warn("Failed to load Basis texture",i),MT[i](a)},Jf.postMessage({type:"init",jsUrl:cg.jsUrl,wasmUrl:cg.wasmUrl,supportedTextures:n})),Jf}function DT(n,t){const e=Mw(t);return new Promise(i=>{MT[n]=i,e.postMessage({type:"load",url:n})})}const Dw={extension:{type:I.LoadParser,priority:Yr.High,name:"loadBasis"},name:"loadBasis",test(n){return va(n,[".basis"])},async load(n,t,e){const i=await kd(),a=await DT(n,i),o=new Vd(a);return Io(o,e,n)},unload(n){Array.isArray(n)?n.forEach(t=>t.destroy(!0)):n.destroy(!0)}};function ww(n,t){const e=n.getNumImages(),i=n.getNumLevels(0);if(!n.startTranscoding())throw new Error("startTranscoding failed");const o=[];for(let h=0;h<i;++h)for(let f=0;f<e;++f){const m=n.getImageTranscodedSizeInBytes(f,h,t),g=new Uint8Array(m);if(!n.transcodeImage(g,f,h,t,1,0))throw new Error("transcodeImage failed");o.push(g)}return o}const Uw={"bc3-rgba-unorm":3,"bc7-rgba-unorm":6,"etc2-rgba8unorm":1,"astc-4x4-unorm":10,rgba8unorm:13,rgba4unorm:16};function Ow(n){const t=Uw[n];if(t)return t;throw new Error(`Unsupported transcoderFormat: ${n}`)}const Gw={MAGIC:0,SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19,PF_FLAGS:20,FOURCC:21,RGB_BITCOUNT:22,R_BIT_MASK:23,G_BIT_MASK:24,B_BIT_MASK:25,A_BIT_MASK:26},Pw={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4};var Nb=(n=>(n[n.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",n[n.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",n[n.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",n[n.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",n[n.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",n[n.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",n[n.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",n[n.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",n[n.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",n[n.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",n[n.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",n[n.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",n[n.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",n[n.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",n[n.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",n[n.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",n[n.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",n[n.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",n[n.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",n[n.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",n[n.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",n[n.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",n[n.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",n[n.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",n[n.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",n[n.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",n[n.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",n[n.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",n[n.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",n[n.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",n[n.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",n[n.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",n[n.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",n[n.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",n[n.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",n[n.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",n[n.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",n[n.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",n[n.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",n[n.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",n[n.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",n[n.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",n[n.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",n[n.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",n[n.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",n[n.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",n[n.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",n[n.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",n[n.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",n[n.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",n[n.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",n[n.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",n[n.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",n[n.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",n[n.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",n[n.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",n[n.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",n[n.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",n[n.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",n[n.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",n[n.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",n[n.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",n[n.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",n[n.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",n[n.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",n[n.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",n[n.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",n[n.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",n[n.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",n[n.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",n[n.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",n[n.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",n[n.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",n[n.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",n[n.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",n[n.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",n[n.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",n[n.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",n[n.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",n[n.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",n[n.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",n[n.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",n[n.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",n[n.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",n[n.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",n[n.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",n[n.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",n[n.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",n[n.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",n[n.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",n[n.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",n[n.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",n[n.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",n[n.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",n[n.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",n[n.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",n[n.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",n[n.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",n[n.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",n[n.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",n[n.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",n[n.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",n[n.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",n[n.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",n[n.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",n[n.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",n[n.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",n[n.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",n[n.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",n[n.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",n[n.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",n[n.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",n[n.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",n[n.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",n[n.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",n[n.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",n[n.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",n[n.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",n[n.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",n[n.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",n[n.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",n[n.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",n))(Nb||{}),zb=(n=>(n[n.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",n[n.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",n[n.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",n))(zb||{});function hi(n){return n.charCodeAt(0)+(n.charCodeAt(1)<<8)+(n.charCodeAt(2)<<16)+(n.charCodeAt(3)<<24)}var xr=(n=>(n[n.UNKNOWN=0]="UNKNOWN",n[n.R8G8B8=20]="R8G8B8",n[n.A8R8G8B8=21]="A8R8G8B8",n[n.X8R8G8B8=22]="X8R8G8B8",n[n.R5G6B5=23]="R5G6B5",n[n.X1R5G5B5=24]="X1R5G5B5",n[n.A1R5G5B5=25]="A1R5G5B5",n[n.A4R4G4B4=26]="A4R4G4B4",n[n.R3G3B2=27]="R3G3B2",n[n.A8=28]="A8",n[n.A8R3G3B2=29]="A8R3G3B2",n[n.X4R4G4B4=30]="X4R4G4B4",n[n.A2B10G10R10=31]="A2B10G10R10",n[n.A8B8G8R8=32]="A8B8G8R8",n[n.X8B8G8R8=33]="X8B8G8R8",n[n.G16R16=34]="G16R16",n[n.A2R10G10B10=35]="A2R10G10B10",n[n.A16B16G16R16=36]="A16B16G16R16",n[n.A8P8=40]="A8P8",n[n.P8=41]="P8",n[n.L8=50]="L8",n[n.A8L8=51]="A8L8",n[n.A4L4=52]="A4L4",n[n.V8U8=60]="V8U8",n[n.L6V5U5=61]="L6V5U5",n[n.X8L8V8U8=62]="X8L8V8U8",n[n.Q8W8V8U8=63]="Q8W8V8U8",n[n.V16U16=64]="V16U16",n[n.A2W10V10U10=67]="A2W10V10U10",n[n.Q16W16V16U16=110]="Q16W16V16U16",n[n.R16F=111]="R16F",n[n.G16R16F=112]="G16R16F",n[n.A16B16G16R16F=113]="A16B16G16R16F",n[n.R32F=114]="R32F",n[n.G32R32F=115]="G32R32F",n[n.A32B32G32R32F=116]="A32B32G32R32F",n[n.UYVY=hi("UYVY")]="UYVY",n[n.R8G8_B8G8=hi("RGBG")]="R8G8_B8G8",n[n.YUY2=hi("YUY2")]="YUY2",n[n.D3DFMT_G8R8_G8B8=hi("GRGB")]="D3DFMT_G8R8_G8B8",n[n.DXT1=hi("DXT1")]="DXT1",n[n.DXT2=hi("DXT2")]="DXT2",n[n.DXT3=hi("DXT3")]="DXT3",n[n.DXT4=hi("DXT4")]="DXT4",n[n.DXT5=hi("DXT5")]="DXT5",n[n.ATI1=hi("ATI1")]="ATI1",n[n.AT1N=hi("AT1N")]="AT1N",n[n.ATI2=hi("ATI2")]="ATI2",n[n.AT2N=hi("AT2N")]="AT2N",n[n.BC4U=hi("BC4U")]="BC4U",n[n.BC4S=hi("BC4S")]="BC4S",n[n.BC5U=hi("BC5U")]="BC5U",n[n.BC5S=hi("BC5S")]="BC5S",n[n.DX10=hi("DX10")]="DX10",n))(xr||{});const xy={[xr.DXT1]:"bc1-rgba-unorm",[xr.DXT2]:"bc2-rgba-unorm",[xr.DXT3]:"bc2-rgba-unorm",[xr.DXT4]:"bc3-rgba-unorm",[xr.DXT5]:"bc3-rgba-unorm",[xr.ATI1]:"bc4-r-unorm",[xr.BC4U]:"bc4-r-unorm",[xr.BC4S]:"bc4-r-snorm",[xr.ATI2]:"bc5-rg-unorm",[xr.BC5U]:"bc5-rg-unorm",[xr.BC5S]:"bc5-rg-snorm",36:"rgba16uint",110:"rgba16sint",111:"r16float",112:"rg16float",113:"rgba16float",114:"r32float",115:"rg32float",116:"rgba32float"},Sr={70:"bc1-rgba-unorm",71:"bc1-rgba-unorm",72:"bc1-rgba-unorm-srgb",73:"bc2-rgba-unorm",74:"bc2-rgba-unorm",75:"bc2-rgba-unorm-srgb",76:"bc3-rgba-unorm",77:"bc3-rgba-unorm",78:"bc3-rgba-unorm-srgb",79:"bc4-r-unorm",80:"bc4-r-unorm",81:"bc4-r-snorm",82:"bc5-rg-unorm",83:"bc5-rg-unorm",84:"bc5-rg-snorm",94:"bc6h-rgb-ufloat",95:"bc6h-rgb-ufloat",96:"bc6h-rgb-float",97:"bc7-rgba-unorm",98:"bc7-rgba-unorm",99:"bc7-rgba-unorm-srgb",28:"rgba8unorm",29:"rgba8unorm-srgb",87:"bgra8unorm",91:"bgra8unorm-srgb",41:"r32float",49:"rg8unorm",56:"r16uint",61:"r8unorm",24:"rgb10a2unorm",11:"rgba16uint",13:"rgba16sint",10:"rgba16float",54:"r16float",34:"rg16float",16:"rg32float",2:"rgba32float"},Wt={MAGIC_VALUE:542327876,MAGIC_SIZE:4,HEADER_SIZE:124,HEADER_DX10_SIZE:20,PIXEL_FORMAT_FLAGS:{ALPHAPIXELS:1,ALPHA:2,FOURCC:4,RGB:64,RGBA:65,YUV:512,LUMINANCE:131072,LUMINANCEA:131073},RESOURCE_MISC_TEXTURECUBE:4,HEADER_FIELDS:Gw,HEADER_DX10_FIELDS:Pw,DXGI_FORMAT:Nb,D3D10_RESOURCE_DIMENSION:zb,D3DFMT:xr},wT={"bc1-rgba-unorm":8,"bc1-rgba-unorm-srgb":8,"bc2-rgba-unorm":16,"bc2-rgba-unorm-srgb":16,"bc3-rgba-unorm":16,"bc3-rgba-unorm-srgb":16,"bc4-r-unorm":8,"bc4-r-snorm":8,"bc5-rg-unorm":16,"bc5-rg-snorm":16,"bc6h-rgb-ufloat":16,"bc6h-rgb-float":16,"bc7-rgba-unorm":16,"bc7-rgba-unorm-srgb":16};function UT(n,t){const{format:e,fourCC:i,width:a,height:o,dataOffset:h,mipmapCount:f}=zw(n);if(!t.includes(e))throw new Error(`Unsupported texture format: ${i} ${e}, supported: ${t}`);if(f<=1)return{format:e,width:a,height:o,resource:[new Uint8Array(n,h)],alphaMode:"no-premultiply-alpha"};const m=Nw(e,a,o,h,f,n);return{format:e,width:a,height:o,resource:m,alphaMode:"no-premultiply-alpha"}}function Nw(n,t,e,i,a,o){const h=[],f=wT[n];let m=t,g=e,b=i;for(let x=0;x<a;++x){const E=Math.ceil(Math.max(4,m)/4)*4,T=Math.ceil(Math.max(4,g)/4)*4,R=f?E/4*T/4*f:m*g*4,D=new Uint8Array(o,b,R);h.push(D),b+=R,m=Math.max(m>>1,1),g=Math.max(g>>1,1)}return h}function zw(n){const t=new Uint32Array(n,0,Wt.HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(t[Wt.HEADER_FIELDS.MAGIC]!==Wt.MAGIC_VALUE)throw new Error("Invalid magic number in DDS header");const e=t[Wt.HEADER_FIELDS.HEIGHT],i=t[Wt.HEADER_FIELDS.WIDTH],a=Math.max(1,t[Wt.HEADER_FIELDS.MIPMAP_COUNT]),o=t[Wt.HEADER_FIELDS.PF_FLAGS],h=t[Wt.HEADER_FIELDS.FOURCC],f=Hw(t,o,h,n),m=Wt.MAGIC_SIZE+Wt.HEADER_SIZE+(h===Wt.D3DFMT.DX10?Wt.HEADER_DX10_SIZE:0);return{format:f,fourCC:h,width:i,height:e,dataOffset:m,mipmapCount:a}}function Hw(n,t,e,i){if(t&Wt.PIXEL_FORMAT_FLAGS.FOURCC){if(e===Wt.D3DFMT.DX10){const a=new Uint32Array(i,Wt.MAGIC_SIZE+Wt.HEADER_SIZE,Wt.HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(a[Wt.HEADER_DX10_FIELDS.MISC_FLAG]===Wt.RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(a[Wt.HEADER_DX10_FIELDS.RESOURCE_DIMENSION]===Wt.D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");const f=a[Wt.HEADER_DX10_FIELDS.DXGI_FORMAT];if(f in Sr)return Sr[f];throw new Error(`DDSParser cannot parse texture data with DXGI format ${f}`)}if(e in xy)return xy[e];throw new Error(`DDSParser cannot parse texture data with fourCC format ${e}`)}if(t&Wt.PIXEL_FORMAT_FLAGS.RGB||t&Wt.PIXEL_FORMAT_FLAGS.RGBA)return Lw(n);throw t&Wt.PIXEL_FORMAT_FLAGS.YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):t&Wt.PIXEL_FORMAT_FLAGS.LUMINANCE||t&Wt.PIXEL_FORMAT_FLAGS.LUMINANCEA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):t&Wt.PIXEL_FORMAT_FLAGS.ALPHA||t&Wt.PIXEL_FORMAT_FLAGS.ALPHAPIXELS?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}function Lw(n){const t=n[Wt.HEADER_FIELDS.RGB_BITCOUNT],e=n[Wt.HEADER_FIELDS.R_BIT_MASK],i=n[Wt.HEADER_FIELDS.G_BIT_MASK],a=n[Wt.HEADER_FIELDS.B_BIT_MASK],o=n[Wt.HEADER_FIELDS.A_BIT_MASK];switch(t){case 32:if(e===255&&i===65280&&a===16711680&&o===4278190080)return Sr[Wt.DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM];if(e===16711680&&i===65280&&a===255&&o===4278190080)return Sr[Wt.DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM];if(e===1072693248&&i===1047552&&a===1023&&o===3221225472)return Sr[Wt.DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM];if(e===65535&&i===4294901760&&a===0&&o===0)return Sr[Wt.DXGI_FORMAT.DXGI_FORMAT_R16G16_UNORM];if(e===4294967295&&i===0&&a===0&&o===0)return Sr[Wt.DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT];break;case 24:break;case 16:if(e===31744&&i===992&&a===31&&o===32768)return Sr[Wt.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];if(e===63488&&i===2016&&a===31&&o===0)return Sr[Wt.DXGI_FORMAT.DXGI_FORMAT_B5G6R5_UNORM];if(e===3840&&i===240&&a===15&&o===61440)return Sr[Wt.DXGI_FORMAT.DXGI_FORMAT_B4G4R4A4_UNORM];if(e===255&&i===0&&a===0&&o===65280)return Sr[Wt.DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM];if(e===65535&&i===0&&a===0&&o===0)return Sr[Wt.DXGI_FORMAT.DXGI_FORMAT_R16_UNORM];break;case 8:if(e===255&&i===0&&a===0&&o===0)return Sr[Wt.DXGI_FORMAT.DXGI_FORMAT_R8_UNORM];break}throw new Error(`DDSParser does not support uncompressed texture with configuration:
                bitCount = ${t}, rBitMask = ${e}, gBitMask = ${i}, aBitMask = ${o}`)}const Fw={extension:{type:I.LoadParser,priority:Yr.High,name:"loadDDS"},name:"loadDDS",test(n){return va(n,[".dds"])},async load(n,t,e){const i=await kd(),o=await(await fetch(n)).arrayBuffer(),h=UT(o,i),f=new Vd(h);return Io(f,e,n)},unload(n){Array.isArray(n)?n.forEach(t=>t.destroy(!0)):n.destroy(!0)}};var OT=(n=>(n[n.RGBA8_SNORM=36759]="RGBA8_SNORM",n[n.RGBA=6408]="RGBA",n[n.RGBA8UI=36220]="RGBA8UI",n[n.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",n[n.RGBA8I=36238]="RGBA8I",n[n.RGBA8=32856]="RGBA8",n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",n[n.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",n[n.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",n[n.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",n[n.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",n[n.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",n[n.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",n[n.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",n[n.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",n[n.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",n[n.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",n[n.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",n[n.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",n[n.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",n[n.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",n[n.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",n[n.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",n[n.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",n[n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",n[n.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",n[n.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",n))(OT||{});const Vw={33776:"bc1-rgba-unorm",33777:"bc1-rgba-unorm",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",35916:"bc1-rgba-unorm-srgb",35917:"bc1-rgba-unorm-srgb",35918:"bc2-rgba-unorm-srgb",35919:"bc3-rgba-unorm-srgb",36283:"bc4-r-unorm",36284:"bc4-r-snorm",36285:"bc5-rg-unorm",36286:"bc5-rg-snorm",37488:"eac-r11unorm",37490:"eac-rg11snorm",37492:"etc2-rgb8unorm",37496:"etc2-rgba8unorm",37493:"etc2-rgb8unorm-srgb",37497:"etc2-rgba8unorm-srgb",37494:"etc2-rgb8a1unorm",37495:"etc2-rgb8a1unorm-srgb",37808:"astc-4x4-unorm",37840:"astc-4x4-unorm-srgb",37809:"astc-5x4-unorm",37841:"astc-5x4-unorm-srgb",37810:"astc-5x5-unorm",37842:"astc-5x5-unorm-srgb",37811:"astc-6x5-unorm",37843:"astc-6x5-unorm-srgb",37812:"astc-6x6-unorm",37844:"astc-6x6-unorm-srgb",37813:"astc-8x5-unorm",37845:"astc-8x5-unorm-srgb",37814:"astc-8x6-unorm",37846:"astc-8x6-unorm-srgb",37815:"astc-8x8-unorm",37847:"astc-8x8-unorm-srgb",37816:"astc-10x5-unorm",37848:"astc-10x5-unorm-srgb",37817:"astc-10x6-unorm",37849:"astc-10x6-unorm-srgb",37818:"astc-10x8-unorm",37850:"astc-10x8-unorm-srgb",37819:"astc-10x10-unorm",37851:"astc-10x10-unorm-srgb",37820:"astc-12x10-unorm",37852:"astc-12x10-unorm-srgb",37821:"astc-12x12-unorm",37853:"astc-12x12-unorm-srgb",36492:"bc7-rgba-unorm",36493:"bc7-rgba-unorm-srgb",36494:"bc6h-rgb-float",36495:"bc6h-rgb-ufloat",35907:"rgba8unorm-srgb",36759:"rgba8snorm",36220:"rgba8uint",36238:"rgba8sint",6408:"rgba8unorm"},kw=[171,75,84,88,32,49,49,187,13,10,26,10],Xw={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Iw=64,Yw=67305985,qw={5121:1,5123:2,5124:4,5125:4,5126:4,36193:8},jw={6408:4,6407:3,33319:2,6403:1,6409:1,6410:2,6406:1},Kw={32819:2,32820:2,33635:2},Ww={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,36283:.5,36284:.5,36285:1,36286:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,37808:1,37840:1,37809:.8,37841:.8,37810:.64,37842:.64,37811:.53375,37843:.53375,37812:.445,37844:.445,37813:.4,37845:.4,37814:.33375,37846:.33375,37815:.25,37847:.25,37816:.32,37848:.32,37817:.26625,37849:.26625,37818:.2,37850:.2,37819:.16,37851:.16,37820:.13375,37852:.13375,37821:.11125,37853:.11125,36492:1,36493:1,36494:1,36495:1},Un={FILE_HEADER_SIZE:Iw,FILE_IDENTIFIER:kw,FORMATS_TO_COMPONENTS:jw,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:Ww,INTERNAL_FORMAT_TO_TEXTURE_FORMATS:Vw,FIELDS:Xw,TYPES_TO_BYTES_PER_COMPONENT:qw,TYPES_TO_BYTES_PER_PIXEL:Kw,ENDIANNESS:Yw};function GT(n,t){const e=new DataView(n);if(!$w(e))throw new Error("Invalid KTX identifier in header");const{littleEndian:i,glType:a,glFormat:o,glInternalFormat:h,pixelWidth:f,pixelHeight:m,numberOfMipmapLevels:g,offset:b}=Jw(e),x=Un.INTERNAL_FORMAT_TO_TEXTURE_FORMATS[h];if(!x)throw new Error(`Unknown texture format ${h}`);if(!t.includes(x))throw new Error(`Unsupported texture format: ${x}, supportedFormats: ${t}`);const E=Zw(a,o,h),T=Qw(e,a,E,f,m,b,g,i);return{format:x,width:f,height:m,resource:T,alphaMode:"no-premultiply-alpha"}}function Qw(n,t,e,i,a,o,h,f){const m=i+3&-4,g=a+3&-4;let b=i*a;t===0&&(b=m*g);let x=b*e,E=i,T=a,R=m,D=g,C=o;const G=new Array(h);for(let P=0;P<h;P++){const H=n.getUint32(C,f);let q=C+4;G[P]=new Uint8Array(n.buffer,q,x),q+=x,C+=H+4,C=C%4!==0?C+4-C%4:C,E=E>>1||1,T=T>>1||1,R=E+4-1&-4,D=T+4-1&-4,x=R*D*e}return G}function Zw(n,t,e){let i=Un.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[e];if(n!==0&&(Un.TYPES_TO_BYTES_PER_COMPONENT[n]?i=Un.TYPES_TO_BYTES_PER_COMPONENT[n]*Un.FORMATS_TO_COMPONENTS[t]:i=Un.TYPES_TO_BYTES_PER_PIXEL[n]),i===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");return i}function Jw(n){const t=n.getUint32(Un.FIELDS.ENDIANNESS,!0)===Un.ENDIANNESS,e=n.getUint32(Un.FIELDS.GL_TYPE,t),i=n.getUint32(Un.FIELDS.GL_FORMAT,t),a=n.getUint32(Un.FIELDS.GL_INTERNAL_FORMAT,t),o=n.getUint32(Un.FIELDS.PIXEL_WIDTH,t),h=n.getUint32(Un.FIELDS.PIXEL_HEIGHT,t)||1,f=n.getUint32(Un.FIELDS.PIXEL_DEPTH,t)||1,m=n.getUint32(Un.FIELDS.NUMBER_OF_ARRAY_ELEMENTS,t)||1,g=n.getUint32(Un.FIELDS.NUMBER_OF_FACES,t),b=n.getUint32(Un.FIELDS.NUMBER_OF_MIPMAP_LEVELS,t),x=n.getUint32(Un.FIELDS.BYTES_OF_KEY_VALUE_DATA,t);if(h===0||f!==1)throw new Error("Only 2D textures are supported");if(g!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(m!==1)throw new Error("WebGL does not support array textures");return{littleEndian:t,glType:e,glFormat:i,glInternalFormat:a,pixelWidth:o,pixelHeight:h,numberOfMipmapLevels:b,offset:Un.FILE_HEADER_SIZE+x}}function $w(n){for(let t=0;t<Un.FILE_IDENTIFIER.length;t++)if(n.getUint8(t)!==Un.FILE_IDENTIFIER[t])return!1;return!0}const t8={extension:{type:I.LoadParser,priority:Yr.High,name:"loadKTX"},name:"loadKTX",test(n){return va(n,".ktx")},async load(n,t,e){const i=await kd(),o=await(await fetch(n)).arrayBuffer(),h=GT(o,i),f=new Vd(h);return Io(f,e,n)},unload(n){Array.isArray(n)?n.forEach(t=>t.destroy(!0)):n.destroy(!0)}},e8=`(function () {
    'use strict';

    const converters = {
      rgb8unorm: {
        convertedFormat: "rgba8unorm",
        convertFunction: convertRGBtoRGBA
      },
      "rgb8unorm-srgb": {
        convertedFormat: "rgba8unorm-srgb",
        convertFunction: convertRGBtoRGBA
      }
    };
    function convertFormatIfRequired(textureOptions) {
      const format = textureOptions.format;
      if (converters[format]) {
        const convertFunction = converters[format].convertFunction;
        const levelBuffers = textureOptions.resource;
        for (let i = 0; i < levelBuffers.length; i++) {
          levelBuffers[i] = convertFunction(levelBuffers[i]);
        }
        textureOptions.format = converters[format].convertedFormat;
      }
    }
    function convertRGBtoRGBA(levelBuffer) {
      const pixelCount = levelBuffer.byteLength / 3;
      const levelBufferWithAlpha = new Uint32Array(pixelCount);
      for (let i = 0; i < pixelCount; ++i) {
        levelBufferWithAlpha[i] = levelBuffer[i * 3] + (levelBuffer[i * 3 + 1] << 8) + (levelBuffer[i * 3 + 2] << 16) + 4278190080;
      }
      return new Uint8Array(levelBufferWithAlpha.buffer);
    }

    function createLevelBuffersFromKTX(ktxTexture) {
      const levelBuffers = [];
      for (let i = 0; i < ktxTexture.numLevels; i++) {
        const imageData = ktxTexture.getImageData(i, 0, 0);
        const levelBuffer = new Uint8Array(imageData.byteLength);
        levelBuffer.set(imageData);
        levelBuffers.push(levelBuffer);
      }
      return levelBuffers;
    }

    const glFormatToGPUFormatMap = {
      6408: "rgba8unorm",
      32856: "bgra8unorm",
      //
      32857: "rgb10a2unorm",
      33189: "depth16unorm",
      33190: "depth24plus",
      33321: "r8unorm",
      33323: "rg8unorm",
      33325: "r16float",
      33326: "r32float",
      33327: "rg16float",
      33328: "rg32float",
      33329: "r8sint",
      33330: "r8uint",
      33331: "r16sint",
      33332: "r16uint",
      33333: "r32sint",
      33334: "r32uint",
      33335: "rg8sint",
      33336: "rg8uint",
      33337: "rg16sint",
      33338: "rg16uint",
      33339: "rg32sint",
      33340: "rg32uint",
      33778: "bc2-rgba-unorm",
      33779: "bc3-rgba-unorm",
      34836: "rgba32float",
      34842: "rgba16float",
      35056: "depth24plus-stencil8",
      35898: "rg11b10ufloat",
      35901: "rgb9e5ufloat",
      35907: "rgba8unorm-srgb",
      // bgra8unorm-srgb
      36012: "depth32float",
      36013: "depth32float-stencil8",
      36168: "stencil8",
      36208: "rgba32uint",
      36214: "rgba16uint",
      36220: "rgba8uint",
      36226: "rgba32sint",
      36232: "rgba16sint",
      36238: "rgba8sint",
      36492: "bc7-rgba-unorm",
      36756: "r8snorm",
      36757: "rg8snorm",
      36759: "rgba8snorm",
      37496: "etc2-rgba8unorm",
      37808: "astc-4x4-unorm"
    };
    function glFormatToGPUFormat(glInternalFormat) {
      const format = glFormatToGPUFormatMap[glInternalFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported glInternalFormat: \${glInternalFormat}\`);
    }

    const vkFormatToGPUFormatMap = {
      23: "rgb8unorm",
      // VK_FORMAT_R8G8B8_UNORM
      37: "rgba8unorm",
      // VK_FORMAT_R8G8B8A8_UNORM
      43: "rgba8unorm-srgb"
      // VK_FORMAT_R8G8B8A8_SRGB
      // TODO add more!
    };
    function vkFormatToGPUFormat(vkFormat) {
      const format = vkFormatToGPUFormatMap[vkFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported VkFormat: \${vkFormat}\`);
    }

    function getTextureFormatFromKTXTexture(ktxTexture) {
      if (ktxTexture.classId === 2) {
        return vkFormatToGPUFormat(ktxTexture.vkFormat);
      }
      return glFormatToGPUFormat(ktxTexture.glInternalformat);
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": "BC3_RGBA",
      "bc7-rgba-unorm": "BC7_M5_RGBA",
      "etc2-rgba8unorm": "ETC2_RGBA",
      "astc-4x4-unorm": "ASTC_4x4_RGBA",
      // Uncompressed
      rgba8unorm: "RGBA32",
      rg11b10ufloat: "R11F_G11F_B10F"
    };
    function gpuFormatToKTXBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "",
      wasmUrl: ""
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let ktxPromise;
    async function getKTX() {
      if (!ktxPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        ktxPromise = new Promise((resolve) => {
          LIBKTX({
            locateFile: (_file) => absoluteWasmUrl
          }).then((libktx) => {
            resolve(libktx);
          });
        });
      }
      return ktxPromise;
    }
    async function fetchKTXTexture(url, ktx) {
      const ktx2Response = await fetch(url);
      if (ktx2Response.ok) {
        const ktx2ArrayBuffer = await ktx2Response.arrayBuffer();
        return new ktx.ktxTexture(new Uint8Array(ktx2ArrayBuffer));
      }
      throw new Error(\`Failed to load KTX(2) texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const ktx = await getKTX();
      const ktxTexture = await fetchKTXTexture(url, ktx);
      let format;
      if (ktxTexture.needsTranscoding) {
        format = basisTranscodedTextureFormat;
        const transcodeFormat = ktx.TranscodeTarget[basisTranscoderFormat];
        const result = ktxTexture.transcodeBasis(transcodeFormat, 0);
        if (result !== ktx.ErrorCode.SUCCESS) {
          throw new Error("Unable to transcode basis texture.");
        }
      } else {
        format = getTextureFormatFromKTXTexture(ktxTexture);
      }
      const levelBuffers = createLevelBuffersFromKTX(ktxTexture);
      const textureOptions = {
        width: ktxTexture.baseWidth,
        height: ktxTexture.baseHeight,
        format,
        mipLevelCount: ktxTexture.numLevels,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
      convertFormatIfRequired(textureOptions);
      return textureOptions;
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl)
        settings.jsUrl = jsUrl;
      if (wasmUrl)
        settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToKTXBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getKTX();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type]?.(message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    };

})();
`;let fh=null;class PT{constructor(){fh||(fh=URL.createObjectURL(new Blob([e8],{type:"application/javascript"}))),this.worker=new Worker(fh)}}PT.revokeObjectURL=function(){fh&&(URL.revokeObjectURL(fh),fh=null)};const hg={jsUrl:"https://files.pixijs.download/transcoders/ktx/libktx.js",wasmUrl:"https://files.pixijs.download/transcoders/ktx/libktx.wasm"};function n8(n){Object.assign(hg,n)}let $f;const NT={};function i8(n){return $f||($f=new PT().worker,$f.onmessage=t=>{const{success:e,url:i,textureOptions:a}=t.data;e||console.warn("Failed to load KTX texture",i),NT[i](a)},$f.postMessage({type:"init",jsUrl:hg.jsUrl,wasmUrl:hg.wasmUrl,supportedTextures:n})),$f}function zT(n,t){const e=i8(t);return new Promise(i=>{NT[n]=i,e.postMessage({type:"load",url:n})})}const r8={extension:{type:I.LoadParser,priority:Yr.High,name:"loadKTX2"},name:"loadKTX2",test(n){return va(n,".ktx2")},async load(n,t,e){const i=await kd(),a=await zT(n,i),o=new Vd(a);return Io(o,e,n)},async unload(n){Array.isArray(n)?n.forEach(t=>t.destroy(!0)):n.destroy(!0)}},C_={rgb8unorm:{convertedFormat:"rgba8unorm",convertFunction:p1},"rgb8unorm-srgb":{convertedFormat:"rgba8unorm-srgb",convertFunction:p1}};function a8(n){const t=n.format;if(C_[t]){const e=C_[t].convertFunction,i=n.resource;for(let a=0;a<i.length;a++)i[a]=e(i[a]);n.format=C_[t].convertedFormat}}function p1(n){const t=n.byteLength/3,e=new Uint32Array(t);for(let i=0;i<t;++i)e[i]=n[i*3]+(n[i*3+1]<<8)+(n[i*3+2]<<16)+4278190080;return new Uint8Array(e.buffer)}function s8(n){const t=[];for(let e=0;e<n.numLevels;e++){const i=n.getImageData(e,0,0),a=new Uint8Array(i.byteLength);a.set(i),t.push(a)}return t}const l8={6408:"rgba8unorm",32856:"bgra8unorm",32857:"rgb10a2unorm",33189:"depth16unorm",33190:"depth24plus",33321:"r8unorm",33323:"rg8unorm",33325:"r16float",33326:"r32float",33327:"rg16float",33328:"rg32float",33329:"r8sint",33330:"r8uint",33331:"r16sint",33332:"r16uint",33333:"r32sint",33334:"r32uint",33335:"rg8sint",33336:"rg8uint",33337:"rg16sint",33338:"rg16uint",33339:"rg32sint",33340:"rg32uint",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",34836:"rgba32float",34842:"rgba16float",35056:"depth24plus-stencil8",35898:"rg11b10ufloat",35901:"rgb9e5ufloat",35907:"rgba8unorm-srgb",36012:"depth32float",36013:"depth32float-stencil8",36168:"stencil8",36208:"rgba32uint",36214:"rgba16uint",36220:"rgba8uint",36226:"rgba32sint",36232:"rgba16sint",36238:"rgba8sint",36492:"bc7-rgba-unorm",36756:"r8snorm",36757:"rg8snorm",36759:"rgba8snorm",37496:"etc2-rgba8unorm",37808:"astc-4x4-unorm"};function HT(n){const t=l8[n];if(t)return t;throw new Error(`Unsupported glInternalFormat: ${n}`)}const o8={23:"rgb8unorm",37:"rgba8unorm",43:"rgba8unorm-srgb"};function LT(n){const t=o8[n];if(t)return t;throw new Error(`Unsupported VkFormat: ${n}`)}function u8(n){return n.classId===2?LT(n.vkFormat):HT(n.glInternalformat)}const c8={"bc3-rgba-unorm":"BC3_RGBA","bc7-rgba-unorm":"BC7_M5_RGBA","etc2-rgba8unorm":"ETC2_RGBA","astc-4x4-unorm":"ASTC_4x4_RGBA",rgba8unorm:"RGBA32",rg11b10ufloat:"R11F_G11F_B10F"};function h8(n){const t=c8[n];if(t)return t;throw new Error(`Unsupported transcoderFormat: ${n}`)}const fg=["basis","bc7","bc6h","astc","etc2","bc5","bc4","bc3","bc2","bc1","eac"],f8={extension:I.ResolveParser,test:n=>va(n,[".ktx",".ktx2",".dds"]),parse:n=>{var i;let t;const e=n.split(".");if(e.length>2){const a=e[e.length-2];fg.includes(a)&&(t=a)}else t=e[e.length-1];return{resolution:parseFloat(((i=Xo.RETINA_PREFIX.exec(n))==null?void 0:i[1])??"1"),format:t,src:n}}};let qm;const d8={extension:{type:I.DetectionParser,priority:2},test:async()=>!!(await Hd()||zd()),add:async n=>{const t=await Pb();return qm=p8(t),[...qm,...n]},remove:async n=>qm?n.filter(t=>!(t in qm)):n};function p8(n){const t=["basis"],e={};return n.forEach(i=>{const a=i.split("-")[0];a&&!e[a]&&(e[a]=!0,t.push(a))}),t.sort((i,a)=>{const o=fg.indexOf(i),h=fg.indexOf(a);return o===-1?1:h===-1?-1:o-h}),t}const m8=new $n,Sy=class{cull(t,e,i=!0){this._cullRecursive(t,e,i)}_cullRecursive(t,e,i=!0){if(t.cullable&&t.measurable&&t.includeInBuild){const a=t.cullArea??Pd(t,i,m8);t.culled=a.x>=e.x+e.width||a.y>=e.y+e.height||a.x+a.width<=e.x||a.y+a.height<=e.y}else t.culled=!1;if(!(!t.cullableChildren||t.culled||!t.renderable||!t.measurable||!t.includeInBuild))for(let a=0;a<t.children.length;a++)this._cullRecursive(t.children[a],e,i)}};Sy.shared=new Sy;let FT=Sy;class VT{static init(){this._renderRef=this.render.bind(this),this.render=()=>{FT.shared.cull(this.stage,this.renderer.screen),this.renderer.render({container:this.stage})}}static destroy(){this.render=this._renderRef}}VT.extension={priority:10,type:I.Application,name:"culler"};class g8 extends Qs{constructor(t={}){const{element:e,anchor:i,...a}=t;super({label:"DOMContainer",...a}),this.renderPipeId="dom",this.batched=!1,this._anchor=new Xe(0,0),i&&(this.anchor=i),this.element=t.element||document.createElement("div")}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set element(t){this._element!==t&&(this._element=t,this.onViewUpdate())}get element(){return this._element}updateBounds(){const t=this._bounds,e=this._element;if(!e){t.minX=0,t.minY=0,t.maxX=0,t.maxY=0;return}const{offsetWidth:i,offsetHeight:a}=e;t.minX=0,t.maxX=i,t.minY=0,t.maxY=a}destroy(t=!1){var e,i;super.destroy(t),(i=(e=this._element)==null?void 0:e.parentNode)==null||i.removeChild(this._element),this._element=null,this._anchor=null}}class kT{constructor(t){this._attachedDomElements=[],this._renderer=t,this._renderer.runners.postrender.add(this),this._domElement=document.createElement("div"),this._domElement.style.position="absolute",this._domElement.style.top="0",this._domElement.style.left="0",this._domElement.style.pointerEvents="none",this._domElement.style.zIndex="1000"}addRenderable(t,e){this._attachedDomElements.includes(t)||this._attachedDomElements.push(t)}updateRenderable(t){}validateRenderable(t){return!0}postrender(){var o;const t=this._attachedDomElements;if(t.length===0){this._domElement.remove();return}const e=this._renderer.view.canvas;this._domElement.parentNode!==e.parentNode&&((o=e.parentNode)==null||o.appendChild(this._domElement));const i=parseFloat(e.style.width)/e.width*this._renderer.resolution,a=parseFloat(e.style.height)/e.height*this._renderer.resolution;this._domElement.style.transform=`translate(${e.offsetLeft}px, ${e.offsetTop}px) scale(${i}, ${a})`;for(let h=0;h<t.length;h++){const f=t[h],m=f.element;if(!f.parent||f.globalDisplayStatus<7)m==null||m.remove(),t.splice(h,1),h--;else{this._domElement.contains(m)||(m.style.position="absolute",m.style.pointerEvents="auto",this._domElement.appendChild(m));const g=f.worldTransform,b=f._anchor,x=f.width*b.x,E=f.height*b.y;m.style.transformOrigin=`${x}px ${E}px`,m.style.transform=`matrix(${g.a}, ${g.b}, ${g.c}, ${g.d}, ${g.tx-x}, ${g.ty-E})`,m.style.opacity=f.groupAlpha.toString()}}}destroy(){var t;this._renderer.runners.postrender.remove(this);for(let e=0;e<this._attachedDomElements.length;e++)(t=this._attachedDomElements[e].element)==null||t.remove();this._attachedDomElements.length=0,this._domElement.remove(),this._renderer=null}}kT.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"dom"};var td={},Ul={},Fu={},m1;function Wg(){if(m1)return Fu;m1=1;function n(o,h,f){if(f===void 0&&(f=Array.prototype),o&&typeof f.find=="function")return f.find.call(o,h);for(var m=0;m<o.length;m++)if(Object.prototype.hasOwnProperty.call(o,m)){var g=o[m];if(h.call(void 0,g,m,o))return g}}function t(o,h){return h===void 0&&(h=Object),h&&typeof h.freeze=="function"?h.freeze(o):o}function e(o,h){if(o===null||typeof o!="object")throw new TypeError("target is not an object");for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(o[f]=h[f]);return o}var i=t({HTML:"text/html",isHTML:function(o){return o===i.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),a=t({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(o){return o===a.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Fu.assign=e,Fu.find=n,Fu.freeze=t,Fu.MIME_TYPE=i,Fu.NAMESPACE=a,Fu}var g1;function XT(){if(g1)return Ul;g1=1;var n=Wg(),t=n.find,e=n.NAMESPACE;function i(M){return M!==""}function a(M){return M?M.split(/[\t\n\f\r ]+/).filter(i):[]}function o(M,O){return M.hasOwnProperty(O)||(M[O]=!0),M}function h(M){if(!M)return[];var O=a(M);return Object.keys(O.reduce(o,{}))}function f(M){return function(O){return M&&M.indexOf(O)!==-1}}function m(M,O){for(var F in M)Object.prototype.hasOwnProperty.call(M,F)&&(O[F]=M[F])}function g(M,O){var F=M.prototype;if(!(F instanceof O)){let at=function(){};at.prototype=O.prototype,at=new at,m(F,at),M.prototype=F=at}F.constructor!=M&&(typeof M!="function"&&console.error("unknown Class:"+M),F.constructor=M)}var b={},x=b.ELEMENT_NODE=1,E=b.ATTRIBUTE_NODE=2,T=b.TEXT_NODE=3,R=b.CDATA_SECTION_NODE=4,D=b.ENTITY_REFERENCE_NODE=5,C=b.ENTITY_NODE=6,G=b.PROCESSING_INSTRUCTION_NODE=7,P=b.COMMENT_NODE=8,H=b.DOCUMENT_NODE=9,q=b.DOCUMENT_TYPE_NODE=10,et=b.DOCUMENT_FRAGMENT_NODE=11,ot=b.NOTATION_NODE=12,Y={},ht={};Y.INDEX_SIZE_ERR=(ht[1]="Index size error",1),Y.DOMSTRING_SIZE_ERR=(ht[2]="DOMString size error",2);var N=Y.HIERARCHY_REQUEST_ERR=(ht[3]="Hierarchy request error",3);Y.WRONG_DOCUMENT_ERR=(ht[4]="Wrong document",4),Y.INVALID_CHARACTER_ERR=(ht[5]="Invalid character",5),Y.NO_DATA_ALLOWED_ERR=(ht[6]="No data allowed",6),Y.NO_MODIFICATION_ALLOWED_ERR=(ht[7]="No modification allowed",7);var X=Y.NOT_FOUND_ERR=(ht[8]="Not found",8);Y.NOT_SUPPORTED_ERR=(ht[9]="Not supported",9);var W=Y.INUSE_ATTRIBUTE_ERR=(ht[10]="Attribute in use",10);Y.INVALID_STATE_ERR=(ht[11]="Invalid state",11),Y.SYNTAX_ERR=(ht[12]="Syntax error",12),Y.INVALID_MODIFICATION_ERR=(ht[13]="Invalid modification",13),Y.NAMESPACE_ERR=(ht[14]="Invalid namespace",14),Y.INVALID_ACCESS_ERR=(ht[15]="Invalid access",15);function rt(M,O){if(O instanceof Error)var F=O;else F=this,Error.call(this,ht[M]),this.message=ht[M],Error.captureStackTrace&&Error.captureStackTrace(this,rt);return F.code=M,O&&(this.message=this.message+": "+O),F}rt.prototype=Error.prototype,m(Y,rt);function ft(){}ft.prototype={length:0,item:function(M){return M>=0&&M<this.length?this[M]:null},toString:function(M,O){for(var F=[],at=0;at<this.length;at++)Ze(this[at],F,M,O);return F.join("")},filter:function(M){return Array.prototype.filter.call(this,M)},indexOf:function(M){return Array.prototype.indexOf.call(this,M)}};function St(M,O){this._node=M,this._refresh=O,Ct(this)}function Ct(M){var O=M._node._inc||M._node.ownerDocument._inc;if(M._inc!==O){var F=M._refresh(M._node);if(qo(M,"length",F.length),!M.$$length||F.length<M.$$length)for(var at=F.length;at in M;at++)Object.prototype.hasOwnProperty.call(M,at)&&delete M[at];m(F,M),M._inc=O}}St.prototype.item=function(M){return Ct(this),this[M]||null},g(St,ft);function V(){}function j(M,O){for(var F=M.length;F--;)if(M[F]===O)return F}function ut(M,O,F,at){if(at?O[j(O,at)]=F:O[O.length++]=F,M){F.ownerElement=M;var Et=M.ownerDocument;Et&&(at&&Lt(Et,M,at),Mt(Et,M,F))}}function ct(M,O,F){var at=j(O,F);if(at>=0){for(var Et=O.length-1;at<Et;)O[at]=O[++at];if(O.length=Et,M){var Ft=M.ownerDocument;Ft&&(Lt(Ft,M,F),F.ownerElement=null)}}else throw new rt(X,new Error(M.tagName+"@"+F))}V.prototype={length:0,item:ft.prototype.item,getNamedItem:function(M){for(var O=this.length;O--;){var F=this[O];if(F.nodeName==M)return F}},setNamedItem:function(M){var O=M.ownerElement;if(O&&O!=this._ownerElement)throw new rt(W);var F=this.getNamedItem(M.nodeName);return ut(this._ownerElement,this,M,F),F},setNamedItemNS:function(M){var O=M.ownerElement,F;if(O&&O!=this._ownerElement)throw new rt(W);return F=this.getNamedItemNS(M.namespaceURI,M.localName),ut(this._ownerElement,this,M,F),F},removeNamedItem:function(M){var O=this.getNamedItem(M);return ct(this._ownerElement,this,O),O},removeNamedItemNS:function(M,O){var F=this.getNamedItemNS(M,O);return ct(this._ownerElement,this,F),F},getNamedItemNS:function(M,O){for(var F=this.length;F--;){var at=this[F];if(at.localName==O&&at.namespaceURI==M)return at}return null}};function z(){}z.prototype={hasFeature:function(M,O){return!0},createDocument:function(M,O,F){var at=new yt;if(at.implementation=this,at.childNodes=new ft,at.doctype=F||null,F&&at.appendChild(F),O){var Et=at.createElementNS(M,O);at.appendChild(Et)}return at},createDocumentType:function(M,O,F){var at=new xa;return at.name=M,at.nodeName=M,at.publicId=O||"",at.systemId=F||"",at}};function tt(){}tt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(M,O){return ti(this,M,O)},replaceChild:function(M,O){ti(this,M,O,ir),O&&this.removeChild(O)},removeChild:function(M){return Pt(this,M)},appendChild:function(M){return this.insertBefore(M,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(M){return ql(this.ownerDocument||this,this,M)},normalize:function(){for(var M=this.firstChild;M;){var O=M.nextSibling;O&&O.nodeType==T&&M.nodeType==T?(this.removeChild(O),M.appendData(O.data)):(M.normalize(),M=O)}},isSupported:function(M,O){return this.ownerDocument.implementation.hasFeature(M,O)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(M){for(var O=this;O;){var F=O._nsMap;if(F){for(var at in F)if(Object.prototype.hasOwnProperty.call(F,at)&&F[at]===M)return at}O=O.nodeType==E?O.ownerDocument:O.parentNode}return null},lookupNamespaceURI:function(M){for(var O=this;O;){var F=O._nsMap;if(F&&Object.prototype.hasOwnProperty.call(F,M))return F[M];O=O.nodeType==E?O.ownerDocument:O.parentNode}return null},isDefaultNamespace:function(M){var O=this.lookupPrefix(M);return O==null}};function Tt(M){return M=="<"&&"&lt;"||M==">"&&"&gt;"||M=="&"&&"&amp;"||M=='"'&&"&quot;"||"&#"+M.charCodeAt()+";"}m(b,tt),m(b,tt.prototype);function Rt(M,O){if(O(M))return!0;if(M=M.firstChild)do if(Rt(M,O))return!0;while(M=M.nextSibling)}function yt(){this.ownerDocument=this}function Mt(M,O,F){M&&M._inc++;var at=F.namespaceURI;at===e.XMLNS&&(O._nsMap[F.prefix?F.localName:""]=F.value)}function Lt(M,O,F,at){M&&M._inc++;var Et=F.namespaceURI;Et===e.XMLNS&&delete O._nsMap[F.prefix?F.localName:""]}function Ge(M,O,F){if(M&&M._inc){M._inc++;var at=O.childNodes;if(F)at[at.length++]=F;else{for(var Et=O.firstChild,Ft=0;Et;)at[Ft++]=Et,Et=Et.nextSibling;at.length=Ft,delete at[at.length]}}}function Pt(M,O){var F=O.previousSibling,at=O.nextSibling;return F?F.nextSibling=at:M.firstChild=at,at?at.previousSibling=F:M.lastChild=F,O.parentNode=null,O.previousSibling=null,O.nextSibling=null,Ge(M.ownerDocument,M),O}function ne(M){return M&&(M.nodeType===tt.DOCUMENT_NODE||M.nodeType===tt.DOCUMENT_FRAGMENT_NODE||M.nodeType===tt.ELEMENT_NODE)}function ce(M){return M&&(Be(M)||Fe(M)||Te(M)||M.nodeType===tt.DOCUMENT_FRAGMENT_NODE||M.nodeType===tt.COMMENT_NODE||M.nodeType===tt.PROCESSING_INSTRUCTION_NODE)}function Te(M){return M&&M.nodeType===tt.DOCUMENT_TYPE_NODE}function Be(M){return M&&M.nodeType===tt.ELEMENT_NODE}function Fe(M){return M&&M.nodeType===tt.TEXT_NODE}function ve(M,O){var F=M.childNodes||[];if(t(F,Be)||Te(O))return!1;var at=t(F,Te);return!(O&&at&&F.indexOf(at)>F.indexOf(O))}function ln(M,O){var F=M.childNodes||[];function at(Ft){return Be(Ft)&&Ft!==O}if(t(F,at))return!1;var Et=t(F,Te);return!(O&&Et&&F.indexOf(Et)>F.indexOf(O))}function Pe(M,O,F){if(!ne(M))throw new rt(N,"Unexpected parent node type "+M.nodeType);if(F&&F.parentNode!==M)throw new rt(X,"child not in parent");if(!ce(O)||Te(O)&&M.nodeType!==tt.DOCUMENT_NODE)throw new rt(N,"Unexpected node type "+O.nodeType+" for parent node type "+M.nodeType)}function Xn(M,O,F){var at=M.childNodes||[],Et=O.childNodes||[];if(O.nodeType===tt.DOCUMENT_FRAGMENT_NODE){var Ft=Et.filter(Be);if(Ft.length>1||t(Et,Fe))throw new rt(N,"More than one element or text in fragment");if(Ft.length===1&&!ve(M,F))throw new rt(N,"Element in fragment can not be inserted before doctype")}if(Be(O)&&!ve(M,F))throw new rt(N,"Only one element can be added and only after doctype");if(Te(O)){if(t(at,Te))throw new rt(N,"Only one doctype is allowed");var xe=t(at,Be);if(F&&at.indexOf(xe)<at.indexOf(F))throw new rt(N,"Doctype can only be inserted before an element");if(!F&&xe)throw new rt(N,"Doctype can not be appended since element is present")}}function ir(M,O,F){var at=M.childNodes||[],Et=O.childNodes||[];if(O.nodeType===tt.DOCUMENT_FRAGMENT_NODE){var Ft=Et.filter(Be);if(Ft.length>1||t(Et,Fe))throw new rt(N,"More than one element or text in fragment");if(Ft.length===1&&!ln(M,F))throw new rt(N,"Element in fragment can not be inserted before doctype")}if(Be(O)&&!ln(M,F))throw new rt(N,"Only one element can be added and only after doctype");if(Te(O)){if(t(at,function(Di){return Te(Di)&&Di!==F}))throw new rt(N,"Only one doctype is allowed");var xe=t(at,Be);if(F&&at.indexOf(xe)<at.indexOf(F))throw new rt(N,"Doctype can only be inserted before an element")}}function ti(M,O,F,at){Pe(M,O,F),M.nodeType===tt.DOCUMENT_NODE&&(at||Xn)(M,O,F);var Et=O.parentNode;if(Et&&Et.removeChild(O),O.nodeType===et){var Ft=O.firstChild;if(Ft==null)return O;var xe=O.lastChild}else Ft=xe=O;var En=F?F.previousSibling:M.lastChild;Ft.previousSibling=En,xe.nextSibling=F,En?En.nextSibling=Ft:M.firstChild=Ft,F==null?M.lastChild=xe:F.previousSibling=xe;do Ft.parentNode=M;while(Ft!==xe&&(Ft=Ft.nextSibling));return Ge(M.ownerDocument||M,M),O.nodeType==et&&(O.firstChild=O.lastChild=null),O}function jn(M,O){return O.parentNode&&O.parentNode.removeChild(O),O.parentNode=M,O.previousSibling=M.lastChild,O.nextSibling=null,O.previousSibling?O.previousSibling.nextSibling=O:M.firstChild=O,M.lastChild=O,Ge(M.ownerDocument,M,O),O}yt.prototype={nodeName:"#document",nodeType:H,doctype:null,documentElement:null,_inc:1,insertBefore:function(M,O){if(M.nodeType==et){for(var F=M.firstChild;F;){var at=F.nextSibling;this.insertBefore(F,O),F=at}return M}return ti(this,M,O),M.ownerDocument=this,this.documentElement===null&&M.nodeType===x&&(this.documentElement=M),M},removeChild:function(M){return this.documentElement==M&&(this.documentElement=null),Pt(this,M)},replaceChild:function(M,O){ti(this,M,O,ir),M.ownerDocument=this,O&&this.removeChild(O),Be(M)&&(this.documentElement=M)},importNode:function(M,O){return as(this,M,O)},getElementById:function(M){var O=null;return Rt(this.documentElement,function(F){if(F.nodeType==x&&F.getAttribute("id")==M)return O=F,!0}),O},getElementsByClassName:function(M){var O=h(M);return new St(this,function(F){var at=[];return O.length>0&&Rt(F.documentElement,function(Et){if(Et!==F&&Et.nodeType===x){var Ft=Et.getAttribute("class");if(Ft){var xe=M===Ft;if(!xe){var En=h(Ft);xe=O.every(f(En))}xe&&at.push(Et)}}}),at})},createElement:function(M){var O=new ie;O.ownerDocument=this,O.nodeName=M,O.tagName=M,O.localName=M,O.childNodes=new ft;var F=O.attributes=new V;return F._ownerElement=O,O},createDocumentFragment:function(){var M=new is;return M.ownerDocument=this,M.childNodes=new ft,M},createTextNode:function(M){var O=new pi;return O.ownerDocument=this,O.appendData(M),O},createComment:function(M){var O=new Xl;return O.ownerDocument=this,O.appendData(M),O},createCDATASection:function(M){var O=new Il;return O.ownerDocument=this,O.appendData(M),O},createProcessingInstruction:function(M,O){var F=new $s;return F.ownerDocument=this,F.tagName=F.nodeName=F.target=M,F.nodeValue=F.data=O,F},createAttribute:function(M){var O=new Pn;return O.ownerDocument=this,O.name=M,O.nodeName=M,O.localName=M,O.specified=!0,O},createEntityReference:function(M){var O=new Yl;return O.ownerDocument=this,O.nodeName=M,O},createElementNS:function(M,O){var F=new ie,at=O.split(":"),Et=F.attributes=new V;return F.childNodes=new ft,F.ownerDocument=this,F.nodeName=O,F.tagName=O,F.namespaceURI=M,at.length==2?(F.prefix=at[0],F.localName=at[1]):F.localName=O,Et._ownerElement=F,F},createAttributeNS:function(M,O){var F=new Pn,at=O.split(":");return F.ownerDocument=this,F.nodeName=O,F.name=O,F.namespaceURI=M,F.specified=!0,at.length==2?(F.prefix=at[0],F.localName=at[1]):F.localName=O,F}},g(yt,tt);function ie(){this._nsMap={}}ie.prototype={nodeType:x,hasAttribute:function(M){return this.getAttributeNode(M)!=null},getAttribute:function(M){var O=this.getAttributeNode(M);return O&&O.value||""},getAttributeNode:function(M){return this.attributes.getNamedItem(M)},setAttribute:function(M,O){var F=this.ownerDocument.createAttribute(M);F.value=F.nodeValue=""+O,this.setAttributeNode(F)},removeAttribute:function(M){var O=this.getAttributeNode(M);O&&this.removeAttributeNode(O)},appendChild:function(M){return M.nodeType===et?this.insertBefore(M,null):jn(this,M)},setAttributeNode:function(M){return this.attributes.setNamedItem(M)},setAttributeNodeNS:function(M){return this.attributes.setNamedItemNS(M)},removeAttributeNode:function(M){return this.attributes.removeNamedItem(M.nodeName)},removeAttributeNS:function(M,O){var F=this.getAttributeNodeNS(M,O);F&&this.removeAttributeNode(F)},hasAttributeNS:function(M,O){return this.getAttributeNodeNS(M,O)!=null},getAttributeNS:function(M,O){var F=this.getAttributeNodeNS(M,O);return F&&F.value||""},setAttributeNS:function(M,O,F){var at=this.ownerDocument.createAttributeNS(M,O);at.value=at.nodeValue=""+F,this.setAttributeNode(at)},getAttributeNodeNS:function(M,O){return this.attributes.getNamedItemNS(M,O)},getElementsByTagName:function(M){return new St(this,function(O){var F=[];return Rt(O,function(at){at!==O&&at.nodeType==x&&(M==="*"||at.tagName==M)&&F.push(at)}),F})},getElementsByTagNameNS:function(M,O){return new St(this,function(F){var at=[];return Rt(F,function(Et){Et!==F&&Et.nodeType===x&&(M==="*"||Et.namespaceURI===M)&&(O==="*"||Et.localName==O)&&at.push(Et)}),at})}},yt.prototype.getElementsByTagName=ie.prototype.getElementsByTagName,yt.prototype.getElementsByTagNameNS=ie.prototype.getElementsByTagNameNS,g(ie,tt);function Pn(){}Pn.prototype.nodeType=E,g(Pn,tt);function Kr(){}Kr.prototype={data:"",substringData:function(M,O){return this.data.substring(M,M+O)},appendData:function(M){M=this.data+M,this.nodeValue=this.data=M,this.length=M.length},insertData:function(M,O){this.replaceData(M,0,O)},appendChild:function(M){throw new Error(ht[N])},deleteData:function(M,O){this.replaceData(M,O,"")},replaceData:function(M,O,F){var at=this.data.substring(0,M),Et=this.data.substring(M+O);F=at+F+Et,this.nodeValue=this.data=F,this.length=F.length}},g(Kr,tt);function pi(){}pi.prototype={nodeName:"#text",nodeType:T,splitText:function(M){var O=this.data,F=O.substring(M);O=O.substring(0,M),this.data=this.nodeValue=O,this.length=O.length;var at=this.ownerDocument.createTextNode(F);return this.parentNode&&this.parentNode.insertBefore(at,this.nextSibling),at}},g(pi,Kr);function Xl(){}Xl.prototype={nodeName:"#comment",nodeType:P},g(Xl,Kr);function Il(){}Il.prototype={nodeName:"#cdata-section",nodeType:R},g(Il,Kr);function xa(){}xa.prototype.nodeType=q,g(xa,tt);function Js(){}Js.prototype.nodeType=ot,g(Js,tt);function Yo(){}Yo.prototype.nodeType=C,g(Yo,tt);function Yl(){}Yl.prototype.nodeType=D,g(Yl,tt);function is(){}is.prototype.nodeName="#document-fragment",is.prototype.nodeType=et,g(is,tt);function $s(){}$s.prototype.nodeType=G,g($s,tt);function mi(){}mi.prototype.serializeToString=function(M,O,F){return an.call(M,O,F)},tt.prototype.toString=an;function an(M,O){var F=[],at=this.nodeType==9&&this.documentElement||this,Et=at.prefix,Ft=at.namespaceURI;if(Ft&&Et==null){var Et=at.lookupPrefix(Ft);if(Et==null)var xe=[{namespace:Ft,prefix:null}]}return Ze(this,F,M,O,xe),F.join("")}function rs(M,O,F){var at=M.prefix||"",Et=M.namespaceURI;if(!Et||at==="xml"&&Et===e.XML||Et===e.XMLNS)return!1;for(var Ft=F.length;Ft--;){var xe=F[Ft];if(xe.prefix===at)return xe.namespace!==Et}return!0}function Mi(M,O,F){M.push(" ",O,'="',F.replace(/[<>&"\t\n\r]/g,Tt),'"')}function Ze(M,O,F,at,Et){if(Et||(Et=[]),at)if(M=at(M),M){if(typeof M=="string"){O.push(M);return}}else return;switch(M.nodeType){case x:var Ft=M.attributes,xe=Ft.length,he=M.firstChild,En=M.tagName;F=e.isHTML(M.namespaceURI)||F;var Di=En;if(!F&&!M.prefix&&M.namespaceURI){for(var gi,rr=0;rr<Ft.length;rr++)if(Ft.item(rr).name==="xmlns"){gi=Ft.item(rr).value;break}if(!gi)for(var ar=Et.length-1;ar>=0;ar--){var sr=Et[ar];if(sr.prefix===""&&sr.namespace===M.namespaceURI){gi=sr.namespace;break}}if(gi!==M.namespaceURI)for(var ar=Et.length-1;ar>=0;ar--){var sr=Et[ar];if(sr.namespace===M.namespaceURI){sr.prefix&&(Di=sr.prefix+":"+En);break}}}O.push("<",Di);for(var Kn=0;Kn<xe;Kn++){var wi=Ft.item(Kn);wi.prefix=="xmlns"?Et.push({prefix:wi.localName,namespace:wi.value}):wi.nodeName=="xmlns"&&Et.push({prefix:"",namespace:wi.value})}for(var Kn=0;Kn<xe;Kn++){var wi=Ft.item(Kn);if(rs(wi,F,Et)){var ei=wi.prefix||"",on=wi.namespaceURI;Mi(O,ei?"xmlns:"+ei:"xmlns",on),Et.push({prefix:ei,namespace:on})}Ze(wi,O,F,at,Et)}if(En===Di&&rs(M,F,Et)){var ei=M.prefix||"",on=M.namespaceURI;Mi(O,ei?"xmlns:"+ei:"xmlns",on),Et.push({prefix:ei,namespace:on})}if(he||F&&!/^(?:meta|link|img|br|hr|input)$/i.test(En)){if(O.push(">"),F&&/^script$/i.test(En))for(;he;)he.data?O.push(he.data):Ze(he,O,F,at,Et.slice()),he=he.nextSibling;else for(;he;)Ze(he,O,F,at,Et.slice()),he=he.nextSibling;O.push("</",Di,">")}else O.push("/>");return;case H:case et:for(var he=M.firstChild;he;)Ze(he,O,F,at,Et.slice()),he=he.nextSibling;return;case E:return Mi(O,M.name,M.value);case T:return O.push(M.data.replace(/[<&>]/g,Tt));case R:return O.push("<![CDATA[",M.data,"]]>");case P:return O.push("<!--",M.data,"-->");case q:var se=M.publicId,_i=M.systemId;if(O.push("<!DOCTYPE ",M.name),se)O.push(" PUBLIC ",se),_i&&_i!="."&&O.push(" ",_i),O.push(">");else if(_i&&_i!=".")O.push(" SYSTEM ",_i,">");else{var ss=M.internalSubset;ss&&O.push(" [",ss,"]"),O.push(">")}return;case G:return O.push("<?",M.target," ",M.data,"?>");case D:return O.push("&",M.nodeName,";");default:O.push("??",M.nodeName)}}function as(M,O,F){var at;switch(O.nodeType){case x:at=O.cloneNode(!1),at.ownerDocument=M;case et:break;case E:F=!0;break}if(at||(at=O.cloneNode(!1)),at.ownerDocument=M,at.parentNode=null,F)for(var Et=O.firstChild;Et;)at.appendChild(as(M,Et,F)),Et=Et.nextSibling;return at}function ql(M,O,F){var at=new O.constructor;for(var Et in O)if(Object.prototype.hasOwnProperty.call(O,Et)){var Ft=O[Et];typeof Ft!="object"&&Ft!=at[Et]&&(at[Et]=Ft)}switch(O.childNodes&&(at.childNodes=new ft),at.ownerDocument=M,at.nodeType){case x:var xe=O.attributes,En=at.attributes=new V,Di=xe.length;En._ownerElement=at;for(var gi=0;gi<Di;gi++)at.setAttributeNode(ql(M,xe.item(gi),!0));break;case E:F=!0}if(F)for(var rr=O.firstChild;rr;)at.appendChild(ql(M,rr,F)),rr=rr.nextSibling;return at}function qo(M,O,F){M[O]=F}try{if(Object.defineProperty){let M=function(O){switch(O.nodeType){case x:case et:var F=[];for(O=O.firstChild;O;)O.nodeType!==7&&O.nodeType!==8&&F.push(M(O)),O=O.nextSibling;return F.join("");default:return O.nodeValue}};Object.defineProperty(St.prototype,"length",{get:function(){return Ct(this),this.$$length}}),Object.defineProperty(tt.prototype,"textContent",{get:function(){return M(this)},set:function(O){switch(this.nodeType){case x:case et:for(;this.firstChild;)this.removeChild(this.firstChild);(O||String(O))&&this.appendChild(this.ownerDocument.createTextNode(O));break;default:this.data=O,this.value=O,this.nodeValue=O}}}),qo=function(O,F,at){O["$$"+F]=at}}}catch{}return Ul.DocumentType=xa,Ul.DOMException=rt,Ul.DOMImplementation=z,Ul.Element=ie,Ul.Node=tt,Ul.NodeList=ft,Ul.XMLSerializer=mi,Ul}var ed={},B_={},_1;function _8(){return _1||(_1=1,function(n){var t=Wg().freeze;n.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=t({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),n.entityMap=n.HTML_ENTITIES}(B_)),B_}var jm={},y1;function y8(){if(y1)return jm;y1=1;var n=Wg().NAMESPACE,t=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,e=new RegExp("[\\-\\.0-9"+t.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+t.source+e.source+"*(?::"+t.source+e.source+"*)?$"),a=0,o=1,h=2,f=3,m=4,g=5,b=6,x=7;function E(N,X){this.message=N,this.locator=X,Error.captureStackTrace&&Error.captureStackTrace(this,E)}E.prototype=new Error,E.prototype.name=E.name;function T(){}T.prototype={parse:function(N,X,W){var rt=this.domBuilder;rt.startDocument(),q(X,X={}),R(N,X,W,rt,this.errorHandler),rt.endDocument()}};function R(N,X,W,rt,ft){function St(ie){if(ie>65535){ie-=65536;var Pn=55296+(ie>>10),Kr=56320+(ie&1023);return String.fromCharCode(Pn,Kr)}else return String.fromCharCode(ie)}function Ct(ie){var Pn=ie.slice(1,-1);return Object.hasOwnProperty.call(W,Pn)?W[Pn]:Pn.charAt(0)==="#"?St(parseInt(Pn.substr(1).replace("x","0x"))):(ft.error("entity not found:"+ie),ie)}function V(ie){if(ie>yt){var Pn=N.substring(yt,ie).replace(/&#?\w+;/g,Ct);tt&&j(yt),rt.characters(Pn,0,ie-yt),yt=ie}}function j(ie,Pn){for(;ie>=ct&&(Pn=z.exec(N));)ut=Pn.index,ct=ut+Pn[0].length,tt.lineNumber++;tt.columnNumber=ie-ut+1}for(var ut=0,ct=0,z=/.*(?:\r\n?|\n)|.*$/g,tt=rt.locator,Tt=[{currentNSMap:X}],Rt={},yt=0;;){try{var Mt=N.indexOf("<",yt);if(Mt<0){if(!N.substr(yt).match(/^\s*$/)){var Lt=rt.doc,Ge=Lt.createTextNode(N.substr(yt));Lt.appendChild(Ge),rt.currentElement=Ge}return}switch(Mt>yt&&V(Mt),N.charAt(Mt+1)){case"/":var Pe=N.indexOf(">",Mt+3),Pt=N.substring(Mt+2,Pe).replace(/[ \t\n\r]+$/g,""),ne=Tt.pop();Pe<0?(Pt=N.substring(Mt+2).replace(/[\s<].*/,""),ft.error("end tag name: "+Pt+" is not complete:"+ne.tagName),Pe=Mt+1+Pt.length):Pt.match(/\s</)&&(Pt=Pt.replace(/[\s<].*/,""),ft.error("end tag name: "+Pt+" maybe not complete"),Pe=Mt+1+Pt.length);var ce=ne.localNSMap,Te=ne.tagName==Pt,Be=Te||ne.tagName&&ne.tagName.toLowerCase()==Pt.toLowerCase();if(Be){if(rt.endElement(ne.uri,ne.localName,Pt),ce)for(var Fe in ce)Object.prototype.hasOwnProperty.call(ce,Fe)&&rt.endPrefixMapping(Fe);Te||ft.fatalError("end tag name: "+Pt+" is not match the current start tagName:"+ne.tagName)}else Tt.push(ne);Pe++;break;case"?":tt&&j(Mt),Pe=ot(N,Mt,rt);break;case"!":tt&&j(Mt),Pe=et(N,Mt,rt,ft);break;default:tt&&j(Mt);var ve=new Y,ln=Tt[Tt.length-1].currentNSMap,Pe=C(N,Mt,ve,ln,Ct,ft),Xn=ve.length;if(!ve.closed&&H(N,Pe,ve.tagName,Rt)&&(ve.closed=!0,W.nbsp||ft.warning("unclosed xml attribute")),tt&&Xn){for(var ir=D(tt,{}),ti=0;ti<Xn;ti++){var jn=ve[ti];j(jn.offset),jn.locator=D(tt,{})}rt.locator=ir,G(ve,rt,ln)&&Tt.push(ve),rt.locator=tt}else G(ve,rt,ln)&&Tt.push(ve);n.isHTML(ve.uri)&&!ve.closed?Pe=P(N,Pe,ve.tagName,Ct,rt):Pe++}}catch(ie){if(ie instanceof E)throw ie;ft.error("element parse error: "+ie),Pe=-1}Pe>yt?yt=Pe:V(Math.max(Mt,yt)+1)}}function D(N,X){return X.lineNumber=N.lineNumber,X.columnNumber=N.columnNumber,X}function C(N,X,W,rt,ft,St){function Ct(tt,Tt,Rt){W.attributeNames.hasOwnProperty(tt)&&St.fatalError("Attribute "+tt+" redefined"),W.addValue(tt,Tt.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,ft),Rt)}for(var V,j,ut=++X,ct=a;;){var z=N.charAt(ut);switch(z){case"=":if(ct===o)V=N.slice(X,ut),ct=f;else if(ct===h)ct=f;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(ct===f||ct===o)if(ct===o&&(St.warning('attribute value must after "="'),V=N.slice(X,ut)),X=ut+1,ut=N.indexOf(z,X),ut>0)j=N.slice(X,ut),Ct(V,j,X-1),ct=g;else throw new Error("attribute value no end '"+z+"' match");else if(ct==m)j=N.slice(X,ut),Ct(V,j,X),St.warning('attribute "'+V+'" missed start quot('+z+")!!"),X=ut+1,ct=g;else throw new Error('attribute value must after "="');break;case"/":switch(ct){case a:W.setTagName(N.slice(X,ut));case g:case b:case x:ct=x,W.closed=!0;case m:case o:break;case h:W.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return St.error("unexpected end of input"),ct==a&&W.setTagName(N.slice(X,ut)),ut;case">":switch(ct){case a:W.setTagName(N.slice(X,ut));case g:case b:case x:break;case m:case o:j=N.slice(X,ut),j.slice(-1)==="/"&&(W.closed=!0,j=j.slice(0,-1));case h:ct===h&&(j=V),ct==m?(St.warning('attribute "'+j+'" missed quot(")!'),Ct(V,j,X)):((!n.isHTML(rt[""])||!j.match(/^(?:disabled|checked|selected)$/i))&&St.warning('attribute "'+j+'" missed value!! "'+j+'" instead!!'),Ct(j,j,X));break;case f:throw new Error("attribute value missed!!")}return ut;case"":z=" ";default:if(z<=" ")switch(ct){case a:W.setTagName(N.slice(X,ut)),ct=b;break;case o:V=N.slice(X,ut),ct=h;break;case m:var j=N.slice(X,ut);St.warning('attribute "'+j+'" missed quot(")!!'),Ct(V,j,X);case g:ct=b;break}else switch(ct){case h:W.tagName,(!n.isHTML(rt[""])||!V.match(/^(?:disabled|checked|selected)$/i))&&St.warning('attribute "'+V+'" missed value!! "'+V+'" instead2!!'),Ct(V,V,X),X=ut,ct=o;break;case g:St.warning('attribute space is required"'+V+'"!!');case b:ct=o,X=ut;break;case f:ct=m,X=ut;break;case x:throw new Error("elements closed character '/' and '>' must be connected to")}}ut++}}function G(N,X,W){for(var rt=N.tagName,ft=null,z=N.length;z--;){var St=N[z],Ct=St.qName,V=St.value,tt=Ct.indexOf(":");if(tt>0)var j=St.prefix=Ct.slice(0,tt),ut=Ct.slice(tt+1),ct=j==="xmlns"&&ut;else ut=Ct,j=null,ct=Ct==="xmlns"&&"";St.localName=ut,ct!==!1&&(ft==null&&(ft={},q(W,W={})),W[ct]=ft[ct]=V,St.uri=n.XMLNS,X.startPrefixMapping(ct,V))}for(var z=N.length;z--;){St=N[z];var j=St.prefix;j&&(j==="xml"&&(St.uri=n.XML),j!=="xmlns"&&(St.uri=W[j||""]))}var tt=rt.indexOf(":");tt>0?(j=N.prefix=rt.slice(0,tt),ut=N.localName=rt.slice(tt+1)):(j=null,ut=N.localName=rt);var Tt=N.uri=W[j||""];if(X.startElement(Tt,ut,rt,N),N.closed){if(X.endElement(Tt,ut,rt),ft)for(j in ft)Object.prototype.hasOwnProperty.call(ft,j)&&X.endPrefixMapping(j)}else return N.currentNSMap=W,N.localNSMap=ft,!0}function P(N,X,W,rt,ft){if(/^(?:script|textarea)$/i.test(W)){var St=N.indexOf("</"+W+">",X),Ct=N.substring(X+1,St);if(/[&<]/.test(Ct))return/^script$/i.test(W)?(ft.characters(Ct,0,Ct.length),St):(Ct=Ct.replace(/&#?\w+;/g,rt),ft.characters(Ct,0,Ct.length),St)}return X+1}function H(N,X,W,rt){var ft=rt[W];return ft==null&&(ft=N.lastIndexOf("</"+W+">"),ft<X&&(ft=N.lastIndexOf("</"+W)),rt[W]=ft),ft<X}function q(N,X){for(var W in N)Object.prototype.hasOwnProperty.call(N,W)&&(X[W]=N[W])}function et(N,X,W,rt){var ft=N.charAt(X+2);switch(ft){case"-":if(N.charAt(X+3)==="-"){var St=N.indexOf("-->",X+4);return St>X?(W.comment(N,X+4,St-X-4),St+3):(rt.error("Unclosed comment"),-1)}else return-1;default:if(N.substr(X+3,6)=="CDATA["){var St=N.indexOf("]]>",X+9);return W.startCDATA(),W.characters(N,X+9,St-X-9),W.endCDATA(),St+3}var Ct=ht(N,X),V=Ct.length;if(V>1&&/!doctype/i.test(Ct[0][0])){var j=Ct[1][0],ut=!1,ct=!1;V>3&&(/^public$/i.test(Ct[2][0])?(ut=Ct[3][0],ct=V>4&&Ct[4][0]):/^system$/i.test(Ct[2][0])&&(ct=Ct[3][0]));var z=Ct[V-1];return W.startDTD(j,ut,ct),W.endDTD(),z.index+z[0].length}}return-1}function ot(N,X,W){var rt=N.indexOf("?>",X);if(rt){var ft=N.substring(X,rt).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return ft?(ft[0].length,W.processingInstruction(ft[1],ft[2]),rt+2):-1}return-1}function Y(){this.attributeNames={}}Y.prototype={setTagName:function(N){if(!i.test(N))throw new Error("invalid tagName:"+N);this.tagName=N},addValue:function(N,X,W){if(!i.test(N))throw new Error("invalid attribute:"+N);this.attributeNames[N]=this.length,this[this.length++]={qName:N,value:X,offset:W}},length:0,getLocalName:function(N){return this[N].localName},getLocator:function(N){return this[N].locator},getQName:function(N){return this[N].qName},getURI:function(N){return this[N].uri},getValue:function(N){return this[N].value}};function ht(N,X){var W,rt=[],ft=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(ft.lastIndex=X,ft.exec(N);W=ft.exec(N);)if(rt.push(W),W[1])return rt}return jm.XMLReader=T,jm.ParseError=E,jm}var b1;function b8(){if(b1)return ed;b1=1;var n=Wg(),t=XT(),e=_8(),i=y8(),a=t.DOMImplementation,o=n.NAMESPACE,h=i.ParseError,f=i.XMLReader;function m(C){return C.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function g(C){this.options=C||{locator:{}}}g.prototype.parseFromString=function(C,G){var P=this.options,H=new f,q=P.domBuilder||new x,et=P.errorHandler,ot=P.locator,Y=P.xmlns||{},ht=/\/x?html?$/.test(G),N=ht?e.HTML_ENTITIES:e.XML_ENTITIES;ot&&q.setDocumentLocator(ot),H.errorHandler=b(et,q,ot),H.domBuilder=P.domBuilder||q,ht&&(Y[""]=o.HTML),Y.xml=Y.xml||o.XML;var X=P.normalizeLineEndings||m;return C&&typeof C=="string"?H.parse(X(C),Y,N):H.errorHandler.error("invalid doc source"),q.doc};function b(C,G,P){if(!C){if(G instanceof x)return G;C=G}var H={},q=C instanceof Function;P=P||{};function et(ot){var Y=C[ot];!Y&&q&&(Y=C.length==2?function(ht){C(ot,ht)}:C),H[ot]=Y&&function(ht){Y("[xmldom "+ot+"]	"+ht+T(P))}||function(){}}return et("warning"),et("error"),et("fatalError"),H}function x(){this.cdata=!1}function E(C,G){G.lineNumber=C.lineNumber,G.columnNumber=C.columnNumber}x.prototype={startDocument:function(){this.doc=new a().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(C,G,P,H){var q=this.doc,et=q.createElementNS(C,P||G),ot=H.length;D(this,et),this.currentElement=et,this.locator&&E(this.locator,et);for(var Y=0;Y<ot;Y++){var C=H.getURI(Y),ht=H.getValue(Y),P=H.getQName(Y),N=q.createAttributeNS(C,P);this.locator&&E(H.getLocator(Y),N),N.value=N.nodeValue=ht,et.setAttributeNode(N)}},endElement:function(C,G,P){var H=this.currentElement;H.tagName,this.currentElement=H.parentNode},startPrefixMapping:function(C,G){},endPrefixMapping:function(C){},processingInstruction:function(C,G){var P=this.doc.createProcessingInstruction(C,G);this.locator&&E(this.locator,P),D(this,P)},ignorableWhitespace:function(C,G,P){},characters:function(C,G,P){if(C=R.apply(this,arguments),C){if(this.cdata)var H=this.doc.createCDATASection(C);else var H=this.doc.createTextNode(C);this.currentElement?this.currentElement.appendChild(H):/^\s*$/.test(C)&&this.doc.appendChild(H),this.locator&&E(this.locator,H)}},skippedEntity:function(C){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(C){(this.locator=C)&&(C.lineNumber=0)},comment:function(C,G,P){C=R.apply(this,arguments);var H=this.doc.createComment(C);this.locator&&E(this.locator,H),D(this,H)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(C,G,P){var H=this.doc.implementation;if(H&&H.createDocumentType){var q=H.createDocumentType(C,G,P);this.locator&&E(this.locator,q),D(this,q),this.doc.doctype=q}},warning:function(C){console.warn("[xmldom warning]	"+C,T(this.locator))},error:function(C){console.error("[xmldom error]	"+C,T(this.locator))},fatalError:function(C){throw new h(C,this.locator)}};function T(C){if(C)return`
@`+(C.systemId||"")+"#[line:"+C.lineNumber+",col:"+C.columnNumber+"]"}function R(C,G,P){return typeof C=="string"?C.substr(G,P):C.length>=G+P||G?new java.lang.String(C,G,P)+"":C}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(C){x.prototype[C]=function(){return null}});function D(C,G){C.currentElement?C.currentElement.appendChild(G):C.doc.appendChild(G)}return ed.__DOMHandler=x,ed.normalizeLineEndings=m,ed.DOMParser=g,ed}var v1;function v8(){if(v1)return td;v1=1;var n=XT();return td.DOMImplementation=n.DOMImplementation,td.XMLSerializer=n.XMLSerializer,td.DOMParser=b8().DOMParser,td}var x8=v8();const S8={createCanvas:(n,t)=>new OffscreenCanvas(n??0,t??0),getCanvasRenderingContext2D:()=>OffscreenCanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>globalThis.location.href,getFontFaceSet:()=>globalThis.fonts,fetch:(n,t)=>fetch(n,t),parseXML:n=>new x8.DOMParser().parseFromString(n,"text/xml")};class E8{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this._tickerAdded||!this.domElement||(Bi.system.add(this._tickerUpdate,this,zl.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(Bi.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events._rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(this.events.supportsPointerEvents?new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY,pointerType:t.pointerType,pointerId:t.pointerId}):new MouseEvent("mousemove",{clientX:t.clientX,clientY:t.clientY}))}_tickerUpdate(t){this._deltaTime+=t.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}}const Pl=new E8;class Od extends xh{constructor(){super(...arguments),this.client=new Xe,this.movement=new Xe,this.offset=new Xe,this.global=new Xe,this.screen=new Xe}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,a,o,h,f,m,g,b,x,E,T,R,D){throw new Error("Method not implemented.")}}class pa extends Od{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Qu extends Od{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Qu.DOM_DELTA_PIXEL=0;Qu.DOM_DELTA_LINE=1;Qu.DOM_DELTA_PAGE=2;const T8=2048,A8=new Xe,nd=new Xe;class IT{constructor(t){this.dispatch=new Rr,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((i,a)=>i.priority-a.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let i=0,a=e.length;i<a;i++)e[i].fn(t);else kt(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){Pl.pauseUpdate=!0;const a=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",o=this[a](this.rootTarget,this.rootTarget.eventMode,A8.set(t,e),this.hitTestFn,this.hitPruneFn);return o&&o[0]}propagate(t,e){if(!t.target)return;const i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let a=0,o=i.length-1;a<o;a++)if(t.currentTarget=i[a],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let a=i.length-2;a>=0;a--)if(t.currentTarget=i[a],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,i=this._allInteractiveElements){if(i.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const a=Array.isArray(e)?e:[e];for(let o=i.length-1;o>=0;o--)a.forEach(h=>{t.currentTarget=i[o],this.notifyTarget(t,h)})}propagationPath(t){const e=[t];for(let i=0;i<T8&&t!==this.rootTarget&&t.parent;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,i,a,o,h=!1){let f=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Pl.pauseUpdate=!1),t.interactiveChildren&&t.children){const b=t.children;for(let x=b.length-1;x>=0;x--){const E=b[x],T=this.hitTestMoveRecursive(E,this._isInteractive(e)?e:E.eventMode,i,a,o,h||o(t,i));if(T){if(T.length>0&&!T[T.length-1].parent)continue;const R=t.isInteractive();(T.length>0||R)&&(R&&this._allInteractiveElements.push(t),T.push(t)),this._hitElements.length===0&&(this._hitElements=T),f=!0}}}const m=this._isInteractive(e),g=t.isInteractive();return g&&g&&this._allInteractiveElements.push(t),h||this._hitElements.length>0?null:f?this._hitElements:m&&!o(t,i)&&a(t,i)?g?[t]:[]:null}hitTestRecursive(t,e,i,a,o){if(this._interactivePrune(t)||o(t,i))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Pl.pauseUpdate=!1),t.interactiveChildren&&t.children){const m=t.children,g=i;for(let b=m.length-1;b>=0;b--){const x=m[b],E=this.hitTestRecursive(x,this._isInteractive(e)?e:x.eventMode,g,a,o);if(E){if(E.length>0&&!E[E.length-1].parent)continue;const T=t.isInteractive();return(E.length>0||T)&&E.push(t),E}}}const h=this._isInteractive(e),f=t.isInteractive();return h&&a(t,i)?f?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!t||!t.visible||!t.renderable||!t.measurable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren}hitPruneFn(t,e){if(t.hitArea&&(t.worldTransform.applyInverse(e,nd),!t.hitArea.contains(nd.x,nd.y)))return!0;if(t.effects&&t.effects.length)for(let i=0;i<t.effects.length;i++){const a=t.effects[i];if(a.containsPoint&&!a.containsPoint(e,this.hitTestFn))return!0}return!1}hitTestFn(t,e){return t.hitArea?!0:t!=null&&t.containsPoint?(t.worldTransform.applyInverse(e,nd),t.containsPoint(nd)):!1}notifyTarget(t,e){var o,h;if(!t.currentTarget.isInteractive())return;e??(e=t.type);const i=`on${e}`;(h=(o=t.currentTarget)[i])==null||h.call(o,t);const a=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this._notifyListeners(t,a),t.eventPhase===t.AT_TARGET&&this._notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof pa)){kt("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){const a=e.button===2;this.dispatchEvent(e,a?"rightdown":"mousedown")}const i=this.trackingData(t.pointerId);i.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var m,g;if(!(t instanceof pa)){kt("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const i=e.pointerType==="mouse"||e.pointerType==="pen",a=this.trackingData(t.pointerId),o=this.findMountedTarget(a.overTargets);if(((m=a.overTargets)==null?void 0:m.length)>0&&o!==e.target){const b=t.type==="mousemove"?"mouseout":"pointerout",x=this.createPointerEvent(t,b,o);if(this.dispatchEvent(x,"pointerout"),i&&this.dispatchEvent(x,"mouseout"),!e.composedPath().includes(o)){const E=this.createPointerEvent(t,"pointerleave",o);for(E.eventPhase=E.AT_TARGET;E.target&&!e.composedPath().includes(E.target);)E.currentTarget=E.target,this.notifyTarget(E),i&&this.notifyTarget(E,"mouseleave"),E.target=E.target.parent;this.freeEvent(E)}this.freeEvent(x)}if(o!==e.target){const b=t.type==="mousemove"?"mouseover":"pointerover",x=this.clonePointerEvent(e,b);this.dispatchEvent(x,"pointerover"),i&&this.dispatchEvent(x,"mouseover");let E=o==null?void 0:o.parent;for(;E&&E!==this.rootTarget.parent&&E!==e.target;)E=E.parent;if(!E||E===this.rootTarget.parent){const R=this.clonePointerEvent(e,"pointerenter");for(R.eventPhase=R.AT_TARGET;R.target&&R.target!==o&&R.target!==this.rootTarget.parent;)R.currentTarget=R.target,this.notifyTarget(R),i&&this.notifyTarget(R,"mouseenter"),R.target=R.target.parent;this.freeEvent(R)}this.freeEvent(x)}const h=[],f=this.enableGlobalMoveEvents??!0;this.moveOnAll?h.push("pointermove"):this.dispatchEvent(e,"pointermove"),f&&h.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?h.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),f&&h.push("globaltouchmove")),i&&(this.moveOnAll?h.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),f&&h.push("globalmousemove"),this.cursor=(g=e.target)==null?void 0:g.cursor),h.length>0&&this.all(e,h),this._allInteractiveElements.length=0,this._hitElements.length=0,a.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var h;if(!(t instanceof pa)){kt("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.createPointerEvent(t),a=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),a&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(h=i.target)==null?void 0:h.cursor);const o=this.clonePointerEvent(i,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),a&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;e.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(o)}mapPointerOut(t){if(!(t instanceof pa)){kt("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId);if(e.overTargets){const i=t.pointerType==="mouse"||t.pointerType==="pen",a=this.findMountedTarget(e.overTargets),o=this.createPointerEvent(t,"pointerout",a);this.dispatchEvent(o),i&&this.dispatchEvent(o,"mouseout");const h=this.createPointerEvent(t,"pointerleave",a);for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==this.rootTarget.parent;)h.currentTarget=h.target,this.notifyTarget(h),i&&this.notifyTarget(h,"mouseleave"),h.target=h.target.parent;e.overTargets=null,this.freeEvent(o),this.freeEvent(h)}this.cursor=null}mapPointerUp(t){if(!(t instanceof pa)){kt("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=performance.now(),i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const f=i.button===2;this.dispatchEvent(i,f?"rightup":"mouseup")}const a=this.trackingData(t.pointerId),o=this.findMountedTarget(a.pressTargetsByButton[t.button]);let h=o;if(o&&!i.composedPath().includes(o)){let f=o;for(;f&&!i.composedPath().includes(f);){if(i.currentTarget=f,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const m=i.button===2;this.notifyTarget(i,m?"rightupoutside":"mouseupoutside")}f=f.parent}delete a.pressTargetsByButton[t.button],h=f}if(h){const f=this.clonePointerEvent(i,"click");f.target=h,f.path=null,a.clicksByButton[t.button]||(a.clicksByButton[t.button]={clickCount:0,target:f.target,timeStamp:e});const m=a.clicksByButton[t.button];if(m.target===f.target&&e-m.timeStamp<200?++m.clickCount:m.clickCount=1,m.target=f.target,m.timeStamp=e,f.detail=m.clickCount,f.pointerType==="mouse"){const g=f.button===2;this.dispatchEvent(f,g?"rightclick":"click")}else f.pointerType==="touch"&&this.dispatchEvent(f,"tap");this.dispatchEvent(f,"pointertap"),this.freeEvent(f)}this.freeEvent(i)}mapPointerUpOutside(t){if(!(t instanceof pa)){kt("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.findMountedTarget(e.pressTargetsByButton[t.button]),a=this.createPointerEvent(t);if(i){let o=i;for(;o;)a.currentTarget=o,this.notifyTarget(a,"pointerupoutside"),a.pointerType==="touch"?this.notifyTarget(a,"touchendoutside"):(a.pointerType==="mouse"||a.pointerType==="pen")&&this.notifyTarget(a,a.button===2?"rightupoutside":"mouseupoutside"),o=o.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(a)}mapWheel(t){if(!(t instanceof Qu)){kt("EventBoundary cannot map a non-wheel event as a wheel event");return}const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){const a=this.allocateEvent(pa);return this.copyPointerData(t,a),this.copyMouseData(t,a),this.copyData(t,a),a.nativeEvent=t.nativeEvent,a.originalEvent=t,a.target=i??this.hitTest(a.global.x,a.global.y)??this._hitElements[0],typeof e=="string"&&(a.type=e),a}createWheelEvent(t){const e=this.allocateEvent(Qu);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const i=this.allocateEvent(pa);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=e??i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof pa&&e instanceof pa&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof Od&&e instanceof Od&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.defaultPrevented=!1,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}_notifyListeners(t,e){const i=t.currentTarget._events[e];if(i)if("fn"in i)i.once&&t.currentTarget.removeListener(e,i.fn,void 0,!0),i.fn.call(i.context,t);else for(let a=0,o=i.length;a<o&&!t.propagationImmediatelyStopped;a++)i[a].once&&t.currentTarget.removeListener(e,i[a].fn,void 0,!0),i[a].fn.call(i[a].context,t)}}const C8=1,B8={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Hb=class Ey{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new IT(null),Pl.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new pa(null),this._rootWheelEvent=new Qu(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Ey.defaultEventFeatures},{set:(e,i,a)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=a),e[i]=a,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{canvas:e,resolution:i}=this.renderer;this.setTargetElement(e),this.resolution=i,Ey._defaultEventMode=t.eventMode??"passive",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(t){t||(t="default");let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this._currentCursor===t)return;this._currentCursor=t;const i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.domElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.domElement.style,i);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this._rootPointerEvent}_onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this._normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let i=0,a=e.length;i<a;i++){const o=e[i],h=this._bootstrapEvent(this._rootPointerEvent,o);this.rootBoundary.mapEvent(h)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Pl.pointerMoved();const e=this._normalizeToPointerData(t);for(let i=0,a=e.length;i<a;i++){const o=this._bootstrapEvent(this._rootPointerEvent,e[i]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const i=e!==this.domElement?"outside":"",a=this._normalizeToPointerData(t);for(let o=0,h=a.length;o<h;o++){const f=this._bootstrapEvent(this._rootPointerEvent,a[o]);f.type+=i,this.rootBoundary.mapEvent(f)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this._normalizeToPointerData(t);for(let i=0,a=e.length;i<a;i++){const o=this._bootstrapEvent(this._rootPointerEvent,e[i]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this._removeEvents(),this.domElement=t,Pl.domElement=t,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;Pl.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;Pl.removeTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(t,e,i){const a=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},o=1/this.resolution;t.x=(e-a.left)*(this.domElement.width/a.width)*o,t.y=(i-a.top)*(this.domElement.height/a.height)*o}_normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let i=0,a=t.changedTouches.length;i<a;i++){const o=t.changedTouches[i];typeof o.button>"u"&&(o.button=0),typeof o.buttons>"u"&&(o.buttons=1),typeof o.isPrimary>"u"&&(o.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,o.type=t.type,e.push(o)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const i=t;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=C8),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,e.push(i)}else e.push(t);return e}normalizeWheelEvent(t){const e=this._rootWheelEvent;return this._transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}_bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this._transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=B8[t.type]||t.type),t}_transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};Hb.extension={name:"events",type:[I.WebGLSystem,I.CanvasSystem,I.WebGPUSystem],priority:-1};Hb.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let YT=Hb;const R8={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(n){this.eventMode=n?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??YT.defaultEventMode},set eventMode(n){this._internalEventMode=n},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(n,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,a=typeof e=="object"?e.signal:void 0,o=typeof e=="object"?e.once===!0:!1,h=typeof t=="function"?void 0:t;n=i?`${n}capture`:n;const f=typeof t=="function"?t:t.handleEvent,m=this;a&&a.addEventListener("abort",()=>{m.off(n,f,h)}),o?m.once(n,f,h):m.on(n,f,h)},removeEventListener(n,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,a=typeof t=="function"?void 0:t;n=i?`${n}capture`:n,t=typeof t=="function"?t:t.handleEvent,this.off(n,t,a)},dispatchEvent(n){if(!(n instanceof xh))throw new Error("Container cannot propagate events outside of the Federated Events API");return n.defaultPrevented=!1,n.path=null,n.target=this,n.manager.dispatchEvent(n),!n.defaultPrevented}};var Qg=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,qT=`
in vec2 vTextureCoord;

out vec4 finalColor;

uniform float uAlpha;
uniform sampler2D uTexture;

void main()
{
    finalColor =  texture(uTexture, vTextureCoord) * uAlpha;
}
`,Ty=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct AlphaUniforms {
  uAlpha:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {
 
    var sample = textureSample(uTexture, uSampler, uv);
    
    return sample * alphaUniforms.uAlpha;
}`;const jT=class KT extends Ii{constructor(t){t={...KT.defaultOptions,...t};const e=Mr.from({vertex:{source:Ty,entryPoint:"mainVertex"},fragment:{source:Ty,entryPoint:"mainFragment"}}),i=qr.from({vertex:Qg,fragment:qT,name:"alpha-filter"}),{alpha:a,...o}=t,h=new kn({uAlpha:{value:a,type:"f32"}});super({...o,gpuProgram:e,glProgram:i,resources:{alphaUniforms:h}})}get alpha(){return this.resources.alphaUniforms.uniforms.uAlpha}set alpha(t){this.resources.alphaUniforms.uniforms.uAlpha=t}};jT.defaultOptions={alpha:1};let M8=jT;const Lb={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},D8=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function WT(n){const t=Lb[n],e=t.length;let i=D8,a="";const o="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;";let h;for(let f=0;f<n;f++){let m=o.replace("%index%",f.toString());h=f,f>=e&&(h=n-f-1),m=m.replace("%value%",t[h].toString()),a+=m,a+=`
`}return i=i.replace("%blur%",a),i=i.replace("%size%",n.toString()),i}const w8=`
    in vec2 aPosition;

    uniform float uStrength;

    out vec2 vBlurTexCoords[%size%];

    uniform vec4 uInputSize;
    uniform vec4 uOutputFrame;
    uniform vec4 uOutputTexture;

    vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

    vec2 filterTextureCoord( void )
    {
        return aPosition * (uOutputFrame.zw * uInputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        float pixelStrength = uInputSize.%dimension% * uStrength;

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function QT(n,t){const e=Math.ceil(n/2);let i=w8,a="",o;t?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let h=0;h<n;h++){let f=o.replace("%index%",h.toString());f=f.replace("%sampleIndex%",`${h-(e-1)}.0`),a+=f,a+=`
`}return i=i.replace("%blur%",a),i=i.replace("%size%",n.toString()),i=i.replace("%dimension%",t?"z":"w"),i}function ZT(n,t){const e=QT(t,n),i=WT(t);return qr.from({vertex:e,fragment:i,name:`blur-${n?"horizontal":"vertical"}-pass-filter`})}var JT=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
  uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    %blur-struct%
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {

  let filteredCord = filterTextureCoord(aPosition);

  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

  return VSOutput(
   filterVertexPosition(aPosition),
    %blur-vertex-out%
  );
}

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  %blur-fragment-in%
) -> @location(0) vec4<f32> {

    var   finalColor = vec4(0.0);

    %blur-sampling%

    return finalColor;
}`;function $T(n,t){const e=Lb[t],i=e.length,a=[],o=[],h=[];for(let x=0;x<t;x++){a[x]=`@location(${x}) offset${x}: vec2<f32>,`,n?o[x]=`filteredCord + vec2(${x-i+1} * pixelStrength, 0.0),`:o[x]=`filteredCord + vec2(0.0, ${x-i+1} * pixelStrength),`;const E=x<i?x:t-x-1,T=e[E].toString();h[x]=`finalColor += textureSample(uTexture, uSampler, offset${x}) * ${T};`}const f=a.join(`
`),m=o.join(`
`),g=h.join(`
`),b=JT.replace("%blur-struct%",f).replace("%blur-vertex-out%",m).replace("%blur-fragment-in%",f).replace("%blur-sampling%",g).replace("%dimension%",n?"z":"w");return Mr.from({vertex:{source:b,entryPoint:"mainVertex"},fragment:{source:b,entryPoint:"mainFragment"}})}const tA=class eA extends Ii{constructor(t){t={...eA.defaultOptions,...t};const e=ZT(t.horizontal,t.kernelSize),i=$T(t.horizontal,t.kernelSize);super({glProgram:e,gpuProgram:i,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}},...t}),this.horizontal=t.horizontal,this._quality=0,this.quality=t.quality,this.blur=t.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(t,e,i,a){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)t.applyFilter(this,e,i,a);else{const o=Fn.getSameSizeTexture(e);let h=e,f=o;this._state.blend=!1;const m=t.renderer.type===Cr.WEBGPU;for(let g=0;g<this.passes-1;g++){t.applyFilter(this,h,f,g===0?!0:m);const b=f;f=h,h=b}this._state.blend=!0,t.applyFilter(this,h,i,a),Fn.returnTexture(o)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}};tA.defaultOptions={strength:8,quality:4,kernelSize:5};let ng=tA;class nA extends Ii{constructor(...t){let e=t[0]??{};typeof e=="number"&&(wt(Jt,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),e={strength:e},t[1]!==void 0&&(e.quality=t[1]),t[2]!==void 0&&(e.resolution=t[2]||"inherit"),t[3]!==void 0&&(e.kernelSize=t[3])),e={...ng.defaultOptions,...e};const{strength:i,strengthX:a,strengthY:o,quality:h,...f}=e;super({...f,compatibleRenderers:Cr.BOTH,resources:{}}),this._repeatEdgePixels=!1,this.blurXFilter=new ng({horizontal:!0,...e}),this.blurYFilter=new ng({horizontal:!1,...e}),this.quality=h,this.strengthX=a??i,this.strengthY=o??i,this.repeatEdgePixels=!1}apply(t,e,i,a){const o=Math.abs(this.blurXFilter.strength),h=Math.abs(this.blurYFilter.strength);if(o&&h){const f=Fn.getSameSizeTexture(e);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(t,e,f,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(t,f,i,a),Fn.returnTexture(f)}else h?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(t,e,i,a)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(t,e,i,a))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get strengthX(){return this.blurXFilter.blur}set strengthX(t){this.blurXFilter.blur=t,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(t){this.blurYFilter.blur=t,this.updatePadding()}get blur(){return wt("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength}set blur(t){wt("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength=t}get blurX(){return wt("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX}set blurX(t){wt("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX=t}get blurY(){return wt("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY}set blurY(t){wt("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}nA.defaultOptions={strength:8,quality:4,kernelSize:5};var iA=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uColorMatrix[20];
uniform float uAlpha;

uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * 0.2);
    float diff = (randomValue - 0.5) *  0.5;

    if (uAlpha == 0.0) {
        finalColor = color;
        return;
    }

    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    vec4 result;

    result.r = (uColorMatrix[0] * color.r);
        result.r += (uColorMatrix[1] * color.g);
        result.r += (uColorMatrix[2] * color.b);
        result.r += (uColorMatrix[3] * color.a);
        result.r += uColorMatrix[4];

    result.g = (uColorMatrix[5] * color.r);
        result.g += (uColorMatrix[6] * color.g);
        result.g += (uColorMatrix[7] * color.b);
        result.g += (uColorMatrix[8] * color.a);
        result.g += uColorMatrix[9];

    result.b = (uColorMatrix[10] * color.r);
       result.b += (uColorMatrix[11] * color.g);
       result.b += (uColorMatrix[12] * color.b);
       result.b += (uColorMatrix[13] * color.a);
       result.b += uColorMatrix[14];

    result.a = (uColorMatrix[15] * color.r);
       result.a += (uColorMatrix[16] * color.g);
       result.a += (uColorMatrix[17] * color.b);
       result.a += (uColorMatrix[18] * color.a);
       result.a += uColorMatrix[19];

    vec3 rgb = mix(color.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    finalColor = vec4(rgb, result.a);
}
`,Ay=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct ColorMatrixUniforms {
  uColorMatrix:array<vec4<f32>, 5>,
  uAlpha:f32,
};


@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(1) @binding(0) var<uniform> colorMatrixUniforms : ColorMatrixUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
  };
  
fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
  );
}


@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
) -> @location(0) vec4<f32> {


  var c = textureSample(uTexture, uSampler, uv);
  
  if (colorMatrixUniforms.uAlpha == 0.0) {
    return c;
  }

 
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.r /= c.a;
      c.g /= c.a;
      c.b /= c.a;
    }

    var cm = colorMatrixUniforms.uColorMatrix;


    var result = vec4<f32>(0.);

    result.r = (cm[0][0] * c.r);
    result.r += (cm[0][1] * c.g);
    result.r += (cm[0][2] * c.b);
    result.r += (cm[0][3] * c.a);
    result.r += cm[1][0];

    result.g = (cm[1][1] * c.r);
    result.g += (cm[1][2] * c.g);
    result.g += (cm[1][3] * c.b);
    result.g += (cm[2][0] * c.a);
    result.g += cm[2][1];

    result.b = (cm[2][2] * c.r);
    result.b += (cm[2][3] * c.g);
    result.b += (cm[3][0] * c.b);
    result.b += (cm[3][1] * c.a);
    result.b += cm[3][2];

    result.a = (cm[3][3] * c.r);
    result.a += (cm[4][0] * c.g);
    result.a += (cm[4][1] * c.b);
    result.a += (cm[4][2] * c.a);
    result.a += cm[4][3];

    var rgb = mix(c.rgb, result.rgb, colorMatrixUniforms.uAlpha);

    rgb.r *= result.a;
    rgb.g *= result.a;
    rgb.b *= result.a;

    return vec4(rgb, result.a);
}`;class U8 extends Ii{constructor(t={}){const e=new kn({uColorMatrix:{value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],type:"f32",size:20},uAlpha:{value:1,type:"f32"}}),i=Mr.from({vertex:{source:Ay,entryPoint:"mainVertex"},fragment:{source:Ay,entryPoint:"mainFragment"}}),a=qr.from({vertex:Qg,fragment:iA,name:"color-matrix-filter"});super({...t,gpuProgram:i,glProgram:a,resources:{colorMatrixUniforms:e}}),this.alpha=1}_loadMatrix(t,e=!1){let i=t;e&&(this._multiply(i,this.matrix,t),i=this._colorMatrix(i)),this.resources.colorMatrixUniforms.uniforms.uColorMatrix=i,this.resources.colorMatrixUniforms.update()}_multiply(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}tint(t,e){const[i,a,o]=Ce.shared.setValue(t).toArray(),h=[i,0,0,0,0,0,a,0,0,0,0,0,o,0,0,0,0,0,1,0];this._loadMatrix(h,e)}greyscale(t,e){const i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}grayscale(t,e){this.greyscale(t,e)}blackAndWhite(t){const e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;const i=Math.cos(t),a=Math.sin(t),o=Math.sqrt,h=1/3,f=o(h),m=i+(1-i)*h,g=h*(1-i)-f*a,b=h*(1-i)+f*a,x=h*(1-i)+f*a,E=i+h*(1-i),T=h*(1-i)-f*a,R=h*(1-i)-f*a,D=h*(1-i)+f*a,C=i+h*(1-i),G=[m,g,b,0,0,x,E,T,0,0,R,D,C,0,0,0,0,0,1,0];this._loadMatrix(G,e)}contrast(t,e){const i=(t||0)+1,a=-.5*(i-1),o=[i,0,0,0,a,0,i,0,0,a,0,0,i,0,a,0,0,0,1,0];this._loadMatrix(o,e)}saturate(t=0,e){const i=t*2/3+1,a=(i-1)*-.5,o=[i,a,a,0,0,a,i,a,0,0,a,a,i,0,0,0,0,0,1,0];this._loadMatrix(o,e)}desaturate(){this.saturate(-1)}negative(t){const e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){const e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){const e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){const e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){const e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){const e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){const e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){const e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,i,a,o){t||(t=.2),e||(e=.15),i||(i=16770432),a||(a=3375104);const h=Ce.shared,[f,m,g]=h.setValue(i).toArray(),[b,x,E]=h.setValue(a).toArray(),T=[.3,.59,.11,0,0,f,m,g,t,0,b,x,E,e,0,f-b,m-x,g-E,0,0];this._loadMatrix(T,o)}night(t,e){t||(t=.1);const i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(i,e)}predator(t,e){const i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)}lsd(t){const e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.resources.colorMatrixUniforms.uniforms.uColorMatrix}set matrix(t){this.resources.colorMatrixUniforms.uniforms.uColorMatrix=t}get alpha(){return this.resources.colorMatrixUniforms.uniforms.uAlpha}set alpha(t){this.resources.colorMatrixUniforms.uniforms.uAlpha=t}}var rA=`
in vec2 vTextureCoord;
in vec2 vFilterUv;

out vec4 finalColor;

uniform sampler2D uTexture;
uniform sampler2D uMapTexture;

uniform vec4 uInputClamp;
uniform highp vec4 uInputSize;
uniform mat2 uRotation;
uniform vec2 uScale;

void main()
{
    vec4 map = texture(uMapTexture, vFilterUv);
    
    vec2 offset = uInputSize.zw * (uRotation * (map.xy - 0.5)) * uScale; 

    finalColor = texture(uTexture, clamp(vTextureCoord + offset, uInputClamp.xy, uInputClamp.zw));
}
`,aA=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 vFilterUv;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

uniform mat3 uFilterMatrix;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( void )
{
  return ( uFilterMatrix * vec3( filterTextureCoord(), 1.0)  ).xy;
}


void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
    vFilterUv = getFilterCoord();
}
`,Cy=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct DisplacementUniforms {
  uFilterMatrix:mat3x3<f32>,
  uScale:vec2<f32>,
  uRotation:mat2x2<f32>
};



@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : DisplacementUniforms;
@group(1) @binding(1) var uMapTexture: texture_2d<f32>;
@group(1) @binding(2) var uMapSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{

  
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var map = textureSample(uMapTexture, uMapSampler, filterUv);

    var offset =  gfu.uInputSize.zw * (filterUniforms.uRotation * (map.xy - 0.5)) * filterUniforms.uScale; 
   
    return textureSample(uTexture, uSampler, clamp(uv + offset, gfu.uInputClamp.xy, gfu.uInputClamp.zw));
}`;class O8 extends Ii{constructor(...t){let e=t[0];e instanceof Ri&&(t[1]&&wt(Jt,"DisplacementFilter now uses options object instead of params. {sprite, scale}"),e={sprite:e,scale:t[1]});const{sprite:i,scale:a,...o}=e;let h=a??20;typeof h=="number"&&(h=new Xe(h,h));const f=new kn({uFilterMatrix:{value:new Gt,type:"mat3x3<f32>"},uScale:{value:h,type:"vec2<f32>"},uRotation:{value:new Float32Array([0,0,0,0]),type:"mat2x2<f32>"}}),m=qr.from({vertex:aA,fragment:rA,name:"displacement-filter"}),g=Mr.from({vertex:{source:Cy,entryPoint:"mainVertex"},fragment:{source:Cy,entryPoint:"mainFragment"}}),b=i.texture.source;super({...o,gpuProgram:g,glProgram:m,resources:{filterUniforms:f,uMapTexture:b,uMapSampler:b.style}}),this._sprite=e.sprite,this._sprite.renderable=!1}apply(t,e,i,a){const o=this.resources.filterUniforms.uniforms;t.calculateSpriteMatrix(o.uFilterMatrix,this._sprite);const h=this._sprite.worldTransform,f=Math.sqrt(h.a*h.a+h.b*h.b),m=Math.sqrt(h.c*h.c+h.d*h.d);f!==0&&m!==0&&(o.uRotation[0]=h.a/f,o.uRotation[1]=h.b/f,o.uRotation[2]=h.c/m,o.uRotation[3]=h.d/m),this.resources.uMapTexture=this._sprite.texture.source,t.applyFilter(this,e,i,a)}get scale(){return this.resources.filterUniforms.uniforms.uScale}}var sA=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) *  uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    finalColor = color;
}
`,By=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct NoiseUniforms {
  uNoise:f32,
  uSeed:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

fn rand(co:vec2<f32>) -> f32
{
  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}



@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);
  
    
    var sample = textureSample(uTexture, uSampler, uv);
    var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);
    var diff = (randomValue - 0.5) * noiseUniforms.uNoise;
  
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (sample.a > 0.0) {
      sample.r /= sample.a;
      sample.g /= sample.a;
      sample.b /= sample.a;
    }

    sample.r += diff;
    sample.g += diff;
    sample.b += diff;

    // Premultiply alpha again.
    sample.r *= sample.a;
    sample.g *= sample.a;
    sample.b *= sample.a;
    
    return sample;
}`;const lA=class oA extends Ii{constructor(t={}){t={...oA.defaultOptions,...t};const e=Mr.from({vertex:{source:By,entryPoint:"mainVertex"},fragment:{source:By,entryPoint:"mainFragment"}}),i=qr.from({vertex:Qg,fragment:sA,name:"noise-filter"}),{noise:a,seed:o,...h}=t;super({...h,gpuProgram:e,glProgram:i,resources:{noiseUniforms:new kn({uNoise:{value:1,type:"f32"},uSeed:{value:1,type:"f32"}})}}),this.noise=a,this.seed=o??Math.random()}get noise(){return this.resources.noiseUniforms.uniforms.uNoise}set noise(t){this.resources.noiseUniforms.uniforms.uNoise=t}get seed(){return this.resources.noiseUniforms.uniforms.uSeed}set seed(t){this.resources.noiseUniforms.uniforms.uSeed=t}};lA.defaultOptions={noise:.5};let G8=lA;class uA{constructor(t){this._renderer=t}push(t,e,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:e,filterEffect:t})}pop(t,e,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(t){t.action==="pushFilter"?this._renderer.filter.push(t):t.action==="popFilter"&&this._renderer.filter.pop()}destroy(){this._renderer=null}}uA.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"filter"};function cA(n,t){t.clear();const e=t.matrix;for(let i=0;i<n.length;i++){const a=n[i];a.globalDisplayStatus<7||(t.matrix=a.worldTransform,t.addBounds(a.bounds))}return t.matrix=e,t}const P8=new Ju({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:2*4,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])});class N8{constructor(){this.skip=!1,this.inputTexture=null,this.backTexture=null,this.filters=null,this.bounds=new $n,this.container=null,this.blendRequired=!1,this.outputRenderSurface=null,this.outputOffset={x:0,y:0},this.globalFrame={x:0,y:0,width:0,height:0}}}class hA{constructor(t){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new kn({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new Ks({}),this.renderer=t}get activeBackTexture(){var t;return(t=this._activeFilterData)==null?void 0:t.backTexture}push(t){const e=this.renderer,i=t.filterEffect.filters,a=this._pushFilterData();a.skip=!1,a.filters=i,a.container=t.container,a.outputRenderSurface=e.renderTarget.renderSurface;const o=e.renderTarget.renderTarget.colorTexture.source,h=o.resolution,f=o.antialias;if(i.length===0){a.skip=!0;return}const m=a.bounds;if(t.renderables?cA(t.renderables,m):t.filterEffect.filterArea?(m.clear(),m.addRect(t.filterEffect.filterArea),m.applyMatrix(t.container.worldTransform)):t.container.getFastGlobalBounds(!0,m),t.container){const D=(t.container.renderGroup||t.container.parentRenderGroup).cacheToLocalTransform;D&&m.applyMatrix(D)}if(this._calculateFilterBounds(a,e.renderTarget.rootViewPort,f,h,1),a.skip)return;const g=this._getPreviousFilterData();let b=h,x=0,E=0;g&&(x=g.bounds.minX,E=g.bounds.minY,b=g.inputTexture.source._resolution),a.outputOffset.x=m.minX-x,a.outputOffset.y=m.minY-E;const T=a.globalFrame;if(T.x=x*b,T.y=E*b,T.width=o.width*b,T.height=o.height*b,a.backTexture=At.EMPTY,a.blendRequired){e.renderTarget.finishRenderPass();const R=e.renderTarget.getRenderTarget(a.outputRenderSurface);a.backTexture=this.getBackTexture(R,m,g==null?void 0:g.bounds)}a.inputTexture=Fn.getOptimalTexture(m.width,m.height,a.resolution,a.antialias),e.renderTarget.bind(a.inputTexture,!0),e.globalUniforms.push({offset:m})}generateFilteredTexture({texture:t,filters:e}){const i=this._pushFilterData();this._activeFilterData=i,i.skip=!1,i.filters=e;const a=t.source,o=a.resolution,h=a.antialias;if(e.length===0)return i.skip=!0,t;const f=i.bounds;if(f.addRect(t.frame),this._calculateFilterBounds(i,f.rectangle,h,o,0),i.skip)return t;const m=o,g=0,b=0;i.outputOffset.x=-f.minX,i.outputOffset.y=-f.minY;const x=i.globalFrame;x.x=g*m,x.y=b*m,x.width=a.width*m,x.height=a.height*m,i.outputRenderSurface=Fn.getOptimalTexture(f.width,f.height,i.resolution,i.antialias),i.backTexture=At.EMPTY,i.inputTexture=t,this.renderer.renderTarget.finishRenderPass(),this._applyFiltersToTexture(i,!0);const T=i.outputRenderSurface;return T.source.alphaMode="premultiplied-alpha",T}pop(){const t=this.renderer,e=this._popFilterData();e.skip||(t.globalUniforms.pop(),t.renderTarget.finishRenderPass(),this._activeFilterData=e,this._applyFiltersToTexture(e,!1),e.blendRequired&&Fn.returnTexture(e.backTexture),Fn.returnTexture(e.inputTexture))}getBackTexture(t,e,i){const a=t.colorTexture.source._resolution,o=Fn.getOptimalTexture(e.width,e.height,a,!1);let h=e.minX,f=e.minY;i&&(h-=i.minX,f-=i.minY),h=Math.floor(h*a),f=Math.floor(f*a);const m=Math.ceil(e.width*a),g=Math.ceil(e.height*a);return this.renderer.renderTarget.copyToTexture(t,o,{x:h,y:f},{width:m,height:g},{x:0,y:0}),o}applyFilter(t,e,i,a){const o=this.renderer,h=this._activeFilterData,f=h.outputRenderSurface,m=this._filterGlobalUniforms,g=m.uniforms,b=g.uOutputFrame,x=g.uInputSize,E=g.uInputPixel,T=g.uInputClamp,R=g.uGlobalFrame,D=g.uOutputTexture;f===i?(b[0]=h.outputOffset.x,b[1]=h.outputOffset.y):(b[0]=0,b[1]=0),b[2]=e.frame.width,b[3]=e.frame.height,x[0]=e.source.width,x[1]=e.source.height,x[2]=1/x[0],x[3]=1/x[1],E[0]=e.source.pixelWidth,E[1]=e.source.pixelHeight,E[2]=1/E[0],E[3]=1/E[1],T[0]=.5*E[2],T[1]=.5*E[3],T[2]=e.frame.width*x[2]-.5*E[2],T[3]=e.frame.height*x[3]-.5*E[3],R[0]=h.globalFrame.x,R[1]=h.globalFrame.y,R[2]=h.globalFrame.width,R[3]=h.globalFrame.height,i instanceof At&&(i.source.resource=null);const C=this.renderer.renderTarget.getRenderTarget(i);if(o.renderTarget.bind(i,!!a),i instanceof At?(D[0]=i.frame.width,D[1]=i.frame.height):(D[0]=C.width,D[1]=C.height),D[2]=C.isRoot?-1:1,m.update(),o.renderPipes.uniformBatch){const G=o.renderPipes.uniformBatch.getUboResource(m);this._globalFilterBindGroup.setResource(G,0)}else this._globalFilterBindGroup.setResource(m,0);this._globalFilterBindGroup.setResource(e.source,1),this._globalFilterBindGroup.setResource(e.source.style,2),t.groups[0]=this._globalFilterBindGroup,o.encoder.draw({geometry:P8,shader:t,state:t._state,topology:"triangle-list"}),o.type===Cr.WEBGL&&o.renderTarget.finishRenderPass()}calculateSpriteMatrix(t,e){const i=this._activeFilterData,a=t.set(i.inputTexture._source.width,0,0,i.inputTexture._source.height,i.bounds.minX,i.bounds.minY),o=e.worldTransform.copyTo(Gt.shared),h=e.renderGroup||e.parentRenderGroup;return h&&h.cacheToLocalTransform&&o.prepend(h.cacheToLocalTransform),o.invert(),a.prepend(o),a.scale(1/e.texture.frame.width,1/e.texture.frame.height),a.translate(e.anchor.x,e.anchor.y),a}destroy(){}_applyFiltersToTexture(t,e){const i=t.inputTexture,a=t.bounds,o=t.filters;if(this._globalFilterBindGroup.setResource(i.source.style,2),this._globalFilterBindGroup.setResource(t.backTexture.source,3),o.length===1)o[0].apply(this,i,t.outputRenderSurface,e);else{let h=t.inputTexture;const f=Fn.getOptimalTexture(a.width,a.height,h.source._resolution,!1);let m=f,g=0;for(g=0;g<o.length-1;++g){o[g].apply(this,h,m,!0);const x=h;h=m,m=x}o[g].apply(this,h,t.outputRenderSurface,e),Fn.returnTexture(f)}}_calculateFilterBounds(t,e,i,a,o){var D;const h=this.renderer,f=t.bounds,m=t.filters;let g=1/0,b=0,x=!0,E=!1,T=!1,R=!0;for(let C=0;C<m.length;C++){const G=m[C];if(g=Math.min(g,G.resolution==="inherit"?a:G.resolution),b+=G.padding,G.antialias==="off"?x=!1:G.antialias==="inherit"&&x&&(x=i),G.clipToViewport||(R=!1),!!!(G.compatibleRenderers&h.type)){T=!1;break}if(G.blendRequired&&!(((D=h.backBuffer)==null?void 0:D.useBackBuffer)??!0)){kt("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),T=!1;break}T=G.enabled||T,E||(E=G.blendRequired)}if(!T){t.skip=!0;return}if(R&&f.fitBounds(0,e.width/a,0,e.height/a),f.scale(g).ceil().scale(1/g).pad((b|0)*o),!f.isPositive){t.skip=!0;return}t.antialias=x,t.resolution=g,t.blendRequired=E}_popFilterData(){return this._filterStackIndex--,this._filterStack[this._filterStackIndex]}_getPreviousFilterData(){let t,e=this._filterStackIndex-1;for(;e>1&&(e--,t=this._filterStack[e],!!t.skip););return t}_pushFilterData(){let t=this._filterStack[this._filterStackIndex];return t||(t=this._filterStack[this._filterStackIndex]=new N8),this._filterStackIndex++,t}}hA.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"filter"};var fA=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
    float clip = step(3.5,
        step(uMaskClamp.x, vMaskCoord.x) +
        step(uMaskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, uMaskClamp.z) +
        step(vMaskCoord.y, uMaskClamp.w));

    // TODO look into why this is needed
    float npmAlpha = uAlpha;
    vec4 original = texture(uTexture, vTextureCoord);
    vec4 masky = texture(uMaskTexture, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    float a = alphaMul * masky.r * npmAlpha * clip;

    if (uInverse == 1.0) {
        a = 1.0 - a;
    }

    finalColor = original * a;
}
`,dA=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
       
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
    gl_Position = filterVertexPosition(aPosition);
    vTextureCoord = filterTextureCoord(aPosition);
    vMaskCoord = getFilterCoord(aPosition);
}
`,Ry=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
  uFilterMatrix:mat3x3<f32>,
  uMaskClamp:vec4<f32>,
  uAlpha:f32,
  uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var maskClamp = filterUniforms.uMaskClamp;
    var uAlpha = filterUniforms.uAlpha;

    var clip = step(3.5,
      step(maskClamp.x, filterUv.x) +
      step(maskClamp.y, filterUv.y) +
      step(filterUv.x, maskClamp.z) +
      step(filterUv.y, maskClamp.w));

    var mask = textureSample(uMaskTexture, uSampler, filterUv);
    var source = textureSample(uTexture, uSampler, uv);
    var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

    var a: f32 = alphaMul * mask.r * uAlpha * clip;

    if (filterUniforms.uInverse == 1.0) {
        a = 1.0 - a;
    }

    return source * a;
}
`;class pA extends Ii{constructor(t){const{sprite:e,...i}=t,a=new Zy(e.texture),o=new kn({uFilterMatrix:{value:new Gt,type:"mat3x3<f32>"},uMaskClamp:{value:a.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:t.inverse?1:0,type:"f32"}}),h=Mr.from({vertex:{source:Ry,entryPoint:"mainVertex"},fragment:{source:Ry,entryPoint:"mainFragment"}}),f=qr.from({vertex:dA,fragment:fA,name:"mask-filter"});super({...i,gpuProgram:h,glProgram:f,resources:{filterUniforms:o,uMaskTexture:e.texture.source}}),this.sprite=e,this._textureMatrix=a}set inverse(t){this.resources.filterUniforms.uniforms.uInverse=t?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(t,e,i,a){this._textureMatrix.texture=this.sprite.texture,t.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,t.applyFilter(this,e,i,a)}}var z8=`fn getLuminosity(c: vec3<f32>) -> f32 {
  return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
}

fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32> {
  let d: f32 = lum - getLuminosity(c);
  let newColor: vec3<f32> = c.rgb + vec3<f32>(d, d, d);

  // clip back into legal range
  let newLum: f32 = getLuminosity(newColor);
  let cMin: f32 = min(newColor.r, min(newColor.g, newColor.b));
  let cMax: f32 = max(newColor.r, max(newColor.g, newColor.b));

  let t1: f32 = newLum / (newLum - cMin);
  let t2: f32 = (1.0 - newLum) / (cMax - newLum);

  let finalColor = mix(vec3<f32>(newLum, newLum, newLum), newColor, select(select(1.0, t2, cMax > 1.0), t1, cMin < 0.0));

  return finalColor;
}

fn getSaturation(c: vec3<f32>) -> f32 {
  return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
}

// Set saturation if color components are sorted in ascending order.
fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32> {
  var result: vec3<f32>;
  if (cSorted.z > cSorted.x) {
    let newY = (((cSorted.y - cSorted.x) * s) / (cSorted.z - cSorted.x));
    result = vec3<f32>(0.0, newY, s);
  } else {
    result = vec3<f32>(0.0, 0.0, 0.0);
  }
  return vec3<f32>(result.x, result.y, result.z);
}

fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32> {
    var result: vec3<f32> = c;

    if (c.r <= c.g && c.r <= c.b) {
        if (c.g <= c.b) {
            result = setSaturationMinMidMax(result, s);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.r, result.b, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.r, temp.b, temp.g);
        }
    } else if (c.g <= c.r && c.g <= c.b) {
        if (c.r <= c.b) {
            var temp: vec3<f32> = vec3<f32>(result.g, result.r, result.b);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.r, temp.b);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.g, result.b, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.b, temp.r);
        }
    } else {
        if (c.r <= c.g) {
            var temp: vec3<f32> = vec3<f32>(result.b, result.r, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.r, temp.g);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.b, result.g, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.g, temp.r);
        }
    }

    return result;
}`;function My(n,t,e,i,a,o,h,f){const m=h-e,g=f-i,b=a-e,x=o-i,E=n-e,T=t-i,R=m*m+g*g,D=m*b+g*x,C=m*E+g*T,G=b*b+x*x,P=b*E+x*T,H=1/(R*G-D*D),q=(G*C-D*P)*H,et=(R*P-D*C)*H;return q>=0&&et>=0&&q+et<1}class Fb{constructor(t=0,e=0,i=0,a=0,o=0,h=0){this.type="triangle",this.x=t,this.y=e,this.x2=i,this.y2=a,this.x3=o,this.y3=h}contains(t,e){const i=(this.x-this.x3)*(e-this.y3)-(this.y-this.y3)*(t-this.x3),a=(this.x2-this.x)*(e-this.y)-(this.y2-this.y)*(t-this.x);if(i<0!=a<0&&i!==0&&a!==0)return!1;const o=(this.x3-this.x2)*(e-this.y2)-(this.y3-this.y2)*(t-this.x2);return o===0||o<0==i+a<=0}strokeContains(t,e,i,a=.5){const o=i/2,h=o*o,{x:f,x2:m,x3:g,y:b,y2:x,y3:E}=this;return md(t,e,f,b,m,E)<=h||md(t,e,m,x,g,E)<=h||md(t,e,g,E,f,b)<=h}clone(){return new Fb(this.x,this.y,this.x2,this.y2,this.x3,this.y3)}copyFrom(t){return this.x=t.x,this.y=t.y,this.x2=t.x2,this.y2=t.y2,this.x3=t.x3,this.y3=t.y3,this}copyTo(t){return t.copyFrom(this),t}getBounds(t){t||(t=new Ue);const e=Math.min(this.x,this.x2,this.x3),i=Math.max(this.x,this.x2,this.x3),a=Math.min(this.y,this.y2,this.y3),o=Math.max(this.y,this.y2,this.y3);return t.x=e,t.y=a,t.width=i-e,t.height=o-a,t}}const mA=class gA{constructor(t){this._tick=()=>{this.timeout=setTimeout(this._processQueue,0)},this._processQueue=()=>{const{queue:e}=this;let i=0;for(;e.length&&i<gA.uploadsPerFrame;){const a=e.shift();this.uploadQueueItem(a),i++}e.length?Bi.system.addOnce(this._tick,this,zl.UTILITY):this._resolve()},this.renderer=t,this.queue=[],this.resolves=[]}getQueue(){return[...this.queue]}add(t){const e=Array.isArray(t)?t:[t];for(const i of e)i instanceof Vn?this._addContainer(i):this.resolveQueueItem(i,this.queue);return this}_addContainer(t){this.resolveQueueItem(t,this.queue);for(const e of t.children)this._addContainer(e)}upload(t){return t&&this.add(t),new Promise(e=>{this.queue.length?(this.resolves.push(e),this.dedupeQueue(),Bi.system.addOnce(this._tick,this,zl.UTILITY)):e()})}dedupeQueue(){const t=Object.create(null);let e=0;for(let i=0;i<this.queue.length;i++){const a=this.queue[i];t[a.uid]||(t[a.uid]=!0,this.queue[e++]=a)}this.queue.length=e}_resolve(){const{resolves:t}=this,e=t.slice(0);t.length=0;for(const i of e)i()}};mA.uploadsPerFrame=4;let _A=mA;class Zu extends Qs{constructor(t){t instanceof er&&(t={context:t});const{context:e,roundPixels:i,...a}=t||{};super({label:"Graphics",...a}),this.renderPipeId="graphics",e?this._context=e:this._context=this._ownedContext=new er,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=i??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||(t==null?void 0:t.context)===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new Zu(this._context.clone()):(this._ownedContext=null,new Zu(this._context))}lineStyle(t,e,i){wt(Jt,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const a={};return t&&(a.width=t),e&&(a.color=e),i&&(a.alpha=i),this.context.strokeStyle=a,this}beginFill(t,e){wt(Jt,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return t!==void 0&&(i.color=t),e!==void 0&&(i.alpha=e),this.context.fillStyle=i,this}endFill(){wt(Jt,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==er.defaultStrokeStyle.width||t.color!==er.defaultStrokeStyle.color||t.alpha!==er.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return wt(Jt,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return wt(Jt,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return wt(Jt,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return wt(Jt,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return wt(Jt,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return wt(Jt,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}const yA=class bA extends Ju{constructor(...t){let e=t[0]??{};e instanceof Float32Array&&(wt(Jt,"use new MeshGeometry({ positions, uvs, indices }) instead"),e={positions:e,uvs:t[1],indices:t[2]}),e={...bA.defaultOptions,...e};const i=e.positions||new Float32Array([0,0,1,0,1,1,0,1]);let a=e.uvs;a||(e.positions?a=new Float32Array(i.length):a=new Float32Array([0,0,1,0,1,1,0,1]));const o=e.indices||new Uint32Array([0,1,2,0,2,3]),h=e.shrinkBuffersToFit,f=new Ar({data:i,label:"attribute-mesh-positions",shrinkToFit:h,usage:be.VERTEX|be.COPY_DST}),m=new Ar({data:a,label:"attribute-mesh-uvs",shrinkToFit:h,usage:be.VERTEX|be.COPY_DST}),g=new Ar({data:o,label:"index-mesh-buffer",shrinkToFit:h,usage:be.INDEX|be.COPY_DST});super({attributes:{aPosition:{buffer:f,format:"float32x2",stride:2*4,offset:0},aUV:{buffer:m,format:"float32x2",stride:2*4,offset:0}},indexBuffer:g,topology:e.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(t){this.attributes.aPosition.buffer.data=t}get uvs(){return this.attributes.aUV.buffer.data}set uvs(t){this.attributes.aUV.buffer.data=t}get indices(){return this.indexBuffer.data}set indices(t){this.indexBuffer.data=t}};yA.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let tc=yA;class Ch extends Qs{constructor(...t){let e=t[0];e instanceof Ju&&(wt(Jt,"Mesh: use new Mesh({ geometry, shader }) instead"),e={geometry:e,shader:t[1]},t[3]&&(wt(Jt,"Mesh: drawMode argument has been removed, use geometry.topology instead"),e.geometry.topology=t[3]));const{geometry:i,shader:a,texture:o,roundPixels:h,state:f,...m}=e;super({label:"Mesh",...m}),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=a??null,this.texture=o??(a==null?void 0:a.texture)??At.WHITE,this.state=f??Ir.for2d(),this._geometry=i,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=h??!1}get material(){return wt(Jt,"mesh.material property has been removed, use mesh.shader instead"),this._shader}set shader(t){this._shader!==t&&(this._shader=t,this.onViewUpdate())}get shader(){return this._shader}set geometry(t){var e;this._geometry!==t&&((e=this._geometry)==null||e.off("update",this.onViewUpdate,this),t.on("update",this.onViewUpdate,this),this._geometry=t,this.onViewUpdate())}get geometry(){return this._geometry}set texture(t){t||(t=At.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=t),this._texture=t,this.onViewUpdate())}get texture(){return this._texture}get batched(){return this._shader||(this.state.data&12)!==0?!1:this._geometry instanceof tc?this._geometry.batchMode==="auto"?this._geometry.positions.length/2<=100:this._geometry.batchMode==="batch":!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(t){const{x:e,y:i}=t;if(!this.bounds.containsPoint(e,i))return!1;const a=this.geometry.getBuffer("aPosition").data,o=this.geometry.topology==="triangle-strip"?3:1;if(this.geometry.getIndex()){const h=this.geometry.getIndex().data,f=h.length;for(let m=0;m+2<f;m+=o){const g=h[m]*2,b=h[m+1]*2,x=h[m+2]*2;if(My(e,i,a[g],a[g+1],a[b],a[b+1],a[x],a[x+1]))return!0}}else{const h=a.length/2;for(let f=0;f+2<h;f+=o){const m=f*2,g=(f+1)*2,b=(f+2)*2;if(My(e,i,a[m],a[m+1],a[g],a[g+1],a[b],a[b+1]))return!0}}return!1}destroy(t){var i;if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const a=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(a)}(i=this._geometry)==null||i.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null,this._gpuData=null}}class Gd extends Ri{constructor(...t){let e=t[0];Array.isArray(t[0])&&(e={textures:t[0],autoUpdate:t[1]});const{animationSpeed:i=1,autoPlay:a=!1,autoUpdate:o=!0,loop:h=!0,onComplete:f=null,onFrameChange:m=null,onLoop:g=null,textures:b,updateAnchor:x=!1,...E}=e,[T]=b;super({...E,texture:T instanceof At?T:T.texture}),this._textures=null,this._durations=null,this._autoUpdate=o,this._isConnectedToTicker=!1,this.animationSpeed=i,this.loop=h,this.updateAnchor=x,this.onComplete=f,this.onFrameChange=m,this.onLoop=g,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=b,a&&this.play()}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Bi.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Bi.shared.add(this.update,this,zl.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const e=t.deltaTime,i=this.animationSpeed*e,a=this.currentFrame;if(this._durations!==null){let o=this._currentTime%1*this._durations[this.currentFrame];for(o+=i/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];const h=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*h,this._currentTime+=h;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):a!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<a||this.animationSpeed<0&&this.currentFrame>a)&&this.onLoop(),this._updateTexture())}_updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this.texture=this._textures[t],this.updateAnchor&&this.texture.defaultAnchor&&this.anchor.copyFrom(this.texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(){this.stop(),super.destroy(),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const e=[];for(let i=0;i<t.length;++i)e.push(At.from(t[i]));return new Gd(e)}static fromImages(t){const e=[];for(let i=0;i<t.length;++i)e.push(At.from(t[i]));return new Gd(e)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof At)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this._updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this._updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Bi.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Bi.shared.add(this.update,this),this._isConnectedToTicker=!0))}}class vA{constructor({matrix:t,observer:e}={}){this.dirty=!0,this._matrix=t??new Gt,this.observer=e,this.position=new Ln(this,0,0),this.scale=new Ln(this,1,1),this.pivot=new Ln(this,0,0),this.skew=new Ln(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){const t=this._matrix;return this.dirty&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this.dirty=!1),t}_onUpdate(t){var e;this.dirty=!0,t===this.skew&&this.updateSkew(),(e=this.observer)==null||e._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return`[pixi.js/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}setFromMatrix(t){t.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this.skew))}}const xA=class ig extends Qs{constructor(...t){let e=t[0]||{};e instanceof At&&(e={texture:e}),t.length>1&&(wt(Jt,"use new TilingSprite({ texture, width:100, height:100 }) instead"),e.width=t[1],e.height=t[2]),e={...ig.defaultOptions,...e};const{texture:i,anchor:a,tilePosition:o,tileScale:h,tileRotation:f,width:m,height:g,applyAnchorToTexture:b,roundPixels:x,...E}=e??{};super({label:"TilingSprite",...E}),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new Ln({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=b,this.texture=i,this._width=m??i.width,this._height=g??i.height,this._tileTransform=new vA({observer:{_onUpdate:()=>this.onViewUpdate()}}),a&&(this.anchor=a),this.tilePosition=o,this.tileScale=h,this.tileRotation=f,this.roundPixels=x??!1}static from(t,e={}){return typeof t=="string"?new ig({texture:Qe.get(t),...e}):new ig({texture:t,...e})}get uvRespectAnchor(){return kt("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(t){kt("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=t}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(t){this._texture.textureMatrix.clampMargin=t}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get tilePosition(){return this._tileTransform.position}set tilePosition(t){this._tileTransform.position.copyFrom(t)}get tileScale(){return this._tileTransform.scale}set tileScale(t){typeof t=="number"?this._tileTransform.scale.set(t):this._tileTransform.scale.copyFrom(t)}set tileRotation(t){this._tileTransform.rotation=t}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(t){t||(t=At.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this.onViewUpdate())}get texture(){return this._texture}set width(t){this._width=t,this.onViewUpdate()}get width(){return this._width}set height(t){this._height=t,this.onViewUpdate()}get height(){return this._height}setSize(t,e){typeof t=="object"&&(e=t.height??t.width,t=t.width),this._width=t,this._height=e??t,this.onViewUpdate()}getSize(t){return t||(t={}),t.width=this._width,t.height=this._height,t}updateBounds(){const t=this._bounds,e=this._anchor,i=this._width,a=this._height;t.minX=-e._x*i,t.maxX=t.minX+i,t.minY=-e._y*a,t.maxY=t.minY+a}containsPoint(t){const e=this._width,i=this._height,a=-e*this._anchor._x;let o=0;return t.x>=a&&t.x<=a+e&&(o=-i*this._anchor._y,t.y>=o&&t.y<=o+i)}destroy(t=!1){if(super.destroy(t),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(i)}this._texture=null}};xA.defaultOptions={texture:At.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};let SA=xA;class Zg extends Qs{constructor(t,e){const{text:i,resolution:a,style:o,anchor:h,width:f,height:m,roundPixels:g,...b}=t;super({...b}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=e,this.text=i??"",this.style=o,this.resolution=a??null,this.allowChildren=!1,this._anchor=new Ln({_onUpdate:()=>{this.onViewUpdate()}}),h&&(this.anchor=h),this.roundPixels=g??!1,f!==void 0&&(this.width=f),m!==void 0&&(this.height=m)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){var e;t||(t={}),(e=this._style)==null||e.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this.bounds.width),e!==void 0&&this._setHeight(e,this.bounds.height)}containsPoint(t){const e=this.bounds.width,i=this.bounds.height,a=-e*this.anchor.x;let o=0;return t.x>=a&&t.x<=a+e&&(o=-i*this.anchor.y,t.y>=o&&t.y<=o+i)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t!=null&&t.style)&&this._style.destroy(t),this._style=null,this._text=null}}function Jg(n,t){let e=n[0]??{};return(typeof e=="string"||n[1])&&(wt(Jt,`use new ${t}({ text: "hi!", style }) instead`),e={text:e,style:n[1]}),e}let Vu=null,Gl=null;function H8(n,t){Vu||(Vu=me.get().createCanvas(256,128),Gl=Vu.getContext("2d",{willReadFrequently:!0}),Gl.globalCompositeOperation="copy",Gl.globalAlpha=1),(Vu.width<n||Vu.height<t)&&(Vu.width=ju(n),Vu.height=ju(t))}function x1(n,t,e){for(let i=0,a=4*e*t;i<t;++i,a+=4)if(n[a+3]!==0)return!1;return!0}function S1(n,t,e,i,a){const o=4*t;for(let h=i,f=i*o+4*e;h<=a;++h,f+=o)if(n[f+3]!==0)return!1;return!0}function EA(...n){let t=n[0];t.canvas||(t={canvas:n[0],resolution:n[1]});const{canvas:e}=t,i=Math.min(t.resolution??1,1),a=t.width??e.width,o=t.height??e.height;let h=t.output;if(H8(a,o),!Gl)throw new TypeError("Failed to get canvas 2D context");Gl.drawImage(e,0,0,a,o,0,0,a*i,o*i);const m=Gl.getImageData(0,0,a,o).data;let g=0,b=0,x=a-1,E=o-1;for(;b<o&&x1(m,a,b);)++b;if(b===o)return Ue.EMPTY;for(;x1(m,a,E);)--E;for(;S1(m,a,g,b,E);)++g;for(;S1(m,a,x,b,E);)--x;return++x,++E,Gl.globalCompositeOperation="source-over",Gl.strokeRect(g,b,x-g,E-b),Gl.globalCompositeOperation="copy",h??(h=new Ue),h.set(g/i,b/i,(x-g)/i,(E-b)/i),h}const E1=new Ue;class L8{getCanvasAndContext(t){const{text:e,style:i,resolution:a=1}=t,o=i._getFinalPadding(),h=ga.measureText(e||" ",i),f=Math.ceil(Math.ceil(Math.max(1,h.width)+o*2)*a),m=Math.ceil(Math.ceil(Math.max(1,h.height)+o*2)*a),g=Ll.getOptimalCanvasAndContext(f,m);this._renderTextToCanvas(e,i,o,a,g);const b=i.trim?EA({canvas:g.canvas,width:f,height:m,resolution:1,output:E1}):E1.set(0,0,f,m);return{canvasAndContext:g,frame:b}}returnCanvasAndContext(t){Ll.returnCanvasAndContext(t)}_renderTextToCanvas(t,e,i,a,o){var H,q,et,ot;const{canvas:h,context:f}=o,m=Md(e),g=ga.measureText(t||" ",e),b=g.lines,x=g.lineHeight,E=g.lineWidths,T=g.maxLineWidth,R=g.fontProperties,D=h.height;if(f.resetTransform(),f.scale(a,a),f.textBaseline=e.textBaseline,(H=e._stroke)!=null&&H.width){const Y=e._stroke;f.lineWidth=Y.width,f.miterLimit=Y.miterLimit,f.lineJoin=Y.join,f.lineCap=Y.cap}f.font=m;let C,G;const P=e.dropShadow?2:1;for(let Y=0;Y<P;++Y){const ht=e.dropShadow&&Y===0,N=ht?Math.ceil(Math.max(1,D)+i*2):0,X=N*a;if(ht){f.fillStyle="black",f.strokeStyle="black";const ft=e.dropShadow,St=ft.color,Ct=ft.alpha;f.shadowColor=Ce.shared.setValue(St).setAlpha(Ct).toRgbaString();const V=ft.blur*a,j=ft.distance*a;f.shadowBlur=V,f.shadowOffsetX=Math.cos(ft.angle)*j,f.shadowOffsetY=Math.sin(ft.angle)*j+X}else{if(f.fillStyle=e._fill?wd(e._fill,f,g):null,(q=e._stroke)!=null&&q.width){const ft=e._stroke.width*e._stroke.alignment;f.strokeStyle=wd(e._stroke,f,g,ft)}f.shadowColor="black"}let W=(x-R.fontSize)/2;x-R.fontSize<0&&(W=0);const rt=((et=e._stroke)==null?void 0:et.width)??0;for(let ft=0;ft<b.length;ft++)C=rt/2,G=rt/2+ft*x+R.ascent+W,e.align==="right"?C+=T-E[ft]:e.align==="center"&&(C+=(T-E[ft])/2),(ot=e._stroke)!=null&&ot.width&&this._drawLetterSpacing(b[ft],e,o,C+i,G+i-N,!0),e._fill!==void 0&&this._drawLetterSpacing(b[ft],e,o,C+i,G+i-N)}}_drawLetterSpacing(t,e,i,a,o,h=!1){const{context:f}=i,m=e.letterSpacing;let g=!1;if(ga.experimentalLetterSpacingSupported&&(ga.experimentalLetterSpacing?(f.letterSpacing=`${m}px`,f.textLetterSpacing=`${m}px`,g=!0):(f.letterSpacing="0px",f.textLetterSpacing="0px")),m===0||g){h?f.strokeText(t,a,o):f.fillText(t,a,o);return}let b=a;const x=ga.graphemeSegmenter(t);let E=f.measureText(t).width,T=0;for(let R=0;R<x.length;++R){const D=x[R];h?f.strokeText(D,b,o):f.fillText(D,b,o);let C="";for(let G=R+1;G<x.length;++G)C+=x[G];T=f.measureText(C).width,b+=E-T+m,E=T}}}const dh=new L8;class Vb extends Zg{constructor(...t){const e=Jg(t,"Text");super(e,Br),this.renderPipeId="text",e.textureStyle&&(this.textureStyle=e.textureStyle instanceof ba?e.textureStyle:new ba(e.textureStyle))}updateBounds(){const t=this._bounds,e=this._anchor;let i=0,a=0;if(this._style.trim){const{frame:o,canvasAndContext:h}=dh.getCanvasAndContext({text:this.text,style:this._style,resolution:1});dh.returnCanvasAndContext(h),i=o.width,a=o.height}else{const o=ga.measureText(this._text,this._style);i=o.width,a=o.height}t.minX=-e._x*i,t.maxX=t.minX+i,t.minY=-e._y*a,t.maxY=t.minY+a}}class TA extends _A{resolveQueueItem(t,e){return t instanceof Vn?this.resolveContainerQueueItem(t,e):t instanceof Sn||t instanceof At?e.push(t.source):t instanceof er&&e.push(t),null}resolveContainerQueueItem(t,e){t instanceof Ri||t instanceof SA||t instanceof Ch?e.push(t.texture.source):t instanceof Vb?e.push(t):t instanceof Zu?e.push(t.context):t instanceof Gd&&t.textures.forEach(i=>{i.source?e.push(i.source):e.push(i.texture.source)})}resolveGraphicsContextQueueItem(t){this.renderer.graphicsContext.getGpuContext(t);const{instructions:e}=t;for(const i of e)if(i.action==="texture"){const{image:a}=i.data;return a.source}else if(i.action==="fill"){const{texture:a}=i.data.style;return a.source}return null}}class AA extends Zg{constructor(...t){var e;const i=Jg(t,"BitmapText");i.style??(i.style=i.style||{}),(e=i.style).fill??(e.fill=16777215),super(i,Br),this.renderPipeId="bitmapText"}updateBounds(){const t=this._bounds,e=this._anchor,i=Ud.measureText(this.text,this._style),a=i.scale,o=i.offsetY*a;let h=i.width*a,f=i.height*a;const m=this._style._stroke;m&&(h+=m.width,f+=m.width),t.minX=-e._x*h,t.maxX=t.minX+h,t.minY=-e._y*(f+o),t.maxY=t.minY+f}set resolution(t){t!==null&&kt("[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.")}get resolution(){return this._resolution}}function CA(n){const t=n._stroke,e=n._fill,a=[`div { ${[`color: ${Ce.shared.setValue(e.color).toHex()}`,`font-size: ${n.fontSize}px`,`font-family: ${n.fontFamily}`,`font-weight: ${n.fontWeight}`,`font-style: ${n.fontStyle}`,`font-variant: ${n.fontVariant}`,`letter-spacing: ${n.letterSpacing}px`,`text-align: ${n.align}`,`padding: ${n.padding}px`,`white-space: ${n.whiteSpace==="pre"&&n.wordWrap?"pre-wrap":n.whiteSpace}`,...n.lineHeight?[`line-height: ${n.lineHeight}px`]:[],...n.wordWrap?[`word-wrap: ${n.breakWords?"break-all":"break-word"}`,`max-width: ${n.wordWrapWidth}px`]:[],...t?[RA(t)]:[],...n.dropShadow?[BA(n.dropShadow)]:[],...n.cssOverrides].join(";")} }`];return F8(n.tagStyles,a),a.join(" ")}function BA(n){const t=Ce.shared.setValue(n.color).setAlpha(n.alpha).toHexa(),e=Math.round(Math.cos(n.angle)*n.distance),i=Math.round(Math.sin(n.angle)*n.distance),a=`${e}px ${i}px`;return n.blur>0?`text-shadow: ${a} ${n.blur}px ${t}`:`text-shadow: ${a} ${t}`}function RA(n){return[`-webkit-text-stroke-width: ${n.width}px`,`-webkit-text-stroke-color: ${Ce.shared.setValue(n.color).toHex()}`,`text-stroke-width: ${n.width}px`,`text-stroke-color: ${Ce.shared.setValue(n.color).toHex()}`,"paint-order: stroke"].join(";")}const T1={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},A1={fill:n=>`color: ${Ce.shared.setValue(n).toHex()}`,breakWords:n=>`word-wrap: ${n?"break-all":"break-word"}`,stroke:RA,dropShadow:BA};function F8(n,t){for(const e in n){const i=n[e],a=[];for(const o in i)A1[o]?a.push(A1[o](i[o])):T1[o]&&a.push(T1[o].replace("{{VALUE}}",i[o]));t.push(`${e} { ${a.join(";")} }`)}}class Xd extends Br{constructor(t={}){super(t),this._cssOverrides=[],this.cssOverrides=t.cssOverrides??[],this.tagStyles=t.tagStyles??{}}set cssOverrides(t){this._cssOverrides=t instanceof Array?t:[t],this.update()}get cssOverrides(){return this._cssOverrides}update(){this._cssStyle=null,super.update()}clone(){return new Xd({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?{...this.dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides,tagStyles:{...this.tagStyles}})}get cssStyle(){return this._cssStyle||(this._cssStyle=CA(this)),this._cssStyle}addOverride(...t){const e=t.filter(i=>!this.cssOverrides.includes(i));e.length>0&&(this.cssOverrides.push(...e),this.update())}removeOverride(...t){const e=t.filter(i=>this.cssOverrides.includes(i));e.length>0&&(this.cssOverrides=this.cssOverrides.filter(i=>!e.includes(i)),this.update())}set fill(t){typeof t!="string"&&typeof t!="number"&&kt("[HTMLTextStyle] only color fill is not supported by HTMLText"),super.fill=t}set stroke(t){t&&typeof t!="string"&&typeof t!="number"&&kt("[HTMLTextStyle] only color stroke is not supported by HTMLText"),super.stroke=t}}const C1="http://www.w3.org/2000/svg",B1="http://www.w3.org/1999/xhtml";class kb{constructor(){this.svgRoot=document.createElementNS(C1,"svg"),this.foreignObject=document.createElementNS(C1,"foreignObject"),this.domElement=document.createElementNS(B1,"div"),this.styleElement=document.createElementNS(B1,"style"),this.image=new Image;const{foreignObject:t,svgRoot:e,styleElement:i,domElement:a}=this;t.setAttribute("width","10000"),t.setAttribute("height","10000"),t.style.overflow="hidden",e.appendChild(t),t.appendChild(i),t.appendChild(a)}}let R1;function Xb(n,t,e,i){i||(i=R1||(R1=new kb));const{domElement:a,styleElement:o,svgRoot:h}=i;a.innerHTML=`<style>${t.cssStyle};</style><div style='padding:0'>${n}</div>`,a.setAttribute("style","transform-origin: top left; display: inline-block"),e&&(o.textContent=e),document.body.appendChild(h);const f=a.getBoundingClientRect();h.remove();const m=t.padding*2;return{width:f.width-m,height:f.height-m}}class MA extends Zg{constructor(...t){const e=Jg(t,"HtmlText");super(e,Xd),this.renderPipeId="htmlText",e.textureStyle&&(this.textureStyle=e.textureStyle instanceof ba?e.textureStyle:new ba(e.textureStyle))}updateBounds(){const t=this._bounds,e=this._anchor,i=Xb(this.text,this._style),{width:a,height:o}=i;t.minX=-e._x*a,t.maxX=t.minX+a,t.minY=-e._y*o,t.maxY=t.minY+o}}class DA extends TA{uploadQueueItem(t){t instanceof Sn?this.uploadTextureSource(t):t instanceof Vb?this.uploadText(t):t instanceof MA?this.uploadHTMLText(t):t instanceof AA?this.uploadBitmapText(t):t instanceof er&&this.uploadGraphicsContext(t)}uploadTextureSource(t){this.renderer.texture.initSource(t)}uploadText(t){this.renderer.renderPipes.text.initGpuText(t)}uploadBitmapText(t){this.renderer.renderPipes.bitmapText.initGpuText(t)}uploadHTMLText(t){this.renderer.renderPipes.htmlText.initGpuText(t)}uploadGraphicsContext(t){this.renderer.graphicsContext.getGpuContext(t);const{instructions:e}=t;for(const i of e)if(i.action==="texture"){const{image:a}=i.data;this.uploadTextureSource(a.source)}else if(i.action==="fill"){const{texture:a}=i.data.style;this.uploadTextureSource(a.source)}return null}}class wA extends DA{destroy(){clearTimeout(this.timeout),this.renderer=null,this.queue=null,this.resolves=null}}wA.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"prepare"};class Ib{constructor(){this._tempState=Ir.for2d(),this._didUploadHash={}}init(t){t.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(t,e,i){const a=t.renderer,o=this._didUploadHash[i.uid];a.shader.bind(i,o),o||(this._didUploadHash[i.uid]=!0),a.shader.updateUniformGroup(a.globalUniforms.uniformGroup),a.geometry.bind(e,i.glProgram)}execute(t,e){const i=t.renderer;this._tempState.blendMode=e.blendMode,i.state.set(this._tempState);const a=e.textures.textures;for(let o=0;o<e.textures.count;o++)i.texture.bind(a[o],o);i.geometry.draw(e.topology,e.size,e.start)}}Ib.extension={type:[I.WebGLPipesAdaptor],name:"batch"};function V8(n){const t=[];let e=0;for(let i=0;i<n;i++)t[e]={texture:{sampleType:"float",viewDimension:"2d",multisampled:!1},binding:e,visibility:GPUShaderStage.FRAGMENT},e++,t[e]={sampler:{type:"filtering"},binding:e,visibility:GPUShaderStage.FRAGMENT},e++;return t}function k8(n){const t={};let e=0;for(let i=0;i<n;i++)t[`textureSource${i+1}`]=e++,t[`textureSampler${i+1}`]=e++;return t}const Km=Ir.for2d();class Yb{start(t,e,i){const a=t.renderer,o=a.encoder,h=i.gpuProgram;this._shader=i,this._geometry=e,o.setGeometry(e,h),Km.blendMode="normal",a.pipeline.getPipeline(e,h,Km);const f=a.globalUniforms.bindGroup;o.resetBindGroup(1),o.setBindGroup(0,f,h)}execute(t,e){const i=this._shader.gpuProgram,a=t.renderer,o=a.encoder;if(!e.bindGroup){const m=e.textures;e.bindGroup=Lg(m.textures,m.count,a.limits.maxBatchableTextures)}Km.blendMode=e.blendMode;const h=a.bindGroup.getBindGroup(e.bindGroup,i,1),f=a.pipeline.getPipeline(this._geometry,i,Km,e.topology);e.bindGroup._touch(a.textureGC.count),o.setPipeline(f),o.renderPassEncoder.setBindGroup(1,h),o.renderPassEncoder.drawIndexed(e.size,1,e.start)}}Yb.extension={type:[I.WebGPUPipesAdaptor],name:"batch"};const qb=class UA{constructor(t,e){var i,a;this.state=Ir.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null),this.renderer=t,this._adaptor=e,(a=(i=this._adaptor).init)==null||a.call(i,this)}static getBatcher(t){return new this._availableBatchers[t]}buildStart(t){let e=this._batchersByInstructionSet[t.uid];e||(e=this._batchersByInstructionSet[t.uid]=Object.create(null),e.default||(e.default=new Yg({maxTextures:this.renderer.limits.maxBatchableTextures}))),this._activeBatches=e,this._activeBatch=this._activeBatches.default;for(const i in this._activeBatches)this._activeBatches[i].begin()}addToBatch(t,e){if(this._activeBatch.name!==t.batcherName){this._activeBatch.break(e);let i=this._activeBatches[t.batcherName];i||(i=this._activeBatches[t.batcherName]=UA.getBatcher(t.batcherName),i.begin()),this._activeBatch=i}this._activeBatch.add(t)}break(t){this._activeBatch.break(t)}buildEnd(t){this._activeBatch.break(t);const e=this._activeBatches;for(const i in e){const a=e[i],o=a.geometry;o.indexBuffer.setDataWithSize(a.indexBuffer,a.indexSize,!0),o.buffers[0].setDataWithSize(a.attributeBuffer.float32View,a.attributeSize,!1)}}upload(t){const e=this._batchersByInstructionSet[t.uid];for(const i in e){const a=e[i],o=a.geometry;a.dirty&&(a.dirty=!1,o.buffers[0].update(a.attributeSize*4))}}execute(t){if(t.action==="startBatch"){const e=t.batcher,i=e.geometry,a=e.shader;this._adaptor.start(this,i,a)}this._adaptor.execute(this,t)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(const t in this._activeBatches)this._activeBatches[t].destroy();this._activeBatches=null}};qb.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"batch"};qb._availableBatchers=Object.create(null);let jb=qb;Oe.handleByMap(I.Batcher,jb._availableBatchers);Oe.add(Yg);function X8(n){const t=n.split(/([\n{}])/g).map(a=>a.trim()).filter(a=>a.length);let e="";return t.map(a=>{let o=e+a;return a==="{"?e+="    ":a==="}"&&(e=e.substr(0,e.length-4),o=e+a),o}).join(`
`)}const ph={name:"local-uniform-bit",vertex:{header:`

            struct LocalUniforms {
                uTransformMatrix:mat3x3<f32>,
                uColor:vec4<f32>,
                uRound:f32,
            }

            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `}},OA={...ph,vertex:{...ph.vertex,header:ph.vertex.header.replace("group(1)","group(2)")}},$g={name:"local-uniform-bit",vertex:{header:`

            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix = uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `}},GA={name:"texture-bit",vertex:{header:`

        struct TextureUniforms {
            uTextureMatrix:mat3x3<f32>,
        }

        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
        `,main:`
            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
            @group(2) @binding(0) var uTexture: texture_2d<f32>;
            @group(2) @binding(1) var uSampler: sampler;


        `,main:`
            outColor = textureSample(uTexture, uSampler, vUV);
        `}},PA={name:"texture-bit",vertex:{header:`
            uniform mat3 uTextureMatrix;
        `,main:`
            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
        uniform sampler2D uTexture;


        `,main:`
            outColor = texture(uTexture, vUV);
        `}},I8=new $n;class Y8 extends xd{constructor(){super(),this.filters=[new pA({sprite:new Ri(At.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(t){this.filters[0].sprite=t}get inverse(){return this.filters[0].inverse}set inverse(t){this.filters[0].inverse=t}}class Kb{constructor(t){this._activeMaskStage=[],this._renderer=t}push(t,e,i){const a=this._renderer;if(a.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:t,inverse:e._maskOptions.inverse,canBundle:!1,maskedContainer:e}),t.inverse=e._maskOptions.inverse,t.renderMaskToTexture){const o=t.mask;o.includeInBuild=!0,o.collectRenderables(i,a,null),o.includeInBuild=!1}a.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:t,maskedContainer:e,inverse:e._maskOptions.inverse,canBundle:!1})}pop(t,e,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:t,inverse:e._maskOptions.inverse,canBundle:!1})}execute(t){const e=this._renderer,i=t.mask.renderMaskToTexture;if(t.action==="pushMaskBegin"){const a=di.get(Y8);if(a.inverse=t.inverse,i){t.mask.mask.measurable=!0;const o=Pd(t.mask.mask,!0,I8);t.mask.mask.measurable=!1,o.ceil();const h=e.renderTarget.renderTarget.colorTexture.source,f=Fn.getOptimalTexture(o.width,o.height,h._resolution,h.antialias);e.renderTarget.push(f,!0),e.globalUniforms.push({offset:o,worldColor:4294967295});const m=a.sprite;m.texture=f,m.worldTransform.tx=o.minX,m.worldTransform.ty=o.minY,this._activeMaskStage.push({filterEffect:a,maskedContainer:t.maskedContainer,filterTexture:f})}else a.sprite=t.mask.mask,this._activeMaskStage.push({filterEffect:a,maskedContainer:t.maskedContainer})}else if(t.action==="pushMaskEnd"){const a=this._activeMaskStage[this._activeMaskStage.length-1];i&&(e.type===Cr.WEBGL&&e.renderTarget.finishRenderPass(),e.renderTarget.pop(),e.globalUniforms.pop()),e.filter.push({renderPipeId:"filter",action:"pushFilter",container:a.maskedContainer,filterEffect:a.filterEffect,canBundle:!1})}else if(t.action==="popMaskEnd"){e.filter.pop();const a=this._activeMaskStage.pop();i&&Fn.returnTexture(a.filterTexture),di.return(a.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}}Kb.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"alphaMask"};class Wb{constructor(t){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=t}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(t,e,i){this._renderer.renderPipes.batch.break(i);const o=this._colorStack;o[this._colorStackIndex]=o[this._colorStackIndex-1]&t.mask;const h=this._colorStack[this._colorStackIndex];h!==this._currentColor&&(this._currentColor=h,i.add({renderPipeId:"colorMask",colorMask:h,canBundle:!1})),this._colorStackIndex++}pop(t,e,i){this._renderer.renderPipes.batch.break(i);const o=this._colorStack;this._colorStackIndex--;const h=o[this._colorStackIndex-1];h!==this._currentColor&&(this._currentColor=h,i.add({renderPipeId:"colorMask",colorMask:h,canBundle:!1}))}execute(t){this._renderer.colorMask.setMask(t.colorMask)}destroy(){this._colorStack=null}}Wb.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"colorMask"};class q8{constructor(t){this.priority=0,this.pipe="scissorMask",this.mask=t,this.mask.renderable=!1,this.mask.measurable=!1}addBounds(t,e){Dg(this.mask,t,e)}addLocalBounds(t,e){wg(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}reset(){this.mask.measurable=!0,this.mask=null}destroy(){this.reset()}}class Qb{constructor(t){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=t}push(t,e,i){var a;const o=t,h=this._renderer;h.renderPipes.batch.break(i),h.renderPipes.blendMode.setBlendMode(o.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:t,inverse:e._maskOptions.inverse,canBundle:!1});const f=o.mask;f.includeInBuild=!0,this._maskHash.has(o)||this._maskHash.set(o,{instructionsStart:0,instructionsLength:0});const m=this._maskHash.get(o);m.instructionsStart=i.instructionSize,f.collectRenderables(i,h,null),f.includeInBuild=!1,h.renderPipes.batch.break(i),i.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:t,inverse:e._maskOptions.inverse,canBundle:!1});const g=i.instructionSize-m.instructionsStart-1;m.instructionsLength=g;const b=h.renderTarget.renderTarget.uid;(a=this._maskStackHash)[b]??(a[b]=0)}pop(t,e,i){const a=t,o=this._renderer;o.renderPipes.batch.break(i),o.renderPipes.blendMode.setBlendMode(a.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:e._maskOptions.inverse,canBundle:!1});const h=this._maskHash.get(t);for(let f=0;f<h.instructionsLength;f++)i.instructions[i.instructionSize++]=i.instructions[h.instructionsStart++];i.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(t){var e;const i=this._renderer,a=i.renderTarget.renderTarget.uid;let o=(e=this._maskStackHash)[a]??(e[a]=0);t.action==="pushMaskBegin"?(i.renderTarget.ensureDepthStencil(),i.stencil.setStencilMode(On.RENDERING_MASK_ADD,o),o++,i.colorMask.setMask(0)):t.action==="pushMaskEnd"?(t.inverse?i.stencil.setStencilMode(On.INVERSE_MASK_ACTIVE,o):i.stencil.setStencilMode(On.MASK_ACTIVE,o),i.colorMask.setMask(15)):t.action==="popMaskBegin"?(i.colorMask.setMask(0),o!==0?i.stencil.setStencilMode(On.RENDERING_MASK_REMOVE,o):(i.renderTarget.clear(null,Er.STENCIL),i.stencil.setStencilMode(On.DISABLED,o)),o--):t.action==="popMaskEnd"&&(t.inverse?i.stencil.setStencilMode(On.INVERSE_MASK_ACTIVE,o):i.stencil.setStencilMode(On.MASK_ACTIVE,o),i.colorMask.setMask(15)),this._maskStackHash[a]=o}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}}Qb.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"stencilMask"};var _d=(n=>(n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",n))(_d||{});class NA{constructor(t,e){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.type=e}}class Zb{constructor(t){this._gpuBuffers=Object.create(null),this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuBuffers")}destroy(){this._renderer=null,this._gl=null,this._gpuBuffers=null,this._boundBufferBases=null}contextChange(){this._gl=this._renderer.gl,this._gpuBuffers=Object.create(null),this._maxBindings=this._renderer.limits.maxUniformBindings}getGlBuffer(t){return this._gpuBuffers[t.uid]||this.createGLBuffer(t)}bind(t){const{_gl:e}=this,i=this.getGlBuffer(t);e.bindBuffer(i.type,i.buffer)}bindBufferBase(t,e){const{_gl:i}=this;this._boundBufferBases[e]!==t&&(this._boundBufferBases[e]=t,t._lastBindBaseLocation=e,i.bindBufferBase(i.UNIFORM_BUFFER,e,t.buffer))}nextBindBase(t){this._bindCallId++,this._minBaseLocation=0,t&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(t){let e=this.getLastBindBaseLocation(t);if(e>=this._minBaseLocation)return t._lastBindCallId=this._bindCallId,e;let i=0,a=this._nextBindBaseIndex;for(;i<2;){a>=this._maxBindings&&(a=this._minBaseLocation,i++);const o=this._boundBufferBases[a];if(o&&o._lastBindCallId===this._bindCallId){a++;continue}break}return e=a,this._nextBindBaseIndex=a+1,i>=2?-1:(t._lastBindCallId=this._bindCallId,this._boundBufferBases[e]=null,e)}getLastBindBaseLocation(t){const e=t._lastBindBaseLocation;return this._boundBufferBases[e]===t?e:-1}bindBufferRange(t,e,i,a){const{_gl:o}=this;i||(i=0),e||(e=0),this._boundBufferBases[e]=null,o.bindBufferRange(o.UNIFORM_BUFFER,e||0,t.buffer,i*256,a||256)}updateBuffer(t){const{_gl:e}=this,i=this.getGlBuffer(t);if(t._updateID===i.updateID)return i;i.updateID=t._updateID,e.bindBuffer(i.type,i.buffer);const a=t.data,o=t.descriptor.usage&be.STATIC?e.STATIC_DRAW:e.DYNAMIC_DRAW;return a?i.byteLength>=a.byteLength?e.bufferSubData(i.type,0,a,0,t._updateSize/a.BYTES_PER_ELEMENT):(i.byteLength=a.byteLength,e.bufferData(i.type,a,o)):(i.byteLength=t.descriptor.size,e.bufferData(i.type,i.byteLength,o)),i}destroyAll(){const t=this._gl;for(const e in this._gpuBuffers)t.deleteBuffer(this._gpuBuffers[e].buffer);this._gpuBuffers=Object.create(null)}onBufferDestroy(t,e){const i=this._gpuBuffers[t.uid],a=this._gl;e||a.deleteBuffer(i.buffer),this._gpuBuffers[t.uid]=null}createGLBuffer(t){const{_gl:e}=this;let i=_d.ARRAY_BUFFER;t.descriptor.usage&be.INDEX?i=_d.ELEMENT_ARRAY_BUFFER:t.descriptor.usage&be.UNIFORM&&(i=_d.UNIFORM_BUFFER);const a=new NA(e.createBuffer(),i);return this._gpuBuffers[t.uid]=a,t.on("destroy",this.onBufferDestroy,this),a}resetState(){this._boundBufferBases=Object.create(null)}}Zb.extension={type:[I.WebGLSystem],name:"buffer"};const Jb=class zA{constructor(t){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=t,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this._renderer.gl=t}init(t){t={...zA.defaultOptions,...t};let e=this.multiView=t.multiView;if(t.context&&e&&(kt("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),e=!1),e?this.canvas=me.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,t.context)this.initFromContext(t.context);else{const i=this._renderer.background.alpha<1,a=t.premultipliedAlpha??!0,o=t.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(t.preferWebGLVersion,{alpha:i,premultipliedAlpha:a,antialias:o,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference??"default"})}}ensureCanvasSize(t){if(!this.multiView){t!==this.canvas&&kt("multiView is disabled, but targetCanvas is not the main canvas");return}const{canvas:e}=this;(e.width<t.width||e.height<t.height)&&(e.width=Math.max(t.width,t.width),e.height=Math.max(t.height,t.height))}initFromContext(t){this.gl=t,this.webGLVersion=t instanceof me.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(t),this._renderer.runners.contextChange.emit(t);const e=this._renderer.view.canvas;e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(t,e){let i;const a=this.canvas;if(t===2&&(i=a.getContext("webgl2",e)),!i&&(i=a.getContext("webgl",e),!i))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=i,this.initFromContext(this.gl)}getExtensions(){const{gl:t}=this,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc"),rgtc:t.getExtension("EXT_texture_compression_rgtc"),loseContext:t.getExtension("WEBGL_lose_context")};if(this.webGLVersion===1)this.extensions={...e,drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:t.getExtension("ANGLE_instanced_arrays"),srgb:t.getExtension("EXT_sRGB")};else{this.extensions={...e,colorBufferFloat:t.getExtension("EXT_color_buffer_float")};const i=t.getExtension("WEBGL_provoking_vertex");i&&i.provokingVertexWEBGL(i.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(t){t.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{var e;this.gl.isContextLost()&&((e=this.extensions.loseContext)==null||e.restoreContext())},0))}handleContextRestored(){this.getExtensions(),this._renderer.runners.contextChange.emit(this.gl)}destroy(){var e;const t=this._renderer.view.canvas;this._renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),(e=this.extensions.loseContext)==null||e.loseContext()}forceContextLoss(){var t;(t=this.extensions.loseContext)==null||t.loseContext(),this._contextLossForced=!0}validateContext(t){const e=t.getContextAttributes();e&&!e.stencil&&kt("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=this.supports,a=this.webGLVersion===2,o=this.extensions;i.uint32Indices=a||!!o.uint32ElementIndex,i.uniformBufferObject=a,i.vertexArrayObject=a||!!o.vertexArrayObject,i.srgbTextures=a||!!o.srgb,i.nonPowOf2wrapping=a,i.nonPowOf2mipmaps=a,i.msaa=a,i.uint32Indices||kt("Provided WebGL context does not support 32 index buffer, large scenes may not render correctly")}};Jb.extension={type:[I.WebGLSystem],name:"context"};Jb.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};let HA=Jb;function $b(n,t){for(const e in n.attributes){const i=n.attributes[e],a=t[e];a?(i.format??(i.format=a.format),i.offset??(i.offset=a.offset),i.instance??(i.instance=a.instance)):kt(`Attribute ${e} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}j8(n)}function j8(n){const{buffers:t,attributes:e}=n,i={},a={};for(const o in t){const h=t[o];i[h.uid]=0,a[h.uid]=0}for(const o in e){const h=e[o];i[h.buffer.uid]+=Hl(h.format).stride}for(const o in e){const h=e[o];h.stride??(h.stride=i[h.buffer.uid]),h.start??(h.start=a[h.buffer.uid]),a[h.buffer.uid]+=Hl(h.format).stride}}var dg=(n=>(n[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n))(dg||{}),tv=(n=>(n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n))(tv||{}),LA=(n=>(n[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n))(LA||{}),Ae=(n=>(n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT",n))(Ae||{});const M1={uint8x2:Ae.UNSIGNED_BYTE,uint8x4:Ae.UNSIGNED_BYTE,sint8x2:Ae.BYTE,sint8x4:Ae.BYTE,unorm8x2:Ae.UNSIGNED_BYTE,unorm8x4:Ae.UNSIGNED_BYTE,snorm8x2:Ae.BYTE,snorm8x4:Ae.BYTE,uint16x2:Ae.UNSIGNED_SHORT,uint16x4:Ae.UNSIGNED_SHORT,sint16x2:Ae.SHORT,sint16x4:Ae.SHORT,unorm16x2:Ae.UNSIGNED_SHORT,unorm16x4:Ae.UNSIGNED_SHORT,snorm16x2:Ae.SHORT,snorm16x4:Ae.SHORT,float16x2:Ae.HALF_FLOAT,float16x4:Ae.HALF_FLOAT,float32:Ae.FLOAT,float32x2:Ae.FLOAT,float32x3:Ae.FLOAT,float32x4:Ae.FLOAT,uint32:Ae.UNSIGNED_INT,uint32x2:Ae.UNSIGNED_INT,uint32x3:Ae.UNSIGNED_INT,uint32x4:Ae.UNSIGNED_INT,sint32:Ae.INT,sint32x2:Ae.INT,sint32x3:Ae.INT,sint32x4:Ae.INT};function FA(n){return M1[n]??M1.float32}const K8={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5};class ev{constructor(t){this._geometryVaoHash=Object.create(null),this._renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._renderer.renderableGC.addManagedHash(this,"_geometryVaoHash")}contextChange(){const t=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");const e=this._renderer.context.extensions.vertexArrayObject;e&&(t.createVertexArray=()=>e.createVertexArrayOES(),t.bindVertexArray=a=>e.bindVertexArrayOES(a),t.deleteVertexArray=a=>e.deleteVertexArrayOES(a));const i=this._renderer.context.extensions.vertexAttribDivisorANGLE;i&&(t.drawArraysInstanced=(a,o,h,f)=>{i.drawArraysInstancedANGLE(a,o,h,f)},t.drawElementsInstanced=(a,o,h,f,m)=>{i.drawElementsInstancedANGLE(a,o,h,f,m)},t.vertexAttribDivisor=(a,o)=>i.vertexAttribDivisorANGLE(a,o)),this._activeGeometry=null,this._activeVao=null,this._geometryVaoHash=Object.create(null)}bind(t,e){const i=this.gl;this._activeGeometry=t;const a=this.getVao(t,e);this._activeVao!==a&&(this._activeVao=a,i.bindVertexArray(a)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this._renderer.buffer;for(let i=0;i<t.buffers.length;i++){const a=t.buffers[i];e.updateBuffer(a)}}checkCompatibility(t,e){const i=t.attributes,a=e._attributeData;for(const o in a)if(!i[o])throw new Error(`shader and geometry incompatible, geometry missing the "${o}" attribute`)}getSignature(t,e){const i=t.attributes,a=e._attributeData,o=["g",t.uid];for(const h in i)a[h]&&o.push(h,a[h].location);return o.join("-")}getVao(t,e){var i;return((i=this._geometryVaoHash[t.uid])==null?void 0:i[e._key])||this.initGeometryVao(t,e)}initGeometryVao(t,e,i=!0){const a=this._renderer.gl,o=this._renderer.buffer;this._renderer.shader._getProgramData(e),this.checkCompatibility(t,e);const h=this.getSignature(t,e);this._geometryVaoHash[t.uid]||(this._geometryVaoHash[t.uid]=Object.create(null),t.on("destroy",this.onGeometryDestroy,this));const f=this._geometryVaoHash[t.uid];let m=f[h];if(m)return f[e._key]=m,m;$b(t,e._attributeData);const g=t.buffers;m=a.createVertexArray(),a.bindVertexArray(m);for(let b=0;b<g.length;b++){const x=g[b];o.bind(x)}return this.activateVao(t,e),f[e._key]=m,f[h]=m,a.bindVertexArray(null),m}onGeometryDestroy(t,e){const i=this._geometryVaoHash[t.uid],a=this.gl;if(i){if(e)for(const o in i)this._activeVao!==i[o]&&this.unbind(),a.deleteVertexArray(i[o]);this._geometryVaoHash[t.uid]=null}}destroyAll(t=!1){const e=this.gl;for(const i in this._geometryVaoHash){if(t)for(const a in this._geometryVaoHash[i]){const o=this._geometryVaoHash[i];this._activeVao!==o&&this.unbind(),e.deleteVertexArray(o[a])}this._geometryVaoHash[i]=null}}activateVao(t,e){var f;const i=this._renderer.gl,a=this._renderer.buffer,o=t.attributes;t.indexBuffer&&a.bind(t.indexBuffer);let h=null;for(const m in o){const g=o[m],b=g.buffer,x=a.getGlBuffer(b),E=e._attributeData[m];if(E){h!==x&&(a.bind(b),h=x);const T=E.location;i.enableVertexAttribArray(T);const R=Hl(g.format),D=FA(g.format);if(((f=E.format)==null?void 0:f.substring(1,4))==="int"?i.vertexAttribIPointer(T,R.size,D,g.stride,g.offset):i.vertexAttribPointer(T,R.size,D,R.normalised,g.stride,g.offset),g.instance)if(this.hasInstance){const C=g.divisor??1;i.vertexAttribDivisor(T,C)}else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,i,a){const{gl:o}=this._renderer,h=this._activeGeometry,f=K8[t||h.topology];if(a??(a=h.instanceCount),h.indexBuffer){const m=h.indexBuffer.data.BYTES_PER_ELEMENT,g=m===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;a>1?o.drawElementsInstanced(f,e||h.indexBuffer.data.length,g,(i||0)*m,a):o.drawElements(f,e||h.indexBuffer.data.length,g,(i||0)*m)}else a>1?o.drawArraysInstanced(f,i||0,e||h.getSize(),a):o.drawArrays(f,i||0,e||h.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}}ev.extension={type:[I.WebGLSystem],name:"geometry"};const W8=new Ju({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),nv=class VA{constructor(t){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=t}init(t={}){const{useBackBuffer:e,antialias:i}={...VA.defaultOptions,...t};this.useBackBuffer=e,this._antialias=i,this._renderer.context.supports.msaa||(kt("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=Ir.for2d();const a=new qr({vertex:`
                attribute vec2 aPosition;
                out vec2 vUv;

                void main() {
                    gl_Position = vec4(aPosition, 0.0, 1.0);

                    vUv = (aPosition + 1.0) / 2.0;

                    // flip dem UVs
                    vUv.y = 1.0 - vUv.y;
                }`,fragment:`
                in vec2 vUv;
                out vec4 finalColor;

                uniform sampler2D uTexture;

                void main() {
                    finalColor = texture(uTexture, vUv);
                }`,name:"big-triangle"});this._bigTriangleShader=new jr({glProgram:a,resources:{uTexture:At.WHITE.source}})}renderStart(t){const e=this._renderer.renderTarget.getRenderTarget(t.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!e.isRoot,this._useBackBufferThisRender){const i=this._renderer.renderTarget.getRenderTarget(t.target);this._targetTexture=i.colorTexture,t.target=this._getBackBufferTexture(i.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){const t=this._renderer;t.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(t.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,t.encoder.draw({geometry:W8,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(t){return this._backBufferTexture=this._backBufferTexture||new At({source:new Sn({width:t.width,height:t.height,resolution:t._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(t.width,t.height,t._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}};nv.extension={type:[I.WebGLSystem],name:"backBuffer",priority:1};nv.defaultOptions={useBackBuffer:!1};let kA=nv;class iv{constructor(t){this._colorMaskCache=15,this._renderer=t}setMask(t){this._colorMaskCache!==t&&(this._colorMaskCache=t,this._renderer.gl.colorMask(!!(t&8),!!(t&4),!!(t&2),!!(t&1)))}}iv.extension={type:[I.WebGLSystem],name:"colorMask"};class rv{constructor(t){this.commandFinished=Promise.resolve(),this._renderer=t}setGeometry(t,e){this._renderer.geometry.bind(t,e.glProgram)}finishRenderPass(){}draw(t){const e=this._renderer,{geometry:i,shader:a,state:o,skipSync:h,topology:f,size:m,start:g,instanceCount:b}=t;e.shader.bind(a,h),e.geometry.bind(i,e.shader._activeProgram),o&&e.state.set(o),e.geometry.draw(f,m,g,b??i.instanceCount)}destroy(){this._renderer=null}}rv.extension={type:[I.WebGLSystem],name:"encoder"};class av{constructor(t){this._renderer=t}contextChange(){const t=this._renderer.gl;this.maxTextures=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.maxBatchableTextures=yb(this.maxTextures,t),this.maxUniformBindings=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS)}destroy(){}}av.extension={type:[I.WebGLSystem],name:"limits"};class XA{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}}const Vl=[];Vl[On.NONE]=void 0;Vl[On.DISABLED]={stencilWriteMask:0,stencilReadMask:0};Vl[On.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}};Vl[On.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}};Vl[On.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}};Vl[On.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"keep"},stencilBack:{compare:"not-equal",passOp:"keep"}};class sv{constructor(t){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:On.NONE},this._renderTargetStencilState=Object.create(null),t.renderTarget.onRenderTargetChange.add(this)}contextChange(t){this._gl=t,this._comparisonFuncMapping={always:t.ALWAYS,never:t.NEVER,equal:t.EQUAL,"not-equal":t.NOTEQUAL,less:t.LESS,"less-equal":t.LEQUAL,greater:t.GREATER,"greater-equal":t.GEQUAL},this._stencilOpsMapping={keep:t.KEEP,zero:t.ZERO,replace:t.REPLACE,invert:t.INVERT,"increment-clamp":t.INCR,"decrement-clamp":t.DECR,"increment-wrap":t.INCR_WRAP,"decrement-wrap":t.DECR_WRAP},this.resetState()}onRenderTargetChange(t){if(this._activeRenderTarget===t)return;this._activeRenderTarget=t;let e=this._renderTargetStencilState[t.uid];e||(e=this._renderTargetStencilState[t.uid]={stencilMode:On.DISABLED,stencilReference:0}),this.setStencilMode(e.stencilMode,e.stencilReference)}resetState(){this._stencilCache.enabled=!1,this._stencilCache.stencilMode=On.NONE,this._stencilCache.stencilReference=0}setStencilMode(t,e){const i=this._renderTargetStencilState[this._activeRenderTarget.uid],a=this._gl,o=Vl[t],h=this._stencilCache;if(i.stencilMode=t,i.stencilReference=e,t===On.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,a.disable(a.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,a.enable(a.STENCIL_TEST)),(t!==h.stencilMode||h.stencilReference!==e)&&(h.stencilMode=t,h.stencilReference=e,a.stencilFunc(this._comparisonFuncMapping[o.stencilBack.compare],e,255),a.stencilOp(a.KEEP,a.KEEP,this._stencilOpsMapping[o.stencilBack.passOp]))}}sv.extension={type:[I.WebGLSystem],name:"stencil"};class lv{constructor(t){this._syncFunctionHash=Object.create(null),this._adaptor=t,this._systemCheck()}_systemCheck(){if(!fb())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(t){const e=this.getUniformGroupData(t);t.buffer||(t.buffer=new Ar({data:new Float32Array(e.layout.size/4),usage:be.UNIFORM|be.COPY_DST}))}getUniformGroupData(t){return this._syncFunctionHash[t._signature]||this._initUniformGroup(t)}_initUniformGroup(t){const e=t._signature;let i=this._syncFunctionHash[e];if(!i){const a=Object.keys(t.uniformStructures).map(f=>t.uniformStructures[f]),o=this._adaptor.createUboElements(a),h=this._generateUboSync(o.uboElements);i=this._syncFunctionHash[e]={layout:o,syncFunction:h}}return this._syncFunctionHash[e]}_generateUboSync(t){return this._adaptor.generateUboSync(t)}syncUniformGroup(t,e,i){const a=this.getUniformGroupData(t);t.buffer||(t.buffer=new Ar({data:new Float32Array(a.layout.size/4),usage:be.UNIFORM|be.COPY_DST}));let o=null;return e||(e=t.buffer.data,o=t.buffer.dataInt32),i||(i=0),a.syncFunction(t.uniforms,e,o,i),!0}updateUniformGroup(t){if(t.isStatic&&!t._dirtyId)return!1;t._dirtyId=0;const e=this.syncUniformGroup(t);return t.buffer.update(),e}destroy(){this._syncFunctionHash=null}}const ov={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":16*2,"mat3x3<f32>":16*3,"mat4x4<f32>":16*4};function IA(n){const t=n.map(o=>({data:o,offset:0,size:0})),e=16;let i=0,a=0;for(let o=0;o<t.length;o++){const h=t[o];if(i=ov[h.data.type],!i)throw new Error(`Unknown type ${h.data.type}`);h.data.size>1&&(i=Math.max(i,e)*h.data.size);const f=i===12?16:i;h.size=i;const m=a%e;m>0&&e-m<f?a+=(e-m)%16:a+=(i-m%i)%i,h.offset=a,a+=i}return a=Math.ceil(a/16)*16,{uboElements:t,size:a}}const Fo=[{type:"mat3x3<f32>",test:n=>n.value.a!==void 0,ubo:`
            var matrix = uv[name].toArray(true);
            data[offset] = matrix[0];
            data[offset + 1] = matrix[1];
            data[offset + 2] = matrix[2];
            data[offset + 4] = matrix[3];
            data[offset + 5] = matrix[4];
            data[offset + 6] = matrix[5];
            data[offset + 8] = matrix[6];
            data[offset + 9] = matrix[7];
            data[offset + 10] = matrix[8];
        `,uniform:`
            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
        `},{type:"vec4<f32>",test:n=>n.type==="vec4<f32>"&&n.size===1&&n.value.width!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
            data[offset + 2] = v.width;
            data[offset + 3] = v.height;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
                cv[0] = v.x;
                cv[1] = v.y;
                cv[2] = v.width;
                cv[3] = v.height;
                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
            }
        `},{type:"vec2<f32>",test:n=>n.type==="vec2<f32>"&&n.size===1&&n.value.x!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y) {
                cv[0] = v.x;
                cv[1] = v.y;
                gl.uniform2f(ud[name].location, v.x, v.y);
            }
        `},{type:"vec4<f32>",test:n=>n.type==="vec4<f32>"&&n.size===1&&n.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
            data[offset + 3] = v.alpha;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                cv[3] = v.alpha;
                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
            }
        `},{type:"vec3<f32>",test:n=>n.type==="vec3<f32>"&&n.size===1&&n.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
            }
        `}];function uv(n,t,e,i){const a=[`
        var v = null;
        var v2 = null;
        var t = 0;
        var index = 0;
        var name = null;
        var arrayOffset = null;
    `];let o=0;for(let f=0;f<n.length;f++){const m=n[f],g=m.data.name;let b=!1,x=0;for(let E=0;E<Fo.length;E++)if(Fo[E].test(m.data)){x=m.offset/4,a.push(`name = "${g}";`,`offset += ${x-o};`,Fo[E][t]||Fo[E].ubo),b=!0;break}if(!b)if(m.data.size>1)x=m.offset/4,a.push(e(m,x-o));else{const E=i[m.data.type];x=m.offset/4,a.push(`
                    v = uv.${g};
                    offset += ${x-o};
                    ${E};
                `)}o=x}const h=a.join(`
`);return new Function("uv","data","dataInt32","offset",h)}function eh(n,t){return`
        for (let i = 0; i < ${n*t}; i++) {
            data[offset + (((i / ${n})|0) * 4) + (i % ${n})] = v[i];
        }
    `}const cv={f32:`
        data[offset] = v;`,i32:`
        dataInt32[offset] = v;`,"vec2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];`,"vec3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];`,"vec4<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];`,"vec2<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];`,"vec3<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];`,"vec4<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];
        dataInt32[offset + 3] = v[3];`,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 4] = v[2];
        data[offset + 5] = v[3];`,"mat3x3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];
        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];`,"mat4x4<f32>":`
        for (let i = 0; i < 16; i++) {
            data[offset + i] = v[i];
        }`,"mat3x2<f32>":eh(3,2),"mat4x2<f32>":eh(4,2),"mat2x3<f32>":eh(2,3),"mat4x3<f32>":eh(4,3),"mat2x4<f32>":eh(2,4),"mat3x4<f32>":eh(3,4)},YA={...cv,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];
    `};function qA(n,t){const e=Math.max(ov[n.data.type]/16,1),i=n.data.value.length/n.data.size,a=(4-i%4)%4,o=n.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
        v = uv.${n.data.name};
        offset += ${t};

        arrayOffset = offset;

        t = 0;

        for(var i=0; i < ${n.data.size*e}; i++)
        {
            for(var j = 0; j < ${i}; j++)
            {
                ${o}[arrayOffset++] = v[t++];
            }
            ${a!==0?`arrayOffset += ${a};`:""}
        }
    `}function jA(n){return uv(n,"uboStd40",qA,cv)}class hv extends lv{constructor(){super({createUboElements:IA,generateUboSync:jA})}}hv.extension={type:[I.WebGLSystem],name:"ubo"};class KA{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new Ue}init(t,e){this._renderer=t,this._renderTargetSystem=e,t.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new Ue}copyToTexture(t,e,i,a,o){const h=this._renderTargetSystem,f=this._renderer,m=h.getGpuRenderTarget(t),g=f.gl;return this.finishRenderPass(t),g.bindFramebuffer(g.FRAMEBUFFER,m.resolveTargetFramebuffer),f.texture.bind(e,0),g.copyTexSubImage2D(g.TEXTURE_2D,0,o.x,o.y,i.x,i.y,a.width,a.height),e}startRenderPass(t,e=!0,i,a){const o=this._renderTargetSystem,h=t.colorTexture,f=o.getGpuRenderTarget(t);let m=a.y;t.isRoot&&(m=h.pixelHeight-a.height),t.colorTextures.forEach(x=>{this._renderer.texture.unbind(x)});const g=this._renderer.gl;g.bindFramebuffer(g.FRAMEBUFFER,f.framebuffer);const b=this._viewPortCache;(b.x!==a.x||b.y!==m||b.width!==a.width||b.height!==a.height)&&(b.x=a.x,b.y=m,b.width=a.width,b.height=a.height,g.viewport(a.x,m,a.width,a.height)),!f.depthStencilRenderBuffer&&(t.stencil||t.depth)&&this._initStencil(f),this.clear(t,e,i)}finishRenderPass(t){const i=this._renderTargetSystem.getGpuRenderTarget(t);if(!i.msaa)return;const a=this._renderer.gl;a.bindFramebuffer(a.FRAMEBUFFER,i.resolveTargetFramebuffer),a.bindFramebuffer(a.READ_FRAMEBUFFER,i.framebuffer),a.blitFramebuffer(0,0,i.width,i.height,0,0,i.width,i.height,a.COLOR_BUFFER_BIT,a.NEAREST),a.bindFramebuffer(a.FRAMEBUFFER,i.framebuffer)}initGpuRenderTarget(t){const i=this._renderer.gl,a=new XA;return t.colorTexture instanceof js?(this._renderer.context.ensureCanvasSize(t.colorTexture.resource),a.framebuffer=null,a):(this._initColor(t,a),i.bindFramebuffer(i.FRAMEBUFFER,null),a)}destroyGpuRenderTarget(t){const e=this._renderer.gl;t.framebuffer&&(e.deleteFramebuffer(t.framebuffer),t.framebuffer=null),t.resolveTargetFramebuffer&&(e.deleteFramebuffer(t.resolveTargetFramebuffer),t.resolveTargetFramebuffer=null),t.depthStencilRenderBuffer&&(e.deleteRenderbuffer(t.depthStencilRenderBuffer),t.depthStencilRenderBuffer=null),t.msaaRenderBuffer.forEach(i=>{e.deleteRenderbuffer(i)}),t.msaaRenderBuffer=null}clear(t,e,i){if(!e)return;const a=this._renderTargetSystem;typeof e=="boolean"&&(e=e?Er.ALL:Er.NONE);const o=this._renderer.gl;if(e&Er.COLOR){i??(i=a.defaultClearColor);const h=this._clearColorCache,f=i;(h[0]!==f[0]||h[1]!==f[1]||h[2]!==f[2]||h[3]!==f[3])&&(h[0]=f[0],h[1]=f[1],h[2]=f[2],h[3]=f[3],o.clearColor(f[0],f[1],f[2],f[3]))}o.clear(e)}resizeGpuRenderTarget(t){if(t.isRoot)return;const i=this._renderTargetSystem.getGpuRenderTarget(t);this._resizeColor(t,i),(t.stencil||t.depth)&&this._resizeStencil(i)}_initColor(t,e){const i=this._renderer,a=i.gl,o=a.createFramebuffer();if(e.resolveTargetFramebuffer=o,a.bindFramebuffer(a.FRAMEBUFFER,o),e.width=t.colorTexture.source.pixelWidth,e.height=t.colorTexture.source.pixelHeight,t.colorTextures.forEach((h,f)=>{const m=h.source;m.antialias&&(i.context.supports.msaa?e.msaa=!0:kt("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),i.texture.bindSource(m,0);const b=i.texture.getGlSource(m).texture;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+f,3553,b,0)}),e.msaa){const h=a.createFramebuffer();e.framebuffer=h,a.bindFramebuffer(a.FRAMEBUFFER,h),t.colorTextures.forEach((f,m)=>{const g=a.createRenderbuffer();e.msaaRenderBuffer[m]=g})}else e.framebuffer=o;this._resizeColor(t,e)}_resizeColor(t,e){const i=t.colorTexture.source;if(e.width=i.pixelWidth,e.height=i.pixelHeight,t.colorTextures.forEach((a,o)=>{o!==0&&a.source.resize(i.width,i.height,i._resolution)}),e.msaa){const a=this._renderer,o=a.gl,h=e.framebuffer;o.bindFramebuffer(o.FRAMEBUFFER,h),t.colorTextures.forEach((f,m)=>{const g=f.source;a.texture.bindSource(g,0);const x=a.texture.getGlSource(g).internalFormat,E=e.msaaRenderBuffer[m];o.bindRenderbuffer(o.RENDERBUFFER,E),o.renderbufferStorageMultisample(o.RENDERBUFFER,4,x,g.pixelWidth,g.pixelHeight),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0+m,o.RENDERBUFFER,E)})}}_initStencil(t){if(t.framebuffer===null)return;const e=this._renderer.gl,i=e.createRenderbuffer();t.depthStencilRenderBuffer=i,e.bindRenderbuffer(e.RENDERBUFFER,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i),this._resizeStencil(t)}_resizeStencil(t){const e=this._renderer.gl;e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilRenderBuffer),t.msaa?e.renderbufferStorageMultisample(e.RENDERBUFFER,4,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,this._renderer.context.webGLVersion===2?e.DEPTH24_STENCIL8:e.DEPTH_STENCIL,t.width,t.height)}prerender(t){const e=t.colorTexture.resource;this._renderer.context.multiView&&js.test(e)&&this._renderer.context.ensureCanvasSize(e)}postrender(t){if(this._renderer.context.multiView&&js.test(t.colorTexture.resource)){const e=this._renderer.context.canvas,i=t.colorTexture;i.context2D.drawImage(e,0,i.pixelHeight-e.height)}}}function WA(n,t,e,i,a,o){const h=o?1:-1;return n.identity(),n.a=1/i*2,n.d=h*(1/a*2),n.tx=-1-t*n.a,n.ty=-h-e*n.d,n}const ih=new Map;function fv(n,t){if(!ih.has(n)){const e=new At({source:new js({resource:n,...t})}),i=()=>{ih.get(n)===e&&ih.delete(n)};e.once("destroy",i),e.source.once("destroy",i),ih.set(n,e)}return ih.get(n)}function Q8(n){return ih.has(n)}function QA(n){const t=n.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement&&document.body.contains(t)}const ZA=class JA{constructor(t={}){if(this.uid=rn("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,t={...JA.defaultOptions,...t},this.stencil=t.stencil,this.depth=t.depth,this.isRoot=t.isRoot,typeof t.colorTextures=="number"){this._managedColorTextures=!0;for(let e=0;e<t.colorTextures;e++)this.colorTextures.push(new Sn({width:t.width,height:t.height,resolution:t.resolution,antialias:t.antialias}))}else{this.colorTextures=[...t.colorTextures.map(i=>i.source)];const e=this.colorTexture.source;this.resize(e.width,e.height,e._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(t.depthStencilTexture||this.stencil)&&(t.depthStencilTexture instanceof At||t.depthStencilTexture instanceof Sn?this.depthStencilTexture=t.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){const t=this._size;return t[0]=this.pixelWidth,t[1]=this.pixelHeight,t}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(t){this.resize(t.width,t.height,t._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new Sn({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(t,e,i=this.resolution,a=!1){this.dirtyId++,this.colorTextures.forEach((o,h)=>{a&&h===0||o.source.resize(t,e,i)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(t,e,i)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(t=>{t.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}};ZA.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1};let pg=ZA;class dv{constructor(t){this.rootViewPort=new Ue,this.viewport=new Ue,this.onRenderTargetChange=new db("onRenderTargetChange"),this.projectionMatrix=new Gt,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuRenderTargetHash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:t,clear:e,clearColor:i,frame:a}){var o,h;this._renderTargetStack.length=0,this.push(t,e,i,a),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=QA(this.rootRenderTarget),(h=(o=this.adaptor).prerender)==null||h.call(o,this.rootRenderTarget)}postrender(){var t,e;(e=(t=this.adaptor).postrender)==null||e.call(t,this.rootRenderTarget)}bind(t,e=!0,i,a){const o=this.getRenderTarget(t),h=this.renderTarget!==o;this.renderTarget=o,this.renderSurface=t;const f=this.getGpuRenderTarget(o);(o.pixelWidth!==f.width||o.pixelHeight!==f.height)&&(this.adaptor.resizeGpuRenderTarget(o),f.width=o.pixelWidth,f.height=o.pixelHeight);const m=o.colorTexture,g=this.viewport,b=m.pixelWidth,x=m.pixelHeight;if(!a&&t instanceof At&&(a=t.frame),a){const E=m._resolution;g.x=a.x*E+.5|0,g.y=a.y*E+.5|0,g.width=a.width*E+.5|0,g.height=a.height*E+.5|0}else g.x=0,g.y=0,g.width=b,g.height=x;return WA(this.projectionMatrix,0,0,g.width/m.resolution,g.height/m.resolution,!o.isRoot),this.adaptor.startRenderPass(o,e,i,g),h&&this.onRenderTargetChange.emit(o),o}clear(t,e=Er.ALL,i){e&&(t&&(t=this.getRenderTarget(t)),this.adaptor.clear(t||this.renderTarget,e,i,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(t,e=Er.ALL,i,a){const o=this.bind(t,e,i,a);return this._renderTargetStack.push({renderTarget:o,frame:a}),o}pop(){this._renderTargetStack.pop();const t=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(t.renderTarget,!1,null,t.frame)}getRenderTarget(t){return t.isTexture&&(t=t.source),this._renderSurfaceToRenderTargetHash.get(t)??this._initRenderTarget(t)}copyToTexture(t,e,i,a,o){i.x<0&&(a.width+=i.x,o.x-=i.x,i.x=0),i.y<0&&(a.height+=i.y,o.y-=i.y,i.y=0);const{pixelWidth:h,pixelHeight:f}=t;return a.width=Math.min(a.width,h-i.x),a.height=Math.min(a.height,f-i.y),this.adaptor.copyToTexture(t,e,i,a,o)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((t,e)=>{t!==e&&t.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(t){let e=null;return js.test(t)&&(t=fv(t).source),t instanceof pg?e=t:t instanceof Sn&&(e=new pg({colorTextures:[t]}),t.source instanceof js&&(e.isRoot=!0),t.once("destroy",()=>{e.destroy(),this._renderSurfaceToRenderTargetHash.delete(t);const i=this._gpuRenderTargetHash[e.uid];i&&(this._gpuRenderTargetHash[e.uid]=null,this.adaptor.destroyGpuRenderTarget(i))})),this._renderSurfaceToRenderTargetHash.set(t,e),e}getGpuRenderTarget(t){return this._gpuRenderTargetHash[t.uid]||(this._gpuRenderTargetHash[t.uid]=this.adaptor.initGpuRenderTarget(t))}resetState(){this.renderTarget=null,this.renderSurface=null}}class pv extends dv{constructor(t){super(t),this.adaptor=new KA,this.adaptor.init(t,this)}}pv.extension={type:[I.WebGLSystem],name:"renderTarget"};class t0 extends Rr{constructor({buffer:t,offset:e,size:i}){super(),this.uid=rn("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=rn("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=t,this.offset=e|0,this.size=i,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=rn("resource"),this.emit("change",this)}destroy(t=!1){this.destroyed=!0,t&&this.buffer.destroy(),this.emit("change",this),this.buffer=null}}function $A(n,t){const e=[],i=[`
        var g = s.groups;
        var sS = r.shader;
        var p = s.glProgram;
        var ugS = r.uniformGroup;
        var resources;
    `];let a=!1,o=0;const h=t._getProgramData(n.glProgram);for(const m in n.groups){const g=n.groups[m];e.push(`
            resources = g[${m}].resources;
        `);for(const b in g.resources){const x=g.resources[b];if(x instanceof kn)if(x.ubo){const E=n._uniformBindMap[m][Number(b)];e.push(`
                        sS.bindUniformBlock(
                            resources[${b}],
                            '${E}',
                            ${n.glProgram._uniformBlockData[E].index}
                        );
                    `)}else e.push(`
                        ugS.updateUniformGroup(resources[${b}], p, sD);
                    `);else if(x instanceof t0){const E=n._uniformBindMap[m][Number(b)];e.push(`
                    sS.bindUniformBlock(
                        resources[${b}],
                        '${E}',
                        ${n.glProgram._uniformBlockData[E].index}
                    );
                `)}else if(x instanceof Sn){const E=n._uniformBindMap[m][b],T=h.uniformData[E];T&&(a||(a=!0,i.push(`
                        var tS = r.texture;
                        `)),t._gl.uniform1i(T.location,o),e.push(`
                        tS.bind(resources[${b}], ${o});
                    `),o++)}}}const f=[...i,...e].join(`
`);return new Function("r","s","sD",f)}class Z8{}class tC{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}}function Dy(n,t,e){const i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}function R_(n){const t=new Array(n);for(let e=0;e<t.length;e++)t[e]=!1;return t}function mv(n,t){switch(n){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return R_(2*t);case"bvec3":return R_(3*t);case"bvec4":return R_(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}let Wm=null;const D1={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},J8={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"};function gv(n,t){if(!Wm){const e=Object.keys(D1);Wm={};for(let i=0;i<e.length;++i){const a=e[i];Wm[n[a]]=D1[a]}}return Wm[t]}function eC(n,t){const e=gv(n,t);return J8[e]||"float32"}function nC(n,t,e=!1){const i={},a=t.getProgramParameter(n,t.ACTIVE_ATTRIBUTES);for(let h=0;h<a;h++){const f=t.getActiveAttrib(n,h);if(f.name.startsWith("gl_"))continue;const m=eC(t,f.type);i[f.name]={location:0,format:m,stride:Hl(m).stride,offset:0,instance:!1,start:0}}const o=Object.keys(i);if(e){o.sort((h,f)=>h>f?1:-1);for(let h=0;h<o.length;h++)i[o[h]].location=h,t.bindAttribLocation(n,h,o[h]);t.linkProgram(n)}else for(let h=0;h<o.length;h++)i[o[h]].location=t.getAttribLocation(n,o[h]);return i}function iC(n,t){if(!t.ACTIVE_UNIFORM_BLOCKS)return{};const e={},i=t.getProgramParameter(n,t.ACTIVE_UNIFORM_BLOCKS);for(let a=0;a<i;a++){const o=t.getActiveUniformBlockName(n,a),h=t.getUniformBlockIndex(n,o),f=t.getActiveUniformBlockParameter(n,a,t.UNIFORM_BLOCK_DATA_SIZE);e[o]={name:o,index:h,size:f}}return e}function rC(n,t){const e={},i=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(let a=0;a<i;a++){const o=t.getActiveUniform(n,a),h=o.name.replace(/\[.*?\]$/,""),f=!!o.name.match(/\[.*?\]$/),m=gv(t,o.type);e[h]={name:h,index:a,type:m,size:o.size,isArray:f,value:mv(m,o.size)}}return e}function w1(n,t){const e=n.getShaderSource(t).split(`
`).map((g,b)=>`${b}: ${g}`),i=n.getShaderInfoLog(t),a=i.split(`
`),o={},h=a.map(g=>parseFloat(g.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(g=>g&&!o[g]?(o[g]=!0,!0):!1),f=[""];h.forEach(g=>{e[g-1]=`%c${e[g-1]}%c`,f.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const m=e.join(`
`);f[0]=m,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...f),console.groupEnd()}function aC(n,t,e,i){n.getProgramParameter(t,n.LINK_STATUS)||(n.getShaderParameter(e,n.COMPILE_STATUS)||w1(n,e),n.getShaderParameter(i,n.COMPILE_STATUS)||w1(n,i),console.error("PixiJS Error: Could not initialize shader."),n.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(t)))}function sC(n,t){const e=Dy(n,n.VERTEX_SHADER,t.vertex),i=Dy(n,n.FRAGMENT_SHADER,t.fragment),a=n.createProgram();n.attachShader(a,e),n.attachShader(a,i);const o=t.transformFeedbackVaryings;o&&(typeof n.transformFeedbackVaryings!="function"?kt("TransformFeedback is not supported but TransformFeedbackVaryings are given."):n.transformFeedbackVaryings(a,o.names,o.bufferMode==="separate"?n.SEPARATE_ATTRIBS:n.INTERLEAVED_ATTRIBS)),n.linkProgram(a),n.getProgramParameter(a,n.LINK_STATUS)||aC(n,a,e,i),t._attributeData=nC(a,n,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertex)),t._uniformData=rC(a,n),t._uniformBlockData=iC(a,n),n.deleteShader(e),n.deleteShader(i);const h={};for(const m in t._uniformData){const g=t._uniformData[m];h[m]={location:n.getUniformLocation(a,m),value:mv(g.type,g.size)}}return new tC(a,h)}const Qm={textureCount:0,blockIndex:0};class _v{constructor(t){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_programDataHash")}contextChange(t){this._gl=t,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null}bind(t,e){if(this._setProgram(t.glProgram),e)return;Qm.textureCount=0,Qm.blockIndex=0;let i=this._shaderSyncFunctions[t.glProgram._key];i||(i=this._shaderSyncFunctions[t.glProgram._key]=this._generateShaderSync(t,this)),this._renderer.buffer.nextBindBase(!!t.glProgram.transformFeedbackVaryings),i(this._renderer,t,Qm)}updateUniformGroup(t){this._renderer.uniformGroup.updateUniformGroup(t,this._activeProgram,Qm)}bindUniformBlock(t,e,i=0){const a=this._renderer.buffer,o=this._getProgramData(this._activeProgram),h=t._bufferResource;h||this._renderer.ubo.updateUniformGroup(t);const f=t.buffer,m=a.updateBuffer(f),g=a.freeLocationForBufferBase(m);if(h){const{offset:x,size:E}=t;x===0&&E===f.data.byteLength?a.bindBufferBase(m,g):a.bindBufferRange(m,g,x)}else a.getLastBindBaseLocation(m)!==g&&a.bindBufferBase(m,g);const b=this._activeProgram._uniformBlockData[e].index;o.uniformBlockBindings[i]!==g&&(o.uniformBlockBindings[i]=g,this._renderer.gl.uniformBlockBinding(o.program,b,g))}_setProgram(t){if(this._activeProgram===t)return;this._activeProgram=t;const e=this._getProgramData(t);this._gl.useProgram(e.program)}_getProgramData(t){return this._programDataHash[t._key]||this._createProgramData(t)}_createProgramData(t){const e=t._key;return this._programDataHash[e]=sC(this._gl,t),this._programDataHash[e]}destroy(){for(const t of Object.keys(this._programDataHash))this._programDataHash[t].destroy(),this._programDataHash[t]=null;this._programDataHash=null}_generateShaderSync(t,e){return $A(t,e)}resetState(){this._activeProgram=null}}_v.extension={type:[I.WebGLSystem],name:"shader"};const lC={f32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1f(location, v);
        }`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2f(location, v[0], v[1]);
        }`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3f(location, v[0], v[1], v[2]);
        }`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4f(location, v[0], v[1], v[2], v[3]);
        }`,i32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,u32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1ui(location, v);
        }`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2ui(location, v[0], v[1]);
        }`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3ui(location, v[0], v[1], v[2]);
        }`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
        }`,bool:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},oC={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"};function uC(n,t){const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
        var name = null;
    `];for(const i in n.uniforms){if(!t[i]){n.uniforms[i]instanceof kn?n.uniforms[i].ubo?e.push(`
                        renderer.shader.bindUniformBlock(uv.${i}, "${i}");
                    `):e.push(`
                        renderer.shader.updateUniformGroup(uv.${i});
                    `):n.uniforms[i]instanceof t0&&e.push(`
                        renderer.shader.bindBufferResource(uv.${i}, "${i}");
                    `);continue}const a=n.uniformStructures[i];let o=!1;for(let h=0;h<Fo.length;h++){const f=Fo[h];if(a.type===f.type&&f.test(a)){e.push(`name = "${i}";`,Fo[h].uniform),o=!0;break}}if(!o){const f=(a.size===1?lC:oC)[a.type].replace("location",`ud["${i}"].location`);e.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${f};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}class yv{constructor(t){this._cache={},this._uniformGroupSyncHash={},this._renderer=t,this.gl=null,this._cache={}}contextChange(t){this.gl=t}updateUniformGroup(t,e,i){const a=this._renderer.shader._getProgramData(e);(!t.isStatic||t._dirtyId!==a.uniformDirtyGroups[t.uid])&&(a.uniformDirtyGroups[t.uid]=t._dirtyId,this._getUniformSyncFunction(t,e)(a.uniformData,t.uniforms,this._renderer,i))}_getUniformSyncFunction(t,e){var i;return((i=this._uniformGroupSyncHash[t._signature])==null?void 0:i[e._key])||this._createUniformSyncFunction(t,e)}_createUniformSyncFunction(t,e){const i=this._uniformGroupSyncHash[t._signature]||(this._uniformGroupSyncHash[t._signature]={}),a=this._getSignature(t,e._uniformData,"u");return this._cache[a]||(this._cache[a]=this._generateUniformsSync(t,e._uniformData)),i[e._key]=this._cache[a],i[e._key]}_generateUniformsSync(t,e){return uC(t,e)}_getSignature(t,e,i){const a=t.uniforms,o=[`${i}-`];for(const h in a)o.push(h),e[h]&&o.push(e[h].type);return o.join("-")}destroy(){this._renderer=null,this._cache=null}}yv.extension={type:[I.WebGLSystem],name:"uniformGroup"};function $8(n){return n=n.replaceAll("texture2D","texture").replaceAll("gl_FragColor","finalColor").replaceAll("varying","in"),n=`
        out vec4 finalColor;
    ${n}
    `,n}const t5={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function e5(n){return t5[n]}function cC(n){const t={};if(t.normal=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t.add=[n.ONE,n.ONE],t.multiply=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],t.screen=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],t.none=[0,0],t["normal-npm"]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],t["add-npm"]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],t["screen-npm"]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],t.erase=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],!(n instanceof me.get().getWebGLRenderingContext()))t.min=[n.ONE,n.ONE,n.ONE,n.ONE,n.MIN,n.MIN],t.max=[n.ONE,n.ONE,n.ONE,n.ONE,n.MAX,n.MAX];else{const i=n.getExtension("EXT_blend_minmax");i&&(t.min=[n.ONE,n.ONE,n.ONE,n.ONE,i.MIN_EXT,i.MIN_EXT],t.max=[n.ONE,n.ONE,n.ONE,n.ONE,i.MAX_EXT,i.MAX_EXT])}return t}const n5=0,i5=1,r5=2,a5=3,s5=4,l5=5,hC=class wy{constructor(t){this._invertFrontFace=!1,this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[n5]=this.setBlend,this.map[i5]=this.setOffset,this.map[r5]=this.setCullFace,this.map[a5]=this.setDepthTest,this.map[s5]=this.setFrontFace,this.map[l5]=this.setDepthMask,this.checks=[],this.defaultState=Ir.for2d(),t.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(t){this._invertFrontFace=!t.isRoot,this._cullFace?this.setFrontFace(this._frontFace):this._frontFaceDirty=!0}contextChange(t){this.gl=t,this.blendModesMap=cC(t),this.resetState()}set(t){if(t||(t=this.defaultState),this.stateId!==t.data){let e=this.stateId^t.data,i=0;for(;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t||(t=this.defaultState);for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this._updateCheck(wy._checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this._updateCheck(wy._checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this._cullFace=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE),this._cullFace&&this._frontFaceDirty&&this.setFrontFace(this._frontFace)}setFrontFace(t){this._frontFace=t,this._frontFaceDirty=!1;const e=this._invertFrontFace?!t:t;this._glFrontFace!==e&&(this._glFrontFace=e,this.gl.frontFace(this.gl[e?"CW":"CCW"]))}setBlendMode(t){if(this.blendModesMap[t]||(t="normal"),t===this.blendMode)return;this.blendMode=t;const e=this.blendModesMap[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}resetState(){this._glFrontFace=!1,this._frontFace=!1,this._cullFace=!1,this._frontFaceDirty=!1,this._invertFrontFace=!1,this.gl.frontFace(this.gl.CCW),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(t,e){const i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)}static _checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static _checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}};hC.extension={type:[I.WebGLSystem],name:"state"};let fC=hC;class dC{constructor(t){this.target=tv.TEXTURE_2D,this.texture=t,this.width=-1,this.height=-1,this.type=Ae.UNSIGNED_BYTE,this.internalFormat=dg.RGBA,this.format=dg.RGBA,this.samplerType=0}}const pC={id:"buffer",upload(n,t,e){t.width===n.width||t.height===n.height?e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,t.format,t.type,n.resource):e.texImage2D(t.target,0,t.internalFormat,n.width,n.height,0,t.format,t.type,n.resource),t.width=n.width,t.height=n.height}},o5={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},mC={id:"compressed",upload(n,t,e){e.pixelStorei(e.UNPACK_ALIGNMENT,4);let i=n.pixelWidth,a=n.pixelHeight;const o=!!o5[n.format];for(let h=0;h<n.resource.length;h++){const f=n.resource[h];o?e.compressedTexImage2D(e.TEXTURE_2D,h,t.internalFormat,i,a,0,f):e.texImage2D(e.TEXTURE_2D,h,t.internalFormat,i,a,0,t.format,t.type,f),i=Math.max(i>>1,1),a=Math.max(a>>1,1)}}},bv={id:"image",upload(n,t,e,i){const a=t.width,o=t.height,h=n.pixelWidth,f=n.pixelHeight,m=n.resourceWidth,g=n.resourceHeight;m<h||g<f?((a!==h||o!==f)&&e.texImage2D(t.target,0,t.internalFormat,h,f,0,t.format,t.type,null),i===2?e.texSubImage2D(e.TEXTURE_2D,0,0,0,m,g,t.format,t.type,n.resource):e.texSubImage2D(e.TEXTURE_2D,0,0,0,t.format,t.type,n.resource)):a===h&&o===f?e.texSubImage2D(e.TEXTURE_2D,0,0,0,t.format,t.type,n.resource):i===2?e.texImage2D(t.target,0,t.internalFormat,h,f,0,t.format,t.type,n.resource):e.texImage2D(t.target,0,t.internalFormat,t.format,t.type,n.resource),t.width=h,t.height=f}},gC={id:"video",upload(n,t,e,i){if(!n.isValid){e.texImage2D(t.target,0,t.internalFormat,1,1,0,t.format,t.type,null);return}bv.upload(n,t,e,i)}},Uy={linear:9729,nearest:9728},_C={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},rg={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},yC={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519};function Oy(n,t,e,i,a,o,h,f){const m=o;if(!f||n.addressModeU!=="repeat"||n.addressModeV!=="repeat"||n.addressModeW!=="repeat"){const g=rg[h?"clamp-to-edge":n.addressModeU],b=rg[h?"clamp-to-edge":n.addressModeV],x=rg[h?"clamp-to-edge":n.addressModeW];t[a](m,t.TEXTURE_WRAP_S,g),t[a](m,t.TEXTURE_WRAP_T,b),t.TEXTURE_WRAP_R&&t[a](m,t.TEXTURE_WRAP_R,x)}if((!f||n.magFilter!=="linear")&&t[a](m,t.TEXTURE_MAG_FILTER,Uy[n.magFilter]),e){if(!f||n.mipmapFilter!=="linear"){const g=_C[n.minFilter][n.mipmapFilter];t[a](m,t.TEXTURE_MIN_FILTER,g)}}else t[a](m,t.TEXTURE_MIN_FILTER,Uy[n.minFilter]);if(i&&n.maxAnisotropy>1){const g=Math.min(n.maxAnisotropy,t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));t[a](m,i.TEXTURE_MAX_ANISOTROPY_EXT,g)}n.compare&&t[a](m,t.TEXTURE_COMPARE_FUNC,yC[n.compare])}function bC(n){return{r8unorm:n.RED,r8snorm:n.RED,r8uint:n.RED,r8sint:n.RED,r16uint:n.RED,r16sint:n.RED,r16float:n.RED,rg8unorm:n.RG,rg8snorm:n.RG,rg8uint:n.RG,rg8sint:n.RG,r32uint:n.RED,r32sint:n.RED,r32float:n.RED,rg16uint:n.RG,rg16sint:n.RG,rg16float:n.RG,rgba8unorm:n.RGBA,"rgba8unorm-srgb":n.RGBA,rgba8snorm:n.RGBA,rgba8uint:n.RGBA,rgba8sint:n.RGBA,bgra8unorm:n.RGBA,"bgra8unorm-srgb":n.RGBA,rgb9e5ufloat:n.RGB,rgb10a2unorm:n.RGBA,rg11b10ufloat:n.RGB,rg32uint:n.RG,rg32sint:n.RG,rg32float:n.RG,rgba16uint:n.RGBA,rgba16sint:n.RGBA,rgba16float:n.RGBA,rgba32uint:n.RGBA,rgba32sint:n.RGBA,rgba32float:n.RGBA,stencil8:n.STENCIL_INDEX8,depth16unorm:n.DEPTH_COMPONENT,depth24plus:n.DEPTH_COMPONENT,"depth24plus-stencil8":n.DEPTH_STENCIL,depth32float:n.DEPTH_COMPONENT,"depth32float-stencil8":n.DEPTH_STENCIL}}function vC(n,t){let e={},i=n.RGBA;return n instanceof me.get().getWebGLRenderingContext()?t.srgb&&(e={"rgba8unorm-srgb":t.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":t.srgb.SRGB8_ALPHA8_EXT}):(e={"rgba8unorm-srgb":n.SRGB8_ALPHA8,"bgra8unorm-srgb":n.SRGB8_ALPHA8},i=n.RGBA8),{r8unorm:n.R8,r8snorm:n.R8_SNORM,r8uint:n.R8UI,r8sint:n.R8I,r16uint:n.R16UI,r16sint:n.R16I,r16float:n.R16F,rg8unorm:n.RG8,rg8snorm:n.RG8_SNORM,rg8uint:n.RG8UI,rg8sint:n.RG8I,r32uint:n.R32UI,r32sint:n.R32I,r32float:n.R32F,rg16uint:n.RG16UI,rg16sint:n.RG16I,rg16float:n.RG16F,rgba8unorm:n.RGBA,...e,rgba8snorm:n.RGBA8_SNORM,rgba8uint:n.RGBA8UI,rgba8sint:n.RGBA8I,bgra8unorm:i,rgb9e5ufloat:n.RGB9_E5,rgb10a2unorm:n.RGB10_A2,rg11b10ufloat:n.R11F_G11F_B10F,rg32uint:n.RG32UI,rg32sint:n.RG32I,rg32float:n.RG32F,rgba16uint:n.RGBA16UI,rgba16sint:n.RGBA16I,rgba16float:n.RGBA16F,rgba32uint:n.RGBA32UI,rgba32sint:n.RGBA32I,rgba32float:n.RGBA32F,stencil8:n.STENCIL_INDEX8,depth16unorm:n.DEPTH_COMPONENT16,depth24plus:n.DEPTH_COMPONENT24,"depth24plus-stencil8":n.DEPTH24_STENCIL8,depth32float:n.DEPTH_COMPONENT32F,"depth32float-stencil8":n.DEPTH32F_STENCIL8,...t.s3tc?{"bc1-rgba-unorm":t.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":t.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":t.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{},...t.s3tc_sRGB?{"bc1-rgba-unorm-srgb":t.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":t.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":t.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{},...t.rgtc?{"bc4-r-unorm":t.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":t.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":t.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":t.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{},...t.bptc?{"bc6h-rgb-float":t.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":t.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":t.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":t.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{},...t.etc?{"etc2-rgb8unorm":t.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":t.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":t.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":t.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":t.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":t.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":t.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":t.etc.COMPRESSED_SIGNED_RG11_EAC}:{},...t.astc?{"astc-4x4-unorm":t.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":t.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":t.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":t.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":t.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":t.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":t.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{}}}function xC(n){return{r8unorm:n.UNSIGNED_BYTE,r8snorm:n.BYTE,r8uint:n.UNSIGNED_BYTE,r8sint:n.BYTE,r16uint:n.UNSIGNED_SHORT,r16sint:n.SHORT,r16float:n.HALF_FLOAT,rg8unorm:n.UNSIGNED_BYTE,rg8snorm:n.BYTE,rg8uint:n.UNSIGNED_BYTE,rg8sint:n.BYTE,r32uint:n.UNSIGNED_INT,r32sint:n.INT,r32float:n.FLOAT,rg16uint:n.UNSIGNED_SHORT,rg16sint:n.SHORT,rg16float:n.HALF_FLOAT,rgba8unorm:n.UNSIGNED_BYTE,"rgba8unorm-srgb":n.UNSIGNED_BYTE,rgba8snorm:n.BYTE,rgba8uint:n.UNSIGNED_BYTE,rgba8sint:n.BYTE,bgra8unorm:n.UNSIGNED_BYTE,"bgra8unorm-srgb":n.UNSIGNED_BYTE,rgb9e5ufloat:n.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:n.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:n.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:n.UNSIGNED_INT,rg32sint:n.INT,rg32float:n.FLOAT,rgba16uint:n.UNSIGNED_SHORT,rgba16sint:n.SHORT,rgba16float:n.HALF_FLOAT,rgba32uint:n.UNSIGNED_INT,rgba32sint:n.INT,rgba32float:n.FLOAT,stencil8:n.UNSIGNED_BYTE,depth16unorm:n.UNSIGNED_SHORT,depth24plus:n.UNSIGNED_INT,"depth24plus-stencil8":n.UNSIGNED_INT_24_8,depth32float:n.FLOAT,"depth32float-stencil8":n.FLOAT_32_UNSIGNED_INT_24_8_REV}}function u5(n){n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));const t=n.length;for(let e=0;e<t;e+=4){const i=n[e+3];if(i!==0){const a=255.001/i;n[e]=n[e]*a+.5,n[e+1]=n[e+1]*a+.5,n[e+2]=n[e+2]*a+.5}}}const c5=4;class vv{constructor(t){this.managedTextures=[],this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:bv,buffer:pC,video:gC,compressed:mC},this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_glTextures"),this._renderer.renderableGC.addManagedHash(this,"_glSamplers")}contextChange(t){this._gl=t,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=vC(t,this._renderer.context.extensions),this._mapFormatToType=xC(t),this._mapFormatToFormat=bC(t)),this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let e=0;e<16;e++)this.bind(At.EMPTY,e)}initSource(t){this.bind(t)}bind(t,e=0){const i=t.source;t?(this.bindSource(i,e),this._useSeparateSamplers&&this._bindSampler(i.style,e)):(this.bindSource(null,e),this._useSeparateSamplers&&this._bindSampler(null,e))}bindSource(t,e=0){const i=this._gl;if(t._touched=this._renderer.textureGC.count,this._boundTextures[e]!==t){this._boundTextures[e]=t,this._activateLocation(e),t||(t=At.EMPTY.source);const a=this.getGlSource(t);i.bindTexture(a.target,a.texture)}}_bindSampler(t,e=0){const i=this._gl;if(!t){this._boundSamplers[e]=null,i.bindSampler(e,null);return}const a=this._getGlSampler(t);this._boundSamplers[e]!==a&&(this._boundSamplers[e]=a,i.bindSampler(e,a))}unbind(t){const e=t.source,i=this._boundTextures,a=this._gl;for(let o=0;o<i.length;o++)if(i[o]===e){this._activateLocation(o);const h=this.getGlSource(e);a.bindTexture(h.target,null),i[o]=null}}_activateLocation(t){this._activeTextureLocation!==t&&(this._activeTextureLocation=t,this._gl.activeTexture(this._gl.TEXTURE0+t))}_initSource(t){const e=this._gl,i=new dC(e.createTexture());if(i.type=this._mapFormatToType[t.format],i.internalFormat=this._mapFormatToInternalFormat[t.format],i.format=this._mapFormatToFormat[t.format],t.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||t.isPowerOfTwo)){const a=Math.max(t.width,t.height);t.mipLevelCount=Math.floor(Math.log2(a))+1}return this._glTextures[t.uid]=i,this.managedTextures.includes(t)||(t.on("update",this.onSourceUpdate,this),t.on("resize",this.onSourceUpdate,this),t.on("styleChange",this.onStyleChange,this),t.on("destroy",this.onSourceDestroy,this),t.on("unload",this.onSourceUnload,this),t.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(t)),this.onSourceUpdate(t),this.updateStyle(t,!1),i}onStyleChange(t){this.updateStyle(t,!1)}updateStyle(t,e){const i=this._gl,a=this.getGlSource(t);i.bindTexture(i.TEXTURE_2D,a.texture),this._boundTextures[this._activeTextureLocation]=t,Oy(t.style,i,t.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",i.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!t.isPowerOfTwo,e)}onSourceUnload(t){const e=this._glTextures[t.uid];e&&(this.unbind(t),this._glTextures[t.uid]=null,this._gl.deleteTexture(e.texture))}onSourceUpdate(t){const e=this._gl,i=this.getGlSource(t);e.bindTexture(e.TEXTURE_2D,i.texture),this._boundTextures[this._activeTextureLocation]=t;const a=t.alphaMode==="premultiply-alpha-on-upload";this._premultiplyAlpha!==a&&(this._premultiplyAlpha=a,e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a)),this._uploads[t.uploadMethodId]?this._uploads[t.uploadMethodId].upload(t,i,e,this._renderer.context.webGLVersion):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.pixelWidth,t.pixelHeight,0,e.RGBA,e.UNSIGNED_BYTE,null),t.autoGenerateMipmaps&&t.mipLevelCount>1&&this.onUpdateMipmaps(t,!1)}onUpdateMipmaps(t,e=!0){e&&this.bindSource(t,0);const i=this.getGlSource(t);this._gl.generateMipmap(i.target)}onSourceDestroy(t){t.off("destroy",this.onSourceDestroy,this),t.off("update",this.onSourceUpdate,this),t.off("resize",this.onSourceUpdate,this),t.off("unload",this.onSourceUnload,this),t.off("styleChange",this.onStyleChange,this),t.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(t),1),this.onSourceUnload(t)}_initSampler(t){const e=this._gl,i=this._gl.createSampler();return this._glSamplers[t._resourceId]=i,Oy(t,e,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",i,!1,!0),this._glSamplers[t._resourceId]}_getGlSampler(t){return this._glSamplers[t._resourceId]||this._initSampler(t)}getGlSource(t){return this._glTextures[t.uid]||this._initSource(t)}generateCanvas(t){const{pixels:e,width:i,height:a}=this.getPixels(t),o=me.get().createCanvas();o.width=i,o.height=a;const h=o.getContext("2d");if(h){const f=h.createImageData(i,a);f.data.set(e),h.putImageData(f,0,0)}return o}getPixels(t){const e=t.source.resolution,i=t.frame,a=Math.max(Math.round(i.width*e),1),o=Math.max(Math.round(i.height*e),1),h=new Uint8Array(c5*a*o),f=this._renderer,m=f.renderTarget.getRenderTarget(t),g=f.renderTarget.getGpuRenderTarget(m),b=f.gl;return b.bindFramebuffer(b.FRAMEBUFFER,g.resolveTargetFramebuffer),b.readPixels(Math.round(i.x*e),Math.round(i.y*e),a,o,b.RGBA,b.UNSIGNED_BYTE,h),{pixels:new Uint8ClampedArray(h.buffer),width:a,height:o}}destroy(){this.managedTextures.slice().forEach(t=>this.onSourceDestroy(t)),this.managedTextures=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(At.EMPTY.source),this._boundSamplers=Object.create(null);const t=this._gl;this._premultiplyAlpha=!1,t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha)}}vv.extension={type:[I.WebGLSystem],name:"texture"};class xv{contextChange(t){const e=new kn({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new Gt,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),i=t.limits.maxBatchableTextures,a=Eh({name:"graphics",bits:[Vg,Xg(i),$g,Ah]});this.shader=new jr({glProgram:a,resources:{localUniforms:e,batchSamplers:Ig(i)}})}execute(t,e){const i=e.context,a=i.customShader||this.shader,o=t.renderer,h=o.graphicsContext,{batcher:f,instructions:m}=h.getContextRenderData(i);a.groups[0]=o.globalUniforms.bindGroup,o.state.set(t.state),o.shader.bind(a),o.geometry.bind(f.geometry,a.glProgram);const g=m.instructions;for(let b=0;b<m.instructionSize;b++){const x=g[b];if(x.size){for(let E=0;E<x.textures.count;E++)o.texture.bind(x.textures.textures[E],E);o.geometry.draw(x.topology,x.size,x.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}}xv.extension={type:[I.WebGLPipesAdaptor],name:"graphics"};class Sv{init(){const t=Eh({name:"mesh",bits:[$g,PA,Ah]});this._shader=new jr({glProgram:t,resources:{uTexture:At.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new Gt}}}})}execute(t,e){const i=t.renderer;let a=e._shader;if(a){if(!a.glProgram){kt("Mesh shader has no glProgram",e.shader);return}}else{a=this._shader;const o=e.texture,h=o.source;a.resources.uTexture=h,a.resources.uSampler=h.style,a.resources.textureUniforms.uniforms.uTextureMatrix=o.textureMatrix.mapCoord}a.groups[100]=i.globalUniforms.bindGroup,a.groups[101]=t.localUniformsBindGroup,i.encoder.draw({geometry:e._geometry,shader:a,state:e.state})}destroy(){this._shader.destroy(!0),this._shader=null}}Sv.extension={type:[I.WebGLPipesAdaptor],name:"mesh"};class Ev{constructor(t){this._renderer=t}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(t,e){this._renderer.renderPipes.batch.break(e),e.add(t)}execute(t){t.isRenderable&&t.render(this._renderer)}destroy(){this._renderer=null}}Ev.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"customRender"};class Id{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}destroy(){}}function mg(n,t){const e=n.instructionSet,i=e.instructions;for(let a=0;a<e.instructionSize;a++){const o=i[a];t[o.renderPipeId].execute(o)}}const h5=new Gt;class Tv{constructor(t){this._renderer=t}addRenderGroup(t,e){t.isCachedAsTexture?this._addRenderableCacheAsTexture(t,e):this._addRenderableDirect(t,e)}execute(t){t.isRenderable&&(t.isCachedAsTexture?this._executeCacheAsTexture(t):this._executeDirect(t))}destroy(){this._renderer=null}_addRenderableDirect(t,e){this._renderer.renderPipes.batch.break(e),t._batchableRenderGroup&&(di.return(t._batchableRenderGroup),t._batchableRenderGroup=null),e.add(t)}_addRenderableCacheAsTexture(t,e){const i=t._batchableRenderGroup??(t._batchableRenderGroup=di.get(Id));i.renderable=t.root,i.transform=t.root.relativeGroupTransform,i.texture=t.texture,i.bounds=t._textureBounds,e.add(t),this._renderer.renderPipes.batch.addToBatch(i,e)}_executeCacheAsTexture(t){if(t.textureNeedsUpdate){t.textureNeedsUpdate=!1;const e=h5.identity().translate(-t._textureBounds.x,-t._textureBounds.y);this._renderer.renderTarget.push(t.texture,!0,null,t.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:e,worldColor:4294967295}),mg(t,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}t._batchableRenderGroup._batcher.updateElement(t._batchableRenderGroup),t._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(t){this._renderer.globalUniforms.push({worldTransformMatrix:t.inverseParentTextureTransform,worldColor:t.worldColorAlpha}),mg(t,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}}Tv.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"renderGroup"};function gg(n,t){t||(t=0);for(let e=t;e<n.length&&n[e];e++)n[e]=null}const f5=new Vn,U1=lh|Ed|Mg;function Av(n,t=!1){SC(n);const e=n.childrenToUpdate,i=n.updateTick++;for(const a in e){const o=Number(a),h=e[a],f=h.list,m=h.index;for(let g=0;g<m;g++){const b=f[g];b.parentRenderGroup===n&&b.relativeRenderGroupDepth===o&&Cv(b,i,0)}gg(f,m),h.index=0}if(t)for(let a=0;a<n.renderGroupChildren.length;a++)Av(n.renderGroupChildren[a],t)}function SC(n){const t=n.root;let e;if(n.renderGroupParent){const i=n.renderGroupParent;n.worldTransform.appendFrom(t.relativeGroupTransform,i.worldTransform),n.worldColor=Sd(t.groupColor,i.worldColor),e=t.groupAlpha*i.worldAlpha}else n.worldTransform.copyFrom(t.localTransform),n.worldColor=t.localColor,e=t.localAlpha;e=e<0?0:e>1?1:e,n.worldAlpha=e,n.worldColorAlpha=n.worldColor+((e*255|0)<<24)}function Cv(n,t,e){if(t===n.updateTick)return;n.updateTick=t,n.didChange=!1;const i=n.localTransform;n.updateLocalTransform();const a=n.parent;if(a&&!a.renderGroup?(e|=n._updateFlags,n.relativeGroupTransform.appendFrom(i,a.relativeGroupTransform),e&U1&&O1(n,a,e)):(e=n._updateFlags,n.relativeGroupTransform.copyFrom(i),e&U1&&O1(n,f5,e)),!n.renderGroup){const o=n.children,h=o.length;for(let g=0;g<h;g++)Cv(o[g],t,e);const f=n.parentRenderGroup,m=n;m.renderPipeId&&!f.structureDidChange&&f.updateRenderable(m)}}function O1(n,t,e){if(e&Ed){n.groupColor=Sd(n.localColor,t.groupColor);let i=n.localAlpha*t.groupAlpha;i=i<0?0:i>1?1:i,n.groupAlpha=i,n.groupColorAlpha=n.groupColor+((i*255|0)<<24)}e&Mg&&(n.groupBlendMode=n.localBlendMode==="inherit"?t.groupBlendMode:n.localBlendMode),e&lh&&(n.globalDisplayStatus=n.localDisplayStatus&t.globalDisplayStatus),n._updateFlags=0}function EC(n,t){const{list:e,index:i}=n.childrenRenderablesToUpdate;let a=!1;for(let o=0;o<i;o++){const h=e[o];if(a=t[h.renderPipeId].validateRenderable(h),a)break}return n.structureDidChange=a,a}const d5=new Gt;class Bv{constructor(t){this._renderer=t}render({container:t,transform:e}){const i=t.parent,a=t.renderGroup.renderGroupParent;t.parent=null,t.renderGroup.renderGroupParent=null;const o=this._renderer;let h=d5;e&&(h=h.copyFrom(t.renderGroup.localTransform),t.renderGroup.localTransform.copyFrom(e));const f=o.renderPipes;this._updateCachedRenderGroups(t.renderGroup,null),this._updateRenderGroups(t.renderGroup),o.globalUniforms.start({worldTransformMatrix:e?t.renderGroup.localTransform:t.renderGroup.worldTransform,worldColor:t.renderGroup.worldColorAlpha}),mg(t.renderGroup,f),f.uniformBatch&&f.uniformBatch.renderEnd(),e&&t.renderGroup.localTransform.copyFrom(h),t.parent=i,t.renderGroup.renderGroupParent=a}destroy(){this._renderer=null}_updateCachedRenderGroups(t,e){if(t.isCachedAsTexture){if(!t.updateCacheTexture)return;e=t}t._parentCacheAsTextureRenderGroup=e;for(let i=t.renderGroupChildren.length-1;i>=0;i--)this._updateCachedRenderGroups(t.renderGroupChildren[i],e);if(t.invalidateMatrices(),t.isCachedAsTexture){if(t.textureNeedsUpdate){const i=t.root.getLocalBounds();i.ceil();const a=t.texture;t.texture&&Fn.returnTexture(t.texture);const o=this._renderer,h=t.textureOptions.resolution||o.view.resolution,f=t.textureOptions.antialias??o.view.antialias;t.texture=Fn.getOptimalTexture(i.width,i.height,h,f),t._textureBounds||(t._textureBounds=new $n),t._textureBounds.copyFrom(i),a!==t.texture&&t.renderGroupParent&&(t.renderGroupParent.structureDidChange=!0)}}else t.texture&&(Fn.returnTexture(t.texture),t.texture=null)}_updateRenderGroups(t){const e=this._renderer,i=e.renderPipes;if(t.runOnRender(e),t.instructionSet.renderPipes=i,t.structureDidChange?gg(t.childrenRenderablesToUpdate.list,0):EC(t,i),Av(t),t.structureDidChange?(t.structureDidChange=!1,this._buildInstructions(t,e)):this._updateRenderables(t),t.childrenRenderablesToUpdate.index=0,e.renderPipes.batch.upload(t.instructionSet),!(t.isCachedAsTexture&&!t.textureNeedsUpdate))for(let a=0;a<t.renderGroupChildren.length;a++)this._updateRenderGroups(t.renderGroupChildren[a])}_updateRenderables(t){const{list:e,index:i}=t.childrenRenderablesToUpdate;for(let a=0;a<i;a++){const o=e[a];o.didViewUpdate&&t.updateRenderable(o)}gg(e,i)}_buildInstructions(t,e){const i=t.root,a=t.instructionSet;a.reset();const o=e.renderPipes?e:e.batch.renderer,h=o.renderPipes;h.batch.buildStart(a),h.blendMode.buildStart(),h.colorMask.buildStart(),i.sortableChildren&&i.sortChildren(),i.collectRenderablesWithEffects(a,o,null),h.batch.buildEnd(a),h.blendMode.buildEnd(a)}}Bv.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"renderGroup"};class Rv{constructor(t){this._renderer=t}addRenderable(t,e){const i=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,i),this._renderer.renderPipes.batch.addToBatch(i,e)}updateRenderable(t){const e=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,e),e._batcher.updateElement(e)}validateRenderable(t){const e=this._getGpuSprite(t);return!e._batcher.checkAndUpdateTexture(e,t._texture)}_updateBatchableSprite(t,e){e.bounds=t.visualBounds,e.texture=t._texture}_getGpuSprite(t){return t._gpuData[this._renderer.uid]||this._initGPUSprite(t)}_initGPUSprite(t){const e=new Id;return e.renderable=t,e.transform=t.groupTransform,e.texture=t._texture,e.bounds=t.visualBounds,e.roundPixels=this._renderer._roundPixels|t._roundPixels,t._gpuData[this._renderer.uid]=e,e}destroy(){this._renderer=null}}Rv.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"sprite"};const Mv=class TC{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Ce(0),this.color=this._backgroundColor,this.alpha=1}init(t){t={...TC.defaultOptions,...t},this.clearBeforeRender=t.clearBeforeRender,this.color=t.background||t.backgroundColor||this._backgroundColor,this.alpha=t.backgroundAlpha,this._backgroundColor.setAlpha(t.backgroundAlpha)}get color(){return this._backgroundColor}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}};Mv.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"background",priority:0};Mv.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};let AC=Mv;const yd={};Oe.handle(I.BlendMode,n=>{if(!n.name)throw new Error("BlendMode extension must have a name property");yd[n.name]=n.ref},n=>{delete yd[n.name]});class Dv{constructor(t){this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=t,this._renderer.runners.prerender.add(this)}prerender(){this._activeBlendMode="normal",this._isAdvanced=!1}setBlendMode(t,e,i){if(this._activeBlendMode===e){this._isAdvanced&&this._renderableList.push(t);return}this._activeBlendMode=e,this._isAdvanced&&this._endAdvancedBlendMode(i),this._isAdvanced=!!yd[e],this._isAdvanced&&(this._beginAdvancedBlendMode(i),this._renderableList.push(t))}_beginAdvancedBlendMode(t){this._renderer.renderPipes.batch.break(t);const e=this._activeBlendMode;if(!yd[e]){kt(`Unable to assign BlendMode: '${e}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);return}let i=this._filterHash[e];i||(i=this._filterHash[e]=new xd,i.filters=[new yd[e]]);const a={renderPipeId:"filter",action:"pushFilter",renderables:[],filterEffect:i,canBundle:!1};this._renderableList=a.renderables,t.add(a)}_endAdvancedBlendMode(t){this._renderableList=null,this._renderer.renderPipes.batch.break(t),t.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(t){this._isAdvanced&&this._endAdvancedBlendMode(t)}destroy(){this._renderer=null,this._renderableList=null;for(const t in this._filterHash)this._filterHash[t].destroy();this._filterHash=null}}Dv.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"blendMode"};const M_={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},wv=class CC{constructor(t){this._renderer=t}_normalizeOptions(t,e={}){return t instanceof Vn||t instanceof At?{target:t,...e}:{...e,...t}}async image(t){const e=new Image;return e.src=await this.base64(t),e}async base64(t){t=this._normalizeOptions(t,CC.defaultImageOptions);const{format:e,quality:i}=t,a=this.canvas(t);if(a.toBlob!==void 0)return new Promise((o,h)=>{a.toBlob(f=>{if(!f){h(new Error("ICanvas.toBlob failed!"));return}const m=new FileReader;m.onload=()=>o(m.result),m.onerror=h,m.readAsDataURL(f)},M_[e],i)});if(a.toDataURL!==void 0)return a.toDataURL(M_[e],i);if(a.convertToBlob!==void 0){const o=await a.convertToBlob({type:M_[e],quality:i});return new Promise((h,f)=>{const m=new FileReader;m.onload=()=>h(m.result),m.onerror=f,m.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t){t=this._normalizeOptions(t);const e=t.target,i=this._renderer;if(e instanceof At)return i.texture.generateCanvas(e);const a=i.textureGenerator.generateTexture(t),o=i.texture.generateCanvas(a);return a.destroy(!0),o}pixels(t){t=this._normalizeOptions(t);const e=t.target,i=this._renderer,a=e instanceof At?e:i.textureGenerator.generateTexture(t),o=i.texture.getPixels(a);return e instanceof Vn&&a.destroy(!0),o}texture(t){return t=this._normalizeOptions(t),t.target instanceof At?t.target:this._renderer.textureGenerator.generateTexture(t)}download(t){t=this._normalizeOptions(t);const e=this.canvas(t),i=document.createElement("a");i.download=t.filename??"image.png",i.href=e.toDataURL("image/png"),document.body.appendChild(i),i.click(),document.body.removeChild(i)}log(t){const e=t.width??200;t=this._normalizeOptions(t);const i=this.canvas(t),a=i.toDataURL();console.log(`[Pixi Texture] ${i.width}px ${i.height}px`);const o=["font-size: 1px;",`padding: ${e}px 300px;`,`background: url(${a}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",o)}destroy(){this._renderer=null}};wv.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"extract"};wv.defaultImageOptions={format:"png",quality:1};let BC=wv;class e0 extends At{static create(t){return new e0({source:new Sn(t)})}resize(t,e,i){return this.source.resize(t,e,i),this}}const p5=new Ue,m5=new $n,g5=[0,0,0,0];class Uv{constructor(t){this._renderer=t}generateTexture(t){var g;t instanceof Vn&&(t={target:t,frame:void 0,textureSourceOptions:{},resolution:void 0});const e=t.resolution||this._renderer.resolution,i=t.antialias||this._renderer.view.antialias,a=t.target;let o=t.clearColor;o?o=Array.isArray(o)&&o.length===4?o:Ce.shared.setValue(o).toArray():o=g5;const h=((g=t.frame)==null?void 0:g.copyTo(p5))||Rg(a,m5).rectangle;h.width=Math.max(h.width,1/e)|0,h.height=Math.max(h.height,1/e)|0;const f=e0.create({...t.textureSourceOptions,width:h.width,height:h.height,resolution:e,antialias:i}),m=Gt.shared.translate(-h.x,-h.y);return this._renderer.render({container:a,transform:m,target:f,clearColor:o}),f.source.updateMipmaps(),f}destroy(){this._renderer=null}}Uv.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"textureGenerator"};function _5(n,t,e,i){e[i++]=(n>>16&255)/255,e[i++]=(n>>8&255)/255,e[i++]=(n&255)/255,e[i++]=t}function Bh(n,t,e){const i=(n>>24&255)/255;t[e++]=(n&255)/255*i,t[e++]=(n>>8&255)/255*i,t[e++]=(n>>16&255)/255*i,t[e++]=i}class Ov{constructor(t){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=t}reset(){this._stackIndex=0;for(let t=0;t<this._activeUniforms.length;t++)this._uniformsPool.push(this._activeUniforms[t]);for(let t=0;t<this._activeBindGroups.length;t++)this._bindGroupPool.push(this._activeBindGroups[t]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(t){this.reset(),this.push(t)}bind({size:t,projectionMatrix:e,worldTransformMatrix:i,worldColor:a,offset:o}){const h=this._renderer.renderTarget.renderTarget,f=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{worldTransformMatrix:new Gt,worldColor:4294967295,offset:new Xe},m={projectionMatrix:e||this._renderer.renderTarget.projectionMatrix,resolution:t||h.size,worldTransformMatrix:i||f.worldTransformMatrix,worldColor:a||f.worldColor,offset:o||f.offset,bindGroup:null},g=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(g);const b=g.uniforms;b.uProjectionMatrix=m.projectionMatrix,b.uResolution=m.resolution,b.uWorldTransformMatrix.copyFrom(m.worldTransformMatrix),b.uWorldTransformMatrix.tx-=m.offset.x,b.uWorldTransformMatrix.ty-=m.offset.y,Bh(m.worldColor,b.uWorldColorAlpha,0),g.update();let x;this._renderer.renderPipes.uniformBatch?x=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(g,!1):(x=this._bindGroupPool.pop()||new Ks,this._activeBindGroups.push(x),x.setResource(g,0)),m.bindGroup=x,this._currentGlobalUniformData=m}push(t){this.bind(t),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===Cr.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new kn({uProjectionMatrix:{value:new Gt,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new Gt,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null}}Ov.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"globalUniforms"};let y5=1;class Gv{constructor(){this._tasks=[],this._offset=0}init(){Bi.system.add(this._update,this)}repeat(t,e,i=!0){const a=y5++;let o=0;return i&&(this._offset+=1e3,o=this._offset),this._tasks.push({func:t,duration:e,start:performance.now(),offset:o,last:performance.now(),repeat:!0,id:a}),a}cancel(t){for(let e=0;e<this._tasks.length;e++)if(this._tasks[e].id===t){this._tasks.splice(e,1);return}}_update(){const t=performance.now();for(let e=0;e<this._tasks.length;e++){const i=this._tasks[e];if(t-i.offset-i.last>=i.duration){const a=t-i.start;i.func(a),i.last=t}}}destroy(){Bi.system.remove(this._update,this),this._tasks.length=0}}Gv.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"scheduler",priority:0};let G1=!1;function RC(n){if(!G1){if(me.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){const t=[`%c  %c  %c  %c  %c PixiJS %c v${Rd} (${n}) http://www.pixijs.com/

`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...t)}else globalThis.console&&globalThis.console.log(`PixiJS ${Rd} - ${n} - http://www.pixijs.com/`);G1=!0}}class n0{constructor(t){this._renderer=t}init(t){if(t.hello){let e=this._renderer.name;this._renderer.type===Cr.WEBGL&&(e+=` ${this._renderer.context.webGLVersion}`),RC(e)}}}n0.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"hello",priority:-2};n0.defaultOptions={hello:!1};function MC(n){let t=!1;for(const i in n)if(n[i]==null){t=!0;break}if(!t)return n;const e=Object.create(null);for(const i in n){const a=n[i];a&&(e[i]=a)}return e}function DC(n){let t=0;for(let e=0;e<n.length;e++)n[e]==null?t++:n[e-t]=n[e];return n.length-=t,n}let b5=0;const Pv=class wC{constructor(t){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=t}init(t){t={...wC.defaultOptions,...t},this.maxUnusedTime=t.renderableGCMaxUnusedTime,this._frequency=t.renderableGCFrequency,this.enabled=t.renderableGCActive}get enabled(){return!!this._handler}set enabled(t){this.enabled!==t&&(t?(this._handler=this._renderer.scheduler.repeat(()=>this.run(),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat(()=>{for(const e of this._managedHashes)e.context[e.hash]=MC(e.context[e.hash])},this._frequency),this._arrayHandler=this._renderer.scheduler.repeat(()=>{for(const e of this._managedArrays)DC(e.context[e.hash])},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(t,e){this._managedHashes.push({context:t,hash:e})}addManagedArray(t,e){this._managedArrays.push({context:t,hash:e})}prerender({container:t}){this._now=performance.now(),t.renderGroup.gcTick=b5++,this._updateInstructionGCTick(t.renderGroup,t.renderGroup.gcTick)}addRenderable(t){this.enabled&&(t._lastUsed===-1&&(this._managedRenderables.push(t),t.once("destroyed",this._removeRenderable,this)),t._lastUsed=this._now)}run(){var o;const t=this._now,e=this._managedRenderables,i=this._renderer.renderPipes;let a=0;for(let h=0;h<e.length;h++){const f=e[h];if(f===null){a++;continue}const m=f.renderGroup??f.parentRenderGroup,g=((o=m==null?void 0:m.instructionSet)==null?void 0:o.gcTick)??-1;if(((m==null?void 0:m.gcTick)??0)===g&&(f._lastUsed=t),t-f._lastUsed>this.maxUnusedTime){if(!f.destroyed){const b=i;m&&(m.structureDidChange=!0),b[f.renderPipeId].destroyRenderable(f)}f._lastUsed=-1,a++,f.off("destroyed",this._removeRenderable,this)}else e[h-a]=f}e.length-=a}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(t){const e=this._managedRenderables.indexOf(t);e>=0&&(t.off("destroyed",this._removeRenderable,this),this._managedRenderables[e]=null)}_updateInstructionGCTick(t,e){t.instructionSet.gcTick=e;for(const i of t.renderGroupChildren)this._updateInstructionGCTick(i,e)}};Pv.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"renderableGC",priority:0};Pv.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4};let UC=Pv;const Nv=class OC{constructor(t){this._renderer=t,this.count=0,this.checkCount=0}init(t){t={...OC.defaultOptions,...t},this.checkCountMax=t.textureGCCheckCountMax,this.maxIdle=t.textureGCAMaxIdle??t.textureGCMaxIdle,this.active=t.textureGCActive}postrender(){this._renderer.renderingToScreen&&(this.count++,this.active&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this._renderer.texture.managedTextures;for(let e=0;e<t.length;e++){const i=t[e];i.autoGarbageCollect&&i.resource&&i._touched>-1&&this.count-i._touched>this.maxIdle&&(i._touched=-1,i.unload())}}destroy(){this._renderer=null}};Nv.extension={type:[I.WebGLSystem,I.WebGPUSystem],name:"textureGC"};Nv.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:60*60,textureGCCheckCountMax:600};let GC=Nv;const zv=class PC{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(t){this.texture.source.autoDensity=t}get resolution(){return this.texture.source._resolution}set resolution(t){this.texture.source.resize(this.texture.source.width,this.texture.source.height,t)}init(t){t={...PC.defaultOptions,...t},t.view&&(wt(Jt,"ViewSystem.view has been renamed to ViewSystem.canvas"),t.canvas=t.view),this.screen=new Ue(0,0,t.width,t.height),this.canvas=t.canvas||me.get().createCanvas(),this.antialias=!!t.antialias,this.texture=fv(this.canvas,t),this.renderTarget=new pg({colorTextures:[this.texture],depth:!!t.depth,isRoot:!0}),this.texture.source.transparent=t.backgroundAlpha<1,this.resolution=t.resolution}resize(t,e,i){this.texture.source.resize(t,e,i),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(t=!1){(typeof t=="boolean"?t:!!(t!=null&&t.removeView))&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}};zv.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"view",priority:0};zv.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1};let NC=zv;const Hv=[AC,Ov,n0,NC,Bv,GC,Uv,BC,mb,UC,Gv],Lv=[Dv,jb,Rv,Tv,Kb,Qb,Wb,Ev],v5=[...Hv,hv,kA,HA,av,Zb,vv,pv,ev,yv,_v,rv,fC,sv,iv],x5=[...Lv],S5=[Ib,Sv,xv],zC=[],HC=[],LC=[];Oe.handleByNamedList(I.WebGLSystem,zC);Oe.handleByNamedList(I.WebGLPipes,HC);Oe.handleByNamedList(I.WebGLPipesAdaptor,LC);Oe.add(...v5,...x5,...S5);class FC extends Nd{constructor(){const t={name:"webgl",type:Cr.WEBGL,systems:zC,renderPipes:HC,renderPipeAdaptors:LC};super(t)}}const E5=Object.freeze(Object.defineProperty({__proto__:null,WebGLRenderer:FC},Symbol.toStringTag,{value:"Module"}));class Fv{constructor(t){this._hash=Object.create(null),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_hash")}contextChange(t){this._gpu=t}getBindGroup(t,e,i){return t._updateKey(),this._hash[t._key]||this._createBindGroup(t,e,i)}_createBindGroup(t,e,i){const a=this._gpu.device,o=e.layout[i],h=[],f=this._renderer;for(const b in o){const x=t.resources[b]??t.resources[o[b]];let E;if(x._resourceType==="uniformGroup"){const T=x;f.ubo.updateUniformGroup(T);const R=T.buffer;E={buffer:f.buffer.getGPUBuffer(R),offset:0,size:R.descriptor.size}}else if(x._resourceType==="buffer"){const T=x;E={buffer:f.buffer.getGPUBuffer(T),offset:0,size:T.descriptor.size}}else if(x._resourceType==="bufferResource"){const T=x;E={buffer:f.buffer.getGPUBuffer(T.buffer),offset:T.offset,size:T.size}}else if(x._resourceType==="textureSampler"){const T=x;E=f.texture.getGpuSampler(T)}else if(x._resourceType==="textureSource"){const T=x;E=f.texture.getGpuSource(T).createView({})}h.push({binding:o[b],resource:E})}const m=f.shader.getProgramData(e).bindGroups[i],g=a.createBindGroup({layout:m,entries:h});return this._hash[t._key]=g,g}destroy(){for(const t of Object.keys(this._hash))this._hash[t]=null;this._hash=null,this._renderer=null}}Fv.extension={type:[I.WebGPUSystem],name:"bindGroup"};class Vv{constructor(t){this._gpuBuffers=Object.create(null),this._managedBuffers=[],t.renderableGC.addManagedHash(this,"_gpuBuffers")}contextChange(t){this._gpu=t}getGPUBuffer(t){return this._gpuBuffers[t.uid]||this.createGPUBuffer(t)}updateBuffer(t){const e=this._gpuBuffers[t.uid]||this.createGPUBuffer(t),i=t.data;return t._updateID&&i&&(t._updateID=0,this._gpu.device.queue.writeBuffer(e,0,i.buffer,0,(t._updateSize||i.byteLength)+3&-4)),e}destroyAll(){for(const t in this._gpuBuffers)this._gpuBuffers[t].destroy();this._gpuBuffers={}}createGPUBuffer(t){this._gpuBuffers[t.uid]||(t.on("update",this.updateBuffer,this),t.on("change",this.onBufferChange,this),t.on("destroy",this.onBufferDestroy,this),this._managedBuffers.push(t));const e=this._gpu.device.createBuffer(t.descriptor);return t._updateID=0,t.data&&(ug(t.data.buffer,e.getMappedRange()),e.unmap()),this._gpuBuffers[t.uid]=e,e}onBufferChange(t){this._gpuBuffers[t.uid].destroy(),t._updateID=0,this._gpuBuffers[t.uid]=this.createGPUBuffer(t)}onBufferDestroy(t){this._managedBuffers.splice(this._managedBuffers.indexOf(t),1),this._destroyBuffer(t)}destroy(){this._managedBuffers.forEach(t=>this._destroyBuffer(t)),this._managedBuffers=null,this._gpuBuffers=null}_destroyBuffer(t){this._gpuBuffers[t.uid].destroy(),t.off("update",this.updateBuffer,this),t.off("change",this.onBufferChange,this),t.off("destroy",this.onBufferDestroy,this),this._gpuBuffers[t.uid]=null}}Vv.extension={type:[I.WebGPUSystem],name:"buffer"};class VC{constructor({minUniformOffsetAlignment:t}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=t,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(t){if(t>this._minUniformOffsetAlignment/4)throw new Error(`UniformBufferBatch: array is too large: ${t*4}`);const e=this.byteIndex;let i=e+t*4;if(i=Math.ceil(i/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,i>this.data.length*4)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=i,e}addGroup(t){const e=this.addEmptyGroup(t.length);for(let i=0;i<t.length;i++)this.data[e/4+i]=t[i];return e}destroy(){this.data=null}}class kv{constructor(t){this._colorMaskCache=15,this._renderer=t}setMask(t){this._colorMaskCache!==t&&(this._colorMaskCache=t,this._renderer.pipeline.setColorMask(t))}destroy(){this._renderer=null,this._colorMaskCache=null}}kv.extension={type:[I.WebGPUSystem],name:"colorMask"};class i0{constructor(t){this._renderer=t}async init(t){return this._initPromise?this._initPromise:(this._initPromise=this._createDeviceAndAdaptor(t).then(e=>{this.gpu=e,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise)}contextChange(t){this._renderer.gpu=t}async _createDeviceAndAdaptor(t){const e=await me.get().getNavigator().gpu.requestAdapter({powerPreference:t.powerPreference,forceFallbackAdapter:t.forceFallbackAdapter}),i=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter(o=>e.features.has(o)),a=await e.requestDevice({requiredFeatures:i});return{adapter:e,device:a}}destroy(){this.gpu=null,this._renderer=null}}i0.extension={type:[I.WebGPUSystem],name:"device"};i0.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1};class Xv{constructor(t){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=t}renderStart(){this.commandFinished=new Promise(t=>{this._resolveCommandFinished=t}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(t){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(t.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(t){this.renderPassEncoder.setViewport(t.x,t.y,t.width,t.height,0,1)}setPipelineFromGeometryProgramAndState(t,e,i,a){const o=this._renderer.pipeline.getPipeline(t,e,i,a);this.setPipeline(o)}setPipeline(t){this._boundPipeline!==t&&(this._boundPipeline=t,this.renderPassEncoder.setPipeline(t))}_setVertexBuffer(t,e){this._boundVertexBuffer[t]!==e&&(this._boundVertexBuffer[t]=e,this.renderPassEncoder.setVertexBuffer(t,this._renderer.buffer.updateBuffer(e)))}_setIndexBuffer(t){if(this._boundIndexBuffer===t)return;this._boundIndexBuffer=t;const e=t.data.BYTES_PER_ELEMENT===2?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(t),e)}resetBindGroup(t){this._boundBindGroup[t]=null}setBindGroup(t,e,i){if(this._boundBindGroup[t]===e)return;this._boundBindGroup[t]=e,e._touch(this._renderer.textureGC.count);const a=this._renderer.bindGroup.getBindGroup(e,i,t);this.renderPassEncoder.setBindGroup(t,a)}setGeometry(t,e){const i=this._renderer.pipeline.getBufferNamesToBind(t,e);for(const a in i)this._setVertexBuffer(a,t.attributes[i[a]].buffer);t.indexBuffer&&this._setIndexBuffer(t.indexBuffer)}_setShaderBindGroups(t,e){for(const i in t.groups){const a=t.groups[i];e||this._syncBindGroup(a),this.setBindGroup(i,a,t.gpuProgram)}}_syncBindGroup(t){for(const e in t.resources){const i=t.resources[e];i.isUniformGroup&&this._renderer.ubo.updateUniformGroup(i)}}draw(t){const{geometry:e,shader:i,state:a,topology:o,size:h,start:f,instanceCount:m,skipSync:g}=t;this.setPipelineFromGeometryProgramAndState(e,i.gpuProgram,a,o),this.setGeometry(e,i.gpuProgram),this._setShaderBindGroups(i,g),e.indexBuffer?this.renderPassEncoder.drawIndexed(h||e.indexBuffer.data.length,m??e.instanceCount,f||0):this.renderPassEncoder.draw(h||e.getSize(),m??e.instanceCount,f||0)}finishRenderPass(){this.renderPassEncoder&&(this.renderPassEncoder.end(),this.renderPassEncoder=null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){const t=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1]);this.renderPassEncoder=this.commandEncoder.beginRenderPass(t);const e=this._boundPipeline,i={...this._boundVertexBuffer},a=this._boundIndexBuffer,o={...this._boundBindGroup};this._clearCache();const h=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(h.x,h.y,h.width,h.height,0,1),this.setPipeline(e);for(const f in i)this._setVertexBuffer(f,i[f]);for(const f in o)this.setBindGroup(f,o[f],null);this._setIndexBuffer(a)}_clearCache(){for(let t=0;t<16;t++)this._boundBindGroup[t]=null,this._boundVertexBuffer[t]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(t){this._gpu=t}}Xv.extension={type:[I.WebGPUSystem],name:"encoder",priority:1};class Iv{constructor(t){this._renderer=t}contextChange(){this.maxTextures=this._renderer.device.gpu.device.limits.maxSampledTexturesPerShaderStage,this.maxBatchableTextures=this.maxTextures}destroy(){}}Iv.extension={type:[I.WebGPUSystem],name:"limits"};class Yv{constructor(t){this._renderTargetStencilState=Object.create(null),this._renderer=t,t.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(t){let e=this._renderTargetStencilState[t.uid];e||(e=this._renderTargetStencilState[t.uid]={stencilMode:On.DISABLED,stencilReference:0}),this._activeRenderTarget=t,this.setStencilMode(e.stencilMode,e.stencilReference)}setStencilMode(t,e){const i=this._renderTargetStencilState[this._activeRenderTarget.uid];i.stencilMode=t,i.stencilReference=e;const a=this._renderer;a.pipeline.setStencilMode(t),a.encoder.renderPassEncoder.setStencilReference(e)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}}Yv.extension={type:[I.WebGPUSystem],name:"stencil"};const bd={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}};function kC(n){const t=n.map(i=>({data:i,offset:0,size:0}));let e=0;for(let i=0;i<t.length;i++){const a=t[i];let o=bd[a.data.type].size;const h=bd[a.data.type].align;if(!bd[a.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${a.data.type}`);a.data.size>1&&(o=Math.max(o,h)*a.data.size),e=Math.ceil(e/h)*h,a.size=o,a.offset=e,e+=o}return e=Math.ceil(e/16)*16,{uboElements:t,size:e}}function XC(n,t){const{size:e,align:i}=bd[n.data.type],a=(i-e)/4,o=n.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
         v = uv.${n.data.name};
         ${t!==0?`offset += ${t};`:""}

         arrayOffset = offset;

         t = 0;

         for(var i=0; i < ${n.data.size*(e/4)}; i++)
         {
             for(var j = 0; j < ${e/4}; j++)
             {
                 ${o}[arrayOffset++] = v[t++];
             }
             ${a!==0?`arrayOffset += ${a};`:""}
         }
     `}function IC(n){return uv(n,"uboWgsl",XC,YA)}class qv extends lv{constructor(){super({createUboElements:kC,generateUboSync:IC})}}qv.extension={type:[I.WebGPUSystem],name:"ubo"};const No=128;class jv{constructor(t){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_bindGroupHash"),this._batchBuffer=new VC({minUniformOffsetAlignment:No});const e=256/No;for(let i=0;i<e;i++){let a=be.UNIFORM|be.COPY_DST;i===0&&(a|=be.COPY_SRC),this._buffers.push(new Ar({data:this._batchBuffer.data,usage:a}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){for(const t in this._bindGroupHash)this._bindGroupHash[t]=null;this._batchBuffer.clear()}getUniformBindGroup(t,e){if(!e&&this._bindGroupHash[t.uid])return this._bindGroupHash[t.uid];this._renderer.ubo.ensureUniformGroup(t);const i=t.buffer.data,a=this._batchBuffer.addEmptyGroup(i.length);return this._renderer.ubo.syncUniformGroup(t,this._batchBuffer.data,a/4),this._bindGroupHash[t.uid]=this._getBindGroup(a/No),this._bindGroupHash[t.uid]}getUboResource(t){this._renderer.ubo.updateUniformGroup(t);const e=t.buffer.data,i=this._batchBuffer.addGroup(e);return this._getBufferResource(i/No)}getArrayBindGroup(t){const e=this._batchBuffer.addGroup(t);return this._getBindGroup(e/No)}getArrayBufferResource(t){const i=this._batchBuffer.addGroup(t)/No;return this._getBufferResource(i)}_getBufferResource(t){if(!this._bufferResources[t]){const e=this._buffers[t%2];this._bufferResources[t]=new t0({buffer:e,offset:(t/2|0)*256,size:No})}return this._bufferResources[t]}_getBindGroup(t){if(!this._bindGroups[t]){const e=new Ks({0:this._getBufferResource(t)});this._bindGroups[t]=e}return this._bindGroups[t]}_uploadBindGroups(){const t=this._renderer.buffer,e=this._buffers[0];e.update(this._batchBuffer.byteIndex),t.updateBuffer(e);const i=this._renderer.gpu.device.createCommandEncoder();for(let a=1;a<this._buffers.length;a++){const o=this._buffers[a];i.copyBufferToBuffer(t.getGPUBuffer(e),No,t.getGPUBuffer(o),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([i.finish()])}destroy(){for(let t=0;t<this._bindGroups.length;t++)this._bindGroups[t].destroy();this._bindGroups=null,this._bindGroupHash=null;for(let t=0;t<this._buffers.length;t++)this._buffers[t].destroy();this._buffers=null;for(let t=0;t<this._bufferResources.length;t++)this._bufferResources[t].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._bindGroupHash=null,this._renderer=null}}jv.extension={type:[I.WebGPUPipes],name:"uniformBatch"};const T5={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4};function A5(n,t,e,i,a){return n<<24|t<<16|e<<10|i<<5|a}function C5(n,t,e,i){return e<<6|n<<3|i<<1|t}class Kv{constructor(t){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._renderer=t}contextChange(t){this._gpu=t,this.setStencilMode(On.DISABLED),this._updatePipeHash()}setMultisampleCount(t){this._multisampleCount!==t&&(this._multisampleCount=t,this._updatePipeHash())}setRenderTarget(t){this._multisampleCount=t.msaaSamples,this._depthStencilAttachment=t.descriptor.depthStencilAttachment?1:0,this._updatePipeHash()}setColorMask(t){this._colorMask!==t&&(this._colorMask=t,this._updatePipeHash())}setStencilMode(t){this._stencilMode!==t&&(this._stencilMode=t,this._stencilState=Vl[t],this._updatePipeHash())}setPipeline(t,e,i,a){const o=this.getPipeline(t,e,i);a.setPipeline(o)}getPipeline(t,e,i,a){t._layoutKey||($b(t,e.attributeData),this._generateBufferKey(t)),a||(a=t.topology);const o=A5(t._layoutKey,e._layoutKey,i.data,i._blendModeId,T5[a]);return this._pipeCache[o]?this._pipeCache[o]:(this._pipeCache[o]=this._createPipeline(t,e,i,a),this._pipeCache[o])}_createPipeline(t,e,i,a){const o=this._gpu.device,h=this._createVertexBufferLayouts(t,e),f=this._renderer.state.getColorTargets(i);f[0].writeMask=this._stencilMode===On.RENDERING_MASK_ADD?0:this._colorMask;const m=this._renderer.shader.getProgramData(e).pipeline,g={vertex:{module:this._getModule(e.vertex.source),entryPoint:e.vertex.entryPoint,buffers:h},fragment:{module:this._getModule(e.fragment.source),entryPoint:e.fragment.entryPoint,targets:f},primitive:{topology:a,cullMode:i.cullMode},layout:m,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};return this._depthStencilAttachment&&(g.depthStencil={...this._stencilState,format:"depth24plus-stencil8",depthWriteEnabled:i.depthTest,depthCompare:i.depthTest?"less":"always"}),o.createRenderPipeline(g)}_getModule(t){return this._moduleCache[t]||this._createModule(t)}_createModule(t){const e=this._gpu.device;return this._moduleCache[t]=e.createShaderModule({code:t}),this._moduleCache[t]}_generateBufferKey(t){const e=[];let i=0;const a=Object.keys(t.attributes).sort();for(let h=0;h<a.length;h++){const f=t.attributes[a[h]];e[i++]=f.offset,e[i++]=f.format,e[i++]=f.stride,e[i++]=f.instance}const o=e.join("|");return t._layoutKey=gh(o,"geometry"),t._layoutKey}_generateAttributeLocationsKey(t){const e=[];let i=0;const a=Object.keys(t.attributeData).sort();for(let h=0;h<a.length;h++){const f=t.attributeData[a[h]];e[i++]=f.location}const o=e.join("|");return t._attributeLocationsKey=gh(o,"programAttributes"),t._attributeLocationsKey}getBufferNamesToBind(t,e){const i=t._layoutKey<<16|e._attributeLocationsKey;if(this._bindingNamesCache[i])return this._bindingNamesCache[i];const a=this._createVertexBufferLayouts(t,e),o=Object.create(null),h=e.attributeData;for(let f=0;f<a.length;f++){const g=Object.values(a[f].attributes)[0].shaderLocation;for(const b in h)if(h[b].location===g){o[f]=b;break}}return this._bindingNamesCache[i]=o,o}_createVertexBufferLayouts(t,e){e._attributeLocationsKey||this._generateAttributeLocationsKey(e);const i=t._layoutKey<<16|e._attributeLocationsKey;if(this._bufferLayoutsCache[i])return this._bufferLayoutsCache[i];const a=[];return t.buffers.forEach(o=>{const h={arrayStride:0,stepMode:"vertex",attributes:[]},f=h.attributes;for(const m in e.attributeData){const g=t.attributes[m];(g.divisor??1)!==1&&kt(`Attribute ${m} has an invalid divisor value of '${g.divisor}'. WebGPU only supports a divisor value of 1`),g.buffer===o&&(h.arrayStride=g.stride,h.stepMode=g.instance?"instance":"vertex",f.push({shaderLocation:e.attributeData[m].location,offset:g.offset,format:g.format}))}f.length&&a.push(h)}),this._bufferLayoutsCache[i]=a,a}_updatePipeHash(){const t=C5(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment);this._pipeStateCaches[t]||(this._pipeStateCaches[t]=Object.create(null)),this._pipeCache=this._pipeStateCaches[t]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}}Kv.extension={type:[I.WebGPUSystem],name:"pipeline"};class YC{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}}class qC{init(t,e){this._renderer=t,this._renderTargetSystem=e}copyToTexture(t,e,i,a,o){const h=this._renderer,f=this._getGpuColorTexture(t),m=h.texture.getGpuSource(e.source);return h.encoder.commandEncoder.copyTextureToTexture({texture:f,origin:i},{texture:m,origin:o},a),e}startRenderPass(t,e=!0,i,a){const h=this._renderTargetSystem.getGpuRenderTarget(t),f=this.getDescriptor(t,e,i);h.descriptor=f,this._renderer.pipeline.setRenderTarget(h),this._renderer.encoder.beginRenderPass(h),this._renderer.encoder.setViewport(a)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(t){const e=this._renderTargetSystem.getGpuRenderTarget(t);return e.contexts[0]?e.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(t.colorTextures[0].source)}getDescriptor(t,e,i){typeof e=="boolean"&&(e=e?Er.ALL:Er.NONE);const a=this._renderTargetSystem,o=a.getGpuRenderTarget(t),h=t.colorTextures.map((g,b)=>{const x=o.contexts[b];let E,T;x?E=x.getCurrentTexture().createView():E=this._renderer.texture.getGpuSource(g).createView({mipLevelCount:1}),o.msaaTextures[b]&&(T=E,E=this._renderer.texture.getTextureView(o.msaaTextures[b]));const R=e&Er.COLOR?"clear":"load";return i??(i=a.defaultClearColor),{view:E,resolveTarget:T,clearValue:i,storeOp:"store",loadOp:R}});let f;if((t.stencil||t.depth)&&!t.depthStencilTexture&&(t.ensureDepthStencilTexture(),t.depthStencilTexture.source.sampleCount=o.msaa?4:1),t.depthStencilTexture){const g=e&Er.STENCIL?"clear":"load",b=e&Er.DEPTH?"clear":"load";f={view:this._renderer.texture.getGpuSource(t.depthStencilTexture.source).createView(),stencilStoreOp:"store",stencilLoadOp:g,depthClearValue:1,depthLoadOp:b,depthStoreOp:"store"}}return{colorAttachments:h,depthStencilAttachment:f}}clear(t,e=!0,i,a){if(!e)return;const{gpu:o,encoder:h}=this._renderer,f=o.device;if(h.commandEncoder===null){const g=f.createCommandEncoder(),b=this.getDescriptor(t,e,i),x=g.beginRenderPass(b);x.setViewport(a.x,a.y,a.width,a.height,0,1),x.end();const E=g.finish();f.queue.submit([E])}else this.startRenderPass(t,e,i,a)}initGpuRenderTarget(t){t.isRoot=!0;const e=new YC;return t.colorTextures.forEach((i,a)=>{if(i instanceof js){const o=i.resource.getContext("webgpu"),h=i.transparent?"premultiplied":"opaque";try{o.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:h})}catch(f){console.error(f)}e.contexts[a]=o}if(e.msaa=i.source.antialias,i.source.antialias){const o=new Sn({width:0,height:0,sampleCount:4});e.msaaTextures[a]=o}}),e.msaa&&(e.msaaSamples=4,t.depthStencilTexture&&(t.depthStencilTexture.source.sampleCount=4)),e}destroyGpuRenderTarget(t){t.contexts.forEach(e=>{e.unconfigure()}),t.msaaTextures.forEach(e=>{e.destroy()}),t.msaaTextures.length=0,t.contexts.length=0}ensureDepthStencilTexture(t){const e=this._renderTargetSystem.getGpuRenderTarget(t);t.depthStencilTexture&&e.msaa&&(t.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(t){const e=this._renderTargetSystem.getGpuRenderTarget(t);e.width=t.width,e.height=t.height,e.msaa&&t.colorTextures.forEach((i,a)=>{const o=e.msaaTextures[a];o==null||o.resize(i.source.width,i.source.height,i.source._resolution)})}}class Wv extends dv{constructor(t){super(t),this.adaptor=new qC,this.adaptor.init(t,this)}}Wv.extension={type:[I.WebGPUSystem],name:"renderTarget"};class Qv{constructor(){this._gpuProgramData=Object.create(null)}contextChange(t){this._gpu=t}getProgramData(t){return this._gpuProgramData[t._layoutKey]||this._createGPUProgramData(t)}_createGPUProgramData(t){const e=this._gpu.device,i=t.gpuLayout.map(o=>e.createBindGroupLayout({entries:o})),a={bindGroupLayouts:i};return this._gpuProgramData[t._layoutKey]={bindGroups:i,pipeline:e.createPipelineLayout(a)},this._gpuProgramData[t._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}}Qv.extension={type:[I.WebGPUSystem],name:"shader"};const nr={};nr.normal={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}};nr.add={alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}};nr.multiply={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}};nr.screen={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};nr.overlay={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};nr.none={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}};nr["normal-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}};nr["add-npm"]={alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}};nr["screen-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}};nr.erase={alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}};nr.min={alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}};nr.max={alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}};class Zv{constructor(){this.defaultState=new Ir,this.defaultState.blend=!0}contextChange(t){this.gpu=t}getColorTargets(t){return[{format:"bgra8unorm",writeMask:0,blend:nr[t.blendMode]||nr.normal}]}destroy(){this.gpu=null}}Zv.extension={type:[I.WebGPUSystem],name:"state"};const jC={type:"image",upload(n,t,e){const i=n.resource,a=(n.pixelWidth|0)*(n.pixelHeight|0),o=i.byteLength/a;e.device.queue.writeTexture({texture:t},i,{offset:0,rowsPerImage:n.pixelHeight,bytesPerRow:n.pixelHeight*o},{width:n.pixelWidth,height:n.pixelHeight,depthOrArrayLayers:1})}},Jv={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},B5={blockBytes:4,blockWidth:1,blockHeight:1},KC={type:"compressed",upload(n,t,e){let i=n.pixelWidth,a=n.pixelHeight;const o=Jv[n.format]||B5;for(let h=0;h<n.resource.length;h++){const f=n.resource[h],m=Math.ceil(i/o.blockWidth)*o.blockBytes;e.device.queue.writeTexture({texture:t,mipLevel:h},f,{offset:0,bytesPerRow:m},{width:Math.ceil(i/o.blockWidth)*o.blockWidth,height:Math.ceil(a/o.blockHeight)*o.blockHeight,depthOrArrayLayers:1}),i=Math.max(i>>1,1),a=Math.max(a>>1,1)}}},$v={type:"image",upload(n,t,e){const i=n.resource;if(!i)return;if(globalThis.HTMLImageElement&&i instanceof HTMLImageElement){const f=me.get().createCanvas(i.width,i.height);f.getContext("2d").drawImage(i,0,0,i.width,i.height),n.resource=f,kt("ImageSource: Image element passed, converting to canvas and replacing resource.")}const a=Math.min(t.width,n.resourceWidth||n.pixelWidth),o=Math.min(t.height,n.resourceHeight||n.pixelHeight),h=n.alphaMode==="premultiply-alpha-on-upload";e.device.queue.copyExternalImageToTexture({source:i},{texture:t,premultipliedAlpha:h},{width:a,height:o})}},WC={type:"video",upload(n,t,e){$v.upload(n,t,e)}};class QC{constructor(t){this.device=t,this.sampler=t.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(t){let e=this.pipelines[t];return e||(this.mipmapShaderModule||(this.mipmapShaderModule=this.device.createShaderModule({code:`
                        var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
                        vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

                        struct VertexOutput {
                        @builtin(position) position : vec4<f32>,
                        @location(0) texCoord : vec2<f32>,
                        };

                        @vertex
                        fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
                        var output : VertexOutput;
                        output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
                        output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
                        return output;
                        }

                        @group(0) @binding(0) var imgSampler : sampler;
                        @group(0) @binding(1) var img : texture_2d<f32>;

                        @fragment
                        fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
                        return textureSample(img, imgSampler, texCoord);
                        }
                    `})),e=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:t}]}}),this.pipelines[t]=e),e}generateMipmap(t){const e=this._getMipmapPipeline(t.format);if(t.dimension==="3d"||t.dimension==="1d")throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let i=t;const a=t.depthOrArrayLayers||1,o=t.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!o){const m={size:{width:Math.ceil(t.width/2),height:Math.ceil(t.height/2),depthOrArrayLayers:a},format:t.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:t.mipLevelCount-1};i=this.device.createTexture(m)}const h=this.device.createCommandEncoder({}),f=e.getBindGroupLayout(0);for(let m=0;m<a;++m){let g=t.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:m,arrayLayerCount:1}),b=o?1:0;for(let x=1;x<t.mipLevelCount;++x){const E=i.createView({baseMipLevel:b++,mipLevelCount:1,dimension:"2d",baseArrayLayer:m,arrayLayerCount:1}),T=h.beginRenderPass({colorAttachments:[{view:E,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),R=this.device.createBindGroup({layout:f,entries:[{binding:0,resource:this.sampler},{binding:1,resource:g}]});T.setPipeline(e),T.setBindGroup(0,R),T.draw(3,1,0,0),T.end(),g=E}}if(!o){const m={width:Math.ceil(t.width/2),height:Math.ceil(t.height/2),depthOrArrayLayers:a};for(let g=1;g<t.mipLevelCount;++g)h.copyTextureToTexture({texture:i,mipLevel:g-1},{texture:t,mipLevel:g},m),m.width=Math.ceil(m.width/2),m.height=Math.ceil(m.height/2)}return this.device.queue.submit([h.finish()]),o||i.destroy(),t}}class t2{constructor(t){this.managedTextures=[],this._gpuSources=Object.create(null),this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._textureViewHash=Object.create(null),this._uploads={image:$v,buffer:jC,video:WC,compressed:KC},this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuSources"),t.renderableGC.addManagedHash(this,"_gpuSamplers"),t.renderableGC.addManagedHash(this,"_bindGroupHash"),t.renderableGC.addManagedHash(this,"_textureViewHash")}contextChange(t){this._gpu=t}initSource(t){if(t.autoGenerateMipmaps){const m=Math.max(t.pixelWidth,t.pixelHeight);t.mipLevelCount=Math.floor(Math.log2(m))+1}let e=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;t.uploadMethodId!=="compressed"&&(e|=GPUTextureUsage.RENDER_ATTACHMENT,e|=GPUTextureUsage.COPY_SRC);const i=Jv[t.format]||{blockWidth:1,blockHeight:1},a=Math.ceil(t.pixelWidth/i.blockWidth)*i.blockWidth,o=Math.ceil(t.pixelHeight/i.blockHeight)*i.blockHeight,h={label:t.label,size:{width:a,height:o},format:t.format,sampleCount:t.sampleCount,mipLevelCount:t.mipLevelCount,dimension:t.dimension,usage:e},f=this._gpu.device.createTexture(h);return this._gpuSources[t.uid]=f,this.managedTextures.includes(t)||(t.on("update",this.onSourceUpdate,this),t.on("resize",this.onSourceResize,this),t.on("destroy",this.onSourceDestroy,this),t.on("unload",this.onSourceUnload,this),t.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(t)),this.onSourceUpdate(t),f}onSourceUpdate(t){const e=this.getGpuSource(t);e&&(this._uploads[t.uploadMethodId]&&this._uploads[t.uploadMethodId].upload(t,e,this._gpu),t.autoGenerateMipmaps&&t.mipLevelCount>1&&this.onUpdateMipmaps(t))}onSourceUnload(t){const e=this._gpuSources[t.uid];e&&(this._gpuSources[t.uid]=null,e.destroy())}onUpdateMipmaps(t){this._mipmapGenerator||(this._mipmapGenerator=new QC(this._gpu.device));const e=this.getGpuSource(t);this._mipmapGenerator.generateMipmap(e)}onSourceDestroy(t){t.off("update",this.onSourceUpdate,this),t.off("unload",this.onSourceUnload,this),t.off("destroy",this.onSourceDestroy,this),t.off("resize",this.onSourceResize,this),t.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(t),1),this.onSourceUnload(t)}onSourceResize(t){const e=this._gpuSources[t.uid];e?(e.width!==t.pixelWidth||e.height!==t.pixelHeight)&&(this._textureViewHash[t.uid]=null,this._bindGroupHash[t.uid]=null,this.onSourceUnload(t),this.initSource(t)):this.initSource(t)}_initSampler(t){return this._gpuSamplers[t._resourceId]=this._gpu.device.createSampler(t),this._gpuSamplers[t._resourceId]}getGpuSampler(t){return this._gpuSamplers[t._resourceId]||this._initSampler(t)}getGpuSource(t){return this._gpuSources[t.uid]||this.initSource(t)}getTextureBindGroup(t){return this._bindGroupHash[t.uid]??this._createTextureBindGroup(t)}_createTextureBindGroup(t){const e=t.source;return this._bindGroupHash[t.uid]=new Ks({0:e,1:e.style,2:new kn({uTextureMatrix:{type:"mat3x3<f32>",value:t.textureMatrix.mapCoord}})}),this._bindGroupHash[t.uid]}getTextureView(t){const e=t.source;return this._textureViewHash[e.uid]??this._createTextureView(e)}_createTextureView(t){return this._textureViewHash[t.uid]=this.getGpuSource(t).createView(),this._textureViewHash[t.uid]}generateCanvas(t){const e=this._renderer,i=e.gpu.device.createCommandEncoder(),a=me.get().createCanvas();a.width=t.source.pixelWidth,a.height=t.source.pixelHeight;const o=a.getContext("webgpu");return o.configure({device:e.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:me.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),i.copyTextureToTexture({texture:e.texture.getGpuSource(t.source),origin:{x:0,y:0}},{texture:o.getCurrentTexture()},{width:a.width,height:a.height}),e.gpu.device.queue.submit([i.finish()]),a}getPixels(t){const e=this.generateCanvas(t),i=Ll.getOptimalCanvasAndContext(e.width,e.height),a=i.context;a.drawImage(e,0,0);const{width:o,height:h}=e,f=a.getImageData(0,0,o,h),m=new Uint8ClampedArray(f.data.buffer);return Ll.returnCanvasAndContext(i),{pixels:m,width:o,height:h}}destroy(){this.managedTextures.slice().forEach(t=>this.onSourceDestroy(t)),this.managedTextures=null;for(const t of Object.keys(this._bindGroupHash)){const e=Number(t),i=this._bindGroupHash[e];i==null||i.destroy(),this._bindGroupHash[e]=null}this._gpu=null,this._mipmapGenerator=null,this._gpuSources=null,this._bindGroupHash=null,this._textureViewHash=null,this._gpuSamplers=null}}t2.extension={type:[I.WebGPUSystem],name:"texture"};class e2{constructor(){this._maxTextures=0}contextChange(t){const e=new kn({uTransformMatrix:{value:new Gt,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}});this._maxTextures=t.limits.maxBatchableTextures;const i=Sh({name:"graphics",bits:[Fg,kg(this._maxTextures),OA,Th]});this.shader=new jr({gpuProgram:i,resources:{localUniforms:e}})}execute(t,e){const i=e.context,a=i.customShader||this.shader,o=t.renderer,h=o.graphicsContext,{batcher:f,instructions:m}=h.getContextRenderData(i),g=o.encoder;g.setGeometry(f.geometry,a.gpuProgram);const b=o.globalUniforms.bindGroup;g.setBindGroup(0,b,a.gpuProgram);const x=o.renderPipes.uniformBatch.getUniformBindGroup(a.resources.localUniforms,!0);g.setBindGroup(2,x,a.gpuProgram);const E=m.instructions;let T=null;for(let R=0;R<m.instructionSize;R++){const D=E[R];if(D.topology!==T&&(T=D.topology,g.setPipelineFromGeometryProgramAndState(f.geometry,a.gpuProgram,t.state,D.topology)),a.groups[1]=D.bindGroup,!D.gpuBindGroup){const C=D.textures;D.bindGroup=Lg(C.textures,C.count,this._maxTextures),D.gpuBindGroup=o.bindGroup.getBindGroup(D.bindGroup,a.gpuProgram,1)}g.setBindGroup(1,D.bindGroup,a.gpuProgram),g.renderPassEncoder.drawIndexed(D.size,1,D.start)}}destroy(){this.shader.destroy(!0),this.shader=null}}e2.extension={type:[I.WebGPUPipesAdaptor],name:"graphics"};class n2{init(){const t=Sh({name:"mesh",bits:[ph,GA,Th]});this._shader=new jr({gpuProgram:t,resources:{uTexture:At.EMPTY._source,uSampler:At.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new Gt}}}})}execute(t,e){const i=t.renderer;let a=e._shader;if(!a)a=this._shader,a.groups[2]=i.texture.getTextureBindGroup(e.texture);else if(!a.gpuProgram){kt("Mesh shader has no gpuProgram",e.shader);return}const o=a.gpuProgram;if(o.autoAssignGlobalUniforms&&(a.groups[0]=i.globalUniforms.bindGroup),o.autoAssignLocalUniforms){const h=t.localUniforms;a.groups[1]=i.renderPipes.uniformBatch.getUniformBindGroup(h,!0)}i.encoder.draw({geometry:e._geometry,shader:a,state:e.state})}destroy(){this._shader.destroy(!0),this._shader=null}}n2.extension={type:[I.WebGPUPipesAdaptor],name:"mesh"};const R5=[...Hv,qv,Xv,i0,Iv,Vv,t2,Wv,Qv,Zv,Kv,kv,Yv,Fv],M5=[...Lv,jv],D5=[Yb,n2,e2],ZC=[],JC=[],$C=[];Oe.handleByNamedList(I.WebGPUSystem,ZC);Oe.handleByNamedList(I.WebGPUPipes,JC);Oe.handleByNamedList(I.WebGPUPipesAdaptor,$C);Oe.add(...R5,...M5,...D5);class tB extends Nd{constructor(){const t={name:"webgpu",type:Cr.WEBGPU,systems:ZC,renderPipes:JC,renderPipeAdaptors:$C};super(t)}}const w5=Object.freeze(Object.defineProperty({__proto__:null,WebGPURenderer:tB},Symbol.toStringTag,{value:"Module"})),P1={POINTS:"point-list",LINES:"line-list",LINE_STRIP:"line-strip",TRIANGLES:"triangle-list",TRIANGLE_STRIP:"triangle-strip"},U5=new Proxy(P1,{get(n,t){return wt(Jt,`DRAW_MODES.${t} is deprecated, use '${P1[t]}' instead`),n[t]}});var _g=(n=>(n.CLAMP="clamp-to-edge",n.REPEAT="repeat",n.MIRRORED_REPEAT="mirror-repeat",n))(_g||{});const O5=new Proxy(_g,{get(n,t){return wt(Jt,`DRAW_MODES.${t} is deprecated, use '${_g[t]}' instead`),n[t]}});var yg=(n=>(n.NEAREST="nearest",n.LINEAR="linear",n))(yg||{});const G5=new Proxy(yg,{get(n,t){return wt(Jt,`DRAW_MODES.${t} is deprecated, use '${yg[t]}' instead`),n[t]}});class P5{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,i){const a=e.width,o=e.height;if(i){const h=t.width/2/a,f=t.height/2/o,m=t.x/a+h,g=t.y/o+f;i=pe.add(i,pe.NW),this.x0=m+h*pe.uX(i),this.y0=g+f*pe.uY(i),i=pe.add(i,2),this.x1=m+h*pe.uX(i),this.y1=g+f*pe.uY(i),i=pe.add(i,2),this.x2=m+h*pe.uX(i),this.y2=g+f*pe.uY(i),i=pe.add(i,2),this.x3=m+h*pe.uX(i),this.y3=g+f*pe.uY(i)}else this.x0=t.x/a,this.y0=t.y/o,this.x1=(t.x+t.width)/a,this.y1=t.y/o,this.x2=(t.x+t.width)/a,this.y2=(t.y+t.height)/o,this.x3=t.x/a,this.y3=(t.y+t.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[pixi.js/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}function N5(n){const t=n.toString(),e=t.indexOf("{"),i=t.lastIndexOf("}");if(e===-1||i===-1)throw new Error("getFunctionBody: No body found in function definition");return t.slice(e+1,i).trim()}function z5(n,t){return wt("8.7.0","Use container.getFastGlobalBounds() instead"),n.getFastGlobalBounds(!0,t)}class H5 extends Qs{constructor(t){typeof t=="function"&&(t={render:t});const{render:e,...i}=t;super({label:"RenderContainer",...i}),this.renderPipeId="customRender",this.batched=!1,e&&(this.render=e),this.containsPoint=t.containsPoint??(()=>!1),this.addBounds=t.addBounds??(()=>!1)}updateBounds(){this._bounds.clear(),this.addBounds(this._bounds)}render(t){}}function L5(n,t,e){wt("8.7.0","Please use container.collectRenderables instead.");const i=e.renderPipes?e:e.batch.renderer;return n.collectRenderables(t,i,null)}function F5(n,t){const e=t._scale,i=t._pivot,a=t._position,o=e._x,h=e._y,f=i._x,m=i._y;n.a=t._cx*o,n.b=t._sx*o,n.c=t._cy*h,n.d=t._sy*h,n.tx=a._x-(f*n.a+m*n.c),n.ty=a._y-(f*n.b+m*n.d)}function V5(n,t,e){const i=n.a,a=n.b,o=n.c,h=n.d,f=n.tx,m=n.ty,g=t.a,b=t.b,x=t.c,E=t.d;e.a=i*g+a*x,e.b=i*b+a*E,e.c=o*g+h*x,e.d=o*b+h*E,e.tx=f*g+m*x+t.tx,e.ty=f*b+m*E+t.ty}class eB{constructor(){this.batches=[],this.batched=!1}destroy(){this.batches.forEach(t=>{di.return(t)}),this.batches.length=0}}class nB{constructor(t,e){this.state=Ir.for2d(),this.renderer=t,this._adaptor=e,this.renderer.runners.contextChange.add(this)}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(t){const e=t.context,i=!!t._gpuData,a=this.renderer.graphicsContext.updateGpuContext(e);return!!(a.isBatchable||i!==a.isBatchable)}addRenderable(t,e){const i=this.renderer.graphicsContext.updateGpuContext(t.context);t.didViewUpdate&&this._rebuild(t),i.isBatchable?this._addToBatcher(t,e):(this.renderer.renderPipes.batch.break(e),e.add(t))}updateRenderable(t){const i=this._getGpuDataForRenderable(t).batches;for(let a=0;a<i.length;a++){const o=i[a];o._batcher.updateElement(o)}}execute(t){if(!t.isRenderable)return;const e=this.renderer,i=t.context;if(!e.graphicsContext.getGpuContext(i).batches.length)return;const o=i.customShader||this._adaptor.shader;this.state.blendMode=t.groupBlendMode;const h=o.resources.localUniforms.uniforms;h.uTransformMatrix=t.groupTransform,h.uRound=e._roundPixels|t._roundPixels,Bh(t.groupColorAlpha,h.uColor,0),this._adaptor.execute(this,t)}_rebuild(t){const e=this._getGpuDataForRenderable(t),i=this.renderer.graphicsContext.updateGpuContext(t.context);e.destroy(),i.isBatchable&&this._updateBatchesForRenderable(t,e)}_addToBatcher(t,e){const i=this.renderer.renderPipes.batch,a=this._getGpuDataForRenderable(t).batches;for(let o=0;o<a.length;o++){const h=a[o];i.addToBatch(h,e)}}_getGpuDataForRenderable(t){return t._gpuData[this.renderer.uid]||this._initGpuDataForRenderable(t)}_initGpuDataForRenderable(t){const e=new eB;return t._gpuData[this.renderer.uid]=e,e}_updateBatchesForRenderable(t,e){const i=t.context,a=this.renderer.graphicsContext.getGpuContext(i),o=this.renderer._roundPixels|t._roundPixels;e.batches=a.batches.map(h=>{const f=di.get(qg);return h.copyTo(f),f.renderable=t,f.roundPixels=o,f})}destroy(){this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null}}nB.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"graphics"};const iB=class rB extends Vn{constructor(t={}){t={...rB.defaultOptions,...t},super(),this.renderLayerChildren=[],this.sortableChildren=t.sortableChildren,this.sortFunction=t.sortFunction}attach(...t){for(let e=0;e<t.length;e++){const i=t[e];if(i.parentRenderLayer){if(i.parentRenderLayer===this)continue;i.parentRenderLayer.detach(i)}this.renderLayerChildren.push(i),i.parentRenderLayer=this;const a=this.renderGroup||this.parentRenderGroup;a&&(a.structureDidChange=!0)}return t[0]}detach(...t){for(let e=0;e<t.length;e++){const i=t[e],a=this.renderLayerChildren.indexOf(i);a!==-1&&this.renderLayerChildren.splice(a,1),i.parentRenderLayer=null;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0)}return t[0]}detachAll(){const t=this.renderLayerChildren;for(let e=0;e<t.length;e++)t[e].parentRenderLayer=null;this.renderLayerChildren.length=0}collectRenderables(t,e,i){const a=this.renderLayerChildren,o=a.length;this.sortableChildren&&this.sortRenderLayerChildren();for(let h=0;h<o;h++)a[h].parent||kt("Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)",a[h]),a[h].collectRenderables(t,e,this)}sortRenderLayerChildren(){this.renderLayerChildren.sort(this.sortFunction)}_getGlobalBoundsRecursive(t,e,i){if(!t)return;const a=this.renderLayerChildren;for(let o=0;o<a.length;o++)a[o]._getGlobalBoundsRecursive(!0,e,this)}};iB.defaultOptions={sortableChildren:!1,sortFunction:(n,t)=>n.zIndex-t.zIndex};let k5=iB;const X5=k5,aB=class sB extends tc{constructor(...t){super({});let e=t[0]??{};typeof e=="number"&&(wt(Jt,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),e={width:e,height:t[1],verticesX:t[2],verticesY:t[3]}),this.build(e)}build(t){t={...sB.defaultOptions,...t},this.verticesX=this.verticesX??t.verticesX,this.verticesY=this.verticesY??t.verticesY,this.width=this.width??t.width,this.height=this.height??t.height;const e=this.verticesX*this.verticesY,i=[],a=[],o=[],h=this.verticesX-1,f=this.verticesY-1,m=this.width/h,g=this.height/f;for(let x=0;x<e;x++){const E=x%this.verticesX,T=x/this.verticesX|0;i.push(E*m,T*g),a.push(E/h,T/f)}const b=h*f;for(let x=0;x<b;x++){const E=x%h,T=x/h|0,R=T*this.verticesX+E,D=T*this.verticesX+E+1,C=(T+1)*this.verticesX+E,G=(T+1)*this.verticesX+E+1;o.push(R,D,C,D,G,C)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(a),this.indexBuffer.data=new Uint32Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};aB.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};let r0=aB;function lB(n,t,e,i){const a=e.buffers[0],o=a.data,{verticesX:h,verticesY:f}=e,m=n/(h-1),g=t/(f-1);let b=0;const x=i[0],E=i[1],T=i[2],R=i[3],D=i[4],C=i[5],G=i[6],P=i[7],H=i[8];for(let q=0;q<o.length;q+=2){const et=b%h*m,ot=(b/h|0)*g,Y=x*et+E*ot+T,ht=R*et+D*ot+C,N=G*et+P*ot+H;o[q]=Y/N,o[q+1]=ht/N,b++}a.update()}function oB(n,t){const e=t[0],i=t[1],a=t[2],o=t[3],h=t[4],f=t[5],m=t[6],g=t[7],b=t[8];return n[0]=h*b-f*g,n[1]=a*g-i*b,n[2]=i*f-a*h,n[3]=f*m-o*b,n[4]=e*b-a*m,n[5]=a*o-e*f,n[6]=o*g-h*m,n[7]=i*m-e*g,n[8]=e*h-i*o,n}function uB(n,t,e){const i=t[0],a=t[1],o=t[2],h=t[3],f=t[4],m=t[5],g=t[6],b=t[7],x=t[8],E=e[0],T=e[1],R=e[2],D=e[3],C=e[4],G=e[5],P=e[6],H=e[7],q=e[8];return n[0]=E*i+T*h+R*g,n[1]=E*a+T*f+R*b,n[2]=E*o+T*m+R*x,n[3]=D*i+C*h+G*g,n[4]=D*a+C*f+G*b,n[5]=D*o+C*m+G*x,n[6]=P*i+H*h+q*g,n[7]=P*a+H*f+q*b,n[8]=P*o+H*m+q*x,n}function I5(n,t,e){const i=e[0],a=e[1],o=e[2];return n[0]=t[0]*i+t[1]*a+t[2]*o,n[1]=t[3]*i+t[4]*a+t[5]*o,n[2]=t[6]*i+t[7]*a+t[8]*o,n}const Y5=[0,0,0,0,0,0,0,0,0],q5=[0,0,0],Zm=[0,0,0];function N1(n,t,e,i,a,o,h,f,m){const g=Y5;g[0]=t,g[1]=i,g[2]=o,g[3]=e,g[4]=a,g[5]=h,g[6]=1,g[7]=1,g[8]=1;const b=oB(n,g);Zm[0]=f,Zm[1]=m,Zm[2]=1;const x=I5(q5,b,Zm),E=n;return n[0]=x[0],n[1]=0,n[2]=0,n[3]=0,n[4]=x[1],n[5]=0,n[6]=0,n[7]=0,n[8]=x[2],uB(n,E,g)}const j5=[0,0,0,0,0,0,0,0,0],K5=[0,0,0,0,0,0,0,0,0];function cB(n,t,e,i,a,o,h,f,m,g,b,x,E,T,R,D,C){const G=N1(j5,t,e,o,h,g,b,T,R),P=N1(K5,i,a,f,m,x,E,D,C);return uB(n,oB(G,G),P)}class hB extends r0{constructor(t){super(t),this._projectionMatrix=[0,0,0,0,0,0,0,0,0];const{width:e,height:i}=t;this.corners=[0,0,e,0,e,i,0,i]}setCorners(t,e,i,a,o,h,f,m){const g=this.corners;g[0]=t,g[1]=e,g[2]=i,g[3]=a,g[4]=o,g[5]=h,g[6]=f,g[7]=m,this.updateProjection()}updateProjection(){const{width:t,height:e}=this,i=this.corners,a=cB(this._projectionMatrix,0,0,i[0],i[1],t,0,i[2],i[3],t,e,i[4],i[5],0,e,i[6],i[7]);lB(t,e,this,a)}}const fB=class dB extends Ch{constructor(t){t={...dB.defaultOptions,...t};const{texture:e,verticesX:i,verticesY:a,...o}=t,h=new hB(ns({width:e.width,height:e.height,verticesX:i,verticesY:a}));super(ns({...o,geometry:h})),this._texture=e,this.geometry.setCorners(t.x0,t.y0,t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}textureUpdated(){const t=this.geometry;if(!t)return;const{width:e,height:i}=this.texture;(t.width!==e||t.height!==i)&&(t.width=e,t.height=i,t.updateProjection())}set texture(t){this._texture!==t&&(super.texture=t,this.textureUpdated())}get texture(){return this._texture}setCorners(t,e,i,a,o,h,f,m){this.geometry.setCorners(t,e,i,a,o,h,f,m)}};fB.defaultOptions={texture:At.WHITE,verticesX:10,verticesY:10,x0:0,y0:0,x1:100,y1:0,x2:100,y2:100,x3:0,y3:100};let W5=fB;class Q5 extends Ch{constructor(t){const{texture:e,verticesX:i,verticesY:a,...o}=t,h=new r0(ns({width:e.width,height:e.height,verticesX:i,verticesY:a}));super(ns({...o,geometry:h,texture:e})),this.texture=e,this.autoResize=!0}textureUpdated(){const t=this.geometry,{width:e,height:i}=this.texture;this.autoResize&&(t.width!==e||t.height!==i)&&(t.width=e,t.height=i,t.build({}))}set texture(t){var e;(e=this._texture)==null||e.off("update",this.textureUpdated,this),super.texture=t,t.on("update",this.textureUpdated,this),this.textureUpdated()}get texture(){return this._texture}destroy(t){this.texture.off("update",this.textureUpdated,this),super.destroy(t)}}const pB=class mB extends tc{constructor(t){const{width:e,points:i,textureScale:a}={...mB.defaultOptions,...t};super({positions:new Float32Array(i.length*4),uvs:new Float32Array(i.length*4),indices:new Uint32Array((i.length-1)*6)}),this.points=i,this._width=e,this.textureScale=a,this._build()}get width(){return this._width}_build(){const t=this.points;if(!t)return;const e=this.getBuffer("aPosition"),i=this.getBuffer("aUV"),a=this.getIndex();if(t.length<1)return;e.data.length/4!==t.length&&(e.data=new Float32Array(t.length*4),i.data=new Float32Array(t.length*4),a.data=new Uint16Array((t.length-1)*6));const o=i.data,h=a.data;o[0]=0,o[1]=0,o[2]=0,o[3]=1;let f=0,m=t[0];const g=this._width*this.textureScale,b=t.length;for(let E=0;E<b;E++){const T=E*4;if(this.textureScale>0){const R=m.x-t[E].x,D=m.y-t[E].y,C=Math.sqrt(R*R+D*D);m=t[E],f+=C/g}else f=E/(b-1);o[T]=f,o[T+1]=0,o[T+2]=f,o[T+3]=1}let x=0;for(let E=0;E<b-1;E++){const T=E*2;h[x++]=T,h[x++]=T+1,h[x++]=T+2,h[x++]=T+2,h[x++]=T+1,h[x++]=T+3}i.update(),a.update(),this.updateVertices()}updateVertices(){const t=this.points;if(t.length<1)return;let e=t[0],i,a=0,o=0;const h=this.buffers[0].data,f=t.length,m=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let g=0;g<f;g++){const b=t[g],x=g*4;g<t.length-1?i=t[g+1]:i=b,o=-(i.x-e.x),a=i.y-e.y;const E=Math.sqrt(a*a+o*o);E<1e-6?(a=0,o=0):(a/=E,o/=E,a*=m,o*=m),h[x]=b.x+a,h[x+1]=b.y+o,h[x+2]=b.x-a,h[x+3]=b.y-o,e=b}this.buffers[0].update()}update(){this.textureScale>0?this._build():this.updateVertices()}};pB.defaultOptions={width:200,points:[],textureScale:0};let gB=pB;const _B=class yB extends Ch{constructor(t){const{texture:e,points:i,textureScale:a,...o}={...yB.defaultOptions,...t},h=new gB(ns({width:e.height,points:i,textureScale:a}));a>0&&(e.source.style.addressMode="repeat"),super(ns({...o,texture:e,geometry:h})),this.autoUpdate=!0,this.onRender=this._render}_render(){const t=this.geometry;(this.autoUpdate||t._width!==this.texture.height)&&(t._width=this.texture.height,t.update())}};_B.defaultOptions={textureScale:0};let Z5=_B;class J5 extends Ch{constructor(t){const{texture:e,vertices:i,uvs:a,indices:o,topology:h,...f}=t,m=new tc(ns({positions:i,uvs:a,indices:o,topology:h}));super(ns({...f,texture:e,geometry:m})),this.autoUpdate=!0,this.onRender=this._render}get vertices(){return this.geometry.getBuffer("aPosition").data}set vertices(t){this.geometry.getBuffer("aPosition").data=t}_render(){this.autoUpdate&&this.geometry.getBuffer("aPosition").update()}}class a0{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._textureMatrixUpdateId=-1,this._uvUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(t){this._topology=t}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(t){this.texture!==t&&(this.texture=t,this._textureMatrixUpdateId=-1)}get uvs(){const e=this.geometry.getBuffer("aUV"),i=e.data;let a=i;const o=this.texture.textureMatrix;return o.isSimple||(a=this._transformedUvs,(this._textureMatrixUpdateId!==o._updateID||this._uvUpdateId!==e._updateID)&&((!a||a.length<i.length)&&(a=this._transformedUvs=new Float32Array(i.length)),this._textureMatrixUpdateId=o._updateID,this._uvUpdateId=e._updateID,o.multiplyUvs(i,a))),a}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}function $5(n,t){const{width:e,height:i}=n.frame;return t.scale(1/e,1/i),t}class Gy{destroy(){}}class bB{constructor(t,e){this.localUniforms=new kn({uTransformMatrix:{value:new Gt,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new Ks({0:this.localUniforms}),this.renderer=t,this._adaptor=e,this._adaptor.init()}validateRenderable(t){const e=this._getMeshData(t),i=e.batched,a=t.batched;if(e.batched=a,i!==a)return!0;if(a){const o=t._geometry;if(o.indices.length!==e.indexSize||o.positions.length!==e.vertexSize)return e.indexSize=o.indices.length,e.vertexSize=o.positions.length,!0;const h=this._getBatchableMesh(t);return h.texture.uid!==t._texture.uid&&(h._textureMatrixUpdateId=-1),!h._batcher.checkAndUpdateTexture(h,t._texture)}return!1}addRenderable(t,e){const i=this.renderer.renderPipes.batch,{batched:a}=this._getMeshData(t);if(a){const o=this._getBatchableMesh(t);o.setTexture(t._texture),o.geometry=t._geometry,i.addToBatch(o,e)}else i.break(e),e.add(t)}updateRenderable(t){if(t.batched){const e=this._getBatchableMesh(t);e.setTexture(t._texture),e.geometry=t._geometry,e._batcher.updateElement(e)}}execute(t){if(!t.isRenderable)return;t.state.blendMode=yh(t.groupBlendMode,t.texture._source);const e=this.localUniforms;e.uniforms.uTransformMatrix=t.groupTransform,e.uniforms.uRound=this.renderer._roundPixels|t._roundPixels,e.update(),Bh(t.groupColorAlpha,e.uniforms.uColor,0),this._adaptor.execute(this,t)}_getMeshData(t){var e,i;return(e=t._gpuData)[i=this.renderer.uid]||(e[i]=new Gy),t._gpuData[this.renderer.uid].meshData||this._initMeshData(t)}_initMeshData(t){var e,i;return t._gpuData[this.renderer.uid].meshData={batched:t.batched,indexSize:(e=t._geometry.indices)==null?void 0:e.length,vertexSize:(i=t._geometry.positions)==null?void 0:i.length},t._gpuData[this.renderer.uid].meshData}_getBatchableMesh(t){var e,i;return(e=t._gpuData)[i=this.renderer.uid]||(e[i]=new Gy),t._gpuData[this.renderer.uid].batchableMesh||this._initBatchableMesh(t)}_initBatchableMesh(t){const e=new a0;return e.renderable=t,e.setTexture(t._texture),e.transform=t.groupTransform,e.roundPixels=this.renderer._roundPixels|t._roundPixels,t._gpuData[this.renderer.uid].batchableMesh=e,e}destroy(){this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}}bB.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"mesh"};class vB{execute(t,e){const i=t.state,a=t.renderer,o=e.shader||t.defaultShader;o.resources.uTexture=e.texture._source,o.resources.uniforms=t.localUniforms;const h=a.gl,f=t.getBuffers(e);a.shader.bind(o),a.state.set(i),a.geometry.bind(f.geometry,o.glProgram);const g=f.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?h.UNSIGNED_SHORT:h.UNSIGNED_INT;h.drawElements(h.TRIANGLES,e.particleChildren.length*6,g,0)}}class xB{execute(t,e){const i=t.renderer,a=e.shader||t.defaultShader;a.groups[0]=i.renderPipes.uniformBatch.getUniformBindGroup(t.localUniforms,!0),a.groups[1]=i.texture.getTextureBindGroup(e.texture);const o=t.state,h=t.getBuffers(e);i.encoder.draw({geometry:h.geometry,shader:e.shader||t.defaultShader,state:o,size:e.particleChildren.length*6})}}function Py(n,t=null){const e=n*6;if(e>65535?t||(t=new Uint32Array(e)):t||(t=new Uint16Array(e)),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let i=0,a=0;i<e;i+=6,a+=4)t[i+0]=a+0,t[i+1]=a+1,t[i+2]=a+2,t[i+3]=a+0,t[i+4]=a+2,t[i+5]=a+3;return t}function SB(n){return{dynamicUpdate:z1(n,!0),staticUpdate:z1(n,!1)}}function z1(n,t){const e=[];e.push(`

        var index = 0;

        for (let i = 0; i < ps.length; ++i)
        {
            const p = ps[i];

            `);let i=0;for(const o in n){const h=n[o];if(t!==h.dynamic)continue;e.push(`offset = index + ${i}`),e.push(h.code);const f=Hl(h.format);i+=f.stride/4}e.push(`
            index += stride * 4;
        }
    `),e.unshift(`
        var stride = ${i};
    `);const a=e.join(`
`);return new Function("ps","f32v","u32v",a)}class EB{constructor(t){this._size=0,this._generateParticleUpdateCache={};const e=this._size=t.size??1e3,i=t.properties;let a=0,o=0;for(const b in i){const x=i[b],E=Hl(x.format);x.dynamic?o+=E.stride:a+=E.stride}this._dynamicStride=o/4,this._staticStride=a/4,this.staticAttributeBuffer=new qu(e*4*a),this.dynamicAttributeBuffer=new qu(e*4*o),this.indexBuffer=Py(e);const h=new Ju;let f=0,m=0;this._staticBuffer=new Ar({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:be.VERTEX|be.COPY_DST}),this._dynamicBuffer=new Ar({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:be.VERTEX|be.COPY_DST});for(const b in i){const x=i[b],E=Hl(x.format);x.dynamic?(h.addAttribute(x.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:f*4,format:x.format}),f+=E.size):(h.addAttribute(x.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:m*4,format:x.format}),m+=E.size)}h.addIndex(this.indexBuffer);const g=this.getParticleUpdate(i);this._dynamicUpload=g.dynamicUpdate,this._staticUpload=g.staticUpdate,this.geometry=h}getParticleUpdate(t){const e=tU(t);return this._generateParticleUpdateCache[e]?this._generateParticleUpdateCache[e]:(this._generateParticleUpdateCache[e]=this.generateParticleUpdate(t),this._generateParticleUpdateCache[e])}generateParticleUpdate(t){return SB(t)}update(t,e){t.length>this._size&&(e=!0,this._size=Math.max(t.length,this._size*1.5|0),this.staticAttributeBuffer=new qu(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new qu(this._size*this._dynamicStride*4*4),this.indexBuffer=Py(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));const i=this.dynamicAttributeBuffer;if(this._dynamicUpload(t,i.float32View,i.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,t.length*this._dynamicStride*4,!0),e){const a=this.staticAttributeBuffer;this._staticUpload(t,a.float32View,a.uint32View),this._staticBuffer.setDataWithSize(a.float32View,t.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}}function tU(n){const t=[];for(const e in n){const i=n[e];t.push(e,i.code,i.dynamic?"d":"s")}return t.join("_")}var TB=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
    vec4 color = texture2D(uTexture, vUV) * vColor;
    gl_FragColor = color;
}`,AB=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
    float cosRotation = cos(aRotation);
    float sinRotation = sin(aRotation);
    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

    vec2 v = vec2(x, y);
    v = v + aPosition;

    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    if(uRound == 1.0)
    {
        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
    }

    vUV = aUV;
    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`,Ny=`
struct ParticleUniforms {
  uProjectionMatrix:mat3x3<f32>,
  uColor:vec4<f32>,
  uResolution:vec2<f32>,
  uRoundPixels:f32,
};

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) color : vec4<f32>,
  };
@vertex
fn mainVertex(
  @location(0) aVertex: vec2<f32>,
  @location(1) aPosition: vec2<f32>,
  @location(2) aUV: vec2<f32>,
  @location(3) aColor: vec4<f32>,
  @location(4) aRotation: f32,
) -> VSOutput {
  
   let v = vec2(
       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
   ) + aPosition;

   let position = vec4((uniforms.uProjectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

  return VSOutput(
   position,
   aUV,
   vColor,
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) color: vec4<f32>,
  @builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

    var sample = textureSample(uTexture, uSampler, uv) * color;
   
    return sample;
}`;class CB extends jr{constructor(){const t=qr.from({vertex:AB,fragment:TB}),e=Mr.from({fragment:{source:Ny,entryPoint:"mainFragment"},vertex:{source:Ny,entryPoint:"mainVertex"}});super({glProgram:t,gpuProgram:e,resources:{uTexture:At.WHITE.source,uSampler:new ba({}),uniforms:{uTranslationMatrix:{value:new Gt,type:"mat3x3<f32>"},uColor:{value:new Ce(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}}class i2{constructor(t,e){this.state=Ir.for2d(),this.localUniforms=new kn({uTranslationMatrix:{value:new Gt,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=t,this.adaptor=e,this.defaultShader=new CB,this.state=Ir.for2d()}validateRenderable(t){return!1}addRenderable(t,e){this.renderer.renderPipes.batch.break(e),e.add(t)}getBuffers(t){return t._gpuData[this.renderer.uid]||this._initBuffer(t)}_initBuffer(t){return t._gpuData[this.renderer.uid]=new EB({size:t.particleChildren.length,properties:t._properties}),t._gpuData[this.renderer.uid]}updateRenderable(t){}execute(t){const e=t.particleChildren;if(e.length===0)return;const i=this.renderer,a=this.getBuffers(t);t.texture||(t.texture=e[0].texture);const o=this.state;a.update(e,t._childrenDirty),t._childrenDirty=!1,o.blendMode=yh(t.blendMode,t.texture._source);const h=this.localUniforms.uniforms,f=h.uTranslationMatrix;t.worldTransform.copyTo(f),f.prepend(i.globalUniforms.globalUniformData.projectionMatrix),h.uResolution=i.globalUniforms.globalUniformData.resolution,h.uRound=i._roundPixels|t._roundPixels,Bh(t.groupColorAlpha,h.uColor,0),this.adaptor.execute(this,t)}destroy(){this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}}class BB extends i2{constructor(t){super(t,new vB)}}BB.extension={type:[I.WebGLPipes],name:"particle"};class RB extends i2{constructor(t){super(t,new xB)}}RB.extension={type:[I.WebGPUPipes],name:"particle"};const MB=class zy{constructor(t){if(t instanceof At)this.texture=t,lg(this,zy.defaultOptions,{});else{const e={...zy.defaultOptions,...t};lg(this,e,{})}}get alpha(){return this._alpha}set alpha(t){this._alpha=Math.min(Math.max(t,0),1),this._updateColor()}get tint(){return sh(this._tint)}set tint(t){typeof t=="number"?this._tint=t:this._tint=Ce.shared.setValue(t??16777215).toBgrNumber(),this._updateColor()}_updateColor(){this.color=this._tint+((this._alpha*255|0)<<24)}};MB.defaultOptions={anchorX:0,anchorY:0,x:0,y:0,scaleX:1,scaleY:1,rotation:0,tint:16777215,alpha:1};let eU=MB;const Hy={vertex:{attributeName:"aVertex",format:"float32x2",code:`
            const texture = p.texture;
            const sx = p.scaleX;
            const sy = p.scaleY;
            const ax = p.anchorX;
            const ay = p.anchorY;
            const trim = texture.trim;
            const orig = texture.orig;

            if (trim)
            {
                w1 = trim.x - (ax * orig.width);
                w0 = w1 + trim.width;

                h1 = trim.y - (ay * orig.height);
                h0 = h1 + trim.height;
            }
            else
            {
                w1 = -ax * (orig.width);
                w0 = w1 + orig.width;

                h1 = -ay * (orig.height);
                h0 = h1 + orig.height;
            }

            f32v[offset] = w1 * sx;
            f32v[offset + 1] = h1 * sy;

            f32v[offset + stride] = w0 * sx;
            f32v[offset + stride + 1] = h1 * sy;

            f32v[offset + (stride * 2)] = w0 * sx;
            f32v[offset + (stride * 2) + 1] = h0 * sy;

            f32v[offset + (stride * 3)] = w1 * sx;
            f32v[offset + (stride * 3) + 1] = h0 * sy;
        `,dynamic:!1},position:{attributeName:"aPosition",format:"float32x2",code:`
            var x = p.x;
            var y = p.y;

            f32v[offset] = x;
            f32v[offset + 1] = y;

            f32v[offset + stride] = x;
            f32v[offset + stride + 1] = y;

            f32v[offset + (stride * 2)] = x;
            f32v[offset + (stride * 2) + 1] = y;

            f32v[offset + (stride * 3)] = x;
            f32v[offset + (stride * 3) + 1] = y;
        `,dynamic:!0},rotation:{attributeName:"aRotation",format:"float32",code:`
            var rotation = p.rotation;

            f32v[offset] = rotation;
            f32v[offset + stride] = rotation;
            f32v[offset + (stride * 2)] = rotation;
            f32v[offset + (stride * 3)] = rotation;
        `,dynamic:!1},uvs:{attributeName:"aUV",format:"float32x2",code:`
            var uvs = p.texture.uvs;

            f32v[offset] = uvs.x0;
            f32v[offset + 1] = uvs.y0;

            f32v[offset + stride] = uvs.x1;
            f32v[offset + stride + 1] = uvs.y1;

            f32v[offset + (stride * 2)] = uvs.x2;
            f32v[offset + (stride * 2) + 1] = uvs.y2;

            f32v[offset + (stride * 3)] = uvs.x3;
            f32v[offset + (stride * 3) + 1] = uvs.y3;
        `,dynamic:!1},color:{attributeName:"aColor",format:"unorm8x4",code:`
            const c = p.color;

            u32v[offset] = c;
            u32v[offset + stride] = c;
            u32v[offset + (stride * 2)] = c;
            u32v[offset + (stride * 3)] = c;
        `,dynamic:!1}},nU=new $n(0,0,0,0),DB=class Ly extends Qs{constructor(t={}){t={...Ly.defaultOptions,...t,dynamicProperties:{...Ly.defaultOptions.dynamicProperties,...t==null?void 0:t.dynamicProperties}};const{dynamicProperties:e,shader:i,roundPixels:a,texture:o,particles:h,...f}=t;super({label:"ParticleContainer",...f}),this.renderPipeId="particle",this.batched=!1,this._childrenDirty=!1,this.texture=o||null,this.shader=i,this._properties={};for(const m in Hy){const g=Hy[m],b=e[m];this._properties[m]={...g,dynamic:b}}this.allowChildren=!0,this.roundPixels=a??!1,this.particleChildren=h??[]}addParticle(...t){for(let e=0;e<t.length;e++)this.particleChildren.push(t[e]);return this.onViewUpdate(),t[0]}removeParticle(...t){let e=!1;for(let i=0;i<t.length;i++){const a=this.particleChildren.indexOf(t[i]);a>-1&&(this.particleChildren.splice(a,1),e=!0)}return e&&this.onViewUpdate(),t[0]}update(){this._childrenDirty=!0}onViewUpdate(){this._childrenDirty=!0,super.onViewUpdate()}get bounds(){return nU}updateBounds(){}destroy(t=!1){var i,a;if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const o=typeof t=="boolean"?t:t==null?void 0:t.textureSource,h=this.texture??((i=this.particleChildren[0])==null?void 0:i.texture);h&&h.destroy(o)}this.texture=null,(a=this.shader)==null||a.destroy()}removeParticles(t,e){t??(t=0),e??(e=this.particleChildren.length);const i=this.particleChildren.splice(t,e-t);return this.onViewUpdate(),i}removeParticleAt(t){const e=this.particleChildren.splice(t,1);return this.onViewUpdate(),e[0]}addParticleAt(t,e){return this.particleChildren.splice(e,0,t),this.onViewUpdate(),t}addChild(...t){throw new Error("ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()")}removeChild(...t){throw new Error("ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()")}removeChildren(t,e){throw new Error("ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()")}removeChildAt(t){throw new Error("ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()")}getChildAt(t){throw new Error("ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()")}setChildIndex(t,e){throw new Error("ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()")}getChildIndex(t){throw new Error("ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()")}addChildAt(t,e){throw new Error("ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()")}swapChildren(t,e){throw new Error("ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()")}reparentChild(...t){throw new Error("ParticleContainer.reparentChild() is not available with the particle container")}reparentChildAt(t,e){throw new Error("ParticleContainer.reparentChildAt() is not available with the particle container")}};DB.defaultOptions={dynamicProperties:{vertex:!1,position:!0,rotation:!1,uvs:!1,color:!1},roundPixels:!1};let iU=DB;const wB=class UB extends r0{constructor(t={}){t={...UB.defaultOptions,...t},super({width:t.width,height:t.height,verticesX:4,verticesY:4}),this.update(t)}update(t){var e,i;this.width=t.width??this.width,this.height=t.height??this.height,this._originalWidth=t.originalWidth??this._originalWidth,this._originalHeight=t.originalHeight??this._originalHeight,this._leftWidth=t.leftWidth??this._leftWidth,this._rightWidth=t.rightWidth??this._rightWidth,this._topHeight=t.topHeight??this._topHeight,this._bottomHeight=t.bottomHeight??this._bottomHeight,this._anchorX=(e=t.anchor)==null?void 0:e.x,this._anchorY=(i=t.anchor)==null?void 0:i.y,this.updateUvs(),this.updatePositions()}updatePositions(){const t=this.positions,{width:e,height:i,_leftWidth:a,_rightWidth:o,_topHeight:h,_bottomHeight:f,_anchorX:m,_anchorY:g}=this,b=a+o,x=e>b?1:e/b,E=h+f,T=i>E?1:i/E,R=Math.min(x,T),D=m*e,C=g*i;t[0]=t[8]=t[16]=t[24]=-D,t[2]=t[10]=t[18]=t[26]=a*R-D,t[4]=t[12]=t[20]=t[28]=e-o*R-D,t[6]=t[14]=t[22]=t[30]=e-D,t[1]=t[3]=t[5]=t[7]=-C,t[9]=t[11]=t[13]=t[15]=h*R-C,t[17]=t[19]=t[21]=t[23]=i-f*R-C,t[25]=t[27]=t[29]=t[31]=i-C,this.getBuffer("aPosition").update()}updateUvs(){const t=this.uvs;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1;const e=1/this._originalWidth,i=1/this._originalHeight;t[2]=t[10]=t[18]=t[26]=e*this._leftWidth,t[9]=t[11]=t[13]=t[15]=i*this._topHeight,t[4]=t[12]=t[20]=t[28]=1-e*this._rightWidth,t[17]=t[19]=t[21]=t[23]=1-i*this._bottomHeight,this.getBuffer("aUV").update()}};wB.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};let zo=wB;const OB=class GB extends Qs{constructor(t){var E,T,R,D;t instanceof At&&(t={texture:t});const{width:e,height:i,anchor:a,leftWidth:o,rightWidth:h,topHeight:f,bottomHeight:m,texture:g,roundPixels:b,...x}=t;super({label:"NineSliceSprite",...x}),this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=o??((E=g==null?void 0:g.defaultBorders)==null?void 0:E.left)??zo.defaultOptions.leftWidth,this._topHeight=f??((T=g==null?void 0:g.defaultBorders)==null?void 0:T.top)??zo.defaultOptions.topHeight,this._rightWidth=h??((R=g==null?void 0:g.defaultBorders)==null?void 0:R.right)??zo.defaultOptions.rightWidth,this._bottomHeight=m??((D=g==null?void 0:g.defaultBorders)==null?void 0:D.bottom)??zo.defaultOptions.bottomHeight,this._width=e??g.width??zo.defaultOptions.width,this._height=i??g.height??zo.defaultOptions.height,this.allowChildren=!1,this.texture=g??GB.defaultOptions.texture,this.roundPixels=b??!1,this._anchor=new Ln({_onUpdate:()=>{this.onViewUpdate()}}),a?this.anchor=a:this.texture.defaultAnchor&&(this.anchor=this.texture.defaultAnchor)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return this._width}set width(t){this._width=t,this.onViewUpdate()}get height(){return this._height}set height(t){this._height=t,this.onViewUpdate()}setSize(t,e){typeof t=="object"&&(e=t.height??t.width,t=t.width),this._width=t,this._height=e??t,this.onViewUpdate()}getSize(t){return t||(t={}),t.width=this._width,t.height=this._height,t}get leftWidth(){return this._leftWidth}set leftWidth(t){this._leftWidth=t,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(t){this._topHeight=t,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(t){this._rightWidth=t,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(t){this._bottomHeight=t,this.onViewUpdate()}get texture(){return this._texture}set texture(t){t||(t=At.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this.onViewUpdate())}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(t){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(i)}this._texture=null}updateBounds(){const t=this._bounds,e=this._anchor,i=this._width,a=this._height;t.minX=-e._x*i,t.maxX=t.minX+i,t.minY=-e._y*a,t.maxY=t.minY+a}};OB.defaultOptions={texture:At.EMPTY};let PB=OB;class rU extends PB{constructor(...t){let e=t[0];e instanceof At&&(wt(Jt,"NineSlicePlane now uses the options object {texture, leftWidth, rightWidth, topHeight, bottomHeight}"),e={texture:e,leftWidth:t[1],topHeight:t[2],rightWidth:t[3],bottomHeight:t[4]}),wt(Jt,"NineSlicePlane is deprecated. Use NineSliceSprite instead."),super(e)}}class NB extends a0{constructor(){super(),this.geometry=new zo}destroy(){this.geometry.destroy()}}class zB{constructor(t){this._renderer=t}addRenderable(t,e){const i=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,i),this._renderer.renderPipes.batch.addToBatch(i,e)}updateRenderable(t){const e=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,e),e._batcher.updateElement(e)}validateRenderable(t){const e=this._getGpuSprite(t);return!e._batcher.checkAndUpdateTexture(e,t._texture)}_updateBatchableSprite(t,e){e.geometry.update(t),e.setTexture(t._texture)}_getGpuSprite(t){return t._gpuData[this._renderer.uid]||this._initGPUSprite(t)}_initGPUSprite(t){const e=t._gpuData[this._renderer.uid]=new NB,i=e;return i.renderable=t,i.transform=t.groupTransform,i.texture=t._texture,i.roundPixels=this._renderer._roundPixels|t._roundPixels,t.didViewUpdate||this._updateBatchableSprite(t,i),e}destroy(){this._renderer=null}}zB.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"nineSliceSprite"};const HB={name:"tiling-bit",vertex:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`
            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
        `},fragment:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`

            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
            var unclamped = coord;
            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

            var bias = 0.;

            if(unclamped.x == coord.x && unclamped.y == coord.y)
            {
                bias = -32.;
            }

            outColor = textureSampleBias(uTexture, uSampler, coord, bias);
        `}},LB={name:"tiling-bit",vertex:{header:`
            uniform mat3 uTextureTransform;
            uniform vec4 uSizeAnchor;

        `,main:`
            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
        `},fragment:{header:`
            uniform sampler2D uTexture;
            uniform mat3 uMapCoord;
            uniform vec4 uClampFrame;
            uniform vec2 uClampOffset;
        `,main:`

        vec2 coord = vUV + ceil(uClampOffset - vUV);
        coord = (uMapCoord * vec3(coord, 1.0)).xy;
        vec2 unclamped = coord;
        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0

        `}};let D_,w_;class FB extends jr{constructor(){D_??(D_=Sh({name:"tiling-sprite-shader",bits:[ph,HB,Th]})),w_??(w_=Eh({name:"tiling-sprite-shader",bits:[$g,LB,Ah]}));const t=new kn({uMapCoord:{value:new Gt,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new Gt,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:w_,gpuProgram:D_,resources:{localUniforms:new kn({uTransformMatrix:{value:new Gt,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:t,uTexture:At.EMPTY.source,uSampler:At.EMPTY.source.style}})}updateUniforms(t,e,i,a,o,h){const f=this.resources.tilingUniforms,m=h.width,g=h.height,b=h.textureMatrix,x=f.uniforms.uTextureTransform;x.set(i.a*m/t,i.b*m/e,i.c*g/t,i.d*g/e,i.tx/t,i.ty/e),x.invert(),f.uniforms.uMapCoord=b.mapCoord,f.uniforms.uClampFrame=b.uClampFrame,f.uniforms.uClampOffset=b.uClampOffset,f.uniforms.uTextureTransform=x,f.uniforms.uSizeAnchor[0]=t,f.uniforms.uSizeAnchor[1]=e,f.uniforms.uSizeAnchor[2]=a,f.uniforms.uSizeAnchor[3]=o,h&&(this.resources.uTexture=h.source,this.resources.uSampler=h.source.style)}}class VB extends tc{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}}function kB(n,t){const e=n.anchor.x,i=n.anchor.y;t[0]=-e*n.width,t[1]=-i*n.height,t[2]=(1-e)*n.width,t[3]=-i*n.height,t[4]=(1-e)*n.width,t[5]=(1-i)*n.height,t[6]=-e*n.width,t[7]=(1-i)*n.height}function XB(n,t,e,i){let a=0;const o=n.length/(t||2),h=i.a,f=i.b,m=i.c,g=i.d,b=i.tx,x=i.ty;for(e*=t;a<o;){const E=n[e],T=n[e+1];n[e]=h*E+m*T+b,n[e+1]=f*E+g*T+x,e+=t,a++}}function IB(n,t){const e=n.texture,i=e.frame.width,a=e.frame.height;let o=0,h=0;n.applyAnchorToTexture&&(o=n.anchor.x,h=n.anchor.y),t[0]=t[6]=-o,t[2]=t[4]=1-o,t[1]=t[3]=-h,t[5]=t[7]=1-h;const f=Gt.shared;f.copyFrom(n._tileTransform.matrix),f.tx/=n.width,f.ty/=n.height,f.invert(),f.scale(n.width/i,n.height/a),XB(t,2,0,f)}const ag=new VB;class YB{constructor(){this.canBatch=!0,this.geometry=new tc({indices:ag.indices.slice(),positions:ag.positions.slice(),uvs:ag.uvs.slice()})}destroy(){var t;this.geometry.destroy(),(t=this.shader)==null||t.destroy()}}class qB{constructor(t){this._state=Ir.default2d,this._renderer=t}validateRenderable(t){const e=this._getTilingSpriteData(t),i=e.canBatch;this._updateCanBatch(t);const a=e.canBatch;if(a&&a===i){const{batchableMesh:o}=e;return!o._batcher.checkAndUpdateTexture(o,t.texture)}return i!==a}addRenderable(t,e){const i=this._renderer.renderPipes.batch;this._updateCanBatch(t);const a=this._getTilingSpriteData(t),{geometry:o,canBatch:h}=a;if(h){a.batchableMesh||(a.batchableMesh=new a0);const f=a.batchableMesh;t.didViewUpdate&&(this._updateBatchableMesh(t),f.geometry=o,f.renderable=t,f.transform=t.groupTransform,f.setTexture(t._texture)),f.roundPixels=this._renderer._roundPixels|t._roundPixels,i.addToBatch(f,e)}else i.break(e),a.shader||(a.shader=new FB),this.updateRenderable(t),e.add(t)}execute(t){const{shader:e}=this._getTilingSpriteData(t);e.groups[0]=this._renderer.globalUniforms.bindGroup;const i=e.resources.localUniforms.uniforms;i.uTransformMatrix=t.groupTransform,i.uRound=this._renderer._roundPixels|t._roundPixels,Bh(t.groupColorAlpha,i.uColor,0),this._state.blendMode=yh(t.groupBlendMode,t.texture._source),this._renderer.encoder.draw({geometry:ag,shader:e,state:this._state})}updateRenderable(t){const e=this._getTilingSpriteData(t),{canBatch:i}=e;if(i){const{batchableMesh:a}=e;t.didViewUpdate&&this._updateBatchableMesh(t),a._batcher.updateElement(a)}else if(t.didViewUpdate){const{shader:a}=e;a.updateUniforms(t.width,t.height,t._tileTransform.matrix,t.anchor.x,t.anchor.y,t.texture)}}_getTilingSpriteData(t){return t._gpuData[this._renderer.uid]||this._initTilingSpriteData(t)}_initTilingSpriteData(t){const e=new YB;return e.renderable=t,t._gpuData[this._renderer.uid]=e,e}_updateBatchableMesh(t){const e=this._getTilingSpriteData(t),{geometry:i}=e,a=t.texture.source.style;a.addressMode!=="repeat"&&(a.addressMode="repeat",a.update()),IB(t,i.uvs),kB(t,i.positions)}destroy(){this._renderer=null}_updateCanBatch(t){const e=this._getTilingSpriteData(t),i=t.texture;let a=!0;return this._renderer.type===Cr.WEBGL&&(a=this._renderer.context.supports.nonPowOf2wrapping),e.canBatch=i.textureMatrix.isSimple&&(a||i.source.isPowerOfTwo),e.canBatch}}qB.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"tilingSprite"};const jB={name:"local-uniform-msdf-bit",vertex:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32,
                uRound:f32,
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `},fragment:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
         `,main:`
            outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));
        `}},KB={name:"local-uniform-msdf-bit",vertex:{header:`
            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix *= uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `},fragment:{header:`
            uniform float uDistance;
         `,main:`
            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
        `}},WB={name:"msdf-bit",fragment:{header:`
            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {

                // MSDF
                var median = msdfColor.r + msdfColor.g + msdfColor.b -
                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                var screenPxDistance = distance * (median - 0.5);
                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
                var coverage: f32 = pow(shapeColor.a * alpha, gamma);

                return coverage;

            }
        `}},QB={name:"msdf-bit",fragment:{header:`
            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {

                // MSDF
                float median = msdfColor.r + msdfColor.g + msdfColor.b -
                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                float screenPxDistance = distance * (median - 0.5);
                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);

                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
                float gamma = mix(1.0, 1.0 / 2.2, luma);
                float coverage = pow(shapeColor.a * alpha, gamma);

                return coverage;
            }
        `}};let U_,O_;class ZB extends jr{constructor(t){const e=new kn({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new Gt,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}});U_??(U_=Sh({name:"sdf-shader",bits:[Fg,kg(t),jB,WB,Th]})),O_??(O_=Eh({name:"sdf-shader",bits:[Vg,Xg(t),KB,QB,Ah]})),super({glProgram:O_,gpuProgram:U_,resources:{localUniforms:e,batchSamplers:Ig(t)}})}}class JB extends Zu{destroy(){this.context.customShader&&this.context.customShader.destroy(),super.destroy()}}class $B{constructor(t){this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuBitmapText")}validateRenderable(t){const e=this._getGpuBitmapText(t);return t._didTextUpdate&&(t._didTextUpdate=!1,this._updateContext(t,e)),this._renderer.renderPipes.graphics.validateRenderable(e)}addRenderable(t,e){const i=this._getGpuBitmapText(t);H1(t,i),t._didTextUpdate&&(t._didTextUpdate=!1,this._updateContext(t,i)),this._renderer.renderPipes.graphics.addRenderable(i,e),i.context.customShader&&this._updateDistanceField(t)}updateRenderable(t){const e=this._getGpuBitmapText(t);H1(t,e),this._renderer.renderPipes.graphics.updateRenderable(e),e.context.customShader&&this._updateDistanceField(t)}_updateContext(t,e){const{context:i}=e,a=Ud.getFont(t.text,t._style);i.clear(),a.distanceField.type!=="none"&&(i.customShader||(i.customShader=new ZB(this._renderer.limits.maxBatchableTextures)));const o=ga.graphemeSegmenter(t.text),h=t._style;let f=a.baseLineOffset;const m=Db(o,h,a,!0);let g=0;const b=h.padding,x=m.scale;let E=m.width,T=m.height+m.offsetY;h._stroke&&(E+=h._stroke.width/x,T+=h._stroke.width/x),i.translate(-t._anchor._x*E-b,-t._anchor._y*T-b).scale(x,x);const R=a.applyFillAsTint?h._fill.color:16777215;for(let D=0;D<m.lines.length;D++){const C=m.lines[D];for(let G=0;G<C.charPositions.length;G++){const P=o[g++],H=a.chars[P];H!=null&&H.texture&&i.texture(H.texture,R||"black",Math.round(C.charPositions[G]+H.xOffset),Math.round(f+H.yOffset))}f+=a.lineHeight}}_getGpuBitmapText(t){return t._gpuData[this._renderer.uid]||this.initGpuText(t)}initGpuText(t){const e=new JB;return t._gpuData[this._renderer.uid]=e,this._updateContext(t,e),e}_updateDistanceField(t){const e=this._getGpuBitmapText(t).context,i=t._style.fontFamily,a=Qe.get(`${i}-bitmap`),{a:o,b:h,c:f,d:m}=t.groupTransform,g=Math.sqrt(o*o+h*h),b=Math.sqrt(f*f+m*m),x=(Math.abs(g)+Math.abs(b))/2,E=a.baseRenderedFontSize/t._style.fontSize,T=x*a.distanceField.range*(1/E);e.customShader.resources.localUniforms.uniforms.uDistance=T}destroy(){this._renderer=null}}$B.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"bitmapText"};function H1(n,t){t.groupTransform=n.groupTransform,t.groupColorAlpha=n.groupColorAlpha,t.groupColor=n.groupColor,t.groupBlendMode=n.groupBlendMode,t.globalDisplayStatus=n.globalDisplayStatus,t.groupTransform=n.groupTransform,t.localDisplayStatus=n.localDisplayStatus,t.groupAlpha=n.groupAlpha,t._roundPixels=n._roundPixels}class tR extends Id{constructor(t){super(),this.generatingTexture=!1,this._renderer=t,t.runners.resolutionChange.add(this)}resolutionChange(){const t=this.renderable;t._autoResolution&&t.onViewUpdate()}destroy(){this._renderer.htmlText.returnTexturePromise(this.texturePromise),this.texturePromise=null,this._renderer=null}}function bg(n,t){const{texture:e,bounds:i}=n;Jy(i,t._anchor,e);const a=t._style._getFinalPadding();i.minX-=a,i.minY-=a,i.maxX-=a,i.maxY-=a}class eR{constructor(t){this._renderer=t}validateRenderable(t){return t._didTextUpdate}addRenderable(t,e){const i=this._getGpuText(t);t._didTextUpdate&&(this._updateGpuText(t).catch(a=>{console.error(a)}),t._didTextUpdate=!1,bg(i,t)),this._renderer.renderPipes.batch.addToBatch(i,e)}updateRenderable(t){const e=this._getGpuText(t);e._batcher.updateElement(e)}async _updateGpuText(t){t._didTextUpdate=!1;const e=this._getGpuText(t);if(e.generatingTexture)return;e.texturePromise&&(this._renderer.htmlText.returnTexturePromise(e.texturePromise),e.texturePromise=null),e.generatingTexture=!0,t._resolution=t._autoResolution?this._renderer.resolution:t.resolution;const i=this._renderer.htmlText.getTexturePromise(t);e.texturePromise=i,e.texture=await i;const a=t.renderGroup||t.parentRenderGroup;a&&(a.structureDidChange=!0),e.generatingTexture=!1,bg(e,t)}_getGpuText(t){return t._gpuData[this._renderer.uid]||this.initGpuText(t)}initGpuText(t){const e=new tR(this._renderer);return e.renderable=t,e.transform=t.groupTransform,e.texture=At.EMPTY,e.bounds={minX:0,maxX:1,minY:0,maxY:0},e.roundPixels=this._renderer._roundPixels|t._roundPixels,t._resolution=t._autoResolution?this._renderer.resolution:t.resolution,t._gpuData[this._renderer.uid]=e,e}destroy(){this._renderer=null}}eR.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"htmlText"};function nR(){const{userAgent:n}=me.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(n)}const aU=new $n;function r2(n,t,e,i){const a=aU;a.minX=0,a.minY=0,a.maxX=n.width/i|0,a.maxY=n.height/i|0;const o=Fn.getOptimalTexture(a.width,a.height,i,!1);return o.source.uploadMethodId="image",o.source.resource=n,o.source.alphaMode="premultiply-alpha-on-upload",o.frame.width=t/i,o.frame.height=e/i,o.source.emit("update",o.source),o.updateUvs(),o}function iR(n,t){const e=t.fontFamily,i=[],a={},o=/font-family:([^;"\s]+)/g,h=n.match(o);function f(m){a[m]||(i.push(m),a[m]=!0)}if(Array.isArray(e))for(let m=0;m<e.length;m++)f(e[m]);else f(e);h&&h.forEach(m=>{const g=m.split(":")[1].trim();f(g)});for(const m in t.tagStyles){const g=t.tagStyles[m].fontFamily;f(g)}return i}async function rR(n){const e=await(await me.get().fetch(n)).blob(),i=new FileReader;return await new Promise((o,h)=>{i.onloadend=()=>o(i.result),i.onerror=h,i.readAsDataURL(e)})}async function Fy(n,t){const e=await rR(t);return`@font-face {
        font-family: "${n.fontFamily}";
        src: url('${e}');
        font-weight: ${n.fontWeight};
        font-style: ${n.fontStyle};
    }`}const od=new Map;async function aR(n,t,e){const i=n.filter(a=>Qe.has(`${a}-and-url`)).map((a,o)=>{if(!od.has(a)){const{url:h}=Qe.get(`${a}-and-url`);o===0?od.set(a,Fy({fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:a},h)):od.set(a,Fy({fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:a},h))}return od.get(a)});return(await Promise.all(i)).join(`
`)}function sR(n,t,e,i,a){const{domElement:o,styleElement:h,svgRoot:f}=a;o.innerHTML=`<style>${t.cssStyle}</style><div style='padding:0;'>${n}</div>`,o.setAttribute("style",`transform: scale(${e});transform-origin: top left; display: inline-block`),h.textContent=i;const{width:m,height:g}=a.image;return f.setAttribute("width",m.toString()),f.setAttribute("height",g.toString()),new XMLSerializer().serializeToString(f)}function lR(n,t){const e=Ll.getOptimalCanvasAndContext(n.width,n.height,t),{context:i}=e;return i.clearRect(0,0,n.width,n.height),i.drawImage(n,0,0),e}function oR(n,t,e){return new Promise(async i=>{e&&await new Promise(a=>setTimeout(a,100)),n.onload=()=>{i()},n.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(t)}`,n.crossOrigin="anonymous"})}class uR{constructor(t){this._renderer=t,this._createCanvas=t.type===Cr.WEBGPU}getTexture(t){return this.getTexturePromise(t)}getTexturePromise(t){return this._buildTexturePromise(t)}async _buildTexturePromise(t){const{text:e,style:i,resolution:a,textureStyle:o}=t,h=di.get(kb),f=iR(e,i),m=await aR(f,i,Xd.defaultTextStyle),g=Xb(e,i,m,h),b=Math.ceil(Math.ceil(Math.max(1,g.width)+i.padding*2)*a),x=Math.ceil(Math.ceil(Math.max(1,g.height)+i.padding*2)*a),E=h.image,T=2;E.width=(b|0)+T,E.height=(x|0)+T;const R=sR(e,i,a,m,h);await oR(E,R,nR()&&f.length>0);const D=E;let C;this._createCanvas&&(C=lR(E,a));const G=r2(C?C.canvas:D,E.width-T,E.height-T,a);return o&&(G.source.style=o),this._createCanvas&&(this._renderer.texture.initSource(G.source),Ll.returnCanvasAndContext(C)),di.return(h),G}returnTexturePromise(t){t.then(e=>{this._cleanUp(e)}).catch(()=>{kt("HTMLTextSystem: Failed to clean texture")})}_cleanUp(t){Fn.returnTexture(t,!0),t.source.resource=null,t.source.uploadMethodId="unknown"}destroy(){this._renderer=null}}uR.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"htmlText"};class cR extends Id{constructor(t){super(),this._renderer=t,t.runners.resolutionChange.add(this)}resolutionChange(){const t=this.renderable;t._autoResolution&&t.onViewUpdate()}destroy(){this._renderer.canvasText.returnTexture(this.texture),this._renderer=null}}class hR{constructor(t){this._renderer=t}validateRenderable(t){return t._didTextUpdate}addRenderable(t,e){const i=this._getGpuText(t);t._didTextUpdate&&(this._updateGpuText(t),t._didTextUpdate=!1),this._renderer.renderPipes.batch.addToBatch(i,e)}updateRenderable(t){const e=this._getGpuText(t);e._batcher.updateElement(e)}_updateGpuText(t){const e=this._getGpuText(t);e.texture&&this._renderer.canvasText.returnTexture(e.texture),t._resolution=t._autoResolution?this._renderer.resolution:t.resolution,e.texture=e.texture=this._renderer.canvasText.getTexture(t),bg(e,t)}_getGpuText(t){return t._gpuData[this._renderer.uid]||this.initGpuText(t)}initGpuText(t){const e=new cR(this._renderer);return e.renderable=t,e.transform=t.groupTransform,e.bounds={minX:0,maxX:1,minY:0,maxY:0},e.roundPixels=this._renderer._roundPixels|t._roundPixels,t._gpuData[this._renderer.uid]=e,e}destroy(){this._renderer=null}}hR.extension={type:[I.WebGLPipes,I.WebGPUPipes,I.CanvasPipes],name:"text"};class fR{constructor(t){this._renderer=t}getTexture(t,e,i,a){typeof t=="string"&&(wt("8.0.0","CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments"),t={text:t,style:i,resolution:e}),t.style instanceof Br||(t.style=new Br(t.style)),t.textureStyle instanceof ba||(t.textureStyle=new ba(t.textureStyle)),typeof t.text!="string"&&(t.text=t.text.toString());const{text:o,style:h,textureStyle:f}=t,m=t.resolution??this._renderer.resolution,{frame:g,canvasAndContext:b}=dh.getCanvasAndContext({text:o,style:h,resolution:m}),x=r2(b.canvas,g.width,g.height,m);if(f&&(x.source.style=f),h.trim&&(g.pad(h.padding),x.frame.copyFrom(g),x.updateUvs()),h.filters){const E=this._applyFilters(x,h.filters);return this.returnTexture(x),dh.returnCanvasAndContext(b),E}return this._renderer.texture.initSource(x._source),dh.returnCanvasAndContext(b),x}returnTexture(t){const e=t.source;e.resource=null,e.uploadMethodId="unknown",e.alphaMode="no-premultiply-alpha",Fn.returnTexture(t,!0)}renderTextToCanvas(){wt("8.10.0","CanvasTextSystem.renderTextToCanvas: no longer supported, use CanvasTextSystem.getTexture instead")}_applyFilters(t,e){const i=this._renderer.renderTarget.renderTarget,a=this._renderer.filter.generateFilteredTexture({texture:t,filters:e});return this._renderer.renderTarget.bind(i,!1),a}destroy(){this._renderer=null}}fR.extension={type:[I.WebGLSystem,I.WebGPUSystem,I.CanvasSystem],name:"canvasText"};async function sU(n,t,e=200){const i=await t.extract.base64(n);await t.encoder.commandFinished;const a=e;console.log(`logging texture ${n.source.width}px ${n.source.height}px`);const o=["font-size: 1px;",`padding: ${a}px 300px;`,`background: url(${i}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",o)}const lU=["#000080","#228B22","#8B0000","#4169E1","#008080","#800000","#9400D3","#FF8C00","#556B2F","#8B008B"];let oU=0;function dR(n,t=0,e={color:"#000000"}){n.renderGroup&&(e.color=lU[oU++]);let i="";for(let h=0;h<t;h++)i+="    ";let a=n.label;!a&&n instanceof Ri&&(a=`sprite:${n.texture.label}`);let o=`%c ${i}|- ${a} (worldX:${n.worldTransform.tx}, relativeRenderX:${n.relativeGroupTransform.tx}, renderX:${n.groupTransform.tx}, localX:${n.x})`;n.renderGroup&&(o+=" (RenderGroup)"),n.filters&&(o+="(*filters)"),console.log(o,`color:${e.color}; font-weight:bold;`),t++;for(let h=0;h<n.children.length;h++){const f=n.children[h];dR(f,t,{...e})}}function pR(n,t=0,e={index:0,color:"#000000"}){let i="";for(let o=0;o<t;o++)i+="    ";const a=`%c ${i}- ${e.index}: ${n.root.label} worldX:${n.worldTransform.tx}`;console.log(a,`color:${e.color}; font-weight:bold;`),t++;for(let o=0;o<n.renderGroupChildren.length;o++){const h=n.renderGroupChildren[o];pR(h,t,{...e,index:o})}}Oe.add(hS,fS);const uU=Object.freeze(Object.defineProperty({__proto__:null,AbstractBitmapFont:gb,AbstractRenderer:Nd,AbstractText:Zg,AccessibilitySystem:wD,AlphaFilter:M8,AlphaMask:ib,AlphaMaskPipe:Kb,AnimatedSprite:Gd,Application:Pg,ApplicationInitHook:pb,Assets:ya,AssetsClass:CT,BLEND_TO_NPM:iE,BUFFER_TYPE:_d,BackgroundLoader:rT,BackgroundSystem:AC,Batch:sE,BatchGeometry:fE,BatchTextureArray:aE,BatchableGraphics:qg,BatchableHTMLText:tR,BatchableMesh:a0,BatchableSprite:Id,BatchableText:cR,Batcher:cE,BatcherPipe:jb,BigPool:di,BindGroup:Ks,BindGroupSystem:Fv,BitmapFont:wb,BitmapFontManager:Ud,BitmapText:AA,BitmapTextGraphics:JB,BitmapTextPipe:$B,BlendModeFilter:Gn,BlendModePipe:Dv,BlurFilter:nA,BlurFilterPass:ng,Bounds:$n,BrowserAdapter:IS,Buffer:Ar,BufferImageSource:Ag,BufferResource:t0,BufferUsage:be,CLEAR:Er,Cache:Qe,CanvasPool:Ll,CanvasPoolClass:JE,CanvasSource:js,CanvasTextGenerator:dh,CanvasTextMetrics:ga,CanvasTextPipe:hR,CanvasTextSystem:fR,Circle:Ng,Color:Ce,ColorBlend:E3,ColorBurnBlend:T3,ColorDodgeBlend:A3,ColorMask:rb,ColorMaskPipe:Wb,ColorMatrixFilter:U8,CompressedSource:Vd,Container:Vn,Culler:FT,CullerPlugin:VT,CustomRenderPipe:Ev,D3D10_RESOURCE_DIMENSION:zb,D3DFMT:xr,DATA_URI:e4,DDS:Wt,DEG_TO_RAD:mS,DEPRECATED_SCALE_MODES:yg,DEPRECATED_WRAP_MODES:_g,DOMAdapter:me,DOMContainer:g8,DOMPipe:kT,DRAW_MODES:U5,DXGI_FORMAT:Nb,DXGI_TO_TEXTURE_FORMAT:Sr,DarkenBlend:C3,DefaultBatcher:Yg,DefaultShader:TE,DifferenceBlend:B3,DisplacementFilter:O8,DivideBlend:R3,DynamicBitmapFont:py,Ellipse:zg,EventBoundary:IT,EventEmitter:Rr,EventSystem:YT,EventsTicker:Pl,ExclusionBlend:M3,ExtensionType:I,ExtractSystem:BC,FOURCC_TO_TEXTURE_FORMAT:xy,FederatedContainer:R8,FederatedEvent:xh,FederatedMouseEvent:Od,FederatedPointerEvent:pa,FederatedWheelEvent:Qu,FillGradient:Ws,FillPattern:Ld,Filter:Ii,FilterEffect:xd,FilterPipe:uA,FilterSystem:hA,FontStylePromiseCache:od,GAUSSIAN_VALUES:Lb,GL_FORMATS:dg,GL_INTERNAL_FORMAT:OT,GL_TARGETS:tv,GL_TYPES:Ae,GL_WRAP_MODES:LA,GenerateTextureSystem:Uv,Geometry:Ju,GlBackBufferSystem:kA,GlBatchAdaptor:Ib,GlBuffer:NA,GlBufferSystem:Zb,GlColorMaskSystem:iv,GlContextSystem:HA,GlEncoderSystem:rv,GlGeometrySystem:ev,GlGraphicsAdaptor:xv,GlLimitsSystem:av,GlMeshAdaptor:Sv,GlParticleContainerAdaptor:vB,GlParticleContainerPipe:BB,GlProgram:qr,GlProgramData:tC,GlRenderTarget:XA,GlRenderTargetAdaptor:KA,GlRenderTargetSystem:pv,GlShaderSystem:_v,GlStateSystem:fC,GlStencilSystem:sv,GlTexture:dC,GlTextureSystem:vv,GlUboSystem:hv,GlUniformGroupSystem:yv,GlobalUniformSystem:Ov,GpuBatchAdaptor:Yb,GpuBlendModesToPixi:nr,GpuBufferSystem:Vv,GpuColorMaskSystem:kv,GpuDeviceSystem:i0,GpuEncoderSystem:Xv,GpuGraphicsAdaptor:e2,GpuGraphicsContext:LE,GpuLimitsSystem:Iv,GpuMeshAdapter:n2,GpuMipmapGenerator:QC,GpuParticleContainerAdaptor:xB,GpuParticleContainerPipe:RB,GpuProgram:Mr,GpuRenderTarget:YC,GpuRenderTargetAdaptor:qC,GpuRenderTargetSystem:Wv,GpuShaderSystem:Qv,GpuStateSystem:Zv,GpuStencilModesToPixi:Vl,GpuStencilSystem:Yv,GpuTextureSystem:t2,GpuUboSystem:qv,GpuUniformBatchPipe:jv,Graphics:Zu,GraphicsContext:er,GraphicsContextRenderData:FE,GraphicsContextSystem:Tb,GraphicsGpuData:eB,GraphicsPath:Wu,GraphicsPipe:nB,HTMLText:MA,HTMLTextPipe:eR,HTMLTextRenderData:kb,HTMLTextStyle:Xd,HTMLTextSystem:uR,HardLightBlend:D3,HardMixBlend:w3,HelloSystem:n0,IGLUniformData:Z8,ImageSource:Vo,InstructionSet:nb,KTX:Un,LightenBlend:U3,LinearBurnBlend:O3,LinearDodgeBlend:G3,LinearLightBlend:P3,Loader:fT,LoaderParserPriority:Yr,LuminosityBlend:N3,MaskEffectManager:sg,MaskEffectManagerClass:DS,MaskFilter:pA,Matrix:Gt,Mesh:Ch,MeshGeometry:tc,MeshGpuData:Gy,MeshPipe:bB,MeshPlane:Q5,MeshRope:Z5,MeshSimple:J5,NOOP:Qy,NegationBlend:z3,NineSliceGeometry:zo,NineSlicePlane:rU,NineSliceSprite:PB,NineSliceSpriteGpuData:NB,NineSliceSpritePipe:zB,NoiseFilter:G8,ObservablePoint:Ln,OverlayBlend:H3,PI_2:dS,Particle:eU,ParticleBuffer:EB,ParticleContainer:iU,ParticleContainerPipe:i2,ParticleShader:CB,PerspectiveMesh:W5,PerspectivePlaneGeometry:hB,PinLightBlend:L3,PipelineSystem:Kv,PlaneGeometry:r0,Point:Xe,Polygon:oh,Pool:Cg,PoolGroupClass:CS,PrepareBase:_A,PrepareQueue:TA,PrepareSystem:wA,PrepareUpload:DA,QuadGeometry:VB,RAD_TO_DEG:pS,Rectangle:Ue,RenderContainer:H5,RenderGroup:kS,RenderGroupPipe:Tv,RenderGroupSystem:Bv,RenderLayer:X5,RenderTarget:pg,RenderTargetSystem:dv,RenderTexture:e0,RenderableGCSystem:UC,RendererInitHook:mb,RendererType:Cr,ResizePlugin:$3,Resolver:Xo,RopeGeometry:gB,RoundedRectangle:Hg,SCALE_MODES:G5,STENCIL_MODES:On,SVGParser:KE,SaturationBlend:F3,SchedulerSystem:Gv,ScissorMask:q8,SdfShader:ZB,Shader:jr,ShaderStage:rh,ShapePath:qE,SharedRenderPipes:Lv,SharedSystems:Hv,SoftLightBlend:V3,Sprite:Ri,SpritePipe:Rv,Spritesheet:K_,State:Ir,StencilMask:ab,StencilMaskPipe:Qb,SubtractBlend:k3,SystemRunner:db,TEXTURE_FORMAT_BLOCK_SIZE:wT,Text:Vb,TextStyle:Br,Texture:At,TextureGCSystem:GC,TextureMatrix:Zy,TexturePool:Fn,TexturePoolClass:VS,TextureSource:Sn,TextureStyle:ba,TextureUvs:P5,Ticker:Bi,TickerListener:$m,TickerPlugin:tE,TilingSprite:SA,TilingSpriteGpuData:YB,TilingSpritePipe:qB,TilingSpriteShader:FB,Transform:vA,Triangle:Fb,UNIFORM_TO_ARRAY_SETTERS:oC,UNIFORM_TO_SINGLE_SETTERS:lC,UNIFORM_TYPES_MAP:p3,UNIFORM_TYPES_VALUES:cb,UPDATE_BLEND:Mg,UPDATE_COLOR:Ed,UPDATE_PRIORITY:zl,UPDATE_TRANSFORM:mD,UPDATE_VISIBLE:lh,UboBatch:VC,UboSystem:lv,UniformGroup:kn,VERSION:Rd,VideoSource:pd,ViewContainer:Qs,ViewSystem:NC,ViewableBuffer:qu,VividLightBlend:X3,WGSL_ALIGN_SIZE_DATA:bd,WGSL_TO_STD40_SIZE:ov,WRAP_MODES:O5,WebGLRenderer:FC,WebGPURenderer:tB,WebWorkerAdapter:S8,WorkerManager:yy,accessibilityTarget:UD,addBits:ry,addMaskBounds:Dg,addMaskLocalBounds:wg,addProgramDefines:r3,alphaFrag:qT,alphaWgsl:Ty,applyMatrix:XB,applyProjectiveTransformationToPlane:lB,applyStyleParams:Oy,assignWithIgnore:lg,autoDetectEnvironment:zD,autoDetectRenderer:Z3,autoDetectSource:yD,basisTranscoderUrls:cg,bgr2rgb:sh,bitmapFontCachePlugin:nT,bitmapFontTextParser:eg,bitmapFontXMLParser:my,bitmapFontXMLStringParser:gy,blendTemplateFrag:v3,blendTemplateVert:x3,blendTemplateWgsl:S3,blockDataMap:Jv,blurTemplateWgsl:JT,boundsPool:qs,browserExt:hS,buildAdaptiveBezier:Ab,buildAdaptiveQuadratic:VE,buildArc:Cb,buildArcTo:kE,buildArcToSvg:XE,buildCircle:bh,buildContextBatches:HE,buildEllipse:ME,buildLine:UE,buildPixelLine:OE,buildPolygon:GE,buildRectangle:PE,buildRoundedRectangle:DE,buildSimpleUvs:RE,buildTriangle:NE,buildUvs:BE,cacheAsTextureMixin:BS,cacheTextureArray:aT,calculateProjection:WA,checkChildrenDidChange:eb,checkDataUrl:$u,checkExtension:va,checkMaxIfStatementsInShader:yb,childrenHelperMixin:RS,cleanArray:DC,cleanHash:MC,clearList:gg,closePointEps:xb,collectAllRenderables:L5,collectRenderablesMixin:MS,color32BitToUniform:Bh,colorBit:Fg,colorBitGl:Vg,colorMatrixFilterFrag:iA,colorMatrixFilterWgsl:Ay,colorToUniform:_5,compareModeToGlCompare:yC,compileHighShader:pE,compileHighShaderGl:mE,compileHighShaderGlProgram:Eh,compileHighShaderGpuProgram:Sh,compileHooks:ay,compileInputs:sy,compileOutputs:dE,compileShader:Dy,compute2DProjection:cB,convertFormatIfRequired:a8,convertToList:ma,copySearchParams:og,createIdFromString:gh,createIndicesForQuads:Py,createLevelBuffers:ww,createLevelBuffersFromKTX:s8,createStringVariations:QS,createTexture:Io,createUboElementsSTD40:IA,createUboElementsWGSL:kC,createUboSyncFunction:uv,createUboSyncFunctionSTD40:jA,createUboSyncFunctionWGSL:IC,crossOrigin:xT,cullingMixin:AS,curveEps:oy,defaultFilterVert:Qg,defaultValue:mv,definedProps:ns,deprecation:wt,detectAvif:sT,detectBasis:Cw,detectCompressed:d8,detectDefaults:lT,detectMp4:oT,detectOgv:uT,detectVideoAlphaMode:sb,detectWebm:cT,detectWebp:hT,determineCrossOrigin:ET,displacementFrag:rA,displacementVert:aA,displacementWgsl:Cy,earcut:K3,effectsMixin:wS,ensureAttributes:$b,ensureIsBuffer:bb,ensurePrecision:a3,ensureTextOptions:Jg,executeInstructions:mg,extensions:Oe,extractAttributesFromGlProgram:nC,extractAttributesFromGpuProgram:c3,extractFontFamilies:iR,extractStructAndGroups:tg,extractSvgUrlId:fy,fastCopy:ug,findMixin:US,fontStringFromTextStyle:Md,formatShader:X8,fragmentGPUTemplate:bE,fragmentGlTemplate:xE,generateArraySyncSTD40:qA,generateArraySyncWGSL:XC,generateBlurFragSource:WT,generateBlurGlProgram:ZT,generateBlurProgram:$T,generateBlurVertSource:QT,generateGPULayout:V8,generateGpuLayoutGroups:h3,generateLayout:k8,generateLayoutHash:f3,generateParticleUpdateFunction:SB,generateProgram:sC,generateShaderSyncCode:$A,generateTextStyleKey:QE,generateTextureBatchBit:kg,generateTextureBatchBitGl:Xg,generateTextureMatrix:zE,generateUniformsSync:uC,getAdjustedBlendModeBlend:yh,getAttributeInfoFromFormat:Hl,getBatchSamplersUniformGroup:Ig,getBitmapTextLayout:Db,getCanvasBoundingBox:EA,getCanvasFillStyle:wd,getCanvasTexture:fv,getDefaultUniformValue:m3,getFastGlobalBounds:z5,getFastGlobalBoundsMixin:OS,getFontCss:aR,getFontFamilyName:mT,getGeometryBounds:hE,getGlTypeFromFormat:FA,getGlobalBounds:Pd,getGlobalMixin:PS,getGlobalRenderableBounds:cA,getLocalBounds:Rg,getMaxFragmentPrecision:i3,getMaxTexturesPerBatch:rE,getOrientationOfPoints:wE,getPo2TextureFromSource:r2,getResolutionOfUrl:Kg,getSVGUrl:sR,getSupportedCompressedTextureFormats:Pb,getSupportedGPUCompressedTextureFormats:vy,getSupportedGlCompressedTextureFormats:by,getSupportedTextureFormats:kd,getTemporaryCanvasFromImage:lR,getTestContext:ub,getTextureBatchBindGroup:Lg,getTextureDefaultMatrix:$5,getTextureFormatFromKTXTexture:u8,getUboData:iC,getUniformData:rC,getUrlExtension:ZS,glFormatToGPUFormat:HT,glUploadBufferImageResource:pC,glUploadCompressedTextureResource:mC,glUploadImageResource:bv,glUploadVideoResource:gC,globalUniformsBit:SE,globalUniformsBitGl:EE,globalUniformsUBOBitGl:v4,gpuFormatToBasisTranscoderFormat:Ow,gpuFormatToKTXBasisTranscoderFormat:h8,gpuUploadBufferImageResource:jC,gpuUploadCompressedTextureResource:KC,gpuUploadImageResource:$v,gpuUploadVideoResource:WC,groupD8:pe,hasCachedCanvasTexture:Q8,hslWgsl:z8,hslgl:Og,hslgpu:Gg,injectBits:ly,insertVersion:s3,isMobile:e3,isPow2:I_,isRenderingToScreen:QA,isSafari:nR,isSingleItem:Td,isWebGLSupported:zd,isWebGPUSupported:Hd,ktxTranscoderUrls:hg,loadBasis:Dw,loadBasisOnWorker:DT,loadBitmapFont:iT,loadDDS:Fw,loadEnvironmentExtensions:hb,loadFontAsBase64:rR,loadFontCSS:Fy,loadImageBitmap:bT,loadJson:dT,loadKTX:t8,loadKTX2:r8,loadKTX2onWorker:zT,loadSVGImage:oR,loadSvg:_T,loadTextures:Ob,loadTxt:pT,loadVideoTextures:TT,loadWebFont:gT,localUniformBit:ph,localUniformBitGl:$g,localUniformBitGroup2:OA,localUniformMSDFBit:jB,localUniformMSDFBitGl:KB,log2:tD,logDebugTexture:sU,logProgramError:aC,logRenderGroupScene:pR,logScene:dR,mSDFBit:WB,mSDFBitGl:QB,mapFormatToGlFormat:bC,mapFormatToGlInternalFormat:vC,mapFormatToGlType:xC,mapGlToVertexFormat:eC,mapSize:e5,mapType:gv,mapWebGLBlendModesToPixi:cC,maskFrag:fA,maskVert:dA,maskWgsl:Ry,matrixPool:Xi,measureHtmlText:Xb,measureMixin:zS,migrateFragmentFromV7toV8:$8,mipmapScaleModeToGlFilter:_C,multiplyColors:Sd,multiplyHexColors:tb,nextPow2:ju,noiseFrag:sA,noiseWgsl:By,nonCompressedFormats:BT,normalizeExtensionPriority:rd,onRenderMixin:HS,parseDDS:UT,parseFunctionBody:N5,parseKTX:GT,parseSVGDefinitions:jE,parseSVGFloatAttribute:vn,parseSVGPath:eE,parseSVGStyle:Bb,particleData:Hy,particlesFrag:TB,particlesVert:AB,particlesWgsl:Ny,path:Tr,pointInTriangle:My,preloadVideo:ST,removeItems:$y,removeStructAndGroupDuplicates:d3,resetUids:$M,resolveCharacters:eT,resolveCompressedTextureUrl:f8,resolveJsonUrl:AT,resolveTextureUrl:Gb,resourceToTexture:jS,roundPixelsBit:Th,roundPixelsBitGl:Ah,roundedShapeArc:IE,roundedShapeQuadraticCurve:YE,sayHello:RC,scaleModeToGlFilter:Uy,setBasisTranscoderPath:Rw,setKTXTranscoderPath:n8,setPositions:kB,setProgramName:l3,setUvs:IB,shapeBuilders:Fd,sortMixin:LS,spritesheetAsset:t3,squaredDistanceToLineSegment:md,stripVersion:o3,styleAttributes:dy,testImageFormat:Ub,testVideoFormat:jg,textStyleToCSS:CA,textureBit:GA,textureBitGl:PA,textureFrom:KS,tilingBit:HB,tilingBitGl:LB,toFillStyle:Lo,toLocalGlobalMixin:FS,toStrokeStyle:Dd,transformVertices:vb,triangulateWithHoles:Sb,uboSyncFunctionsSTD40:cv,uboSyncFunctionsWGSL:YA,uid:rn,uniformParsers:Fo,unpremultiplyAlpha:u5,unsafeEvalSupported:fb,updateLocalTransform:F5,updateQuadBounds:Jy,updateRenderGroupTransform:SC,updateRenderGroupTransforms:Av,updateTextBounds:bg,updateTransformAndChildren:Cv,updateTransformBackwards:Bg,updateWorldTransform:V5,v8_0_0:Jt,v8_3_4:_S,validFormats:fg,validateRenderables:EC,vertexGPUTemplate:yE,vertexGlTemplate:vE,vkFormatToGPUFormat:LT,warn:kt,webworkerExt:fS,wrapModeToGlAddress:rg},Symbol.toStringTag,{value:"Module"}));function cU(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var mR={exports:{}},Ol={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L1;function hU(){return L1||(L1=1,Ol.ConcurrentRoot=1,Ol.ContinuousEventPriority=8,Ol.DefaultEventPriority=32,Ol.DiscreteEventPriority=2,Ol.IdleEventPriority=268435456,Ol.LegacyRoot=0,Ol.NoEventPriority=0),Ol}mR.exports=hU();var ah=mR.exports;const a2=Ht.createContext({}),fU=a2.Provider;a2.Consumer;function gR(n,t){const e=Object.getPrototypeOf(n),i=Object.getOwnPropertyDescriptor(e,t);return!(typeof i>"u"||i.writable||i.set)}const ko={currentUpdatePriority:ah.DefaultEventPriority,unmountQueue:new Set};function F1(n,...t){}function _R(n,t={}){const e=n;return e.__pixireact=Object.assign({filters:[],parent:null,root:null,type:""},t),e}var dU="0.0.0-development",pU={version:dU};function mU(){}function yR(n,t,e){t instanceof Ii&&(t.__pixireact.parent=n,typeof e=="number"?n.__pixireact.filters.splice(e,0,t):n.__pixireact.filters.push(t),n.filters=n.__pixireact.filters)}function G_(n,t){t&&(t instanceof Vn?n.addChild(t):t instanceof Ii&&yR(n,t))}function gU(){}function _U(){return!1}const Vy=Object.freeze({onclick:"onClick",onglobalmousemove:"onGlobalMouseMove",onglobalpointermove:"onGlobalPointerMove",onglobaltouchmove:"onGlobalTouchMove",onmousedown:"onMouseDown",onmouseenter:"onMouseEnter",onmouseleave:"onMouseLeave",onmousemove:"onMouseMove",onmouseout:"onMouseOut",onmouseover:"onMouseOver",onmouseup:"onMouseUp",onmouseupoutside:"onMouseUpOutside",onpointercancel:"onPointerCancel",onpointerdown:"onPointerDown",onpointerenter:"onPointerEnter",onpointerleave:"onPointerLeave",onpointermove:"onPointerMove",onpointerout:"onPointerOut",onpointerover:"onPointerOver",onpointertap:"onPointerTap",onpointerup:"onPointerUp",onpointerupoutside:"onPointerUpOutside",onrightclick:"onRightClick",onrightdown:"onRightDown",onrightup:"onRightUp",onrightupoutside:"onRightUpOutside",ontap:"onTap",ontouchcancel:"onTouchCancel",ontouchend:"onTouchEnd",ontouchendoutside:"onTouchEndOutside",ontouchmove:"onTouchMove",ontouchstart:"onTouchStart",onwheel:"onWheel"}),vg=Object.freeze({onClick:"onclick",onGlobalMouseMove:"onglobalmousemove",onGlobalPointerMove:"onglobalpointermove",onGlobalTouchMove:"onglobaltouchmove",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseUpOutside:"onmouseupoutside",onPointerCancel:"onpointercancel",onPointerDown:"onpointerdown",onPointerEnter:"onpointerenter",onPointerLeave:"onpointerleave",onPointerMove:"onpointermove",onPointerOut:"onpointerout",onPointerOver:"onpointerover",onPointerTap:"onpointertap",onPointerUp:"onpointerup",onPointerUpOutside:"onpointerupoutside",onRightClick:"onrightclick",onRightDown:"onrightdown",onRightUp:"onrightup",onRightUpOutside:"onrightupoutside",onTap:"ontap",onTouchCancel:"ontouchcancel",onTouchEnd:"ontouchend",onTouchEndOutside:"ontouchendoutside",onTouchMove:"ontouchmove",onTouchStart:"ontouchstart",onWheel:"onwheel"});function bR(n){return Array.isArray(n)}function vR(n,t,e={arrays:"reference",objects:"reference",strict:!0}){const{arrays:i,objects:a,strict:o}=e;if(typeof n!=typeof t||!!n!=!!t)return!1;if(xU(n)||bU(n))return n===t;const h=vU(n);if(h&&a==="reference")return n===t;const f=bR(n);if(f&&i==="reference")return n===t;if((f||h)&&n===t)return!0;let m;for(m in n)if(!(m in t))return!1;let g=n;if(o&&(g=t),h&&i==="shallow"&&a==="shallow"){for(m in g)if(!vR(n[m],t[m],{strict:o,objects:"reference"}))return!1}else for(m in g)if(n[m]!==t[m])return!1;if(xR(m)){if(f&&n.length===0&&t.length===0||h&&Object.keys(n).length===0&&Object.keys(t).length===0)return!0;if(n!==t)return!1}return!0}function yU(n){return n===null}function bU(n){return typeof n=="number"}function vU(n){return!(n!==Object(n)||bR(n)||typeof n=="function")}function xU(n){return typeof n=="string"}function xR(n){return n===void 0}const SU=Object.freeze(["children","key","ref"]);function EU(n,t=[]){const e={};return Object.entries(n).reduce((i,[a,o])=>(t.includes(a)||(i[a]=o),i),e)}function ky(n,t=[]){return EU(n,SU.concat(t))}const TU="__default";function SR(n,t={},e=!1){const i=ky(n),a=ky(t),o=Object.entries(i),h=[];if(e){const f=Object.keys(a);let m=0;for(;m<f.length;){const g=f[m];!(g in i)&&o.unshift([g,`${TU}remove`]),m+=1}}return o.forEach(([f,m])=>{if(vR(m,a[f]))return;if(f in vg){h.push([f,m,!0,[]]);return}let g=[];f.includes("-")&&(g=f.split("-")),h.push([f,m,!1,g]);for(const b in i){const x=i[b];b.startsWith(`${f}-`)&&h.push([b,x,!1,b.split("-")])}}),{changes:h}}function AU(n){const t=n;return!(!t||!t.changes)}const CU="__default",V1=new Map,k1={};function X1(n,t){if(n){const e=n[t];if(!xR(e)&&!yU(e))return e}return n}function ER(n,t){const{__pixireact:e={},...i}=n;let a;AU(t)?a=t:a=SR(t,i);const{changes:o}=a;let h=0;for(;h<o.length;){const f=o[h];let m=!1,g=f[0],b=f[1];const x=f[2],E=f[3];let T=n,R=T[g];if(g==="draw"&&typeof b=="function"&&(n instanceof Zu?b(n):(m=!0,F1("warn",`The \`draw\` prop was used on a \`${e.type}\` component, but it's only valid on \`graphics\` components.`))),g in Vy){const D=g;m=!0,k1[g]||(k1[g]=!0,F1("warn",`Event names must be pascal case; instead of \`${g}\`, you probably want \`${Vy[D]}\`.`))}if(!m){if(E.length&&(R=E.reduce(X1,T),!(R&&R.set))){const[D,...C]=E.reverse();T=C.reverse().reduce(X1,T),g=D}if(b===`${CU}remove`)if(T instanceof Vn){let D=V1.get(T.constructor);D||(D=T.constructor,D=new D,V1.set(T.constructor,D)),b=D[g]}else b=0;if(x&&e){const C=vg[g];b?T[C]=b:delete T[C]}else gR(T,g)||(T[g]=b)}h+=1}return n}function BU(n,t,e,i){const{children:a,...o}=i,{children:h,...f}=e,m=SR(o,f,!0);return m.changes.length?m:null}function RU(n,t,e,i){const a=BU(n,t,e,i);a&&ER(n,a)}const MU=Object.freeze([...Object.keys(Vy),"draw"]),Xy={};function DU(n){const t=n.charAt(0),e=n.substring(1);return`${t.toUpperCase()}${e}`}function wU(n,t){return t.toLowerCase()}function UU(n){let t=n;return n.startsWith("pixi")&&(t=n.replace(/^pixi([A-Z])/,wU)),t}function OU(n,t,e){const i=UU(n),a=DU(i);if(!(a in Xy))throw new Error(`${a} is not part of the PIXI namespace! Did you forget to extend?`);const o=Xy[a],h=ky(t,MU);Object.entries(t).forEach(([m,g])=>{if(m in vg){const b=vg[m];h[b]=g}});const f=_R(new o(h),{root:e,type:i});return ER(f,t),f}var TR={exports:{}},P_={exports:{}},N_={exports:{}},z_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I1;function GU(){return I1||(I1=1,function(n){function t(V,j){var ut=V.length;V.push(j);t:for(;0<ut;){var ct=ut-1>>>1,z=V[ct];if(0<a(z,j))V[ct]=j,V[ut]=z,ut=ct;else break t}}function e(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var j=V[0],ut=V.pop();if(ut!==j){V[0]=ut;t:for(var ct=0,z=V.length,tt=z>>>1;ct<tt;){var Tt=2*(ct+1)-1,Rt=V[Tt],yt=Tt+1,Mt=V[yt];if(0>a(Rt,ut))yt<z&&0>a(Mt,Rt)?(V[ct]=Mt,V[yt]=ut,ct=yt):(V[ct]=Rt,V[Tt]=ut,ct=Tt);else if(yt<z&&0>a(Mt,ut))V[ct]=Mt,V[yt]=ut,ct=yt;else break t}}return j}function a(V,j){var ut=V.sortIndex-j.sortIndex;return ut!==0?ut:V.id-j.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var h=Date,f=h.now();n.unstable_now=function(){return h.now()-f}}var m=[],g=[],b=1,x=null,E=3,T=!1,R=!1,D=!1,C=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function H(V){for(var j=e(g);j!==null;){if(j.callback===null)i(g);else if(j.startTime<=V)i(g),j.sortIndex=j.expirationTime,t(m,j);else break;j=e(g)}}function q(V){if(D=!1,H(V),!R)if(e(m)!==null)R=!0,St();else{var j=e(g);j!==null&&Ct(q,j.startTime-V)}}var et=!1,ot=-1,Y=5,ht=-1;function N(){return!(n.unstable_now()-ht<Y)}function X(){if(et){var V=n.unstable_now();ht=V;var j=!0;try{t:{R=!1,D&&(D=!1,G(ot),ot=-1),T=!0;var ut=E;try{e:{for(H(V),x=e(m);x!==null&&!(x.expirationTime>V&&N());){var ct=x.callback;if(typeof ct=="function"){x.callback=null,E=x.priorityLevel;var z=ct(x.expirationTime<=V);if(V=n.unstable_now(),typeof z=="function"){x.callback=z,H(V),j=!0;break e}x===e(m)&&i(m),H(V)}else i(m);x=e(m)}if(x!==null)j=!0;else{var tt=e(g);tt!==null&&Ct(q,tt.startTime-V),j=!1}}break t}finally{x=null,E=ut,T=!1}j=void 0}}finally{j?W():et=!1}}}var W;if(typeof P=="function")W=function(){P(X)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,ft=rt.port2;rt.port1.onmessage=X,W=function(){ft.postMessage(null)}}else W=function(){C(X,0)};function St(){et||(et=!0,W())}function Ct(V,j){ot=C(function(){V(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){R||T||(R=!0,St())},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return e(m)},n.unstable_next=function(V){switch(E){case 1:case 2:case 3:var j=3;break;default:j=E}var ut=E;E=j;try{return V()}finally{E=ut}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,j){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ut=E;E=V;try{return j()}finally{E=ut}},n.unstable_scheduleCallback=function(V,j,ut){var ct=n.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?ct+ut:ct):ut=ct,V){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=ut+z,V={id:b++,callback:j,priorityLevel:V,startTime:ut,expirationTime:z,sortIndex:-1},ut>ct?(V.sortIndex=ut,t(g,V),e(m)===null&&V===e(g)&&(D?(G(ot),ot=-1):D=!0,Ct(q,ut-ct))):(V.sortIndex=z,t(m,V),R||T||(R=!0,St())),V},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(V){var j=E;return function(){var ut=E;E=j;try{return V.apply(this,arguments)}finally{E=ut}}}}(z_)),z_}var Y1;function PU(){return Y1||(Y1=1,N_.exports=GU()),N_.exports}var q1;function NU(){return q1||(q1=1,function(n){n.exports=function(t){function e(l,u,p,y){return new Ep(l,u,p,y)}function i(){}function a(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(l){return l===null||typeof l!="object"?null:(l=De&&l[De]||l["@@iterator"],typeof l=="function"?l:null)}function h(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Cn?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case Es:return"Fragment";case ia:return"Portal";case Ts:return"Profiler";case pl:return"StrictMode";case Ha:return"Suspense";case Au:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case As:return(l.displayName||"Context")+".Provider";case sf:return(l._context.displayName||"Context")+".Consumer";case Ac:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case fo:return u=l.displayName||null,u!==null?u:h(l.type)||"Memo";case La:u=l._payload,l=l._init;try{return h(l(u))}catch{}}return null}function f(l){if(Cs===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);Cs=u&&u[1]||"",Bs=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cs+l+Bs}function m(l,u){if(!l||po)return"";po=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var Bt=function(){throw Error()};if(Object.defineProperty(Bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Bt,[])}catch(Kt){var vt=Kt}Reflect.construct(l,[],Bt)}else{try{Bt.call()}catch(Kt){vt=Kt}l.call(Bt.prototype)}}else{try{throw Error()}catch(Kt){vt=Kt}(Bt=l())&&typeof Bt.catch=="function"&&Bt.catch(function(){})}}catch(Kt){if(Kt&&vt&&typeof Kt.stack=="string")return[Kt.stack,vt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=y.DetermineComponentFrameRoot(),U=A[0],k=A[1];if(U&&k){var $=U.split(`
`),pt=k.split(`
`);for(S=y=0;y<$.length&&!$[y].includes("DetermineComponentFrameRoot");)y++;for(;S<pt.length&&!pt[S].includes("DetermineComponentFrameRoot");)S++;if(y===$.length||S===pt.length)for(y=$.length-1,S=pt.length-1;1<=y&&0<=S&&$[y]!==pt[S];)S--;for(;1<=y&&0<=S;y--,S--)if($[y]!==pt[S]){if(y!==1||S!==1)do if(y--,S--,0>S||$[y]!==pt[S]){var xt=`
`+$[y].replace(" at new "," at ");return l.displayName&&xt.includes("<anonymous>")&&(xt=xt.replace("<anonymous>",l.displayName)),xt}while(1<=y&&0<=S);break}}}finally{po=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?f(p):""}function g(l){switch(l.tag){case 26:case 27:case 5:return f(l.type);case 16:return f("Lazy");case 13:return f("Suspense");case 19:return f("SuspenseList");case 0:case 15:return l=m(l.type,!1),l;case 11:return l=m(l.type.render,!1),l;case 1:return l=m(l.type,!0),l;default:return""}}function b(l){try{var u="";do u+=g(l),l=l.return;while(l);return u}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function x(l){var u=l,p=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(p=u.return),l=u.return;while(l)}return u.tag===3?p:null}function E(l){if(x(l)!==l)throw Error(a(188))}function T(l){var u=l.alternate;if(!u){if(u=x(l),u===null)throw Error(a(188));return u!==l?null:l}for(var p=l,y=u;;){var S=p.return;if(S===null)break;var A=S.alternate;if(A===null){if(y=S.return,y!==null){p=y;continue}break}if(S.child===A.child){for(A=S.child;A;){if(A===p)return E(S),l;if(A===y)return E(S),u;A=A.sibling}throw Error(a(188))}if(p.return!==y.return)p=S,y=A;else{for(var U=!1,k=S.child;k;){if(k===p){U=!0,p=S,y=A;break}if(k===y){U=!0,y=S,p=A;break}k=k.sibling}if(!U){for(k=A.child;k;){if(k===p){U=!0,p=A,y=S;break}if(k===y){U=!0,y=A,p=S;break}k=k.sibling}if(!U)throw Error(a(189))}}if(p.alternate!==y)throw Error(a(190))}if(p.tag!==3)throw Error(a(188));return p.stateNode.current===p?l:u}function R(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=R(l),u!==null)return u;l=l.sibling}return null}function D(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(l.tag!==4&&(u=D(l),u!==null))return u;l=l.sibling}return null}function C(l){return{current:l}}function G(l){0>ws||(l.current=Hc[ws],Hc[ws]=null,ws--)}function P(l,u){ws++,Hc[ws]=l.current,l.current=u}function H(l){return l>>>=0,l===0?32:31-(Df(l)/b0|0)|0}function q(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function et(l,u){var p=l.pendingLanes;if(p===0)return 0;var y=0,S=l.suspendedLanes,A=l.pingedLanes,U=l.warmLanes;l=l.finishedLanes!==0;var k=p&134217727;return k!==0?(p=k&~S,p!==0?y=q(p):(A&=k,A!==0?y=q(A):l||(U=k&~U,U!==0&&(y=q(U))))):(k=p&~S,k!==0?y=q(k):A!==0?y=q(A):l||(U=p&~U,U!==0&&(y=q(U)))),y===0?0:u!==0&&u!==y&&(u&S)===0&&(S=y&-y,U=u&-u,S>=U||S===32&&(U&4194176)!==0)?u:y}function ot(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function Y(l,u){switch(l){case 1:case 2:case 4:case 8:return u+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ht(){var l=Mu;return Mu<<=1,(Mu&4194176)===0&&(Mu=128),l}function N(){var l=bo;return bo<<=1,(bo&62914560)===0&&(bo=4194304),l}function X(l){for(var u=[],p=0;31>p;p++)u.push(l);return u}function W(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function rt(l,u,p,y,S,A){var U=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var k=l.entanglements,$=l.expirationTimes,pt=l.hiddenUpdates;for(p=U&~p;0<p;){var xt=31-pn(p),Bt=1<<xt;k[xt]=0,$[xt]=-1;var vt=pt[xt];if(vt!==null)for(pt[xt]=null,xt=0;xt<vt.length;xt++){var Kt=vt[xt];Kt!==null&&(Kt.lane&=-536870913)}p&=~Bt}y!==0&&ft(l,y,0),A!==0&&S===0&&l.tag!==0&&(l.suspendedLanes|=A&~(U&~u))}function ft(l,u,p){l.pendingLanes|=u,l.suspendedLanes&=~u;var y=31-pn(u);l.entangledLanes|=u,l.entanglements[y]=l.entanglements[y]|1073741824|p&4194218}function St(l,u){var p=l.entangledLanes|=u;for(l=l.entanglements;p;){var y=31-pn(p),S=1<<y;S&u|l[y]&u&&(l[y]|=u),p&=~S}}function Ct(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function V(l){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(xo,l,void 0,(l.current.flags&128)===128)}catch{}}function j(l){if(typeof ri=="function"&&Fc(l),Bn&&typeof Bn.setStrictMode=="function")try{Bn.setStrictMode(xo,l)}catch{}}function ut(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}function ct(l,u){if(typeof l=="object"&&l!==null){var p=Vc.get(l);return p!==void 0?p:(u={value:l,source:u,stack:b(u)},Vc.set(l,u),u)}return{value:l,source:u,stack:b(u)}}function z(l,u){Zi[Ji++]=So,Zi[Ji++]=Os,Os=l,So=u}function tt(l,u,p){Li[ai++]=la,Li[ai++]=oa,Li[ai++]=Nr,Nr=l;var y=la;l=oa;var S=32-pn(y)-1;y&=~(1<<S),p+=1;var A=32-pn(u)+S;if(30<A){var U=S-S%5;A=(y&(1<<U)-1).toString(32),y>>=U,S-=U,la=1<<32-pn(u)+S|p<<S|y,oa=A+l}else la=1<<A|p<<S|y,oa=l}function Tt(l){l.return!==null&&(z(l,1),tt(l,1,0))}function Rt(l){for(;l===Os;)Os=Zi[--Ji],Zi[Ji]=null,So=Zi[--Ji],Zi[Ji]=null;for(;l===Nr;)Nr=Li[--ai],Li[ai]=null,oa=Li[--ai],Li[ai]=null,la=Li[--ai],Li[ai]=null}function yt(l,u){P(Ia,u),P(hr,l),P(mn,null),l=lf(u),G(mn),P(mn,l)}function Mt(){G(mn),G(hr),G(Ia)}function Lt(l){l.memoizedState!==null&&P(wu,l);var u=mn.current,p=Tp(u,l.type);u!==p&&(P(hr,l),P(mn,p))}function Ge(l){hr.current===l&&(G(mn),G(hr)),wu.current===l&&(G(wu),Or?Va._currentValue=gl:Va._currentValue2=gl)}function Pt(l){var u=Error(a(418,""));throw Fe(ct(u,l)),Uu}function ne(l,u){if(!Hi)throw Error(a(175));bl(l.stateNode,l.type,l.memoizedProps,u,l)||Pt(l)}function ce(l){for(gn=l.return;gn;)switch(gn.tag){case 3:case 27:zr=!0;return;case 5:case 13:zr=!1;return;default:gn=gn.return}}function Te(l){if(!Hi||l!==gn)return!1;if(!_e)return ce(l),_e=!0,!1;var u=!1;if(Yn?l.tag!==3&&l.tag!==27&&(l.tag!==5||vf(l.type)&&!Jn(l.type,l.memoizedProps))&&(u=!0):l.tag!==3&&(l.tag!==5||vf(l.type)&&!Jn(l.type,l.memoizedProps))&&(u=!0),u&&Ne&&Pt(l),ce(l),l.tag===13){if(!Hi)throw Error(a(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));Ne=nm(l)}else Ne=gn?Ds(l.stateNode):null;return!0}function Be(){Hi&&(Ne=gn=null,_e=!1)}function Fe(l){fr===null?fr=[l]:fr.push(l)}function ve(){for(var l=Ya,u=Hr=Ya=0;u<l;){var p=Fi[u];Fi[u++]=null;var y=Fi[u];Fi[u++]=null;var S=Fi[u];Fi[u++]=null;var A=Fi[u];if(Fi[u++]=null,y!==null&&S!==null){var U=y.pending;U===null?S.next=S:(S.next=U.next,U.next=S),y.pending=S}A!==0&&ir(p,S,A)}}function ln(l,u,p,y){Fi[Ya++]=l,Fi[Ya++]=u,Fi[Ya++]=p,Fi[Ya++]=y,Hr|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function Pe(l,u,p,y){return ln(l,u,p,y),ti(l)}function Xn(l,u){return ln(l,null,null,u),ti(l)}function ir(l,u,p){l.lanes|=p;var y=l.alternate;y!==null&&(y.lanes|=p);for(var S=!1,A=l.return;A!==null;)A.childLanes|=p,y=A.alternate,y!==null&&(y.childLanes|=p),A.tag===22&&(l=A.stateNode,l===null||l._visibility&1||(S=!0)),l=A,A=A.return;S&&u!==null&&l.tag===3&&(A=l.stateNode,S=31-pn(p),A=A.hiddenUpdates,l=A[S],l===null?A[S]=[u]:l.push(u),u.lane=p|536870912)}function ti(l){if(50<Bl)throw Bl=0,Pf=null,Error(a(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}function jn(l){l!==Gs&&l.next===null&&(Gs===null?je=Gs=l:Gs=Gs.next=l),_n=!0,kc||(kc=!0,Il(Pn))}function ie(l,u){if(!Xc&&_n){Xc=!0;do for(var p=!1,y=je;y!==null;){if(l!==0){var S=y.pendingLanes;if(S===0)var A=0;else{var U=y.suspendedLanes,k=y.pingedLanes;A=(1<<31-pn(42|l)+1)-1,A&=S&~(U&~k),A=A&201326677?A&201326677|1:A?A|2:0}A!==0&&(p=!0,Xl(y,A))}else A=ue,A=et(y,y===He?A:0),(A&3)===0||ot(y,A)||(p=!0,Xl(y,A));y=y.next}while(p);Xc=!1}}function Pn(){_n=kc=!1;var l=0;Eo!==0&&(Rp()&&(l=Eo),Eo=0);for(var u=Qi(),p=null,y=je;y!==null;){var S=y.next,A=Kr(y,u);A===0?(y.next=null,p===null?je=S:p.next=S,S===null&&(Gs=p)):(p=y,(l!==0||(A&3)!==0)&&(_n=!0)),y=S}ie(l)}function Kr(l,u){for(var p=l.suspendedLanes,y=l.pingedLanes,S=l.expirationTimes,A=l.pendingLanes&-62914561;0<A;){var U=31-pn(A),k=1<<U,$=S[U];$===-1?((k&p)===0||(k&y)!==0)&&(S[U]=Y(k,u)):$<=u&&(l.expiredLanes|=k),A&=~k}if(u=He,p=ue,p=et(l,l===u?p:0),y=l.callbackNode,p===0||l===u&&we===2||l.cancelPendingCommit!==null)return y!==null&&y!==null&&Pr(y),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||ot(l,p)){if(u=p&-p,u===l.callbackPriority)return u;switch(y!==null&&Pr(y),Ct(p)){case 2:case 8:p=Du;break;case 32:p=vo;break;case 268435456:p=xl;break;default:p=vo}return y=pi.bind(null,l),p=sa(p,y),l.callbackPriority=u,l.callbackNode=p,u}return y!==null&&y!==null&&Pr(y),l.callbackPriority=2,l.callbackNode=null,2}function pi(l,u){var p=l.callbackNode;if(bs()&&l.callbackNode!==p)return null;var y=ue;return y=et(l,l===He?y:0),y===0?null:(ji(l,y,u),Kr(l,Qi()),l.callbackNode!=null&&l.callbackNode===p?pi.bind(null,l):null)}function Xl(l,u){if(bs())return null;ji(l,u,!0)}function Il(l){Up?Op(function(){(oe&6)!==0?sa(Lc,l):l()}):sa(Lc,l)}function xa(){return Eo===0&&(Eo=ht()),Eo}function Js(l,u){if(To===null){var p=To=[];Ic=0,Ke=xa(),qn={status:"pending",value:void 0,then:function(y){p.push(y)}}}return Ic++,u.then(Yo,Yo),u}function Yo(){if(--Ic===0&&To!==null){qn!==null&&(qn.status="fulfilled");var l=To;To=null,Ke=0,qn=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function Yl(l,u){var p=[],y={status:"pending",value:null,reason:null,then:function(S){p.push(S)}};return l.then(function(){y.status="fulfilled",y.value=u;for(var S=0;S<p.length;S++)(0,p[S])(u)},function(S){for(y.status="rejected",y.reason=S,S=0;S<p.length;S++)(0,p[S])(void 0)}),y}function is(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $s(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function mi(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function an(l,u,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(oe&2)!==0){var S=y.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),y.pending=u,u=ti(l),ir(l,null,p),u}return ln(l,y,u,p),ti(l)}function rs(l,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194176)!==0)){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,St(l,p)}}function Mi(l,u){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var S=null,A=null;if(p=p.firstBaseUpdate,p!==null){do{var U={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};A===null?S=A=U:A=A.next=U,p=p.next}while(p!==null);A===null?S=A=u:A=A.next=u}else S=A=u;p={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:A,shared:y.shared,callbacks:y.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=u}function Ze(){if(Yc){var l=qn;if(l!==null)throw l}}function as(l,u,p,y){Yc=!1;var S=l.updateQueue;si=!1;var A=S.firstBaseUpdate,U=S.lastBaseUpdate,k=S.shared.pending;if(k!==null){S.shared.pending=null;var $=k,pt=$.next;$.next=null,U===null?A=pt:U.next=pt,U=$;var xt=l.alternate;xt!==null&&(xt=xt.updateQueue,k=xt.lastBaseUpdate,k!==U&&(k===null?xt.firstBaseUpdate=pt:k.next=pt,xt.lastBaseUpdate=$))}if(A!==null){var Bt=S.baseState;U=0,xt=pt=$=null,k=A;do{var vt=k.lane&-536870913,Kt=vt!==k.lane;if(Kt?(ue&vt)===vt:(y&vt)===vt){vt!==0&&vt===Ke&&(Yc=!0),xt!==null&&(xt=xt.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});t:{var vr=l,Do=k;vt=u;var Rl=p;switch(Do.tag){case 1:if(vr=Do.payload,typeof vr=="function"){Bt=vr.call(Rl,Bt,vt);break t}Bt=vr;break t;case 3:vr.flags=vr.flags&-65537|128;case 0:if(vr=Do.payload,vt=typeof vr=="function"?vr.call(Rl,Bt,vt):vr,vt==null)break t;Bt=fn({},Bt,vt);break t;case 2:si=!0}}vt=k.callback,vt!==null&&(l.flags|=64,Kt&&(l.flags|=8192),Kt=S.callbacks,Kt===null?S.callbacks=[vt]:Kt.push(vt))}else Kt={lane:vt,tag:k.tag,payload:k.payload,callback:k.callback,next:null},xt===null?(pt=xt=Kt,$=Bt):xt=xt.next=Kt,U|=vt;if(k=k.next,k===null){if(k=S.shared.pending,k===null)break;Kt=k,k=Kt.next,Kt.next=null,S.lastBaseUpdate=Kt,S.shared.pending=null}}while(!0);xt===null&&($=Bt),S.baseState=$,S.firstBaseUpdate=pt,S.lastBaseUpdate=xt,A===null&&(S.shared.lanes=0),yr|=U,l.lanes=U,l.memoizedState=Bt}}function ql(l,u){if(typeof l!="function")throw Error(a(191,l));l.call(u)}function qo(l,u){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)ql(p[l],u)}function M(l,u){if(xi(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var p=Object.keys(l),y=Object.keys(u);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var S=p[y];if(!cm.call(u,S)||!xi(l[S],u[S]))return!1}return!0}function O(l){return l=l.status,l==="fulfilled"||l==="rejected"}function F(){}function at(l,u,p){switch(p=l[p],p===void 0?l.push(u):p!==u&&(u.then(F,F),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,l===Ou?Error(a(483)):l;default:if(typeof u.status=="string")u.then(F,F);else{if(l=He,l!==null&&100<l.shellSuspendCounter)throw Error(a(482));l=u,l.status="pending",l.then(function(y){if(u.status==="pending"){var S=u;S.status="fulfilled",S.value=y}},function(y){if(u.status==="pending"){var S=u;S.status="rejected",S.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,l===Ou?Error(a(483)):l}throw li=u,Ou}}function Et(){if(li===null)throw Error(a(459));var l=li;return li=null,l}function Ft(l){var u=oi;return oi+=1,Sl===null&&(Sl=[]),at(Sl,l,u)}function xe(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function En(l,u){throw u.$$typeof===af?Error(a(525)):(l=Object.prototype.toString.call(u),Error(a(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function Di(l){var u=l._init;return u(l._payload)}function gi(l){function u(it,Z){if(l){var lt=it.deletions;lt===null?(it.deletions=[Z],it.flags|=16):lt.push(Z)}}function p(it,Z){if(!l)return null;for(;Z!==null;)u(it,Z),Z=Z.sibling;return null}function y(it){for(var Z=new Map;it!==null;)it.key!==null?Z.set(it.key,it):Z.set(it.index,it),it=it.sibling;return Z}function S(it,Z){return it=Pa(it,Z),it.index=0,it.sibling=null,it}function A(it,Z,lt){return it.index=lt,l?(lt=it.alternate,lt!==null?(lt=lt.index,lt<Z?(it.flags|=33554434,Z):lt):(it.flags|=33554434,Z)):(it.flags|=1048576,Z)}function U(it){return l&&it.alternate===null&&(it.flags|=33554434),it}function k(it,Z,lt,bt){return Z===null||Z.tag!==6?(Z=Tu(lt,it.mode,bt),Z.return=it,Z):(Z=S(Z,lt),Z.return=it,Z)}function $(it,Z,lt,bt){var Ut=lt.type;return Ut===Es?xt(it,Z,lt.props.children,bt,lt.key):Z!==null&&(Z.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===La&&Di(Ut)===Z.type)?(Z=S(Z,lt.props),xe(Z,lt),Z.return=it,Z):(Z=dl(lt.type,lt.key,lt.props,null,it.mode,bt),xe(Z,lt),Z.return=it,Z)}function pt(it,Z,lt,bt){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==lt.containerInfo||Z.stateNode.implementation!==lt.implementation?(Z=zi(lt,it.mode,bt),Z.return=it,Z):(Z=S(Z,lt.children||[]),Z.return=it,Z)}function xt(it,Z,lt,bt,Ut){return Z===null||Z.tag!==7?(Z=xs(lt,it.mode,bt,Ut),Z.return=it,Z):(Z=S(Z,lt),Z.return=it,Z)}function Bt(it,Z,lt){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=Tu(""+Z,it.mode,lt),Z.return=it,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Ss:return lt=dl(Z.type,Z.key,Z.props,null,it.mode,lt),xe(lt,Z),lt.return=it,lt;case ia:return Z=zi(Z,it.mode,lt),Z.return=it,Z;case La:var bt=Z._init;return Z=bt(Z._payload),Bt(it,Z,lt)}if(Rs(Z)||o(Z))return Z=xs(Z,it.mode,lt,null),Z.return=it,Z;if(typeof Z.then=="function")return Bt(it,Ft(Z),lt);if(Z.$$typeof===As)return Bt(it,ou(it,Z),lt);En(it,Z)}return null}function vt(it,Z,lt,bt){var Ut=Z!==null?Z.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Ut!==null?null:k(it,Z,""+lt,bt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case Ss:return lt.key===Ut?$(it,Z,lt,bt):null;case ia:return lt.key===Ut?pt(it,Z,lt,bt):null;case La:return Ut=lt._init,lt=Ut(lt._payload),vt(it,Z,lt,bt)}if(Rs(lt)||o(lt))return Ut!==null?null:xt(it,Z,lt,bt,null);if(typeof lt.then=="function")return vt(it,Z,Ft(lt),bt);if(lt.$$typeof===As)return vt(it,Z,ou(it,lt),bt);En(it,lt)}return null}function Kt(it,Z,lt,bt,Ut){if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return it=it.get(lt)||null,k(Z,it,""+bt,Ut);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case Ss:return it=it.get(bt.key===null?lt:bt.key)||null,$(Z,it,bt,Ut);case ia:return it=it.get(bt.key===null?lt:bt.key)||null,pt(Z,it,bt,Ut);case La:var Le=bt._init;return bt=Le(bt._payload),Kt(it,Z,lt,bt,Ut)}if(Rs(bt)||o(bt))return it=it.get(lt)||null,xt(Z,it,bt,Ut,null);if(typeof bt.then=="function")return Kt(it,Z,lt,Ft(bt),Ut);if(bt.$$typeof===As)return Kt(it,Z,lt,ou(Z,bt),Ut);En(Z,bt)}return null}function vr(it,Z,lt,bt){for(var Ut=null,Le=null,Xt=Z,ae=Z=0,ke=null;Xt!==null&&ae<lt.length;ae++){Xt.index>ae?(ke=Xt,Xt=null):ke=Xt.sibling;var fe=vt(it,Xt,lt[ae],bt);if(fe===null){Xt===null&&(Xt=ke);break}l&&Xt&&fe.alternate===null&&u(it,Xt),Z=A(fe,Z,ae),Le===null?Ut=fe:Le.sibling=fe,Le=fe,Xt=ke}if(ae===lt.length)return p(it,Xt),_e&&z(it,ae),Ut;if(Xt===null){for(;ae<lt.length;ae++)Xt=Bt(it,lt[ae],bt),Xt!==null&&(Z=A(Xt,Z,ae),Le===null?Ut=Xt:Le.sibling=Xt,Le=Xt);return _e&&z(it,ae),Ut}for(Xt=y(Xt);ae<lt.length;ae++)ke=Kt(Xt,it,ae,lt[ae],bt),ke!==null&&(l&&ke.alternate!==null&&Xt.delete(ke.key===null?ae:ke.key),Z=A(ke,Z,ae),Le===null?Ut=ke:Le.sibling=ke,Le=ke);return l&&Xt.forEach(function(Xs){return u(it,Xs)}),_e&&z(it,ae),Ut}function Do(it,Z,lt,bt){if(lt==null)throw Error(a(151));for(var Ut=null,Le=null,Xt=Z,ae=Z=0,ke=null,fe=lt.next();Xt!==null&&!fe.done;ae++,fe=lt.next()){Xt.index>ae?(ke=Xt,Xt=null):ke=Xt.sibling;var Xs=vt(it,Xt,fe.value,bt);if(Xs===null){Xt===null&&(Xt=ke);break}l&&Xt&&Xs.alternate===null&&u(it,Xt),Z=A(Xs,Z,ae),Le===null?Ut=Xs:Le.sibling=Xs,Le=Xs,Xt=ke}if(fe.done)return p(it,Xt),_e&&z(it,ae),Ut;if(Xt===null){for(;!fe.done;ae++,fe=lt.next())fe=Bt(it,fe.value,bt),fe!==null&&(Z=A(fe,Z,ae),Le===null?Ut=fe:Le.sibling=fe,Le=fe);return _e&&z(it,ae),Ut}for(Xt=y(Xt);!fe.done;ae++,fe=lt.next())fe=Kt(Xt,it,ae,fe.value,bt),fe!==null&&(l&&fe.alternate!==null&&Xt.delete(fe.key===null?ae:fe.key),Z=A(fe,Z,ae),Le===null?Ut=fe:Le.sibling=fe,Le=fe);return l&&Xt.forEach(function(fm){return u(it,fm)}),_e&&z(it,ae),Ut}function Rl(it,Z,lt,bt){if(typeof lt=="object"&&lt!==null&&lt.type===Es&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case Ss:t:{for(var Ut=lt.key;Z!==null;){if(Z.key===Ut){if(Ut=lt.type,Ut===Es){if(Z.tag===7){p(it,Z.sibling),bt=S(Z,lt.props.children),bt.return=it,it=bt;break t}}else if(Z.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===La&&Di(Ut)===Z.type){p(it,Z.sibling),bt=S(Z,lt.props),xe(bt,lt),bt.return=it,it=bt;break t}p(it,Z);break}else u(it,Z);Z=Z.sibling}lt.type===Es?(bt=xs(lt.props.children,it.mode,bt,lt.key),bt.return=it,it=bt):(bt=dl(lt.type,lt.key,lt.props,null,it.mode,bt),xe(bt,lt),bt.return=it,it=bt)}return U(it);case ia:t:{for(Ut=lt.key;Z!==null;){if(Z.key===Ut)if(Z.tag===4&&Z.stateNode.containerInfo===lt.containerInfo&&Z.stateNode.implementation===lt.implementation){p(it,Z.sibling),bt=S(Z,lt.children||[]),bt.return=it,it=bt;break t}else{p(it,Z);break}else u(it,Z);Z=Z.sibling}bt=zi(lt,it.mode,bt),bt.return=it,it=bt}return U(it);case La:return Ut=lt._init,lt=Ut(lt._payload),Rl(it,Z,lt,bt)}if(Rs(lt))return vr(it,Z,lt,bt);if(o(lt)){if(Ut=o(lt),typeof Ut!="function")throw Error(a(150));return lt=Ut.call(lt),Do(it,Z,lt,bt)}if(typeof lt.then=="function")return Rl(it,Z,Ft(lt),bt);if(lt.$$typeof===As)return Rl(it,Z,ou(it,lt),bt);En(it,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,Z!==null&&Z.tag===6?(p(it,Z.sibling),bt=S(Z,lt),bt.return=it,it=bt):(p(it,Z),bt=Tu(lt,it.mode,bt),bt.return=it,it=bt),U(it)):p(it,Z)}return function(it,Z,lt,bt){try{oi=0;var Ut=Rl(it,Z,lt,bt);return Sl=null,Ut}catch(Xt){if(Xt===Ou)throw Xt;var Le=e(29,Xt,null,it.mode);return Le.lanes=bt,Le.return=it,Le}finally{}}}function rr(l,u){l=kr,P(Fr,l),P(Lr,u),kr=l|u.baseLanes}function ar(){P(Fr,kr),P(Lr,Lr.current)}function sr(){kr=Fr.current,G(Lr),G(Fr)}function Kn(l){var u=l.alternate;P(Ye,Ye.current&1),P(Vi,l),dr===null&&(u===null||Lr.current!==null||u.memoizedState!==null)&&(dr=l)}function wi(l){if(l.tag===22){if(P(Ye,Ye.current),P(Vi,l),dr===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(dr=l)}}else ei()}function ei(){P(Ye,Ye.current),P(Vi,Vi.current)}function on(l){G(Vi),dr===l&&(dr=null),G(Ye)}function he(l){for(var u=l;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||_l(p)||Ru(p)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function se(){throw Error(a(321))}function _i(l,u){if(u===null)return!1;for(var p=0;p<u.length&&p<l.length;p++)if(!xi(l[p],u[p]))return!1;return!0}function ss(l,u,p,y,S,A){return qa=A,qt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,It.H=l===null||l.memoizedState===null?Wa:Ei,Ns=!1,A=p(y,S),Ns=!1,El&&(A=jd(u,p,y,S)),qd(l),A}function qd(l){It.H=yn;var u=Se!==null&&Se.next!==null;if(qa=0,en=Se=qt=null,ja=!1,Ao=0,Ka=null,u)throw Error(a(300));l===null||Rn||(l=l.dependencies,l!==null&&lu(l)&&(Rn=!0))}function jd(l,u,p,y){qt=l;var S=0;do{if(El&&(Ka=null),Ao=0,El=!1,25<=S)throw Error(a(301));if(S+=1,en=Se=null,l.updateQueue!=null){var A=l.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}It.H=Hs,A=u(p,y)}while(El);return A}function Kd(){var l=It.H,u=l.useState()[0];return u=typeof u.then=="function"?Wr(u):u,l=l.useState()[0],(Se!==null?Se.memoizedState:null)!==l&&(qt.flags|=1024),u}function tl(){var l=zs!==0;return zs=0,l}function jo(l,u,p){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~p}function Sa(l){if(ja){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}ja=!1}qa=0,en=Se=qt=null,El=!1,Ao=zs=0,Ka=null}function Nn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?qt.memoizedState=en=l:en=en.next=l,en}function Je(){if(Se===null){var l=qt.alternate;l=l!==null?l.memoizedState:null}else l=Se.next;var u=en===null?qt.memoizedState:en.next;if(u!==null)en=u,Se=l;else{if(l===null)throw qt.alternate===null?Error(a(467)):Error(a(310));Se=l,l={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},en===null?qt.memoizedState=en=l:en=en.next=l}return en}function Wr(l){var u=Ao;return Ao+=1,Ka===null&&(Ka=[]),l=at(Ka,l,u),u=qt,(en===null?u.memoizedState:en.next)===null&&(u=u.alternate,It.H=u===null||u.memoizedState===null?Wa:Ei),l}function hn(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Wr(l);if(l.$$typeof===As)return Qn(l)}throw Error(a(438,String(l)))}function ec(l){var u=null,p=qt.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var y=qt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(S){return S.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=wf(),qt.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(l),y=0;y<l;y++)p[y]=$t;return u.index++,p}function Qr(l,u){return typeof u=="function"?u(l):u}function Zr(l){var u=Je();return ls(u,Se,l)}function ls(l,u,p){var y=l.queue;if(y===null)throw Error(a(311));y.lastRenderedReducer=p;var S=l.baseQueue,A=y.pending;if(A!==null){if(S!==null){var U=S.next;S.next=A.next,A.next=U}u.baseQueue=S=A,y.pending=null}if(A=l.baseState,S===null)l.memoizedState=A;else{u=S.next;var k=U=null,$=null,pt=u,xt=!1;do{var Bt=pt.lane&-536870913;if(Bt!==pt.lane?(ue&Bt)===Bt:(qa&Bt)===Bt){var vt=pt.revertLane;if(vt===0)$!==null&&($=$.next={lane:0,revertLane:0,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null}),Bt===Ke&&(xt=!0);else if((qa&vt)===vt){pt=pt.next,vt===Ke&&(xt=!0);continue}else Bt={lane:0,revertLane:pt.revertLane,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null},$===null?(k=$=Bt,U=A):$=$.next=Bt,qt.lanes|=vt,yr|=vt;Bt=pt.action,Ns&&p(A,Bt),A=pt.hasEagerState?pt.eagerState:p(A,Bt)}else vt={lane:Bt,revertLane:pt.revertLane,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null},$===null?(k=$=vt,U=A):$=$.next=vt,qt.lanes|=Bt,yr|=Bt;pt=pt.next}while(pt!==null&&pt!==u);if($===null?U=A:$.next=k,!xi(A,l.memoizedState)&&(Rn=!0,xt&&(p=qn,p!==null)))throw p;l.memoizedState=A,l.baseState=U,l.baseQueue=$,y.lastRenderedState=A}return S===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function Dr(l){var u=Je(),p=u.queue;if(p===null)throw Error(a(311));p.lastRenderedReducer=l;var y=p.dispatch,S=p.pending,A=u.memoizedState;if(S!==null){p.pending=null;var U=S=S.next;do A=l(A,U.action),U=U.next;while(U!==S);xi(A,u.memoizedState)||(Rn=!0),u.memoizedState=A,u.baseQueue===null&&(u.baseState=A),p.lastRenderedState=A}return[A,y]}function Wd(l,u,p){var y=qt,S=Je(),A=_e;if(A){if(p===void 0)throw Error(a(407));p=p()}else p=u();var U=!xi((Se||S).memoizedState,p);if(U&&(S.memoizedState=p,Rn=!0),S=S.queue,Jo(Qd.bind(null,y,S,l),[l]),S.getSnapshot!==u||U||en!==null&&en.memoizedState.tag&1){if(y.flags|=2048,el(9,Dh.bind(null,y,S,p,u),{destroy:void 0},null),He===null)throw Error(a(349));A||(qa&60)!==0||Mh(y,u,p)}return p}function Mh(l,u,p){l.flags|=16384,l={getSnapshot:u,value:p},u=qt.updateQueue,u===null?(u=wf(),qt.updateQueue=u,u.stores=[l]):(p=u.stores,p===null?u.stores=[l]:p.push(l))}function Dh(l,u,p,y){u.value=p,u.getSnapshot=y,Ko(u)&&Wo(l)}function Qd(l,u,p){return p(function(){Ko(u)&&Wo(l)})}function Ko(l){var u=l.getSnapshot;l=l.value;try{var p=u();return!xi(l,p)}catch{return!0}}function Wo(l){var u=Xn(l,2);u!==null&&Ie(u,l,2)}function wr(l){var u=Nn();if(typeof l=="function"){var p=l;if(l=p(),Ns){j(!0);try{p()}finally{j(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:l},u}function Yi(l,u,p,y){return l.baseState=p,ls(l,Se,typeof y=="function"?y:Qr)}function Zd(l,u,p,y,S){if(nu(l))throw Error(a(485));if(l=u.action,l!==null){var A={payload:S,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){A.listeners.push(U)}};It.T!==null?p(!0):A.isTransition=!1,y(A),p=u.pending,p===null?(A.next=u.pending=A,Jd(u,A)):(A.next=p.next,u.pending=p.next=A)}}function Jd(l,u){var p=u.action,y=u.payload,S=l.state;if(u.isTransition){var A=It.T,U={};It.T=U;try{var k=p(S,y),$=It.S;$!==null&&$(U,k),Qo(l,u,k)}catch(pt){jl(l,u,pt)}finally{It.T=A}}else try{A=p(S,y),Qo(l,u,A)}catch(pt){jl(l,u,pt)}}function Qo(l,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){wh(l,u,y)},function(y){return jl(l,u,y)}):wh(l,u,p)}function wh(l,u,p){u.status="fulfilled",u.value=p,$d(u),l.state=p,u=l.pending,u!==null&&(p=u.next,p===u?l.pending=null:(p=p.next,u.next=p,Jd(l,p)))}function jl(l,u,p){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=p,$d(u),u=u.next;while(u!==y)}l.action=null}function $d(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function qi(l,u){return u}function nc(l,u){if(_e){var p=He.formState;if(p!==null){t:{var y=qt;if(_e){if(Ne){var S=Jp(Ne,zr);if(S){Ne=Ds(S),y=aa(S);break t}}Pt(y)}y=!1}y&&(u=p[0])}}p=Nn(),p.memoizedState=p.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:u},p.queue=y,p=zh.bind(null,qt,y),y.dispatch=p,y=wr(!1);var A=Zl.bind(null,qt,!1,y.queue);return y=Nn(),S={state:u,dispatch:null,action:l,pending:null},y.queue=S,p=Zd.bind(null,qt,S,A,p),S.dispatch=p,y.memoizedState=l,[u,p,!1]}function Uh(l){var u=Je();return ic(u,Se,l)}function ic(l,u,p){u=ls(l,u,qi)[0],l=Zr(Qr)[0],u=typeof u=="object"&&u!==null&&typeof u.then=="function"?Wr(u):u;var y=Je(),S=y.queue,A=S.dispatch;return p!==y.memoizedState&&(qt.flags|=2048,el(9,Kl.bind(null,S,p),{destroy:void 0},null)),[u,A,l]}function Kl(l,u){l.action=u}function Oh(l){var u=Je(),p=Se;if(p!==null)return ic(u,p,l);Je(),u=u.memoizedState,p=Je();var y=p.queue.dispatch;return p.memoizedState=l,[u,y,!1]}function el(l,u,p,y){return l={tag:l,create:u,inst:p,deps:y,next:null},u=qt.updateQueue,u===null&&(u=wf(),qt.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,u.lastEffect=l),l}function nl(){return Je().memoizedState}function rc(l,u,p,y){var S=Nn();qt.flags|=l,S.memoizedState=el(1|u,p,{destroy:void 0},y===void 0?null:y)}function Zo(l,u,p,y){var S=Je();y=y===void 0?null:y;var A=S.memoizedState.inst;Se!==null&&y!==null&&_i(y,Se.memoizedState.deps)?S.memoizedState=el(u,p,A,y):(qt.flags|=l,S.memoizedState=el(1|u,p,A,y))}function Gh(l,u){rc(8390656,8,l,u)}function Jo(l,u){Zo(2048,8,l,u)}function tp(l,u){return Zo(4,2,l,u)}function ep(l,u){return Zo(4,4,l,u)}function $o(l,u){if(typeof u=="function"){l=l();var p=u(l);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function ac(l,u,p){p=p!=null?p.concat([l]):null,Zo(4,4,$o.bind(null,u,l),p)}function tu(){}function il(l,u){var p=Je();u=u===void 0?null:u;var y=p.memoizedState;return u!==null&&_i(u,y[1])?y[0]:(p.memoizedState=[l,u],l)}function rl(l,u){var p=Je();u=u===void 0?null:u;var y=p.memoizedState;if(u!==null&&_i(u,y[1]))return y[0];if(y=l(),Ns){j(!0);try{l()}finally{j(!1)}}return p.memoizedState=[y,u],y}function sc(l,u,p){return p===void 0||(qa&1073741824)!==0?l.memoizedState=u:(l.memoizedState=p,l=_u(),qt.lanes|=l,yr|=l,p)}function lc(l,u,p,y){return xi(p,u)?p:Lr.current!==null?(l=sc(l,p,y),xi(l,u)||(Rn=!0),l):(qa&42)===0?(Rn=!0,l.memoizedState=p):(l=_u(),qt.lanes|=l,yr|=l,u)}function Ph(l,u,p,y,S){var A=Ms();vi(A!==0&&8>A?A:8);var U=It.T,k={};It.T=k,Zl(l,!1,u,p);try{var $=S(),pt=It.S;if(pt!==null&&pt(k,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var xt=Yl($,y);os(l,u,xt,ni(l))}else os(l,u,y,ni(l))}catch(Bt){os(l,u,{then:function(){},status:"rejected",reason:Bt},ni())}finally{vi(A),It.T=U}}function Wl(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:gl,baseState:gl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:gl},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:p},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function eu(){return Qn(Va)}function Ql(){return Je().memoizedState}function Ea(){return Je().memoizedState}function Nh(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var p=ni();l=mi(p);var y=an(u,l,p);y!==null&&(Ie(y,u,p),rs(y,u,p)),u={cache:fs()},l.payload=u;return}u=u.return}}function oc(l,u,p){var y=ni();p={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},nu(l)?yi(u,p):(p=Pe(l,u,p,y),p!==null&&(Ie(p,l,y),us(p,u,y)))}function zh(l,u,p){var y=ni();os(l,u,p,y)}function os(l,u,p,y){var S={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(nu(l))yi(u,S);else{var A=l.alternate;if(l.lanes===0&&(A===null||A.lanes===0)&&(A=u.lastRenderedReducer,A!==null))try{var U=u.lastRenderedState,k=A(U,p);if(S.hasEagerState=!0,S.eagerState=k,xi(k,U))return ln(l,u,S,0),He===null&&ve(),!1}catch{}finally{}if(p=Pe(l,u,S,y),p!==null)return Ie(p,l,y),us(p,u,y),!0}return!1}function Zl(l,u,p,y){if(y={lane:2,revertLane:xa(),action:y,hasEagerState:!1,eagerState:null,next:null},nu(l)){if(u)throw Error(a(479))}else u=Pe(l,p,y,2),u!==null&&Ie(u,l,2)}function nu(l){var u=l.alternate;return l===qt||u!==null&&u===qt}function yi(l,u){El=ja=!0;var p=l.pending;p===null?u.next=u:(u.next=p.next,p.next=u),l.pending=u}function us(l,u,p){if((p&4194176)!==0){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,St(l,p)}}function Jl(l,u,p,y){u=l.memoizedState,p=p(y,u),p=p==null?u:fn({},u,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}function $l(l,u,p,y,S,A,U){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,A,U):u.prototype&&u.prototype.isPureReactComponent?!M(p,y)||!M(S,A):!0}function np(l,u,p,y){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,y),u.state!==l&&Co.enqueueReplaceState(u,u.state,null)}function Ta(l,u){var p=u;if("ref"in u){p={};for(var y in u)y!=="ref"&&(p[y]=u[y])}if(l=l.defaultProps){p===u&&(p=fn({},p));for(var S in l)p[S]===void 0&&(p[S]=l[S])}return p}function to(l,u){try{var p=l.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function eo(l,u,p){try{var y=l.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function no(l,u,p){return p=mi(p),p.tag=3,p.payload={element:null},p.callback=function(){to(l,u)},p}function Hh(l){return l=mi(l),l.tag=3,l}function ip(l,u,p,y){var S=p.type.getDerivedStateFromError;if(typeof S=="function"){var A=y.value;l.payload=function(){return S(A)},l.callback=function(){eo(u,p,y)}}var U=p.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(l.callback=function(){eo(u,p,y),typeof S!="function"&&(fa===null?fa=new Set([this]):fa.add(this));var k=y.stack;this.componentDidCatch(y.value,{componentStack:k!==null?k:""})})}function o0(l,u,p,y,S){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=p.alternate,u!==null&&su(u,p,S,!0),p=Vi.current,p!==null){switch(p.tag){case 13:return dr===null?cr():p.alternate===null&&nn===0&&(nn=3),p.flags&=-257,p.flags|=65536,p.lanes=S,y===Si?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([y]):u.add(y),vs(l,y,S)),!1;case 22:return p.flags|=65536,y===Si?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([y]):p.add(y)),vs(l,y,S)),!1}throw Error(a(435,p.tag))}return vs(l,y,S),cr(),!1}if(_e)return u=Vi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=S,y!==Uu&&(l=Error(a(422),{cause:y}),Fe(ct(l,p)))):(y!==Uu&&(u=Error(a(423),{cause:y}),Fe(ct(u,p))),l=l.current.alternate,l.flags|=65536,S&=-S,l.lanes|=S,y=ct(y,p),S=no(l.stateNode,y,S),Mi(l,S),nn!==4&&(nn=2)),!1;var A=Error(a(520),{cause:y});if(A=ct(A,p),Ro===null?Ro=[A]:Ro.push(A),nn!==4&&(nn=2),u===null)return!0;y=ct(y,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,l=S&-S,p.lanes|=l,l=no(p.stateNode,y,l),Mi(p,l),!1;case 1:if(u=p.type,A=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(fa===null||!fa.has(A))))return p.flags|=65536,S&=-S,p.lanes|=S,S=Hh(S),ip(S,l,p,y),Mi(p,S),!1}p=p.return}while(p!==null);return!1}function Wn(l,u,p,y){u.child=l===null?ua(u,null,p,y):Ps(u,l.child,p,y)}function uc(l,u,p,y,S){p=p.render;var A=u.ref;if("ref"in y){var U={};for(var k in y)k!=="ref"&&(U[k]=y[k])}else U=y;return hs(u),y=ss(l,u,p,U,A,S),k=tl(),l!==null&&!Rn?(jo(l,u,S),Aa(l,u,S)):(_e&&k&&Tt(u),u.flags|=1,Wn(l,u,y,S),u.child)}function rp(l,u,p,y,S){if(l===null){var A=p.type;return typeof A=="function"&&!Ga(A)&&A.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=A,ap(l,u,A,y,S)):(l=dl(p.type,null,y,u,u.mode,S),l.ref=u.ref,l.return=u,u.child=l)}if(A=l.child,!Xh(l,S)){var U=A.memoizedProps;if(p=p.compare,p=p!==null?p:M,p(U,y)&&l.ref===u.ref)return Aa(l,u,S)}return u.flags|=1,l=Pa(A,y),l.ref=u.ref,l.return=u,u.child=l}function ap(l,u,p,y,S){if(l!==null){var A=l.memoizedProps;if(M(A,y)&&l.ref===u.ref)if(Rn=!1,u.pendingProps=y=A,Xh(l,S))(l.flags&131072)!==0&&(Rn=!0);else return u.lanes=l.lanes,Aa(l,u,S)}return cc(l,u,p,y,S)}function sp(l,u,p){var y=u.pendingProps,S=y.children,A=(u.stateNode._pendingVisibility&2)!==0,U=l!==null?l.memoizedState:null;if(iu(l,u),y.mode==="hidden"||A){if((u.flags&128)!==0){if(y=U!==null?U.baseLanes|p:p,l!==null){for(S=u.child=l.child,A=0;S!==null;)A=A|S.lanes|S.childLanes,S=S.sibling;u.childLanes=A&~y}else u.childLanes=0,u.child=null;return lp(l,u,y,p)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&fc(u,U!==null?U.cachePool:null),U!==null?rr(u,U):ar(),wi(u);else return u.lanes=u.childLanes=536870912,lp(l,u,U!==null?U.baseLanes|p:p,p)}else U!==null?(fc(u,U.cachePool),rr(u,U),ei(),u.memoizedState=null):(l!==null&&fc(u,null),ar(),ei());return Wn(l,u,S,p),u.child}function lp(l,u,p,y){var S=Yh();return S=S===null?null:{parent:Or?cn._currentValue:cn._currentValue2,pool:S},u.memoizedState={baseLanes:p,cachePool:S},l!==null&&fc(u,null),ar(),wi(u),l!==null&&su(l,u,y,!0),null}function iu(l,u){var p=u.ref;if(p===null)l!==null&&l.ref!==null&&(u.flags|=2097664);else{if(typeof p!="function"&&typeof p!="object")throw Error(a(284));(l===null||l.ref!==p)&&(u.flags|=2097664)}}function cc(l,u,p,y,S){return hs(u),p=ss(l,u,p,y,void 0,S),y=tl(),l!==null&&!Rn?(jo(l,u,S),Aa(l,u,S)):(_e&&y&&Tt(u),u.flags|=1,Wn(l,u,p,S),u.child)}function op(l,u,p,y,S,A){return hs(u),u.updateQueue=null,p=jd(u,y,p,S),qd(l),y=tl(),l!==null&&!Rn?(jo(l,u,A),Aa(l,u,A)):(_e&&y&&Tt(u),u.flags|=1,Wn(l,u,p,A),u.child)}function up(l,u,p,y,S){if(hs(u),u.stateNode===null){var A=vl,U=p.contextType;typeof U=="object"&&U!==null&&(A=Qn(U)),A=new p(y,A),u.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Co,u.stateNode=A,A._reactInternals=u,A=u.stateNode,A.props=y,A.state=u.memoizedState,A.refs={},is(u),U=p.contextType,A.context=typeof U=="object"&&U!==null?Qn(U):vl,A.state=u.memoizedState,U=p.getDerivedStateFromProps,typeof U=="function"&&(Jl(u,p,U,y),A.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(U=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),U!==A.state&&Co.enqueueReplaceState(A,A.state,null),as(u,y,A,S),Ze(),A.state=u.memoizedState),typeof A.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(l===null){A=u.stateNode;var k=u.memoizedProps,$=Ta(p,k);A.props=$;var pt=A.context,xt=p.contextType;U=vl,typeof xt=="object"&&xt!==null&&(U=Qn(xt));var Bt=p.getDerivedStateFromProps;xt=typeof Bt=="function"||typeof A.getSnapshotBeforeUpdate=="function",k=u.pendingProps!==k,xt||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(k||pt!==U)&&np(u,A,y,U),si=!1;var vt=u.memoizedState;A.state=vt,as(u,y,A,S),Ze(),pt=u.memoizedState,k||vt!==pt||si?(typeof Bt=="function"&&(Jl(u,p,Bt,y),pt=u.memoizedState),($=si||$l(u,p,$,y,vt,pt,U))?(xt||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(u.flags|=4194308)):(typeof A.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=pt),A.props=y,A.state=pt,A.context=U,y=$):(typeof A.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{A=u.stateNode,$s(l,u),U=u.memoizedProps,xt=Ta(p,U),A.props=xt,Bt=u.pendingProps,vt=A.context,pt=p.contextType,$=vl,typeof pt=="object"&&pt!==null&&($=Qn(pt)),k=p.getDerivedStateFromProps,(pt=typeof k=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(U!==Bt||vt!==$)&&np(u,A,y,$),si=!1,vt=u.memoizedState,A.state=vt,as(u,y,A,S),Ze();var Kt=u.memoizedState;U!==Bt||vt!==Kt||si||l!==null&&l.dependencies!==null&&lu(l.dependencies)?(typeof k=="function"&&(Jl(u,p,k,y),Kt=u.memoizedState),(xt=si||$l(u,p,xt,y,vt,Kt,$)||l!==null&&l.dependencies!==null&&lu(l.dependencies))?(pt||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(y,Kt,$),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(y,Kt,$)),typeof A.componentDidUpdate=="function"&&(u.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof A.componentDidUpdate!="function"||U===l.memoizedProps&&vt===l.memoizedState||(u.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&vt===l.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=Kt),A.props=y,A.state=Kt,A.context=$,y=xt):(typeof A.componentDidUpdate!="function"||U===l.memoizedProps&&vt===l.memoizedState||(u.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&vt===l.memoizedState||(u.flags|=1024),y=!1)}return A=y,iu(l,u),y=(u.flags&128)!==0,A||y?(A=u.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:A.render(),u.flags|=1,l!==null&&y?(u.child=Ps(u,l.child,null,S),u.child=Ps(u,null,p,S)):Wn(l,u,p,S),u.memoizedState=A.state,l=u.child):l=Aa(l,u,S),l}function cp(l,u,p,y){return Be(),u.flags|=256,Wn(l,u,p,y),u.child}function Lh(l){return{baseLanes:l,cachePool:qh()}}function ru(l,u,p){return l=l!==null?l.childLanes&~p:0,u&&(l|=$i),l}function hp(l,u,p){var y=u.pendingProps,S=!1,A=(u.flags&128)!==0,U;if((U=A)||(U=l!==null&&l.memoizedState===null?!1:(Ye.current&2)!==0),U&&(S=!0,u.flags&=-129),U=(u.flags&32)!==0,u.flags&=-33,l===null){if(_e){if(S?Kn(u):ei(),_e){var k=Ne,$;($=k)&&(k=tm(k,zr),k!==null?(u.memoizedState={dehydrated:k,treeContext:Nr!==null?{id:la,overflow:oa}:null,retryLane:536870912},$=e(18,null,null,0),$.stateNode=k,$.return=u,u.child=$,gn=u,Ne=null,$=!0):$=!1),$||Pt(u)}if(k=u.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return Ru(k)?u.lanes=16:u.lanes=536870912,null;on(u)}return k=y.children,y=y.fallback,S?(ei(),S=u.mode,k=Vh({mode:"hidden",children:k},S),y=xs(y,S,p,null),k.return=u,y.return=u,k.sibling=y,u.child=k,S=u.child,S.memoizedState=Lh(p),S.childLanes=ru(l,U,p),u.memoizedState=Pu,y):(Kn(u),Fh(u,k))}if($=l.memoizedState,$!==null&&(k=$.dehydrated,k!==null)){if(A)u.flags&256?(Kn(u),u.flags&=-257,u=hc(l,u,p)):u.memoizedState!==null?(ei(),u.child=l.child,u.flags|=128,u=null):(ei(),S=y.fallback,k=u.mode,y=Vh({mode:"visible",children:y.children},k),S=xs(S,k,p,null),S.flags|=2,y.return=u,S.return=u,y.sibling=S,u.child=y,Ps(u,l.child,null,p),y=u.child,y.memoizedState=Lh(p),y.childLanes=ru(l,U,p),u.memoizedState=Pu,u=S);else if(Kn(u),Ru(k))U=Oc(k).digest,y=Error(a(419)),y.stack="",y.digest=U,Fe({value:y,source:null,stack:null}),u=hc(l,u,p);else if(Rn||su(l,u,p,!1),U=(p&l.childLanes)!==0,Rn||U){if(U=He,U!==null){if(y=p&-p,(y&42)!==0)y=1;else switch(y){case 2:y=1;break;case 8:y=4;break;case 32:y=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:y=64;break;case 268435456:y=134217728;break;default:y=0}if(y=(y&(U.suspendedLanes|p))!==0?0:y,y!==0&&y!==$.retryLane)throw $.retryLane=y,Xn(l,y),Ie(U,l,y),Uf}_l(k)||cr(),u=hc(l,u,p)}else _l(k)?(u.flags|=128,u.child=l.child,u=Eu.bind(null,l),Zp(k,u),u=null):(l=$.treeContext,Hi&&(Ne=_f(k),gn=u,_e=!0,fr=null,zr=!1,l!==null&&(Li[ai++]=la,Li[ai++]=oa,Li[ai++]=Nr,la=l.id,oa=l.overflow,Nr=u)),u=Fh(u,y.children),u.flags|=4096);return u}return S?(ei(),S=y.fallback,k=u.mode,$=l.child,A=$.sibling,y=Pa($,{mode:"hidden",children:y.children}),y.subtreeFlags=$.subtreeFlags&31457280,A!==null?S=Pa(A,S):(S=xs(S,k,p,null),S.flags|=2),S.return=u,y.return=u,y.sibling=S,u.child=y,y=S,S=u.child,k=l.child.memoizedState,k===null?k=Lh(p):($=k.cachePool,$!==null?(A=Or?cn._currentValue:cn._currentValue2,$=$.parent!==A?{parent:A,pool:A}:$):$=qh(),k={baseLanes:k.baseLanes|p,cachePool:$}),S.memoizedState=k,S.childLanes=ru(l,U,p),u.memoizedState=Pu,y):(Kn(u),p=l.child,l=p.sibling,p=Pa(p,{mode:"visible",children:y.children}),p.return=u,p.sibling=null,l!==null&&(U=u.deletions,U===null?(u.deletions=[l],u.flags|=16):U.push(l)),u.child=p,u.memoizedState=null,p)}function Fh(l,u){return u=Vh({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Vh(l,u){return Tc(l,u,0,null)}function hc(l,u,p){return Ps(u,l.child,null,p),l=Fh(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function fp(l,u,p){l.lanes|=u;var y=l.alternate;y!==null&&(y.lanes|=u),au(l.return,u,p)}function kh(l,u,p,y,S){var A=l.memoizedState;A===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:S}:(A.isBackwards=u,A.rendering=null,A.renderingStartTime=0,A.last=y,A.tail=p,A.tailMode=S)}function dp(l,u,p){var y=u.pendingProps,S=y.revealOrder,A=y.tail;if(Wn(l,u,y.children,p),y=Ye.current,(y&2)!==0)y=y&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)t:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&fp(l,p,u);else if(l.tag===19)fp(l,p,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break t;for(;l.sibling===null;){if(l.return===null||l.return===u)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}switch(P(Ye,y),S){case"forwards":for(p=u.child,S=null;p!==null;)l=p.alternate,l!==null&&he(l)===null&&(S=p),p=p.sibling;p=S,p===null?(S=u.child,u.child=null):(S=p.sibling,p.sibling=null),kh(u,!1,S,p,A);break;case"backwards":for(p=null,S=u.child,u.child=null;S!==null;){if(l=S.alternate,l!==null&&he(l)===null){u.child=S;break}l=S.sibling,S.sibling=p,p=S,S=l}kh(u,!0,p,null,A);break;case"together":kh(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Aa(l,u,p){if(l!==null&&(u.dependencies=l.dependencies),yr|=u.lanes,(p&u.childLanes)===0)if(l!==null){if(su(l,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(a(153));if(u.child!==null){for(l=u.child,p=Pa(l,l.pendingProps),u.child=p,p.return=u;l.sibling!==null;)l=l.sibling,p=p.sibling=Pa(l,l.pendingProps),p.return=u;p.sibling=null}return u.child}function Xh(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&lu(l)))}function u0(l,u,p){switch(u.tag){case 3:yt(u,u.stateNode.containerInfo),cs(u,cn,l.memoizedState.cache),Be();break;case 27:case 5:Lt(u);break;case 4:yt(u,u.stateNode.containerInfo);break;case 10:cs(u,u.type,u.memoizedProps.value);break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(Kn(u),u.flags|=128,null):(p&u.child.childLanes)!==0?hp(l,u,p):(Kn(u),l=Aa(l,u,p),l!==null?l.sibling:null);Kn(u);break;case 19:var S=(l.flags&128)!==0;if(y=(p&u.childLanes)!==0,y||(su(l,u,p,!1),y=(p&u.childLanes)!==0),S){if(y)return dp(l,u,p);u.flags|=128}if(S=u.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),P(Ye,Ye.current),y)break;return null;case 22:case 23:return u.lanes=0,sp(l,u,p);case 24:cs(u,cn,l.memoizedState.cache)}return Aa(l,u,p)}function pp(l,u,p){if(l!==null)if(l.memoizedProps!==u.pendingProps)Rn=!0;else{if(!Xh(l,p)&&(u.flags&128)===0)return Rn=!1,u0(l,u,p);Rn=(l.flags&131072)!==0}else Rn=!1,_e&&(u.flags&1048576)!==0&&tt(u,So,u.index);switch(u.lanes=0,u.tag){case 16:t:{l=u.pendingProps;var y=u.elementType,S=y._init;if(y=S(y._payload),u.type=y,typeof y=="function")Ga(y)?(l=Ta(y,l),u.tag=1,u=up(null,u,y,l,p)):(u.tag=0,u=cc(null,u,y,l,p));else{if(y!=null){if(S=y.$$typeof,S===Ac){u.tag=11,u=uc(null,u,y,l,p);break t}else if(S===fo){u.tag=14,u=rp(null,u,y,l,p);break t}}throw u=h(y)||y,Error(a(306,u,""))}}return u;case 0:return cc(l,u,u.type,u.pendingProps,p);case 1:return y=u.type,S=Ta(y,u.pendingProps),up(l,u,y,S,p);case 3:t:{if(yt(u,u.stateNode.containerInfo),l===null)throw Error(a(387));var A=u.pendingProps;S=u.memoizedState,y=S.element,$s(l,u),as(u,A,null,p);var U=u.memoizedState;if(A=U.cache,cs(u,cn,A),A!==S.cache&&al(u,[cn],p,!0),Ze(),A=U.element,Hi&&S.isDehydrated)if(S={element:A,isDehydrated:!1,cache:U.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=cp(l,u,A,p);break t}else if(A!==y){y=ct(Error(a(424)),u),Fe(y),u=cp(l,u,A,p);break t}else for(Hi&&(Ne=yl(u.stateNode.containerInfo),gn=u,_e=!0,fr=null,zr=!0),p=ua(u,null,A,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Be(),A===y){u=Aa(l,u,p);break t}Wn(l,u,A,p)}u=u.child}return u;case 26:if(Wi)return iu(l,u),l===null?(p=xf(u.type,null,u.pendingProps,null))?u.memoizedState=p:_e||(u.stateNode=Af(u.type,u.pendingProps,Ia.current,u)):u.memoizedState=xf(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:if(Yn)return Lt(u),l===null&&Yn&&_e&&(y=u.stateNode=Nc(u.type,u.pendingProps,Ia.current,mn.current,!1),gn=u,zr=!0,Ne=ka(y)),y=u.pendingProps.children,l!==null||_e?Wn(l,u,y,p):u.child=Ps(u,null,y,p),iu(l,u),u.child;case 5:return l===null&&_e&&(am(u.type,u.pendingProps,mn.current),(S=y=Ne)&&(y=yf(y,u.type,u.pendingProps,zr),y!==null?(u.stateNode=y,gn=u,Ne=ka(y),zr=!1,S=!0):S=!1),S||Pt(u)),Lt(u),S=u.type,A=u.pendingProps,U=l!==null?l.memoizedProps:null,y=A.children,Jn(S,A)?y=null:U!==null&&Jn(S,U)&&(u.flags|=32),u.memoizedState!==null&&(S=ss(l,u,Kd,null,null,p),Or?Va._currentValue=S:Va._currentValue2=S),iu(l,u),Wn(l,u,y,p),u.child;case 6:return l===null&&_e&&(y0(u.pendingProps,mn.current),(l=p=Ne)&&(p=$p(p,u.pendingProps,zr),p!==null?(u.stateNode=p,gn=u,Ne=null,l=!0):l=!1),l||Pt(u)),null;case 13:return hp(l,u,p);case 4:return yt(u,u.stateNode.containerInfo),y=u.pendingProps,l===null?u.child=Ps(u,null,y,p):Wn(l,u,y,p),u.child;case 11:return uc(l,u,u.type,u.pendingProps,p);case 7:return Wn(l,u,u.pendingProps,p),u.child;case 8:return Wn(l,u,u.pendingProps.children,p),u.child;case 12:return Wn(l,u,u.pendingProps.children,p),u.child;case 10:return y=u.pendingProps,cs(u,u.type,y.value),Wn(l,u,y.children,p),u.child;case 9:return S=u.type._context,y=u.pendingProps.children,hs(u),S=Qn(S),y=y(S),u.flags|=1,Wn(l,u,y,p),u.child;case 14:return rp(l,u,u.type,u.pendingProps,p);case 15:return ap(l,u,u.type,u.pendingProps,p);case 19:return dp(l,u,p);case 22:return sp(l,u,p);case 24:return hs(u),y=Qn(cn),l===null?(S=Yh(),S===null&&(S=He,A=fs(),S.pooledCache=A,A.refCount++,A!==null&&(S.pooledCacheLanes|=p),S=A),u.memoizedState={parent:y,cache:S},is(u),cs(u,cn,S)):((l.lanes&p)!==0&&($s(l,u),as(u,null,null,p),Ze()),S=l.memoizedState,A=u.memoizedState,S.parent!==y?(S={parent:y,cache:y},u.memoizedState=S,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=S),cs(u,cn,y)):(y=A.cache,cs(u,cn,y),y!==S.cache&&al(u,[cn],p,!0))),Wn(l,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(a(156,u.tag))}function cs(l,u,p){Or?(P(pr,u._currentValue),u._currentValue=p):(P(pr,u._currentValue2),u._currentValue2=p)}function Ca(l){var u=pr.current;Or?l._currentValue=u:l._currentValue2=u,G(pr)}function au(l,u,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),l===p)break;l=l.return}}function al(l,u,p,y){var S=l.child;for(S!==null&&(S.return=l);S!==null;){var A=S.dependencies;if(A!==null){var U=S.child;A=A.firstContext;t:for(;A!==null;){var k=A;A=S;for(var $=0;$<u.length;$++)if(k.context===u[$]){A.lanes|=p,k=A.alternate,k!==null&&(k.lanes|=p),au(A.return,p,l),y||(U=null);break t}A=k.next}}else if(S.tag===18){if(U=S.return,U===null)throw Error(a(341));U.lanes|=p,A=U.alternate,A!==null&&(A.lanes|=p),au(U,p,l),U=null}else U=S.child;if(U!==null)U.return=S;else for(U=S;U!==null;){if(U===l){U=null;break}if(S=U.sibling,S!==null){S.return=U.return,U=S;break}U=U.return}S=U}}function su(l,u,p,y){l=null;for(var S=u,A=!1;S!==null;){if(!A){if((S.flags&524288)!==0)A=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var U=S.alternate;if(U===null)throw Error(a(387));if(U=U.memoizedProps,U!==null){var k=S.type;xi(S.pendingProps.value,U.value)||(l!==null?l.push(k):l=[k])}}else if(S===wu.current){if(U=S.alternate,U===null)throw Error(a(387));U.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(l!==null?l.push(Va):l=[Va])}S=S.return}l!==null&&al(u,l,p,y),u.flags|=262144}function lu(l){for(l=l.firstContext;l!==null;){var u=l.context;if(!xi(Or?u._currentValue:u._currentValue2,l.memoizedValue))return!0;l=l.next}return!1}function hs(l){Fs=l,mr=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Qn(l){return Ih(Fs,l)}function ou(l,u){return Fs===null&&hs(l),Ih(l,u)}function Ih(l,u){var p=Or?u._currentValue:u._currentValue2;if(u={context:u,memoizedValue:p,next:null},mr===null){if(l===null)throw Error(a(308));mr=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else mr=mr.next=u;return p}function fs(){return{controller:new Nu,data:new Map,refCount:0}}function uu(l){l.refCount--,l.refCount===0&&sn(v0,function(){l.controller.abort()})}function Yh(){var l=Tl.current;return l!==null?l:He.pooledCache}function fc(l,u){u===null?P(Tl,Tl.current):P(Tl,u.pool)}function qh(){var l=Yh();return l===null?null:{parent:Or?cn._currentValue:cn._currentValue2,pool:l}}function Ui(l){l.flags|=4}function io(l,u){if(l!==null&&l.child===u.child)return!1;if((u.flags&16)!==0)return!0;for(l=u.child;l!==null;){if((l.flags&13878)!==0||(l.subtreeFlags&13878)!==0)return!0;l=l.sibling}return!1}function sl(l,u,p,y){if(tn)for(p=u.child;p!==null;){if(p.tag===5||p.tag===6)Cu(l,p.stateNode);else if(!(p.tag===4||Yn&&p.tag===27)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return;p=p.return}p.sibling.return=p.return,p=p.sibling}else if(Gr)for(var S=u.child;S!==null;){if(S.tag===5){var A=S.stateNode;p&&y&&(A=Qp(A,S.type,S.memoizedProps)),Cu(l,A)}else if(S.tag===6)A=S.stateNode,p&&y&&(A=gf(A,S.memoizedProps)),Cu(l,A);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)A=S.child,A!==null&&(A.return=S),sl(l,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function mp(l,u,p,y){if(Gr)for(var S=u.child;S!==null;){if(S.tag===5){var A=S.stateNode;p&&y&&(A=Qp(A,S.type,S.memoizedProps)),mf(l,A)}else if(S.tag===6)A=S.stateNode,p&&y&&(A=gf(A,S.memoizedProps)),mf(l,A);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)A=S.child,A!==null&&(A.return=S),mp(l,S,!(S.memoizedProps!==null&&S.memoizedProps.mode==="manual"),!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function cu(l,u){if(Gr&&io(l,u)){l=u.stateNode;var p=l.containerInfo,y=Uc();mp(y,u,!1,!1),l.pendingChildren=y,Ui(u),Kp(p,y)}}function dc(l,u,p,y){if(tn)l.memoizedProps!==y&&Ui(u);else if(Gr){var S=l.stateNode,A=l.memoizedProps;if((l=io(l,u))||A!==y){var U=mn.current;A=jp(S,p,A,y,!l,null),A===S?u.stateNode=S:(Cc(A,p,y,U)&&Ui(u),u.stateNode=A,l?sl(A,u,!1,!1):Ui(u))}else u.stateNode=S}}function pc(l,u,p){if(uf(u,p)){if(l.flags|=16777216,!cf(u,p))if(In())l.flags|=8192;else throw li=Si,Gu}else l.flags&=-16777217}function mc(l,u){if(om(u)){if(l.flags|=16777216,!Cf(u))if(In())l.flags|=8192;else throw li=Si,Gu}else l.flags&=-16777217}function ro(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?N():536870912,l.lanes|=u,Dn|=u)}function ao(l,u){if(!_e)switch(l.tailMode){case"hidden":u=l.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function $e(l){var u=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(u)for(var S=l.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags&31457280,y|=S.flags&31457280,S.return=l,S=S.sibling;else for(S=l.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=l,S=S.sibling;return l.subtreeFlags|=y,l.childLanes=p,u}function gp(l,u,p){var y=u.pendingProps;switch(Rt(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(u),null;case 1:return $e(u),null;case 3:return p=u.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),Ca(cn),Mt(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(Te(u)?Ui(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,fr!==null&&(Ua(fr),fr=null))),cu(l,u),$e(u),null;case 26:if(Wi){p=u.type;var S=u.memoizedState;return l===null?(Ui(u),S!==null?($e(u),mc(u,S)):($e(u),pc(u,p,y))):S?S!==l.memoizedState?(Ui(u),$e(u),mc(u,S)):($e(u),u.flags&=-16777217):(tn?l.memoizedProps!==y&&Ui(u):dc(l,u,p,y),$e(u),pc(u,p,y)),null}case 27:if(Yn){if(Ge(u),p=Ia.current,S=u.type,l!==null&&u.stateNode!=null)tn?l.memoizedProps!==y&&Ui(u):dc(l,u,S,y);else{if(!y){if(u.stateNode===null)throw Error(a(166));return $e(u),null}l=mn.current,Te(u)?ne(u,l):(l=Nc(S,y,p,l,!0),u.stateNode=l,Ui(u))}return $e(u),null}case 5:if(Ge(u),p=u.type,l!==null&&u.stateNode!=null)dc(l,u,p,y);else{if(!y){if(u.stateNode===null)throw Error(a(166));return $e(u),null}l=mn.current,Te(u)?ne(u,l):(S=of(p,y,Ia.current,l,u),sl(S,u,!1,!1),u.stateNode=S,Cc(S,p,y,l)&&Ui(u))}return $e(u),pc(u,u.type,u.pendingProps),null;case 6:if(l&&u.stateNode!=null)p=l.memoizedProps,tn?p!==y&&Ui(u):Gr&&(p!==y?(u.stateNode=dn(y,Ia.current,mn.current,u),Ui(u)):u.stateNode=l.stateNode);else{if(typeof y!="string"&&u.stateNode===null)throw Error(a(166));if(l=Ia.current,p=mn.current,Te(u)){if(!Hi)throw Error(a(176));if(l=u.stateNode,p=u.memoizedProps,y=null,S=gn,S!==null)switch(S.tag){case 27:case 5:y=S.memoizedProps}Gc(l,p,u,y)||Pt(u)}else u.stateNode=dn(y,l,p,u)}return $e(u),null;case 13:if(y=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(S=Te(u),y!==null&&y.dehydrated!==null){if(l===null){if(!S)throw Error(a(318));if(!Hi)throw Error(a(344));if(S=u.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(a(317));em(S,u)}else Be(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;$e(u),S=!1}else fr!==null&&(Ua(fr),fr=null),S=!0;if(!S)return u.flags&256?(on(u),u):(on(u),null)}if(on(u),(u.flags&128)!==0)return u.lanes=p,u;if(p=y!==null,l=l!==null&&l.memoizedState!==null,p){y=u.child,S=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(S=y.alternate.memoizedState.cachePool.pool);var A=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(A=y.memoizedState.cachePool.pool),A!==S&&(y.flags|=2048)}return p!==l&&p&&(u.child.flags|=8192),ro(u,u.updateQueue),$e(u),null;case 4:return Mt(),cu(l,u),l===null&&Cp(u.stateNode.containerInfo),$e(u),null;case 10:return Ca(u.type),$e(u),null;case 19:if(G(Ye),S=u.memoizedState,S===null)return $e(u),null;if(y=(u.flags&128)!==0,A=S.rendering,A===null)if(y)ao(S,!1);else{if(nn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(A=he(l),A!==null){for(u.flags|=128,ao(S,!1),l=A.updateQueue,u.updateQueue=l,ro(u,l),u.subtreeFlags=0,l=p,p=u.child;p!==null;)fl(p,l),p=p.sibling;return P(Ye,Ye.current&1|2),u.child}l=l.sibling}S.tail!==null&&Qi()>tr&&(u.flags|=128,y=!0,ao(S,!1),u.lanes=4194304)}else{if(!y)if(l=he(A),l!==null){if(u.flags|=128,y=!0,l=l.updateQueue,u.updateQueue=l,ro(u,l),ao(S,!0),S.tail===null&&S.tailMode==="hidden"&&!A.alternate&&!_e)return $e(u),null}else 2*Qi()-S.renderingStartTime>tr&&p!==536870912&&(u.flags|=128,y=!0,ao(S,!1),u.lanes=4194304);S.isBackwards?(A.sibling=u.child,u.child=A):(l=S.last,l!==null?l.sibling=A:u.child=A,S.last=A)}return S.tail!==null?(u=S.tail,S.rendering=u,S.tail=u.sibling,S.renderingStartTime=Qi(),u.sibling=null,l=Ye.current,P(Ye,y?l&1|2:l&1),u):($e(u),null);case 22:case 23:return on(u),sr(),y=u.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(p&536870912)!==0&&(u.flags&128)===0&&($e(u),u.subtreeFlags&6&&(u.flags|=8192)):$e(u),p=u.updateQueue,p!==null&&ro(u,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048),l!==null&&G(Tl),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),Ca(cn),$e(u),null;case 25:return null}throw Error(a(156,u.tag))}function c0(l,u){switch(Rt(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Ca(cn),Mt(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Ge(u),null;case 13:if(on(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(a(340));Be()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return G(Ye),null;case 4:return Mt(),null;case 10:return Ca(u.type),null;case 22:case 23:return on(u),sr(),l!==null&&G(Tl),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Ca(cn),null;case 25:return null;default:return null}}function _p(l,u){switch(Rt(u),u.tag){case 3:Ca(cn),Mt();break;case 26:case 27:case 5:Ge(u);break;case 4:Mt();break;case 13:on(u);break;case 19:G(Ye);break;case 10:Ca(u.type);break;case 22:case 23:on(u),sr(),l!==null&&G(Tl);break;case 24:Ca(cn)}}function hu(l,u){try{var p=u.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var S=y.next;p=S;do{if((p.tag&l)===l){y=void 0;var A=p.create,U=p.inst;y=A(),U.destroy=y}p=p.next}while(p!==S)}}catch(k){Re(u,u.return,k)}}function ds(l,u,p){try{var y=u.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var A=S.next;y=A;do{if((y.tag&l)===l){var U=y.inst,k=U.destroy;if(k!==void 0){U.destroy=void 0,S=u;var $=p;try{k()}catch(pt){Re(S,$,pt)}}}y=y.next}while(y!==A)}}catch(pt){Re(u,u.return,pt)}}function yp(l){var u=l.updateQueue;if(u!==null){var p=l.stateNode;try{qo(u,p)}catch(y){Re(l,l.return,y)}}}function Oi(l,u,p){p.props=Ta(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(y){Re(l,u,y)}}function Ur(l,u){try{var p=l.ref;if(p!==null){var y=l.stateNode;switch(l.tag){case 26:case 27:case 5:var S=ml(y);break;default:S=y}typeof p=="function"?l.refCleanup=p(S):p.current=S}}catch(A){Re(l,u,A)}}function Gi(l,u){var p=l.ref,y=l.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(S){Re(l,u,S)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(S){Re(l,u,S)}else p.current=null}function jh(l){var u=l.type,p=l.memoizedProps,y=l.stateNode;try{Lp(y,u,p,l)}catch(S){Re(l,l.return,S)}}function Kh(l,u,p){try{Fp(l.stateNode,l.type,p,u,l)}catch(y){Re(l,l.return,y)}}function Wh(l){return l.tag===5||l.tag===3||(Wi?l.tag===26:!1)||(Yn?l.tag===27:!1)||l.tag===4}function fu(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||Wh(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&(!Yn||l.tag!==27)&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Qh(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?df(p,l,u):ff(p,l);else if(!(y===4||Yn&&y===27)&&(l=l.child,l!==null))for(Qh(l,u,p),l=l.sibling;l!==null;)Qh(l,u,p),l=l.sibling}function gc(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?Vp(p,l,u):zp(p,l);else if(!(y===4||Yn&&y===27)&&(l=l.child,l!==null))for(gc(l,u,p),l=l.sibling;l!==null;)gc(l,u,p),l=l.sibling}function ll(l,u,p){l=l.containerInfo;try{Wp(l,p)}catch(y){Re(u,u.return,y)}}function Zh(l,u){for(Ap(l.containerInfo),Vt=u;Vt!==null;)if(l=Vt,u=l.child,(l.subtreeFlags&1028)!==0&&u!==null)u.return=l,Vt=u;else for(;Vt!==null;){l=Vt;var p=l.alternate;switch(u=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&p!==null){u=void 0;var y=l,S=p.memoizedProps;p=p.memoizedState;var A=y.stateNode;try{var U=Ta(y.type,S,y.elementType===y.type);u=A.getSnapshotBeforeUpdate(U,p),A.__reactInternalSnapshotBeforeUpdate=u}catch(k){Re(y,y.return,k)}}break;case 3:(u&1024)!==0&&tn&&qp(l.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(a(163))}if(u=l.sibling,u!==null){u.return=l.return,Vt=u;break}Vt=l.return}return U=Ve,Ve=!1,U}function so(l,u,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Ra(l,p),y&4&&hu(5,p);break;case 1:if(Ra(l,p),y&4)if(l=p.stateNode,u===null)try{l.componentDidMount()}catch(k){Re(p,p.return,k)}else{var S=Ta(p.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(S,u,l.__reactInternalSnapshotBeforeUpdate)}catch(k){Re(p,p.return,k)}}y&64&&yp(p),y&512&&Ur(p,p.return);break;case 3:if(Ra(l,p),y&64&&(y=p.updateQueue,y!==null)){if(l=null,p.child!==null)switch(p.child.tag){case 27:case 5:l=ml(p.child.stateNode);break;case 1:l=p.child.stateNode}try{qo(y,l)}catch(k){Re(p,p.return,k)}}break;case 26:if(Wi){Ra(l,p),y&512&&Ur(p,p.return);break}case 27:case 5:Ra(l,p),u===null&&y&4&&jh(p),y&512&&Ur(p,p.return);break;case 12:Ra(l,p);break;case 13:Ra(l,p),y&4&&ol(l,p);break;case 22:if(S=p.memoizedState!==null||Qa,!S){u=u!==null&&u.memoizedState!==null||jt;var A=Qa,U=jt;Qa=S,(jt=u)&&!U?ps(l,p,(p.subtreeFlags&8772)!==0):Ra(l,p),Qa=A,jt=U}y&512&&(p.memoizedProps.mode==="manual"?Ur(p,p.return):Gi(p,p.return));break;default:Ra(l,p)}}function _c(l){var u=l.alternate;u!==null&&(l.alternate=null,_c(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Mp(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function lr(l,u,p){for(p=p.child;p!==null;)Ba(l,u,p),p=p.sibling}function Ba(l,u,p){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(xo,p)}catch{}switch(p.tag){case 26:if(Wi){jt||Gi(p,u),lr(l,u,p),p.memoizedState?Ef(p.memoizedState):p.stateNode&&yo(p.stateNode);break}case 27:if(Yn){jt||Gi(p,u);var y=Ee,S=bn;Ee=p.stateNode,lr(l,u,p),Mf(p.stateNode),Ee=y,bn=S;break}case 5:jt||Gi(p,u);case 6:if(tn){if(y=Ee,S=bn,Ee=null,lr(l,u,p),Ee=y,bn=S,Ee!==null)if(bn)try{Xp(Ee,p.stateNode)}catch(A){Re(p,u,A)}else try{kp(Ee,p.stateNode)}catch(A){Re(p,u,A)}}else lr(l,u,p);break;case 18:tn&&Ee!==null&&(bn?bf(Ee,p.stateNode):rm(Ee,p.stateNode));break;case 4:tn?(y=Ee,S=bn,Ee=p.stateNode.containerInfo,bn=!0,lr(l,u,p),Ee=y,bn=S):(Gr&&ll(p.stateNode,p,Uc()),lr(l,u,p));break;case 0:case 11:case 14:case 15:jt||ds(2,p,u),jt||ds(4,p,u),lr(l,u,p);break;case 1:jt||(Gi(p,u),y=p.stateNode,typeof y.componentWillUnmount=="function"&&Oi(p,u,y)),lr(l,u,p);break;case 21:lr(l,u,p);break;case 22:jt||Gi(p,u),jt=(y=jt)||p.memoizedState!==null,lr(l,u,p),jt=y;break;default:lr(l,u,p)}}function ol(l,u){if(Hi&&u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Pc(l)}catch(p){Re(u,u.return,p)}}function Jh(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new re),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new re),u;default:throw Error(a(435,l.tag))}}function yc(l,u){var p=Jh(l);u.forEach(function(y){var S=Ec.bind(null,l,y);p.has(y)||(p.add(y),y.then(S,S))})}function Tn(l,u){var p=u.deletions;if(p!==null)for(var y=0;y<p.length;y++){var S=p[y],A=l,U=u;if(tn){var k=U;t:for(;k!==null;){switch(k.tag){case 27:case 5:Ee=k.stateNode,bn=!1;break t;case 3:Ee=k.stateNode.containerInfo,bn=!0;break t;case 4:Ee=k.stateNode.containerInfo,bn=!0;break t}k=k.return}if(Ee===null)throw Error(a(160));Ba(A,U,S),Ee=null,bn=!1}else Ba(A,U,S);A=S.alternate,A!==null&&(A.return=null),S.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)$h(u,l),u=u.sibling}function $h(l,u){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Tn(u,l),Pi(l),y&4&&(ds(3,l,l.return),hu(3,l),ds(5,l,l.return));break;case 1:Tn(u,l),Pi(l),y&512&&(jt||p===null||Gi(p,p.return)),y&64&&Qa&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:if(Wi){var S=ui;Tn(u,l),Pi(l),y&512&&(jt||p===null||Gi(p,p.return)),y&4&&(y=p!==null?p.memoizedState:null,u=l.memoizedState,p===null?u===null?l.stateNode===null?l.stateNode=sm(S,l.type,l.memoizedProps,l):Tf(S,l.type,l.stateNode):l.stateNode=Sf(S,u,l.memoizedProps):y!==u?(y===null?p.stateNode!==null&&yo(p.stateNode):Ef(y),u===null?Tf(S,l.type,l.stateNode):Sf(S,u,l.memoizedProps)):u===null&&l.stateNode!==null&&Kh(l,l.memoizedProps,p.memoizedProps));break}case 27:if(Yn&&y&4&&l.alternate===null){S=l.stateNode;var A=l.memoizedProps;try{um(S),Rf(l.type,A,S,l)}catch(xt){Re(l,l.return,xt)}}case 5:if(Tn(u,l),Pi(l),y&512&&(jt||p===null||Gi(p,p.return)),tn){if(l.flags&32){u=l.stateNode;try{wc(u)}catch(xt){Re(l,l.return,xt)}}y&4&&l.stateNode!=null&&(u=l.memoizedProps,Kh(l,u,p!==null?p.memoizedProps:u)),y&1024&&(ze=!0)}break;case 6:if(Tn(u,l),Pi(l),y&4&&tn){if(l.stateNode===null)throw Error(a(162));y=l.memoizedProps,p=p!==null?p.memoizedProps:y,u=l.stateNode;try{Hp(u,p,y)}catch(xt){Re(l,l.return,xt)}}break;case 3:if(Wi?(lm(),S=ui,ui=Hn(u.containerInfo),Tn(u,l),ui=S):Tn(u,l),Pi(l),y&4){if(tn&&Hi&&p!==null&&p.memoizedState.isDehydrated)try{im(u.containerInfo)}catch(xt){Re(l,l.return,xt)}if(Gr){y=u.containerInfo,p=u.pendingChildren;try{Wp(y,p)}catch(xt){Re(l,l.return,xt)}}}ze&&(ze=!1,tf(l));break;case 4:Wi?(p=ui,ui=Hn(l.stateNode.containerInfo),Tn(u,l),Pi(l),ui=p):(Tn(u,l),Pi(l)),y&4&&Gr&&ll(l.stateNode,l,l.stateNode.pendingChildren);break;case 12:Tn(u,l),Pi(l);break;case 13:Tn(u,l),Pi(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Gf=Qi()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,yc(l,y)));break;case 22:y&512&&(jt||p===null||Gi(p,p.return)),S=l.memoizedState!==null;var U=p!==null&&p.memoizedState!==null,k=Qa,$=jt;if(Qa=k||S,jt=$||U,Tn(u,l),jt=$,Qa=k,Pi(l),u=l.stateNode,u._current=l,u._visibility&=-3,u._visibility|=u._pendingVisibility&2,y&8192&&(u._visibility=S?u._visibility&-2:u._visibility|1,S&&(u=Qa||jt,p===null||U||u||lo(l)),tn&&(l.memoizedProps===null||l.memoizedProps.mode!=="manual"))){t:if(p=null,tn)for(u=l;;){if(u.tag===5||Wi&&u.tag===26||Yn&&u.tag===27){if(p===null){U=p=u;try{A=U.stateNode,S?Ip(A):_0(U.stateNode,U.memoizedProps)}catch(xt){Re(U,U.return,xt)}}}else if(u.tag===6){if(p===null){U=u;try{var pt=U.stateNode;S?Yp(pt):pf(pt,U.memoizedProps)}catch(xt){Re(U,U.return,xt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break t;for(;u.sibling===null;){if(u.return===null||u.return===l)break t;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}}y&4&&(y=l.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,yc(l,p))));break;case 19:Tn(u,l),Pi(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,yc(l,y)));break;case 21:break;default:Tn(u,l),Pi(l)}}function Pi(l){var u=l.flags;if(u&2){try{if(tn&&(!Yn||l.tag!==27)){t:{for(var p=l.return;p!==null;){if(Wh(p)){var y=p;break t}p=p.return}throw Error(a(160))}switch(y.tag){case 27:if(Yn){var S=y.stateNode,A=fu(l);gc(l,A,S);break}case 5:var U=y.stateNode;y.flags&32&&(wc(U),y.flags&=-33);var k=fu(l);gc(l,k,U);break;case 3:case 4:var $=y.stateNode.containerInfo,pt=fu(l);Qh(l,pt,$);break;default:throw Error(a(161))}}}catch(xt){Re(l,l.return,xt)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function tf(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;tf(u),u.tag===5&&u.flags&1024&&wp(u.stateNode),l=l.sibling}}function Ra(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)so(l,u.alternate,u),u=u.sibling}function lo(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:ds(4,u,u.return),lo(u);break;case 1:Gi(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&Oi(u,u.return,p),lo(u);break;case 26:case 27:case 5:Gi(u,u.return),lo(u);break;case 22:Gi(u,u.return),u.memoizedState===null&&lo(u);break;default:lo(u)}l=l.sibling}}function ps(l,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,S=l,A=u,U=A.flags;switch(A.tag){case 0:case 11:case 15:ps(S,A,p),hu(4,A);break;case 1:if(ps(S,A,p),y=A,S=y.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(pt){Re(y,y.return,pt)}if(y=A,S=y.updateQueue,S!==null){var k=y.stateNode;try{var $=S.shared.hiddenCallbacks;if($!==null)for(S.shared.hiddenCallbacks=null,S=0;S<$.length;S++)ql($[S],k)}catch(pt){Re(y,y.return,pt)}}p&&U&64&&yp(A),Ur(A,A.return);break;case 26:case 27:case 5:ps(S,A,p),p&&y===null&&U&4&&jh(A),Ur(A,A.return);break;case 12:ps(S,A,p);break;case 13:ps(S,A,p),p&&U&4&&ol(S,A);break;case 22:A.memoizedState===null&&ps(S,A,p),Ur(A,A.return);break;default:ps(S,A,p)}u=u.sibling}}function bc(l,u){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&uu(p))}function vc(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&uu(l))}function Ma(l,u,p,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)or(l,u,p,y),u=u.sibling}function or(l,u,p,y){var S=u.flags;switch(u.tag){case 0:case 11:case 15:Ma(l,u,p,y),S&2048&&hu(9,u);break;case 3:Ma(l,u,p,y),S&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&uu(l)));break;case 12:if(S&2048){Ma(l,u,p,y),l=u.stateNode;try{var A=u.memoizedProps,U=A.id,k=A.onPostCommit;typeof k=="function"&&k(U,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch($){Re(u,u.return,$)}}else Ma(l,u,p,y);break;case 23:break;case 22:A=u.stateNode,u.memoizedState!==null?A._visibility&4?Ma(l,u,p,y):Jr(l,u):A._visibility&4?Ma(l,u,p,y):(A._visibility|=4,Zn(l,u,p,y,(u.subtreeFlags&10256)!==0)),S&2048&&bc(u.alternate,u);break;case 24:Ma(l,u,p,y),S&2048&&vc(u.alternate,u);break;default:Ma(l,u,p,y)}}function Zn(l,u,p,y,S){for(S=S&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var A=l,U=u,k=p,$=y,pt=U.flags;switch(U.tag){case 0:case 11:case 15:Zn(A,U,k,$,S),hu(8,U);break;case 23:break;case 22:var xt=U.stateNode;U.memoizedState!==null?xt._visibility&4?Zn(A,U,k,$,S):Jr(A,U):(xt._visibility|=4,Zn(A,U,k,$,S)),S&&pt&2048&&bc(U.alternate,U);break;case 24:Zn(A,U,k,$,S),S&&pt&2048&&vc(U.alternate,U);break;default:Zn(A,U,k,$,S)}u=u.sibling}}function Jr(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=l,y=u,S=y.flags;switch(y.tag){case 22:Jr(p,y),S&2048&&bc(y.alternate,y);break;case 24:Jr(p,y),S&2048&&vc(y.alternate,y);break;default:Jr(p,y)}u=u.sibling}}function Da(l){if(l.subtreeFlags&Vs)for(l=l.child;l!==null;)du(l),l=l.sibling}function du(l){switch(l.tag){case 26:Da(l),l.flags&Vs&&(l.memoizedState!==null?Bf(ui,l.memoizedState,l.memoizedProps):hf(l.type,l.memoizedProps));break;case 5:Da(l),l.flags&Vs&&hf(l.type,l.memoizedProps);break;case 3:case 4:if(Wi){var u=ui;ui=Hn(l.stateNode.containerInfo),Da(l),ui=u}else Da(l);break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=Vs,Vs=16777216,Da(l),Vs=u):Da(l));break;default:Da(l)}}function pu(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function ul(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];Vt=y,gu(y,l)}pu(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)wa(l),l=l.sibling}function wa(l){switch(l.tag){case 0:case 11:case 15:ul(l),l.flags&2048&&ds(9,l,l.return);break;case 3:ul(l);break;case 12:ul(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&4&&(l.return===null||l.return.tag!==13)?(u._visibility&=-5,mu(l)):ul(l);break;default:ul(l)}}function mu(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];Vt=y,gu(y,l)}pu(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:ds(8,u,u.return),mu(u);break;case 22:p=u.stateNode,p._visibility&4&&(p._visibility&=-5,mu(u));break;default:mu(u)}l=l.sibling}}function gu(l,u){for(;Vt!==null;){var p=Vt;switch(p.tag){case 0:case 11:case 15:ds(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:uu(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,Vt=y;else t:for(p=l;Vt!==null;){y=Vt;var S=y.sibling,A=y.return;if(_c(y),y===p){Vt=null;break t}if(S!==null){S.return=A,Vt=S;break t}Vt=A}}}function ms(l){var u=Rc(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(a(364));return u}if(l=Gp(l),l===null)throw Error(a(362));return l.stateNode.current}function xc(l,u){var p=l.tag;switch(u.$$typeof){case We:if(l.type===u.value)return!0;break;case Vr:t:{for(u=u.value,l=[l,0],p=0;p<l.length;){var y=l[p++],S=y.tag,A=l[p++],U=u[A];if(S!==5&&S!==26&&S!==27||!ra(y)){for(;U!=null&&xc(y,U);)A++,U=u[A];if(A===u.length){u=!0;break t}else for(y=y.child;y!==null;)l.push(y,A),y=y.sibling}}u=!1}return u;case ca:if((p===5||p===26||p===27)&&Np(l.stateNode,u.value))return!0;break;case Ti:if((p===5||p===6||p===26||p===27)&&(l=Pp(l),l!==null&&0<=l.indexOf(u.value)))return!0;break;case Bo:if((p===5||p===26||p===27)&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Ni(l){switch(l.$$typeof){case We:return"<"+(h(l.value)||"Unknown")+">";case Vr:return":has("+(Ni(l)||"")+")";case ca:return'[role="'+l.value+'"]';case Ti:return'"'+l.value+'"';case Bo:return'[data-testname="'+l.value+'"]';default:throw Error(a(365))}}function cl(l,u){var p=[];l=[l,0];for(var y=0;y<l.length;){var S=l[y++],A=S.tag,U=l[y++],k=u[U];if(A!==5&&A!==26&&A!==27||!ra(S)){for(;k!=null&&xc(S,k);)U++,k=u[U];if(U===u.length)p.push(S);else for(S=S.child;S!==null;)l.push(S,U),S=S.sibling}}return p}function gs(l,u){if(!_o)throw Error(a(363));l=ms(l),l=cl(l,u),u=[],l=Array.from(l);for(var p=0;p<l.length;){var y=l[p++],S=y.tag;if(S===5||S===26||S===27)ra(y)||u.push(y.stateNode);else for(y=y.child;y!==null;)l.push(y),y=y.sibling}return u}function ni(){if((oe&2)!==0&&ue!==0)return ue&-ue;if(It.T!==null){var l=Ke;return l!==0?l:xa()}return Bp()}function _u(){$i===0&&($i=(ue&536870912)===0||_e?ht():536870912);var l=Vi.current;return l!==null&&(l.flags|=32),$i}function Ie(l,u,p){(l===He&&we===2||l.cancelPendingCommit!==null)&&(_s(l,0),bi(l,ue,$i,!1)),W(l,p),((oe&2)===0||l!==He)&&(l===He&&((oe&2)===0&&(Ja|=p),nn===4&&bi(l,ue,$i,!1)),jn(l))}function ji(l,u,p){if((oe&6)!==0)throw Error(a(327));var y=!p&&(u&60)===0&&(u&l.expiredLanes)===0||ot(l,u),S=y?bp(l,u):bu(l,u,!0),A=y;do{if(S===0){_r&&!y&&bi(l,u,0,!1);break}else if(S===6)bi(l,u,0,!gr);else{if(p=l.current.alternate,A&&!Oa(p)){S=bu(l,u,!1),A=!1;continue}if(S===2){if(A=u,l.errorRecoveryDisabledLanes&A)var U=0;else U=l.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){u=U;t:{var k=l;S=Ro;var $=Hi&&k.current.memoizedState.isDehydrated;if($&&(_s(k,U).flags|=256),U=bu(k,U,!1),U!==2){if(Al&&!$){k.errorRecoveryDisabledLanes|=A,Ja|=A,S=4;break t}A=br,br=S,A!==null&&Ua(A)}S=U}if(A=!1,S!==2)continue}}if(S===1){_s(l,0),bi(l,u,0,!0);break}t:{switch(y=l,S){case 0:case 1:throw Error(a(345));case 4:if((u&4194176)===u){bi(y,u,$i,!gr);break t}break;case 2:br=null;break;case 3:case 5:break;default:throw Error(a(329))}if(y.finishedWork=p,y.finishedLanes=u,(u&62914560)===u&&(A=Gf+300-Qi(),10<A)){if(bi(y,u,$i,!gr),et(y,0)!==0)break t;y.timeoutHandle=Bc($r.bind(null,y,p,br,Cl,qc,u,$i,Ja,Dn,gr,2,-0,0),A);break t}$r(y,p,br,Cl,qc,u,$i,Ja,Dn,gr,0,-0,0)}}break}while(!0);jn(l)}function Ua(l){br===null?br=l:br.push.apply(br,l)}function $r(l,u,p,y,S,A,U,k,$,pt,xt,Bt,vt){var Kt=u.subtreeFlags;if((Kt&8192||(Kt&16785408)===16785408)&&(m0(),du(u),u=Dp(),u!==null)){l.cancelPendingCommit=u(Sc.bind(null,l,p,y,S,U,k,$,1,Bt,vt)),bi(l,A,U,!pt);return}Sc(l,p,y,S,U,k,$,xt,Bt,vt)}function Oa(l){for(var u=l;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var S=p[y],A=S.getSnapshot;S=S.value;try{if(!xi(A(),S))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function bi(l,u,p,y){u&=~Ai,u&=~Ja,l.suspendedLanes|=u,l.pingedLanes&=~u,y&&(l.warmLanes|=u),y=l.expirationTimes;for(var S=u;0<S;){var A=31-pn(S),U=1<<A;y[A]=-1,S&=~U}p!==0&&ft(l,p,u)}function ef(){return(oe&6)===0?(ie(0),!1):!0}function yu(){if(te!==null){if(we===0)var l=te.return;else l=te,mr=Fs=null,Sa(l),Sl=null,oi=0,l=te;for(;l!==null;)_p(l.alternate,l),l=l.return;te=null}}function _s(l,u){l.finishedWork=null,l.finishedLanes=0;var p=l.timeoutHandle;p!==go&&(l.timeoutHandle=go,Bu(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),yu(),He=l,te=p=Pa(l.current,null),ue=u,we=0,Mn=null,gr=!1,_r=ot(l,u),Al=!1,Dn=$i=Ai=Ja=yr=nn=0,br=Ro=null,qc=!1,(u&8)!==0&&(u|=u&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=u;0<y;){var S=31-pn(y),A=1<<S;u|=l[S],y&=~A}return kr=u,ve(),p}function ii(l,u){qt=null,It.H=yn,u===Ou?(u=Et(),we=3):u===Gu?(u=Et(),we=4):we=u===Uf?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Mn=u,te===null&&(nn=1,to(l,ct(u,l.current)))}function In(){var l=Vi.current;return l===null?!0:(ue&4194176)===ue?dr===null:(ue&62914560)===ue||(ue&536870912)!==0?l===dr:!1}function ge(){var l=It.H;return It.H=yn,l===null?yn:l}function ur(){var l=It.A;return It.A=Za,l}function cr(){nn=4,gr||(ue&4194176)!==ue&&Vi.current!==null||(_r=!0),(yr&134217727)===0&&(Ja&134217727)===0||He===null||bi(He,ue,$i,!1)}function bu(l,u,p){var y=oe;oe|=2;var S=ge(),A=ur();(He!==l||ue!==u)&&(Cl=null,_s(l,u)),u=!1;var U=nn;t:do try{if(we!==0&&te!==null){var k=te,$=Mn;switch(we){case 8:yu(),U=6;break t;case 3:case 2:case 6:Vi.current===null&&(u=!0);var pt=we;if(we=0,Mn=null,ta(l,k,$,pt),p&&_r){U=0;break t}break;default:pt=we,we=0,Mn=null,ta(l,k,$,pt)}}hl(),U=nn;break}catch(xt){ii(l,xt)}while(!0);return u&&l.shellSuspendCounter++,mr=Fs=null,oe=y,It.H=S,It.A=A,te===null&&(He=null,ue=0,ve()),U}function hl(){for(;te!==null;)oo(te)}function bp(l,u){var p=oe;oe|=2;var y=ge(),S=ur();He!==l||ue!==u?(Cl=null,tr=Qi()+500,_s(l,u)):_r=ot(l,u);t:do try{if(we!==0&&te!==null){u=te;var A=Mn;e:switch(we){case 1:we=0,Mn=null,ta(l,u,A,1);break;case 2:if(O(A)){we=0,Mn=null,uo(u);break}u=function(){we===2&&He===l&&(we=7),jn(l)},A.then(u,u);break t;case 3:we=7;break t;case 4:we=5;break t;case 7:O(A)?(we=0,Mn=null,uo(u)):(we=0,Mn=null,ta(l,u,A,7));break;case 5:var U=null;switch(te.tag){case 26:U=te.memoizedState;case 5:case 27:var k=te,$=k.type,pt=k.pendingProps;if(U?Cf(U):cf($,pt)){we=0,Mn=null;var xt=k.sibling;if(xt!==null)te=xt;else{var Bt=k.return;Bt!==null?(te=Bt,ys(Bt)):te=null}break e}}we=0,Mn=null,ta(l,u,A,5);break;case 6:we=0,Mn=null,ta(l,u,A,6);break;case 8:yu(),nn=6;break t;default:throw Error(a(462))}}vp();break}catch(vt){ii(l,vt)}while(!0);return mr=Fs=null,It.H=y,It.A=S,oe=p,te!==null?0:(He=null,ue=0,ve(),nn)}function vp(){for(;te!==null&&!Us();)oo(te)}function oo(l){var u=pp(l.alternate,l,kr);l.memoizedProps=l.pendingProps,u===null?ys(l):te=u}function uo(l){var u=l,p=u.alternate;switch(u.tag){case 15:case 0:u=op(p,u,u.pendingProps,u.type,void 0,ue);break;case 11:u=op(p,u,u.pendingProps,u.type.render,u.ref,ue);break;case 5:Sa(u);default:_p(p,u),u=te=fl(u,kr),u=pp(p,u,kr)}l.memoizedProps=l.pendingProps,u===null?ys(l):te=u}function ta(l,u,p,y){mr=Fs=null,Sa(u),Sl=null,oi=0;var S=u.return;try{if(o0(l,S,u,p,ue)){nn=1,to(l,ct(p,l.current)),te=null;return}}catch(A){if(S!==null)throw te=S,A;nn=1,to(l,ct(p,l.current)),te=null;return}u.flags&32768?(_e||y===1?l=!0:_r||(ue&536870912)!==0?l=!1:(gr=l=!0,(y===2||y===3||y===6)&&(y=Vi.current,y!==null&&y.tag===13&&(y.flags|=16384))),nf(u,l)):ys(u)}function ys(l){var u=l;do{if((u.flags&32768)!==0){nf(u,gr);return}l=u.return;var p=gp(u.alternate,u,kr);if(p!==null){te=p;return}if(u=u.sibling,u!==null){te=u;return}te=u=l}while(u!==null);nn===0&&(nn=5)}function nf(l,u){do{var p=c0(l.alternate,l);if(p!==null){p.flags&=32767,te=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(l=l.sibling,l!==null)){te=l;return}te=l=p}while(l!==null);nn=6,te=null}function Sc(l,u,p,y,S,A,U,k,$,pt){var xt=It.T,Bt=Ms();try{vi(2),It.T=null,xp(l,u,p,y,Bt,S,A,U,k,$,pt)}finally{It.T=xt,vi(Bt)}}function xp(l,u,p,y,S,A,U,k){do bs();while(ks!==null);if((oe&6)!==0)throw Error(a(327));var $=l.finishedWork;if(y=l.finishedLanes,$===null)return null;if(l.finishedWork=null,l.finishedLanes=0,$===l.current)throw Error(a(177));l.callbackNode=null,l.callbackPriority=0,l.cancelPendingCommit=null;var pt=$.lanes|$.childLanes;if(pt|=Hr,rt(l,y,pt,A,U,k),l===He&&(te=He=null,ue=0),($.subtreeFlags&10256)===0&&($.flags&10256)===0||$a||($a=!0,jc=pt,Hu=p,Sp(vo,function(){return bs(),null})),p=($.flags&15990)!==0,($.subtreeFlags&15990)!==0||p?(p=It.T,It.T=null,A=Ms(),vi(2),U=oe,oe|=4,Zh(l,$),$h($,l),p0(l.containerInfo),l.current=$,so(l,$.alternate,$),Xa(),oe=U,vi(A),It.T=p):l.current=$,$a?($a=!1,ks=l,Mo=y):vu(l,pt),pt=l.pendingLanes,pt===0&&(fa=null),V($.stateNode),jn(l),u!==null)for(S=l.onRecoverableError,$=0;$<u.length;$++)pt=u[$],S(pt.value,{componentStack:pt.stack});return(Mo&3)!==0&&bs(),pt=l.pendingLanes,(y&4194218)!==0&&(pt&42)!==0?l===Pf?Bl++:(Bl=0,Pf=l):Bl=0,ie(0),null}function vu(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,uu(u)))}function bs(){if(ks!==null){var l=ks,u=jc;jc=0;var p=Ct(Mo),y=32>p?32:p;p=It.T;var S=Ms();try{if(vi(y),It.T=null,ks===null)var A=!1;else{y=Hu,Hu=null;var U=ks,k=Mo;if(ks=null,Mo=0,(oe&6)!==0)throw Error(a(331));var $=oe;if(oe|=4,wa(U.current),or(U,U.current,k,y),oe=$,ie(0,!1),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(xo,U)}catch{}A=!0}return A}finally{vi(S),It.T=p,vu(l,u)}}return!1}function co(l,u,p){u=ct(p,u),u=no(l.stateNode,u,2),l=an(l,u,2),l!==null&&(W(l,2),jn(l))}function Re(l,u,p){if(l.tag===3)co(l,l,p);else for(;u!==null;){if(u.tag===3){co(u,l,p);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(fa===null||!fa.has(y))){l=ct(p,l),p=Hh(2),y=an(u,p,2),y!==null&&(ip(p,y,u,l),W(y,2),jn(y));break}}u=u.return}}function vs(l,u,p){var y=l.pingCache;if(y===null){y=l.pingCache=new zu;var S=new Set;y.set(u,S)}else S=y.get(u),S===void 0&&(S=new Set,y.set(u,S));S.has(p)||(Al=!0,S.add(p),l=xu.bind(null,l,u,p),u.then(l,l))}function xu(l,u,p){var y=l.pingCache;y!==null&&y.delete(u),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,He===l&&(ue&p)===p&&(nn===4||nn===3&&(ue&62914560)===ue&&300>Qi()-Gf?(oe&2)===0&&_s(l,0):Ai|=p,Dn===ue&&(Dn=0)),jn(l)}function Su(l,u){u===0&&(u=N()),l=Xn(l,u),l!==null&&(W(l,u),jn(l))}function Eu(l){var u=l.memoizedState,p=0;u!==null&&(p=u.retryLane),Su(l,p)}function Ec(l,u){var p=0;switch(l.tag){case 13:var y=l.stateNode,S=l.memoizedState;S!==null&&(p=S.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(a(314))}y!==null&&y.delete(u),Su(l,p)}function Sp(l,u){return sa(l,u)}function Ep(l,u,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ga(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Pa(l,u){var p=l.alternate;return p===null?(p=e(l.tag,u,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=u,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&31457280,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,u=l.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function fl(l,u){l.flags&=31457282;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,u=p.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function dl(l,u,p,y,S,A){var U=0;if(y=l,typeof l=="function")Ga(l)&&(U=1);else if(typeof l=="string")U=Wi&&Yn?zn(l,p,mn.current)?26:zc(l)?27:5:Wi?zn(l,p,mn.current)?26:5:Yn&&zc(l)?27:5;else t:switch(l){case Es:return xs(p.children,S,A,u);case pl:U=8,S|=24;break;case Ts:return l=e(12,p,u,S|2),l.elementType=Ts,l.lanes=A,l;case Ha:return l=e(13,p,u,S),l.elementType=Ha,l.lanes=A,l;case Au:return l=e(19,p,u,S),l.elementType=Au,l.lanes=A,l;case Fa:return Tc(p,S,A,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case f0:case As:U=10;break t;case sf:U=9;break t;case Ac:U=11;break t;case fo:U=14;break t;case La:U=16,y=null;break t}U=29,p=Error(a(130,l===null?"null":typeof l,"")),y=null}return u=e(U,p,u,S),u.elementType=l,u.type=y,u.lanes=A,u}function xs(l,u,p,y){return l=e(7,l,y,u),l.lanes=p,l}function Tc(l,u,p,y){l=e(22,l,y,u),l.elementType=Fa,l.lanes=p;var S={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var A=S._current;if(A===null)throw Error(a(456));if((S._pendingVisibility&2)===0){var U=Xn(A,2);U!==null&&(S._pendingVisibility|=2,Ie(U,A,2))}},attach:function(){var A=S._current;if(A===null)throw Error(a(456));if((S._pendingVisibility&2)!==0){var U=Xn(A,2);U!==null&&(S._pendingVisibility&=-3,Ie(U,A,2))}}};return l.stateNode=S,l}function Tu(l,u,p){return l=e(6,l,null,u),l.lanes=p,l}function zi(l,u,p){return u=e(4,l.children!==null?l.children:[],l.key,u),u.lanes=p,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function ea(l,u,p,y,S,A,U,k){this.tag=1,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=go,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=X(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=X(0),this.hiddenUpdates=X(null),this.identifierPrefix=y,this.onUncaughtError=S,this.onCaughtError=A,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Na(l,u,p,y,S,A,U,k,$,pt,xt,Bt){return l=new ea(l,u,p,U,k,$,pt,Bt),u=1,A===!0&&(u|=24),A=e(3,null,null,u),l.current=A,A.stateNode=l,u=fs(),u.refCount++,l.pooledCache=u,u.refCount++,A.memoizedState={element:y,isDehydrated:p,cache:u},is(A),l}function rf(l){return l?(l=vl,l):vl}function za(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(a(188)):(l=Object.keys(l).join(","),Error(a(268,l)));return l=T(u),l=l!==null?R(l):null,l===null?null:ml(l.stateNode)}function na(l,u,p,y,S,A){S=rf(S),y.context===null?y.context=S:y.pendingContext=S,y=mi(u),y.payload={element:p},A=A===void 0?null:A,A!==null&&(y.callback=A),p=an(l,y,u),p!==null&&(Ie(p,l,u),rs(p,l,u))}function An(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<u?p:u}}function ho(l,u){An(l,u),(l=l.alternate)&&An(l,u)}var le={},h0=Ky,Ki=PU(),fn=Object.assign,af=Symbol.for("react.element"),Ss=Symbol.for("react.transitional.element"),ia=Symbol.for("react.portal"),Es=Symbol.for("react.fragment"),pl=Symbol.for("react.strict_mode"),Ts=Symbol.for("react.profiler"),f0=Symbol.for("react.provider"),sf=Symbol.for("react.consumer"),As=Symbol.for("react.context"),Ac=Symbol.for("react.forward_ref"),Ha=Symbol.for("react.suspense"),Au=Symbol.for("react.suspense_list"),fo=Symbol.for("react.memo"),La=Symbol.for("react.lazy"),Fa=Symbol.for("react.offscreen"),$t=Symbol.for("react.memo_cache_sentinel"),De=Symbol.iterator,Cn=Symbol.for("react.client.reference"),It=h0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Cs,Bs,po=!1,Rs=Array.isArray,mo=t.rendererVersion,d0=t.rendererPackageName,un=t.extraDevToolsConfig,ml=t.getPublicInstance,lf=t.getRootHostContext,Tp=t.getChildHostContext,Ap=t.prepareForCommit,p0=t.resetAfterCommit,of=t.createInstance,Cu=t.appendInitialChild,Cc=t.finalizeInitialChildren,Jn=t.shouldSetTextContent,dn=t.createTextInstance,Bc=t.scheduleTimeout,Bu=t.cancelTimeout,go=t.noTimeout,Or=t.isPrimaryRenderer;t.warnsIfNotActing;var tn=t.supportsMutation,Gr=t.supportsPersistence,Hi=t.supportsHydration,Rc=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var Cp=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var vi=t.setCurrentUpdatePriority,Ms=t.getCurrentUpdatePriority,Bp=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var Rp=t.shouldAttemptEagerTransition,Mp=t.detachDeletedInstance;t.requestPostPaintCallback;var uf=t.maySuspendCommit,cf=t.preloadInstance,m0=t.startSuspendingCommit,hf=t.suspendInstance,Dp=t.waitForCommitToBeReady,gl=t.NotPendingTransition,Va=t.HostTransitionContext,wp=t.resetFormInstance;t.bindToConsole;var Up=t.supportsMicrotasks,Op=t.scheduleMicrotask,_o=t.supportsTestSelectors,Gp=t.findFiberRoot,g0=t.getBoundingRect,Pp=t.getTextContent,ra=t.isHiddenSubtree,Np=t.matchAccessibilityRole,Mc=t.setFocusIfFocusable,Dc=t.setupIntersectionObserver,zp=t.appendChild,ff=t.appendChildToContainer,Hp=t.commitTextUpdate,Lp=t.commitMount,Fp=t.commitUpdate,Vp=t.insertBefore,df=t.insertInContainerBefore,kp=t.removeChild,Xp=t.removeChildFromContainer,wc=t.resetTextContent,Ip=t.hideInstance,Yp=t.hideTextInstance,_0=t.unhideInstance,pf=t.unhideTextInstance,qp=t.clearContainer,jp=t.cloneInstance,Uc=t.createContainerChildSet,mf=t.appendChildToContainerChildSet,Kp=t.finalizeContainerChildren,Wp=t.replaceContainerChildren,Qp=t.cloneHiddenInstance,gf=t.cloneHiddenTextInstance,_l=t.isSuspenseInstancePending,Ru=t.isSuspenseInstanceFallback,Oc=t.getSuspenseInstanceFallbackErrorDetails,Zp=t.registerSuspenseInstanceRetry,Jp=t.canHydrateFormStateMarker,aa=t.isFormStateMarkerMatching,Ds=t.getNextHydratableSibling,ka=t.getFirstHydratableChild,yl=t.getFirstHydratableChildWithinContainer,_f=t.getFirstHydratableChildWithinSuspenseInstance,yf=t.canHydrateInstance,$p=t.canHydrateTextInstance,tm=t.canHydrateSuspenseInstance,bl=t.hydrateInstance,Gc=t.hydrateTextInstance,em=t.hydrateSuspenseInstance,nm=t.getNextHydratableInstanceAfterSuspenseInstance,im=t.commitHydratedContainer,Pc=t.commitHydratedSuspenseInstance,rm=t.clearSuspenseBoundary,bf=t.clearSuspenseBoundaryFromContainer,vf=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var am=t.validateHydratableInstance,y0=t.validateHydratableTextInstance,Wi=t.supportsResources,zn=t.isHostHoistableType,Hn=t.getHoistableRoot,xf=t.getResource,Sf=t.acquireResource,Ef=t.releaseResource,sm=t.hydrateHoistable,Tf=t.mountHoistable,yo=t.unmountHoistable,Af=t.createHoistableInstance,lm=t.prepareToCommitHoistables,om=t.mayResourceSuspendCommit,Cf=t.preloadResource,Bf=t.suspendResource,Yn=t.supportsSingletons,Nc=t.resolveSingletonInstance,um=t.clearSingleton,Rf=t.acquireSingletonInstance,Mf=t.releaseSingletonInstance,zc=t.isHostSingletonType,Hc=[],ws=-1,vl={},pn=Math.clz32?Math.clz32:H,Df=Math.log,b0=Math.LN2,Mu=128,bo=4194304,sa=Ki.unstable_scheduleCallback,Pr=Ki.unstable_cancelCallback,Us=Ki.unstable_shouldYield,Xa=Ki.unstable_requestPaint,Qi=Ki.unstable_now,Lc=Ki.unstable_ImmediatePriority,Du=Ki.unstable_UserBlockingPriority,vo=Ki.unstable_NormalPriority,xl=Ki.unstable_IdlePriority,ri=Ki.log,Fc=Ki.unstable_setDisableYieldValue,xo=null,Bn=null,xi=typeof Object.is=="function"?Object.is:ut,Vc=new WeakMap,Zi=[],Ji=0,Os=null,So=0,Li=[],ai=0,Nr=null,la=1,oa="",mn=C(null),hr=C(null),Ia=C(null),wu=C(null),gn=null,Ne=null,_e=!1,fr=null,zr=!1,Uu=Error(a(519)),Fi=[],Ya=0,Hr=0,je=null,Gs=null,kc=!1,_n=!1,Xc=!1,Eo=0,To=null,Ic=0,Ke=0,qn=null,si=!1,Yc=!1,cm=Object.prototype.hasOwnProperty,Ou=Error(a(460)),Gu=Error(a(474)),Si={then:function(){}},li=null,Sl=null,oi=0,Ps=gi(!0),ua=gi(!1),Lr=C(null),Fr=C(0),Vi=C(null),dr=null,Ye=C(0),qa=0,qt=null,Se=null,en=null,ja=!1,El=!1,Ns=!1,zs=0,Ao=0,Ka=null,hm=0,wf=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},yn={readContext:Qn,use:hn,useCallback:se,useContext:se,useEffect:se,useImperativeHandle:se,useLayoutEffect:se,useInsertionEffect:se,useMemo:se,useReducer:se,useRef:se,useState:se,useDebugValue:se,useDeferredValue:se,useTransition:se,useSyncExternalStore:se,useId:se};yn.useCacheRefresh=se,yn.useMemoCache=se,yn.useHostTransitionStatus=se,yn.useFormState=se,yn.useActionState=se,yn.useOptimistic=se;var Wa={readContext:Qn,use:hn,useCallback:function(l,u){return Nn().memoizedState=[l,u===void 0?null:u],l},useContext:Qn,useEffect:Gh,useImperativeHandle:function(l,u,p){p=p!=null?p.concat([l]):null,rc(4194308,4,$o.bind(null,u,l),p)},useLayoutEffect:function(l,u){return rc(4194308,4,l,u)},useInsertionEffect:function(l,u){rc(4,2,l,u)},useMemo:function(l,u){var p=Nn();u=u===void 0?null:u;var y=l();if(Ns){j(!0);try{l()}finally{j(!1)}}return p.memoizedState=[y,u],y},useReducer:function(l,u,p){var y=Nn();if(p!==void 0){var S=p(u);if(Ns){j(!0);try{p(u)}finally{j(!1)}}}else S=u;return y.memoizedState=y.baseState=S,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:S},y.queue=l,l=l.dispatch=oc.bind(null,qt,l),[y.memoizedState,l]},useRef:function(l){var u=Nn();return l={current:l},u.memoizedState=l},useState:function(l){l=wr(l);var u=l.queue,p=zh.bind(null,qt,u);return u.dispatch=p,[l.memoizedState,p]},useDebugValue:tu,useDeferredValue:function(l,u){var p=Nn();return sc(p,l,u)},useTransition:function(){var l=wr(!1);return l=Ph.bind(null,qt,l.queue,!0,!1),Nn().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,p){var y=qt,S=Nn();if(_e){if(p===void 0)throw Error(a(407));p=p()}else{if(p=u(),He===null)throw Error(a(349));(ue&60)!==0||Mh(y,u,p)}S.memoizedState=p;var A={value:p,getSnapshot:u};return S.queue=A,Gh(Qd.bind(null,y,A,l),[l]),y.flags|=2048,el(9,Dh.bind(null,y,A,p,u),{destroy:void 0},null),p},useId:function(){var l=Nn(),u=He.identifierPrefix;if(_e){var p=oa,y=la;p=(y&~(1<<32-pn(y)-1)).toString(32)+p,u=":"+u+"R"+p,p=zs++,0<p&&(u+="H"+p.toString(32)),u+=":"}else p=hm++,u=":"+u+"r"+p.toString(32)+":";return l.memoizedState=u},useCacheRefresh:function(){return Nn().memoizedState=Nh.bind(null,qt)}};Wa.useMemoCache=ec,Wa.useHostTransitionStatus=eu,Wa.useFormState=nc,Wa.useActionState=nc,Wa.useOptimistic=function(l){var u=Nn();u.memoizedState=u.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=Zl.bind(null,qt,!0,p),p.dispatch=u,[l,u]};var Ei={readContext:Qn,use:hn,useCallback:il,useContext:Qn,useEffect:Jo,useImperativeHandle:ac,useInsertionEffect:tp,useLayoutEffect:ep,useMemo:rl,useReducer:Zr,useRef:nl,useState:function(){return Zr(Qr)},useDebugValue:tu,useDeferredValue:function(l,u){var p=Je();return lc(p,Se.memoizedState,l,u)},useTransition:function(){var l=Zr(Qr)[0],u=Je().memoizedState;return[typeof l=="boolean"?l:Wr(l),u]},useSyncExternalStore:Wd,useId:Ql};Ei.useCacheRefresh=Ea,Ei.useMemoCache=ec,Ei.useHostTransitionStatus=eu,Ei.useFormState=Uh,Ei.useActionState=Uh,Ei.useOptimistic=function(l,u){var p=Je();return Yi(p,Se,l,u)};var Hs={readContext:Qn,use:hn,useCallback:il,useContext:Qn,useEffect:Jo,useImperativeHandle:ac,useInsertionEffect:tp,useLayoutEffect:ep,useMemo:rl,useReducer:Dr,useRef:nl,useState:function(){return Dr(Qr)},useDebugValue:tu,useDeferredValue:function(l,u){var p=Je();return Se===null?sc(p,l,u):lc(p,Se.memoizedState,l,u)},useTransition:function(){var l=Dr(Qr)[0],u=Je().memoizedState;return[typeof l=="boolean"?l:Wr(l),u]},useSyncExternalStore:Wd,useId:Ql};Hs.useCacheRefresh=Ea,Hs.useMemoCache=ec,Hs.useHostTransitionStatus=eu,Hs.useFormState=Oh,Hs.useActionState=Oh,Hs.useOptimistic=function(l,u){var p=Je();return Se!==null?Yi(p,Se,l,u):(p.baseState=l,[l,p.queue.dispatch])};var Co={isMounted:function(l){return(l=l._reactInternals)?x(l)===l:!1},enqueueSetState:function(l,u,p){l=l._reactInternals;var y=ni(),S=mi(y);S.payload=u,p!=null&&(S.callback=p),u=an(l,S,y),u!==null&&(Ie(u,l,y),rs(u,l,y))},enqueueReplaceState:function(l,u,p){l=l._reactInternals;var y=ni(),S=mi(y);S.tag=1,S.payload=u,p!=null&&(S.callback=p),u=an(l,S,y),u!==null&&(Ie(u,l,y),rs(u,l,y))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var p=ni(),y=mi(p);y.tag=2,u!=null&&(y.callback=u),u=an(l,y,p),u!==null&&(Ie(u,l,p),rs(u,l,p))}},Ls=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Uf=Error(a(461)),Rn=!1,Pu={dehydrated:null,treeContext:null,retryLane:0},pr=C(null),Fs=null,mr=null,Nu=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(p,y){l.push(y)}};this.abort=function(){u.aborted=!0,l.forEach(function(p){return p()})}},sn=Ki.unstable_scheduleCallback,v0=Ki.unstable_NormalPriority,cn={$$typeof:As,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Of=It.S;It.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&Js(l,u),Of!==null&&Of(l,u)};var Tl=C(null),Qa=!1,jt=!1,ze=!1,re=typeof WeakSet=="function"?WeakSet:Set,Vt=null,Ve=!1,Ee=null,bn=!1,ui=null,Vs=8192,Za={getCacheForType:function(l){var u=Qn(cn),p=u.data.get(l);return p===void 0&&(p=l(),u.data.set(l,p)),p}},We=0,Vr=1,ca=2,Bo=3,Ti=4;if(typeof Symbol=="function"&&Symbol.for){var ha=Symbol.for;We=ha("selector.component"),Vr=ha("selector.has_pseudo_class"),ca=ha("selector.role"),Bo=ha("selector.test_id"),Ti=ha("selector.text")}var zu=typeof WeakMap=="function"?WeakMap:Map,oe=0,He=null,te=null,ue=0,we=0,Mn=null,gr=!1,_r=!1,Al=!1,kr=0,nn=0,yr=0,Ja=0,Ai=0,$i=0,Dn=0,Ro=null,br=null,qc=!1,Gf=0,tr=1/0,Cl=null,fa=null,$a=!1,ks=null,Mo=0,jc=0,Hu=null,Bl=0,Pf=null;return le.attemptContinuousHydration=function(l){if(l.tag===13){var u=Xn(l,67108864);u!==null&&Ie(u,l,67108864),ho(l,67108864)}},le.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var u=ni(),p=Xn(l,u);p!==null&&Ie(p,l,u),ho(l,u)}},le.attemptSynchronousHydration=function(l){switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var u=q(l.pendingLanes);if(u!==0){for(l.pendingLanes|=2,l.entangledLanes|=2;u;){var p=1<<31-pn(u);l.entanglements[1]|=p,u&=~p}jn(l),(oe&6)===0&&(tr=Qi()+500,ie(0))}}break;case 13:u=Xn(l,2),u!==null&&Ie(u,l,2),ef(),ho(l,2)}},le.batchedUpdates=function(l,u){return l(u)},le.createComponentSelector=function(l){return{$$typeof:We,value:l}},le.createContainer=function(l,u,p,y,S,A,U,k,$,pt){return Na(l,u,!1,null,p,y,A,U,k,$,pt,null)},le.createHasPseudoClassSelector=function(l){return{$$typeof:Vr,value:l}},le.createHydrationContainer=function(l,u,p,y,S,A,U,k,$,pt,xt,Bt,vt){return l=Na(p,y,!0,l,S,A,k,$,pt,xt,Bt,vt),l.context=rf(null),p=l.current,y=ni(),S=mi(y),S.callback=u??null,an(p,S,y),l.current.lanes=y,W(l,y),jn(l),l},le.createPortal=function(l,u,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ia,key:y==null?null:""+y,children:l,containerInfo:u,implementation:p}},le.createRoleSelector=function(l){return{$$typeof:ca,value:l}},le.createTestNameSelector=function(l){return{$$typeof:Bo,value:l}},le.createTextSelector=function(l){return{$$typeof:Ti,value:l}},le.defaultOnCaughtError=function(l){console.error(l)},le.defaultOnRecoverableError=function(l){Ls(l)},le.defaultOnUncaughtError=function(l){Ls(l)},le.deferredUpdates=function(l){var u=It.T,p=Ms();try{return vi(32),It.T=null,l()}finally{vi(p),It.T=u}},le.discreteUpdates=function(l,u,p,y,S){var A=It.T,U=Ms();try{return vi(2),It.T=null,l(u,p,y,S)}finally{vi(U),It.T=A,oe===0&&(tr=Qi()+500)}},le.findAllNodes=gs,le.findBoundingRects=function(l,u){if(!_o)throw Error(a(363));u=gs(l,u),l=[];for(var p=0;p<u.length;p++)l.push(g0(u[p]));for(u=l.length-1;0<u;u--){p=l[u];for(var y=p.x,S=y+p.width,A=p.y,U=A+p.height,k=u-1;0<=k;k--)if(u!==k){var $=l[k],pt=$.x,xt=pt+$.width,Bt=$.y,vt=Bt+$.height;if(y>=pt&&A>=Bt&&S<=xt&&U<=vt){l.splice(u,1);break}else if(y!==pt||p.width!==$.width||vt<A||Bt>U){if(!(A!==Bt||p.height!==$.height||xt<y||pt>S)){pt>y&&($.width+=pt-y,$.x=y),xt<S&&($.width=S-pt),l.splice(u,1);break}}else{Bt>A&&($.height+=Bt-A,$.y=A),vt<U&&($.height=U-Bt),l.splice(u,1);break}}}return l},le.findHostInstance=za,le.findHostInstanceWithNoPortals=function(l){return l=T(l),l=l!==null?D(l):null,l===null?null:ml(l.stateNode)},le.findHostInstanceWithWarning=function(l){return za(l)},le.flushPassiveEffects=bs,le.flushSyncFromReconciler=function(l){var u=oe;oe|=1;var p=It.T,y=Ms();try{if(vi(2),It.T=null,l)return l()}finally{vi(y),It.T=p,oe=u,(oe&6)===0&&ie(0)}},le.flushSyncWork=ef,le.focusWithin=function(l,u){if(!_o)throw Error(a(363));for(l=ms(l),u=cl(l,u),u=Array.from(u),l=0;l<u.length;){var p=u[l++],y=p.tag;if(!ra(p)){if((y===5||y===26||y===27)&&Mc(p.stateNode))return!0;for(p=p.child;p!==null;)u.push(p),p=p.sibling}}return!1},le.getFindAllNodesFailureDescription=function(l,u){if(!_o)throw Error(a(363));var p=0,y=[];l=[ms(l),0];for(var S=0;S<l.length;){var A=l[S++],U=A.tag,k=l[S++],$=u[k];if((U!==5&&U!==26&&U!==27||!ra(A))&&(xc(A,$)&&(y.push(Ni($)),k++,k>p&&(p=k)),k<u.length))for(A=A.child;A!==null;)l.push(A,k),A=A.sibling}if(p<u.length){for(l=[];p<u.length;p++)l.push(Ni(u[p]));return`findAllNodes was able to match part of the selector:
  `+(y.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},le.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 27:case 5:return ml(l.child.stateNode);default:return l.child.stateNode}},le.injectIntoDevTools=function(){var l={bundleType:0,version:mo,rendererPackageName:d0,currentDispatcherRef:It,findFiberByHostInstance:Rc,reconcilerVersion:"19.0.0"};if(un!==null&&(l.rendererConfig=un),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{xo=u.inject(l),Bn=u}catch{}l=!!u.checkDCE}}return l},le.isAlreadyRendering=function(){return!1},le.observeVisibleRects=function(l,u,p,y){if(!_o)throw Error(a(363));l=gs(l,u);var S=Dc(l,p,y).disconnect;return{disconnect:function(){S()}}},le.shouldError=function(){return null},le.shouldSuspend=function(){return!1},le.startHostTransition=function(l,u,p,y){if(l.tag!==5)throw Error(a(476));var S=Wl(l).queue;Ph(l,S,u,gl,p===null?i:function(){var A=Wl(l).next.queue;return os(l,A,{},ni()),p(y)})},le.updateContainer=function(l,u,p,y){var S=u.current,A=ni();return na(S,A,l,u,p,y),A},le.updateContainerSync=function(l,u,p,y){return u.tag===0&&bs(),na(u.current,2,l,u,p,y),2},le},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})}(P_)),P_.exports}TR.exports=NU();var zU=TR.exports,HU=cU(zU);const LU=HU;function FU(n,t,e,i){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")}function VU(){}function kU(){return!1}const AR={};function XU(n){return n??AR}function IU(){return ko.currentUpdatePriority}function YU(){return null}function qU(n){throw new Error("Not yet implemented.")}function jU(n){return n}function KU(){return AR}function WU(n){n instanceof Vn?n.visible=!1:n instanceof Ii&&(n.enabled=!1)}function QU(n){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")}function CR(n){if(n instanceof Ii){const t=n.__pixireact.parent;if(t){const e=t.__pixireact.filters.indexOf(n);t.__pixireact.filters.splice(e,1),t.filters=t.__pixireact.filters}n.__pixireact.parent=null}}function s2(n,t,...e){}function j1(n,t,e){if(s2(),t instanceof Vn){const i=t,a=t,o=e;i.parent===n&&n.removeChild(a);const h=n.getChildIndex(o);n.addChildAt(a,h)}else if(t instanceof Ii){const o=t.__pixireact.filters.indexOf(e);CR(t),yR(n,t,o)}}function ZU(){return!1}function JU(){return!0}function $U(){return null}function tO(){}function eO(){}function K1(n,t){t instanceof Ii&&CR(t),t.destroy()}function nO(n){}function iO(){}function rO(){}function aO(){return-1.1}function sO(){return null}function lO(){var e;if(ko.currentUpdatePriority)return ko.currentUpdatePriority;const n=typeof self<"u"&&self||typeof window<"u"&&window;if(!n)return ah.DefaultEventPriority;switch((e=n.event)==null?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ah.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ah.ContinuousEventPriority;default:return ah.DefaultEventPriority}}function oO(n){ko.currentUpdatePriority=n}function uO(){return!1}function cO(){return!1}function hO(){}function fO(){}function dO(){}function pO(n){n instanceof Vn?n.visible=!0:n instanceof Ii&&(n.enabled=!0)}function mO(n){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")}function gO(){return null}const _O={isPrimaryRenderer:!1,noTimeout:-1,NotPendingTransition:null,supportsHydration:!1,supportsMutation:!0,supportsPersistence:!1,warnsIfNotActing:!1,afterActiveInstanceBlur:mU,appendChild:G_,appendChildToContainer:G_,appendInitialChild:G_,beforeActiveInstanceBlur:gU,cancelTimeout:clearTimeout,clearContainer:_U,commitUpdate:RU,createInstance:OU,createTextInstance:FU,hideTextInstance:QU,unhideTextInstance:mO,detachDeletedInstance:VU,finalizeInitialChildren:kU,getChildHostContext:XU,getCurrentUpdatePriority:IU,getInstanceFromNode:YU,getInstanceFromScope:qU,getPublicInstance:jU,getRootHostContext:KU,hideInstance:WU,insertBefore:j1,insertInContainerBefore:j1,maySuspendCommit:ZU,preloadInstance:JU,prepareForCommit:$U,preparePortalMount:tO,prepareScopeUpdate:eO,removeChild:K1,removeChildFromContainer:K1,requestPostPaintCallback:nO,resetAfterCommit:iO,resetFormInstance:rO,resolveEventTimeStamp:aO,resolveEventType:sO,resolveUpdatePriority:lO,scheduleTimeout:setTimeout,shouldAttemptEagerTransition:uO,setCurrentUpdatePriority:oO,shouldSetTextContent:cO,startSuspendingCommit:hO,suspendInstance:fO,trackSchedulerEvent:dO,unhideInstance:pO,waitForCommitToBeReady:gO},xg=LU(_O);xg.injectIntoDevTools({bundleType:0,rendererPackageName:"@pixi/react",version:pU.version});const vh=new Map;function yO(n,t={}){let e=vh.get(n),i=(e==null?void 0:e.applicationState)??{isInitialised:!1,isInitialising:!1};const a=(e==null?void 0:e.internalState)??{};e||(i.app=new Pg,a.rootContainer=_R(i.app.stage));const o=(e==null?void 0:e.fiber)??xg.createContainer(a.rootContainer,ah.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null);if(!e){let h;n instanceof HTMLCanvasElement&&(h=n),h||(h=document.createElement("canvas"),n.innerHTML="",n.appendChild(h)),a.canvas=h,e={applicationState:i,fiber:o,internalState:a,render:async(m,g)=>{var b;return!i.app.renderer&&!i.isInitialised&&!i.isInitialising&&(i.isInitialising=!0,await i.app.init({...g,canvas:h}),i.isInitialising=!1,i.isInitialised=!0,i={...i},(b=t.onInit)==null||b.call(t,i.app)),Object.entries(g).forEach(([x,E])=>{const T=x;gR(g,T)||(i.app[T]=E)}),xg.updateContainer(Qt.jsx(fU,{value:i,children:m}),o,null,()=>{}),i.app}},vh.set(h,e)}return e}function BR(n){ko.unmountQueue.delete(n);const t=n.fiber;t&&xg.updateContainer(null,t,null,()=>{n.applicationState.app&&n.applicationState.app.destroy(),vh.delete(n.internalState.canvas)})}function bO(){for(const n of ko.unmountQueue)BR(n)}function vO(n){const t=vh.get(n);t&&(t.applicationState.isInitialised?BR(t):ko.unmountQueue.add(t))}function xO(n){const t=vh.get(n);t&&ko.unmountQueue.delete(t)}var sS,lS;const ud=typeof window<"u"&&((sS=window.document)!=null&&sS.createElement||((lS=window.navigator)==null?void 0:lS.product)==="ReactNative")?Ht.useLayoutEffect:Ht.useEffect,SO={...Br.defaultTextStyle},EO=Ht.forwardRef(function(t,e){const{children:i,className:a,defaultTextStyle:o,extensions:h,onInit:f,resizeTo:m,...g}=t,b=YM(),x=Ht.useRef(null),E=Ht.useRef(null),T=Ht.useRef(new Set);Ht.useImperativeHandle(e,()=>({getApplication(){return x.current},getCanvas(){return E.current}}));const R=Ht.useCallback(()=>{const C=x.current;C&&(m?"current"in m?m.current instanceof HTMLElement&&(C.resizeTo=m.current):C.resizeTo=m:C.resizeTo=void 0)},[m]),D=Ht.useCallback(C=>{bO(),x.current=C,R(),f==null||f(C)},[f]);return ud(()=>{if(h){const C=[...h],G=T.current;for(const P of G.values()){const H=C.indexOf(P);H===-1&&(Oe.remove(P),G.delete(P)),C.splice(H,1)}for(const P in C)Oe.add(P),G.add(P)}},[h]),ud(()=>{const C=E.current;if(C){let G=vh.get(C);G||(G=yO(C,{onInit:D})),G.render(Qt.jsx(b,{children:i}),g)}},[g,i,D,m]),ud(()=>{R()},[m]),ud(()=>{o?Object.assign(Br.defaultTextStyle,o):Object.assign(Br.defaultTextStyle,SO)},[o]),Ht.useEffect(()=>{const C=E.current;if(C)return xO(C),()=>{vO(C)}},[]),Qt.jsx("canvas",{ref:E,className:a})}),TO=Ht.forwardRef(function(t,e){return Qt.jsx(cS,{children:Qt.jsx(EO,{ref:e,...t})})});function AO(n){Object.assign(Xy,n)}function Yd(){const n=Ht.useContext(a2);return s2(n.app instanceof Pg,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider"),n}function s0(n){const{app:t,isInitialised:e}=Yd();let i,a,o=!0,h;typeof n=="function"?i=n:(i=n.callback,a=n.context,o=n.isEnabled??!0,h=n.priority),s2(),ud(()=>{if(e){const f=t==null?void 0:t.ticker,m=o,g=a,b=i;return o&&f&&f.add(i,a,h),()=>{m&&(f==null||f.remove(b,g))}}},[i,a,e,h])}const CO=()=>{const[n,t]=Ht.useState({left:!1,right:!1,touchX:0});return Ht.useEffect(()=>{const e=o=>{(o.key==="ArrowLeft"||o.key.toLowerCase()==="a")&&t(h=>({...h,left:!0})),(o.key==="ArrowRight"||o.key.toLowerCase()==="d")&&t(h=>({...h,right:!0}))},i=o=>{(o.key==="ArrowLeft"||o.key.toLowerCase()==="a")&&t(h=>({...h,left:!1})),(o.key==="ArrowRight"||o.key.toLowerCase()==="d")&&t(h=>({...h,right:!1}))},a=o=>{t(h=>({...h,touchX:o.touches[0].clientX}))};return window.addEventListener("keydown",e),window.addEventListener("keyup",i),window.addEventListener("touchmove",a),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",i)}},[]),n},Nl=10,cd={},W1=(n,t)=>n.unstable_is?n.unstable_is(t):t===n,Q1=n=>"init"in n,H_=n=>!!n.write,Z1=n=>"v"in n||"e"in n,Jm=n=>{if("e"in n)throw n.e;if((cd?"production":void 0)!=="production"&&!("v"in n))throw new Error("[Bug] atom state is not initialized");return n.v},Sg=new WeakMap,J1=n=>{var t;return Eg(n)&&!!((t=Sg.get(n))!=null&&t[0])},BO=n=>{const t=Sg.get(n);t!=null&&t[0]&&(t[0]=!1,t[1].forEach(e=>e()))},RR=(n,t)=>{let e=Sg.get(n);if(!e){e=[!0,new Set],Sg.set(n,e);const i=()=>{e[0]=!1};n.then(i,i)}e[1].add(t)},Eg=n=>typeof(n==null?void 0:n.then)=="function",MR=(n,t,e)=>{e.p.has(n)||(e.p.add(n),t.then(()=>{e.p.delete(n)},()=>{e.p.delete(n)}))},L_=(n,t,e)=>{const i=e(n),a="v"in i,o=i.v;if(Eg(t))for(const h of i.d.keys())MR(n,t,e(h));i.v=t,delete i.e,(!a||!Object.is(o,i.v))&&(++i.n,Eg(o)&&BO(o))},$1=(n,t,e)=>{var i;const a=new Set;for(const o of((i=e.get(n))==null?void 0:i.t)||[])e.has(o)&&a.add(o);for(const o of t.p)a.add(o);return a},RO=()=>{const n=new Set,t=()=>{n.forEach(e=>e())};return t.add=e=>(n.add(e),()=>{n.delete(e)}),t},F_=()=>{const n={},t=new WeakMap,e=i=>{var a,o;(a=t.get(n))==null||a.forEach(h=>h(i)),(o=t.get(i))==null||o.forEach(h=>h())};return e.add=(i,a)=>{const o=i||n,h=(t.has(o)?t:t.set(o,new Set)).get(o);return h.add(a),()=>{h==null||h.delete(a),h.size||t.delete(o)}},e},MO=n=>(n.c||(n.c=F_()),n.m||(n.m=F_()),n.u||(n.u=F_()),n.f||(n.f=RO()),n),DO=Symbol(),wO=(n=new WeakMap,t=new WeakMap,e=new WeakMap,i=new Set,a=new Set,o=new Set,h={},f=(E,...T)=>E.read(...T),m=(E,...T)=>E.write(...T),g=(E,T)=>{var R;return(R=E.unstable_onInit)==null?void 0:R.call(E,T)},b=(E,T)=>{var R;return(R=E.onMount)==null?void 0:R.call(E,T)},...x)=>{const E=x[0]||(Y=>{if((cd?"production":void 0)!=="production"&&!Y)throw new Error("Atom is undefined or null");let ht=n.get(Y);return ht||(ht={d:new Map,p:new Set,n:0},n.set(Y,ht),g==null||g(Y,ot)),ht}),T=x[1]||(()=>{const Y=[],ht=N=>{try{N()}catch(X){Y.push(X)}};do{h.f&&ht(h.f);const N=new Set,X=N.add.bind(N);i.forEach(W=>{var rt;return(rt=t.get(W))==null?void 0:rt.l.forEach(X)}),i.clear(),o.forEach(X),o.clear(),a.forEach(X),a.clear(),N.forEach(ht),i.size&&R()}while(i.size||o.size||a.size);if(Y.length)throw new AggregateError(Y)}),R=x[2]||(()=>{const Y=[],ht=new WeakSet,N=new WeakSet,X=Array.from(i);for(;X.length;){const W=X[X.length-1],rt=E(W);if(N.has(W)){X.pop();continue}if(ht.has(W)){if(e.get(W)===rt.n)Y.push([W,rt]);else if((cd?"production":void 0)!=="production"&&e.has(W))throw new Error("[Bug] invalidated atom exists");N.add(W),X.pop();continue}ht.add(W);for(const ft of $1(W,rt,t))ht.has(ft)||X.push(ft)}for(let W=Y.length-1;W>=0;--W){const[rt,ft]=Y[W];let St=!1;for(const Ct of ft.d.keys())if(Ct!==rt&&i.has(Ct)){St=!0;break}St&&(D(rt),P(rt)),e.delete(rt)}}),D=x[3]||(Y=>{var ht;const N=E(Y);if(Z1(N)&&(t.has(Y)&&e.get(Y)!==N.n||Array.from(N.d).every(([j,ut])=>D(j).n===ut)))return N;N.d.clear();let X=!0;const W=()=>{t.has(Y)&&(P(Y),R(),T())},rt=j=>{var ut;if(W1(Y,j)){const z=E(j);if(!Z1(z))if(Q1(j))L_(j,j.init,E);else throw new Error("no atom init");return Jm(z)}const ct=D(j);try{return Jm(ct)}finally{N.d.set(j,ct.n),J1(N.v)&&MR(Y,N.v,ct),(ut=t.get(j))==null||ut.t.add(Y),X||W()}};let ft,St;const Ct={get signal(){return ft||(ft=new AbortController),ft.signal},get setSelf(){return(cd?"production":void 0)!=="production"&&!H_(Y)&&console.warn("setSelf function cannot be used with read-only atom"),!St&&H_(Y)&&(St=(...j)=>{if((cd?"production":void 0)!=="production"&&X&&console.warn("setSelf function cannot be called in sync"),!X)try{return G(Y,...j)}finally{R(),T()}}),St}},V=N.n;try{const j=f(Y,rt,Ct);return L_(Y,j,E),Eg(j)&&(RR(j,()=>ft==null?void 0:ft.abort()),j.then(W,W)),N}catch(j){return delete N.v,N.e=j,++N.n,N}finally{X=!1,V!==N.n&&e.get(Y)===V&&(e.set(Y,N.n),i.add(Y),(ht=h.c)==null||ht.call(h,Y))}}),C=x[4]||(Y=>{const ht=[Y];for(;ht.length;){const N=ht.pop(),X=E(N);for(const W of $1(N,X,t)){const rt=E(W);e.set(W,rt.n),ht.push(W)}}}),G=x[5]||((Y,...ht)=>{let N=!0;const X=rt=>Jm(D(rt)),W=(rt,...ft)=>{var St;const Ct=E(rt);try{if(W1(Y,rt)){if(!Q1(rt))throw new Error("atom not writable");const V=Ct.n,j=ft[0];L_(rt,j,E),P(rt),V!==Ct.n&&(i.add(rt),(St=h.c)==null||St.call(h,rt),C(rt));return}else return G(rt,...ft)}finally{N||(R(),T())}};try{return m(Y,X,W,...ht)}finally{N=!1}}),P=x[6]||(Y=>{var ht;const N=E(Y),X=t.get(Y);if(X&&!J1(N.v)){for(const[W,rt]of N.d)if(!X.d.has(W)){const ft=E(W);H(W).t.add(Y),X.d.add(W),rt!==ft.n&&(i.add(W),(ht=h.c)==null||ht.call(h,W),C(W))}for(const W of X.d||[])if(!N.d.has(W)){X.d.delete(W);const rt=q(W);rt==null||rt.t.delete(Y)}}}),H=x[7]||(Y=>{var ht;const N=E(Y);let X=t.get(Y);if(!X){D(Y);for(const W of N.d.keys())H(W).t.add(Y);if(X={l:new Set,d:new Set(N.d.keys()),t:new Set},t.set(Y,X),(ht=h.m)==null||ht.call(h,Y),H_(Y)){const W=()=>{let rt=!0;const ft=(...St)=>{try{return G(Y,...St)}finally{rt||(R(),T())}};try{const St=b(Y,ft);St&&(X.u=()=>{rt=!0;try{St()}finally{rt=!1}})}finally{rt=!1}};a.add(W)}}return X}),q=x[8]||(Y=>{var ht;const N=E(Y);let X=t.get(Y);if(X&&!X.l.size&&!Array.from(X.t).some(W=>{var rt;return(rt=t.get(W))==null?void 0:rt.d.has(Y)})){X.u&&o.add(X.u),X=void 0,t.delete(Y),(ht=h.u)==null||ht.call(h,Y);for(const W of N.d.keys()){const rt=q(W);rt==null||rt.t.delete(Y)}return}return X}),et=[n,t,e,i,a,o,h,f,m,g,b,E,T,R,D,C,G,P,H,q],ot={get:Y=>Jm(D(Y)),set:(Y,...ht)=>{try{return G(Y,...ht)}finally{R(),T()}},sub:(Y,ht)=>{const X=H(Y).l;return X.add(ht),T(),()=>{X.delete(ht),q(Y),T()}}};return Object.defineProperty(ot,DO,{value:et}),ot},DR=wO,UO=MO,tS=RR,l2={};let OO=0;function Fl(n,t){const e=`atom${++OO}`,i={toString(){return(l2?"production":void 0)!=="production"&&this.debugLabel?e+":"+this.debugLabel:e}};return typeof n=="function"?i.read=n:(i.init=n,i.read=GO,i.write=PO),t&&(i.write=t),i}function GO(n){return n(this)}function PO(n,t,e){return t(this,typeof e=="function"?e(n(this)):e)}const NO=()=>{let n=0;const t=UO({}),e=new WeakMap,i=new WeakMap,a=DR(e,i,void 0,void 0,void 0,void 0,t,void 0,(f,m,g,...b)=>n?g(f,...b):f.write(m,g,...b)),o=new Set;return t.m.add(void 0,f=>{o.add(f);const m=e.get(f);m.m=i.get(f)}),t.u.add(void 0,f=>{o.delete(f);const m=e.get(f);delete m.m}),Object.assign(a,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),e),dev4_get_mounted_atoms:()=>o,dev4_restore_atoms:f=>{const m={read:()=>null,write:(g,b)=>{++n;try{for(const[x,E]of f)"init"in x&&b(x,E)}finally{--n}}};a.set(m)}})};function zO(){return(l2?"production":void 0)!=="production"?NO():DR()}let id;function HO(){return id||(id=zO(),(l2?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=id),globalThis.__JOTAI_DEFAULT_STORE__!==id&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),id}const LO={},FO=Ht.createContext(void 0);function wR(n){return Ht.useContext(FO)||HO()}const Iy=n=>typeof(n==null?void 0:n.then)=="function",Yy=n=>{n.status||(n.status="pending",n.then(t=>{n.status="fulfilled",n.value=t},t=>{n.status="rejected",n.reason=t}))},VO=Ky.use||(n=>{if(n.status==="pending")throw n;if(n.status==="fulfilled")return n.value;throw n.status==="rejected"?n.reason:(Yy(n),n)}),V_=new WeakMap,eS=(n,t)=>{let e=V_.get(n);return e||(e=new Promise((i,a)=>{let o=n;const h=g=>b=>{o===g&&i(b)},f=g=>b=>{o===g&&a(b)},m=()=>{try{const g=t();Iy(g)?(V_.set(g,e),o=g,g.then(h(g),f(g)),tS(g,m)):i(g)}catch(g){a(g)}};n.then(h(n),f(n)),tS(n,m)}),V_.set(n,e)),e};function Rh(n,t){const{delay:e,unstable_promiseStatus:i=!Ky.use}={},a=wR(),[[o,h,f],m]=Ht.useReducer(b=>{const x=a.get(n);return Object.is(b[0],x)&&b[1]===a&&b[2]===n?b:[x,a,n]},void 0,()=>[a.get(n),a,n]);let g=o;if((h!==a||f!==n)&&(m(),g=a.get(n)),Ht.useEffect(()=>{const b=a.sub(n,()=>{if(i)try{const x=a.get(n);Iy(x)&&Yy(eS(x,()=>a.get(n)))}catch{}if(typeof e=="number"){setTimeout(m,e);return}m()});return m(),b},[a,n,e,i]),Ht.useDebugValue(g),Iy(g)){const b=eS(g,()=>a.get(n));return i&&Yy(b),VO(b)}return g}function kl(n,t){const e=wR();return Ht.useCallback((...a)=>{if((LO?"production":void 0)!=="production"&&!("write"in n))throw new Error("not writable atom");return e.set(n,...a)},[e,n])}function o2(n,t){return[Rh(n),kl(n)]}const Tg=[{label:"missile_1",texture:"missile_1",speed:2,damage:1,scale:1,fireInterval:500},{label:"missile_2",texture:"missile_2",speed:10,damage:2,scale:1.2,fireInterval:100},{label:"missile_3",texture:"missile_3",speed:6,damage:3,scale:1.5,fireInterval:300}],UR=Fl([]),OR=()=>kl(UR),kO=()=>o2(UR),GR=Fl(Tg[0]),XO=()=>kl(GR),IO=()=>Rh(GR),YO=Fl(null),qO=()=>kl(YO),PR=Fl(null),NR=()=>Rh(PR),jO=()=>kl(PR),nS=5,iS=.2,rS=.1,KO=()=>{const n=Ht.useRef(null),t=Ht.useRef(null),{app:e}=Yd(),{left:i,right:a,touchX:o}=CO(),[h]=Ht.useState(!0),[f,m]=Ht.useState(0),g=qO(),b=OR(),x=jO(),E=IO(),T=Ht.useRef(0);Ht.useEffect(()=>{n.current&&x(n.current)},[x]),Ht.useEffect(()=>{t&&g(t.current)},[g]);const R=()=>{if(!n.current)return;const C=n.current;i?T.current=Math.max(T.current-iS,-nS):a?T.current=Math.min(T.current+iS,nS):T.current>0?T.current=Math.max(T.current-rS,0):T.current<0&&(T.current=Math.min(T.current+rS,0)),C.x+=T.current,o&&(C.x=o,T.current=0);const G=C.width/2;C.x=Math.max(G+Nl,Math.min(e.screen.width-G-Nl,C.x))},D=()=>{var G;if(!n.current||!t.current)return;const C=new Ri(ya.get(E.texture));C.anchor.set(.5),C.scale.set(E.scale),C.x=n.current.x,C.y=n.current.y,(G=t.current)==null||G.addChild(C),b(P=>[...P,{sprite:C,data:E}])};return s0(C=>{n.current&&(R(),h&&C.lastTime-f>E.fireInterval&&(D(),m(C.lastTime)),b(G=>G.filter(P=>{var H;return P.sprite.y-=P.data.speed,P.sprite.y<-20?((H=t.current)==null||H.removeChild(P.sprite),!1):!0})))}),Qt.jsxs(Qt.Fragment,{children:[Qt.jsx("pixiSprite",{ref:n,texture:ya.get("jet"),anchor:.5,x:e.screen.width/2,y:e.screen.height-100}),Qt.jsx("pixiContainer",{ref:t})]})},WO=()=>Qt.jsx("div",{children:"GameLoading"}),u2=Fl("menu"),QO=()=>o2(u2),ZO=()=>Rh(u2),c2=()=>kl(u2),JO=()=>{const n=c2(),t=()=>{n("playing")};return Qt.jsxs("div",{className:"game-menu",children:[Qt.jsx("h1",{children:"World's On Fire"}),Qt.jsx("button",{onClick:t,children:"Start Game"})]})},h2={},$O=Symbol((h2?"production":void 0)!=="production"?"RESET":""),zR=n=>typeof(n==null?void 0:n.then)=="function";function t6(n=()=>{try{return window.localStorage}catch(e){(h2?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(e);return}},t){var e;let i,a;const o={getItem:(m,g)=>{var b,x;const E=R=>{if(R=R||"",i!==R){try{a=JSON.parse(R,t==null?void 0:t.reviver)}catch{return g}i=R}return a},T=(x=(b=n())==null?void 0:b.getItem(m))!=null?x:null;return zR(T)?T.then(E):E(T)},setItem:(m,g)=>{var b;return(b=n())==null?void 0:b.setItem(m,JSON.stringify(g,void 0))},removeItem:m=>{var g;return(g=n())==null?void 0:g.removeItem(m)}},h=m=>(g,b,x)=>m(g,E=>{let T;try{T=JSON.parse(E||"")}catch{T=x}b(T)});let f;try{f=(e=n())==null?void 0:e.subscribe}catch{}return!f&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(f=(m,g)=>{if(!(n()instanceof window.Storage))return()=>{};const b=x=>{x.storageArea===n()&&x.key===m&&g(x.newValue)};return window.addEventListener("storage",b),()=>{window.removeEventListener("storage",b)}}),f&&(o.subscribe=h(f)),o}const e6=t6();function n6(n,t,e=e6,i){const a=Fl(t);return(h2?"production":void 0)!=="production"&&(a.debugPrivate=!0),a.onMount=h=>{h(e.getItem(n,t));let f;return e.subscribe&&(f=e.subscribe(n,h,t)),f},Fl(h=>h(a),(h,f,m)=>{const g=typeof m=="function"?m(h(a)):m;return g===$O?(f(a,t),e.removeItem(n)):zR(g)?g.then(b=>(f(a,b),e.setItem(n,b))):(f(a,g),e.setItem(n,g))})}const HR=Fl(0),LR=()=>kl(HR),l0=()=>Rh(HR),FR=n6("highScore",0),i6=()=>kl(FR),r6=()=>Rh(FR),a6=()=>{const n=l0(),t=r6(),e=c2(),i=()=>{e("menu")};return Qt.jsxs("div",{className:"game-over",children:[Qt.jsx("div",{className:"game-over-title",children:"Game Over"}),Qt.jsxs("div",{className:"game-over-score",children:["Score: ",n]}),Qt.jsxs("div",{className:"game-over-high-score",children:["High Score: ",t]}),Qt.jsx("button",{onClick:i,children:"Menu"})]})},VR=Fl([]),kR=()=>kl(VR),s6=()=>o2(VR),hd=[{label:"enemy_1",texture:"enemy_1",speed:2,scale:2,spawnInterval:2e3,spawnAfterScore:0},{label:"enemy_2",texture:"enemy_2",speed:3,scale:2.5,spawnInterval:1e3,spawnAfterScore:10},{label:"enemy_3",texture:"enemy_3",speed:5,scale:3,spawnInterval:500,spawnAfterScore:20}],aS=n=>{for(let t=hd.length-1;t>=0;t--)if(n>=hd[t].spawnAfterScore)return hd[t];return hd[0]},l6=()=>{const n=Ht.useRef(null),t=kR(),e=l0(),[i,a]=Ht.useState(0),{app:o}=Yd(),h=()=>{var g;const f=aS(e),m=new Ri(ya.get(f.texture));m.anchor.set(.5),m.scale.set(f.scale),m.rotation=Math.PI,m.x=Math.random()*(o.screen.width-Nl*2)+Nl,m.y=-Nl,(g=n.current)==null||g.addChild(m),t(b=>[...b,{sprite:m,data:f}])};return s0(f=>{const m=aS(e);f.lastTime-i>m.spawnInterval&&(h(),a(f.lastTime)),t(g=>g.filter(b=>{var x;return b.sprite.y+=b.data.speed,b.sprite.y>o.screen.height?((x=b.sprite.parent)==null||x.removeChild(b.sprite),!1):!0}))}),Qt.jsx(Qt.Fragment,{children:Qt.jsx("pixiContainer",{ref:n})})},XR=()=>(t,e)=>{if(!t||!e)return!1;const i=t.getBounds(),a=e.getBounds();return i.x<a.x+a.width&&i.x+i.width>a.x&&i.y<a.y+a.height&&i.y+i.height>a.y},o6=()=>{const[n,t]=kO(),[e,i]=s6(),a=Ht.useRef(null),o=Ht.useRef(null),h=NR(),f=LR(),m=XR(),g=c2(),b=i6(),x=l0();return s0(()=>{e.forEach(E=>{var T,R;if(n.forEach(D=>{var C,G,P;if(m(D.sprite,E.sprite)){(C=D.sprite.parent)==null||C.removeChild(D.sprite),(G=E.sprite.parent)==null||G.removeChild(E.sprite),t(q=>q.filter(et=>et!==D)),i(q=>q.filter(et=>et!==E)),f(q=>q+1);const H=new Ri(ya.get("enemy_hit"));H.anchor.set(.5),H.x=E.sprite.x,H.y=E.sprite.y,H.scale.set(2),(P=a.current)==null||P.addChild(H),setTimeout(()=>{var q;(q=H.parent)==null||q.removeChild(H)},300)}}),h&&m(h,E.sprite)){(T=E.sprite.parent)==null||T.removeChild(E.sprite),i(C=>C.filter(G=>G!==E)),g("gameover"),b(C=>(console.log(C,x),C<x?x:C));const D=new Ri(ya.get("player_hit"));D.anchor.set(.5),D.x=h.x,D.y=h.y,D.scale.set(4),(R=o.current)==null||R.addChild(D),setTimeout(()=>{var C;(C=D.parent)==null||C.removeChild(D)},300)}})}),Qt.jsxs(Qt.Fragment,{children:[Qt.jsx("pixiContainer",{ref:a}),Qt.jsx("pixiContainer",{ref:o})]})},u6=()=>{const n=l0(),[t,e]=QO(),i=()=>{e(t==="paused"?"playing":"paused")};return Qt.jsxs("div",{className:"game-stats",children:[t==="playing"&&Qt.jsx("button",{onClick:i,children:"Pause"}),t==="paused"&&Qt.jsx("button",{onClick:i,children:"Play"}),Qt.jsxs("div",{className:"game-stats-score",children:["Score: ",n]})]})};async function c6(n){var t;const e={importPixi:!1,...n};e.app&&(e.renderer=e.app.renderer,e.stage=e.app.stage),e.importPixi&&!e.pixi&&(e.pixi=await vd(()=>Promise.resolve().then(()=>uU),void 0)),window.__PIXI_DEVTOOLS__={...window.__PIXI_DEVTOOLS__||{},app:e.app,stage:e.stage,renderer:e.renderer,extensions:[...((t=window.__PIXI_DEVTOOLS__)==null?void 0:t.extensions)||[],...e.extensions||[]],plugins:{}}}const h6=()=>{const{app:n}=Yd();return c6({app:n}),null},f6=1e4,d6=2,p6=()=>{const n=Ht.useRef(null),[t,e]=Ht.useState(0),[i,a]=Ht.useState([]),{app:o}=Yd(),h=NR(),f=XR(),m=XO(),g=()=>{var E;const b=Tg[Math.floor(Math.random()*Tg.length)],x=new Ri(ya.get(b.texture));x.anchor.set(.5),x.scale.set(3),x.x=Math.random()*(o.screen.width-Nl*2)+Nl,x.y=-Nl,(E=n.current)==null||E.addChild(x),a(T=>[...T,{sprite:x,type:b}])};return s0(b=>{b.lastTime-t>f6&&(g(),e(b.lastTime)),i.forEach(x=>{var E;h&&f(h,x.sprite)&&(console.log("hit",x.type.label),(E=x.sprite.parent)==null||E.removeChild(x.sprite),a(T=>T.filter(R=>R!==x)),m(x.type))}),a(x=>x.filter(E=>{var T;return E.sprite.y+=d6,E.sprite.y>o.screen.height+Nl?((T=n.current)==null||T.removeChild(E.sprite),!1):!0}))}),Qt.jsx(Qt.Fragment,{children:Qt.jsx("pixiContainer",{ref:n})})};AO({Container:Vn,Sprite:Ri});function m6(){const[n,t]=Ht.useState(!1),[e,i]=Ht.useState(null),a=Ht.useRef(null),o=ZO(),h=OR(),f=kR(),m=LR();return Ht.useEffect(()=>{o==="gameover"&&(h([]),f([]),m(0))},[o,f,h,m]),Ht.useEffect(()=>{(async()=>{try{await ya.load([{alias:"jet",src:"./assets/jet.png"},{alias:"enemy_hit",src:"./assets/enemy_hit.png"},{alias:"player_hit",src:"./assets/player_hit.png"},...Tg.map(b=>({alias:b.label,src:`./assets/${b.texture}.png`})),...hd.map(b=>({alias:b.label,src:`./assets/${b.texture}.png`}))]),t(!0)}catch(b){i(b instanceof Error?b:new Error("Failed to load assets"))}})()},[]),Ht.useEffect(()=>{var g,b;a.current&&(o==="playing"?(g=a.current.getApplication())==null||g.start():(b=a.current.getApplication())==null||b.stop())},[o]),e?Qt.jsxs("div",{children:["Error loading assets: ",e.message]}):n?o==="menu"?Qt.jsx(JO,{}):Qt.jsxs(Qt.Fragment,{children:[Qt.jsx(u6,{}),o==="gameover"&&Qt.jsx(a6,{}),Qt.jsxs(TO,{background:"#1099bb",resizeTo:window,ref:a,children:[Qt.jsx(h6,{}),Qt.jsx(KO,{}),Qt.jsx(l6,{}),Qt.jsx(p6,{}),Qt.jsx(o6,{})]})]}):Qt.jsx(WO,{})}NM.createRoot(document.getElementById("pixi-container")).render(Qt.jsx(m6,{}));export{wD as A,$B as B,Vn as C,kT as D,YT as E,R8 as F,nB as G,uR as H,bB as M,zB as N,$3 as R,tE as T,UD as a,Tb as b,BB as c,RB as d,Oe as e,fR as f,hR as g,eR as h,qB as i,hA as j,uA as k};
