const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-fL-cH2YB.js","assets/webworkerAll-Cc9K4LWg.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function sb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $_={exports:{}},Qf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ox;function ZM(){if(ox)return Qf;ox=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,s,o){var h=null;if(o!==void 0&&(h=""+o),s.key!==void 0&&(h=""+s.key),"key"in s){o={};for(var f in s)f!=="key"&&(o[f]=s[f])}else o=s;return s=o.ref,{$$typeof:n,type:i,key:h,ref:s!==void 0?s:null,props:o}}return Qf.Fragment=t,Qf.jsx=e,Qf.jsxs=e,Qf}var ux;function JM(){return ux||(ux=1,$_.exports=ZM()),$_.exports}var Nt=JM(),t0={exports:{}},Zf={},e0={exports:{}},n0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx;function $M(){return cx||(cx=1,function(n){function t(F,K){var ut=F.length;F.push(K);t:for(;0<ut;){var ft=ut-1>>>1,z=F[ft];if(0<s(z,K))F[ft]=K,F[ut]=z,ut=ft;else break t}}function e(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var K=F[0],ut=F.pop();if(ut!==K){F[0]=ut;t:for(var ft=0,z=F.length,it=z>>>1;ft<it;){var At=2*(ft+1)-1,Rt=F[At],yt=At+1,Mt=F[yt];if(0>s(Rt,ut))yt<z&&0>s(Mt,Rt)?(F[ft]=Mt,F[yt]=ut,ft=yt):(F[ft]=Rt,F[At]=ut,ft=At);else if(yt<z&&0>s(Mt,ut))F[ft]=Mt,F[yt]=ut,ft=yt;else break t}}return K}function s(F,K){var ut=F.sortIndex-K.sortIndex;return ut!==0?ut:F.id-K.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var h=Date,f=h.now();n.unstable_now=function(){return h.now()-f}}var m=[],g=[],b=1,x=null,E=3,A=!1,R=!1,D=!1,B=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function H(F){for(var K=e(g);K!==null;){if(K.callback===null)i(g);else if(K.startTime<=F)i(g),K.sortIndex=K.expirationTime,t(m,K);else break;K=e(g)}}function j(F){if(D=!1,H(F),!R)if(e(m)!==null)R=!0,bt();else{var K=e(g);K!==null&&Tt(j,K.startTime-F)}}var Z=!1,nt=-1,V=5,ht=-1;function N(){return!(n.unstable_now()-ht<V)}function Y(){if(Z){var F=n.unstable_now();ht=F;var K=!0;try{t:{R=!1,D&&(D=!1,P(nt),nt=-1),A=!0;var ut=E;try{e:{for(H(F),x=e(m);x!==null&&!(x.expirationTime>F&&N());){var ft=x.callback;if(typeof ft=="function"){x.callback=null,E=x.priorityLevel;var z=ft(x.expirationTime<=F);if(F=n.unstable_now(),typeof z=="function"){x.callback=z,H(F),K=!0;break e}x===e(m)&&i(m),H(F)}else i(m);x=e(m)}if(x!==null)K=!0;else{var it=e(g);it!==null&&Tt(j,it.startTime-F),K=!1}}break t}finally{x=null,E=ut,A=!1}K=void 0}}finally{K?X():Z=!1}}}var X;if(typeof G=="function")X=function(){G(Y)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ct=$.port2;$.port1.onmessage=Y,X=function(){ct.postMessage(null)}}else X=function(){B(Y,0)};function bt(){Z||(Z=!0,X())}function Tt(F,K){nt=B(function(){F(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){R||A||(R=!0,bt())},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return e(m)},n.unstable_next=function(F){switch(E){case 1:case 2:case 3:var K=3;break;default:K=E}var ut=E;E=K;try{return F()}finally{E=ut}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,K){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ut=E;E=F;try{return K()}finally{E=ut}},n.unstable_scheduleCallback=function(F,K,ut){var ft=n.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?ft+ut:ft):ut=ft,F){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=ut+z,F={id:b++,callback:K,priorityLevel:F,startTime:ut,expirationTime:z,sortIndex:-1},ut>ft?(F.sortIndex=ut,t(g,F),e(m)===null&&F===e(g)&&(D?(P(nt),nt=-1):D=!0,Tt(j,ut-ft))):(F.sortIndex=z,t(m,F),R||A||(R=!0,bt())),F},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(F){var K=E;return function(){var ut=E;E=K;try{return F.apply(this,arguments)}finally{E=ut}}}}(n0)),n0}var hx;function tD(){return hx||(hx=1,e0.exports=$M()),e0.exports}var i0={exports:{}},ee={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fx;function eD(){if(fx)return ee;fx=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.iterator;function E(z){return z===null||typeof z!="object"?null:(z=x&&z[x]||z["@@iterator"],typeof z=="function"?z:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,D={};function B(z,it,At){this.props=z,this.context=it,this.refs=D,this.updater=At||A}B.prototype.isReactComponent={},B.prototype.setState=function(z,it){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,it,"setState")},B.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function P(){}P.prototype=B.prototype;function G(z,it,At){this.props=z,this.context=it,this.refs=D,this.updater=At||A}var H=G.prototype=new P;H.constructor=G,R(H,B.prototype),H.isPureReactComponent=!0;var j=Array.isArray,Z={H:null,A:null,T:null,S:null},nt=Object.prototype.hasOwnProperty;function V(z,it,At,Rt,yt,Mt){return At=Mt.ref,{$$typeof:n,type:z,key:it,ref:At!==void 0?At:null,props:Mt}}function ht(z,it){return V(z.type,it,void 0,void 0,void 0,z.props)}function N(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function Y(z){var it={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(At){return it[At]})}var X=/\/+/g;function $(z,it){return typeof z=="object"&&z!==null&&z.key!=null?Y(""+z.key):it.toString(36)}function ct(){}function bt(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(ct,ct):(z.status="pending",z.then(function(it){z.status==="pending"&&(z.status="fulfilled",z.value=it)},function(it){z.status==="pending"&&(z.status="rejected",z.reason=it)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function Tt(z,it,At,Rt,yt){var Mt=typeof z;(Mt==="undefined"||Mt==="boolean")&&(z=null);var Ft=!1;if(z===null)Ft=!0;else switch(Mt){case"bigint":case"string":case"number":Ft=!0;break;case"object":switch(z.$$typeof){case n:case t:Ft=!0;break;case b:return Ft=z._init,Tt(Ft(z._payload),it,At,Rt,yt)}}if(Ft)return yt=yt(z),Ft=Rt===""?"."+$(z,0):Rt,j(yt)?(At="",Ft!=null&&(At=Ft.replace(X,"$&/")+"/"),Tt(yt,it,At,"",function(ne){return ne})):yt!=null&&(N(yt)&&(yt=ht(yt,At+(yt.key==null||z&&z.key===yt.key?"":(""+yt.key).replace(X,"$&/")+"/")+Ft)),it.push(yt)),1;Ft=0;var Pe=Rt===""?".":Rt+":";if(j(z))for(var Gt=0;Gt<z.length;Gt++)Rt=z[Gt],Mt=Pe+$(Rt,Gt),Ft+=Tt(Rt,it,At,Mt,yt);else if(Gt=E(z),typeof Gt=="function")for(z=Gt.call(z),Gt=0;!(Rt=z.next()).done;)Rt=Rt.value,Mt=Pe+$(Rt,Gt++),Ft+=Tt(Rt,it,At,Mt,yt);else if(Mt==="object"){if(typeof z.then=="function")return Tt(bt(z),it,At,Rt,yt);throw it=String(z),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return Ft}function F(z,it,At){if(z==null)return z;var Rt=[],yt=0;return Tt(z,Rt,"","",function(Mt){return it.call(At,Mt,yt++)}),Rt}function K(z){if(z._status===-1){var it=z._result;it=it(),it.then(function(At){(z._status===0||z._status===-1)&&(z._status=1,z._result=At)},function(At){(z._status===0||z._status===-1)&&(z._status=2,z._result=At)}),z._status===-1&&(z._status=0,z._result=it)}if(z._status===1)return z._result.default;throw z._result}var ut=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function ft(){}return ee.Children={map:F,forEach:function(z,it,At){F(z,function(){it.apply(this,arguments)},At)},count:function(z){var it=0;return F(z,function(){it++}),it},toArray:function(z){return F(z,function(it){return it})||[]},only:function(z){if(!N(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},ee.Component=B,ee.Fragment=e,ee.Profiler=s,ee.PureComponent=G,ee.StrictMode=i,ee.Suspense=m,ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,ee.act=function(){throw Error("act(...) is not supported in production builds of React.")},ee.cache=function(z){return function(){return z.apply(null,arguments)}},ee.cloneElement=function(z,it,At){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var Rt=R({},z.props),yt=z.key,Mt=void 0;if(it!=null)for(Ft in it.ref!==void 0&&(Mt=void 0),it.key!==void 0&&(yt=""+it.key),it)!nt.call(it,Ft)||Ft==="key"||Ft==="__self"||Ft==="__source"||Ft==="ref"&&it.ref===void 0||(Rt[Ft]=it[Ft]);var Ft=arguments.length-2;if(Ft===1)Rt.children=At;else if(1<Ft){for(var Pe=Array(Ft),Gt=0;Gt<Ft;Gt++)Pe[Gt]=arguments[Gt+2];Rt.children=Pe}return V(z.type,yt,void 0,void 0,Mt,Rt)},ee.createContext=function(z){return z={$$typeof:h,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:o,_context:z},z},ee.createElement=function(z,it,At){var Rt,yt={},Mt=null;if(it!=null)for(Rt in it.key!==void 0&&(Mt=""+it.key),it)nt.call(it,Rt)&&Rt!=="key"&&Rt!=="__self"&&Rt!=="__source"&&(yt[Rt]=it[Rt]);var Ft=arguments.length-2;if(Ft===1)yt.children=At;else if(1<Ft){for(var Pe=Array(Ft),Gt=0;Gt<Ft;Gt++)Pe[Gt]=arguments[Gt+2];yt.children=Pe}if(z&&z.defaultProps)for(Rt in Ft=z.defaultProps,Ft)yt[Rt]===void 0&&(yt[Rt]=Ft[Rt]);return V(z,Mt,void 0,void 0,null,yt)},ee.createRef=function(){return{current:null}},ee.forwardRef=function(z){return{$$typeof:f,render:z}},ee.isValidElement=N,ee.lazy=function(z){return{$$typeof:b,_payload:{_status:-1,_result:z},_init:K}},ee.memo=function(z,it){return{$$typeof:g,type:z,compare:it===void 0?null:it}},ee.startTransition=function(z){var it=Z.T,At={};Z.T=At;try{var Rt=z(),yt=Z.S;yt!==null&&yt(At,Rt),typeof Rt=="object"&&Rt!==null&&typeof Rt.then=="function"&&Rt.then(ft,ut)}catch(Mt){ut(Mt)}finally{Z.T=it}},ee.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},ee.use=function(z){return Z.H.use(z)},ee.useActionState=function(z,it,At){return Z.H.useActionState(z,it,At)},ee.useCallback=function(z,it){return Z.H.useCallback(z,it)},ee.useContext=function(z){return Z.H.useContext(z)},ee.useDebugValue=function(){},ee.useDeferredValue=function(z,it){return Z.H.useDeferredValue(z,it)},ee.useEffect=function(z,it){return Z.H.useEffect(z,it)},ee.useId=function(){return Z.H.useId()},ee.useImperativeHandle=function(z,it,At){return Z.H.useImperativeHandle(z,it,At)},ee.useInsertionEffect=function(z,it){return Z.H.useInsertionEffect(z,it)},ee.useLayoutEffect=function(z,it){return Z.H.useLayoutEffect(z,it)},ee.useMemo=function(z,it){return Z.H.useMemo(z,it)},ee.useOptimistic=function(z,it){return Z.H.useOptimistic(z,it)},ee.useReducer=function(z,it,At){return Z.H.useReducer(z,it,At)},ee.useRef=function(z){return Z.H.useRef(z)},ee.useState=function(z){return Z.H.useState(z)},ee.useSyncExternalStore=function(z,it,At){return Z.H.useSyncExternalStore(z,it,At)},ee.useTransition=function(){return Z.H.useTransition()},ee.version="19.0.0",ee}var dx;function ab(){return dx||(dx=1,i0.exports=eD()),i0.exports}var r0={exports:{}},Ii={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var px;function nD(){if(px)return Ii;px=1;var n=ab();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(m,g,b){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:x==null?null:""+x,children:m,containerInfo:g,implementation:b}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ii.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ii.createPortal=function(m,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return o(m,g,null,b)},Ii.flushSync=function(m){var g=h.T,b=i.p;try{if(h.T=null,i.p=2,m)return m()}finally{h.T=g,i.p=b,i.d.f()}},Ii.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},Ii.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Ii.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var b=g.as,x=f(b,g.crossOrigin),E=typeof g.integrity=="string"?g.integrity:void 0,A=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:x,integrity:E,fetchPriority:A}):b==="script"&&i.d.X(m,{crossOrigin:x,integrity:E,fetchPriority:A,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ii.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=f(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},Ii.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,x=f(b,g.crossOrigin);i.d.L(m,b,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ii.preloadModule=function(m,g){if(typeof m=="string")if(g){var b=f(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},Ii.requestFormReset=function(m){i.d.r(m)},Ii.unstable_batchedUpdates=function(m,g){return m(g)},Ii.useFormState=function(m,g,b){return h.H.useFormState(m,g,b)},Ii.useFormStatus=function(){return h.H.useHostTransitionStatus()},Ii.version="19.0.0",Ii}var mx;function iD(){if(mx)return r0.exports;mx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),r0.exports=nD(),r0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gx;function rD(){if(gx)return Zf;gx=1;var n=tD(),t=ab(),e=iD();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}var o=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),A=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),j=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function nt(r){return r===null||typeof r!="object"?null:(r=Z&&r[Z]||r["@@iterator"],typeof r=="function"?r:null)}var V=Symbol.for("react.client.reference");function ht(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===V?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case m:return"Fragment";case f:return"Portal";case b:return"Profiler";case g:return"StrictMode";case D:return"Suspense";case B:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case A:return(r.displayName||"Context")+".Provider";case E:return(r._context.displayName||"Context")+".Consumer";case R:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case P:return a=r.displayName||null,a!==null?a:ht(r.type)||"Memo";case G:a=r._payload,r=r._init;try{return ht(r(a))}catch{}}return null}var N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=Object.assign,X,$;function ct(r){if(X===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);X=a&&a[1]||"",$=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+X+r+$}var bt=!1;function Tt(r,a){if(!r||bt)return"";bt=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var _t=function(){throw Error()};if(Object.defineProperty(_t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_t,[])}catch(dt){var lt=dt}Reflect.construct(r,[],_t)}else{try{_t.call()}catch(dt){lt=dt}r.call(_t.prototype)}}else{try{throw Error()}catch(dt){lt=dt}(_t=r())&&typeof _t.catch=="function"&&_t.catch(function(){})}}catch(dt){if(dt&&lt&&typeof dt.stack=="string")return[dt.stack,lt.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),C=v[0],w=v[1];if(C&&w){var L=C.split(`
`),Q=w.split(`
`);for(_=d=0;d<L.length&&!L[d].includes("DetermineComponentFrameRoot");)d++;for(;_<Q.length&&!Q[_].includes("DetermineComponentFrameRoot");)_++;if(d===L.length||_===Q.length)for(d=L.length-1,_=Q.length-1;1<=d&&0<=_&&L[d]!==Q[_];)_--;for(;1<=d&&0<=_;d--,_--)if(L[d]!==Q[_]){if(d!==1||_!==1)do if(d--,_--,0>_||L[d]!==Q[_]){var mt=`
`+L[d].replace(" at new "," at ");return r.displayName&&mt.includes("<anonymous>")&&(mt=mt.replace("<anonymous>",r.displayName)),mt}while(1<=d&&0<=_);break}}}finally{bt=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?ct(c):""}function F(r){switch(r.tag){case 26:case 27:case 5:return ct(r.type);case 16:return ct("Lazy");case 13:return ct("Suspense");case 19:return ct("SuspenseList");case 0:case 15:return r=Tt(r.type,!1),r;case 11:return r=Tt(r.type.render,!1),r;case 1:return r=Tt(r.type,!0),r;default:return""}}function K(r){try{var a="";do a+=F(r),r=r.return;while(r);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function ut(r){var a=r,c=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(c=a.return),r=a.return;while(r)}return a.tag===3?c:null}function ft(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function z(r){if(ut(r)!==r)throw Error(i(188))}function it(r){var a=r.alternate;if(!a){if(a=ut(r),a===null)throw Error(i(188));return a!==r?null:r}for(var c=r,d=a;;){var _=c.return;if(_===null)break;var v=_.alternate;if(v===null){if(d=_.return,d!==null){c=d;continue}break}if(_.child===v.child){for(v=_.child;v;){if(v===c)return z(_),r;if(v===d)return z(_),a;v=v.sibling}throw Error(i(188))}if(c.return!==d.return)c=_,d=v;else{for(var C=!1,w=_.child;w;){if(w===c){C=!0,c=_,d=v;break}if(w===d){C=!0,d=_,c=v;break}w=w.sibling}if(!C){for(w=v.child;w;){if(w===c){C=!0,c=v,d=_;break}if(w===d){C=!0,d=v,c=_;break}w=w.sibling}if(!C)throw Error(i(189))}}if(c.alternate!==d)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:a}function At(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=At(r),a!==null)return a;r=r.sibling}return null}var Rt=Array.isArray,yt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Mt={pending:!1,data:null,method:null,action:null},Ft=[],Pe=-1;function Gt(r){return{current:r}}function ne(r){0>Pe||(r.current=Ft[Pe],Ft[Pe]=null,Pe--)}function ce(r,a){Pe++,Ft[Pe]=r.current,r.current=a}var Te=Gt(null),Be=Gt(null),Fe=Gt(null),ve=Gt(null);function ln(r,a){switch(ce(Fe,a),ce(Be,r),ce(Te,null),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)&&(a=a.namespaceURI)?z2(a):0;break;default:if(r=r===8?a.parentNode:a,a=r.tagName,r=r.namespaceURI)r=z2(r),a=L2(r,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ne(Te),ce(Te,a)}function Ge(){ne(Te),ne(Be),ne(Fe)}function In(r){r.memoizedState!==null&&ce(ve,r);var a=Te.current,c=L2(a,r.type);a!==c&&(ce(Be,r),ce(Te,c))}function sr(r){Be.current===r&&(ne(Te),ne(Be)),ve.current===r&&(ne(ve),Yf._currentValue=Mt)}var ni=Object.prototype.hasOwnProperty,Kn=n.unstable_scheduleCallback,ie=n.unstable_cancelCallback,Nn=n.unstable_shouldYield,Wr=n.unstable_requestPaint,_i=n.unstable_now,Yl=n.unstable_getCurrentPriorityLevel,ql=n.unstable_ImmediatePriority,Es=n.unstable_UserBlockingPriority,nl=n.unstable_NormalPriority,Ko=n.unstable_LowPriority,jl=n.unstable_IdlePriority,aa=n.log,il=n.unstable_setDisableYieldValue,yi=null,sn=null;function la(r){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(yi,r,void 0,(r.current.flags&128)===128)}catch{}}function wi(r){if(typeof aa=="function"&&il(r),sn&&typeof sn.setStrictMode=="function")try{sn.setStrictMode(yi,r)}catch{}}var Ze=Math.clz32?Math.clz32:Wo,oa=Math.log,Kl=Math.LN2;function Wo(r){return r>>>=0,r===0?32:31-(oa(r)/Kl|0)|0}var M=128,O=4194304;function k(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function at(r,a){var c=r.pendingLanes;if(c===0)return 0;var d=0,_=r.suspendedLanes,v=r.pingedLanes,C=r.warmLanes;r=r.finishedLanes!==0;var w=c&134217727;return w!==0?(c=w&~_,c!==0?d=k(c):(v&=w,v!==0?d=k(v):r||(C=w&~C,C!==0&&(d=k(C))))):(w=c&~_,w!==0?d=k(w):v!==0?d=k(v):r||(C=c&~C,C!==0&&(d=k(C)))),d===0?0:a!==0&&a!==d&&(a&_)===0&&(_=d&-d,C=a&-a,_>=C||_===32&&(C&4194176)!==0)?a:d}function Et(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function Vt(r,a){switch(r){case 1:case 2:case 4:case 8:return a+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xe(){var r=M;return M<<=1,(M&4194176)===0&&(M=128),r}function En(){var r=O;return O<<=1,(O&62914560)===0&&(O=4194304),r}function Ui(r){for(var a=[],c=0;31>c;c++)a.push(r);return a}function bi(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function ar(r,a,c,d,_,v){var C=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var w=r.entanglements,L=r.expirationTimes,Q=r.hiddenUpdates;for(c=C&~c;0<c;){var mt=31-Ze(c),_t=1<<mt;w[mt]=0,L[mt]=-1;var lt=Q[mt];if(lt!==null)for(Q[mt]=null,mt=0;mt<lt.length;mt++){var dt=lt[mt];dt!==null&&(dt.lane&=-536870913)}c&=~_t}d!==0&&lr(r,d,0),v!==0&&_===0&&r.tag!==0&&(r.suspendedLanes|=v&~(C&~a))}function lr(r,a,c){r.pendingLanes|=a,r.suspendedLanes&=~a;var d=31-Ze(a);r.entangledLanes|=a,r.entanglements[d]=r.entanglements[d]|1073741824|c&4194218}function or(r,a){var c=r.entangledLanes|=a;for(r=r.entanglements;c;){var d=31-Ze(c),_=1<<d;_&a|r[d]&a&&(r[d]|=a),c&=~_}}function Wn(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Oi(){var r=yt.p;return r!==0?r:(r=window.event,r===void 0?32:nx(r.type))}function ii(r,a){var c=yt.p;try{return yt.p=r,a()}finally{yt.p=c}}var on=Math.random().toString(36).slice(2),he="__reactFiber$"+on,ae="__reactProps$"+on,vi="__reactContainer$"+on,ua="__reactEvents$"+on,Zd="__reactListeners$"+on,Jd="__reactHandles$"+on,$d="__reactResources$"+on,rl="__reactMarker$"+on;function Qo(r){delete r[he],delete r[ae],delete r[ua],delete r[Zd],delete r[Jd]}function Ts(r){var a=r[he];if(a)return a;for(var c=r.parentNode;c;){if(a=c[vi]||c[he]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(r=V2(r);r!==null;){if(c=r[he])return c;r=V2(r)}return a}r=c,c=r.parentNode}return null}function zn(r){if(r=r[he]||r[vi]){var a=r.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return r}return null}function Je(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function Qr(r){var a=r[$d];return a||(a=r[$d]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function hn(r){r[rl]=!0}var rc=new Set,Zr={};function Jr(r,a){ca(r,a),ca(r+"Capture",a)}function ca(r,a){for(Zr[r]=a,r=0;r<a.length;r++)rc.add(a[r])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Oh={},Ph={};function ep(r){return ni.call(Ph,r)?!0:ni.call(Oh,r)?!1:tp.test(r)?Ph[r]=!0:(Oh[r]=!0,!1)}function Zo(r,a,c){if(ep(a))if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+c)}}function Jo(r,a,c){if(c===null)r.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+c)}}function Ur(r,a,c,d){if(d===null)r.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(a,c,""+d)}}function ji(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function np(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ip(r){var a=np(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),d=""+r[a];if(!r.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var _=c.get,v=c.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return _.call(this)},set:function(C){d=""+C,v.call(this,C)}}),Object.defineProperty(r,a,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function $o(r){r._valueTracker||(r._valueTracker=ip(r))}function Gh(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var c=a.getValue(),d="";return r&&(d=np(r)?r.checked?"true":"false":r.value),r=d,r!==c?(a.setValue(r),!0):!1}function Wl(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var rp=/[\n"\\]/g;function Ki(r){return r.replace(rp,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function sc(r,a,c,d,_,v,C,w){r.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.type=C:r.removeAttribute("type"),a!=null?C==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+ji(a)):r.value!==""+ji(a)&&(r.value=""+ji(a)):C!=="submit"&&C!=="reset"||r.removeAttribute("value"),a!=null?ac(r,C,ji(a)):c!=null?ac(r,C,ji(c)):d!=null&&r.removeAttribute("value"),_==null&&v!=null&&(r.defaultChecked=!!v),_!=null&&(r.checked=_&&typeof _!="function"&&typeof _!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+ji(w):r.removeAttribute("name")}function Nh(r,a,c,d,_,v,C,w){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.type=v),a!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||a!=null))return;c=c!=null?""+ji(c):"",a=a!=null?""+ji(a):c,w||a===r.value||(r.value=a),r.defaultValue=a}d=d??_,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=w?r.checked:!!d,r.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(r.name=C)}function ac(r,a,c){a==="number"&&Wl(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Ql(r,a,c,d){if(r=r.options,a){a={};for(var _=0;_<c.length;_++)a["$"+c[_]]=!0;for(c=0;c<r.length;c++)_=a.hasOwnProperty("$"+r[c].value),r[c].selected!==_&&(r[c].selected=_),_&&d&&(r[c].defaultSelected=!0)}else{for(c=""+ji(c),a=null,_=0;_<r.length;_++){if(r[_].value===c){r[_].selected=!0,d&&(r[_].defaultSelected=!0);return}a!==null||r[_].disabled||(a=r[_])}a!==null&&(a.selected=!0)}}function zh(r,a,c){if(a!=null&&(a=""+ji(a),a!==r.value&&(r.value=a),c==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=c!=null?""+ji(c):""}function sl(r,a,c,d){if(a==null){if(d!=null){if(c!=null)throw Error(i(92));if(Rt(d)){if(1<d.length)throw Error(i(93));d=d[0]}c=d}c==null&&(c=""),a=c}c=ji(a),r.defaultValue=c,d=r.textContent,d===c&&d!==""&&d!==null&&(r.value=d)}function al(r,a){if(a){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=a;return}}r.textContent=a}var lc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tu(r,a,c){var d=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":d?r.setProperty(a,c):typeof c!="number"||c===0||lc.has(a)?a==="float"?r.cssFloat=c:r[a]=(""+c).trim():r[a]=c+"px"}function Lh(r,a,c){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var _ in a)d=a[_],a.hasOwnProperty(_)&&c[_]!==d&&tu(r,_,d)}else for(var v in a)a.hasOwnProperty(v)&&tu(r,v,a[v])}function eu(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ap=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nu(r){return ap.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var oc=null;function iu(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ll=null,ol=null;function uc(r){var a=zn(r);if(a&&(r=a.stateNode)){var c=r[ae]||null;t:switch(r=a.stateNode,a.type){case"input":if(sc(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ki(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var d=c[a];if(d!==r&&d.form===r.form){var _=d[ae]||null;if(!_)throw Error(i(90));sc(d,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(a=0;a<c.length;a++)d=c[a],d.form===r.form&&Gh(d)}break t;case"textarea":zh(r,c.value,c.defaultValue);break t;case"select":a=c.value,a!=null&&Ql(r,!!c.multiple,a,!1)}}}var cc=!1;function Hh(r,a,c){if(cc)return r(a,c);cc=!0;try{var d=r(a);return d}finally{if(cc=!1,(ll!==null||ol!==null)&&(Dl(),ll&&(a=ll,r=ol,ol=ll=null,uc(a),r)))for(a=0;a<r.length;a++)uc(r[a])}}function Zl(r,a){var c=r.stateNode;if(c===null)return null;var d=c[ae]||null;if(d===null)return null;c=d[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break t;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,a,typeof c));return c}var ru=!1;if(wr)try{var Jl={};Object.defineProperty(Jl,"passive",{get:function(){ru=!0}}),window.addEventListener("test",Jl,Jl),window.removeEventListener("test",Jl,Jl)}catch{ru=!1}var As=null,Fh=null,hc=null;function Vh(){if(hc)return hc;var r,a=Fh,c=a.length,d,_="value"in As?As.value:As.textContent,v=_.length;for(r=0;r<c&&a[r]===_[r];r++);var C=c-r;for(d=1;d<=C&&a[c-d]===_[v-d];d++);return hc=_.slice(r,1<d?1-d:void 0)}function ha(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function $l(){return!0}function su(){return!1}function xi(r){function a(c,d,_,v,C){this._reactName=c,this._targetInst=_,this.type=d,this.nativeEvent=v,this.target=C,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(c=r[w],this[w]=c?c(v):v[w]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?$l:su,this.isPropagationStopped=su,this}return Y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=$l)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=$l)},persist:function(){},isPersistent:$l}),a}var fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},to=xi(fa),eo=Y({},fa,{view:0,detail:0}),lp=xi(eo),Cs,no,io,ro=Y({},eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==io&&(io&&r.type==="mousemove"?(Cs=r.screenX-io.screenX,no=r.screenY-io.screenY):no=Cs=0,io=r),Cs)},movementY:function(r){return"movementY"in r?r.movementY:no}}),kh=xi(ro),op=Y({},ro,{dataTransfer:0}),y_=xi(op),Qn=Y({},eo,{relatedTarget:0}),fc=xi(Qn),up=Y({},fa,{animationName:0,elapsedTime:0,pseudoElement:0}),cp=xi(up),hp=Y({},fa,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),fp=xi(hp),au=Y({},fa,{data:0}),dc=xi(au),dp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xh(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=mp[r])?!!a[r]:!1}function lu(){return Xh}var gp=Y({},eo,{key:function(r){if(r.key){var a=dp[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=ha(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?pp[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lu,charCode:function(r){return r.type==="keypress"?ha(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ha(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ih=xi(gp),Yh=Y({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pc=xi(Yh),_p=Y({},eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lu}),qh=xi(_p),yp=Y({},fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bs=xi(yp),jh=Y({},ro,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),b_=xi(jh),bp=Y({},fa,{newState:0,oldState:0}),da=xi(bp),Rs=[9,13,27,32],ou=wr&&"CompositionEvent"in window,ul=null;wr&&"documentMode"in document&&(ul=document.documentMode);var uu=wr&&"TextEvent"in window&&!ul,cu=wr&&(!ou||ul&&8<ul&&11>=ul),pa=" ",Zn=!1;function hu(r,a){switch(r){case"keyup":return Rs.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kh(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ma=!1;function fu(r,a){switch(r){case"compositionend":return Kh(a);case"keypress":return a.which!==32?null:(Zn=!0,pa);case"textInput":return r=a.data,r===pa&&Zn?null:r;default:return null}}function Wh(r,a){if(ma)return r==="compositionend"||!ou&&hu(r,a)?(r=Vh(),hc=Fh=As=null,ma=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return cu&&a.locale!=="ko"?null:a.data;default:return null}}var mc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qh(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!mc[r.type]:a==="textarea"}function Pi(r,a,c,d){ll?ol?ol.push(d):ol=[d]:ll=d,a=bm(a,"onChange"),0<a.length&&(c=new to("onChange","change",null,c,d),r.push({event:c,listeners:a}))}var so=null,cl=null;function vp(r){U2(r,0)}function du(r){var a=Je(r);if(Gh(a))return r}function gc(r,a){if(r==="change")return a}var _c=!1;if(wr){var yc;if(wr){var ao="oninput"in document;if(!ao){var lo=document.createElement("div");lo.setAttribute("oninput","return;"),ao=typeof lo.oninput=="function"}yc=ao}else yc=!1;_c=yc&&(!document.documentMode||9<document.documentMode)}function $e(){so&&(so.detachEvent("onpropertychange",xp),cl=so=null)}function xp(r){if(r.propertyName==="value"&&du(cl)){var a=[];Pi(a,cl,r,iu(r)),Hh(vp,a)}}function v_(r,a,c){r==="focusin"?($e(),so=a,cl=c,so.attachEvent("onpropertychange",xp)):r==="focusout"&&$e()}function Sp(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return du(cl)}function pu(r,a){if(r==="click")return du(a)}function ga(r,a){if(r==="input"||r==="change")return du(a)}function Ep(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Gi=typeof Object.is=="function"?Object.is:Ep;function Or(r,a){if(Gi(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var c=Object.keys(r),d=Object.keys(a);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var _=c[d];if(!ni.call(a,_)||!Gi(r[_],a[_]))return!1}return!0}function Ni(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Zh(r,a){var c=Ni(r);r=0;for(var d;c;){if(c.nodeType===3){if(d=r+c.textContent.length,r<=a&&d>=a)return{node:c,offset:a-r};r=d}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=Ni(c)}}function Jh(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?Jh(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function $h(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=Wl(r.document);a instanceof r.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)r=a.contentWindow;else break;a=Wl(r.document)}return a}function mu(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}function tf(r,a){var c=$h(a);a=r.focusedElem;var d=r.selectionRange;if(c!==a&&a&&a.ownerDocument&&Jh(a.ownerDocument.documentElement,a)){if(d!==null&&mu(a)){if(r=d.start,c=d.end,c===void 0&&(c=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(c,a.value.length);else if(c=(r=a.ownerDocument||document)&&r.defaultView||window,c.getSelection){c=c.getSelection();var _=a.textContent.length,v=Math.min(d.start,_);d=d.end===void 0?v:Math.min(d.end,_),!c.extend&&v>d&&(_=d,d=v,v=_),_=Zh(a,v);var C=Zh(a,d);_&&C&&(c.rangeCount!==1||c.anchorNode!==_.node||c.anchorOffset!==_.offset||c.focusNode!==C.node||c.focusOffset!==C.offset)&&(r=r.createRange(),r.setStart(_.node,_.offset),c.removeAllRanges(),v>d?(c.addRange(r),c.extend(C.node,C.offset)):(r.setEnd(C.node,C.offset),c.addRange(r)))}}for(r=[],c=a;c=c.parentNode;)c.nodeType===1&&r.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)c=r[a],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var bc=wr&&"documentMode"in document&&11>=document.documentMode,hl=null,ef=null,oo=null,vc=!1;function ur(r,a,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;vc||hl==null||hl!==Wl(d)||(d=hl,"selectionStart"in d&&mu(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),oo&&Or(oo,d)||(oo=d,d=bm(ef,"onSelect"),0<d.length&&(a=new to("onSelect","select",null,a,c),r.push({event:a,listeners:d}),a.target=hl)))}function Ms(r,a){var c={};return c[r.toLowerCase()]=a.toLowerCase(),c["Webkit"+r]="webkit"+a,c["Moz"+r]="moz"+a,c}var fl={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},nf={},xc={};wr&&(xc=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function Tn(r){if(nf[r])return nf[r];if(!fl[r])return r;var a=fl[r],c;for(c in a)if(a.hasOwnProperty(c)&&c in xc)return nf[r]=a[c];return r}var rf=Tn("animationend"),zi=Tn("animationiteration"),sf=Tn("animationstart"),Ds=Tn("transitionrun"),uo=Tn("transitionstart"),_a=Tn("transitioncancel"),Sc=Tn("transitionend"),Ec=new Map,ws="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function cr(r,a){Ec.set(r,a),Jr(a,[r])}var Jn=[],$r=0,Us=0;function gu(){for(var r=$r,a=Us=$r=0;a<r;){var c=Jn[a];Jn[a++]=null;var d=Jn[a];Jn[a++]=null;var _=Jn[a];Jn[a++]=null;var v=Jn[a];if(Jn[a++]=null,d!==null&&_!==null){var C=d.pending;C===null?_.next=_:(_.next=C.next,C.next=_),d.pending=_}v!==0&&yu(c,_,v)}}function _u(r,a,c,d){Jn[$r++]=r,Jn[$r++]=a,Jn[$r++]=c,Jn[$r++]=d,Us|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function dl(r,a,c,d){return _u(r,a,c,d),bu(r)}function Os(r,a){return _u(r,null,null,a),bu(r)}function yu(r,a,c){r.lanes|=c;var d=r.alternate;d!==null&&(d.lanes|=c);for(var _=!1,v=r.return;v!==null;)v.childLanes|=c,d=v.alternate,d!==null&&(d.childLanes|=c),v.tag===22&&(r=v.stateNode,r===null||r._visibility&1||(_=!0)),r=v,v=v.return;_&&a!==null&&r.tag===3&&(v=r.stateNode,_=31-Ze(c),v=v.hiddenUpdates,r=v[_],r===null?v[_]=[a]:r.push(a),a.lane=c|536870912)}function bu(r){if(50<vr)throw vr=0,ta=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var ya={},Tc=new WeakMap;function Li(r,a){if(typeof r=="object"&&r!==null){var c=Tc.get(r);return c!==void 0?c:(a={value:r,source:a,stack:K(a)},Tc.set(r,a),a)}return{value:r,source:a,stack:K(a)}}var pl=[],ba=0,ri=null,vu=0,Ie=[],Wi=0,Ps=null,ts=1,Gs="";function Si(r,a){pl[ba++]=vu,pl[ba++]=ri,ri=r,vu=a}function af(r,a,c){Ie[Wi++]=ts,Ie[Wi++]=Gs,Ie[Wi++]=Ps,Ps=r;var d=ts;r=Gs;var _=32-Ze(d)-1;d&=~(1<<_),c+=1;var v=32-Ze(a)+_;if(30<v){var C=_-_%5;v=(d&(1<<C)-1).toString(32),d>>=C,_-=C,ts=1<<32-Ze(a)+_|c<<_|d,Gs=v+r}else ts=1<<v|c<<_|d,Gs=r}function xu(r){r.return!==null&&(Si(r,1),af(r,1,0))}function va(r){for(;r===ri;)ri=pl[--ba],pl[ba]=null,vu=pl[--ba],pl[ba]=null;for(;r===Ps;)Ps=Ie[--Wi],Ie[Wi]=null,Gs=Ie[--Wi],Ie[Wi]=null,ts=Ie[--Wi],Ie[Wi]=null}var si=null,Yn=null,ge=!1,hr=null,fr=!1,Su=Error(i(519));function ml(r){var a=Error(i(418,""));throw es(Li(a,r)),Su}function Tp(r){var a=r.stateNode,c=r.type,d=r.memoizedProps;switch(a[he]=r,a[ae]=d,c){case"dialog":ye("cancel",a),ye("close",a);break;case"iframe":case"object":case"embed":ye("load",a);break;case"video":case"audio":for(c=0;c<Ff.length;c++)ye(Ff[c],a);break;case"source":ye("error",a);break;case"img":case"image":case"link":ye("error",a),ye("load",a);break;case"details":ye("toggle",a);break;case"input":ye("invalid",a),Nh(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),$o(a);break;case"select":ye("invalid",a);break;case"textarea":ye("invalid",a),sl(a,d.value,d.defaultValue,d.children),$o(a)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||d.suppressHydrationWarning===!0||N2(a.textContent,c)?(d.popover!=null&&(ye("beforetoggle",a),ye("toggle",a)),d.onScroll!=null&&ye("scroll",a),d.onScrollEnd!=null&&ye("scrollend",a),d.onClick!=null&&(a.onclick=vm),a=!0):a=!1,a||ml(r)}function Ap(r){for(si=r.return;si;)switch(si.tag){case 3:case 27:fr=!0;return;case 5:case 13:fr=!1;return;default:si=si.return}}function co(r){if(r!==si)return!1;if(!ge)return Ap(r),ge=!0,!1;var a=!1,c;if((c=r.tag!==3&&r.tag!==27)&&((c=r.tag===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||F_(r.type,r.memoizedProps)),c=!c),c&&(a=!0),a&&Yn&&ml(r),Ap(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));t:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8)if(c=r.data,c==="/$"){if(a===0){Yn=na(r.nextSibling);break t}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++;r=r.nextSibling}Yn=null}}else Yn=si?na(r.stateNode.nextSibling):null;return!0}function ho(){Yn=si=null,ge=!1}function es(r){hr===null?hr=[r]:hr.push(r)}var xa=Error(i(460)),lf=Error(i(474)),Ac={then:function(){}};function Cp(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Eu(){}function Sa(r,a,c){switch(c=r[c],c===void 0?r.push(a):c!==a&&(a.then(Eu,Eu),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,r===xa?Error(i(483)):r;default:if(typeof a.status=="string")a.then(Eu,Eu);else{if(r=ze,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(d){if(a.status==="pending"){var _=a;_.status="fulfilled",_.value=d}},function(d){if(a.status==="pending"){var _=a;_.status="rejected",_.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,r===xa?Error(i(483)):r}throw fo=a,xa}}var fo=null;function Re(){if(fo===null)throw Error(i(459));var r=fo;return fo=null,r}var Ea=null,Tu=0;function Au(r){var a=Tu;return Tu+=1,Ea===null&&(Ea=[]),Sa(Ea,r,a)}function Cu(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Cc(r,a){throw a.$$typeof===o?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function Bp(r){var a=r._init;return a(r._payload)}function Rp(r){function a(tt,W){if(r){var rt=tt.deletions;rt===null?(tt.deletions=[W],tt.flags|=16):rt.push(W)}}function c(tt,W){if(!r)return null;for(;W!==null;)a(tt,W),W=W.sibling;return null}function d(tt){for(var W=new Map;tt!==null;)tt.key!==null?W.set(tt.key,tt):W.set(tt.index,tt),tt=tt.sibling;return W}function _(tt,W){return tt=Ci(tt,W),tt.index=0,tt.sibling=null,tt}function v(tt,W,rt){return tt.index=rt,r?(rt=tt.alternate,rt!==null?(rt=rt.index,rt<W?(tt.flags|=33554434,W):rt):(tt.flags|=33554434,W)):(tt.flags|=1048576,W)}function C(tt){return r&&tt.alternate===null&&(tt.flags|=33554434),tt}function w(tt,W,rt,gt){return W===null||W.tag!==6?(W=Rn(rt,tt.mode,gt),W.return=tt,W):(W=_(W,rt),W.return=tt,W)}function L(tt,W,rt,gt){var Dt=rt.type;return Dt===m?mt(tt,W,rt.props.children,gt,rt.key):W!==null&&(W.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===G&&Bp(Dt)===W.type)?(W=_(W,rt.props),Cu(W,rt),W.return=tt,W):(W=Ro(rt.type,rt.key,rt.props,null,tt.mode,gt),Cu(W,rt),W.return=tt,W)}function Q(tt,W,rt,gt){return W===null||W.tag!==4||W.stateNode.containerInfo!==rt.containerInfo||W.stateNode.implementation!==rt.implementation?(W=Lu(rt,tt.mode,gt),W.return=tt,W):(W=_(W,rt.children||[]),W.return=tt,W)}function mt(tt,W,rt,gt,Dt){return W===null||W.tag!==7?(W=ka(rt,tt.mode,gt,Dt),W.return=tt,W):(W=_(W,rt),W.return=tt,W)}function _t(tt,W,rt){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Rn(""+W,tt.mode,rt),W.return=tt,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case h:return rt=Ro(W.type,W.key,W.props,null,tt.mode,rt),Cu(rt,W),rt.return=tt,rt;case f:return W=Lu(W,tt.mode,rt),W.return=tt,W;case G:var gt=W._init;return W=gt(W._payload),_t(tt,W,rt)}if(Rt(W)||nt(W))return W=ka(W,tt.mode,rt,null),W.return=tt,W;if(typeof W.then=="function")return _t(tt,Au(W),rt);if(W.$$typeof===A)return _t(tt,Xc(tt,W),rt);Cc(tt,W)}return null}function lt(tt,W,rt,gt){var Dt=W!==null?W.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return Dt!==null?null:w(tt,W,""+rt,gt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case h:return rt.key===Dt?L(tt,W,rt,gt):null;case f:return rt.key===Dt?Q(tt,W,rt,gt):null;case G:return Dt=rt._init,rt=Dt(rt._payload),lt(tt,W,rt,gt)}if(Rt(rt)||nt(rt))return Dt!==null?null:mt(tt,W,rt,gt,null);if(typeof rt.then=="function")return lt(tt,W,Au(rt),gt);if(rt.$$typeof===A)return lt(tt,W,Xc(tt,rt),gt);Cc(tt,rt)}return null}function dt(tt,W,rt,gt,Dt){if(typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint")return tt=tt.get(rt)||null,w(W,tt,""+gt,Dt);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case h:return tt=tt.get(gt.key===null?rt:gt.key)||null,L(W,tt,gt,Dt);case f:return tt=tt.get(gt.key===null?rt:gt.key)||null,Q(W,tt,gt,Dt);case G:var de=gt._init;return gt=de(gt._payload),dt(tt,W,rt,gt,Dt)}if(Rt(gt)||nt(gt))return tt=tt.get(rt)||null,mt(W,tt,gt,Dt,null);if(typeof gt.then=="function")return dt(tt,W,rt,Au(gt),Dt);if(gt.$$typeof===A)return dt(tt,W,rt,Xc(W,gt),Dt);Cc(W,gt)}return null}function Ot(tt,W,rt,gt){for(var Dt=null,de=null,Lt=W,qt=W=0,fi=null;Lt!==null&&qt<rt.length;qt++){Lt.index>qt?(fi=Lt,Lt=null):fi=Lt.sibling;var Me=lt(tt,Lt,rt[qt],gt);if(Me===null){Lt===null&&(Lt=fi);break}r&&Lt&&Me.alternate===null&&a(tt,Lt),W=v(Me,W,qt),de===null?Dt=Me:de.sibling=Me,de=Me,Lt=fi}if(qt===rt.length)return c(tt,Lt),ge&&Si(tt,qt),Dt;if(Lt===null){for(;qt<rt.length;qt++)Lt=_t(tt,rt[qt],gt),Lt!==null&&(W=v(Lt,W,qt),de===null?Dt=Lt:de.sibling=Lt,de=Lt);return ge&&Si(tt,qt),Dt}for(Lt=d(Lt);qt<rt.length;qt++)fi=dt(Lt,tt,qt,rt[qt],gt),fi!==null&&(r&&fi.alternate!==null&&Lt.delete(fi.key===null?qt:fi.key),W=v(fi,W,qt),de===null?Dt=fi:de.sibling=fi,de=fi);return r&&Lt.forEach(function(zo){return a(tt,zo)}),ge&&Si(tt,qt),Dt}function Zt(tt,W,rt,gt){if(rt==null)throw Error(i(151));for(var Dt=null,de=null,Lt=W,qt=W=0,fi=null,Me=rt.next();Lt!==null&&!Me.done;qt++,Me=rt.next()){Lt.index>qt?(fi=Lt,Lt=null):fi=Lt.sibling;var zo=lt(tt,Lt,Me.value,gt);if(zo===null){Lt===null&&(Lt=fi);break}r&&Lt&&zo.alternate===null&&a(tt,Lt),W=v(zo,W,qt),de===null?Dt=zo:de.sibling=zo,de=zo,Lt=fi}if(Me.done)return c(tt,Lt),ge&&Si(tt,qt),Dt;if(Lt===null){for(;!Me.done;qt++,Me=rt.next())Me=_t(tt,Me.value,gt),Me!==null&&(W=v(Me,W,qt),de===null?Dt=Me:de.sibling=Me,de=Me);return ge&&Si(tt,qt),Dt}for(Lt=d(Lt);!Me.done;qt++,Me=rt.next())Me=dt(Lt,tt,qt,Me.value,gt),Me!==null&&(r&&Me.alternate!==null&&Lt.delete(Me.key===null?qt:Me.key),W=v(Me,W,qt),de===null?Dt=Me:de.sibling=Me,de=Me);return r&&Lt.forEach(function(QM){return a(tt,QM)}),ge&&Si(tt,qt),Dt}function wn(tt,W,rt,gt){if(typeof rt=="object"&&rt!==null&&rt.type===m&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case h:t:{for(var Dt=rt.key;W!==null;){if(W.key===Dt){if(Dt=rt.type,Dt===m){if(W.tag===7){c(tt,W.sibling),gt=_(W,rt.props.children),gt.return=tt,tt=gt;break t}}else if(W.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===G&&Bp(Dt)===W.type){c(tt,W.sibling),gt=_(W,rt.props),Cu(gt,rt),gt.return=tt,tt=gt;break t}c(tt,W);break}else a(tt,W);W=W.sibling}rt.type===m?(gt=ka(rt.props.children,tt.mode,gt,rt.key),gt.return=tt,tt=gt):(gt=Ro(rt.type,rt.key,rt.props,null,tt.mode,gt),Cu(gt,rt),gt.return=tt,tt=gt)}return C(tt);case f:t:{for(Dt=rt.key;W!==null;){if(W.key===Dt)if(W.tag===4&&W.stateNode.containerInfo===rt.containerInfo&&W.stateNode.implementation===rt.implementation){c(tt,W.sibling),gt=_(W,rt.children||[]),gt.return=tt,tt=gt;break t}else{c(tt,W);break}else a(tt,W);W=W.sibling}gt=Lu(rt,tt.mode,gt),gt.return=tt,tt=gt}return C(tt);case G:return Dt=rt._init,rt=Dt(rt._payload),wn(tt,W,rt,gt)}if(Rt(rt))return Ot(tt,W,rt,gt);if(nt(rt)){if(Dt=nt(rt),typeof Dt!="function")throw Error(i(150));return rt=Dt.call(rt),Zt(tt,W,rt,gt)}if(typeof rt.then=="function")return wn(tt,W,Au(rt),gt);if(rt.$$typeof===A)return wn(tt,W,Xc(tt,rt),gt);Cc(tt,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint"?(rt=""+rt,W!==null&&W.tag===6?(c(tt,W.sibling),gt=_(W,rt),gt.return=tt,tt=gt):(c(tt,W),gt=Rn(rt,tt.mode,gt),gt.return=tt,tt=gt),C(tt)):c(tt,W)}return function(tt,W,rt,gt){try{Tu=0;var Dt=wn(tt,W,rt,gt);return Ea=null,Dt}catch(Lt){if(Lt===xa)throw Lt;var de=yn(29,Lt,null,tt.mode);return de.lanes=gt,de.return=tt,de}finally{}}}var Ns=Rp(!0),zs=Rp(!1),gl=Gt(null),_l=Gt(0);function Ta(r,a){r=$s,ce(_l,r),ce(gl,a),$s=r|a.baseLanes}function Bc(){ce(_l,$s),ce(gl,gl.current)}function Bu(){$s=_l.current,ne(gl),ne(_l)}var Hi=Gt(null),ns=null;function Ls(r){var a=r.alternate;ce(An,An.current&1),ce(Hi,r),ns===null&&(a===null||gl.current!==null||a.memoizedState!==null)&&(ns=r)}function of(r){if(r.tag===22){if(ce(An,An.current),ce(Hi,r),ns===null){var a=r.alternate;a!==null&&a.memoizedState!==null&&(ns=r)}}else Hs()}function Hs(){ce(An,An.current),ce(Hi,Hi.current)}function is(r){ne(Hi),ns===r&&(ns=null),ne(An)}var An=Gt(0);function po(r){for(var a=r;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var le=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(c,d){r.push(d)}};this.abort=function(){a.aborted=!0,r.forEach(function(c){return c()})}},x_=n.unstable_scheduleCallback,Qi=n.unstable_NormalPriority,fn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uf(){return{controller:new le,data:new Map,refCount:0}}function Aa(r){r.refCount--,r.refCount===0&&x_(Qi,function(){r.controller.abort()})}var rs=null,Ca=0,yl=0,Ba=null;function S_(r,a){if(rs===null){var c=rs=[];Ca=0,yl=w_(),Ba={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Ca++,a.then(cf,cf),a}function cf(){if(--Ca===0&&rs!==null){Ba!==null&&(Ba.status="fulfilled");var r=rs;rs=null,yl=0,Ba=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function Ra(r,a){var c=[],d={status:"pending",value:null,reason:null,then:function(_){c.push(_)}};return r.then(function(){d.status="fulfilled",d.value=a;for(var _=0;_<c.length;_++)(0,c[_])(a)},function(_){for(d.status="rejected",d.reason=_,_=0;_<c.length;_++)(0,c[_])(void 0)}),d}var Rc=N.S;N.S=function(r,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&S_(r,a),Rc!==null&&Rc(r,a)};var Fs=Gt(null);function Ru(){var r=Fs.current;return r!==null?r:ze.pooledCache}function mo(r,a){a===null?ce(Fs,Fs.current):ce(Fs,a.pool)}function Vs(){var r=Ru();return r===null?null:{parent:fn._currentValue,pool:r}}var ks=0,$t=null,we=null,Cn=null,Yt=!1,Ma=!1,Da=!1,go=0,wa=0,_o=null,E_=0;function un(){throw Error(i(321))}function bl(r,a){if(a===null)return!1;for(var c=0;c<a.length&&c<r.length;c++)if(!Gi(r[c],a[c]))return!1;return!0}function hf(r,a,c,d,_,v){return ks=v,$t=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,N.H=r===null||r.memoizedState===null?Oa:Is,Da=!1,v=c(d,_),Da=!1,Ma&&(v=Dp(a,c,d,_)),Mp(r),v}function Mp(r){N.H=as;var a=we!==null&&we.next!==null;if(ks=0,Cn=we=$t=null,Yt=!1,wa=0,_o=null,a)throw Error(i(300));r===null||Ln||(r=r.dependencies,r!==null&&So(r)&&(Ln=!0))}function Dp(r,a,c,d){$t=r;var _=0;do{if(Ma&&(_o=null),wa=0,Ma=!1,25<=_)throw Error(i(301));if(_+=1,Cn=we=null,r.updateQueue!=null){var v=r.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}N.H=Sl,v=a(c,d)}while(Ma);return v}function T_(){var r=N.H,a=r.useState()[0];return a=typeof a.then=="function"?Du(a):a,r=r.useState()[0],(we!==null?we.memoizedState:null)!==r&&($t.flags|=1024),a}function ff(){var r=go!==0;return go=0,r}function Mu(r,a,c){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~c}function Mc(r){if(Yt){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Yt=!1}ks=0,Cn=we=$t=null,Ma=!1,wa=go=0,_o=null}function $n(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?$t.memoizedState=Cn=r:Cn=Cn.next=r,Cn}function dn(){if(we===null){var r=$t.alternate;r=r!==null?r.memoizedState:null}else r=we.next;var a=Cn===null?$t.memoizedState:Cn.next;if(a!==null)Cn=a,we=r;else{if(r===null)throw $t.alternate===null?Error(i(467)):Error(i(310));we=r,r={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},Cn===null?$t.memoizedState=Cn=r:Cn=Cn.next=r}return Cn}var Dc;Dc=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Du(r){var a=wa;return wa+=1,_o===null&&(_o=[]),r=Sa(_o,r,a),a=$t,(Cn===null?a.memoizedState:Cn.next)===null&&(a=a.alternate,N.H=a===null||a.memoizedState===null?Oa:Is),r}function yo(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Du(r);if(r.$$typeof===A)return ai(r)}throw Error(i(438,String(r)))}function Pr(r){var a=null,c=$t.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var d=$t.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(_){return _.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Dc(),$t.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(r),d=0;d<r;d++)c[d]=j;return a.index++,c}function tn(r,a){return typeof a=="function"?a(r):a}function Gr(r){var a=dn();return Fi(a,we,r)}function Fi(r,a,c){var d=r.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=c;var _=r.baseQueue,v=d.pending;if(v!==null){if(_!==null){var C=_.next;_.next=v.next,v.next=C}a.baseQueue=_=v,d.pending=null}if(v=r.baseState,_===null)r.memoizedState=v;else{a=_.next;var w=C=null,L=null,Q=a,mt=!1;do{var _t=Q.lane&-536870913;if(_t!==Q.lane?(kt&_t)===_t:(ks&_t)===_t){var lt=Q.revertLane;if(lt===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),_t===yl&&(mt=!0);else if((ks&lt)===lt){Q=Q.next,lt===yl&&(mt=!0);continue}else _t={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(w=L=_t,C=v):L=L.next=_t,$t.lanes|=lt,kr|=lt;_t=Q.action,Da&&c(v,_t),v=Q.hasEagerState?Q.eagerState:c(v,_t)}else lt={lane:_t,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(w=L=lt,C=v):L=L.next=lt,$t.lanes|=_t,kr|=_t;Q=Q.next}while(Q!==null&&Q!==a);if(L===null?C=v:L.next=w,!Gi(v,r.memoizedState)&&(Ln=!0,mt&&(c=Ba,c!==null)))throw c;r.memoizedState=v,r.baseState=C,r.baseQueue=L,d.lastRenderedState=v}return _===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function wc(r){var a=dn(),c=a.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var d=c.dispatch,_=c.pending,v=a.memoizedState;if(_!==null){c.pending=null;var C=_=_.next;do v=r(v,C.action),C=C.next;while(C!==_);Gi(v,a.memoizedState)||(Ln=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),c.lastRenderedState=v}return[v,d]}function wp(r,a,c){var d=$t,_=dn(),v=ge;if(v){if(c===void 0)throw Error(i(407));c=c()}else c=a();var C=!Gi((we||_).memoizedState,c);if(C&&(_.memoizedState=c,Ln=!0),_=_.queue,gf(Up.bind(null,d,_,r),[r]),_.getSnapshot!==a||C||Cn!==null&&Cn.memoizedState.tag&1){if(d.flags|=2048,ss(9,Ua.bind(null,d,_,c,a),{destroy:void 0},null),ze===null)throw Error(i(349));v||(ks&60)!==0||Ei(d,a,c)}return c}function Ei(r,a,c){r.flags|=16384,r={getSnapshot:a,value:c},a=$t.updateQueue,a===null?(a=Dc(),$t.updateQueue=a,a.stores=[r]):(c=a.stores,c===null?a.stores=[r]:c.push(r))}function Ua(r,a,c,d){a.value=c,a.getSnapshot=d,Op(a)&&Pp(r)}function Up(r,a,c){return c(function(){Op(a)&&Pp(r)})}function Op(r){var a=r.getSnapshot;r=r.value;try{var c=a();return!Gi(r,c)}catch{return!0}}function Pp(r){var a=Os(r,2);a!==null&&Dn(a,r,2)}function df(r){var a=$n();if(typeof r=="function"){var c=r;if(r=c(),Da){wi(!0);try{c()}finally{wi(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tn,lastRenderedState:r},a}function pf(r,a,c,d){return r.baseState=c,Fi(r,we,typeof d=="function"?d:tn)}function A_(r,a,c,d,_){if(Nc(r))throw Error(i(485));if(r=a.action,r!==null){var v={payload:_,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){v.listeners.push(C)}};N.T!==null?c(!0):v.isTransition=!1,d(v),c=a.pending,c===null?(v.next=a.pending=v,mf(a,v)):(v.next=c.next,a.pending=c.next=v)}}function mf(r,a){var c=a.action,d=a.payload,_=r.state;if(a.isTransition){var v=N.T,C={};N.T=C;try{var w=c(_,d),L=N.S;L!==null&&L(C,w),Gp(r,a,w)}catch(Q){Xs(r,a,Q)}finally{N.T=v}}else try{v=c(_,d),Gp(r,a,v)}catch(Q){Xs(r,a,Q)}}function Gp(r,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){vl(r,a,d)},function(d){return Xs(r,a,d)}):vl(r,a,c)}function vl(r,a,c){a.status="fulfilled",a.value=c,Np(a),r.state=c,a=r.pending,a!==null&&(c=a.next,c===a?r.pending=null:(c=c.next,a.next=c,mf(r,c)))}function Xs(r,a,c){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=c,Np(a),a=a.next;while(a!==d)}r.action=null}function Np(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function zp(r,a){return a}function Lp(r,a){if(ge){var c=ze.formState;if(c!==null){t:{var d=$t;if(ge){if(Yn){e:{for(var _=Yn,v=fr;_.nodeType!==8;){if(!v){_=null;break e}if(_=na(_.nextSibling),_===null){_=null;break e}}v=_.data,_=v==="F!"||v==="F"?_:null}if(_){Yn=na(_.nextSibling),d=_.data==="F!";break t}}ml(d)}d=!1}d&&(a=c[0])}}return c=$n(),c.memoizedState=c.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zp,lastRenderedState:a},c.queue=d,c=vf.bind(null,$t,d),d.dispatch=c,d=df(!1),v=wu.bind(null,$t,!1,d.queue),d=$n(),_={state:a,dispatch:null,action:r,pending:null},d.queue=_,c=A_.bind(null,$t,_,v,c),_.dispatch=c,d.memoizedState=r,[a,c,!1]}function bo(r){var a=dn();return Hp(a,we,r)}function Hp(r,a,c){a=Fi(r,a,zp)[0],r=Gr(tn)[0],a=typeof a=="object"&&a!==null&&typeof a.then=="function"?Du(a):a;var d=dn(),_=d.queue,v=_.dispatch;return c!==d.memoizedState&&($t.flags|=2048,ss(9,C_.bind(null,_,c),{destroy:void 0},null)),[a,v,r]}function C_(r,a){r.action=a}function Fp(r){var a=dn(),c=we;if(c!==null)return Hp(a,c,r);dn(),a=a.memoizedState,c=dn();var d=c.queue.dispatch;return c.memoizedState=r,[a,d,!1]}function ss(r,a,c,d){return r={tag:r,create:a,inst:c,deps:d,next:null},a=$t.updateQueue,a===null&&(a=Dc(),$t.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=r.next=r:(d=c.next,c.next=r,r.next=d,a.lastEffect=r),r}function Vp(){return dn().memoizedState}function Uc(r,a,c,d){var _=$n();$t.flags|=r,_.memoizedState=ss(1|a,c,{destroy:void 0},d===void 0?null:d)}function Oc(r,a,c,d){var _=dn();d=d===void 0?null:d;var v=_.memoizedState.inst;we!==null&&d!==null&&bl(d,we.memoizedState.deps)?_.memoizedState=ss(a,c,v,d):($t.flags|=r,_.memoizedState=ss(1|a,c,v,d))}function kp(r,a){Uc(8390656,8,r,a)}function gf(r,a){Oc(2048,8,r,a)}function Xp(r,a){return Oc(4,2,r,a)}function Ip(r,a){return Oc(4,4,r,a)}function Yp(r,a){if(typeof a=="function"){r=r();var c=a(r);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function qp(r,a,c){c=c!=null?c.concat([r]):null,Oc(4,4,Yp.bind(null,a,r),c)}function _f(){}function jp(r,a){var c=dn();a=a===void 0?null:a;var d=c.memoizedState;return a!==null&&bl(a,d[1])?d[0]:(c.memoizedState=[r,a],r)}function Kp(r,a){var c=dn();a=a===void 0?null:a;var d=c.memoizedState;if(a!==null&&bl(a,d[1]))return d[0];if(d=r(),Da){wi(!0);try{r()}finally{wi(!1)}}return c.memoizedState=[d,a],d}function Pc(r,a,c){return c===void 0||(ks&1073741824)!==0?r.memoizedState=a:(r.memoizedState=c,r=er(),$t.lanes|=r,kr|=r,c)}function Wp(r,a,c,d){return Gi(c,a)?c:gl.current!==null?(r=Pc(r,c,d),Gi(r,a)||(Ln=!0),r):(ks&42)===0?(Ln=!0,r.memoizedState=c):(r=er(),$t.lanes|=r,kr|=r,a)}function Qp(r,a,c,d,_){var v=yt.p;yt.p=v!==0&&8>v?v:8;var C=N.T,w={};N.T=w,wu(r,!1,a,c);try{var L=_(),Q=N.S;if(Q!==null&&Q(w,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var mt=Ra(L,d);xl(r,a,mt,Ri(r))}else xl(r,a,d,Ri(r))}catch(_t){xl(r,a,{then:function(){},status:"rejected",reason:_t},Ri())}finally{yt.p=v,N.T=C}}function B_(){}function yf(r,a,c,d){if(r.tag!==5)throw Error(i(476));var _=Zp(r).queue;Qp(r,_,a,Mt,c===null?B_:function(){return Jp(r),c(d)})}function Zp(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:Mt,baseState:Mt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tn,lastRenderedState:Mt},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tn,lastRenderedState:c},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function Jp(r){var a=Zp(r).next.queue;xl(r,a,{},Ri())}function Gc(){return ai(Yf)}function bf(){return dn().memoizedState}function $p(){return dn().memoizedState}function tm(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var c=Ri();r=$i(c);var d=tr(a,r,c);d!==null&&(Dn(d,a,c),Na(d,a,c)),a={cache:uf()},r.payload=a;return}a=a.return}}function em(r,a,c){var d=Ri();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Nc(r)?nm(a,c):(c=dl(r,a,c,d),c!==null&&(Dn(c,r,d),im(c,a,d)))}function vf(r,a,c){var d=Ri();xl(r,a,c,d)}function xl(r,a,c,d){var _={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Nc(r))nm(a,_);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var C=a.lastRenderedState,w=v(C,c);if(_.hasEagerState=!0,_.eagerState=w,Gi(w,C))return _u(r,a,_,0),ze===null&&gu(),!1}catch{}finally{}if(c=dl(r,a,_,d),c!==null)return Dn(c,r,d),im(c,a,d),!0}return!1}function wu(r,a,c,d){if(d={lane:2,revertLane:w_(),action:d,hasEagerState:!1,eagerState:null,next:null},Nc(r)){if(a)throw Error(i(479))}else a=dl(r,c,d,2),a!==null&&Dn(a,r,2)}function Nc(r){var a=r.alternate;return r===$t||a!==null&&a===$t}function nm(r,a){Ma=Yt=!0;var c=r.pending;c===null?a.next=a:(a.next=c.next,c.next=a),r.pending=a}function im(r,a,c){if((c&4194176)!==0){var d=a.lanes;d&=r.pendingLanes,c|=d,a.lanes=c,or(r,c)}}var as={readContext:ai,use:yo,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useLayoutEffect:un,useInsertionEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useSyncExternalStore:un,useId:un};as.useCacheRefresh=un,as.useMemoCache=un,as.useHostTransitionStatus=un,as.useFormState=un,as.useActionState=un,as.useOptimistic=un;var Oa={readContext:ai,use:yo,useCallback:function(r,a){return $n().memoizedState=[r,a===void 0?null:a],r},useContext:ai,useEffect:kp,useImperativeHandle:function(r,a,c){c=c!=null?c.concat([r]):null,Uc(4194308,4,Yp.bind(null,a,r),c)},useLayoutEffect:function(r,a){return Uc(4194308,4,r,a)},useInsertionEffect:function(r,a){Uc(4,2,r,a)},useMemo:function(r,a){var c=$n();a=a===void 0?null:a;var d=r();if(Da){wi(!0);try{r()}finally{wi(!1)}}return c.memoizedState=[d,a],d},useReducer:function(r,a,c){var d=$n();if(c!==void 0){var _=c(a);if(Da){wi(!0);try{c(a)}finally{wi(!1)}}}else _=a;return d.memoizedState=d.baseState=_,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:_},d.queue=r,r=r.dispatch=em.bind(null,$t,r),[d.memoizedState,r]},useRef:function(r){var a=$n();return r={current:r},a.memoizedState=r},useState:function(r){r=df(r);var a=r.queue,c=vf.bind(null,$t,a);return a.dispatch=c,[r.memoizedState,c]},useDebugValue:_f,useDeferredValue:function(r,a){var c=$n();return Pc(c,r,a)},useTransition:function(){var r=df(!1);return r=Qp.bind(null,$t,r.queue,!0,!1),$n().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,c){var d=$t,_=$n();if(ge){if(c===void 0)throw Error(i(407));c=c()}else{if(c=a(),ze===null)throw Error(i(349));(kt&60)!==0||Ei(d,a,c)}_.memoizedState=c;var v={value:c,getSnapshot:a};return _.queue=v,kp(Up.bind(null,d,v,r),[r]),d.flags|=2048,ss(9,Ua.bind(null,d,v,c,a),{destroy:void 0},null),c},useId:function(){var r=$n(),a=ze.identifierPrefix;if(ge){var c=Gs,d=ts;c=(d&~(1<<32-Ze(d)-1)).toString(32)+c,a=":"+a+"R"+c,c=go++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=E_++,a=":"+a+"r"+c.toString(32)+":";return r.memoizedState=a},useCacheRefresh:function(){return $n().memoizedState=tm.bind(null,$t)}};Oa.useMemoCache=Pr,Oa.useHostTransitionStatus=Gc,Oa.useFormState=Lp,Oa.useActionState=Lp,Oa.useOptimistic=function(r){var a=$n();a.memoizedState=a.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=wu.bind(null,$t,!0,c),c.dispatch=a,[r,a]};var Is={readContext:ai,use:yo,useCallback:jp,useContext:ai,useEffect:gf,useImperativeHandle:qp,useInsertionEffect:Xp,useLayoutEffect:Ip,useMemo:Kp,useReducer:Gr,useRef:Vp,useState:function(){return Gr(tn)},useDebugValue:_f,useDeferredValue:function(r,a){var c=dn();return Wp(c,we.memoizedState,r,a)},useTransition:function(){var r=Gr(tn)[0],a=dn().memoizedState;return[typeof r=="boolean"?r:Du(r),a]},useSyncExternalStore:wp,useId:bf};Is.useCacheRefresh=$p,Is.useMemoCache=Pr,Is.useHostTransitionStatus=Gc,Is.useFormState=bo,Is.useActionState=bo,Is.useOptimistic=function(r,a){var c=dn();return pf(c,we,r,a)};var Sl={readContext:ai,use:yo,useCallback:jp,useContext:ai,useEffect:gf,useImperativeHandle:qp,useInsertionEffect:Xp,useLayoutEffect:Ip,useMemo:Kp,useReducer:wc,useRef:Vp,useState:function(){return wc(tn)},useDebugValue:_f,useDeferredValue:function(r,a){var c=dn();return we===null?Pc(c,r,a):Wp(c,we.memoizedState,r,a)},useTransition:function(){var r=wc(tn)[0],a=dn().memoizedState;return[typeof r=="boolean"?r:Du(r),a]},useSyncExternalStore:wp,useId:bf};Sl.useCacheRefresh=$p,Sl.useMemoCache=Pr,Sl.useHostTransitionStatus=Gc,Sl.useFormState=Fp,Sl.useActionState=Fp,Sl.useOptimistic=function(r,a){var c=dn();return we!==null?pf(c,we,r,a):(c.baseState=r,[r,c.queue.dispatch])};function xf(r,a,c,d){a=r.memoizedState,c=c(d,a),c=c==null?a:Y({},a,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Sf={isMounted:function(r){return(r=r._reactInternals)?ut(r)===r:!1},enqueueSetState:function(r,a,c){r=r._reactInternals;var d=Ri(),_=$i(d);_.payload=a,c!=null&&(_.callback=c),a=tr(r,_,d),a!==null&&(Dn(a,r,d),Na(a,r,d))},enqueueReplaceState:function(r,a,c){r=r._reactInternals;var d=Ri(),_=$i(d);_.tag=1,_.payload=a,c!=null&&(_.callback=c),a=tr(r,_,d),a!==null&&(Dn(a,r,d),Na(a,r,d))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var c=Ri(),d=$i(c);d.tag=2,a!=null&&(d.callback=a),a=tr(r,d,c),a!==null&&(Dn(a,r,c),Na(a,r,c))}};function rm(r,a,c,d,_,v,C){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,v,C):a.prototype&&a.prototype.isPureReactComponent?!Or(c,d)||!Or(_,v):!0}function sm(r,a,c,d){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,d),a.state!==r&&Sf.enqueueReplaceState(a,a.state,null)}function El(r,a){var c=a;if("ref"in a){c={};for(var d in a)d!=="ref"&&(c[d]=a[d])}if(r=r.defaultProps){c===a&&(c=Y({},c));for(var _ in r)c[_]===void 0&&(c[_]=r[_])}return c}var zc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function am(r){zc(r)}function lm(r){console.error(r)}function om(r){zc(r)}function Lc(r,a){try{var c=r.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function um(r,a,c){try{var d=r.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Ef(r,a,c){return c=$i(c),c.tag=3,c.payload={element:null},c.callback=function(){Lc(r,a)},c}function Tf(r){return r=$i(r),r.tag=3,r}function cm(r,a,c,d){var _=c.type.getDerivedStateFromError;if(typeof _=="function"){var v=d.value;r.payload=function(){return _(v)},r.callback=function(){um(a,c,d)}}var C=c.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(r.callback=function(){um(a,c,d),typeof _!="function"&&(Mn===null?Mn=new Set([this]):Mn.add(this));var w=d.stack;this.componentDidCatch(d.value,{componentStack:w!==null?w:""})})}function R_(r,a,c,d,_){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=c.alternate,a!==null&&Ou(a,c,_,!0),c=Hi.current,c!==null){switch(c.tag){case 13:return ns===null?Vu():c.alternate===null&&We===0&&(We=3),c.flags&=-257,c.flags|=65536,c.lanes=_,d===Ac?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([d]):a.add(d),Wt(r,d,_)),!1;case 22:return c.flags|=65536,d===Ac?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([d]):c.add(d)),Wt(r,d,_)),!1}throw Error(i(435,c.tag))}return Wt(r,d,_),Vu(),!1}if(ge)return a=Hi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=_,d!==Su&&(r=Error(i(422),{cause:d}),es(Li(r,c)))):(d!==Su&&(a=Error(i(423),{cause:d}),es(Li(a,c))),r=r.current.alternate,r.flags|=65536,_&=-_,r.lanes|=_,d=Li(d,c),_=Ef(r.stateNode,d,_),To(r,_),We!==4&&(We=2)),!1;var v=Error(i(520),{cause:d});if(v=Li(v,c),Fu===null?Fu=[v]:Fu.push(v),We!==4&&(We=2),a===null)return!0;d=Li(d,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,r=_&-_,c.lanes|=r,r=Ef(c.stateNode,d,r),To(c,r),!1;case 1:if(a=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Mn===null||!Mn.has(v))))return c.flags|=65536,_&=-_,c.lanes|=_,_=Tf(_),cm(_,r,c,d),To(c,_),!1}c=c.return}while(c!==null);return!1}var Zi=Error(i(461)),Ln=!1;function Hn(r,a,c,d){a.child=r===null?zs(a,null,c,d):Ns(a,r.child,c,d)}function Af(r,a,c,d,_){c=c.render;var v=a.ref;if("ref"in d){var C={};for(var w in d)w!=="ref"&&(C[w]=d[w])}else C=d;return Al(a),d=hf(r,a,c,C,v,_),w=ff(),r!==null&&!Ln?(Mu(r,a,_),pn(r,a,_)):(ge&&w&&xu(a),a.flags|=1,Hn(r,a,d,_),a.child)}function Cf(r,a,c,d,_){if(r===null){var v=c.type;return typeof v=="function"&&!Zs(v)&&v.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=v,Bf(r,a,v,d,_)):(r=Ro(c.type,null,d,a,a.mode,_),r.ref=a.ref,r.return=a,a.child=r)}if(v=r.child,!Pf(r,_)){var C=v.memoizedProps;if(c=c.compare,c=c!==null?c:Or,c(C,d)&&r.ref===a.ref)return pn(r,a,_)}return a.flags|=1,r=Ci(v,d),r.ref=a.ref,r.return=a,a.child=r}function Bf(r,a,c,d,_){if(r!==null){var v=r.memoizedProps;if(Or(v,d)&&r.ref===a.ref)if(Ln=!1,a.pendingProps=d=v,Pf(r,_))(r.flags&131072)!==0&&(Ln=!0);else return a.lanes=r.lanes,pn(r,a,_)}return Mf(r,a,c,d,_)}function hm(r,a,c){var d=a.pendingProps,_=d.children,v=(a.stateNode._pendingVisibility&2)!==0,C=r!==null?r.memoizedState:null;if(vo(r,a),d.mode==="hidden"||v){if((a.flags&128)!==0){if(d=C!==null?C.baseLanes|c:c,r!==null){for(_=a.child=r.child,v=0;_!==null;)v=v|_.lanes|_.childLanes,_=_.sibling;a.childLanes=v&~d}else a.childLanes=0,a.child=null;return Rf(r,a,d,c)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&mo(a,C!==null?C.cachePool:null),C!==null?Ta(a,C):Bc(),of(a);else return a.lanes=a.childLanes=536870912,Rf(r,a,C!==null?C.baseLanes|c:c,c)}else C!==null?(mo(a,C.cachePool),Ta(a,C),Hs(),a.memoizedState=null):(r!==null&&mo(a,null),Bc(),Hs());return Hn(r,a,_,c),a.child}function Rf(r,a,c,d){var _=Ru();return _=_===null?null:{parent:fn._currentValue,pool:_},a.memoizedState={baseLanes:c,cachePool:_},r!==null&&mo(a,null),Bc(),of(a),r!==null&&Ou(r,a,d,!0),null}function vo(r,a){var c=a.ref;if(c===null)r!==null&&r.ref!==null&&(a.flags|=2097664);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(a.flags|=2097664)}}function Mf(r,a,c,d,_){return Al(a),c=hf(r,a,c,d,void 0,_),d=ff(),r!==null&&!Ln?(Mu(r,a,_),pn(r,a,_)):(ge&&d&&xu(a),a.flags|=1,Hn(r,a,c,_),a.child)}function fm(r,a,c,d,_,v){return Al(a),a.updateQueue=null,c=Dp(a,d,c,_),Mp(r),d=ff(),r!==null&&!Ln?(Mu(r,a,v),pn(r,a,v)):(ge&&d&&xu(a),a.flags|=1,Hn(r,a,c,v),a.child)}function dm(r,a,c,d,_){if(Al(a),a.stateNode===null){var v=ya,C=c.contextType;typeof C=="object"&&C!==null&&(v=ai(C)),v=new c(d,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Sf,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=d,v.state=a.memoizedState,v.refs={},Ti(a),C=c.contextType,v.context=typeof C=="object"&&C!==null?ai(C):ya,v.state=a.memoizedState,C=c.getDerivedStateFromProps,typeof C=="function"&&(xf(a,c,C,d),v.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(C=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),C!==v.state&&Sf.enqueueReplaceState(v,v.state,null),zr(a,d,v,_),li(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(r===null){v=a.stateNode;var w=a.memoizedProps,L=El(c,w);v.props=L;var Q=v.context,mt=c.contextType;C=ya,typeof mt=="object"&&mt!==null&&(C=ai(mt));var _t=c.getDerivedStateFromProps;mt=typeof _t=="function"||typeof v.getSnapshotBeforeUpdate=="function",w=a.pendingProps!==w,mt||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w||Q!==C)&&sm(a,v,d,C),Bn=!1;var lt=a.memoizedState;v.state=lt,zr(a,d,v,_),li(),Q=a.memoizedState,w||lt!==Q||Bn?(typeof _t=="function"&&(xf(a,c,_t,d),Q=a.memoizedState),(L=Bn||rm(a,c,L,d,lt,Q,C))?(mt||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=Q),v.props=d,v.state=Q,v.context=C,d=L):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{v=a.stateNode,Ic(r,a),C=a.memoizedProps,mt=El(c,C),v.props=mt,_t=a.pendingProps,lt=v.context,Q=c.contextType,L=ya,typeof Q=="object"&&Q!==null&&(L=ai(Q)),w=c.getDerivedStateFromProps,(Q=typeof w=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==_t||lt!==L)&&sm(a,v,d,L),Bn=!1,lt=a.memoizedState,v.state=lt,zr(a,d,v,_),li();var dt=a.memoizedState;C!==_t||lt!==dt||Bn||r!==null&&r.dependencies!==null&&So(r.dependencies)?(typeof w=="function"&&(xf(a,c,w,d),dt=a.memoizedState),(mt=Bn||rm(a,c,mt,d,lt,dt,L)||r!==null&&r.dependencies!==null&&So(r.dependencies))?(Q||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,dt,L),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,dt,L)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||C===r.memoizedProps&&lt===r.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&lt===r.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=dt),v.props=d,v.state=dt,v.context=L,d=mt):(typeof v.componentDidUpdate!="function"||C===r.memoizedProps&&lt===r.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&lt===r.memoizedState||(a.flags|=1024),d=!1)}return v=d,vo(r,a),d=(a.flags&128)!==0,v||d?(v=a.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,r!==null&&d?(a.child=Ns(a,r.child,null,_),a.child=Ns(a,null,c,_)):Hn(r,a,c,_),a.memoizedState=v.state,r=a.child):r=pn(r,a,_),r}function Df(r,a,c,d){return ho(),a.flags|=256,Hn(r,a,c,d),a.child}var wf={dehydrated:null,treeContext:null,retryLane:0};function qn(r){return{baseLanes:r,cachePool:Vs()}}function Hc(r,a,c){return r=r!==null?r.childLanes&~c:0,a&&(r|=Bi),r}function pm(r,a,c){var d=a.pendingProps,_=!1,v=(a.flags&128)!==0,C;if((C=v)||(C=r!==null&&r.memoizedState===null?!1:(An.current&2)!==0),C&&(_=!0,a.flags&=-129),C=(a.flags&32)!==0,a.flags&=-33,r===null){if(ge){if(_?Ls(a):Hs(),ge){var w=Yn,L;if(L=w){t:{for(L=w,w=fr;L.nodeType!==8;){if(!w){w=null;break t}if(L=na(L.nextSibling),L===null){w=null;break t}}w=L}w!==null?(a.memoizedState={dehydrated:w,treeContext:Ps!==null?{id:ts,overflow:Gs}:null,retryLane:536870912},L=yn(18,null,null,0),L.stateNode=w,L.return=a,a.child=L,si=a,Yn=null,L=!0):L=!1}L||ml(a)}if(w=a.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return w.data==="$!"?a.lanes=16:a.lanes=536870912,null;is(a)}return w=d.children,d=d.fallback,_?(Hs(),_=a.mode,w=Of({mode:"hidden",children:w},_),d=ka(d,_,c,null),w.return=a,d.return=a,w.sibling=d,a.child=w,_=a.child,_.memoizedState=qn(c),_.childLanes=Hc(r,C,c),a.memoizedState=wf,d):(Ls(a),Uf(a,w))}if(L=r.memoizedState,L!==null&&(w=L.dehydrated,w!==null)){if(v)a.flags&256?(Ls(a),a.flags&=-257,a=Fc(r,a,c)):a.memoizedState!==null?(Hs(),a.child=r.child,a.flags|=128,a=null):(Hs(),_=d.fallback,w=a.mode,d=Of({mode:"visible",children:d.children},w),_=ka(_,w,c,null),_.flags|=2,d.return=a,_.return=a,d.sibling=_,a.child=d,Ns(a,r.child,null,c),d=a.child,d.memoizedState=qn(c),d.childLanes=Hc(r,C,c),a.memoizedState=wf,a=_);else if(Ls(a),w.data==="$!"){if(C=w.nextSibling&&w.nextSibling.dataset,C)var Q=C.dgst;C=Q,d=Error(i(419)),d.stack="",d.digest=C,es({value:d,source:null,stack:null}),a=Fc(r,a,c)}else if(Ln||Ou(r,a,c,!1),C=(c&r.childLanes)!==0,Ln||C){if(C=ze,C!==null){if(d=c&-c,(d&42)!==0)d=1;else switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=64;break;case 268435456:d=134217728;break;default:d=0}if(d=(d&(C.suspendedLanes|c))!==0?0:d,d!==0&&d!==L.retryLane)throw L.retryLane=d,Os(r,d),Dn(C,r,d),Zi}w.data==="$?"||Vu(),a=Fc(r,a,c)}else w.data==="$?"?(a.flags|=128,a.child=r.child,a=Ul.bind(null,r),w._reactRetry=a,a=null):(r=L.treeContext,Yn=na(w.nextSibling),si=a,ge=!0,hr=null,fr=!1,r!==null&&(Ie[Wi++]=ts,Ie[Wi++]=Gs,Ie[Wi++]=Ps,ts=r.id,Gs=r.overflow,Ps=a),a=Uf(a,d.children),a.flags|=4096);return a}return _?(Hs(),_=d.fallback,w=a.mode,L=r.child,Q=L.sibling,d=Ci(L,{mode:"hidden",children:d.children}),d.subtreeFlags=L.subtreeFlags&31457280,Q!==null?_=Ci(Q,_):(_=ka(_,w,c,null),_.flags|=2),_.return=a,d.return=a,d.sibling=_,a.child=d,d=_,_=a.child,w=r.child.memoizedState,w===null?w=qn(c):(L=w.cachePool,L!==null?(Q=fn._currentValue,L=L.parent!==Q?{parent:Q,pool:Q}:L):L=Vs(),w={baseLanes:w.baseLanes|c,cachePool:L}),_.memoizedState=w,_.childLanes=Hc(r,C,c),a.memoizedState=wf,d):(Ls(a),c=r.child,r=c.sibling,c=Ci(c,{mode:"visible",children:d.children}),c.return=a,c.sibling=null,r!==null&&(C=a.deletions,C===null?(a.deletions=[r],a.flags|=16):C.push(r)),a.child=c,a.memoizedState=null,c)}function Uf(r,a){return a=Of({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function Of(r,a){return Nf(r,a,0,null)}function Fc(r,a,c){return Ns(a,r.child,null,c),r=Uf(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function Vc(r,a,c){r.lanes|=a;var d=r.alternate;d!==null&&(d.lanes|=a),Ji(r.return,a,c)}function Pa(r,a,c,d,_){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:_}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=c,v.tailMode=_)}function Tl(r,a,c){var d=a.pendingProps,_=d.revealOrder,v=d.tail;if(Hn(r,a,d.children,c),d=An.current,(d&2)!==0)d=d&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Vc(r,c,a);else if(r.tag===19)Vc(r,c,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break t;for(;r.sibling===null;){if(r.return===null||r.return===a)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}switch(ce(An,d),_){case"forwards":for(c=a.child,_=null;c!==null;)r=c.alternate,r!==null&&po(r)===null&&(_=c),c=c.sibling;c=_,c===null?(_=a.child,a.child=null):(_=c.sibling,c.sibling=null),Pa(a,!1,_,c,v);break;case"backwards":for(c=null,_=a.child,a.child=null;_!==null;){if(r=_.alternate,r!==null&&po(r)===null){a.child=_;break}r=_.sibling,_.sibling=c,c=_,_=r}Pa(a,!0,c,null,v);break;case"together":Pa(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function pn(r,a,c){if(r!==null&&(a.dependencies=r.dependencies),kr|=a.lanes,(c&a.childLanes)===0)if(r!==null){if(Ou(r,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,c=Ci(r,r.pendingProps),a.child=c,c.return=a;r.sibling!==null;)r=r.sibling,c=c.sibling=Ci(r,r.pendingProps),c.return=a;c.sibling=null}return a.child}function Pf(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&So(r)))}function M_(r,a,c){switch(a.tag){case 3:ln(a,a.stateNode.containerInfo),Ga(a,fn,r.memoizedState.cache),ho();break;case 27:case 5:In(a);break;case 4:ln(a,a.stateNode.containerInfo);break;case 10:Ga(a,a.type,a.memoizedProps.value);break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Ls(a),a.flags|=128,null):(c&a.child.childLanes)!==0?pm(r,a,c):(Ls(a),r=pn(r,a,c),r!==null?r.sibling:null);Ls(a);break;case 19:var _=(r.flags&128)!==0;if(d=(c&a.childLanes)!==0,d||(Ou(r,a,c,!1),d=(c&a.childLanes)!==0),_){if(d)return Tl(r,a,c);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),ce(An,An.current),d)break;return null;case 22:case 23:return a.lanes=0,hm(r,a,c);case 24:Ga(a,fn,r.memoizedState.cache)}return pn(r,a,c)}function Uu(r,a,c){if(r!==null)if(r.memoizedProps!==a.pendingProps)Ln=!0;else{if(!Pf(r,c)&&(a.flags&128)===0)return Ln=!1,M_(r,a,c);Ln=(r.flags&131072)!==0}else Ln=!1,ge&&(a.flags&1048576)!==0&&af(a,vu,a.index);switch(a.lanes=0,a.tag){case 16:t:{r=a.pendingProps;var d=a.elementType,_=d._init;if(d=_(d._payload),a.type=d,typeof d=="function")Zs(d)?(r=El(d,r),a.tag=1,a=dm(null,a,d,r,c)):(a.tag=0,a=Mf(null,a,d,r,c));else{if(d!=null){if(_=d.$$typeof,_===R){a.tag=11,a=Af(null,a,d,r,c);break t}else if(_===P){a.tag=14,a=Cf(null,a,d,r,c);break t}}throw a=ht(d)||d,Error(i(306,a,""))}}return a;case 0:return Mf(r,a,a.type,a.pendingProps,c);case 1:return d=a.type,_=El(d,a.pendingProps),dm(r,a,d,_,c);case 3:t:{if(ln(a,a.stateNode.containerInfo),r===null)throw Error(i(387));var v=a.pendingProps;_=a.memoizedState,d=_.element,Ic(r,a),zr(a,v,null,c);var C=a.memoizedState;if(v=C.cache,Ga(a,fn,v),v!==_.cache&&kc(a,[fn],c,!0),li(),v=C.element,_.isDehydrated)if(_={element:v,isDehydrated:!1,cache:C.cache},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){a=Df(r,a,v,c);break t}else if(v!==d){d=Li(Error(i(424)),a),es(d),a=Df(r,a,v,c);break t}else for(Yn=na(a.stateNode.containerInfo.firstChild),si=a,ge=!0,hr=null,fr=!0,c=zs(a,null,v,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ho(),v===d){a=pn(r,a,c);break t}Hn(r,a,v,c)}a=a.child}return a;case 26:return vo(r,a),r===null?(c=Y2(a.type,null,a.pendingProps,null))?a.memoizedState=c:ge||(c=a.type,r=a.pendingProps,d=xm(Fe.current).createElement(c),d[he]=a,d[ae]=r,Mi(d,c,r),hn(d),a.stateNode=d):a.memoizedState=Y2(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return In(a),r===null&&ge&&(d=a.stateNode=k2(a.type,a.pendingProps,Fe.current),si=a,fr=!0,Yn=na(d.firstChild)),d=a.pendingProps.children,r!==null||ge?Hn(r,a,d,c):a.child=Ns(a,null,d,c),vo(r,a),a.child;case 5:return r===null&&ge&&((_=d=Yn)&&(d=CM(d,a.type,a.pendingProps,fr),d!==null?(a.stateNode=d,si=a,Yn=na(d.firstChild),fr=!1,_=!0):_=!1),_||ml(a)),In(a),_=a.type,v=a.pendingProps,C=r!==null?r.memoizedProps:null,d=v.children,F_(_,v)?d=null:C!==null&&F_(_,C)&&(a.flags|=32),a.memoizedState!==null&&(_=hf(r,a,T_,null,null,c),Yf._currentValue=_),vo(r,a),Hn(r,a,d,c),a.child;case 6:return r===null&&ge&&((r=c=Yn)&&(c=BM(c,a.pendingProps,fr),c!==null?(a.stateNode=c,si=a,Yn=null,r=!0):r=!1),r||ml(a)),null;case 13:return pm(r,a,c);case 4:return ln(a,a.stateNode.containerInfo),d=a.pendingProps,r===null?a.child=Ns(a,null,d,c):Hn(r,a,d,c),a.child;case 11:return Af(r,a,a.type,a.pendingProps,c);case 7:return Hn(r,a,a.pendingProps,c),a.child;case 8:return Hn(r,a,a.pendingProps.children,c),a.child;case 12:return Hn(r,a,a.pendingProps.children,c),a.child;case 10:return d=a.pendingProps,Ga(a,a.type,d.value),Hn(r,a,d.children,c),a.child;case 9:return _=a.type._context,d=a.pendingProps.children,Al(a),_=ai(_),d=d(_),a.flags|=1,Hn(r,a,d,c),a.child;case 14:return Cf(r,a,a.type,a.pendingProps,c);case 15:return Bf(r,a,a.type,a.pendingProps,c);case 19:return Tl(r,a,c);case 22:return hm(r,a,c);case 24:return Al(a),d=ai(fn),r===null?(_=Ru(),_===null&&(_=ze,v=uf(),_.pooledCache=v,v.refCount++,v!==null&&(_.pooledCacheLanes|=c),_=v),a.memoizedState={parent:d,cache:_},Ti(a),Ga(a,fn,_)):((r.lanes&c)!==0&&(Ic(r,a),zr(a,null,null,c),li()),_=r.memoizedState,v=a.memoizedState,_.parent!==d?(_={parent:d,cache:d},a.memoizedState=_,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=_),Ga(a,fn,d)):(d=v.cache,Ga(a,fn,d),d!==_.cache&&kc(a,[fn],c,!0))),Hn(r,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}var xo=Gt(null),ls=null,Nr=null;function Ga(r,a,c){ce(xo,a._currentValue),a._currentValue=c}function Ys(r){r._currentValue=xo.current,ne(xo)}function Ji(r,a,c){for(;r!==null;){var d=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),r===c)break;r=r.return}}function kc(r,a,c,d){var _=r.child;for(_!==null&&(_.return=r);_!==null;){var v=_.dependencies;if(v!==null){var C=_.child;v=v.firstContext;t:for(;v!==null;){var w=v;v=_;for(var L=0;L<a.length;L++)if(w.context===a[L]){v.lanes|=c,w=v.alternate,w!==null&&(w.lanes|=c),Ji(v.return,c,r),d||(C=null);break t}v=w.next}}else if(_.tag===18){if(C=_.return,C===null)throw Error(i(341));C.lanes|=c,v=C.alternate,v!==null&&(v.lanes|=c),Ji(C,c,r),C=null}else C=_.child;if(C!==null)C.return=_;else for(C=_;C!==null;){if(C===r){C=null;break}if(_=C.sibling,_!==null){_.return=C.return,C=_;break}C=C.return}_=C}}function Ou(r,a,c,d){r=null;for(var _=a,v=!1;_!==null;){if(!v){if((_.flags&524288)!==0)v=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var C=_.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var w=_.type;Gi(_.pendingProps.value,C.value)||(r!==null?r.push(w):r=[w])}}else if(_===ve.current){if(C=_.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(r!==null?r.push(Yf):r=[Yf])}_=_.return}r!==null&&kc(a,r,c,d),a.flags|=262144}function So(r){for(r=r.firstContext;r!==null;){if(!Gi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Al(r){ls=r,Nr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function ai(r){return Eo(ls,r)}function Xc(r,a){return ls===null&&Al(r),Eo(r,a)}function Eo(r,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Nr===null){if(r===null)throw Error(i(308));Nr=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Nr=Nr.next=a;return c}var Bn=!1;function Ti(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ic(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function $i(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function tr(r,a,c){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(Kt&2)!==0){var _=d.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),d.pending=a,a=bu(r),yu(r,null,c),a}return _u(r,d,a,c),bu(r)}function Na(r,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194176)!==0)){var d=a.lanes;d&=r.pendingLanes,c|=d,a.lanes=c,or(r,c)}}function To(r,a){var c=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var _=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var C={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?_=v=C:v=v.next=C,c=c.next}while(c!==null);v===null?_=v=a:v=v.next=a}else _=v=a;c={baseState:d.baseState,firstBaseUpdate:_,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=a:r.next=a,c.lastBaseUpdate=a}var Vi=!1;function li(){if(Vi){var r=Ba;if(r!==null)throw r}}function zr(r,a,c,d){Vi=!1;var _=r.updateQueue;Bn=!1;var v=_.firstBaseUpdate,C=_.lastBaseUpdate,w=_.shared.pending;if(w!==null){_.shared.pending=null;var L=w,Q=L.next;L.next=null,C===null?v=Q:C.next=Q,C=L;var mt=r.alternate;mt!==null&&(mt=mt.updateQueue,w=mt.lastBaseUpdate,w!==C&&(w===null?mt.firstBaseUpdate=Q:w.next=Q,mt.lastBaseUpdate=L))}if(v!==null){var _t=_.baseState;C=0,mt=Q=L=null,w=v;do{var lt=w.lane&-536870913,dt=lt!==w.lane;if(dt?(kt&lt)===lt:(d&lt)===lt){lt!==0&&lt===yl&&(Vi=!0),mt!==null&&(mt=mt.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});t:{var Ot=r,Zt=w;lt=a;var wn=c;switch(Zt.tag){case 1:if(Ot=Zt.payload,typeof Ot=="function"){_t=Ot.call(wn,_t,lt);break t}_t=Ot;break t;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Zt.payload,lt=typeof Ot=="function"?Ot.call(wn,_t,lt):Ot,lt==null)break t;_t=Y({},_t,lt);break t;case 2:Bn=!0}}lt=w.callback,lt!==null&&(r.flags|=64,dt&&(r.flags|=8192),dt=_.callbacks,dt===null?_.callbacks=[lt]:dt.push(lt))}else dt={lane:lt,tag:w.tag,payload:w.payload,callback:w.callback,next:null},mt===null?(Q=mt=dt,L=_t):mt=mt.next=dt,C|=lt;if(w=w.next,w===null){if(w=_.shared.pending,w===null)break;dt=w,w=dt.next,dt.next=null,_.lastBaseUpdate=dt,_.shared.pending=null}}while(!0);mt===null&&(L=_t),_.baseState=L,_.firstBaseUpdate=Q,_.lastBaseUpdate=mt,v===null&&(_.shared.lanes=0),kr|=C,r.lanes=C,r.memoizedState=_t}}function os(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function us(r,a){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)os(c[r],a)}function mn(r,a){try{var c=a.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var _=d.next;c=_;do{if((c.tag&r)===r){d=void 0;var v=c.create,C=c.inst;d=v(),C.destroy=d}c=c.next}while(c!==_)}}catch(w){xt(a,a.return,w)}}function dr(r,a,c){try{var d=a.updateQueue,_=d!==null?d.lastEffect:null;if(_!==null){var v=_.next;d=v;do{if((d.tag&r)===r){var C=d.inst,w=C.destroy;if(w!==void 0){C.destroy=void 0,_=a;var L=c;try{w()}catch(Q){xt(_,L,Q)}}}d=d.next}while(d!==v)}}catch(Q){xt(a,a.return,Q)}}function qs(r){var a=r.updateQueue;if(a!==null){var c=r.stateNode;try{us(a,c)}catch(d){xt(r,r.return,d)}}}function Pu(r,a,c){c.props=El(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(d){xt(r,a,d)}}function gn(r,a){try{var c=r.ref;if(c!==null){var d=r.stateNode;switch(r.tag){case 26:case 27:case 5:var _=d;break;default:_=d}typeof c=="function"?r.refCleanup=c(_):c.current=_}}catch(v){xt(r,a,v)}}function Ne(r,a){var c=r.ref,d=r.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(_){xt(r,a,_)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(_){xt(r,a,_)}else c.current=null}function _e(r){var a=r.type,c=r.memoizedProps,d=r.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break t;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(_){xt(r,r.return,_)}}function pr(r,a,c){try{var d=r.stateNode;xM(d,r.type,c,a),d[ae]=a}catch(_){xt(r,r.return,_)}}function Lr(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27||r.tag===4}function Gu(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||Lr(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==27&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ki(r,a,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(r,a):c.insertBefore(r,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(r,c)):(a=c,a.appendChild(r)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=vm));else if(d!==4&&d!==27&&(r=r.child,r!==null))for(ki(r,a,c),r=r.sibling;r!==null;)ki(r,a,c),r=r.sibling}function js(r,a,c){var d=r.tag;if(d===5||d===6)r=r.stateNode,a?c.insertBefore(r,a):c.appendChild(r);else if(d!==4&&d!==27&&(r=r.child,r!==null))for(js(r,a,c),r=r.sibling;r!==null;)js(r,a,c),r=r.sibling}var Hr=!1,je=!1,za=!1,Yc=typeof WeakSet=="function"?WeakSet:Set,_n=null,qc=!1;function Ao(r,a){if(r=r.containerInfo,L_=Bm,r=$h(r),mu(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else t:{c=(c=r.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var _=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break t}var C=0,w=-1,L=-1,Q=0,mt=0,_t=r,lt=null;e:for(;;){for(var dt;_t!==c||_!==0&&_t.nodeType!==3||(w=C+_),_t!==v||d!==0&&_t.nodeType!==3||(L=C+d),_t.nodeType===3&&(C+=_t.nodeValue.length),(dt=_t.firstChild)!==null;)lt=_t,_t=dt;for(;;){if(_t===r)break e;if(lt===c&&++Q===_&&(w=C),lt===v&&++mt===d&&(L=C),(dt=_t.nextSibling)!==null)break;_t=lt,lt=_t.parentNode}_t=dt}c=w===-1||L===-1?null:{start:w,end:L}}else c=null}c=c||{start:0,end:0}}else c=null;for(H_={focusedElem:r,selectionRange:c},Bm=!1,_n=a;_n!==null;)if(a=_n,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,_n=r;else for(;_n!==null;){switch(a=_n,v=a.alternate,r=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&v!==null){r=void 0,c=a,_=v.memoizedProps,v=v.memoizedState,d=c.stateNode;try{var Ot=El(c.type,_,c.elementType===c.type);r=d.getSnapshotBeforeUpdate(Ot,v),d.__reactInternalSnapshotBeforeUpdate=r}catch(Zt){xt(c,c.return,Zt)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,c=r.nodeType,c===9)X_(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":X_(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,_n=r;break}_n=a.return}return Ot=qc,qc=!1,Ot}function Co(r,a,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:cs(r,c),d&4&&mn(5,c);break;case 1:if(cs(r,c),d&4)if(r=c.stateNode,a===null)try{r.componentDidMount()}catch(w){xt(c,c.return,w)}else{var _=El(c.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(_,a,r.__reactInternalSnapshotBeforeUpdate)}catch(w){xt(c,c.return,w)}}d&64&&qs(c),d&512&&gn(c,c.return);break;case 3:if(cs(r,c),d&64&&(d=c.updateQueue,d!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{us(d,r)}catch(w){xt(c,c.return,w)}}break;case 26:cs(r,c),d&512&&gn(c,c.return);break;case 27:case 5:cs(r,c),a===null&&d&4&&_e(c),d&512&&gn(c,c.return);break;case 12:cs(r,c);break;case 13:cs(r,c),d&4&&mm(r,c);break;case 22:if(_=c.memoizedState!==null||Hr,!_){a=a!==null&&a.memoizedState!==null||je;var v=Hr,C=je;Hr=_,(je=a)&&!C?Vr(r,c,(c.subtreeFlags&8772)!==0):cs(r,c),Hr=v,je=C}d&512&&(c.memoizedProps.mode==="manual"?gn(c,c.return):Ne(c,c.return));break;default:cs(r,c)}}function jc(r){var a=r.alternate;a!==null&&(r.alternate=null,jc(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Qo(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Ke=null,jn=!1;function oi(r,a,c){for(c=c.child;c!==null;)Kc(r,a,c),c=c.sibling}function Kc(r,a,c){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(yi,c)}catch{}switch(c.tag){case 26:je||Ne(c,a),oi(r,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:je||Ne(c,a);var d=Ke,_=jn;for(Ke=c.stateNode,oi(r,a,c),c=c.stateNode,a=c.attributes;a.length;)c.removeAttributeNode(a[0]);Qo(c),Ke=d,jn=_;break;case 5:je||Ne(c,a);case 6:_=Ke;var v=jn;if(Ke=null,oi(r,a,c),Ke=_,jn=v,Ke!==null)if(jn)try{r=Ke,d=c.stateNode,r.nodeType===8?r.parentNode.removeChild(d):r.removeChild(d)}catch(C){xt(c,a,C)}else try{Ke.removeChild(c.stateNode)}catch(C){xt(c,a,C)}break;case 18:Ke!==null&&(jn?(a=Ke,c=c.stateNode,a.nodeType===8?k_(a.parentNode,c):a.nodeType===1&&k_(a,c),Wf(a)):k_(Ke,c.stateNode));break;case 4:d=Ke,_=jn,Ke=c.stateNode.containerInfo,jn=!0,oi(r,a,c),Ke=d,jn=_;break;case 0:case 11:case 14:case 15:je||dr(2,c,a),je||dr(4,c,a),oi(r,a,c);break;case 1:je||(Ne(c,a),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Pu(c,a,d)),oi(r,a,c);break;case 21:oi(r,a,c);break;case 22:je||Ne(c,a),je=(d=je)||c.memoizedState!==null,oi(r,a,c),je=d;break;default:oi(r,a,c)}}function mm(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Wf(r)}catch(c){xt(a,a.return,c)}}function Nu(r){switch(r.tag){case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new Yc),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new Yc),a;default:throw Error(i(435,r.tag))}}function zu(r,a){var c=Nu(r);a.forEach(function(d){var _=st.bind(null,r,d);c.has(d)||(c.add(d),d.then(_,_))})}function Ai(r,a){var c=a.deletions;if(c!==null)for(var d=0;d<c.length;d++){var _=c[d],v=r,C=a,w=C;t:for(;w!==null;){switch(w.tag){case 27:case 5:Ke=w.stateNode,jn=!1;break t;case 3:Ke=w.stateNode.containerInfo,jn=!0;break t;case 4:Ke=w.stateNode.containerInfo,jn=!0;break t}w=w.return}if(Ke===null)throw Error(i(160));Kc(v,C,_),Ke=null,jn=!1,v=_.alternate,v!==null&&(v.return=null),_.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Cl(a,r),a=a.sibling}var ui=null;function Cl(r,a){var c=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ai(a,r),ci(r),d&4&&(dr(3,r,r.return),mn(3,r),dr(5,r,r.return));break;case 1:Ai(a,r),ci(r),d&512&&(je||c===null||Ne(c,c.return)),d&64&&Hr&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var _=ui;if(Ai(a,r),ci(r),d&512&&(je||c===null||Ne(c,c.return)),d&4){var v=c!==null?c.memoizedState:null;if(d=r.memoizedState,c===null)if(d===null)if(r.stateNode===null){t:{d=r.type,c=r.memoizedProps,_=_.ownerDocument||_;e:switch(d){case"title":v=_.getElementsByTagName("title")[0],(!v||v[rl]||v[he]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=_.createElement(d),_.head.insertBefore(v,_.querySelector("head > title"))),Mi(v,d,c),v[he]=r,hn(v),d=v;break t;case"link":var C=K2("link","href",_).get(d+(c.href||""));if(C){for(var w=0;w<C.length;w++)if(v=C[w],v.getAttribute("href")===(c.href==null?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){C.splice(w,1);break e}}v=_.createElement(d),Mi(v,d,c),_.head.appendChild(v);break;case"meta":if(C=K2("meta","content",_).get(d+(c.content||""))){for(w=0;w<C.length;w++)if(v=C[w],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){C.splice(w,1);break e}}v=_.createElement(d),Mi(v,d,c),_.head.appendChild(v);break;default:throw Error(i(468,d))}v[he]=r,hn(v),d=v}r.stateNode=d}else W2(_,r.type,r.stateNode);else r.stateNode=j2(_,d,r.memoizedProps);else v!==d?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,d===null?W2(_,r.type,r.stateNode):j2(_,d,r.memoizedProps)):d===null&&r.stateNode!==null&&pr(r,r.memoizedProps,c.memoizedProps)}break;case 27:if(d&4&&r.alternate===null){_=r.stateNode,v=r.memoizedProps;try{for(var L=_.firstChild;L;){var Q=L.nextSibling,mt=L.nodeName;L[rl]||mt==="HEAD"||mt==="BODY"||mt==="SCRIPT"||mt==="STYLE"||mt==="LINK"&&L.rel.toLowerCase()==="stylesheet"||_.removeChild(L),L=Q}for(var _t=r.type,lt=_.attributes;lt.length;)_.removeAttributeNode(lt[0]);Mi(_,_t,v),_[he]=r,_[ae]=v}catch(Ot){xt(r,r.return,Ot)}}case 5:if(Ai(a,r),ci(r),d&512&&(je||c===null||Ne(c,c.return)),r.flags&32){_=r.stateNode;try{al(_,"")}catch(Ot){xt(r,r.return,Ot)}}d&4&&r.stateNode!=null&&(_=r.memoizedProps,pr(r,_,c!==null?c.memoizedProps:_)),d&1024&&(za=!0);break;case 6:if(Ai(a,r),ci(r),d&4){if(r.stateNode===null)throw Error(i(162));d=r.memoizedProps,c=r.stateNode;try{c.nodeValue=d}catch(Ot){xt(r,r.return,Ot)}}break;case 3:if(Tm=null,_=ui,ui=Sm(a.containerInfo),Ai(a,r),ui=_,ci(r),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Wf(a.containerInfo)}catch(Ot){xt(r,r.return,Ot)}za&&(za=!1,La(r));break;case 4:d=ui,ui=Sm(r.stateNode.containerInfo),Ai(a,r),ci(r),ui=d;break;case 12:Ai(a,r),ci(r);break;case 13:Ai(a,r),ci(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(te=_i()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,zu(r,d)));break;case 22:if(d&512&&(je||c===null||Ne(c,c.return)),L=r.memoizedState!==null,Q=c!==null&&c.memoizedState!==null,mt=Hr,_t=je,Hr=mt||L,je=_t||Q,Ai(a,r),je=_t,Hr=mt,ci(r),a=r.stateNode,a._current=r,a._visibility&=-3,a._visibility|=a._pendingVisibility&2,d&8192&&(a._visibility=L?a._visibility&-2:a._visibility|1,L&&(a=Hr||je,c===null||Q||a||Fr(r)),r.memoizedProps===null||r.memoizedProps.mode!=="manual"))t:for(c=null,a=r;;){if(a.tag===5||a.tag===26||a.tag===27){if(c===null){Q=c=a;try{if(_=Q.stateNode,L)v=_.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{C=Q.stateNode,w=Q.memoizedProps.style;var dt=w!=null&&w.hasOwnProperty("display")?w.display:null;C.style.display=dt==null||typeof dt=="boolean"?"":(""+dt).trim()}}catch(Ot){xt(Q,Q.return,Ot)}}}else if(a.tag===6){if(c===null){Q=a;try{Q.stateNode.nodeValue=L?"":Q.memoizedProps}catch(Ot){xt(Q,Q.return,Ot)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break t;for(;a.sibling===null;){if(a.return===null||a.return===r)break t;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=r.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,zu(r,c))));break;case 19:Ai(a,r),ci(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,zu(r,d)));break;case 21:break;default:Ai(a,r),ci(r)}}function ci(r){var a=r.flags;if(a&2){try{if(r.tag!==27){t:{for(var c=r.return;c!==null;){if(Lr(c)){var d=c;break t}c=c.return}throw Error(i(160))}switch(d.tag){case 27:var _=d.stateNode,v=Gu(r);js(r,v,_);break;case 5:var C=d.stateNode;d.flags&32&&(al(C,""),d.flags&=-33);var w=Gu(r);js(r,w,C);break;case 3:case 4:var L=d.stateNode.containerInfo,Q=Gu(r);ki(r,Q,L);break;default:throw Error(i(161))}}}catch(mt){xt(r,r.return,mt)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function La(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;La(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function cs(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Co(r,a.alternate,a),a=a.sibling}function Fr(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:dr(4,a,a.return),Fr(a);break;case 1:Ne(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&Pu(a,a.return,c),Fr(a);break;case 26:case 27:case 5:Ne(a,a.return),Fr(a);break;case 22:Ne(a,a.return),a.memoizedState===null&&Fr(a);break;default:Fr(a)}r=r.sibling}}function Vr(r,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,_=r,v=a,C=v.flags;switch(v.tag){case 0:case 11:case 15:Vr(_,v,c),mn(4,v);break;case 1:if(Vr(_,v,c),d=v,_=d.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Q){xt(d,d.return,Q)}if(d=v,_=d.updateQueue,_!==null){var w=d.stateNode;try{var L=_.shared.hiddenCallbacks;if(L!==null)for(_.shared.hiddenCallbacks=null,_=0;_<L.length;_++)os(L[_],w)}catch(Q){xt(d,d.return,Q)}}c&&C&64&&qs(v),gn(v,v.return);break;case 26:case 27:case 5:Vr(_,v,c),c&&d===null&&C&4&&_e(v),gn(v,v.return);break;case 12:Vr(_,v,c);break;case 13:Vr(_,v,c),c&&C&4&&mm(_,v);break;case 22:v.memoizedState===null&&Vr(_,v,c),gn(v,v.return);break;default:Vr(_,v,c)}a=a.sibling}}function Xi(r,a){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&Aa(c))}function mr(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Aa(r))}function Ye(r,a,c,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ks(r,a,c,d),a=a.sibling}function Ks(r,a,c,d){var _=a.flags;switch(a.tag){case 0:case 11:case 15:Ye(r,a,c,d),_&2048&&mn(9,a);break;case 3:Ye(r,a,c,d),_&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Aa(r)));break;case 12:if(_&2048){Ye(r,a,c,d),r=a.stateNode;try{var v=a.memoizedProps,C=v.id,w=v.onPostCommit;typeof w=="function"&&w(C,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(L){xt(a,a.return,L)}}else Ye(r,a,c,d);break;case 23:break;case 22:v=a.stateNode,a.memoizedState!==null?v._visibility&4?Ye(r,a,c,d):Se(r,a):v._visibility&4?Ye(r,a,c,d):(v._visibility|=4,jt(r,a,c,d,(a.subtreeFlags&10256)!==0)),_&2048&&Xi(a.alternate,a);break;case 24:Ye(r,a,c,d),_&2048&&mr(a.alternate,a);break;default:Ye(r,a,c,d)}}function jt(r,a,c,d,_){for(_=_&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var v=r,C=a,w=c,L=d,Q=C.flags;switch(C.tag){case 0:case 11:case 15:jt(v,C,w,L,_),mn(8,C);break;case 23:break;case 22:var mt=C.stateNode;C.memoizedState!==null?mt._visibility&4?jt(v,C,w,L,_):Se(v,C):(mt._visibility|=4,jt(v,C,w,L,_)),_&&Q&2048&&Xi(C.alternate,C);break;case 24:jt(v,C,w,L,_),_&&Q&2048&&mr(C.alternate,C);break;default:jt(v,C,w,L,_)}a=a.sibling}}function Se(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=r,d=a,_=d.flags;switch(d.tag){case 22:Se(c,d),_&2048&&Xi(d.alternate,d);break;case 24:Se(c,d),_&2048&&mr(d.alternate,d);break;default:Se(c,d)}a=a.sibling}}var en=8192;function Ws(r){if(r.subtreeFlags&en)for(r=r.child;r!==null;)Bl(r),r=r.sibling}function Bl(r){switch(r.tag){case 26:Ws(r),r.flags&en&&r.memoizedState!==null&&FM(ui,r.memoizedState,r.memoizedProps);break;case 5:Ws(r);break;case 3:case 4:var a=ui;ui=Sm(r.stateNode.containerInfo),Ws(r),ui=a;break;case 22:r.memoizedState===null&&(a=r.alternate,a!==null&&a.memoizedState!==null?(a=en,en=16777216,Ws(r),en=a):Ws(r));break;default:Ws(r)}}function Ha(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Fa(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];_n=d,gm(d,r)}Ha(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Bo(r),r=r.sibling}function Bo(r){switch(r.tag){case 0:case 11:case 15:Fa(r),r.flags&2048&&dr(9,r,r.return);break;case 3:Fa(r);break;case 12:Fa(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&4&&(r.return===null||r.return.tag!==13)?(a._visibility&=-5,Qs(r)):Fa(r);break;default:Fa(r)}}function Qs(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];_n=d,gm(d,r)}Ha(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:dr(8,a,a.return),Qs(a);break;case 22:c=a.stateNode,c._visibility&4&&(c._visibility&=-5,Qs(a));break;default:Qs(a)}r=r.sibling}}function gm(r,a){for(;_n!==null;){var c=_n;switch(c.tag){case 0:case 11:case 15:dr(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Aa(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,_n=d;else t:for(c=r;_n!==null;){d=_n;var _=d.sibling,v=d.return;if(jc(d),d===c){_n=null;break t}if(_!==null){_.return=v,_n=_;break t}_n=v}}}function Gf(r,a,c,d){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(r,a,c,d){return new Gf(r,a,c,d)}function Zs(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ci(r,a){var c=r.alternate;return c===null?(c=yn(r.tag,a,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=a,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&31457280,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,a=r.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Va(r,a){r.flags&=31457282;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,a=c.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Ro(r,a,c,d,_,v){var C=0;if(d=r,typeof r=="function")Zs(r)&&(C=1);else if(typeof r=="string")C=LM(r,c,Te.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case m:return ka(c.children,_,v,a);case g:C=8,_|=24;break;case b:return r=yn(12,c,a,_|2),r.elementType=b,r.lanes=v,r;case D:return r=yn(13,c,a,_),r.elementType=D,r.lanes=v,r;case B:return r=yn(19,c,a,_),r.elementType=B,r.lanes=v,r;case H:return Nf(c,_,v,a);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case x:case A:C=10;break t;case E:C=9;break t;case R:C=11;break t;case P:C=14;break t;case G:C=16,d=null;break t}C=29,c=Error(i(130,r===null?"null":typeof r,"")),d=null}return a=yn(C,c,a,_),a.elementType=r,a.type=d,a.lanes=v,a}function ka(r,a,c,d){return r=yn(7,r,d,a),r.lanes=c,r}function Nf(r,a,c,d){r=yn(22,r,d,a),r.elementType=H,r.lanes=c;var _={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var v=_._current;if(v===null)throw Error(i(456));if((_._pendingVisibility&2)===0){var C=Os(v,2);C!==null&&(_._pendingVisibility|=2,Dn(C,v,2))}},attach:function(){var v=_._current;if(v===null)throw Error(i(456));if((_._pendingVisibility&2)!==0){var C=Os(v,2);C!==null&&(_._pendingVisibility&=-3,Dn(C,v,2))}}};return r.stateNode=_,r}function Rn(r,a,c){return r=yn(6,r,null,a),r.lanes=c,r}function Lu(r,a,c){return a=yn(4,r.children!==null?r.children:[],r.key,a),a.lanes=c,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function gr(r){r.flags|=4}function Xa(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Q2(a)){if(a=Hi.current,a!==null&&((kt&4194176)===kt?ns!==null:(kt&62914560)!==kt&&(kt&536870912)===0||a!==ns))throw fo=Ac,lf;r.flags|=8192}}function _r(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?En():536870912,r.lanes|=a,fs|=a)}function Hu(r,a){if(!ge)switch(r.tailMode){case"hidden":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function an(r){var a=r.alternate!==null&&r.alternate.child===r.child,c=0,d=0;if(a)for(var _=r.child;_!==null;)c|=_.lanes|_.childLanes,d|=_.subtreeFlags&31457280,d|=_.flags&31457280,_.return=r,_=_.sibling;else for(_=r.child;_!==null;)c|=_.lanes|_.childLanes,d|=_.subtreeFlags,d|=_.flags,_.return=r,_=_.sibling;return r.subtreeFlags|=d,r.childLanes=c,a}function D_(r,a,c){var d=a.pendingProps;switch(va(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(a),null;case 1:return an(a),null;case 3:return c=a.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Ys(fn),Ge(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(co(a)?gr(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,hr!==null&&(xr(hr),hr=null))),an(a),null;case 26:return c=a.memoizedState,r===null?(gr(a),c!==null?(an(a),Xa(a,c)):(an(a),a.flags&=-16777217)):c?c!==r.memoizedState?(gr(a),an(a),Xa(a,c)):(an(a),a.flags&=-16777217):(r.memoizedProps!==d&&gr(a),an(a),a.flags&=-16777217),null;case 27:sr(a),c=Fe.current;var _=a.type;if(r!==null&&a.stateNode!=null)r.memoizedProps!==d&&gr(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return an(a),null}r=Te.current,co(a)?Tp(a):(r=k2(_,d,c),a.stateNode=r,gr(a))}return an(a),null;case 5:if(sr(a),c=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==d&&gr(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return an(a),null}if(r=Te.current,co(a))Tp(a);else{switch(_=xm(Fe.current),r){case 1:r=_.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:r=_.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":r=_.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":r=_.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":r=_.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof d.is=="string"?_.createElement("select",{is:d.is}):_.createElement("select"),d.multiple?r.multiple=!0:d.size&&(r.size=d.size);break;default:r=typeof d.is=="string"?_.createElement(c,{is:d.is}):_.createElement(c)}}r[he]=a,r[ae]=d;t:for(_=a.child;_!==null;){if(_.tag===5||_.tag===6)r.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===a)break t;for(;_.sibling===null;){if(_.return===null||_.return===a)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}a.stateNode=r;t:switch(Mi(r,c,d),c){case"button":case"input":case"select":case"textarea":r=!!d.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&gr(a)}}return an(a),a.flags&=-16777217,null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==d&&gr(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(i(166));if(r=Fe.current,co(a)){if(r=a.stateNode,c=a.memoizedProps,d=null,_=si,_!==null)switch(_.tag){case 27:case 5:d=_.memoizedProps}r[he]=a,r=!!(r.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||N2(r.nodeValue,c)),r||ml(a)}else r=xm(r).createTextNode(d),r[he]=a,a.stateNode=r}return an(a),null;case 13:if(d=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(_=co(a),d!==null&&d.dehydrated!==null){if(r===null){if(!_)throw Error(i(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[he]=a}else ho(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;an(a),_=!1}else hr!==null&&(xr(hr),hr=null),_=!0;if(!_)return a.flags&256?(is(a),a):(is(a),null)}if(is(a),(a.flags&128)!==0)return a.lanes=c,a;if(c=d!==null,r=r!==null&&r.memoizedState!==null,c){d=a.child,_=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(_=d.alternate.memoizedState.cachePool.pool);var v=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==_&&(d.flags|=2048)}return c!==r&&c&&(a.child.flags|=8192),_r(a,a.updateQueue),an(a),null;case 4:return Ge(),r===null&&G_(a.stateNode.containerInfo),an(a),null;case 10:return Ys(a.type),an(a),null;case 19:if(ne(An),_=a.memoizedState,_===null)return an(a),null;if(d=(a.flags&128)!==0,v=_.rendering,v===null)if(d)Hu(_,!1);else{if(We!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(v=po(r),v!==null){for(a.flags|=128,Hu(_,!1),r=v.updateQueue,a.updateQueue=r,_r(a,r),a.subtreeFlags=0,r=c,c=a.child;c!==null;)Va(c,r),c=c.sibling;return ce(An,An.current&1|2),a.child}r=r.sibling}_.tail!==null&&_i()>ue&&(a.flags|=128,d=!0,Hu(_,!1),a.lanes=4194304)}else{if(!d)if(r=po(v),r!==null){if(a.flags|=128,d=!0,r=r.updateQueue,a.updateQueue=r,_r(a,r),Hu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!v.alternate&&!ge)return an(a),null}else 2*_i()-_.renderingStartTime>ue&&c!==536870912&&(a.flags|=128,d=!0,Hu(_,!1),a.lanes=4194304);_.isBackwards?(v.sibling=a.child,a.child=v):(r=_.last,r!==null?r.sibling=v:a.child=v,_.last=v)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=_i(),a.sibling=null,r=An.current,ce(An,d?r&1|2:r&1),a):(an(a),null);case 22:case 23:return is(a),Bu(),d=a.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(c&536870912)!==0&&(a.flags&128)===0&&(an(a),a.subtreeFlags&6&&(a.flags|=8192)):an(a),c=a.updateQueue,c!==null&&_r(a,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==c&&(a.flags|=2048),r!==null&&ne(Fs),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Ys(fn),an(a),null;case 25:return null}throw Error(i(156,a.tag))}function cn(r,a){switch(va(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Ys(fn),Ge(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return sr(a),null;case 13:if(is(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));ho()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return ne(An),null;case 4:return Ge(),null;case 10:return Ys(a.type),null;case 22:case 23:return is(a),Bu(),r!==null&&ne(Fs),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Ys(fn),null;case 25:return null;default:return null}}function zf(r,a){switch(va(a),a.tag){case 3:Ys(fn),Ge();break;case 26:case 27:case 5:sr(a);break;case 4:Ge();break;case 13:is(a);break;case 19:ne(An);break;case 10:Ys(a.type);break;case 22:case 23:is(a),Bu(),r!==null&&ne(Fs);break;case 24:Ys(fn)}}var Rl={getCacheForType:function(r){var a=ai(fn),c=a.data.get(r);return c===void 0&&(c=r(),a.data.set(r,c)),c}},Js=typeof WeakMap=="function"?WeakMap:Map,Kt=0,ze=null,re=null,kt=0,Ve=0,Ee=null,bn=!1,hi=!1,Ia=!1,$s=0,We=0,kr=0,hs=0,Mo=0,Bi=0,fs=0,Fu=null,oe=null,Le=!1,te=0,ue=1/0,Ue=null,Mn=null,yr=!1,br=null,Ml=0,Xr=0,nn=null,vr=0,ta=null;function Ri(){if((Kt&2)!==0&&kt!==0)return kt&-kt;if(N.T!==null){var r=yl;return r!==0?r:w_()}return Oi()}function er(){Bi===0&&(Bi=(kt&536870912)===0||ge?xe():536870912);var r=Hi.current;return r!==null&&(r.flags|=32),Bi}function Dn(r,a,c){(r===ze&&Ve===2||r.cancelPendingCommit!==null)&&(ea(r,0),nr(r,kt,Bi,!1)),bi(r,c),((Kt&2)===0||r!==ze)&&(r===ze&&((Kt&2)===0&&(hs|=c),We===4&&nr(r,kt,Bi,!1)),ke(r))}function Do(r,a,c){if((Kt&6)!==0)throw Error(i(327));var d=!c&&(a&60)===0&&(a&r.expiredLanes)===0||Et(r,a),_=d?l(r,a):wl(r,a,!0),v=d;do{if(_===0){hi&&!d&&nr(r,a,0,!1);break}else if(_===6)nr(r,a,0,!bn);else{if(c=r.current.alternate,v&&!Lf(c)){_=wl(r,a,!1),v=!1;continue}if(_===2){if(v=a,r.errorRecoveryDisabledLanes&v)var C=0;else C=r.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){a=C;t:{var w=r;_=Fu;var L=w.current.memoizedState.isDehydrated;if(L&&(ea(w,C).flags|=256),C=wl(w,C,!1),C!==2){if(Ia&&!L){w.errorRecoveryDisabledLanes|=v,hs|=v,_=4;break t}v=oe,oe=_,v!==null&&xr(v)}_=C}if(v=!1,_!==2)continue}}if(_===1){ea(r,0),nr(r,a,0,!0);break}t:{switch(d=r,_){case 0:case 1:throw Error(i(345));case 4:if((a&4194176)===a){nr(d,a,Bi,!bn);break t}break;case 2:oe=null;break;case 3:case 5:break;default:throw Error(i(329))}if(d.finishedWork=c,d.finishedLanes=a,(a&62914560)===a&&(v=te+300-_i(),10<v)){if(nr(d,a,Bi,!bn),at(d,0)!==0)break t;d.timeoutHandle=H2(Wc.bind(null,d,c,oe,Ue,Le,a,Bi,hs,fs,bn,2,-0,0),v);break t}Wc(d,c,oe,Ue,Le,a,Bi,hs,fs,bn,0,-0,0)}}break}while(!0);ke(r)}function xr(r){oe===null?oe=r:oe.push.apply(oe,r)}function Wc(r,a,c,d,_,v,C,w,L,Q,mt,_t,lt){var dt=a.subtreeFlags;if((dt&8192||(dt&16785408)===16785408)&&(If={stylesheets:null,count:0,unsuspend:HM},Bl(a),a=VM(),a!==null)){r.cancelPendingCommit=a(I.bind(null,r,c,d,_,C,w,L,1,_t,lt)),nr(r,v,C,!Q);return}I(r,c,d,_,C,w,L,mt,_t,lt)}function Lf(r){for(var a=r;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var _=c[d],v=_.getSnapshot;_=_.value;try{if(!Gi(v(),_))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function nr(r,a,c,d){a&=~Mo,a&=~hs,r.suspendedLanes|=a,r.pingedLanes&=~a,d&&(r.warmLanes|=a),d=r.expirationTimes;for(var _=a;0<_;){var v=31-Ze(_),C=1<<v;d[v]=-1,_&=~C}c!==0&&lr(r,c,a)}function Dl(){return(Kt&6)===0?(fe(0),!1):!0}function ds(){if(re!==null){if(Ve===0)var r=re.return;else r=re,Nr=ls=null,Mc(r),Ea=null,Tu=0,r=re;for(;r!==null;)zf(r.alternate,r),r=r.return;re=null}}function ea(r,a){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,EM(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),ds(),ze=r,re=c=Ci(r.current,null),kt=a,Ve=0,Ee=null,bn=!1,hi=Et(r,a),Ia=!1,fs=Bi=Mo=hs=kr=We=0,oe=Fu=null,Le=!1,(a&8)!==0&&(a|=a&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=a;0<d;){var _=31-Ze(d),v=1<<_;a|=r[_],d&=~v}return $s=a,gu(),c}function Ya(r,a){$t=null,N.H=as,a===xa?(a=Re(),Ve=3):a===lf?(a=Re(),Ve=4):Ve=a===Zi?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ee=a,re===null&&(We=1,Lc(r,Li(a,r.current)))}function wo(){var r=N.H;return N.H=as,r===null?as:r}function Qc(){var r=N.A;return N.A=Rl,r}function Vu(){We=4,bn||(kt&4194176)!==kt&&Hi.current!==null||(hi=!0),(kr&134217727)===0&&(hs&134217727)===0||ze===null||nr(ze,kt,Bi,!1)}function wl(r,a,c){var d=Kt;Kt|=2;var _=wo(),v=Qc();(ze!==r||kt!==a)&&(Ue=null,ea(r,a)),a=!1;var C=We;t:do try{if(Ve!==0&&re!==null){var w=re,L=Ee;switch(Ve){case 8:ds(),C=6;break t;case 3:case 2:case 6:Hi.current===null&&(a=!0);var Q=Ve;if(Ve=0,Ee=null,S(r,w,L,Q),c&&hi){C=0;break t}break;default:Q=Ve,Ve=0,Ee=null,S(r,w,L,Q)}}Hf(),C=We;break}catch(mt){Ya(r,mt)}while(!0);return a&&r.shellSuspendCounter++,Nr=ls=null,Kt=d,N.H=_,N.A=v,re===null&&(ze=null,kt=0,gu()),C}function Hf(){for(;re!==null;)p(re)}function l(r,a){var c=Kt;Kt|=2;var d=wo(),_=Qc();ze!==r||kt!==a?(Ue=null,ue=_i()+500,ea(r,a)):hi=Et(r,a);t:do try{if(Ve!==0&&re!==null){a=re;var v=Ee;e:switch(Ve){case 1:Ve=0,Ee=null,S(r,a,v,1);break;case 2:if(Cp(v)){Ve=0,Ee=null,y(a);break}a=function(){Ve===2&&ze===r&&(Ve=7),ke(r)},v.then(a,a);break t;case 3:Ve=7;break t;case 4:Ve=5;break t;case 7:Cp(v)?(Ve=0,Ee=null,y(a)):(Ve=0,Ee=null,S(r,a,v,7));break;case 5:var C=null;switch(re.tag){case 26:C=re.memoizedState;case 5:case 27:var w=re;if(!C||Q2(C)){Ve=0,Ee=null;var L=w.sibling;if(L!==null)re=L;else{var Q=w.return;Q!==null?(re=Q,T(Q)):re=null}break e}}Ve=0,Ee=null,S(r,a,v,5);break;case 6:Ve=0,Ee=null,S(r,a,v,6);break;case 8:ds(),We=6;break t;default:throw Error(i(462))}}u();break}catch(mt){Ya(r,mt)}while(!0);return Nr=ls=null,N.H=d,N.A=_,Kt=c,re!==null?0:(ze=null,kt=0,gu(),We)}function u(){for(;re!==null&&!Nn();)p(re)}function p(r){var a=Uu(r.alternate,r,$s);r.memoizedProps=r.pendingProps,a===null?T(r):re=a}function y(r){var a=r,c=a.alternate;switch(a.tag){case 15:case 0:a=fm(c,a,a.pendingProps,a.type,void 0,kt);break;case 11:a=fm(c,a,a.pendingProps,a.type.render,a.ref,kt);break;case 5:Mc(a);default:zf(c,a),a=re=Va(a,$s),a=Uu(c,a,$s)}r.memoizedProps=r.pendingProps,a===null?T(r):re=a}function S(r,a,c,d){Nr=ls=null,Mc(a),Ea=null,Tu=0;var _=a.return;try{if(R_(r,_,a,c,kt)){We=1,Lc(r,Li(c,r.current)),re=null;return}}catch(v){if(_!==null)throw re=_,v;We=1,Lc(r,Li(c,r.current)),re=null;return}a.flags&32768?(ge||d===1?r=!0:hi||(kt&536870912)!==0?r=!1:(bn=r=!0,(d===2||d===3||d===6)&&(d=Hi.current,d!==null&&d.tag===13&&(d.flags|=16384))),U(a,r)):T(a)}function T(r){var a=r;do{if((a.flags&32768)!==0){U(a,bn);return}r=a.return;var c=D_(a.alternate,a,$s);if(c!==null){re=c;return}if(a=a.sibling,a!==null){re=a;return}re=a=r}while(a!==null);We===0&&(We=5)}function U(r,a){do{var c=cn(r.alternate,r);if(c!==null){c.flags&=32767,re=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(r=r.sibling,r!==null)){re=r;return}re=r=c}while(r!==null);We=6,re=null}function I(r,a,c,d,_,v,C,w,L,Q){var mt=N.T,_t=yt.p;try{yt.p=2,N.T=null,et(r,a,c,d,_t,_,v,C,w,L,Q)}finally{N.T=mt,yt.p=_t}}function et(r,a,c,d,_,v,C,w){do St();while(br!==null);if((Kt&6)!==0)throw Error(i(327));var L=r.finishedWork;if(d=r.finishedLanes,L===null)return null;if(r.finishedWork=null,r.finishedLanes=0,L===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var Q=L.lanes|L.childLanes;if(Q|=Us,ar(r,d,Q,v,C,w),r===ze&&(re=ze=null,kt=0),(L.subtreeFlags&10256)===0&&(L.flags&10256)===0||yr||(yr=!0,Xr=Q,nn=c,J(nl,function(){return St(),null})),c=(L.flags&15990)!==0,(L.subtreeFlags&15990)!==0||c?(c=N.T,N.T=null,v=yt.p,yt.p=2,C=Kt,Kt|=4,Ao(r,L),Cl(L,r),tf(H_,r.containerInfo),Bm=!!L_,H_=L_=null,r.current=L,Co(r,L.alternate,L),Wr(),Kt=C,yt.p=v,N.T=c):r.current=L,yr?(yr=!1,br=r,Ml=d):pt(r,Q),Q=r.pendingLanes,Q===0&&(Mn=null),la(L.stateNode),ke(r),a!==null)for(_=r.onRecoverableError,L=0;L<a.length;L++)Q=a[L],_(Q.value,{componentStack:Q.stack});return(Ml&3)!==0&&St(),Q=r.pendingLanes,(d&4194218)!==0&&(Q&42)!==0?r===ta?vr++:(vr=0,ta=r):vr=0,fe(0),null}function pt(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,Aa(a)))}function St(){if(br!==null){var r=br,a=Xr;Xr=0;var c=Wn(Ml),d=N.T,_=yt.p;try{if(yt.p=32>c?32:c,N.T=null,br===null)var v=!1;else{c=nn,nn=null;var C=br,w=Ml;if(br=null,Ml=0,(Kt&6)!==0)throw Error(i(331));var L=Kt;if(Kt|=4,Bo(C.current),Ks(C,C.current,w,c),Kt=L,fe(0,!1),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(yi,C)}catch{}v=!0}return v}finally{yt.p=_,N.T=d,pt(r,a)}}return!1}function Bt(r,a,c){a=Li(c,a),a=Ef(r.stateNode,a,2),r=tr(r,a,2),r!==null&&(bi(r,2),ke(r))}function xt(r,a,c){if(r.tag===3)Bt(r,r,c);else for(;a!==null;){if(a.tag===3){Bt(a,r,c);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Mn===null||!Mn.has(d))){r=Li(c,r),c=Tf(2),d=tr(a,c,2),d!==null&&(cm(c,d,a,r),bi(d,2),ke(d));break}}a=a.return}}function Wt(r,a,c){var d=r.pingCache;if(d===null){d=r.pingCache=new Js;var _=new Set;d.set(a,_)}else _=d.get(a),_===void 0&&(_=new Set,d.set(a,_));_.has(c)||(Ia=!0,_.add(c),r=Sr.bind(null,r,a,c),a.then(r,r))}function Sr(r,a,c){var d=r.pingCache;d!==null&&d.delete(a),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,ze===r&&(kt&c)===c&&(We===4||We===3&&(kt&62914560)===kt&&300>_i()-te?(Kt&2)===0&&ea(r,0):Mo|=c,fs===kt&&(fs=0)),ke(r)}function Uo(r,a){a===0&&(a=En()),r=Os(r,a),r!==null&&(bi(r,a),ke(r))}function Ul(r){var a=r.memoizedState,c=0;a!==null&&(c=a.retryLane),Uo(r,c)}function st(r,a){var c=0;switch(r.tag){case 13:var d=r.stateNode,_=r.memoizedState;_!==null&&(c=_.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(a),Uo(r,c)}function J(r,a){return Kn(r,a)}var ot=null,vt=null,Ut=!1,He=!1,It=!1,se=0;function ke(r){r!==vt&&r.next===null&&(vt===null?ot=vt=r:vt=vt.next=r),He=!0,Ut||(Ut=!0,pM(qa))}function fe(r,a){if(!It&&He){It=!0;do for(var c=!1,d=ot;d!==null;){if(r!==0){var _=d.pendingLanes;if(_===0)var v=0;else{var C=d.suspendedLanes,w=d.pingedLanes;v=(1<<31-Ze(42|r)+1)-1,v&=_&~(C&~w),v=v&201326677?v&201326677|1:v?v|2:0}v!==0&&(c=!0,M2(d,v))}else v=kt,v=at(d,d===ze?v:0),(v&3)===0||Et(d,v)||(c=!0,M2(d,v));d=d.next}while(c);It=!1}}function qa(){He=Ut=!1;var r=0;se!==0&&(SM()&&(r=se),se=0);for(var a=_i(),c=null,d=ot;d!==null;){var _=d.next,v=_m(d,a);v===0?(d.next=null,c===null?ot=_:c.next=_,_===null&&(vt=c)):(c=d,(r!==0||(v&3)!==0)&&(He=!0)),d=_}fe(r)}function _m(r,a){for(var c=r.suspendedLanes,d=r.pingedLanes,_=r.expirationTimes,v=r.pendingLanes&-62914561;0<v;){var C=31-Ze(v),w=1<<C,L=_[C];L===-1?((w&c)===0||(w&d)!==0)&&(_[C]=Vt(w,a)):L<=a&&(r.expiredLanes|=w),v&=~w}if(a=ze,c=kt,c=at(r,r===a?c:0),d=r.callbackNode,c===0||r===a&&Ve===2||r.cancelPendingCommit!==null)return d!==null&&d!==null&&ie(d),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||Et(r,c)){if(a=c&-c,a===r.callbackPriority)return a;switch(d!==null&&ie(d),Wn(c)){case 2:case 8:c=Es;break;case 32:c=nl;break;case 268435456:c=jl;break;default:c=nl}return d=R2.bind(null,r),c=Kn(c,d),r.callbackPriority=a,r.callbackNode=c,a}return d!==null&&d!==null&&ie(d),r.callbackPriority=2,r.callbackNode=null,2}function R2(r,a){var c=r.callbackNode;if(St()&&r.callbackNode!==c)return null;var d=kt;return d=at(r,r===ze?d:0),d===0?null:(Do(r,d,a),_m(r,_i()),r.callbackNode!=null&&r.callbackNode===c?R2.bind(null,r):null)}function M2(r,a){if(St())return null;Do(r,a,!0)}function pM(r){TM(function(){(Kt&6)!==0?Kn(ql,r):r()})}function w_(){return se===0&&(se=xe()),se}function D2(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:nu(""+r)}function w2(r,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,r.id&&c.setAttribute("form",r.id),a.parentNode.insertBefore(c,a),r=new FormData(r),c.parentNode.removeChild(c),r}function mM(r,a,c,d,_){if(a==="submit"&&c&&c.stateNode===_){var v=D2((_[ae]||null).action),C=d.submitter;C&&(a=(a=C[ae]||null)?D2(a.formAction):C.getAttribute("formAction"),a!==null&&(v=a,C=null));var w=new to("action","action",null,d,_);r.push({event:w,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(se!==0){var L=C?w2(_,C):new FormData(_);yf(c,{pending:!0,data:L,method:_.method,action:v},null,L)}}else typeof v=="function"&&(w.preventDefault(),L=C?w2(_,C):new FormData(_),yf(c,{pending:!0,data:L,method:_.method,action:v},v,L))},currentTarget:_}]})}}for(var U_=0;U_<ws.length;U_++){var O_=ws[U_],gM=O_.toLowerCase(),_M=O_[0].toUpperCase()+O_.slice(1);cr(gM,"on"+_M)}cr(rf,"onAnimationEnd"),cr(zi,"onAnimationIteration"),cr(sf,"onAnimationStart"),cr("dblclick","onDoubleClick"),cr("focusin","onFocus"),cr("focusout","onBlur"),cr(Ds,"onTransitionRun"),cr(uo,"onTransitionStart"),cr(_a,"onTransitionCancel"),cr(Sc,"onTransitionEnd"),ca("onMouseEnter",["mouseout","mouseover"]),ca("onMouseLeave",["mouseout","mouseover"]),ca("onPointerEnter",["pointerout","pointerover"]),ca("onPointerLeave",["pointerout","pointerover"]),Jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ff="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ff));function U2(r,a){a=(a&4)!==0;for(var c=0;c<r.length;c++){var d=r[c],_=d.event;d=d.listeners;t:{var v=void 0;if(a)for(var C=d.length-1;0<=C;C--){var w=d[C],L=w.instance,Q=w.currentTarget;if(w=w.listener,L!==v&&_.isPropagationStopped())break t;v=w,_.currentTarget=Q;try{v(_)}catch(mt){zc(mt)}_.currentTarget=null,v=L}else for(C=0;C<d.length;C++){if(w=d[C],L=w.instance,Q=w.currentTarget,w=w.listener,L!==v&&_.isPropagationStopped())break t;v=w,_.currentTarget=Q;try{v(_)}catch(mt){zc(mt)}_.currentTarget=null,v=L}}}}function ye(r,a){var c=a[ua];c===void 0&&(c=a[ua]=new Set);var d=r+"__bubble";c.has(d)||(O2(a,r,2,!1),c.add(d))}function P_(r,a,c){var d=0;a&&(d|=4),O2(c,r,d,a)}var ym="_reactListening"+Math.random().toString(36).slice(2);function G_(r){if(!r[ym]){r[ym]=!0,rc.forEach(function(c){c!=="selectionchange"&&(yM.has(c)||P_(c,!1,r),P_(c,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[ym]||(a[ym]=!0,P_("selectionchange",!1,a))}}function O2(r,a,c,d){switch(nx(a)){case 2:var _=IM;break;case 8:_=YM;break;default:_=K_}c=_.bind(null,a,c,r),_=void 0,!ru||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),d?_!==void 0?r.addEventListener(a,c,{capture:!0,passive:_}):r.addEventListener(a,c,!0):_!==void 0?r.addEventListener(a,c,{passive:_}):r.addEventListener(a,c,!1)}function N_(r,a,c,d,_){var v=d;if((a&1)===0&&(a&2)===0&&d!==null)t:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var w=d.stateNode.containerInfo;if(w===_||w.nodeType===8&&w.parentNode===_)break;if(C===4)for(C=d.return;C!==null;){var L=C.tag;if((L===3||L===4)&&(L=C.stateNode.containerInfo,L===_||L.nodeType===8&&L.parentNode===_))return;C=C.return}for(;w!==null;){if(C=Ts(w),C===null)return;if(L=C.tag,L===5||L===6||L===26||L===27){d=v=C;continue t}w=w.parentNode}}d=d.return}Hh(function(){var Q=v,mt=iu(c),_t=[];t:{var lt=Ec.get(r);if(lt!==void 0){var dt=to,Ot=r;switch(r){case"keypress":if(ha(c)===0)break t;case"keydown":case"keyup":dt=Ih;break;case"focusin":Ot="focus",dt=fc;break;case"focusout":Ot="blur",dt=fc;break;case"beforeblur":case"afterblur":dt=fc;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dt=kh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dt=y_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dt=qh;break;case rf:case zi:case sf:dt=cp;break;case Sc:dt=Bs;break;case"scroll":case"scrollend":dt=lp;break;case"wheel":dt=b_;break;case"copy":case"cut":case"paste":dt=fp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dt=pc;break;case"toggle":case"beforetoggle":dt=da}var Zt=(a&4)!==0,wn=!Zt&&(r==="scroll"||r==="scrollend"),tt=Zt?lt!==null?lt+"Capture":null:lt;Zt=[];for(var W=Q,rt;W!==null;){var gt=W;if(rt=gt.stateNode,gt=gt.tag,gt!==5&&gt!==26&&gt!==27||rt===null||tt===null||(gt=Zl(W,tt),gt!=null&&Zt.push(Vf(W,gt,rt))),wn)break;W=W.return}0<Zt.length&&(lt=new dt(lt,Ot,null,c,mt),_t.push({event:lt,listeners:Zt}))}}if((a&7)===0){t:{if(lt=r==="mouseover"||r==="pointerover",dt=r==="mouseout"||r==="pointerout",lt&&c!==oc&&(Ot=c.relatedTarget||c.fromElement)&&(Ts(Ot)||Ot[vi]))break t;if((dt||lt)&&(lt=mt.window===mt?mt:(lt=mt.ownerDocument)?lt.defaultView||lt.parentWindow:window,dt?(Ot=c.relatedTarget||c.toElement,dt=Q,Ot=Ot?Ts(Ot):null,Ot!==null&&(wn=ut(Ot),Zt=Ot.tag,Ot!==wn||Zt!==5&&Zt!==27&&Zt!==6)&&(Ot=null)):(dt=null,Ot=Q),dt!==Ot)){if(Zt=kh,gt="onMouseLeave",tt="onMouseEnter",W="mouse",(r==="pointerout"||r==="pointerover")&&(Zt=pc,gt="onPointerLeave",tt="onPointerEnter",W="pointer"),wn=dt==null?lt:Je(dt),rt=Ot==null?lt:Je(Ot),lt=new Zt(gt,W+"leave",dt,c,mt),lt.target=wn,lt.relatedTarget=rt,gt=null,Ts(mt)===Q&&(Zt=new Zt(tt,W+"enter",Ot,c,mt),Zt.target=rt,Zt.relatedTarget=wn,gt=Zt),wn=gt,dt&&Ot)e:{for(Zt=dt,tt=Ot,W=0,rt=Zt;rt;rt=Zc(rt))W++;for(rt=0,gt=tt;gt;gt=Zc(gt))rt++;for(;0<W-rt;)Zt=Zc(Zt),W--;for(;0<rt-W;)tt=Zc(tt),rt--;for(;W--;){if(Zt===tt||tt!==null&&Zt===tt.alternate)break e;Zt=Zc(Zt),tt=Zc(tt)}Zt=null}else Zt=null;dt!==null&&P2(_t,lt,dt,Zt,!1),Ot!==null&&wn!==null&&P2(_t,wn,Ot,Zt,!0)}}t:{if(lt=Q?Je(Q):window,dt=lt.nodeName&&lt.nodeName.toLowerCase(),dt==="select"||dt==="input"&&lt.type==="file")var Dt=gc;else if(Qh(lt))if(_c)Dt=ga;else{Dt=Sp;var de=v_}else dt=lt.nodeName,!dt||dt.toLowerCase()!=="input"||lt.type!=="checkbox"&&lt.type!=="radio"?Q&&eu(Q.elementType)&&(Dt=gc):Dt=pu;if(Dt&&(Dt=Dt(r,Q))){Pi(_t,Dt,c,mt);break t}de&&de(r,lt,Q),r==="focusout"&&Q&&lt.type==="number"&&Q.memoizedProps.value!=null&&ac(lt,"number",lt.value)}switch(de=Q?Je(Q):window,r){case"focusin":(Qh(de)||de.contentEditable==="true")&&(hl=de,ef=Q,oo=null);break;case"focusout":oo=ef=hl=null;break;case"mousedown":vc=!0;break;case"contextmenu":case"mouseup":case"dragend":vc=!1,ur(_t,c,mt);break;case"selectionchange":if(bc)break;case"keydown":case"keyup":ur(_t,c,mt)}var Lt;if(ou)t:{switch(r){case"compositionstart":var qt="onCompositionStart";break t;case"compositionend":qt="onCompositionEnd";break t;case"compositionupdate":qt="onCompositionUpdate";break t}qt=void 0}else ma?hu(r,c)&&(qt="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(qt="onCompositionStart");qt&&(cu&&c.locale!=="ko"&&(ma||qt!=="onCompositionStart"?qt==="onCompositionEnd"&&ma&&(Lt=Vh()):(As=mt,Fh="value"in As?As.value:As.textContent,ma=!0)),de=bm(Q,qt),0<de.length&&(qt=new dc(qt,r,null,c,mt),_t.push({event:qt,listeners:de}),Lt?qt.data=Lt:(Lt=Kh(c),Lt!==null&&(qt.data=Lt)))),(Lt=uu?fu(r,c):Wh(r,c))&&(qt=bm(Q,"onBeforeInput"),0<qt.length&&(de=new dc("onBeforeInput","beforeinput",null,c,mt),_t.push({event:de,listeners:qt}),de.data=Lt)),mM(_t,r,Q,c,mt)}U2(_t,a)})}function Vf(r,a,c){return{instance:r,listener:a,currentTarget:c}}function bm(r,a){for(var c=a+"Capture",d=[];r!==null;){var _=r,v=_.stateNode;_=_.tag,_!==5&&_!==26&&_!==27||v===null||(_=Zl(r,c),_!=null&&d.unshift(Vf(r,_,v)),_=Zl(r,a),_!=null&&d.push(Vf(r,_,v))),r=r.return}return d}function Zc(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function P2(r,a,c,d,_){for(var v=a._reactName,C=[];c!==null&&c!==d;){var w=c,L=w.alternate,Q=w.stateNode;if(w=w.tag,L!==null&&L===d)break;w!==5&&w!==26&&w!==27||Q===null||(L=Q,_?(Q=Zl(c,v),Q!=null&&C.unshift(Vf(c,Q,L))):_||(Q=Zl(c,v),Q!=null&&C.push(Vf(c,Q,L)))),c=c.return}C.length!==0&&r.push({event:a,listeners:C})}var bM=/\r\n?/g,vM=/\u0000|\uFFFD/g;function G2(r){return(typeof r=="string"?r:""+r).replace(bM,`
`).replace(vM,"")}function N2(r,a){return a=G2(a),G2(r)===a}function vm(){}function qe(r,a,c,d,_,v){switch(c){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||al(r,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&al(r,""+d);break;case"className":Jo(r,"class",d);break;case"tabIndex":Jo(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Jo(r,c,d);break;case"style":Lh(r,d,v);break;case"data":if(a!=="object"){Jo(r,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||c!=="href")){r.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=nu(""+d),r.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(a!=="input"&&qe(r,a,"name",_.name,_,null),qe(r,a,"formEncType",_.formEncType,_,null),qe(r,a,"formMethod",_.formMethod,_,null),qe(r,a,"formTarget",_.formTarget,_,null)):(qe(r,a,"encType",_.encType,_,null),qe(r,a,"method",_.method,_,null),qe(r,a,"target",_.target,_,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(c);break}d=nu(""+d),r.setAttribute(c,d);break;case"onClick":d!=null&&(r.onclick=vm);break;case"onScroll":d!=null&&ye("scroll",r);break;case"onScrollEnd":d!=null&&ye("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(_.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}c=nu(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""+d):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":d===!0?r.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(c,d):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(c,d):r.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(c):r.setAttribute(c,d);break;case"popover":ye("beforetoggle",r),ye("toggle",r),Zo(r,"popover",d);break;case"xlinkActuate":Ur(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Ur(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Ur(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Ur(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Ur(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Ur(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Ur(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Ur(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Ur(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Zo(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=sp.get(c)||c,Zo(r,c,d))}}function z_(r,a,c,d,_,v){switch(c){case"style":Lh(r,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(_.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof d=="string"?al(r,d):(typeof d=="number"||typeof d=="bigint")&&al(r,""+d);break;case"onScroll":d!=null&&ye("scroll",r);break;case"onScrollEnd":d!=null&&ye("scrollend",r);break;case"onClick":d!=null&&(r.onclick=vm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zr.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(_=c.endsWith("Capture"),a=c.slice(2,_?c.length-7:void 0),v=r[ae]||null,v=v!=null?v[c]:null,typeof v=="function"&&r.removeEventListener(a,v,_),typeof d=="function")){typeof v!="function"&&v!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(a,d,_);break t}c in r?r[c]=d:d===!0?r.setAttribute(c,""):Zo(r,c,d)}}}function Mi(r,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ye("error",r),ye("load",r);var d=!1,_=!1,v;for(v in c)if(c.hasOwnProperty(v)){var C=c[v];if(C!=null)switch(v){case"src":d=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:qe(r,a,v,C,c,null)}}_&&qe(r,a,"srcSet",c.srcSet,c,null),d&&qe(r,a,"src",c.src,c,null);return;case"input":ye("invalid",r);var w=v=C=_=null,L=null,Q=null;for(d in c)if(c.hasOwnProperty(d)){var mt=c[d];if(mt!=null)switch(d){case"name":_=mt;break;case"type":C=mt;break;case"checked":L=mt;break;case"defaultChecked":Q=mt;break;case"value":v=mt;break;case"defaultValue":w=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(i(137,a));break;default:qe(r,a,d,mt,c,null)}}Nh(r,v,w,L,Q,C,_,!1),$o(r);return;case"select":ye("invalid",r),d=C=v=null;for(_ in c)if(c.hasOwnProperty(_)&&(w=c[_],w!=null))switch(_){case"value":v=w;break;case"defaultValue":C=w;break;case"multiple":d=w;default:qe(r,a,_,w,c,null)}a=v,c=C,r.multiple=!!d,a!=null?Ql(r,!!d,a,!1):c!=null&&Ql(r,!!d,c,!0);return;case"textarea":ye("invalid",r),v=_=d=null;for(C in c)if(c.hasOwnProperty(C)&&(w=c[C],w!=null))switch(C){case"value":d=w;break;case"defaultValue":_=w;break;case"children":v=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:qe(r,a,C,w,c,null)}sl(r,d,_,v),$o(r);return;case"option":for(L in c)if(c.hasOwnProperty(L)&&(d=c[L],d!=null))switch(L){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:qe(r,a,L,d,c,null)}return;case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":ye("load",r);break;case"video":case"audio":for(d=0;d<Ff.length;d++)ye(Ff[d],r);break;case"image":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"embed":case"source":case"link":ye("error",r),ye("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in c)if(c.hasOwnProperty(Q)&&(d=c[Q],d!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:qe(r,a,Q,d,c,null)}return;default:if(eu(a)){for(mt in c)c.hasOwnProperty(mt)&&(d=c[mt],d!==void 0&&z_(r,a,mt,d,c,void 0));return}}for(w in c)c.hasOwnProperty(w)&&(d=c[w],d!=null&&qe(r,a,w,d,c,null))}function xM(r,a,c,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,v=null,C=null,w=null,L=null,Q=null,mt=null;for(dt in c){var _t=c[dt];if(c.hasOwnProperty(dt)&&_t!=null)switch(dt){case"checked":break;case"value":break;case"defaultValue":L=_t;default:d.hasOwnProperty(dt)||qe(r,a,dt,null,d,_t)}}for(var lt in d){var dt=d[lt];if(_t=c[lt],d.hasOwnProperty(lt)&&(dt!=null||_t!=null))switch(lt){case"type":v=dt;break;case"name":_=dt;break;case"checked":Q=dt;break;case"defaultChecked":mt=dt;break;case"value":C=dt;break;case"defaultValue":w=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(i(137,a));break;default:dt!==_t&&qe(r,a,lt,dt,d,_t)}}sc(r,C,w,L,Q,mt,v,_);return;case"select":dt=C=w=lt=null;for(v in c)if(L=c[v],c.hasOwnProperty(v)&&L!=null)switch(v){case"value":break;case"multiple":dt=L;default:d.hasOwnProperty(v)||qe(r,a,v,null,d,L)}for(_ in d)if(v=d[_],L=c[_],d.hasOwnProperty(_)&&(v!=null||L!=null))switch(_){case"value":lt=v;break;case"defaultValue":w=v;break;case"multiple":C=v;default:v!==L&&qe(r,a,_,v,d,L)}a=w,c=C,d=dt,lt!=null?Ql(r,!!c,lt,!1):!!d!=!!c&&(a!=null?Ql(r,!!c,a,!0):Ql(r,!!c,c?[]:"",!1));return;case"textarea":dt=lt=null;for(w in c)if(_=c[w],c.hasOwnProperty(w)&&_!=null&&!d.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:qe(r,a,w,null,d,_)}for(C in d)if(_=d[C],v=c[C],d.hasOwnProperty(C)&&(_!=null||v!=null))switch(C){case"value":lt=_;break;case"defaultValue":dt=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==v&&qe(r,a,C,_,d,v)}zh(r,lt,dt);return;case"option":for(var Ot in c)if(lt=c[Ot],c.hasOwnProperty(Ot)&&lt!=null&&!d.hasOwnProperty(Ot))switch(Ot){case"selected":r.selected=!1;break;default:qe(r,a,Ot,null,d,lt)}for(L in d)if(lt=d[L],dt=c[L],d.hasOwnProperty(L)&&lt!==dt&&(lt!=null||dt!=null))switch(L){case"selected":r.selected=lt&&typeof lt!="function"&&typeof lt!="symbol";break;default:qe(r,a,L,lt,d,dt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Zt in c)lt=c[Zt],c.hasOwnProperty(Zt)&&lt!=null&&!d.hasOwnProperty(Zt)&&qe(r,a,Zt,null,d,lt);for(Q in d)if(lt=d[Q],dt=c[Q],d.hasOwnProperty(Q)&&lt!==dt&&(lt!=null||dt!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(i(137,a));break;default:qe(r,a,Q,lt,d,dt)}return;default:if(eu(a)){for(var wn in c)lt=c[wn],c.hasOwnProperty(wn)&&lt!==void 0&&!d.hasOwnProperty(wn)&&z_(r,a,wn,void 0,d,lt);for(mt in d)lt=d[mt],dt=c[mt],!d.hasOwnProperty(mt)||lt===dt||lt===void 0&&dt===void 0||z_(r,a,mt,lt,d,dt);return}}for(var tt in c)lt=c[tt],c.hasOwnProperty(tt)&&lt!=null&&!d.hasOwnProperty(tt)&&qe(r,a,tt,null,d,lt);for(_t in d)lt=d[_t],dt=c[_t],!d.hasOwnProperty(_t)||lt===dt||lt==null&&dt==null||qe(r,a,_t,lt,d,dt)}var L_=null,H_=null;function xm(r){return r.nodeType===9?r:r.ownerDocument}function z2(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function L2(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function F_(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var V_=null;function SM(){var r=window.event;return r&&r.type==="popstate"?r===V_?!1:(V_=r,!0):(V_=null,!1)}var H2=typeof setTimeout=="function"?setTimeout:void 0,EM=typeof clearTimeout=="function"?clearTimeout:void 0,F2=typeof Promise=="function"?Promise:void 0,TM=typeof queueMicrotask=="function"?queueMicrotask:typeof F2<"u"?function(r){return F2.resolve(null).then(r).catch(AM)}:H2;function AM(r){setTimeout(function(){throw r})}function k_(r,a){var c=a,d=0;do{var _=c.nextSibling;if(r.removeChild(c),_&&_.nodeType===8)if(c=_.data,c==="/$"){if(d===0){r.removeChild(_),Wf(a);return}d--}else c!=="$"&&c!=="$?"&&c!=="$!"||d++;c=_}while(c);Wf(a)}function X_(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":X_(c),Qo(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function CM(r,a,c,d){for(;r.nodeType===1;){var _=c;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[rl])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(v=r.getAttribute("rel"),v==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(v!==_.rel||r.getAttribute("href")!==(_.href==null?null:_.href)||r.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||r.getAttribute("title")!==(_.title==null?null:_.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(v=r.getAttribute("src"),(v!==(_.src==null?null:_.src)||r.getAttribute("type")!==(_.type==null?null:_.type)||r.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&v&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var v=_.name==null?null:""+_.name;if(_.type==="hidden"&&r.getAttribute("name")===v)return r}else return r;if(r=na(r.nextSibling),r===null)break}return null}function BM(r,a,c){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=na(r.nextSibling),r===null))return null;return r}function na(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return r}function V2(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return r;a--}else c==="/$"&&a++}r=r.previousSibling}return null}function k2(r,a,c){switch(a=xm(c),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}var ps=new Map,X2=new Set;function Sm(r){return typeof r.getRootNode=="function"?r.getRootNode():r.ownerDocument}var Ol=yt.d;yt.d={f:RM,r:MM,D:DM,C:wM,L:UM,m:OM,X:GM,S:PM,M:NM};function RM(){var r=Ol.f(),a=Dl();return r||a}function MM(r){var a=zn(r);a!==null&&a.tag===5&&a.type==="form"?Jp(a):Ol.r(r)}var Jc=typeof document>"u"?null:document;function I2(r,a,c){var d=Jc;if(d&&typeof a=="string"&&a){var _=Ki(a);_='link[rel="'+r+'"][href="'+_+'"]',typeof c=="string"&&(_+='[crossorigin="'+c+'"]'),X2.has(_)||(X2.add(_),r={rel:r,crossOrigin:c,href:a},d.querySelector(_)===null&&(a=d.createElement("link"),Mi(a,"link",r),hn(a),d.head.appendChild(a)))}}function DM(r){Ol.D(r),I2("dns-prefetch",r,null)}function wM(r,a){Ol.C(r,a),I2("preconnect",r,a)}function UM(r,a,c){Ol.L(r,a,c);var d=Jc;if(d&&r&&a){var _='link[rel="preload"][as="'+Ki(a)+'"]';a==="image"&&c&&c.imageSrcSet?(_+='[imagesrcset="'+Ki(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(_+='[imagesizes="'+Ki(c.imageSizes)+'"]')):_+='[href="'+Ki(r)+'"]';var v=_;switch(a){case"style":v=$c(r);break;case"script":v=th(r)}ps.has(v)||(r=Y({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:r,as:a},c),ps.set(v,r),d.querySelector(_)!==null||a==="style"&&d.querySelector(kf(v))||a==="script"&&d.querySelector(Xf(v))||(a=d.createElement("link"),Mi(a,"link",r),hn(a),d.head.appendChild(a)))}}function OM(r,a){Ol.m(r,a);var c=Jc;if(c&&r){var d=a&&typeof a.as=="string"?a.as:"script",_='link[rel="modulepreload"][as="'+Ki(d)+'"][href="'+Ki(r)+'"]',v=_;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=th(r)}if(!ps.has(v)&&(r=Y({rel:"modulepreload",href:r},a),ps.set(v,r),c.querySelector(_)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Xf(v)))return}d=c.createElement("link"),Mi(d,"link",r),hn(d),c.head.appendChild(d)}}}function PM(r,a,c){Ol.S(r,a,c);var d=Jc;if(d&&r){var _=Qr(d).hoistableStyles,v=$c(r);a=a||"default";var C=_.get(v);if(!C){var w={loading:0,preload:null};if(C=d.querySelector(kf(v)))w.loading=5;else{r=Y({rel:"stylesheet",href:r,"data-precedence":a},c),(c=ps.get(v))&&I_(r,c);var L=C=d.createElement("link");hn(L),Mi(L,"link",r),L._p=new Promise(function(Q,mt){L.onload=Q,L.onerror=mt}),L.addEventListener("load",function(){w.loading|=1}),L.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Em(C,a,d)}C={type:"stylesheet",instance:C,count:1,state:w},_.set(v,C)}}}function GM(r,a){Ol.X(r,a);var c=Jc;if(c&&r){var d=Qr(c).hoistableScripts,_=th(r),v=d.get(_);v||(v=c.querySelector(Xf(_)),v||(r=Y({src:r,async:!0},a),(a=ps.get(_))&&Y_(r,a),v=c.createElement("script"),hn(v),Mi(v,"link",r),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(_,v))}}function NM(r,a){Ol.M(r,a);var c=Jc;if(c&&r){var d=Qr(c).hoistableScripts,_=th(r),v=d.get(_);v||(v=c.querySelector(Xf(_)),v||(r=Y({src:r,async:!0,type:"module"},a),(a=ps.get(_))&&Y_(r,a),v=c.createElement("script"),hn(v),Mi(v,"link",r),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(_,v))}}function Y2(r,a,c,d){var _=(_=Fe.current)?Sm(_):null;if(!_)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=$c(c.href),c=Qr(_).hoistableStyles,d=c.get(a),d||(d={type:"style",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=$c(c.href);var v=Qr(_).hoistableStyles,C=v.get(r);if(C||(_=_.ownerDocument||_,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(r,C),(v=_.querySelector(kf(r)))&&!v._p&&(C.instance=v,C.state.loading=5),ps.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ps.set(r,c),v||zM(_,r,c,C.state))),a&&d===null)throw Error(i(528,""));return C}if(a&&d!==null)throw Error(i(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=th(c),c=Qr(_).hoistableScripts,d=c.get(a),d||(d={type:"script",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function $c(r){return'href="'+Ki(r)+'"'}function kf(r){return'link[rel="stylesheet"]['+r+"]"}function q2(r){return Y({},r,{"data-precedence":r.precedence,precedence:null})}function zM(r,a,c,d){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=r.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Mi(a,"link",c),hn(a),r.head.appendChild(a))}function th(r){return'[src="'+Ki(r)+'"]'}function Xf(r){return"script[async]"+r}function j2(r,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var d=r.querySelector('style[data-href~="'+Ki(c.href)+'"]');if(d)return a.instance=d,hn(d),d;var _=Y({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),hn(d),Mi(d,"style",_),Em(d,c.precedence,r),a.instance=d;case"stylesheet":_=$c(c.href);var v=r.querySelector(kf(_));if(v)return a.state.loading|=4,a.instance=v,hn(v),v;d=q2(c),(_=ps.get(_))&&I_(d,_),v=(r.ownerDocument||r).createElement("link"),hn(v);var C=v;return C._p=new Promise(function(w,L){C.onload=w,C.onerror=L}),Mi(v,"link",d),a.state.loading|=4,Em(v,c.precedence,r),a.instance=v;case"script":return v=th(c.src),(_=r.querySelector(Xf(v)))?(a.instance=_,hn(_),_):(d=c,(_=ps.get(v))&&(d=Y({},c),Y_(d,_)),r=r.ownerDocument||r,_=r.createElement("script"),hn(_),Mi(_,"link",d),r.head.appendChild(_),a.instance=_);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,Em(d,c.precedence,r));return a.instance}function Em(r,a,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=d.length?d[d.length-1]:null,v=_,C=0;C<d.length;C++){var w=d[C];if(w.dataset.precedence===a)v=w;else if(v!==_)break}v?v.parentNode.insertBefore(r,v.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(r,a.firstChild))}function I_(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Y_(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var Tm=null;function K2(r,a,c){if(Tm===null){var d=new Map,_=Tm=new Map;_.set(c,d)}else _=Tm,d=_.get(c),d||(d=new Map,_.set(c,d));if(d.has(r))return d;for(d.set(r,null),c=c.getElementsByTagName(r),_=0;_<c.length;_++){var v=c[_];if(!(v[rl]||v[he]||r==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var C=v.getAttribute(a)||"";C=r+C;var w=d.get(C);w?w.push(v):d.set(C,[v])}}return d}function W2(r,a,c){r=r.ownerDocument||r,r.head.insertBefore(c,a==="title"?r.querySelector("head > title"):null)}function LM(r,a,c){if(c===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Q2(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var If=null;function HM(){}function FM(r,a,c){if(If===null)throw Error(i(475));var d=If;if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var _=$c(c.href),v=r.querySelector(kf(_));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(d.count++,d=Am.bind(d),r.then(d,d)),a.state.loading|=4,a.instance=v,hn(v);return}v=r.ownerDocument||r,c=q2(c),(_=ps.get(_))&&I_(c,_),v=v.createElement("link"),hn(v);var C=v;C._p=new Promise(function(w,L){C.onload=w,C.onerror=L}),Mi(v,"link",c),a.instance=v}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(d.count++,a=Am.bind(d),r.addEventListener("load",a),r.addEventListener("error",a))}}function VM(){if(If===null)throw Error(i(475));var r=If;return r.stylesheets&&r.count===0&&q_(r,r.stylesheets),0<r.count?function(a){var c=setTimeout(function(){if(r.stylesheets&&q_(r,r.stylesheets),r.unsuspend){var d=r.unsuspend;r.unsuspend=null,d()}},6e4);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(c)}}:null}function Am(){if(this.count--,this.count===0){if(this.stylesheets)q_(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Cm=null;function q_(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Cm=new Map,a.forEach(kM,r),Cm=null,Am.call(r))}function kM(r,a){if(!(a.state.loading&4)){var c=Cm.get(r);if(c)var d=c.get(null);else{c=new Map,Cm.set(r,c);for(var _=r.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<_.length;v++){var C=_[v];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(c.set(C.dataset.precedence,C),d=C)}d&&c.set(null,d)}_=a.instance,C=_.getAttribute("data-precedence"),v=c.get(C)||d,v===d&&c.set(null,_),c.set(C,_),this.count++,d=Am.bind(this),_.addEventListener("load",d),_.addEventListener("error",d),v?v.parentNode.insertBefore(_,v.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(_,r.firstChild)),a.state.loading|=4}}var Yf={$$typeof:A,Provider:null,Consumer:null,_currentValue:Mt,_currentValue2:Mt,_threadCount:0};function XM(r,a,c,d,_,v,C,w){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ui(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ui(0),this.hiddenUpdates=Ui(null),this.identifierPrefix=d,this.onUncaughtError=_,this.onCaughtError=v,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Z2(r,a,c,d,_,v,C,w,L,Q,mt,_t){return r=new XM(r,a,c,C,w,L,Q,_t),a=1,v===!0&&(a|=24),v=yn(3,null,null,a),r.current=v,v.stateNode=r,a=uf(),a.refCount++,r.pooledCache=a,a.refCount++,v.memoizedState={element:d,isDehydrated:c,cache:a},Ti(v),r}function J2(r){return r?(r=ya,r):ya}function $2(r,a,c,d,_,v){_=J2(_),d.context===null?d.context=_:d.pendingContext=_,d=$i(a),d.payload={element:c},v=v===void 0?null:v,v!==null&&(d.callback=v),c=tr(r,d,a),c!==null&&(Dn(c,r,a),Na(c,r,a))}function tx(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<a?c:a}}function j_(r,a){tx(r,a),(r=r.alternate)&&tx(r,a)}function ex(r){if(r.tag===13){var a=Os(r,67108864);a!==null&&Dn(a,r,67108864),j_(r,67108864)}}var Bm=!0;function IM(r,a,c,d){var _=N.T;N.T=null;var v=yt.p;try{yt.p=2,K_(r,a,c,d)}finally{yt.p=v,N.T=_}}function YM(r,a,c,d){var _=N.T;N.T=null;var v=yt.p;try{yt.p=8,K_(r,a,c,d)}finally{yt.p=v,N.T=_}}function K_(r,a,c,d){if(Bm){var _=W_(d);if(_===null)N_(r,a,d,Rm,c),ix(r,d);else if(jM(_,r,a,c,d))d.stopPropagation();else if(ix(r,d),a&4&&-1<qM.indexOf(r)){for(;_!==null;){var v=zn(_);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var C=k(v.pendingLanes);if(C!==0){var w=v;for(w.pendingLanes|=2,w.entangledLanes|=2;C;){var L=1<<31-Ze(C);w.entanglements[1]|=L,C&=~L}ke(v),(Kt&6)===0&&(ue=_i()+500,fe(0))}}break;case 13:w=Os(v,2),w!==null&&Dn(w,v,2),Dl(),j_(v,2)}if(v=W_(d),v===null&&N_(r,a,d,Rm,c),v===_)break;_=v}_!==null&&d.stopPropagation()}else N_(r,a,d,null,c)}}function W_(r){return r=iu(r),Q_(r)}var Rm=null;function Q_(r){if(Rm=null,r=Ts(r),r!==null){var a=ut(r);if(a===null)r=null;else{var c=a.tag;if(c===13){if(r=ft(a),r!==null)return r;r=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Rm=r,null}function nx(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yl()){case ql:return 2;case Es:return 8;case nl:case Ko:return 32;case jl:return 268435456;default:return 32}default:return 32}}var Z_=!1,Oo=null,Po=null,Go=null,qf=new Map,jf=new Map,No=[],qM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ix(r,a){switch(r){case"focusin":case"focusout":Oo=null;break;case"dragenter":case"dragleave":Po=null;break;case"mouseover":case"mouseout":Go=null;break;case"pointerover":case"pointerout":qf.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":jf.delete(a.pointerId)}}function Kf(r,a,c,d,_,v){return r===null||r.nativeEvent!==v?(r={blockedOn:a,domEventName:c,eventSystemFlags:d,nativeEvent:v,targetContainers:[_]},a!==null&&(a=zn(a),a!==null&&ex(a)),r):(r.eventSystemFlags|=d,a=r.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),r)}function jM(r,a,c,d,_){switch(a){case"focusin":return Oo=Kf(Oo,r,a,c,d,_),!0;case"dragenter":return Po=Kf(Po,r,a,c,d,_),!0;case"mouseover":return Go=Kf(Go,r,a,c,d,_),!0;case"pointerover":var v=_.pointerId;return qf.set(v,Kf(qf.get(v)||null,r,a,c,d,_)),!0;case"gotpointercapture":return v=_.pointerId,jf.set(v,Kf(jf.get(v)||null,r,a,c,d,_)),!0}return!1}function rx(r){var a=Ts(r.target);if(a!==null){var c=ut(a);if(c!==null){if(a=c.tag,a===13){if(a=ft(c),a!==null){r.blockedOn=a,ii(r.priority,function(){if(c.tag===13){var d=Ri(),_=Os(c,d);_!==null&&Dn(_,c,d),j_(c,d)}});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Mm(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var c=W_(r.nativeEvent);if(c===null){c=r.nativeEvent;var d=new c.constructor(c.type,c);oc=d,c.target.dispatchEvent(d),oc=null}else return a=zn(c),a!==null&&ex(a),r.blockedOn=c,!1;a.shift()}return!0}function sx(r,a,c){Mm(r)&&c.delete(a)}function KM(){Z_=!1,Oo!==null&&Mm(Oo)&&(Oo=null),Po!==null&&Mm(Po)&&(Po=null),Go!==null&&Mm(Go)&&(Go=null),qf.forEach(sx),jf.forEach(sx)}function Dm(r,a){r.blockedOn===a&&(r.blockedOn=null,Z_||(Z_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,KM)))}var wm=null;function ax(r){wm!==r&&(wm=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){wm===r&&(wm=null);for(var a=0;a<r.length;a+=3){var c=r[a],d=r[a+1],_=r[a+2];if(typeof d!="function"){if(Q_(d||c)===null)continue;break}var v=zn(c);v!==null&&(r.splice(a,3),a-=3,yf(v,{pending:!0,data:_,method:c.method,action:d},d,_))}}))}function Wf(r){function a(L){return Dm(L,r)}Oo!==null&&Dm(Oo,r),Po!==null&&Dm(Po,r),Go!==null&&Dm(Go,r),qf.forEach(a),jf.forEach(a);for(var c=0;c<No.length;c++){var d=No[c];d.blockedOn===r&&(d.blockedOn=null)}for(;0<No.length&&(c=No[0],c.blockedOn===null);)rx(c),c.blockedOn===null&&No.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var _=c[d],v=c[d+1],C=_[ae]||null;if(typeof v=="function")C||ax(c);else if(C){var w=null;if(v&&v.hasAttribute("formAction")){if(_=v,C=v[ae]||null)w=C.formAction;else if(Q_(_)!==null)continue}else w=C.action;typeof w=="function"?c[d+1]=w:(c.splice(d,3),d-=3),ax(c)}}}function J_(r){this._internalRoot=r}Um.prototype.render=J_.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var c=a.current,d=Ri();$2(c,d,r,a,null,null)},Um.prototype.unmount=J_.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;r.tag===0&&St(),$2(r.current,2,null,r,null,null),Dl(),a[vi]=null}};function Um(r){this._internalRoot=r}Um.prototype.unstable_scheduleHydration=function(r){if(r){var a=Oi();r={blockedOn:null,target:r,priority:a};for(var c=0;c<No.length&&a!==0&&a<No[c].priority;c++);No.splice(c,0,r),c===0&&rx(r)}};var lx=t.version;if(lx!=="19.0.0")throw Error(i(527,lx,"19.0.0"));yt.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=it(a),r=r!==null?At(r):null,r=r===null?null:r.stateNode,r};var WM={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:N,findFiberByHostInstance:Ts,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Om=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Om.isDisabled&&Om.supportsFiber)try{yi=Om.inject(WM),sn=Om}catch{}}return Zf.createRoot=function(r,a){if(!s(r))throw Error(i(299));var c=!1,d="",_=am,v=lm,C=om,w=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(w=a.unstable_transitionCallbacks)),a=Z2(r,1,!1,null,null,c,d,_,v,C,w,null),r[vi]=a.current,G_(r.nodeType===8?r.parentNode:r),new J_(a)},Zf.hydrateRoot=function(r,a,c){if(!s(r))throw Error(i(299));var d=!1,_="",v=am,C=lm,w=om,L=null,Q=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(w=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(L=c.unstable_transitionCallbacks),c.formState!==void 0&&(Q=c.formState)),a=Z2(r,1,!0,a,c??null,d,_,v,C,w,L,Q),a.context=J2(null),c=a.current,d=Ri(),_=$i(d),_.callback=null,tr(c,_,d),a.current.lanes=d,bi(a,d),ke(a),r[vi]=a.current,G_(r),new Um(a)},Zf.version="19.0.0",Zf}var _x;function sD(){if(_x)return t0.exports;_x=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),t0.exports=rD(),t0.exports}var aD=sD(),zt=ab();const lb=sb(zt);var lD=Object.defineProperty,oD=Object.defineProperties,uD=Object.getOwnPropertyDescriptors,yx=Object.getOwnPropertySymbols,cD=Object.prototype.hasOwnProperty,hD=Object.prototype.propertyIsEnumerable,bx=(n,t,e)=>t in n?lD(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,vx=(n,t)=>{for(var e in t||(t={}))cD.call(t,e)&&bx(n,e,t[e]);if(yx)for(var e of yx(t))hD.call(t,e)&&bx(n,e,t[e]);return n},fD=(n,t)=>oD(n,uD(t)),xx,Sx;typeof window<"u"&&((xx=window.document)!=null&&xx.createElement||((Sx=window.navigator)==null?void 0:Sx.product)==="ReactNative")?zt.useLayoutEffect:zt.useEffect;function SS(n,t,e){if(!n)return;if(e(n)===!0)return n;let i=n.child;for(;i;){const s=SS(i,t,e);if(s)return s;i=i.sibling}}function ES(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const Ex=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=Ex;return}return Ex.apply(this,arguments)};const ob=ES(zt.createContext(null));class TS extends zt.Component{render(){return zt.createElement(ob.Provider,{value:this._reactInternals},this.props.children)}}function dD(){const n=zt.useContext(ob);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=zt.useId();return zt.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const s=SS(i,!1,o=>{let h=o.memoizedState;for(;h;){if(h.memoizedState===t)return!0;h=h.next}});if(s)return s}},[n,t])}function pD(){const n=dD(),[t]=zt.useState(()=>new Map);t.clear();let e=n;for(;e;){if(e.type&&typeof e.type=="object"){const s=e.type._context===void 0&&e.type.Provider===e.type?e.type:e.type._context;s&&s!==ob&&!t.has(s)&&t.set(s,zt.useContext(ES(s)))}e=e.return}return t}function mD(){const n=pD();return zt.useMemo(()=>Array.from(n.keys()).reduce((t,e)=>i=>zt.createElement(t,null,zt.createElement(e.Provider,fD(vx({},i),{value:n.get(e)}))),t=>zt.createElement(TS,vx({},t))),[n])}const gD="modulepreload",_D=function(n){return"/worlds-on-fire/"+n},Tx={},Ed=function(t,e,i){let s=Promise.resolve();if(e&&e.length>0){let h=function(g){return Promise.all(g.map(b=>Promise.resolve(b).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));s=h(e.map(g=>{if(g=_D(g),g in Tx)return;Tx[g]=!0;const b=g.endsWith(".css"),x=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${x}`))return;const E=document.createElement("link");if(E.rel=b?"stylesheet":gD,b||(E.as="script"),E.crossOrigin="",E.href=g,m&&E.setAttribute("nonce",m),document.head.appendChild(E),b)return new Promise((A,R)=>{E.addEventListener("load",A),E.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return s.then(h=>{for(const f of h||[])f.status==="rejected"&&o(f.reason);return t().catch(o)})};var q=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n.ShapeBuilder="shape-builder",n.Batcher="batcher",n))(q||{});const J0=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},od=(n,t)=>J0(n).priority??t,De={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(J0).forEach(t=>{t.type.forEach(e=>{var i,s;return(s=(i=this._removeHandlers)[e])==null?void 0:s.call(i,t)})}),this},add(...n){return n.map(J0).forEach(t=>{t.type.forEach(e=>{var o,h;const i=this._addHandlers,s=this._queue;i[e]?(h=i[e])==null||h.call(i,t):(s[e]=s[e]||[],(o=s[e])==null||o.push(t))})}),this},handle(n,t,e){var h;const i=this._addHandlers,s=this._removeHandlers;if(i[n]||s[n])throw new Error(`Extension type ${n} already has a handler`);i[n]=t,s[n]=e;const o=this._queue;return o[n]&&((h=o[n])==null||h.forEach(f=>t(f)),delete o[n]),this},handleByMap(n,t){return this.handle(n,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(n,t,e=-1){return this.handle(n,i=>{t.findIndex(o=>o.name===i.name)>=0||(t.push({name:i.name,value:i.ref}),t.sort((o,h)=>od(h.value,e)-od(o.value,e)))},i=>{const s=t.findIndex(o=>o.name===i.name);s!==-1&&t.splice(s,1)})},handleByList(n,t,e=-1){return this.handle(n,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((s,o)=>od(o,e)-od(s,e)))},i=>{const s=t.indexOf(i.ref);s!==-1&&t.splice(s,1)})},mixin(n,...t){for(const e of t)Object.defineProperties(n.prototype,Object.getOwnPropertyDescriptors(e))}},AS={extension:{type:q.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Ed(()=>import("./browserAll-fL-cH2YB.js"),__vite__mapDeps([0,1]))}},CS={extension:{type:q.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Ed(()=>import("./webworkerAll-Cc9K4LWg.js"),[])}};class Fn{constructor(t,e,i){this._x=e||0,this._y=i||0,this._observer=t}clone(t){return new Fn(t??this._observer,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var s0={exports:{}},Ax;function yD(){return Ax||(Ax=1,function(n){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function s(m,g,b){this.fn=m,this.context=g,this.once=b||!1}function o(m,g,b,x,E){if(typeof b!="function")throw new TypeError("The listener must be a function");var A=new s(b,x||m,E),R=e?e+g:g;return m._events[R]?m._events[R].fn?m._events[R]=[m._events[R],A]:m._events[R].push(A):(m._events[R]=A,m._eventsCount++),m}function h(m,g){--m._eventsCount===0?m._events=new i:delete m._events[g]}function f(){this._events=new i,this._eventsCount=0}f.prototype.eventNames=function(){var g=[],b,x;if(this._eventsCount===0)return g;for(x in b=this._events)t.call(b,x)&&g.push(e?x.slice(1):x);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(b)):g},f.prototype.listeners=function(g){var b=e?e+g:g,x=this._events[b];if(!x)return[];if(x.fn)return[x.fn];for(var E=0,A=x.length,R=new Array(A);E<A;E++)R[E]=x[E].fn;return R},f.prototype.listenerCount=function(g){var b=e?e+g:g,x=this._events[b];return x?x.fn?1:x.length:0},f.prototype.emit=function(g,b,x,E,A,R){var D=e?e+g:g;if(!this._events[D])return!1;var B=this._events[D],P=arguments.length,G,H;if(B.fn){switch(B.once&&this.removeListener(g,B.fn,void 0,!0),P){case 1:return B.fn.call(B.context),!0;case 2:return B.fn.call(B.context,b),!0;case 3:return B.fn.call(B.context,b,x),!0;case 4:return B.fn.call(B.context,b,x,E),!0;case 5:return B.fn.call(B.context,b,x,E,A),!0;case 6:return B.fn.call(B.context,b,x,E,A,R),!0}for(H=1,G=new Array(P-1);H<P;H++)G[H-1]=arguments[H];B.fn.apply(B.context,G)}else{var j=B.length,Z;for(H=0;H<j;H++)switch(B[H].once&&this.removeListener(g,B[H].fn,void 0,!0),P){case 1:B[H].fn.call(B[H].context);break;case 2:B[H].fn.call(B[H].context,b);break;case 3:B[H].fn.call(B[H].context,b,x);break;case 4:B[H].fn.call(B[H].context,b,x,E);break;default:if(!G)for(Z=1,G=new Array(P-1);Z<P;Z++)G[Z-1]=arguments[Z];B[H].fn.apply(B[H].context,G)}}return!0},f.prototype.on=function(g,b,x){return o(this,g,b,x,!1)},f.prototype.once=function(g,b,x){return o(this,g,b,x,!0)},f.prototype.removeListener=function(g,b,x,E){var A=e?e+g:g;if(!this._events[A])return this;if(!b)return h(this,A),this;var R=this._events[A];if(R.fn)R.fn===b&&(!E||R.once)&&(!x||R.context===x)&&h(this,A);else{for(var D=0,B=[],P=R.length;D<P;D++)(R[D].fn!==b||E&&!R[D].once||x&&R[D].context!==x)&&B.push(R[D]);B.length?this._events[A]=B.length===1?B[0]:B:h(this,A)}return this},f.prototype.removeAllListeners=function(g){var b;return g?(b=e?e+g:g,this._events[b]&&h(this,b)):(this._events=new i,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=e,f.EventEmitter=f,n.exports=f}(s0)),s0.exports}var bD=yD();const ei=sb(bD),BS=Math.PI*2,RS=180/Math.PI,MS=Math.PI/180;class Xe{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new Xe(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return a0.x=0,a0.y=0,a0}}const a0=new Xe;class Pt{constructor(t=1,e=0,i=0,s=1,o=0,h=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=s,this.tx=o,this.ty=h}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,s,o,h){return this.a=t,this.b=e,this.c=i,this.d=s,this.tx=o,this.ty=h,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new Xe;const i=t.x,s=t.y;return e.x=this.a*i+this.c*s+this.tx,e.y=this.b*i+this.d*s+this.ty,e}applyInverse(t,e){e=e||new Xe;const i=this.a,s=this.b,o=this.c,h=this.d,f=this.tx,m=this.ty,g=1/(i*h+o*-s),b=t.x,x=t.y;return e.x=h*g*b+-o*g*x+(m*o-f*h)*g,e.y=i*g*x+-s*g*b+(-m*i+f*s)*g,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.a,o=this.c,h=this.tx;return this.a=s*e-this.b*i,this.b=s*i+this.b*e,this.c=o*e-this.d*i,this.d=o*i+this.d*e,this.tx=h*e-this.ty*i,this.ty=h*i+this.ty*e,this}append(t){const e=this.a,i=this.b,s=this.c,o=this.d;return this.a=t.a*e+t.b*s,this.b=t.a*i+t.b*o,this.c=t.c*e+t.d*s,this.d=t.c*i+t.d*o,this.tx=t.tx*e+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*o+this.ty,this}appendFrom(t,e){const i=t.a,s=t.b,o=t.c,h=t.d,f=t.tx,m=t.ty,g=e.a,b=e.b,x=e.c,E=e.d;return this.a=i*g+s*x,this.b=i*b+s*E,this.c=o*g+h*x,this.d=o*b+h*E,this.tx=f*g+m*x+e.tx,this.ty=f*b+m*E+e.ty,this}setTransform(t,e,i,s,o,h,f,m,g){return this.a=Math.cos(f+g)*o,this.b=Math.sin(f+g)*o,this.c=-Math.sin(f-m)*h,this.d=Math.cos(f-m)*h,this.tx=t-(i*this.a+s*this.c),this.ty=e-(i*this.b+s*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,s=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=s*t.a+this.d*t.c,this.d=s*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,s=this.c,o=this.d,h=t.pivot,f=-Math.atan2(-s,o),m=Math.atan2(i,e),g=Math.abs(f+m);return g<1e-5||Math.abs(BS-g)<1e-5?(t.rotation=m,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=f,t.skew.y=m),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(s*s+o*o),t.position.x=this.tx+(h.x*e+h.y*s),t.position.y=this.ty+(h.x*i+h.y*o),t}invert(){const t=this.a,e=this.b,i=this.c,s=this.d,o=this.tx,h=t*s-e*i;return this.a=s/h,this.b=-e/h,this.c=-i/h,this.d=t/h,this.tx=(i*this.ty-s*o)/h,this.ty=-(t*this.ty-e*o)/h,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Pt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return xD.identity()}static get shared(){return vD.identity()}}const vD=new Pt,xD=new Pt,Yu=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],qu=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ju=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ku=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],$0=[],DS=[],Pm=Math.sign;function SD(){for(let n=0;n<16;n++){const t=[];$0.push(t);for(let e=0;e<16;e++){const i=Pm(Yu[n]*Yu[e]+ju[n]*qu[e]),s=Pm(qu[n]*Yu[e]+Ku[n]*qu[e]),o=Pm(Yu[n]*ju[e]+ju[n]*Ku[e]),h=Pm(qu[n]*ju[e]+Ku[n]*Ku[e]);for(let f=0;f<16;f++)if(Yu[f]===i&&qu[f]===s&&ju[f]===o&&Ku[f]===h){t.push(f);break}}}for(let n=0;n<16;n++){const t=new Pt;t.set(Yu[n],qu[n],ju[n],Ku[n],0,0),DS.push(t)}}SD();const me={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>Yu[n],uY:n=>qu[n],vX:n=>ju[n],vY:n=>Ku[n],inv:n=>n&8?n&15:-n&7,add:(n,t)=>$0[n][t],sub:(n,t)=>$0[n][me.inv(t)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,t)=>Math.abs(n)*2<=Math.abs(t)?t>=0?me.S:me.N:Math.abs(t)*2<=Math.abs(n)?n>0?me.E:me.W:t>0?n>0?me.SE:me.SW:n>0?me.NE:me.NW,matrixAppendRotationInv:(n,t,e=0,i=0)=>{const s=DS[me.inv(t)];s.tx=e,s.ty=i,n.append(s)}},Gm=[new Xe,new Xe,new Xe,new Xe];class Oe{constructor(t=0,e=0,i=0,s=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(s)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Oe(0,0,0,0)}clone(){return new Oe(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,i,s=.5){const{width:o,height:h}=this;if(o<=0||h<=0)return!1;const f=this.x,m=this.y,g=i*(1-s),b=i-g,x=f-g,E=f+o+g,A=m-g,R=m+h+g,D=f+b,B=f+o-b,P=m+b,G=m+h-b;return t>=x&&t<=E&&e>=A&&e<=R&&!(t>D&&t<B&&e>P&&e<G)}intersects(t,e){if(!e){const ht=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=ht)return!1;const Y=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>Y}const i=this.left,s=this.right,o=this.top,h=this.bottom;if(s<=i||h<=o)return!1;const f=Gm[0].set(t.left,t.top),m=Gm[1].set(t.left,t.bottom),g=Gm[2].set(t.right,t.top),b=Gm[3].set(t.right,t.bottom);if(g.x<=f.x||m.y<=f.y)return!1;const x=Math.sign(e.a*e.d-e.b*e.c);if(x===0||(e.apply(f,f),e.apply(m,m),e.apply(g,g),e.apply(b,b),Math.max(f.x,m.x,g.x,b.x)<=i||Math.min(f.x,m.x,g.x,b.x)>=s||Math.max(f.y,m.y,g.y,b.y)<=o||Math.min(f.y,m.y,g.y,b.y)>=h))return!1;const E=x*(m.y-f.y),A=x*(f.x-m.x),R=E*i+A*o,D=E*s+A*o,B=E*i+A*h,P=E*s+A*h;if(Math.max(R,D,B,P)<=E*f.x+A*f.y||Math.min(R,D,B,P)>=E*b.x+A*b.y)return!1;const G=x*(f.y-g.y),H=x*(g.x-f.x),j=G*i+H*o,Z=G*s+H*o,nt=G*i+H*h,V=G*s+H*h;return!(Math.max(j,Z,nt,V)<=G*f.x+H*f.y||Math.min(j,Z,nt,V)>=G*b.x+H*b.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),s=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=s,this.height=Math.max(o-s,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,s=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=s-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),s=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=s,this.height=o-s,this}getBounds(t){return t||(t=new Oe),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const e=t.x,i=t.y,s=t.x+t.width,o=t.y+t.height;return e>=this.x&&e<this.x+this.width&&i>=this.y&&i<this.y+this.height&&s>=this.x&&s<this.x+this.width&&o>=this.y&&o<this.y+this.height}set(t,e,i,s){return this.x=t,this.y=e,this.width=i,this.height=s,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const md={default:-1};function rn(n="default"){return md[n]===void 0&&(md[n]=-1),++md[n]}function ED(){for(const n in md)delete md[n]}const Cx={},Jt="8.0.0",wS="8.3.4";function wt(n,t,e=3){if(Cx[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${n}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`),console.warn(i))),Cx[t]=!0}const ub=()=>{};function Qu(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function ty(n){return!(n&n-1)&&!!n}function TD(n){let t=(n>65535?1:0)<<4;n>>>=t;let e=(n>255?1:0)<<3;return n>>>=e,t|=e,e=(n>15?1:0)<<2,n>>>=e,t|=e,e=(n>3?1:0)<<1,n>>>=e,t|=e,t|n>>1}function sa(n){const t={};for(const e in n)n[e]!==void 0&&(t[e]=n[e]);return t}const Bx=Object.create(null);function AD(n){const t=Bx[n];return t===void 0&&(Bx[n]=rn("resource")),t}const US=class OS extends ei{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...OS.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){wt(Jt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=AD(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};US.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let vs=US;const PS=class GS extends ei{constructor(t={}){super(),this.options=t,this.uid=rn("textureSource"),this._resourceType="textureSource",this._resourceId=rn("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...GS.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new vs(sa(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){var e,i;this.style!==t&&((e=this._style)==null||e.off("change",this._onStyleChange,this),this._style=t,(i=this._style)==null||i.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=rn("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,i){i||(i=this._resolution),t||(t=this.width),e||(e=this.height);const s=Math.round(t*i),o=Math.round(e*i);return this.width=s/i,this.height=o/i,this._resolution=i,this.pixelWidth===s&&this.pixelHeight===o?!1:(this._refreshPOT(),this.pixelWidth=s,this.pixelHeight=o,this.emit("resize",this),this._resourceId=rn("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=ty(this.pixelWidth)&&ty(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};PS.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Sn=PS;class Pg extends Sn{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let i=t.format;i||(e instanceof Float32Array?i="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?i="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?i="rgba16uint":(e instanceof Int8Array,i="bgra8unorm")),super({...t,resource:e,format:i}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}Pg.extension=q.TextureSource;const Rx=new Pt;class cb{constructor(t,e){this.mapCoord=new Pt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var e;this.texture!==t&&((e=this._texture)==null||e.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let s=0;s<t.length;s+=2){const o=t[s],h=t[s+1];e[s]=o*i.a+h*i.c+i.tx,e[s+1]=o*i.b+h*i.d+i.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const i=t.orig,s=t.trim;s&&(Rx.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(Rx));const o=t.source,h=this.uClampFrame,f=this.clampMargin/o._resolution,m=this.clampOffset/o._resolution;return h[0]=(t.frame.x+f+m)/o.width,h[1]=(t.frame.y+f+m)/o.height,h[2]=(t.frame.x+t.frame.width-f+m)/o.width,h[3]=(t.frame.y+t.frame.height-f+m)/o.height,this.uClampOffset[0]=this.clampOffset/o.pixelWidth,this.uClampOffset[1]=this.clampOffset/o.pixelHeight,this.isSimple=t.frame.width===o.width&&t.frame.height===o.height&&t.rotate===0,!0}}class Ct extends ei{constructor({source:t,label:e,frame:i,orig:s,trim:o,defaultAnchor:h,defaultBorders:f,rotate:m,dynamic:g}={}){if(super(),this.uid=rn("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Oe,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=(t==null?void 0:t.source)??new Sn,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:b,height:x}=this._source;this.frame.width=b,this.frame.height=x}this.orig=s||this.frame,this.trim=o,this.rotate=m??0,this.defaultAnchor=h,this.defaultBorders=f,this.destroyed=!1,this.dynamic=g||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new cb(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:i,height:s}=this._source,o=e.x/i,h=e.y/s,f=e.width/i,m=e.height/s;let g=this.rotate;if(g){const b=f/2,x=m/2,E=o+b,A=h+x;g=me.add(g,me.NW),t.x0=E+b*me.uX(g),t.y0=A+x*me.uY(g),g=me.add(g,2),t.x1=E+b*me.uX(g),t.y1=A+x*me.uY(g),g=me.add(g,2),t.x2=E+b*me.uX(g),t.y2=A+x*me.uY(g),g=me.add(g,2),t.x3=E+b*me.uX(g),t.y3=A+x*me.uY(g)}else t.x0=o,t.y0=h,t.x1=o+f,t.y1=h,t.x2=o+f,t.y2=h+m,t.x3=o,t.y3=h+m}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return wt(Jt,"Texture.baseTexture is now Texture.source"),this._source}}Ct.EMPTY=new Ct({label:"EMPTY",source:new Sn({label:"EMPTY"})});Ct.EMPTY.destroy=ub;Ct.WHITE=new Ct({source:new Pg({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Ct.WHITE.destroy=ub;function hb(n,t,e){const{width:i,height:s}=e.orig,o=e.trim;if(o){const h=o.width,f=o.height;n.minX=o.x-t._x*i,n.maxX=n.minX+h,n.minY=o.y-t._y*s,n.maxY=n.minY+f}else n.minX=-t._x*i,n.maxX=n.minX+i,n.minY=-t._y*s,n.maxY=n.minY+s}const Mx=new Pt;class ti{constructor(t=1/0,e=1/0,i=-1/0,s=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Mx,this.minX=t,this.minY=e,this.maxX=i,this.maxY=s}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Oe);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Mx,this}set(t,e,i,s){this.minX=t,this.minY=e,this.maxX=i,this.maxY=s}addFrame(t,e,i,s,o){o||(o=this.matrix);const h=o.a,f=o.b,m=o.c,g=o.d,b=o.tx,x=o.ty;let E=this.minX,A=this.minY,R=this.maxX,D=this.maxY,B=h*t+m*e+b,P=f*t+g*e+x;B<E&&(E=B),P<A&&(A=P),B>R&&(R=B),P>D&&(D=P),B=h*i+m*e+b,P=f*i+g*e+x,B<E&&(E=B),P<A&&(A=P),B>R&&(R=B),P>D&&(D=P),B=h*t+m*s+b,P=f*t+g*s+x,B<E&&(E=B),P<A&&(A=P),B>R&&(R=B),P>D&&(D=P),B=h*i+m*s+b,P=f*i+g*s+x,B<E&&(E=B),P<A&&(A=P),B>R&&(R=B),P>D&&(D=P),this.minX=E,this.minY=A,this.maxX=R,this.maxY=D}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,i=this.minY,s=this.maxX,o=this.maxY,{a:h,b:f,c:m,d:g,tx:b,ty:x}=t;let E=h*e+m*i+b,A=f*e+g*i+x;this.minX=E,this.minY=A,this.maxX=E,this.maxY=A,E=h*s+m*i+b,A=f*s+g*i+x,this.minX=E<this.minX?E:this.minX,this.minY=A<this.minY?A:this.minY,this.maxX=E>this.maxX?E:this.maxX,this.maxY=A>this.maxY?A:this.maxY,E=h*e+m*o+b,A=f*e+g*o+x,this.minX=E<this.minX?E:this.minX,this.minY=A<this.minY?A:this.minY,this.maxX=E>this.maxX?E:this.maxX,this.maxY=A>this.maxY?A:this.maxY,E=h*s+m*o+b,A=f*s+g*o+x,this.minX=E<this.minX?E:this.minX,this.minY=A<this.minY?A:this.minY,this.maxX=E>this.maxX?E:this.maxX,this.maxY=A>this.maxY?A:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,i,s){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<i&&(this.minY=i),this.maxY>s&&(this.maxY=s),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new ti(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,i,s){let o=this.minX,h=this.minY,f=this.maxX,m=this.maxY;s||(s=this.matrix);const g=s.a,b=s.b,x=s.c,E=s.d,A=s.tx,R=s.ty;for(let D=e;D<i;D+=2){const B=t[D],P=t[D+1],G=g*B+x*P+A,H=b*B+E*P+R;o=G<o?G:o,h=H<h?H:h,f=G>f?G:f,m=H>m?H:m}this.minX=o,this.minY=h,this.maxX=f,this.maxY=m}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var CD={grad:.9,turn:360,rad:360/(2*Math.PI)},Pl=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},pi=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},ys=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},NS=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},Dx=function(n){return{r:ys(n.r,0,255),g:ys(n.g,0,255),b:ys(n.b,0,255),a:ys(n.a)}},l0=function(n){return{r:pi(n.r),g:pi(n.g),b:pi(n.b),a:pi(n.a,3)}},BD=/^#([0-9a-f]{3,8})$/i,Nm=function(n){var t=n.toString(16);return t.length<2?"0"+t:t},zS=function(n){var t=n.r,e=n.g,i=n.b,s=n.a,o=Math.max(t,e,i),h=o-Math.min(t,e,i),f=h?o===t?(e-i)/h:o===e?2+(i-t)/h:4+(t-e)/h:0;return{h:60*(f<0?f+6:f),s:o?h/o*100:0,v:o/255*100,a:s}},LS=function(n){var t=n.h,e=n.s,i=n.v,s=n.a;t=t/360*6,e/=100,i/=100;var o=Math.floor(t),h=i*(1-e),f=i*(1-(t-o)*e),m=i*(1-(1-t+o)*e),g=o%6;return{r:255*[i,f,h,h,m,i][g],g:255*[m,i,i,f,h,h][g],b:255*[h,h,m,i,i,f][g],a:s}},wx=function(n){return{h:NS(n.h),s:ys(n.s,0,100),l:ys(n.l,0,100),a:ys(n.a)}},Ux=function(n){return{h:pi(n.h),s:pi(n.s),l:pi(n.l),a:pi(n.a,3)}},Ox=function(n){return LS((e=(t=n).s,{h:t.h,s:(e*=((i=t.l)<50?i:100-i)/100)>0?2*e/(i+e)*100:0,v:i+e,a:t.a}));var t,e,i},gd=function(n){return{h:(t=zS(n)).h,s:(s=(200-(e=t.s))*(i=t.v)/100)>0&&s<200?e*i/100/(s<=100?s:200-s)*100:0,l:s/2,a:t.a};var t,e,i,s},RD=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,MD=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,DD=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,wD=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ey={string:[[function(n){var t=BD.exec(n);return t?(n=t[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?pi(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?pi(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var t=DD.exec(n)||wD.exec(n);return t?t[2]!==t[4]||t[4]!==t[6]?null:Dx({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(n){var t=RD.exec(n)||MD.exec(n);if(!t)return null;var e,i,s=wx({h:(e=t[1],i=t[2],i===void 0&&(i="deg"),Number(e)*(CD[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Ox(s)},"hsl"]],object:[[function(n){var t=n.r,e=n.g,i=n.b,s=n.a,o=s===void 0?1:s;return Pl(t)&&Pl(e)&&Pl(i)?Dx({r:Number(t),g:Number(e),b:Number(i),a:Number(o)}):null},"rgb"],[function(n){var t=n.h,e=n.s,i=n.l,s=n.a,o=s===void 0?1:s;if(!Pl(t)||!Pl(e)||!Pl(i))return null;var h=wx({h:Number(t),s:Number(e),l:Number(i),a:Number(o)});return Ox(h)},"hsl"],[function(n){var t=n.h,e=n.s,i=n.v,s=n.a,o=s===void 0?1:s;if(!Pl(t)||!Pl(e)||!Pl(i))return null;var h=function(f){return{h:NS(f.h),s:ys(f.s,0,100),v:ys(f.v,0,100),a:ys(f.a)}}({h:Number(t),s:Number(e),v:Number(i),a:Number(o)});return LS(h)},"hsv"]]},Px=function(n,t){for(var e=0;e<t.length;e++){var i=t[e][0](n);if(i)return[i,t[e][1]]}return[null,void 0]},UD=function(n){return typeof n=="string"?Px(n.trim(),ey.string):typeof n=="object"&&n!==null?Px(n,ey.object):[null,void 0]},o0=function(n,t){var e=gd(n);return{h:e.h,s:ys(e.s+100*t,0,100),l:e.l,a:e.a}},u0=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},Gx=function(n,t){var e=gd(n);return{h:e.h,s:e.s,l:ys(e.l+100*t,0,100),a:e.a}},ny=function(){function n(t){this.parsed=UD(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return pi(u0(this.rgba),2)},n.prototype.isDark=function(){return u0(this.rgba)<.5},n.prototype.isLight=function(){return u0(this.rgba)>=.5},n.prototype.toHex=function(){return t=l0(this.rgba),e=t.r,i=t.g,s=t.b,h=(o=t.a)<1?Nm(pi(255*o)):"","#"+Nm(e)+Nm(i)+Nm(s)+h;var t,e,i,s,o,h},n.prototype.toRgb=function(){return l0(this.rgba)},n.prototype.toRgbString=function(){return t=l0(this.rgba),e=t.r,i=t.g,s=t.b,(o=t.a)<1?"rgba("+e+", "+i+", "+s+", "+o+")":"rgb("+e+", "+i+", "+s+")";var t,e,i,s,o},n.prototype.toHsl=function(){return Ux(gd(this.rgba))},n.prototype.toHslString=function(){return t=Ux(gd(this.rgba)),e=t.h,i=t.s,s=t.l,(o=t.a)<1?"hsla("+e+", "+i+"%, "+s+"%, "+o+")":"hsl("+e+", "+i+"%, "+s+"%)";var t,e,i,s,o},n.prototype.toHsv=function(){return t=zS(this.rgba),{h:pi(t.h),s:pi(t.s),v:pi(t.v),a:pi(t.a,3)};var t},n.prototype.invert=function(){return ja({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},n.prototype.saturate=function(t){return t===void 0&&(t=.1),ja(o0(this.rgba,t))},n.prototype.desaturate=function(t){return t===void 0&&(t=.1),ja(o0(this.rgba,-t))},n.prototype.grayscale=function(){return ja(o0(this.rgba,-1))},n.prototype.lighten=function(t){return t===void 0&&(t=.1),ja(Gx(this.rgba,t))},n.prototype.darken=function(t){return t===void 0&&(t=.1),ja(Gx(this.rgba,-t))},n.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},n.prototype.alpha=function(t){return typeof t=="number"?ja({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):pi(this.rgba.a,3);var e},n.prototype.hue=function(t){var e=gd(this.rgba);return typeof t=="number"?ja({h:t,s:e.s,l:e.l,a:e.a}):pi(e.h)},n.prototype.isEqual=function(t){return this.toHex()===ja(t).toHex()},n}(),ja=function(n){return n instanceof ny?n:new ny(n)},Nx=[],OD=function(n){n.forEach(function(t){Nx.indexOf(t)<0&&(t(ny,ey),Nx.push(t))})};function PD(n,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var s in e)i[e[s]]=s;var o={};n.prototype.toName=function(h){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var f,m,g=i[this.toHex()];if(g)return g;if(h!=null&&h.closest){var b=this.toRgb(),x=1/0,E="black";if(!o.length)for(var A in e)o[A]=new n(e[A]).toRgb();for(var R in e){var D=(f=b,m=o[R],Math.pow(f.r-m.r,2)+Math.pow(f.g-m.g,2)+Math.pow(f.b-m.b,2));D<x&&(x=D,E=R)}return E}},t.string.push([function(h){var f=h.toLowerCase(),m=f==="transparent"?"#0000":e[f];return m?new n(m).toRgb():null},"name"])}OD([PD]);const vh=class ud{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof ud)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((o,h)=>o===e[h]);if(t!==null&&e!==null){const o=Object.keys(t),h=Object.keys(e);return o.length!==h.length?!1:o.every(f=>t[f]===e[f])}return t===e}toRgba(){const[t,e,i,s]=this._components;return{r:t,g:e,b:i,a:s}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,s]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(s*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[e,i,s,o]=this._components;return t[0]=e,t[1]=i,t[2]=s,t[3]=o,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[e,i,s]=this._components;return t[0]=e,t[1]=i,t[2]=s,t}toNumber(){return this._int}toBgrNumber(){const[t,e,i]=this.toUint8RgbArray();return(i<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,i,s,o]=ud._temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=s,this._components[3]*=o,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,o=this._int&255;return e&&(i=i*t+.5|0,s=s*t+.5|0,o=o*t+.5|0),(t*255<<24)+(i<<16)+(s<<8)+o}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let e,i,s,o;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const h=t;e=(h>>16&255)/255,i=(h>>8&255)/255,s=(h&255)/255,o=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,s,o=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,s,o=255]=t,e/=255,i/=255,s/=255,o/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const f=ud.HEX_PATTERN.exec(t);f&&(t=`#${f[2]}`)}const h=ja(t);h.isValid()&&({r:e,g:i,b:s,a:o}=h.rgba,e/=255,i/=255,s/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=s,this._components[3]=o,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((s,o)=>{t[o]=Math.min(Math.max(s,e),i)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof ud||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};vh.shared=new vh;vh._temp=new vh;vh.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Ce=vh;const HS={cullArea:null,cullable:!1,cullableChildren:!0};class Gg{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var i;let e;return this._index>0?e=this._pool[--this._index]:e=new this._classType,(i=e.init)==null||i.call(e,t),e}return(t){var e;(e=t.reset)==null||e.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class FS{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new Gg(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(e=>{const i=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[i]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}}const mi=new FS,VS={get isCachedAsTexture(){var n;return!!((n=this.renderGroup)!=null&&n.isCachedAsTexture)},cacheAsTexture(n){typeof n=="boolean"&&n===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(n===!0?{}:n))},updateCacheTexture(){var n;(n=this.renderGroup)==null||n.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(n){wt("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(n)}};function fb(n,t,e){const i=n.length;let s;if(t>=i||e===0)return;e=t+e>i?i-t:e;const o=i-e;for(s=t;s<o;++s)n[s]=n[s+e];n.length=o}const kS={allowChildren:!0,removeChildren(n=0,t){var o;const e=t??this.children.length,i=e-n,s=[];if(i>0&&i<=e){for(let f=e-1;f>=n;f--){const m=this.children[f];m&&(s.push(m),m.parent=null)}fb(this.children,n,e);const h=this.renderGroup||this.parentRenderGroup;h&&h.removeChildren(s);for(let f=0;f<s.length;++f){const m=s[f];(o=m.parentRenderLayer)==null||o.detach(m),this.emit("childRemoved",m,this,f),s[f].emit("removed",this)}return s.length>0&&this._didViewChangeTick++,s}else if(i===0&&this.children.length===0)return s;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const t=this.getChildAt(n);return this.removeChild(t)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,t)},getChildIndex(n){const t=this.children.indexOf(n);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(n,t){this.allowChildren||wt(Jt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:e}=this;if(t<0||t>e.length)throw new Error(`${n}addChildAt: The index ${t} supplied is out of bounds ${e.length}`);if(n.parent){const s=n.parent.children.indexOf(n);if(n.parent===this&&s===t)return n;s!==-1&&n.parent.children.splice(s,1)}t===e.length?e.push(n):e.splice(t,0,n),n.parent=this,n.didChange=!0,n._updateFlags=15;const i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,t),n.emit("added",this),n},swapChildren(n,t){if(n===t)return;const e=this.getChildIndex(n),i=this.getChildIndex(t);this.children[e]=t,this.children[i]=n;const s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var n;(n=this.parent)==null||n.removeChild(this)},reparentChild(...n){return n.length===1?this.reparentChildAt(n[0],this.children.length):(n.forEach(t=>this.reparentChildAt(t,this.children.length)),n[0])},reparentChildAt(n,t){if(n.parent===this)return this.setChildIndex(n,t),n;const e=n.worldTransform.clone();n.removeFromParent(),this.addChildAt(n,t);const i=this.worldTransform.clone();return i.invert(),e.prepend(i),n.setFromMatrix(e),n}},XS={collectRenderables(n,t,e){this.parentRenderLayer&&this.parentRenderLayer!==e||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(n,t,e):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,n):this.collectRenderablesWithEffects(n,t,e))},collectRenderablesSimple(n,t,e){const i=this.children,s=i.length;for(let o=0;o<s;o++)i[o].collectRenderables(n,t,e)},collectRenderablesWithEffects(n,t,e){const{renderPipes:i}=t;for(let s=0;s<this.effects.length;s++){const o=this.effects[s];i[o.pipe].push(o,this,n)}this.collectRenderablesSimple(n,t,e);for(let s=this.effects.length-1;s>=0;s--){const o=this.effects[s];i[o.pipe].pop(o,this,n)}}};class Td{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class IS{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const i=this._tests[e];if(i.test(t))return mi.get(i.maskClass,t)}return t}returnMaskEffect(t){mi.return(t)}}const dg=new IS;De.handleByList(q.MaskEffect,dg._effectClasses);const YS={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0)},addEffect(n){this.effects.indexOf(n)===-1&&(this.effects.push(n),this.effects.sort((e,i)=>e.priority-i.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(n){const t=this.effects.indexOf(n);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(n){const t=this._maskEffect;(t==null?void 0:t.mask)!==n&&(t&&(this.removeEffect(t),dg.returnMaskEffect(t),this._maskEffect=null),n!=null&&(this._maskEffect=dg.getMaskEffect(n),this.addEffect(this._maskEffect)))},get mask(){var n;return(n=this._maskEffect)==null?void 0:n.mask},setMask(n){this._maskOptions={...this._maskOptions,...n},n.mask&&(this.mask=n.mask),this._markStructureAsChanged()},set filters(n){var o;!Array.isArray(n)&&n&&(n=[n]);const t=this._filterEffect||(this._filterEffect=new Td);n=n;const e=(n==null?void 0:n.length)>0,i=((o=t.filters)==null?void 0:o.length)>0,s=e!==i;n=Array.isArray(n)?n.slice(0):n,t.filters=Object.freeze(n),s&&(e?this.addEffect(t):(this.removeEffect(t),t.filters=n??null))},get filters(){var n;return(n=this._filterEffect)==null?void 0:n.filters},set filterArea(n){this._filterEffect||(this._filterEffect=new Td),this._filterEffect.filterArea=n},get filterArea(){var n;return(n=this._filterEffect)==null?void 0:n.filterArea}},qS={label:null,get name(){return wt(Jt,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){wt(Jt,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,t=!1){return this.getChildByLabel(n,t)},getChildByLabel(n,t=!1){const e=this.children;for(let i=0;i<e.length;i++){const s=e[i];if(s.label===n||n instanceof RegExp&&n.test(s.label))return s}if(t)for(let i=0;i<e.length;i++){const o=e[i].getChildByLabel(n,!0);if(o)return o}return null},getChildrenByLabel(n,t=!1,e=[]){const i=this.children;for(let s=0;s<i.length;s++){const o=i[s];(o.label===n||n instanceof RegExp&&n.test(o.label))&&e.push(o)}if(t)for(let s=0;s<i.length;s++)i[s].getChildrenByLabel(n,!0,e);return e}},Yi=new Gg(Pt),Wa=new Gg(ti),GD=new Pt,jS={getFastGlobalBounds(n,t){t||(t=new ti),t.clear(),this._getGlobalBoundsRecursive(!!n,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const e=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(e.worldTransform),t},_getGlobalBoundsRecursive(n,t,e){let i=t;if(n&&this.parentRenderLayer&&this.parentRenderLayer!==e||this.localDisplayStatus!==7||!this.measurable)return;const s=!!this.effects.length;if((this.renderGroup||s)&&(i=Wa.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const h=this.bounds;i.addFrame(h.minX,h.minY,h.maxX,h.maxY,this.groupTransform)}const o=this.children;for(let h=0;h<o.length;h++)o[h]._getGlobalBoundsRecursive(n,i,e)}if(s){let o=!1;const h=this.renderGroup||this.parentRenderGroup;for(let f=0;f<this.effects.length;f++)this.effects[f].addBounds&&(o||(o=!0,i.applyMatrix(h.worldTransform)),this.effects[f].addBounds(i,!0));o&&(i.applyMatrix(h.worldTransform.copyTo(GD).invert()),t.addBounds(i,this.relativeGroupTransform)),t.addBounds(i),Wa.return(i)}else this.renderGroup&&(t.addBounds(i,this.relativeGroupTransform),Wa.return(i))}};function Fd(n,t,e){e.clear();let i,s;return n.parent?t?i=n.parent.worldTransform:(s=Yi.get().identity(),i=Ng(n,s)):i=Pt.IDENTITY,KS(n,e,i,t),s&&Yi.return(s),e.isValid||e.set(0,0,0,0),e}function KS(n,t,e,i){var f,m;if(!n.visible||!n.measurable)return;let s;i?s=n.worldTransform:(n.updateLocalTransform(),s=Yi.get(),s.appendFrom(n.localTransform,e));const o=t,h=!!n.effects.length;if(h&&(t=Wa.get().clear()),n.boundsArea)t.addRect(n.boundsArea,s);else{n.bounds&&(t.matrix=s,t.addBounds(n.bounds));for(let g=0;g<n.children.length;g++)KS(n.children[g],t,s,i)}if(h){for(let g=0;g<n.effects.length;g++)(m=(f=n.effects[g]).addBounds)==null||m.call(f,t);o.addBounds(t,Pt.IDENTITY),Wa.return(t)}i||Yi.return(s)}function Ng(n,t){const e=n.parent;return e&&(Ng(e,t),e.updateLocalTransform(),t.append(e.localTransform)),t}function db(n,t){if(n===16777215||!t)return t;if(t===16777215||!n)return n;const e=n>>16&255,i=n>>8&255,s=n&255,o=t>>16&255,h=t>>8&255,f=t&255,m=e*o/255|0,g=i*h/255|0,b=s*f/255|0;return(m<<16)+(g<<8)+b}const zx=16777215;function Ad(n,t){return n===zx?t:t===zx?n:db(n,t)}function hh(n){return((n&255)<<16)+(n&65280)+(n>>16&255)}const WS={getGlobalAlpha(n){if(n)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,e=this.parent;for(;e;)t*=e.alpha,e=e.parent;return t},getGlobalTransform(n,t){if(t)return n.copyFrom(this.worldTransform);this.updateLocalTransform();const e=Ng(this,Yi.get().identity());return n.appendFrom(this.localTransform,e),Yi.return(e),n},getGlobalTint(n){if(n)return this.renderGroup?hh(this.renderGroup.worldColor):this.parentRenderGroup?hh(Ad(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,e=this.parent;for(;e;)t=Ad(t,e.localColor),e=e.parent;return hh(t)}};function zg(n,t,e){return t.clear(),e||(e=Pt.IDENTITY),QS(n,t,e,n,!0),t.isValid||t.set(0,0,0,0),t}function QS(n,t,e,i,s){var m,g;let o;if(s)o=Yi.get(),o=e.copyTo(o);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const b=n.localTransform;o=Yi.get(),o.appendFrom(b,e)}const h=t,f=!!n.effects.length;if(f&&(t=Wa.get().clear()),n.boundsArea)t.addRect(n.boundsArea,o);else{n.renderPipeId&&(t.matrix=o,t.addBounds(n.bounds));const b=n.children;for(let x=0;x<b.length;x++)QS(b[x],t,o,i,!1)}if(f){for(let b=0;b<n.effects.length;b++)(g=(m=n.effects[b]).addLocalBounds)==null||g.call(m,t,i);h.addBounds(t,Pt.IDENTITY),Wa.return(t)}Yi.return(o)}function pb(n,t){const e=n.children;for(let i=0;i<e.length;i++){const s=e[i],o=s.uid,h=(s._didViewChangeTick&65535)<<16|s._didContainerChangeTick&65535,f=t.index;(t.data[f]!==o||t.data[f+1]!==h)&&(t.data[t.index]=o,t.data[t.index+1]=h,t.didChange=!0),t.index=f+2,s.children.length&&pb(s,t)}return t.didChange}const ND=new Pt,ZS={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,t){const e=Math.sign(this.scale.x)||1;t!==0?this.scale.x=n/t*e:this.scale.x=e},_setHeight(n,t){const e=Math.sign(this.scale.y)||1;t!==0?this.scale.y=n/t*e:this.scale.y=e},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new ti});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didViewChangeTick&&(n.didChange=!0,n.data[0]=this._didViewChangeTick),pb(this,n),n.didChange&&zg(this,n.localBounds,ND),n.localBounds},getBounds(n,t){return Fd(this,n,t||new ti)}},JS={_onRender:null,set onRender(n){const t=this.renderGroup||this.parentRenderGroup;if(!n){this._onRender&&(t==null||t.removeOnRender(this)),this._onRender=null;return}this._onRender||t==null||t.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},$S={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(zD))}};function zD(n,t){return n._zIndex-t._zIndex}const tE={getGlobalPosition(n=new Xe,t=!1){return this.parent?this.parent.toGlobal(this._position,n,t):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,t,e=!1){const i=this.getGlobalTransform(Yi.get(),e);return t=i.apply(n,t),Yi.return(i),t},toLocal(n,t,e,i){t&&(n=t.toGlobal(n,e,i));const s=this.getGlobalTransform(Yi.get(),i);return e=s.applyInverse(n,e),Yi.return(s),e}};class mb{constructor(){this.uid=rn("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let LD=0;class eE{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this.textureStyle=new vs(this.textureOptions)}createTexture(t,e,i){const s=new Sn({...this.textureOptions,width:t,height:e,resolution:1,antialias:i,autoGarbageCollect:!1});return new Ct({source:s,label:`texturePool_${LD++}`})}getOptimalTexture(t,e,i=1,s){let o=Math.ceil(t*i-1e-6),h=Math.ceil(e*i-1e-6);o=Qu(o),h=Qu(h);const f=(o<<17)+(h<<1)+(s?1:0);this._texturePool[f]||(this._texturePool[f]=[]);let m=this._texturePool[f].pop();return m||(m=this.createTexture(o,h,s)),m.source._resolution=i,m.source.width=o/i,m.source.height=h/i,m.source.pixelWidth=o,m.source.pixelHeight=h,m.frame.x=0,m.frame.y=0,m.frame.width=t,m.frame.height=e,m.updateUvs(),this._poolKeyHash[m.uid]=f,m}getSameSizeTexture(t,e=!1){const i=t.source;return this.getOptimalTexture(t.width,t.height,i._resolution,e)}returnTexture(t,e=!1){const i=this._poolKeyHash[t.uid];e&&(t.source.style=this.textureStyle),this._texturePool[i].push(t)}clear(t){if(t=t!==!1,t)for(const e in this._texturePool){const i=this._texturePool[e];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this._texturePool={}}}const Vn=new eE;class nE{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Pt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new mb,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let i=0;i<e.length;i++){const s=e[i];s._updateFlags=15,this.addChild(s)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Vn.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const e=t.children;for(let i=0;i<e.length;i++)this.addChild(e[i])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const e=t.children;for(let i=0;i<e.length;i++)this.removeChild(e[i])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const e=this.root.children;for(let i=0;i<e.length;i++)this._getChildren(e[i],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;const i=t.children;for(let s=0;s<i.length;s++)this._getChildren(i[s],e);return e}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Pt),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Pt),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Pt),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function pg(n,t,e={}){for(const i in t)!e[i]&&t[i]!==void 0&&(n[i]=t[i])}const c0=new Fn(null),h0=new Fn(null),f0=new Fn(null,1,1),Cd=1,Lg=2,fh=4,HD=8;class kn extends ei{constructor(t={}){var e,i;super(),this.uid=rn("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new Pt,this.relativeGroupTransform=new Pt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Fn(this,0,0),this._scale=f0,this._pivot=h0,this._skew=c0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],pg(this,t,{children:!0,parent:!0,effects:!0}),(e=t.children)==null||e.forEach(s=>this.addChild(s)),(i=t.parent)==null||i.addChild(this)}static mixin(t){wt("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),De.mixin(kn,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||wt(Jt,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let s=0;s<t.length;s++)this.addChild(t[s]);return t[0]}const e=t[0],i=this.renderGroup||this.parentRenderGroup;return e.parent===this?(this.children.splice(this.children.indexOf(e),1),this.children.push(e),i&&(i.structureDidChange=!0),e):(e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e._updateFlags=15,i&&i.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),this._didViewChangeTick++,e._zIndex!==0&&e.depthOfChildModified(),e)}removeChild(...t){if(t.length>1){for(let s=0;s<t.length;s++)this.removeChild(t[s]);return t[0]}const e=t[0],i=this.children.indexOf(e);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(e):this.parentRenderGroup&&this.parentRenderGroup.removeChild(e),e.parentRenderLayer&&e.parentRenderLayer.detach(e),e.parent=null,this.emit("childRemoved",e,this,i),e.emit("removed",this)),e}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),this.renderGroup=mi.get(nE,this),this.groupTransform=Pt.IDENTITY,t==null||t.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),mi.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t==null||t.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Pt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*RS}set angle(t){this.rotation=t*MS}get pivot(){return this._pivot===h0&&(this._pivot=new Fn(this,0,0)),this._pivot}set pivot(t){this._pivot===h0&&(this._pivot=new Fn(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===c0&&(this._skew=new Fn(this,0,0)),this._skew}set skew(t){this._skew===c0&&(this._skew=new Fn(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===f0&&(this._scale=new Fn(this,1,1)),this._scale}set scale(t){this._scale===f0&&(this._scale=new Fn(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const i=this.getLocalBounds();typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,i.width),e!==void 0&&this._setHeight(e,i.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const e=this.localTransform,i=this._scale,s=this._pivot,o=this._position,h=i._x,f=i._y,m=s._x,g=s._y;e.a=this._cx*h,e.b=this._sx*h,e.c=this._cy*f,e.d=this._sy*f,e.tx=o._x-(m*e.a+g*e.c),e.ty=o._y-(m*e.b+g*e.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=Cd,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const i=Ce.shared.setValue(t??16777215).toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=Cd,this._onUpdate())}get tint(){return hh(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Lg,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const e=t?2:0;(this.localDisplayStatus&2)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=fh,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const e=t?0:4;(this.localDisplayStatus&4)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=fh,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const e=t?1:0;(this.localDisplayStatus&1)!==e&&(this._updateFlags|=fh,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){var s;if(this.destroyed)return;this.destroyed=!0;let e;if(this.children.length&&(e=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t==null?void 0:t.children)&&e)for(let o=0;o<e.length;++o)e[o].destroy(t);(s=this.renderGroup)==null||s.destroy(),this.renderGroup=null}}De.mixin(kn,kS,jS,tE,JS,ZS,YS,qS,$S,HS,VS,WS,XS);class $a extends kn{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new ti(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const e=this.bounds,{x:i,y:s}=t;return i>=e.minX&&i<=e.maxX&&s>=e.minY&&s<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){var e,i;super.destroy(t),this._bounds=null;for(const s in this._gpuData)(i=(e=this._gpuData[s]).destroy)==null||i.call(e);this._gpuData=null}collectRenderablesSimple(t,e,i){const{renderPipes:s}=e;s.blendMode.setBlendMode(this,this.groupBlendMode,t),s[this.renderPipeId].addRenderable(this,t),this.didViewUpdate=!1;const h=this.children,f=h.length;for(let m=0;m<f;m++)h[m].collectRenderables(t,e,i)}}class Di extends $a{constructor(t=Ct.EMPTY){t instanceof Ct&&(t={texture:t});const{texture:e=Ct.EMPTY,anchor:i,roundPixels:s,width:o,height:h,...f}=t;super({label:"Sprite",...f}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Fn({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=s??!1,o!==void 0&&(this.width=o),h!==void 0&&(this.height=h)}static from(t,e=!1){return t instanceof Ct?new Di(t):new Di(Ct.from(t,e))}set texture(t){t||(t=Ct.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return hb(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return wt("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,e=this._texture,i=this._bounds,{width:s,height:o}=e.orig;i.minX=-t._x*s,i.maxX=i.minX+s,i.minY=-t._y*o,i.maxY=i.minY+o}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(i)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),e!==void 0&&this._setHeight(e,this._texture.orig.height)}}const FD=new ti;function Hg(n,t,e){const i=FD;n.measurable=!0,Fd(n,e,i),t.addBoundsMask(i),n.measurable=!1}let d0=0;const Lx=500;function Xt(...n){d0!==Lx&&(d0++,d0===Lx?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...n))}function Fg(n,t,e){const i=Wa.get();n.measurable=!0;const s=Yi.get().identity(),o=iE(n,e,s);zg(n,i,o),n.measurable=!1,t.addBoundsMask(i),Yi.return(s),Wa.return(i)}function iE(n,t,e){return n?(n!==t&&(iE(n.parent,t,e),n.updateLocalTransform(),e.append(n.localTransform)),e):(Xt("Mask bounds, renderable is not inside the root container"),e)}class gb{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof Di),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){this.inverse||Hg(this.mask,t,e)}addLocalBounds(t,e){Fg(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Di}}gb.extension=q.MaskEffect;class _b{constructor(t){this.priority=0,this.pipe="colorMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}_b.extension=q.MaskEffect;class yb{constructor(t){this.priority=0,this.pipe="stencilMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){Hg(this.mask,t,e)}addLocalBounds(t,e){Fg(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof kn}}yb.extension=q.MaskEffect;const rE={createCanvas:(n,t)=>{const e=document.createElement("canvas");return e.width=n,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,t)=>fetch(n,t),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let Hx=rE;const pe={get(){return Hx},set(n){Hx=n}};class Qa extends Sn{constructor(t){t.resource||(t.resource=pe.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,i=this._resolution){const s=super.resize(t,e,i);return s&&this.resizeCanvas(),s}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Qa.extension=q.TextureSource;class Xo extends Sn{constructor(t){super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}Xo.extension=q.TextureSource;var Vl=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Vl||{});class ag{constructor(t,e=null,i=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=i,this._once=s}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const sE=class Ir{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ag(null,null,1/0),this.deltaMS=1/Ir.targetFPMS,this.elapsedMS=1/Ir.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=Vl.NORMAL){return this._addListener(new ag(t,e,i))}addOnce(t,e,i=Vl.NORMAL){return this._addListener(new ag(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const o=t-this._lastFrame|0;if(o<this._minElapsedMS)return;this._lastFrame=t-o%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Ir.targetFPMS;const i=this._head;let s=i.next;for(;s;)s=s.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,Ir.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Ir._shared){const t=Ir._shared=new Ir;t.autoStart=!0,t._protected=!0}return Ir._shared}static get system(){if(!Ir._system){const t=Ir._system=new Ir;t.autoStart=!0,t._protected=!0}return Ir._system}};sE.targetFPMS=.06;let Pn=sE,p0;async function bb(){return p0??(p0=(async()=>{var h;const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise(f=>{const m=document.createElement("video");m.onloadeddata=()=>f(m),m.onerror=()=>f(null),m.autoplay=!1,m.crossOrigin="anonymous",m.preload="auto",m.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",m.load()});if(!e)return"premultiply-alpha-on-upload";const i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const o=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,o),t.deleteFramebuffer(s),t.deleteTexture(i),(h=t.getExtension("WEBGL_lose_context"))==null||h.loseContext(),o[0]<=o[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),p0}const Vg=class aE extends Sn{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...aE.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=Pn.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await bb(),this._load=new Promise((i,s)=>{this.isValid?i(this):(this._resolve=i,this._reject=s,e.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Pn.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Pn.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Pn.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};Vg.extension=q.TextureSource;Vg.defaultOptions={...Sn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Vg.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let _d=Vg;const gs=(n,t,e=!1)=>(Array.isArray(n)||(n=[n]),t?n.map(i=>typeof i=="string"||e?t(i):i):n);class VD{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||Xt(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=gs(t);let s;for(let m=0;m<this.parsers.length;m++){const g=this.parsers[m];if(g.test(e)){s=g.getCacheableAssets(i,e);break}}const o=new Map(Object.entries(s||{}));s||i.forEach(m=>{o.set(m,e)});const h=[...o.keys()],f={cacheKeys:h,keys:i};i.forEach(m=>{this._cacheMap.set(m,f)}),h.forEach(m=>{const g=s?s[m]:e;this._cache.has(m)&&this._cache.get(m)!==g&&Xt("[Cache] already has key:",m),this._cache.set(m,o.get(m))})}remove(t){if(!this._cacheMap.has(t)){Xt(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(s=>{this._cache.delete(s)}),e.keys.forEach(s=>{this._cacheMap.delete(s)})}get parsers(){return this._parsers}}const Qe=new VD,iy=[];De.handleByList(q.TextureSource,iy);function kD(n={}){return vb(n)}function vb(n={}){const t=n&&n.resource,e=t?n.resource:n,i=t?n:{resource:n};for(let s=0;s<iy.length;s++){const o=iy[s];if(o.test(e))return new o(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function lE(n={},t=!1){const e=n&&n.resource,i=e?n.resource:n,s=e?n:{resource:n};if(!t&&Qe.has(i))return Qe.get(i);const o=new Ct({source:vb(s)});return o.on("destroy",()=>{Qe.has(i)&&Qe.remove(i)}),t||Qe.set(i,o),o}function oE(n,t=!1){return typeof n=="string"?Qe.get(n):n instanceof Sn?new Ct({source:n}):lE(n,t)}Ct.from=oE;Sn.from=vb;De.add(gb,_b,yb,_d,Xo,Qa,Pg);var Mr=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(Mr||{});function ia(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function Jf(n){return n.split("?")[0].split("#")[0]}function XD(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ID(n,t,e){return n.replace(new RegExp(XD(t),"g"),e)}function YD(n,t){let e="",i=0,s=-1,o=0,h=-1;for(let f=0;f<=n.length;++f){if(f<n.length)h=n.charCodeAt(f);else{if(h===47)break;h=47}if(h===47){if(!(s===f-1||o===1))if(s!==f-1&&o===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const m=e.lastIndexOf("/");if(m!==e.length-1){m===-1?(e="",i=0):(e=e.slice(0,m),i=e.length-1-e.lastIndexOf("/")),s=f,o=0;continue}}else if(e.length===2||e.length===1){e="",i=0,s=f,o=0;continue}}}else e.length>0?e+=`/${n.slice(s+1,f)}`:e=n.slice(s+1,f),i=f-s-1;s=f,o=0}else h===46&&o!==-1?++o:o=-1}return e}const gi={toPosix(n){return ID(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){ia(n),n=this.toPosix(n);const t=/^file:\/\/\//.exec(n);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(n);return e?e[0]:""},toAbsolute(n,t,e){if(ia(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const i=Jf(this.toPosix(t??pe.get().getBaseUrl())),s=Jf(this.toPosix(e??this.rootname(i)));return n=this.toPosix(n),n.startsWith("/")?gi.join(s,n.slice(1)):this.isAbsolute(n)?n:this.join(i,n)},normalize(n){if(ia(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let t="";const e=n.startsWith("/");this.hasProtocol(n)&&(t=this.rootname(n),n=n.slice(t.length));const i=n.endsWith("/");return n=YD(n),n.length>0&&i&&(n+="/"),e?`/${n}`:t+n},isAbsolute(n){return ia(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let t;for(let e=0;e<n.length;++e){const i=n[e];if(ia(i),i.length>0)if(t===void 0)t=i;else{const s=n[e-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(n){if(ia(n),n.length===0)return".";n=this.toPosix(n);let t=n.charCodeAt(0);const e=t===47;let i=-1,s=!0;const o=this.getProtocol(n),h=n;n=n.slice(o.length);for(let f=n.length-1;f>=1;--f)if(t=n.charCodeAt(f),t===47){if(!s){i=f;break}}else s=!1;return i===-1?e?"/":this.isUrl(h)?o+n:o:e&&i===1?"//":o+n.slice(0,i)},rootname(n){ia(n),n=this.toPosix(n);let t="";if(n.startsWith("/")?t="/":t=this.getProtocol(n),this.isUrl(n)){const e=n.indexOf("/",t.length);e!==-1?t=n.slice(0,e):t=n,t.endsWith("/")||(t+="/")}return t},basename(n,t){ia(n),t&&ia(t),n=Jf(this.toPosix(n));let e=0,i=-1,s=!0,o;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";let h=t.length-1,f=-1;for(o=n.length-1;o>=0;--o){const m=n.charCodeAt(o);if(m===47){if(!s){e=o+1;break}}else f===-1&&(s=!1,f=o+1),h>=0&&(m===t.charCodeAt(h)?--h===-1&&(i=o):(h=-1,i=f))}return e===i?i=f:i===-1&&(i=n.length),n.slice(e,i)}for(o=n.length-1;o>=0;--o)if(n.charCodeAt(o)===47){if(!s){e=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":n.slice(e,i)},extname(n){ia(n),n=Jf(this.toPosix(n));let t=-1,e=0,i=-1,s=!0,o=0;for(let h=n.length-1;h>=0;--h){const f=n.charCodeAt(h);if(f===47){if(!s){e=h+1;break}continue}i===-1&&(s=!1,i=h+1),f===46?t===-1?t=h:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||i===-1||o===0||o===1&&t===i-1&&t===e+1?"":n.slice(t,i)},parse(n){ia(n);const t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;n=Jf(this.toPosix(n));let e=n.charCodeAt(0);const i=this.isAbsolute(n);let s;t.root=this.rootname(n),i||this.hasProtocol(n)?s=1:s=0;let o=-1,h=0,f=-1,m=!0,g=n.length-1,b=0;for(;g>=s;--g){if(e=n.charCodeAt(g),e===47){if(!m){h=g+1;break}continue}f===-1&&(m=!1,f=g+1),e===46?o===-1?o=g:b!==1&&(b=1):o!==-1&&(b=-1)}return o===-1||f===-1||b===0||b===1&&o===f-1&&o===h+1?f!==-1&&(h===0&&i?t.base=t.name=n.slice(1,f):t.base=t.name=n.slice(h,f)):(h===0&&i?(t.name=n.slice(1,o),t.base=n.slice(1,f)):(t.name=n.slice(h,o),t.base=n.slice(h,f)),t.ext=n.slice(o,f)),t.dir=this.dirname(n),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function uE(n,t,e,i,s){const o=t[e];for(let h=0;h<o.length;h++){const f=o[h];e<t.length-1?uE(n.replace(i[e],f),t,e+1,i,s):s.push(n.replace(i[e],f))}}function cE(n){const t=/\{(.*?)\}/g,e=n.match(t),i=[];if(e){const s=[];e.forEach(o=>{const h=o.substring(1,o.length-1).split(",");s.push(h)}),uE(n,s,0,e,i)}else i.push(n);return i}const Bd=n=>!Array.isArray(n);class Yo{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){const{alias:e,src:i}=t;return gs(e||i,o=>typeof o=="string"?o:Array.isArray(o)?o.map(h=>(h==null?void 0:h.src)??h):o!=null&&o.src?o.src:o,!0)}addManifest(t){this._manifest&&Xt("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];let s=e;Array.isArray(e)||(s=Object.entries(e).map(([o,h])=>typeof h=="string"||Array.isArray(h)?{alias:o,src:h}:{alias:o,...h})),s.forEach(o=>{const h=o.src,f=o.alias;let m;if(typeof f=="string"){const g=this._createBundleAssetId(t,f);i.push(g),m=[f,g]}else{const g=f.map(b=>this._createBundleAssetId(t,b));i.push(...g),m=[...f,...g]}this.add({...o,alias:m,src:h})}),this._bundles[t]=i}add(t){const e=[];Array.isArray(t)?e.push(...t):e.push(t);let i;i=o=>{this.hasKey(o)&&Xt(`[Resolver] already has key: ${o} overwriting`)},gs(e).forEach(o=>{const{src:h}=o;let{data:f,format:m,loadParser:g}=o;const b=gs(h).map(A=>typeof A=="string"?cE(A):Array.isArray(A)?A:[A]),x=this.getAlias(o);Array.isArray(x)?x.forEach(i):i(x);const E=[];b.forEach(A=>{A.forEach(R=>{let D={};if(typeof R!="object"){D.src=R;for(let B=0;B<this._parsers.length;B++){const P=this._parsers[B];if(P.test(R)){D=P.parse(R);break}}}else f=R.data??f,m=R.format??m,g=R.loadParser??g,D={...D,...R};if(!x)throw new Error(`[Resolver] alias is undefined for this asset: ${D.src}`);D=this._buildResolvedAsset(D,{aliases:x,data:f,format:m,loadParser:g}),E.push(D)})}),x.forEach(A=>{this._assetMap[A]=E})})}resolveBundle(t){const e=Bd(t);t=gs(t);const i={};return t.forEach(s=>{const o=this._bundles[s];if(o){const h=this.resolve(o),f={};for(const m in h){const g=h[m];f[this._extractAssetIdFromBundle(s,m)]=g}i[s]=f}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const s in e)i[s]=e[s].src;return i}return e.src}resolve(t){const e=Bd(t);t=gs(t);const i={};return t.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let o=this._assetMap[s];const h=this._getPreferredOrder(o);h==null||h.priority.forEach(f=>{h.params[f].forEach(m=>{const g=o.filter(b=>b[f]?b[f]===m:!1);g.length&&(o=g)})}),this._resolverHash[s]=o[0]}else this._resolverHash[s]=this._buildResolvedAsset({alias:[s],src:s},{});i[s]=this._resolverHash[s]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[e],s=this._preferredOrder.find(o=>o.params.format.includes(i.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){const{aliases:i,data:s,loadParser:o,format:h}=e;return(this._basePath||this._rootPath)&&(t.src=gi.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...s||{},...t.data},t.loadParser=o??t.loadParser,t.format=h??t.format??hE(t.src),t}}Yo.RETINA_PREFIX=/@([0-9\.]+)x/;function hE(n){return n.split(".").pop().split("?").shift().split("#").shift()}const mg=(n,t)=>{const e=t.split("?")[1];return e&&(n+=`?${e}`),n},fE=class cd{constructor(t,e){this.linkedSheets=[];let i=t;(t==null?void 0:t.source)instanceof Sn&&(i={texture:t,data:e});const{texture:s,data:o,cachePrefix:h=""}=i;this.cachePrefix=h,this._texture=s instanceof Ct?s:null,this.textureSource=s.source,this.textures={},this.animations={},this.data=o;const f=parseFloat(o.meta.scale);f?(this.resolution=f,s.source.resolution=this.resolution):this.resolution=s.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=cd.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const i=cd.BATCH_SIZE;for(;e-t<i&&e<this._frameKeys.length;){const s=this._frameKeys[e],o=this._frames[s],h=o.frame;if(h){let f=null,m=null;const g=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,b=new Oe(0,0,Math.floor(g.w)/this.resolution,Math.floor(g.h)/this.resolution);o.rotated?f=new Oe(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.h)/this.resolution,Math.floor(h.w)/this.resolution):f=new Oe(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(m=new Oe(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution)),this.textures[s]=new Ct({source:this.textureSource,frame:f,orig:b,trim:m,rotate:o.rotated?2:0,defaultAnchor:o.anchor,defaultBorders:o.borders,label:s.toString()})}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const s=t[e][i];this.animations[e].push(this.textures[s])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*cd.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*cd.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};fE.BATCH_SIZE=1e3;let ry=fE;const qD=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function dE(n,t,e){const i={};if(n.forEach(s=>{i[s]=t}),Object.keys(t.textures).forEach(s=>{i[`${t.cachePrefix}${s}`]=t.textures[s]}),!e){const s=gi.dirname(n[0]);t.linkedSheets.forEach((o,h)=>{const f=dE([`${s}/${t.data.meta.related_multi_packs[h]}`],o,!0);Object.assign(i,f)})}return i}const pE={extension:q.Asset,cache:{test:n=>n instanceof ry,getCacheableAssets:(n,t)=>dE(n,t,!1)},resolver:{extension:{type:q.ResolveParser,name:"resolveSpritesheet"},test:n=>{const e=n.split("?")[0].split("."),i=e.pop(),s=e.pop();return i==="json"&&qD.includes(s)},parse:n=>{var e;const t=n.split(".");return{resolution:parseFloat(((e=Yo.RETINA_PREFIX.exec(n))==null?void 0:e[1])??"1"),format:t[t.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:q.LoadParser,priority:Mr.Normal,name:"spritesheetLoader"},async testParse(n,t){return gi.extname(t.src).toLowerCase()===".json"&&!!n.frames},async parse(n,t,e){var x,E;const{texture:i,imageFilename:s,textureOptions:o,cachePrefix:h}=(t==null?void 0:t.data)??{};let f=gi.dirname(t.src);f&&f.lastIndexOf("/")!==f.length-1&&(f+="/");let m;if(i instanceof Ct)m=i;else{const A=mg(f+(s??n.meta.image),t.src);m=(await e.load([{src:A,data:o}]))[A]}const g=new ry({texture:m.source,data:n,cachePrefix:h});await g.parse();const b=(x=n==null?void 0:n.meta)==null?void 0:x.related_multi_packs;if(Array.isArray(b)){const A=[];for(const D of b){if(typeof D!="string")continue;let B=f+D;(E=t.data)!=null&&E.ignoreMultiPack||(B=mg(B,t.src),A.push(e.load({src:B,data:{textureOptions:o,ignoreMultiPack:!0}})))}const R=await Promise.all(A);g.linkedSheets=R,R.forEach(D=>{D.linkedSheets=[g].concat(g.linkedSheets.filter(B=>B!==D))})}return g},async unload(n,t,e){await e.unload(n.textureSource._sourceOrigin),n.destroy(!1)}}};De.add(pE);class Ch{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Ch.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Xe,this.page=new Xe,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,i,s,o){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}var m0=/iPhone/i,Fx=/iPod/i,Vx=/iPad/i,kx=/\biOS-universal(?:.+)Mac\b/i,g0=/\bAndroid(?:.+)Mobile\b/i,Xx=/Android/i,eh=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,zm=/Silk/i,Gl=/Windows Phone/i,Ix=/\bWindows(?:.+)ARM\b/i,Yx=/BlackBerry/i,qx=/BB10/i,jx=/Opera Mini/i,Kx=/\b(CriOS|Chrome)(?:.+)Mobile/i,Wx=/Mobile(?:.+)Firefox\b/i,Qx=function(n){return typeof n<"u"&&n.platform==="MacIntel"&&typeof n.maxTouchPoints=="number"&&n.maxTouchPoints>1&&typeof MSStream>"u"};function jD(n){return function(t){return t.test(n)}}function Zx(n){var t={userAgent:"",platform:"",maxTouchPoints:0};!n&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof n=="string"?t.userAgent=n:n&&n.userAgent&&(t={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0});var e=t.userAgent,i=e.split("[FBAN");typeof i[1]<"u"&&(e=i[0]),i=e.split("Twitter"),typeof i[1]<"u"&&(e=i[0]);var s=jD(e),o={apple:{phone:s(m0)&&!s(Gl),ipod:s(Fx),tablet:!s(m0)&&(s(Vx)||Qx(t))&&!s(Gl),universal:s(kx),device:(s(m0)||s(Fx)||s(Vx)||s(kx)||Qx(t))&&!s(Gl)},amazon:{phone:s(eh),tablet:!s(eh)&&s(zm),device:s(eh)||s(zm)},android:{phone:!s(Gl)&&s(eh)||!s(Gl)&&s(g0),tablet:!s(Gl)&&!s(eh)&&!s(g0)&&(s(zm)||s(Xx)),device:!s(Gl)&&(s(eh)||s(zm)||s(g0)||s(Xx))||s(/\bokhttp\b/i)},windows:{phone:s(Gl),tablet:s(Ix),device:s(Gl)||s(Ix)},other:{blackberry:s(Yx),blackberry10:s(qx),opera:s(jx),firefox:s(Wx),chrome:s(Kx),device:s(Yx)||s(qx)||s(jx)||s(Wx)||s(Kx)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}const KD=Zx.default??Zx,mE=KD(globalThis.navigator),WD=9,Lm=100,QD=0,ZD=0,Jx=2,$x=1,JD=-1e3,$D=-1e3,t4=2,xb=class gE{constructor(t,e=mE){this._mobileInfo=e,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(e.tablet||e.phone)&&this._createTouchHook(),this._renderer=t}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}_createTouchHook(){const t=document.createElement("button");t.style.width=`${$x}px`,t.style.height=`${$x}px`,t.style.position="absolute",t.style.top=`${JD}px`,t.style.left=`${$D}px`,t.style.zIndex=t4.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.width=`${Lm}px`,this._div.style.height=`${Lm}px`,this._div.style.position="absolute",this._div.style.top=`${QD}px`,this._div.style.left=`${ZD}px`,this._div.style.zIndex=Jx.toString(),this._div.style.pointerEvents="none"),this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._deactivateOnMouseMove&&(this._onMouseMove=this._onMouseMove.bind(this),globalThis.document.addEventListener("mousemove",this._onMouseMove,!0));const t=this._renderer.view.canvas;if(t.parentNode)t.parentNode.appendChild(this._div),this._initAccessibilitySetup();else{const e=new MutationObserver(()=>{t.parentNode&&(t.parentNode.appendChild(this._div),e.disconnect(),this._initAccessibilitySetup())});e.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(!(!this._isActive||this._isMobileAccessibility)){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this);for(const t of this._children)t._accessibleDiv&&t._accessibleDiv.parentNode&&(t._accessibleDiv.parentNode.removeChild(t._accessibleDiv),t._accessibleDiv=null),t._accessibleActive=!1;this._pool.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div),this._pool=[],this._children=[]}}_updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&(t._accessibleActive||this._addChild(t),t._renderId=this._renderId);const e=t.children;if(e)for(let i=0;i<e.length;i++)this._updateAccessibleObjects(e[i])}init(t){const i={accessibilityOptions:{...gE.defaultOptions,...(t==null?void 0:t.accessibilityOptions)||{}}};this.debug=i.accessibilityOptions.debug,this._activateOnTab=i.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=i.accessibilityOptions.deactivateOnMouseMove,i.accessibilityOptions.enabledByDefault?this._activate():this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._renderer.runners.postrender.remove(this)}postrender(){const t=performance.now();if(this._mobileInfo.android.device&&t<this._androidUpdateCount||(this._androidUpdateCount=t+this._androidUpdateFrequency,!this._renderer.renderingToScreen||!this._renderer.view.canvas))return;const e=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(const i of this._children)i._renderId===this._renderId&&e.add(this._children.indexOf(i))}for(let i=this._children.length-1;i>=0;i--){const s=this._children[i];e.has(i)||(s._accessibleDiv&&s._accessibleDiv.parentNode&&(s._accessibleDiv.parentNode.removeChild(s._accessibleDiv),this._pool.push(s._accessibleDiv),s._accessibleDiv=null),s._accessibleActive=!1,fb(this._children,i,1))}if(this._renderer.renderingToScreen){const{x:i,y:s,width:o,height:h}=this._renderer.screen,f=this._div;f.style.left=`${i}px`,f.style.top=`${s}px`,f.style.width=`${o}px`,f.style.height=`${h}px`}for(let i=0;i<this._children.length;i++){const s=this._children[i];if(!s._accessibleActive||!s._accessibleDiv)continue;const o=s._accessibleDiv,h=s.hitArea||s.getBounds().rectangle;if(s.hitArea){const f=s.worldTransform,m=this._renderer.resolution,g=this._renderer.resolution;o.style.left=`${(f.tx+h.x*f.a)*m}px`,o.style.top=`${(f.ty+h.y*f.d)*g}px`,o.style.width=`${h.width*f.a*m}px`,o.style.height=`${h.height*f.d*g}px`}else{this._capHitArea(h);const f=this._renderer.resolution,m=this._renderer.resolution;o.style.left=`${h.x*f}px`,o.style.top=`${h.y*m}px`,o.style.width=`${h.width*f}px`,o.style.height=`${h.height*m}px`}}this._renderId++}_updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}_capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:i}=this._renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>i&&(t.height=i-t.y)}_addChild(t){let e=this._pool.pop();e||(t.accessibleType==="button"?e=document.createElement("button"):(e=document.createElement(t.accessibleType),e.style.cssText=`
                        color: transparent;
                        pointer-events: none;
                        padding: 0;
                        margin: 0;
                        border: 0;
                        outline: 0;
                        background: transparent;
                        box-sizing: border-box;
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                        -ms-user-select: none;
                    `,t.accessibleText&&(e.innerText=t.accessibleText)),e.style.width=`${Lm}px`,e.style.height=`${Lm}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=Jx.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`container ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this._updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.container=t,this._children.push(t),this._div.appendChild(t._accessibleDiv),t.interactive&&(t._accessibleDiv.tabIndex=t.tabIndex)}_dispatchEvent(t,e){const{container:i}=t.target,s=this._renderer.events.rootBoundary,o=Object.assign(new Ch(s),{target:i});s.rootTarget=this._renderer.lastObjectRendered,e.forEach(h=>s.dispatchEvent(o,h))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode!==WD||!this._activateOnTab||this._activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._div=null,this._pool=null,this._children=null,this._renderer=null,this._activateOnTab&&globalThis.removeEventListener("keydown",this._onKeyDown)}setAccessibilityEnabled(t){t?this._activate():this._deactivate()}};xb.extension={type:[q.WebGLSystem,q.WebGPUSystem],name:"accessibility"};xb.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};let e4=xb;const n4={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_accessibleActive:!1,_accessibleDiv:null,_renderId:-1},_0=Object.create(null),t1=Object.create(null);function xh(n,t){let e=t1[n];return e===void 0&&(_0[t]===void 0&&(_0[t]=1),t1[n]=e=_0[t]++),e}let nh;function Sb(){return(!nh||nh!=null&&nh.isContextLost())&&(nh=pe.get().createCanvas().getContext("webgl",{})),nh}let Hm;function _E(){if(!Hm){Hm="mediump";const n=Sb();n&&n.getShaderPrecisionFormat&&(Hm=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?"highp":"mediump")}return Hm}function yE(n,t,e){return t?n:e?(n=n.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${n}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${n}
        `}function bE(n,t,e){const i=e?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(n.substring(0,9)!=="precision"){let s=e?t.requestedFragmentPrecision:t.requestedVertexPrecision;return s==="highp"&&i!=="highp"&&(s="mediump"),`precision ${s} float;
${n}`}else if(i!=="highp"&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}function vE(n,t){return t?`#version 300 es
${n}`:n}const i4={},r4={};function xE(n,{name:t="pixi-program"},e=!0){t=t.replace(/\s+/g,"-"),t+=e?"-fragment":"-vertex";const i=e?i4:r4;return i[t]?(i[t]++,t+=`-${i[t]}`):i[t]=1,n.indexOf("#define SHADER_NAME")!==-1?n:`${`#define SHADER_NAME ${t}`}
${n}`}function SE(n,t){return t?n.replace("#version 300 es",""):n}const y0={stripVersion:SE,ensurePrecision:bE,addProgramDefines:yE,setProgramName:xE,insertVersion:vE},b0=Object.create(null),EE=class sy{constructor(t){t={...sy.defaultOptions,...t};const e=t.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:e,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:_E()},setProgramName:{name:t.name},addProgramDefines:e,insertVersion:e};let s=t.fragment,o=t.vertex;Object.keys(y0).forEach(h=>{const f=i[h];s=y0[h](s,f,!0),o=y0[h](o,f,!1)}),this.fragment=s,this.vertex=o,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=xh(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(t){const e=`${t.vertex}:${t.fragment}`;return b0[e]||(b0[e]=new sy(t)),b0[e]}};EE.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let jr=EE;const e1={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function kl(n){return e1[n]??e1.float32}const s4={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function TE({source:n,entryPoint:t}){const e={},i=n.indexOf(`fn ${t}`);if(i!==-1){const s=n.indexOf("->",i);if(s!==-1){const o=n.substring(i,s),h=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let f;for(;(f=h.exec(o))!==null;){const m=s4[f[3]]??"float32";e[f[2]]={location:parseInt(f[1],10),format:m,stride:kl(m).stride,offset:0,instance:!1,start:0}}}}return e}function lg(n){var x,E;const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,e=/@group\((\d+)\)/,i=/@binding\((\d+)\)/,s=/var(<[^>]+>)? (\w+)/,o=/:\s*(\w+)/,h=/struct\s+(\w+)\s*{([^}]+)}/g,f=/(\w+)\s*:\s*([\w\<\>]+)/g,m=/struct\s+(\w+)/,g=(x=n.match(t))==null?void 0:x.map(A=>({group:parseInt(A.match(e)[1],10),binding:parseInt(A.match(i)[1],10),name:A.match(s)[2],isUniform:A.match(s)[1]==="<uniform>",type:A.match(o)[1]}));if(!g)return{groups:[],structs:[]};const b=((E=n.match(h))==null?void 0:E.map(A=>{const R=A.match(m)[1],D=A.match(f).reduce((B,P)=>{const[G,H]=P.split(":");return B[G.trim()]=H.trim(),B},{});return D?{name:R,members:D}:null}).filter(({name:A})=>g.some(R=>R.type===A)))??[];return{groups:g,structs:b}}var oh=(n=>(n[n.VERTEX=1]="VERTEX",n[n.FRAGMENT=2]="FRAGMENT",n[n.COMPUTE=4]="COMPUTE",n))(oh||{});function AE({groups:n}){const t=[];for(let e=0;e<n.length;e++){const i=n[e];t[i.group]||(t[i.group]=[]),i.isUniform?t[i.group].push({binding:i.binding,visibility:oh.VERTEX|oh.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?t[i.group].push({binding:i.binding,visibility:oh.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"&&t[i.group].push({binding:i.binding,visibility:oh.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function CE({groups:n}){const t=[];for(let e=0;e<n.length;e++){const i=n[e];t[i.group]||(t[i.group]={}),t[i.group][i.name]=i.binding}return t}function BE(n,t){const e=new Set,i=new Set,s=[...n.structs,...t.structs].filter(h=>e.has(h.name)?!1:(e.add(h.name),!0)),o=[...n.groups,...t.groups].filter(h=>{const f=`${h.name}-${h.binding}`;return i.has(f)?!1:(i.add(f),!0)});return{structs:s,groups:o}}const v0=Object.create(null);class Dr{constructor(t){var f,m;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:e,vertex:i,layout:s,gpuLayout:o,name:h}=t;if(this.name=h,this.fragment=e,this.vertex=i,e.source===i.source){const g=lg(e.source);this.structsAndGroups=g}else{const g=lg(i.source),b=lg(e.source);this.structsAndGroups=BE(g,b)}this.layout=s??CE(this.structsAndGroups),this.gpuLayout=o??AE(this.structsAndGroups),this.autoAssignGlobalUniforms=((f=this.layout[0])==null?void 0:f.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((m=this.layout[1])==null?void 0:m.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:e}=this,i=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=xh(i,"program")}get attributeData(){return this._attributeData??(this._attributeData=TE(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return v0[e]||(v0[e]=new Dr(t)),v0[e]}}const Eb=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],RE=Eb.reduce((n,t)=>(n[t]=!0,n),{});function ME(n,t){switch(n){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const DE=class wE{constructor(t,e){this._touched=0,this.uid=rn("uniform"),this._resourceType="uniformGroup",this._resourceId=rn("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,e={...wE.defaultOptions,...e},this.uniformStructures=t;const i={};for(const s in t){const o=t[s];if(o.name=s,o.size=o.size??1,!RE[o.type])throw new Error(`Uniform type ${o.type} is not supported. Supported uniform types are: ${Eb.join(", ")}`);o.value??(o.value=ME(o.type,o.size)),i[s]=o.value}this.uniforms=i,this._dirtyId=1,this.ubo=e.ubo,this.isStatic=e.isStatic,this._signature=xh(Object.keys(i).map(s=>`${s}-${t[s].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};DE.defaultOptions={ubo:!1,isStatic:!1};let Xn=DE;class Za{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const i in t){const s=t[i];this.setResource(s,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const i in this.resources)t[e++]=this.resources[i]._resourceId;this._key=t.join("|")}setResource(t,e){var s,o;const i=this.resources[e];t!==i&&(i&&((s=t.off)==null||s.call(t,"change",this.onResourceChange,this)),(o=t.on)==null||o.call(t,"change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const i in e)e[i]._touched=t}destroy(){var e;const t=this.resources;for(const i in t){const s=t[i];(e=s.off)==null||e.call(s,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const i in e)e[i]===t&&(e[i]=null)}else this._updateKey()}}var Br=(n=>(n[n.WEBGL=1]="WEBGL",n[n.WEBGPU=2]="WEBGPU",n[n.BOTH=3]="BOTH",n))(Br||{});class Kr extends ei{constructor(t){super(),this.uid=rn("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:e,glProgram:i,groups:s,resources:o,compatibleRenderers:h,groupMap:f}=t;this.gpuProgram=e,this.glProgram=i,h===void 0&&(h=0,e&&(h|=Br.WEBGPU),i&&(h|=Br.WEBGL)),this.compatibleRenderers=h;const m={};if(!o&&!s&&(o={}),o&&s)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&s&&!f)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&s&&f)for(const g in f)for(const b in f[g]){const x=f[g][b];m[x]={group:g,binding:b,name:x}}else if(e&&s&&!f){const g=e.structsAndGroups.groups;f={},g.forEach(b=>{f[b.group]=f[b.group]||{},f[b.group][b.binding]=b.name,m[b.name]=b})}else if(o){s={},f={},e&&e.structsAndGroups.groups.forEach(x=>{f[x.group]=f[x.group]||{},f[x.group][x.binding]=x.name,m[x.name]=x});let g=0;for(const b in o)m[b]||(s[99]||(s[99]=new Za,this._ownedBindGroups.push(s[99])),m[b]={group:99,binding:g,name:b},f[99]=f[99]||{},f[99][g]=b,g++);for(const b in o){const x=b;let E=o[b];!E.source&&!E._resourceType&&(E=new Xn(E));const A=m[x];A&&(s[A.group]||(s[A.group]=new Za,this._ownedBindGroups.push(s[A.group])),s[A.group].setResource(E,A.binding))}}this.groups=s,this._uniformBindMap=f,this.resources=this._buildResourceAccessor(s,m)}addResource(t,e,i){var s,o;(s=this._uniformBindMap)[e]||(s[e]={}),(o=this._uniformBindMap[e])[i]||(o[i]=t),this.groups[e]||(this.groups[e]=new Za,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){const i={};for(const s in e){const o=e[s];Object.defineProperty(i,o.name,{get(){return t[o.group].getResource(o.binding)},set(h){t[o.group].setResource(h,o.binding)}})}return i}destroy(t=!1){var e,i;this.emit("destroy",this),t&&((e=this.gpuProgram)==null||e.destroy(),(i=this.glProgram)==null||i.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(s=>{s.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:e,gl:i,...s}=t;let o,h;return e&&(o=Dr.from(e)),i&&(h=jr.from(i)),new Kr({gpuProgram:o,glProgram:h,...s})}}const a4={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},x0=0,S0=1,E0=2,T0=3,A0=4,C0=5,ay=class UE{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<x0)}set blend(t){!!(this.data&1<<x0)!==t&&(this.data^=1<<x0)}get offsets(){return!!(this.data&1<<S0)}set offsets(t){!!(this.data&1<<S0)!==t&&(this.data^=1<<S0)}set cullMode(t){if(t==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=t==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<E0)}set culling(t){!!(this.data&1<<E0)!==t&&(this.data^=1<<E0)}get depthTest(){return!!(this.data&1<<T0)}set depthTest(t){!!(this.data&1<<T0)!==t&&(this.data^=1<<T0)}get depthMask(){return!!(this.data&1<<C0)}set depthMask(t){!!(this.data&1<<C0)!==t&&(this.data^=1<<C0)}get clockwiseFrontFace(){return!!(this.data&1<<A0)}set clockwiseFrontFace(t){!!(this.data&1<<A0)!==t&&(this.data^=1<<A0)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!=="none",this._blendMode=t,this._blendModeId=a4[t]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new UE;return t.depthTest=!1,t.blend=!0,t}};ay.default2d=ay.for2d();let Yr=ay;const OE=class ly extends Kr{constructor(t){t={...ly.defaultOptions,...t},super(t),this.enabled=!0,this._state=Yr.for2d(),this.blendMode=t.blendMode,this.padding=t.padding,typeof t.antialias=="boolean"?this.antialias=t.antialias?"on":"off":this.antialias=t.antialias,this.resolution=t.resolution,this.blendRequired=t.blendRequired,this.clipToViewport=t.clipToViewport,this.addResource("uTexture",0,1)}apply(t,e,i,s){t.applyFilter(this,e,i,s)}get blendMode(){return this._state.blendMode}set blendMode(t){this._state.blendMode=t}static from(t){const{gpu:e,gl:i,...s}=t;let o,h;return e&&(o=Dr.from(e)),i&&(h=jr.from(i)),new ly({gpuProgram:o,glProgram:h,...s})}};OE.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let qi=OE;var PE=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uBlend;

uniform sampler2D uTexture;
uniform sampler2D uBackTexture;

{FUNCTIONS}

void main()
{ 
    vec4 back = texture(uBackTexture, vTextureCoord);
    vec4 front = texture(uTexture, vTextureCoord);
    float blendedAlpha = front.a + back.a * (1.0 - front.a);
    
    {MAIN}
}
`,GE=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 backgroundUv;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,NE=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlendUniforms {
  uBlend:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(0) @binding(3) var uBackTexture: texture_2d<f32>;

@group(1) @binding(0) var<uniform> blendUniforms : BlendUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

{FUNCTIONS}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>
) -> @location(0) vec4<f32> {


   var back =  textureSample(uBackTexture, uSampler, uv);
   var front = textureSample(uTexture, uSampler, uv);
   var blendedAlpha = front.a + back.a * (1.0 - front.a);
   
   var out = vec4<f32>(0.0,0.0,0.0,0.0);

   {MAIN}

   return out;
}`;class Gn extends qi{constructor(t){const e=t.gpu,i=n1({source:NE,...e}),s=Dr.from({vertex:{source:i,entryPoint:"mainVertex"},fragment:{source:i,entryPoint:"mainFragment"}}),o=t.gl,h=n1({source:PE,...o}),f=jr.from({vertex:GE,fragment:h}),m=new Xn({uBlend:{value:1,type:"f32"}});super({gpuProgram:s,glProgram:f,blendRequired:!0,resources:{blendUniforms:m,uBackTexture:Ct.EMPTY}})}}function n1(n){const{source:t,functions:e,main:i}=n;return t.replace("{FUNCTIONS}",e).replace("{MAIN}",i)}const kg=`
	float getLuminosity(vec3 c) {
		return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
	}

	vec3 setLuminosity(vec3 c, float lum) {
		float modLum = lum - getLuminosity(c);
		vec3 color = c.rgb + vec3(modLum);

		// clip back into legal range
		modLum = getLuminosity(color);
		vec3 modLumVec = vec3(modLum);

		float cMin = min(color.r, min(color.g, color.b));
		float cMax = max(color.r, max(color.g, color.b));

		if(cMin < 0.0) {
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0) {
			color = mix(modLumVec, color, (1.0 - modLum) / (cMax - modLum));
		}

		return color;
	}

	float getSaturation(vec3 c) {
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	vec3 setSaturationMinMidMax(vec3 cSorted, float s) {
		vec3 colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x) {
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else {
			colorSorted.y = 0.0;
			colorSorted.z = 0.0;
		}

		colorSorted.x = 0.0;

		return colorSorted;
	}

	vec3 setSaturation(vec3 c, float s) {
		vec3 color = c;

		if(color.r <= color.g && color.r <= color.b) {
			if(color.g <= color.b) {
				color = setSaturationMinMidMax(color.rgb, s).rgb;
			}
			else {
				color = setSaturationMinMidMax(color.rbg, s).rbg;
			}
		}
		else if(color.g <= color.r && color.g <= color.b) {
			if(color.r <= color.b) {
				color = setSaturationMinMidMax(color.grb, s).grb;
			}
			else {
				color = setSaturationMinMidMax(color.gbr, s).gbr;
			}
		}
		else {
			// Using bgr for both fixes part of hue
			if(color.r <= color.g) {
				color = setSaturationMinMidMax(color.brg, s).brg;
			}
			else {
				color = setSaturationMinMidMax(color.bgr, s).bgr;
			}
		}

		return color;
	}
    `,Xg=`
	fn getLuminosity(c: vec3<f32>) -> f32
	{
		return 0.3*c.r + 0.59*c.g + 0.11*c.b;
	}

	fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32>
	{
		var modLum: f32 = lum - getLuminosity(c);
		var color: vec3<f32> = c.rgb + modLum;

		// clip back into legal range
		modLum = getLuminosity(color);
		let modLumVec = vec3<f32>(modLum);

		let cMin: f32 = min(color.r, min(color.g, color.b));
		let cMax: f32 = max(color.r, max(color.g, color.b));

		if(cMin < 0.0)
		{
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0)
		{
			color = mix(modLumVec, color, (1 - modLum) / (cMax - modLum));
		}

		return color;
	}

	fn getSaturation(c: vec3<f32>) -> f32
	{
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32>
	{
		var colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x)
		{
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else
		{
			colorSorted.y = 0;
			colorSorted.z = 0;
		}

		colorSorted.x = 0;

		return colorSorted;
	}

	fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32>
	{
		var color = c;

		if (color.r <= color.g && color.r <= color.b)
		{
			if (color.g <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rgb, s)).rgb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rbg, s)).rbg;
			}
		}
		else if (color.g <= color.r && color.g <= color.b)
		{
			if (color.r <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.grb, s)).grb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.gbr, s)).gbr;
			}
		}
		else
		{
			// Using bgr for both fixes part of hue
			if (color.r <= color.g)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.brg, s)).brg;
			}
			else
			{
				color  = vec3<f32>(setSaturationMinMidMax(color.bgr, s)).bgr;
			}
		}

		return color;
	}
	`;class zE extends Gn{constructor(){super({gl:{functions:`
                ${kg}

                vec3 blendColor(vec3 base, vec3 blend,  float opacity)
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColor(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${Xg}

                fn blendColorOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendColorOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}zE.extension={name:"color",type:q.BlendMode};class LE extends Gn{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0 - ((1.0 - base) / blend)), 0.0);
                }

                vec3 blendColorBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendColorBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn blendColorBurn(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendColorBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}LE.extension={name:"color-burn",type:q.BlendMode};class HE extends Gn{constructor(){super({gl:{functions:`
                float colorDodge(float base, float blend)
                {
                    return base / (1.0 - blend);
                }

                vec3 blendColorDodge(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColorDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return base / (1.0 - blend);
                }

                fn blendColorDodge(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                    out = vec4<f32>(blendColorDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}HE.extension={name:"color-dodge",type:q.BlendMode};class FE extends Gn{constructor(){super({gl:{functions:`
                vec3 blendDarken(vec3 base, vec3 blend, float opacity)
                {
                    return (min(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDarken(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendDarken(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (min(blend,base) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendDarken(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}FE.extension={name:"darken",type:q.BlendMode};class VE extends Gn{constructor(){super({gl:{functions:`
                vec3 blendDifference(vec3 base, vec3 blend,  float opacity)
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendDifference(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn blendDifference(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDifference(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}VE.extension={name:"difference",type:q.BlendMode};class kE extends Gn{constructor(){super({gl:{functions:`
                float divide(float base, float blend)
                {
                    return (blend > 0.0) ? clamp(base / blend, 0.0, 1.0) : 1.0;
                }

                vec3 blendDivide(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDivide(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn divide(base: f32, blend: f32) -> f32
                {
                    return select(1.0, clamp(base / blend, 0.0, 1.0), blend > 0.0);
                }

                fn blendDivide(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDivide(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}kE.extension={name:"divide",type:q.BlendMode};class XE extends Gn{constructor(){super({gl:{functions:`
                vec3 exclusion(vec3 base, vec3 blend)
                {
                    return base + blend - 2.0 * base * blend;
                }

                vec3 blendExclusion(vec3 base, vec3 blend, float opacity)
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendExclusion(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn exclusion(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return base+blend-2.0*base*blend;
                }

                fn blendExclusion(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendExclusion(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}XE.extension={name:"exclusion",type:q.BlendMode};class IE extends Gn{constructor(){super({gl:{functions:`
                float hardLight(float base, float blend)
                {
                    return (blend < 0.5) ? 2.0 * base * blend : 1.0 - 2.0 * (1.0 - base) * (1.0 - blend);
                }

                vec3 blendHardLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardLight(base: f32, blend: f32) -> f32
                {
                    return select(1.0 - 2.0 * (1.0 - base) * (1.0 - blend), 2.0 * base * blend, blend < 0.5);
                }

                fn blendHardLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendHardLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}IE.extension={name:"hard-light",type:q.BlendMode};class YE extends Gn{constructor(){super({gl:{functions:`
                float hardMix(float base, float blend)
                {
                    return (base + blend >= 1.0) ? 1.0 : 0.0;
                }

                vec3 blendHardMix(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blended = vec3(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardMix(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardMix(base: f32, blend: f32) -> f32
                {
                    return select(0.0, 1.0, base + blend >= 1.0);
                }

                fn blendHardMix(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendHardMix(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}YE.extension={name:"hard-mix",type:q.BlendMode};class qE extends Gn{constructor(){super({gl:{functions:`
                vec3 blendLighten(vec3 base, vec3 blend, float opacity)
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLighten(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendLighten(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLighten(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}qE.extension={name:"lighten",type:q.BlendMode};class jE extends Gn{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend)
                {
                    return max(0.0, base + blend - 1.0);
                }

                vec3 blendLinearBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn blendLinearBurn(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendLinearBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}jE.extension={name:"linear-burn",type:q.BlendMode};class KE extends Gn{constructor(){super({gl:{functions:`
                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                vec3 blendLinearDodge(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1, base + blend);
                }

                fn blendLinearDodge(base:vec3<f32>, blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}KE.extension={name:"linear-dodge",type:q.BlendMode};class WE extends Gn{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend) {
                    return max(0.0, base + blend - 1.0);
                }

                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                float linearLight(float base, float blend) {
                    return (blend <= 0.5) ? linearBurn(base,2.0*blend) : linearBurn(base,2.0*(blend-0.5));
                }

                vec3 blendLinearLight(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendLinearLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base + blend);
                }

                fn linearLight(base: f32, blend: f32) -> f32
                {
                    return select(linearBurn(base,2.0*(blend-0.5)), linearBurn(base,2.0*blend), blend <= 0.5);
                }

                fn blendLinearLightOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearLightOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}WE.extension={name:"linear-light",type:q.BlendMode};class QE extends Gn{constructor(){super({gl:{functions:`
                ${kg}

                vec3 blendLuminosity(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendLuminosity = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLuminosity(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${Xg}

                fn blendLuminosity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendLuminosity: vec3<f32> = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLuminosity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}QE.extension={name:"luminosity",type:q.BlendMode};class ZE extends Gn{constructor(){super({gl:{functions:`
                vec3 negation(vec3 base, vec3 blend)
                {
                    return 1.0-abs(1.0-base-blend);
                }

                vec3 blendNegation(vec3 base, vec3 blend, float opacity)
                {
                    return (negation(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendNegation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendNegation(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return 1.0-abs(1.0-base-blend);
                }

                fn blendNegationOpacity(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (blendNegation(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendNegationOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}ZE.extension={name:"negation",type:q.BlendMode};class JE extends Gn{constructor(){super({gl:{functions:`
                float overlay(float base, float blend)
                {
                    return (base < 0.5) ? (2.0*base*blend) : (1.0-2.0*(1.0-base)*(1.0-blend));
                }

                vec3 blendOverlay(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendOverlay(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn overlay(base: f32, blend: f32) -> f32
                {
                    return select((1.0-2.0*(1.0-base)*(1.0-blend)), (2.0*base*blend), base < 0.5);
                }

                fn blendOverlay(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendOverlay(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}JE.extension={name:"overlay",type:q.BlendMode};class $E extends Gn{constructor(){super({gl:{functions:`
                float pinLight(float base, float blend)
                {
                    return (blend <= 0.5) ? min(base, 2.0 * blend) : max(base, 2.0 * (blend - 0.5));
                }

                vec3 blendPinLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn pinLight(base: f32, blend: f32) -> f32
                {
                    return select(max(base,2.0*(blend-0.5)), min(base,2.0*blend), blend <= 0.5);
                }

                fn blendPinLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}$E.extension={name:"pin-light",type:q.BlendMode};class t3 extends Gn{constructor(){super({gl:{functions:`
                ${kg}

                vec3 blendSaturation(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                ${Xg}

                fn blendSaturation(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}t3.extension={name:"saturation",type:q.BlendMode};class e3 extends Gn{constructor(){super({gl:{functions:`
                float softLight(float base, float blend)
                {
                    return (blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend));
                }

                vec3 blendSoftLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn softLight(base: f32, blend: f32) -> f32
                {
                    return select(2.0 * base * blend + base * base * (1.0 - 2.0 * blend), sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend), blend < 0.5);
                }

                fn blendSoftLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}e3.extension={name:"soft-light",type:q.BlendMode};class n3 extends Gn{constructor(){super({gl:{functions:`
                float subtract(float base, float blend)
                {
                    return max(0.0, base - blend);
                }

                vec3 blendSubtract(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn subtract(base: f32, blend: f32) -> f32
                {
                    return max(0, base - blend);
                }

                fn blendSubtract(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}n3.extension={name:"subtract",type:q.BlendMode};class i3 extends Gn{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                float colorDodge(float base, float blend)
                {
                    return min(1.0, base / (1.0-blend));
                }

                float vividLight(float base, float blend)
                {
                    return (blend < 0.5) ? colorBurn(base,(2.0*blend)) : colorDodge(base,(2.0*(blend-0.5)));
                }

                vec3 blendVividLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendVividLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base / (1.0-blend));
                }

                fn vividLight(base: f32, blend: f32) -> f32
                {
                    return select(colorDodge(base,(2.0*(blend-0.5))), colorBurn(base,(2.0*blend)), blend<0.5);
                }

                fn blendVividLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendVividLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}i3.extension={name:"vivid-light",type:q.BlendMode};const oy=[];De.handleByNamedList(q.Environment,oy);async function Tb(n){if(!n)for(let t=0;t<oy.length;t++){const e=oy[t];if(e.value.test()){await e.value.load();return}}}async function l4(n){return Tb(!n)}let $f;function Ab(){if(typeof $f=="boolean")return $f;try{$f=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{$f=!1}return $f}function i1(n,t,e=2){const i=t&&t.length,s=i?t[0]*e:n.length;let o=r3(n,0,s,e,!0);const h=[];if(!o||o.next===o.prev)return h;let f,m,g;if(i&&(o=f4(n,t,o,e)),n.length>80*e){f=1/0,m=1/0;let b=-1/0,x=-1/0;for(let E=e;E<s;E+=e){const A=n[E],R=n[E+1];A<f&&(f=A),R<m&&(m=R),A>b&&(b=A),R>x&&(x=R)}g=Math.max(b-f,x-m),g=g!==0?32767/g:0}return Rd(o,h,e,f,m,g,0),h}function r3(n,t,e,i,s){let o;if(s===E4(n,t,e,i)>0)for(let h=t;h<e;h+=i)o=r1(h/i|0,n[h],n[h+1],o);else for(let h=e-i;h>=t;h-=i)o=r1(h/i|0,n[h],n[h+1],o);return o&&Sh(o,o.next)&&(Dd(o),o=o.next),o}function Zu(n,t){if(!n)return n;t||(t=n);let e=n,i;do if(i=!1,!e.steiner&&(Sh(e,e.next)||xn(e.prev,e,e.next)===0)){if(Dd(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function Rd(n,t,e,i,s,o,h){if(!n)return;!h&&o&&_4(n,i,s,o);let f=n;for(;n.prev!==n.next;){const m=n.prev,g=n.next;if(o?u4(n,i,s,o):o4(n)){t.push(m.i,n.i,g.i),Dd(n),n=g.next,f=g.next;continue}if(n=g,n===f){h?h===1?(n=c4(Zu(n),t),Rd(n,t,e,i,s,o,2)):h===2&&h4(n,t,e,i,s,o):Rd(Zu(n),t,e,i,s,o,1);break}}}function o4(n){const t=n.prev,e=n,i=n.next;if(xn(t,e,i)>=0)return!1;const s=t.x,o=e.x,h=i.x,f=t.y,m=e.y,g=i.y,b=Math.min(s,o,h),x=Math.min(f,m,g),E=Math.max(s,o,h),A=Math.max(f,m,g);let R=i.next;for(;R!==t;){if(R.x>=b&&R.x<=E&&R.y>=x&&R.y<=A&&hd(s,f,o,m,h,g,R.x,R.y)&&xn(R.prev,R,R.next)>=0)return!1;R=R.next}return!0}function u4(n,t,e,i){const s=n.prev,o=n,h=n.next;if(xn(s,o,h)>=0)return!1;const f=s.x,m=o.x,g=h.x,b=s.y,x=o.y,E=h.y,A=Math.min(f,m,g),R=Math.min(b,x,E),D=Math.max(f,m,g),B=Math.max(b,x,E),P=uy(A,R,t,e,i),G=uy(D,B,t,e,i);let H=n.prevZ,j=n.nextZ;for(;H&&H.z>=P&&j&&j.z<=G;){if(H.x>=A&&H.x<=D&&H.y>=R&&H.y<=B&&H!==s&&H!==h&&hd(f,b,m,x,g,E,H.x,H.y)&&xn(H.prev,H,H.next)>=0||(H=H.prevZ,j.x>=A&&j.x<=D&&j.y>=R&&j.y<=B&&j!==s&&j!==h&&hd(f,b,m,x,g,E,j.x,j.y)&&xn(j.prev,j,j.next)>=0))return!1;j=j.nextZ}for(;H&&H.z>=P;){if(H.x>=A&&H.x<=D&&H.y>=R&&H.y<=B&&H!==s&&H!==h&&hd(f,b,m,x,g,E,H.x,H.y)&&xn(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;j&&j.z<=G;){if(j.x>=A&&j.x<=D&&j.y>=R&&j.y<=B&&j!==s&&j!==h&&hd(f,b,m,x,g,E,j.x,j.y)&&xn(j.prev,j,j.next)>=0)return!1;j=j.nextZ}return!0}function c4(n,t){let e=n;do{const i=e.prev,s=e.next.next;!Sh(i,s)&&a3(i,e,e.next,s)&&Md(i,s)&&Md(s,i)&&(t.push(i.i,e.i,s.i),Dd(e),Dd(e.next),e=n=s),e=e.next}while(e!==n);return Zu(e)}function h4(n,t,e,i,s,o){let h=n;do{let f=h.next.next;for(;f!==h.prev;){if(h.i!==f.i&&v4(h,f)){let m=l3(h,f);h=Zu(h,h.next),m=Zu(m,m.next),Rd(h,t,e,i,s,o,0),Rd(m,t,e,i,s,o,0);return}f=f.next}h=h.next}while(h!==n)}function f4(n,t,e,i){const s=[];for(let o=0,h=t.length;o<h;o++){const f=t[o]*i,m=o<h-1?t[o+1]*i:n.length,g=r3(n,f,m,i,!1);g===g.next&&(g.steiner=!0),s.push(b4(g))}s.sort(d4);for(let o=0;o<s.length;o++)e=p4(s[o],e);return e}function d4(n,t){let e=n.x-t.x;if(e===0&&(e=n.y-t.y,e===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),s=(t.next.y-t.y)/(t.next.x-t.x);e=i-s}return e}function p4(n,t){const e=m4(n,t);if(!e)return t;const i=l3(e,n);return Zu(i,i.next),Zu(e,e.next)}function m4(n,t){let e=t;const i=n.x,s=n.y;let o=-1/0,h;if(Sh(n,e))return e;do{if(Sh(n,e.next))return e.next;if(s<=e.y&&s>=e.next.y&&e.next.y!==e.y){const x=e.x+(s-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(x<=i&&x>o&&(o=x,h=e.x<e.next.x?e:e.next,x===i))return h}e=e.next}while(e!==t);if(!h)return null;const f=h,m=h.x,g=h.y;let b=1/0;e=h;do{if(i>=e.x&&e.x>=m&&i!==e.x&&s3(s<g?i:o,s,m,g,s<g?o:i,s,e.x,e.y)){const x=Math.abs(s-e.y)/(i-e.x);Md(e,n)&&(x<b||x===b&&(e.x>h.x||e.x===h.x&&g4(h,e)))&&(h=e,b=x)}e=e.next}while(e!==f);return h}function g4(n,t){return xn(n.prev,n,t.prev)<0&&xn(t.next,n,n.next)<0}function _4(n,t,e,i){let s=n;do s.z===0&&(s.z=uy(s.x,s.y,t,e,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,y4(s)}function y4(n){let t,e=1;do{let i=n,s;n=null;let o=null;for(t=0;i;){t++;let h=i,f=0;for(let g=0;g<e&&(f++,h=h.nextZ,!!h);g++);let m=e;for(;f>0||m>0&&h;)f!==0&&(m===0||!h||i.z<=h.z)?(s=i,i=i.nextZ,f--):(s=h,h=h.nextZ,m--),o?o.nextZ=s:n=s,s.prevZ=o,o=s;i=h}o.nextZ=null,e*=2}while(t>1);return n}function uy(n,t,e,i,s){return n=(n-e)*s|0,t=(t-i)*s|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function b4(n){let t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function s3(n,t,e,i,s,o,h,f){return(s-h)*(t-f)>=(n-h)*(o-f)&&(n-h)*(i-f)>=(e-h)*(t-f)&&(e-h)*(o-f)>=(s-h)*(i-f)}function hd(n,t,e,i,s,o,h,f){return!(n===h&&t===f)&&s3(n,t,e,i,s,o,h,f)}function v4(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!x4(n,t)&&(Md(n,t)&&Md(t,n)&&S4(n,t)&&(xn(n.prev,n,t.prev)||xn(n,t.prev,t))||Sh(n,t)&&xn(n.prev,n,n.next)>0&&xn(t.prev,t,t.next)>0)}function xn(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function Sh(n,t){return n.x===t.x&&n.y===t.y}function a3(n,t,e,i){const s=Vm(xn(n,t,e)),o=Vm(xn(n,t,i)),h=Vm(xn(e,i,n)),f=Vm(xn(e,i,t));return!!(s!==o&&h!==f||s===0&&Fm(n,e,t)||o===0&&Fm(n,i,t)||h===0&&Fm(e,n,i)||f===0&&Fm(e,t,i))}function Fm(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function Vm(n){return n>0?1:n<0?-1:0}function x4(n,t){let e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&a3(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function Md(n,t){return xn(n.prev,n,n.next)<0?xn(n,t,n.next)>=0&&xn(n,n.prev,t)>=0:xn(n,t,n.prev)<0||xn(n,n.next,t)<0}function S4(n,t){let e=n,i=!1;const s=(n.x+t.x)/2,o=(n.y+t.y)/2;do e.y>o!=e.next.y>o&&e.next.y!==e.y&&s<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==n);return i}function l3(n,t){const e=cy(n.i,n.x,n.y),i=cy(t.i,t.x,t.y),s=n.next,o=t.prev;return n.next=t,t.prev=n,e.next=s,s.prev=e,i.next=e,e.prev=i,o.next=i,i.prev=o,i}function r1(n,t,e,i){const s=cy(n,t,e);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function Dd(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function cy(n,t,e){return{i:n,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function E4(n,t,e,i){let s=0;for(let o=t,h=e-i;o<e;o+=i)s+=(n[h]-n[o])*(n[o+1]+n[h+1]),h=o;return s}const o3=i1.default||i1;var Ar=(n=>(n[n.NONE=0]="NONE",n[n.COLOR=16384]="COLOR",n[n.STENCIL=1024]="STENCIL",n[n.DEPTH=256]="DEPTH",n[n.COLOR_DEPTH=16640]="COLOR_DEPTH",n[n.COLOR_STENCIL=17408]="COLOR_STENCIL",n[n.DEPTH_STENCIL=1280]="DEPTH_STENCIL",n[n.ALL=17664]="ALL",n))(Ar||{});class Cb{constructor(t){this.items=[],this._name=t}emit(t,e,i,s,o,h,f,m){const{name:g,items:b}=this;for(let x=0,E=b.length;x<E;x++)b[x][g](t,e,i,s,o,h,f,m);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&this.items.splice(e,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const T4=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],u3=class c3 extends ei{constructor(t){super(),this.uid=rn("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const e=[...T4,...this.config.runners??[]];this._addRunners(...e),this._unsafeEvalCheck()}async init(t={}){const e=t.skipExtensionImports===!0?!0:t.manageImports===!1;await Tb(e),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const i in this._systemsHash)t={...this._systemsHash[i].constructor.defaultOptions,...t};t={...c3.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let i=0;i<this.runners.init.items.length;i++)await this.runners.init.items[i].init(t);this._initOptions=t}render(t,e){let i=t;if(i instanceof kn&&(i={container:i},e&&(wt(Jt,"passing a second argument is deprecated, please use render options instead"),i.target=e.renderTexture)),i.target||(i.target=this.view.renderTarget),i.target===this.view.renderTarget&&(this._lastObjectRendered=i.container,i.clearColor??(i.clearColor=this.background.colorRgba),i.clear??(i.clear=this.background.clearBeforeRender)),i.clearColor){const s=Array.isArray(i.clearColor)&&i.clearColor.length===4;i.clearColor=s?i.clearColor:Ce.shared.setValue(i.clearColor).toArray()}i.transform||(i.container.updateLocalTransform(),i.transform=i.container.localTransform),i.container.enableRenderGroup(),this.runners.prerender.emit(i),this.runners.renderStart.emit(i),this.runners.render.emit(i),this.runners.renderEnd.emit(i),this.runners.postrender.emit(i)}resize(t,e,i){const s=this.view.resolution;this.view.resize(t,e,i),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),i!==void 0&&i!==s&&this.runners.resolutionChange.emit(i)}clear(t={}){const e=this;t.target||(t.target=e.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=Ar.ALL);const{clear:i,clearColor:s,target:o}=t;Ce.shared.setValue(s??this.background.colorRgba),e.renderTarget.clear(o,i,Ce.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(e=>{this.runners[e]=new Cb(e)})}_addSystems(t){let e;for(e in t){const i=t[e];this._addSystem(i.value,i.name)}}_addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const s in this.runners)this.runners[s].add(i);return this}_addPipes(t,e){const i=e.reduce((s,o)=>(s[o.name]=o.value,s),{});t.forEach(s=>{const o=s.value,h=s.name,f=i[h];this.renderPipes[h]=new o(this,f?new f:null)})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!Ab())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};u3.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let Vd=u3,km;function kd(n){return km!==void 0||(km=(()=>{var e;const t={stencil:!0,failIfMajorPerformanceCaveat:n??Vd.defaultOptions.failIfMajorPerformanceCaveat};try{if(!pe.get().getWebGLRenderingContext())return!1;let s=pe.get().createCanvas().getContext("webgl",t);const o=!!((e=s==null?void 0:s.getContextAttributes())!=null&&e.stencil);if(s){const h=s.getExtension("WEBGL_lose_context");h&&h.loseContext()}return s=null,o}catch{return!1}})()),km}let Xm;async function Xd(n={}){return Xm!==void 0||(Xm=await(async()=>{const t=pe.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(n)).requestDevice(),!0}catch{return!1}})()),Xm}const s1=["webgl","webgpu","canvas"];async function h3(n){let t=[];n.preference?(t.push(n.preference),s1.forEach(o=>{o!==n.preference&&t.push(o)})):t=s1.slice();let e,i={};for(let o=0;o<t.length;o++){const h=t[o];if(h==="webgpu"&&await Xd()){const{WebGPURenderer:f}=await Ed(async()=>{const{WebGPURenderer:m}=await Promise.resolve().then(()=>eU);return{WebGPURenderer:m}},void 0);e=f,i={...n,...n.webgpu};break}else if(h==="webgl"&&kd(n.failIfMajorPerformanceCaveat??Vd.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:f}=await Ed(async()=>{const{WebGLRenderer:m}=await Promise.resolve().then(()=>j5);return{WebGLRenderer:m}},void 0);e=f,i={...n,...n.webgl};break}else if(h==="canvas")throw i={...n},new Error("CanvasRenderer is not yet implemented")}if(delete i.webgpu,delete i.webgl,!e)throw new Error("No available renderer for the current environment");const s=new e;return await s.init(i),s}const A4=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,wd="8.10.1";class Bb{static init(){var t;(t=globalThis.__PIXI_APP_INIT__)==null||t.call(globalThis,this,wd)}static destroy(){}}Bb.extension=q.Application;class Rb{constructor(t){this._renderer=t}init(){var t;(t=globalThis.__PIXI_RENDERER_INIT__)==null||t.call(globalThis,this._renderer,wd)}destroy(){this._renderer=null}}Rb.extension={type:[q.WebGLSystem,q.WebGPUSystem],name:"initHook",priority:-10};const f3=class hy{constructor(...t){this.stage=new kn,t[0]!==void 0&&wt(Jt,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.renderer=await h3(t),hy._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return wt(Jt,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,e=!1){const i=hy._plugins.slice(0);i.reverse(),i.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};f3._plugins=[];let Ig=f3;De.handleByList(q.Application,Ig._plugins);De.add(Bb);class d3{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let e,i;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:s,clientHeight:o}=this._resizeTo;e=s,i=o}this.renderer.resize(e,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}d3.extension=q.Application;class p3{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Vl.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Pn.shared:new Pn,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}p3.extension=q.Application;class Mb extends ei{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return wt(Jt,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return wt(Jt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return wt(Jt,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return wt(Jt,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return wt(Jt,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){var e;this.emit("destroy",this),this.removeAllListeners();for(const i in this.chars)(e=this.chars[i].texture)==null||e.destroy();this.chars=null,t&&(this.pages.forEach(i=>i.texture.destroy(!0)),this.pages=null)}}const C4=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function Ud(n){const t=typeof n.fontSize=="number"?`${n.fontSize}px`:n.fontSize;let e=n.fontFamily;Array.isArray(n.fontFamily)||(e=n.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let s=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!C4.includes(s)&&(s=`"${s}"`),e[i]=s}return`${n.fontStyle} ${n.fontVariant} ${n.fontWeight} ${t} ${e.join(",")}`}const B0={willReadFrequently:!0},tl=class Ht{static get experimentalLetterSpacingSupported(){let t=Ht._experimentalLetterSpacingSupported;if(t===void 0){const e=pe.get().getCanvasRenderingContext2D().prototype;t=Ht._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,s,o,h,f,m,g){this.text=t,this.style=e,this.width=i,this.height=s,this.lines=o,this.lineWidths=h,this.lineHeight=f,this.maxLineWidth=m,this.fontProperties=g}static measureText(t=" ",e,i=Ht._canvas,s=e.wordWrap){var P;const o=Ud(e),h=Ht.measureFont(o);h.fontSize===0&&(h.fontSize=e.fontSize,h.ascent=e.fontSize);const f=Ht.__context;f.font=o;const g=(s?Ht._wordWrap(t,e,i):t).split(/(?:\r\n|\r|\n)/),b=new Array(g.length);let x=0;for(let G=0;G<g.length;G++){const H=Ht._measureText(g[G],e.letterSpacing,f);b[G]=H,x=Math.max(x,H)}const E=((P=e._stroke)==null?void 0:P.width)||0;let A=x+E;e.dropShadow&&(A+=e.dropShadow.distance);const R=e.lineHeight||h.fontSize;let D=Math.max(R,h.fontSize+E)+(g.length-1)*(R+e.leading);return e.dropShadow&&(D+=e.dropShadow.distance),new Ht(t,e,A,D,g,b,R+e.leading,x,h)}static _measureText(t,e,i){let s=!1;Ht.experimentalLetterSpacingSupported&&(Ht.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));const o=i.measureText(t);let h=o.width;const f=-o.actualBoundingBoxLeft;let g=o.actualBoundingBoxRight-f;if(h>0)if(s)h-=e,g-=e;else{const b=(Ht.graphemeSegmenter(t).length-1)*e;h+=b,g+=b}return Math.max(h,g)}static _wordWrap(t,e,i=Ht._canvas){const s=i.getContext("2d",B0);let o=0,h="",f="";const m=Object.create(null),{letterSpacing:g,whiteSpace:b}=e,x=Ht._collapseSpaces(b),E=Ht._collapseNewlines(b);let A=!x;const R=e.wordWrapWidth+g,D=Ht._tokenize(t);for(let B=0;B<D.length;B++){let P=D[B];if(Ht._isNewline(P)){if(!E){f+=Ht._addLine(h),A=!x,h="",o=0;continue}P=" "}if(x){const H=Ht.isBreakingSpace(P),j=Ht.isBreakingSpace(h[h.length-1]);if(H&&j)continue}const G=Ht._getFromCache(P,g,m,s);if(G>R)if(h!==""&&(f+=Ht._addLine(h),h="",o=0),Ht.canBreakWords(P,e.breakWords)){const H=Ht.wordWrapSplit(P);for(let j=0;j<H.length;j++){let Z=H[j],nt=Z,V=1;for(;H[j+V];){const N=H[j+V];if(!Ht.canBreakChars(nt,N,P,j,e.breakWords))Z+=N;else break;nt=N,V++}j+=V-1;const ht=Ht._getFromCache(Z,g,m,s);ht+o>R&&(f+=Ht._addLine(h),A=!1,h="",o=0),h+=Z,o+=ht}}else{h.length>0&&(f+=Ht._addLine(h),h="",o=0);const H=B===D.length-1;f+=Ht._addLine(P,!H),A=!1,h="",o=0}else G+o>R&&(A=!1,f+=Ht._addLine(h),h="",o=0),(h.length>0||!Ht.isBreakingSpace(P)||A)&&(h+=P,o+=G)}return f+=Ht._addLine(h,!1),f}static _addLine(t,e=!0){return t=Ht._trimRight(t),t=e?`${t}
`:t,t}static _getFromCache(t,e,i,s){let o=i[t];return typeof o!="number"&&(o=Ht._measureText(t,e,s)+e,i[t]=o),o}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const i=t[e];if(!Ht.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:Ht._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:Ht._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const e=[];let i="";if(typeof t!="string")return e;for(let s=0;s<t.length;s++){const o=t[s],h=t[s+1];if(Ht.isBreakingSpace(o,h)||Ht._isNewline(o)){i!==""&&(e.push(i),i=""),e.push(o);continue}i+=o}return i!==""&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,s,o){return!0}static wordWrapSplit(t){return Ht.graphemeSegmenter(t)}static measureFont(t){if(Ht._fonts[t])return Ht._fonts[t];const e=Ht._context;e.font=t;const i=e.measureText(Ht.METRICS_STRING+Ht.BASELINE_SYMBOL),s={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return Ht._fonts[t]=s,s}static clearMetrics(t=""){t?delete Ht._fonts[t]:Ht._fonts={}}static get _canvas(){if(!Ht.__canvas){let t;try{const e=new OffscreenCanvas(0,0),i=e.getContext("2d",B0);if(i!=null&&i.measureText)return Ht.__canvas=e,e;t=pe.get().createCanvas()}catch{t=pe.get().createCanvas()}t.width=t.height=10,Ht.__canvas=t}return Ht.__canvas}static get _context(){return Ht.__context||(Ht.__context=Ht._canvas.getContext("2d",B0)),Ht.__context}};tl.METRICS_STRING="|q";tl.BASELINE_SYMBOL="M";tl.BASELINE_MULTIPLIER=1.4;tl.HEIGHT_MULTIPLIER=2;tl.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const n=new Intl.Segmenter;return t=>{const e=n.segment(t),i=[];let s=0;for(const o of e)i[s++]=o.segment;return i}}return n=>[...n]})();tl.experimentalLetterSpacing=!1;tl._fonts={};tl._newlines=[10,13];tl._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let _s=tl;const a1=[{offset:0,color:"white"},{offset:1,color:"black"}],Db=class fy{constructor(...t){this.uid=rn("fillGradient"),this.type="linear",this.colorStops=[];let e=B4(t);e={...e.type==="radial"?fy.defaultRadialOptions:fy.defaultLinearOptions,...sa(e)},this._textureSize=e.textureSize,this._wrapMode=e.wrapMode,e.type==="radial"?(this.center=e.center,this.outerCenter=e.outerCenter??this.center,this.innerRadius=e.innerRadius,this.outerRadius=e.outerRadius,this.scale=e.scale,this.rotation=e.rotation):(this.start=e.start,this.end=e.end),this.textureSpace=e.textureSpace,this.type=e.type,e.colorStops.forEach(s=>{this.addColorStop(s.offset,s.color)})}addColorStop(t,e){return this.colorStops.push({offset:t,color:Ce.shared.setValue(e).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:t,y:e}=this.start,{x:i,y:s}=this.end,o=i-t,h=s-e;const f=o<0||h<0;if(this._wrapMode==="clamp-to-edge"){if(o<0){const B=t;t=i,i=B,o*=-1}if(h<0){const B=e;e=s,s=B,h*=-1}}const m=this.colorStops.length?this.colorStops:a1,g=this._textureSize,{canvas:b,context:x}=o1(g,1),E=f?x.createLinearGradient(this._textureSize,0,0,0):x.createLinearGradient(0,0,this._textureSize,0);l1(E,m),x.fillStyle=E,x.fillRect(0,0,g,1),this.texture=new Ct({source:new Xo({resource:b,addressMode:this._wrapMode})});const A=Math.sqrt(o*o+h*h),R=Math.atan2(h,o),D=new Pt;D.scale(A/g,1),D.rotate(R),D.translate(t,e),this.textureSpace==="local"&&D.scale(g,g),this.transform=D}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:a1,e=this._textureSize,{canvas:i,context:s}=o1(e,e),{x:o,y:h}=this.center,{x:f,y:m}=this.outerCenter,g=this.innerRadius,b=this.outerRadius,x=f-b,E=m-b,A=e/(b*2),R=(o-x)*A,D=(h-E)*A,B=s.createRadialGradient(R,D,g*A,(f-x)*A,(m-E)*A,b*A);l1(B,t),s.fillStyle=t[t.length-1].color,s.fillRect(0,0,e,e),s.fillStyle=B,s.translate(R,D),s.rotate(this.rotation),s.scale(1,this.scale),s.translate(-R,-D),s.fillRect(0,0,e,e),this.texture=new Ct({source:new Xo({resource:i,addressMode:this._wrapMode})});const P=new Pt;P.scale(1/A,1/A),P.translate(x,E),this.textureSpace==="local"&&P.scale(e,e),this.transform=P}get styleKey(){return this.uid}destroy(){var t;(t=this.texture)==null||t.destroy(!0),this.texture=null}};Db.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};Db.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let Ja=Db;function l1(n,t){for(let e=0;e<t.length;e++){const i=t[e];n.addColorStop(i.offset,i.color)}}function o1(n,t){const e=pe.get().createCanvas(n,t),i=e.getContext("2d");return{canvas:e,context:i}}function B4(n){let t=n[0]??{};return(typeof t=="number"||n[1])&&(wt("8.5.2","use options object instead"),t={type:"linear",start:{x:n[0],y:n[1]},end:{x:n[2],y:n[3]},textureSpace:n[4],textureSize:n[5]??Ja.defaultLinearOptions.textureSize}),t}const u1={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Id{constructor(t,e){this.uid=rn("fillPattern"),this.transform=new Pt,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=u1[e].addressModeU,t.source.style.addressModeV=u1[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var R0,c1;function R4(){if(c1)return R0;c1=1,R0=e;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function e(o){var h=[];return o.replace(t,function(f,m,g){var b=m.toLowerCase();for(g=s(g),b=="m"&&g.length>2&&(h.push([m].concat(g.splice(0,2))),b="l",m=m=="m"?"l":"L");;){if(g.length==n[b])return g.unshift(m),h.push(g);if(g.length<n[b])throw new Error("malformed path data");h.push([m].concat(g.splice(0,n[b])))}}),h}var i=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function s(o){var h=o.match(i);return h?h.map(Number):[]}return R0}var M4=R4();const D4=sb(M4);function m3(n,t){const e=D4(n),i=[];let s=null,o=0,h=0;for(let f=0;f<e.length;f++){const m=e[f],g=m[0],b=m;switch(g){case"M":o=b[1],h=b[2],t.moveTo(o,h);break;case"m":o+=b[1],h+=b[2],t.moveTo(o,h);break;case"H":o=b[1],t.lineTo(o,h);break;case"h":o+=b[1],t.lineTo(o,h);break;case"V":h=b[1],t.lineTo(o,h);break;case"v":h+=b[1],t.lineTo(o,h);break;case"L":o=b[1],h=b[2],t.lineTo(o,h);break;case"l":o+=b[1],h+=b[2],t.lineTo(o,h);break;case"C":o=b[5],h=b[6],t.bezierCurveTo(b[1],b[2],b[3],b[4],o,h);break;case"c":t.bezierCurveTo(o+b[1],h+b[2],o+b[3],h+b[4],o+b[5],h+b[6]),o+=b[5],h+=b[6];break;case"S":o=b[3],h=b[4],t.bezierCurveToShort(b[1],b[2],o,h);break;case"s":t.bezierCurveToShort(o+b[1],h+b[2],o+b[3],h+b[4]),o+=b[3],h+=b[4];break;case"Q":o=b[3],h=b[4],t.quadraticCurveTo(b[1],b[2],o,h);break;case"q":t.quadraticCurveTo(o+b[1],h+b[2],o+b[3],h+b[4]),o+=b[3],h+=b[4];break;case"T":o=b[1],h=b[2],t.quadraticCurveToShort(o,h);break;case"t":o+=b[1],h+=b[2],t.quadraticCurveToShort(o,h);break;case"A":o=b[6],h=b[7],t.arcToSvg(b[1],b[2],b[3],b[4],b[5],o,h);break;case"a":o+=b[6],h+=b[7],t.arcToSvg(b[1],b[2],b[3],b[4],b[5],o,h);break;case"Z":case"z":t.closePath(),i.length>0&&(s=i.pop(),s?(o=s.startX,h=s.startY):(o=0,h=0)),s=null;break;default:Xt(`Unknown SVG path command: ${g}`)}g!=="Z"&&g!=="z"&&s===null&&(s={startX:o,startY:h},i.push(s))}return t}class Yg{constructor(t=0,e=0,i=0){this.type="circle",this.x=t,this.y=e,this.radius=i}clone(){return new Yg(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let s=this.x-t,o=this.y-e;return s*=s,o*=o,s+o<=i}strokeContains(t,e,i,s=.5){if(this.radius===0)return!1;const o=this.x-t,h=this.y-e,f=this.radius,m=(1-s)*i,g=Math.sqrt(o*o+h*h);return g<=f+m&&g>f-(i-m)}getBounds(t){return t||(t=new Oe),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class qg{constructor(t=0,e=0,i=0,s=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=i,this.halfHeight=s}clone(){return new qg(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(t-this.x)/this.halfWidth,s=(e-this.y)/this.halfHeight;return i*=i,s*=s,i+s<=1}strokeContains(t,e,i,s=.5){const{halfWidth:o,halfHeight:h}=this;if(o<=0||h<=0)return!1;const f=i*(1-s),m=i-f,g=o-m,b=h-m,x=o+f,E=h+f,A=t-this.x,R=e-this.y,D=A*A/(g*g)+R*R/(b*b),B=A*A/(x*x)+R*R/(E*E);return D>1&&B<=1}getBounds(t){return t||(t=new Oe),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function yd(n,t,e,i,s,o){const h=n-e,f=t-i,m=s-e,g=o-i,b=h*m+f*g,x=m*m+g*g;let E=-1;x!==0&&(E=b/x);let A,R;E<0?(A=e,R=i):E>1?(A=s,R=o):(A=e+E*m,R=i+E*g);const D=n-A,B=t-R;return D*D+B*B}let w4,U4;class dh{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let s=0,o=e.length;s<o;s++)i.push(e[s].x,e[s].y);e=i}this.points=e,this.closePath=!0}isClockwise(){let t=0;const e=this.points,i=e.length;for(let s=0;s<i;s+=2){const o=e[s],h=e[s+1],f=e[(s+2)%i],m=e[(s+3)%i];t+=(f-o)*(m+h)}return t<0}containsPolygon(t){const e=this.getBounds(w4),i=t.getBounds(U4);if(!e.containsRect(i))return!1;const s=t.points;for(let o=0;o<s.length;o+=2){const h=s[o],f=s[o+1];if(!this.contains(h,f))return!1}return!0}clone(){const t=this.points.slice(),e=new dh(t);return e.closePath=this.closePath,e}contains(t,e){let i=!1;const s=this.points.length/2;for(let o=0,h=s-1;o<s;h=o++){const f=this.points[o*2],m=this.points[o*2+1],g=this.points[h*2],b=this.points[h*2+1];m>e!=b>e&&t<(g-f)*((e-m)/(b-m))+f&&(i=!i)}return i}strokeContains(t,e,i,s=.5){const o=i*i,h=o*(1-s),f=o-h,{points:m}=this,g=m.length-(this.closePath?0:2);for(let b=0;b<g;b+=2){const x=m[b],E=m[b+1],A=m[(b+2)%m.length],R=m[(b+3)%m.length],D=yd(t,e,x,E,A,R),B=Math.sign((A-x)*(e-E)-(R-E)*(t-x));if(D<=(B<0?f:h))return!0}return!1}getBounds(t){t||(t=new Oe);const e=this.points;let i=1/0,s=-1/0,o=1/0,h=-1/0;for(let f=0,m=e.length;f<m;f+=2){const g=e[f],b=e[f+1];i=g<i?g:i,s=g>s?g:s,o=b<o?b:o,h=b>h?b:h}return t.x=i,t.width=s-i,t.y=o,t.height=h-o,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const Im=(n,t,e,i,s,o,h)=>{const f=n-e,m=t-i,g=Math.sqrt(f*f+m*m);return g>=s-o&&g<=s+h};class jg{constructor(t=0,e=0,i=0,s=0,o=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=i,this.height=s,this.radius=o}getBounds(t){return t||(t=new Oe),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new jg(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let s=t-(this.x+i),o=e-(this.y+i);const h=i*i;if(s*s+o*o<=h||(s=t-(this.x+this.width-i),s*s+o*o<=h)||(o=e-(this.y+this.height-i),s*s+o*o<=h)||(s=t-(this.x+i),s*s+o*o<=h))return!0}return!1}strokeContains(t,e,i,s=.5){const{x:o,y:h,width:f,height:m,radius:g}=this,b=i*(1-s),x=i-b,E=o+g,A=h+g,R=f-g*2,D=m-g*2,B=o+f,P=h+m;return(t>=o-b&&t<=o+x||t>=B-x&&t<=B+b)&&e>=A&&e<=A+D||(e>=h-b&&e<=h+x||e>=P-x&&e<=P+b)&&t>=E&&t<=E+R?!0:t<E&&e<A&&Im(t,e,E,A,g,x,b)||t>B-g&&e<A&&Im(t,e,B-g,A,g,x,b)||t>B-g&&e>P-g&&Im(t,e,B-g,P-g,g,x,b)||t<E&&e>P-g&&Im(t,e,E,P-g,g,x,b)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const g3={};function Kg(n,t,e){let i=2166136261;for(let s=0;s<t;s++)i^=n[s].uid,i=Math.imul(i,16777619),i>>>=0;return g3[i]||O4(n,t,i,e)}function O4(n,t,e,i){const s={};let o=0;for(let f=0;f<i;f++){const m=f<t?n[f]:Ct.EMPTY.source;s[o++]=m.source,s[o++]=m.style}const h=new Za(s);return g3[e]=h,h}class Wu{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function gg(n,t){const e=n.byteLength/8|0,i=new Float64Array(n,0,e);new Float64Array(t,0,e).set(i);const o=n.byteLength-e*8;if(o>0){const h=new Uint8Array(n,e*8,o);new Uint8Array(t,e*8,o).set(h)}}const _3={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var On=(n=>(n[n.DISABLED=0]="DISABLED",n[n.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",n[n.MASK_ACTIVE=2]="MASK_ACTIVE",n[n.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",n[n.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",n[n.NONE=5]="NONE",n))(On||{});function Eh(n,t){return t.alphaMode==="no-premultiply-alpha"&&_3[n]||n}const P4=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function G4(n){let t="";for(let e=0;e<n;++e)e>0&&(t+=`
else `),e<n-1&&(t+=`if(test == ${e}.0){}`);return t}function wb(n,t){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const i=P4.replace(/%forloop%/gi,G4(n));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))n=n/2|0;else break}}finally{t.deleteShader(e)}return n}let ih=null;function y3(){var t;if(ih)return ih;const n=Sb();return ih=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),ih=wb(ih,n),(t=n.getExtension("WEBGL_lose_context"))==null||t.loseContext(),ih}class b3{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}class v3{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new b3,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const x3=[];let dy=0;function h1(){return dy>0?x3[--dy]:new v3}function f1(n){x3[dy++]=n}let td=0;const S3=class E3{constructor(t){this.uid=rn("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],t={...E3.defaultOptions,...t},t.maxTextures||(wt("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),t.maxTextures=y3());const{maxTextures:e,attributesInitialSize:i,indicesInitialSize:s}=t;this.attributeBuffer=new Wu(i*4),this.indexBuffer=new Uint16Array(s),this.maxTextures=e}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)f1(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){const i=t._batch.textures.ids[e._source.uid];return!i&&i!==0?!1:(t._textureId=i,t.texture=e,!0)}updateElement(t){this.dirty=!0;const e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){const e=this._elements;if(!e[this.elementStart])return;let i=h1(),s=i.textures;s.clear();const o=e[this.elementStart];let h=Eh(o.blendMode,o.texture._source),f=o.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const m=this.attributeBuffer.float32View,g=this.attributeBuffer.uint32View,b=this.indexBuffer;let x=this._batchIndexSize,E=this._batchIndexStart,A="startBatch";const R=this.maxTextures;for(let D=this.elementStart;D<this.elementSize;++D){const B=e[D];e[D]=null;const G=B.texture._source,H=Eh(B.blendMode,G),j=h!==H||f!==B.topology;if(G._batchTick===td&&!j){B._textureId=G._textureBindLocation,x+=B.indexSize,B.packAsQuad?(this.packQuadAttributes(B,m,g,B._attributeStart,B._textureId),this.packQuadIndex(b,B._indexStart,B._attributeStart/this.vertexSize)):(this.packAttributes(B,m,g,B._attributeStart,B._textureId),this.packIndex(B,b,B._indexStart,B._attributeStart/this.vertexSize)),B._batch=i;continue}G._batchTick=td,(s.count>=R||j)&&(this._finishBatch(i,E,x-E,s,h,f,t,A),A="renderBatch",E=x,h=H,f=B.topology,i=h1(),s=i.textures,s.clear(),++td),B._textureId=G._textureBindLocation=s.count,s.ids[G.uid]=s.count,s.textures[s.count++]=G,B._batch=i,x+=B.indexSize,B.packAsQuad?(this.packQuadAttributes(B,m,g,B._attributeStart,B._textureId),this.packQuadIndex(b,B._indexStart,B._attributeStart/this.vertexSize)):(this.packAttributes(B,m,g,B._attributeStart,B._textureId),this.packIndex(B,b,B._indexStart,B._attributeStart/this.vertexSize))}s.count>0&&(this._finishBatch(i,E,x-E,s,h,f,t,A),E=x,++td),this.elementStart=this.elementSize,this._batchIndexStart=E,this._batchIndexSize=x}_finishBatch(t,e,i,s,o,h,f,m){t.gpuBindGroup=null,t.bindGroup=null,t.action=m,t.batcher=this,t.textures=s,t.blendMode=o,t.topology=h,t.start=e,t.size=i,++td,this.batches[this.batchIndex++]=t,f.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,this.attributeBuffer.size*2),i=new Wu(e);gg(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(t){const e=this.indexBuffer;let i=Math.max(t,e.length*1.5);i+=i%2;const s=i>65535?new Uint32Array(i):new Uint16Array(i);if(s.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let o=0;o<e.length;o++)s[o]=e[o];else gg(e.buffer,s.buffer);this.indexBuffer=s}packQuadIndex(t,e,i){t[e]=i+0,t[e+1]=i+1,t[e+2]=i+2,t[e+3]=i+0,t[e+4]=i+2,t[e+5]=i+3}packIndex(t,e,i,s){const o=t.indices,h=t.indexSize,f=t.indexOffset,m=t.attributeOffset;for(let g=0;g<h;g++)e[i++]=s+o[g+f]-m}destroy(){for(let t=0;t<this.batches.length;t++)f1(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};S3.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let T3=S3;var be=(n=>(n[n.MAP_READ=1]="MAP_READ",n[n.MAP_WRITE=2]="MAP_WRITE",n[n.COPY_SRC=4]="COPY_SRC",n[n.COPY_DST=8]="COPY_DST",n[n.INDEX=16]="INDEX",n[n.VERTEX=32]="VERTEX",n[n.UNIFORM=64]="UNIFORM",n[n.STORAGE=128]="STORAGE",n[n.INDIRECT=256]="INDIRECT",n[n.QUERY_RESOLVE=512]="QUERY_RESOLVE",n[n.STATIC=1024]="STATIC",n))(be||{});class Cr extends ei{constructor(t){let{data:e,size:i}=t;const{usage:s,label:o,shrinkToFit:h}=t;super(),this.uid=rn("buffer"),this._resourceType="buffer",this._resourceId=rn("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,i??(i=e==null?void 0:e.byteLength);const f=!!e;this.descriptor={size:i,usage:s,mappedAtCreation:f,label:o},this.shrinkToFit=h??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&be.STATIC)}set static(t){t?this.descriptor.usage|=be.STATIC:this.descriptor.usage&=~be.STATIC}setDataWithSize(t,e,i){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){i&&this.emit("update",this);return}const s=this._data;if(this._data=t,this._dataInt32=null,!s||s.length!==t.length){!this.shrinkToFit&&s&&t.byteLength<s.byteLength?i&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=rn("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function Ub(n,t){if(!(n instanceof Cr)){let e=t?be.INDEX:be.VERTEX;n instanceof Array&&(t?(n=new Uint32Array(n),e=be.INDEX|be.COPY_DST):(n=new Float32Array(n),e=be.VERTEX|be.COPY_DST)),n=new Cr({data:n,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:e})}return n}function A3(n,t,e){const i=n.getAttribute(t);if(!i)return e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e;const s=i.buffer.data;let o=1/0,h=1/0,f=-1/0,m=-1/0;const g=s.BYTES_PER_ELEMENT,b=(i.offset||0)/g,x=(i.stride||2*4)/g;for(let E=b;E<s.length;E+=x){const A=s[E],R=s[E+1];A>f&&(f=A),R>m&&(m=R),A<o&&(o=A),R<h&&(h=R)}return e.minX=o,e.minY=h,e.maxX=f,e.maxY=m,e}function N4(n){return(n instanceof Cr||Array.isArray(n)||n.BYTES_PER_ELEMENT)&&(n={buffer:n}),n.buffer=Ub(n.buffer,!1),n}class ec extends ei{constructor(t={}){super(),this.uid=rn("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new ti,this._boundsDirty=!0;const{attributes:e,indexBuffer:i,topology:s}=t;if(this.buffers=[],this.attributes={},e)for(const o in e)this.addAttribute(o,e[o]);this.instanceCount=t.instanceCount??1,i&&this.addIndex(i),this.topology=s||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){const i=N4(e);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=i}addIndex(t){this.indexBuffer=Ub(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,A3(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const z4=new Float32Array(1),L4=new Uint32Array(1);class C3 extends ec{constructor(){const e=new Cr({data:z4,label:"attribute-batch-buffer",usage:be.VERTEX|be.COPY_DST,shrinkToFit:!1}),i=new Cr({data:L4,label:"index-batch-buffer",usage:be.INDEX|be.COPY_DST,shrinkToFit:!1}),s=6*4;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:s,offset:0},aUV:{buffer:e,format:"float32x2",stride:s,offset:2*4},aColor:{buffer:e,format:"unorm8x4",stride:s,offset:4*4},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:s,offset:5*4}},indexBuffer:i})}}function py(n,t,e){if(n)for(const i in n){const s=i.toLocaleLowerCase(),o=t[s];if(o){let h=n[i];i==="header"&&(h=h.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),e&&o.push(`//----${e}----//`),o.push(h)}else Xt(`${i} placement hook does not exist in shader`)}}const H4=/\{\{(.*?)\}\}/g;function my(n){var i;const t={};return(((i=n.match(H4))==null?void 0:i.map(s=>s.replace(/[{()}]/g,"")))??[]).forEach(s=>{t[s]=[]}),t}function d1(n,t){let e;const i=/@in\s+([^;]+);/g;for(;(e=i.exec(n))!==null;)t.push(e[1])}function gy(n,t,e=!1){const i=[];d1(t,i),n.forEach(f=>{f.header&&d1(f.header,i)});const s=i;e&&s.sort();const o=s.map((f,m)=>`       @location(${m}) ${f},`).join(`
`);let h=t.replace(/@in\s+[^;]+;\s*/g,"");return h=h.replace("{{in}}",`
${o}
`),h}function p1(n,t){let e;const i=/@out\s+([^;]+);/g;for(;(e=i.exec(n))!==null;)t.push(e[1])}function F4(n){const e=/\b(\w+)\s*:/g.exec(n);return e?e[1]:""}function V4(n){const t=/@.*?\s+/g;return n.replace(t,"")}function B3(n,t){const e=[];p1(t,e),n.forEach(m=>{m.header&&p1(m.header,e)});let i=0;const s=e.sort().map(m=>m.indexOf("builtin")>-1?m:`@location(${i++}) ${m}`).join(`,
`),o=e.sort().map(m=>`       var ${V4(m)};`).join(`
`),h=`return VSOutput(
            ${e.sort().map(m=>` ${F4(m)}`).join(`,
`)});`;let f=t.replace(/@out\s+[^;]+;\s*/g,"");return f=f.replace("{{struct}}",`
${s}
`),f=f.replace("{{start}}",`
${o}
`),f=f.replace("{{return}}",`
${h}
`),f}function _y(n,t){let e=n;for(const i in t){const s=t[i];s.join(`
`).length?e=e.replace(`{{${i}}}`,`//-----${i} START-----//
${s.join(`
`)}
//----${i} FINISH----//`):e=e.replace(`{{${i}}}`,"")}return e}const Fo=Object.create(null),M0=new Map;let k4=0;function R3({template:n,bits:t}){const e=D3(n,t);if(Fo[e])return Fo[e];const{vertex:i,fragment:s}=X4(n,t);return Fo[e]=w3(i,s,t),Fo[e]}function M3({template:n,bits:t}){const e=D3(n,t);return Fo[e]||(Fo[e]=w3(n.vertex,n.fragment,t)),Fo[e]}function X4(n,t){const e=t.map(h=>h.vertex).filter(h=>!!h),i=t.map(h=>h.fragment).filter(h=>!!h);let s=gy(e,n.vertex,!0);s=B3(e,s);const o=gy(i,n.fragment,!0);return{vertex:s,fragment:o}}function D3(n,t){return t.map(e=>(M0.has(e)||M0.set(e,k4++),M0.get(e))).sort((e,i)=>e-i).join("-")+n.vertex+n.fragment}function w3(n,t,e){const i=my(n),s=my(t);return e.forEach(o=>{py(o.vertex,i,o.name),py(o.fragment,s,o.name)}),{vertex:_y(n,i),fragment:_y(t,s)}}const U3=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,O3=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,P3=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,G3=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,N3={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},I4={name:"global-uniforms-ubo-bit",vertex:{header:`
          uniform globalUniforms {
            mat3 uProjectionMatrix;
            mat3 uWorldTransformMatrix;
            vec4 uWorldColorAlpha;
            vec2 uResolution;
          };
        `}},z3={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function Bh({bits:n,name:t}){const e=R3({template:{fragment:O3,vertex:U3},bits:[N3,...n]});return Dr.from({name:t,vertex:{source:e.vertex,entryPoint:"main"},fragment:{source:e.fragment,entryPoint:"main"}})}function Rh({bits:n,name:t}){return new jr({name:t,...M3({template:{vertex:P3,fragment:G3},bits:[z3,...n]})})}const Wg={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},Qg={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},D0={};function Y4(n){const t=[];if(n===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let e=0;for(let i=0;i<n;i++)t.push(`@group(1) @binding(${e++}) var textureSource${i+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${e++}) var textureSampler${i+1}: sampler;`)}return t.join(`
`)}function q4(n){const t=[];if(n===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let e=0;e<n;e++)e===n-1?t.push("  default:{"):t.push(`  case ${e}:{`),t.push(`      outColor = textureSampleGrad(textureSource${e+1}, textureSampler${e+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function Zg(n){return D0[n]||(D0[n]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${Y4(n)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${q4(n)}
            `}}),D0[n]}const w0={};function j4(n){const t=[];for(let e=0;e<n;e++)e>0&&t.push("else"),e<n-1&&t.push(`if(vTextureId < ${e}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${e}], vUV);`),t.push("}");return t.join(`
`)}function Jg(n){return w0[n]||(w0[n]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${n}];

            `,main:`

                ${j4(n)}
            `}}),w0[n]}const Mh={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Dh={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},m1={};function $g(n){let t=m1[n];if(t)return t;const e=new Int32Array(n);for(let i=0;i<n;i++)e[i]=i;return t=m1[n]=new Xn({uTextures:{value:e,type:"i32",size:n}},{isStatic:!0}),t}class L3 extends Kr{constructor(t){const e=Rh({name:"batch",bits:[Qg,Jg(t),Dh]}),i=Bh({name:"batch",bits:[Wg,Zg(t),Mh]});super({glProgram:e,gpuProgram:i,resources:{batchSamplers:$g(t)}})}}let U0=null;const H3=class F3 extends T3{constructor(t){super(t),this.geometry=new C3,this.name=F3.extension.name,this.vertexSize=6,U0??(U0=new L3(t.maxTextures)),this.shader=U0}packAttributes(t,e,i,s,o){const h=o<<16|t.roundPixels&65535,f=t.transform,m=f.a,g=f.b,b=f.c,x=f.d,E=f.tx,A=f.ty,{positions:R,uvs:D}=t,B=t.color,P=t.attributeOffset,G=P+t.attributeSize;for(let H=P;H<G;H++){const j=H*2,Z=R[j],nt=R[j+1];e[s++]=m*Z+b*nt+E,e[s++]=x*nt+g*Z+A,e[s++]=D[j],e[s++]=D[j+1],i[s++]=B,i[s++]=h}}packQuadAttributes(t,e,i,s,o){const h=t.texture,f=t.transform,m=f.a,g=f.b,b=f.c,x=f.d,E=f.tx,A=f.ty,R=t.bounds,D=R.maxX,B=R.minX,P=R.maxY,G=R.minY,H=h.uvs,j=t.color,Z=o<<16|t.roundPixels&65535;e[s+0]=m*B+b*G+E,e[s+1]=x*G+g*B+A,e[s+2]=H.x0,e[s+3]=H.y0,i[s+4]=j,i[s+5]=Z,e[s+6]=m*D+b*G+E,e[s+7]=x*G+g*D+A,e[s+8]=H.x1,e[s+9]=H.y1,i[s+10]=j,i[s+11]=Z,e[s+12]=m*D+b*P+E,e[s+13]=x*P+g*D+A,e[s+14]=H.x2,e[s+15]=H.y2,i[s+16]=j,i[s+17]=Z,e[s+18]=m*B+b*P+E,e[s+19]=x*P+g*B+A,e[s+20]=H.x3,e[s+21]=H.y3,i[s+22]=j,i[s+23]=Z}};H3.extension={type:[q.Batcher],name:"default"};let t_=H3;function V3(n,t,e,i,s,o,h,f=null){let m=0;e*=t,s*=o;const g=f.a,b=f.b,x=f.c,E=f.d,A=f.tx,R=f.ty;for(;m<h;){const D=n[e],B=n[e+1];i[s]=g*D+x*B+A,i[s+1]=b*D+E*B+R,s+=o,e+=t,m++}}function k3(n,t,e,i){let s=0;for(t*=e;s<i;)n[t]=0,n[t+1]=0,t+=e,s++}function Ob(n,t,e,i,s){const o=t.a,h=t.b,f=t.c,m=t.d,g=t.tx,b=t.ty;e||(e=0),i||(i=2),s||(s=n.length/i-e);let x=e*i;for(let E=0;E<s;E++){const A=n[x],R=n[x+1];n[x]=o*A+f*R+g,n[x+1]=h*A+m*R+b,x+=i}}const K4=new Pt;class e_{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,e=t>>16|t&65280|(t&255)<<16,i=this.renderable;return i?db(e,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):e+(this.alpha*255<<24)}get transform(){var t;return((t=this.renderable)==null?void 0:t.groupTransform)||K4}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const Th={extension:{type:q.ShapeBuilder,name:"circle"},build(n,t){let e,i,s,o,h,f;if(n.type==="circle"){const j=n;if(h=f=j.radius,h<=0)return!1;e=j.x,i=j.y,s=o=0}else if(n.type==="ellipse"){const j=n;if(h=j.halfWidth,f=j.halfHeight,h<=0||f<=0)return!1;e=j.x,i=j.y,s=o=0}else{const j=n,Z=j.width/2,nt=j.height/2;e=j.x+Z,i=j.y+nt,h=f=Math.max(0,Math.min(j.radius,Math.min(Z,nt))),s=Z-h,o=nt-f}if(s<0||o<0)return!1;const m=Math.ceil(2.3*Math.sqrt(h+f)),g=m*8+(s?4:0)+(o?4:0);if(g===0)return!1;if(m===0)return t[0]=t[6]=e+s,t[1]=t[3]=i+o,t[2]=t[4]=e-s,t[5]=t[7]=i-o,!0;let b=0,x=m*4+(s?2:0)+2,E=x,A=g,R=s+h,D=o,B=e+R,P=e-R,G=i+D;if(t[b++]=B,t[b++]=G,t[--x]=G,t[--x]=P,o){const j=i-D;t[E++]=P,t[E++]=j,t[--A]=j,t[--A]=B}for(let j=1;j<m;j++){const Z=Math.PI/2*(j/m),nt=s+Math.cos(Z)*h,V=o+Math.sin(Z)*f,ht=e+nt,N=e-nt,Y=i+V,X=i-V;t[b++]=ht,t[b++]=Y,t[--x]=Y,t[--x]=N,t[E++]=N,t[E++]=X,t[--A]=X,t[--A]=ht}R=s,D=o+f,B=e+R,P=e-R,G=i+D;const H=i-D;return t[b++]=B,t[b++]=G,t[--A]=H,t[--A]=B,s&&(t[b++]=P,t[b++]=G,t[--A]=H,t[--A]=P),!0},triangulate(n,t,e,i,s,o){if(n.length===0)return;let h=0,f=0;for(let b=0;b<n.length;b+=2)h+=n[b],f+=n[b+1];h/=n.length/2,f/=n.length/2;let m=i;t[m*e]=h,t[m*e+1]=f;const g=m++;for(let b=0;b<n.length;b+=2)t[m*e]=n[b],t[m*e+1]=n[b+1],b>0&&(s[o++]=m,s[o++]=g,s[o++]=m-1),m++;s[o++]=g+1,s[o++]=g,s[o++]=m-1}},X3={...Th,extension:{...Th.extension,name:"ellipse"}},I3={...Th,extension:{...Th.extension,name:"roundedRectangle"}},Pb=1e-4,yy=1e-4;function Y3(n){const t=n.length;if(t<6)return 1;let e=0;for(let i=0,s=n[t-2],o=n[t-1];i<t;i+=2){const h=n[i],f=n[i+1];e+=(h-s)*(f+o),s=h,o=f}return e<0?-1:1}function g1(n,t,e,i,s,o,h,f){const m=n-e*s,g=t-i*s,b=n+e*o,x=t+i*o;let E,A;h?(E=i,A=-e):(E=-i,A=e);const R=m+E,D=g+A,B=b+E,P=x+A;return f.push(R,D),f.push(B,P),2}function ku(n,t,e,i,s,o,h,f){const m=e-n,g=i-t;let b=Math.atan2(m,g),x=Math.atan2(s-n,o-t);f&&b<x?b+=Math.PI*2:!f&&b>x&&(x+=Math.PI*2);let E=b;const A=x-b,R=Math.abs(A),D=Math.sqrt(m*m+g*g),B=(15*R*Math.sqrt(D)/Math.PI>>0)+1,P=A/B;if(E+=P,f){h.push(n,t),h.push(e,i);for(let G=1,H=E;G<B;G++,H+=P)h.push(n,t),h.push(n+Math.sin(H)*D,t+Math.cos(H)*D);h.push(n,t),h.push(s,o)}else{h.push(e,i),h.push(n,t);for(let G=1,H=E;G<B;G++,H+=P)h.push(n+Math.sin(H)*D,t+Math.cos(H)*D),h.push(n,t);h.push(s,o),h.push(n,t)}return B*2}function q3(n,t,e,i,s,o){const h=Pb;if(n.length===0)return;const f=t;let m=f.alignment;if(t.alignment!==.5){let ft=Y3(n);e&&(ft*=-1),m=(m-.5)*ft+.5}const g=new Xe(n[0],n[1]),b=new Xe(n[n.length-2],n[n.length-1]),x=i,E=Math.abs(g.x-b.x)<h&&Math.abs(g.y-b.y)<h;if(x){n=n.slice(),E&&(n.pop(),n.pop(),b.set(n[n.length-2],n[n.length-1]));const ft=(g.x+b.x)*.5,z=(b.y+g.y)*.5;n.unshift(ft,z),n.push(ft,z)}const A=s,R=n.length/2;let D=n.length;const B=A.length/2,P=f.width/2,G=P*P,H=f.miterLimit*f.miterLimit;let j=n[0],Z=n[1],nt=n[2],V=n[3],ht=0,N=0,Y=-(Z-V),X=j-nt,$=0,ct=0,bt=Math.sqrt(Y*Y+X*X);Y/=bt,X/=bt,Y*=P,X*=P;const Tt=m,F=(1-Tt)*2,K=Tt*2;x||(f.cap==="round"?D+=ku(j-Y*(F-K)*.5,Z-X*(F-K)*.5,j-Y*F,Z-X*F,j+Y*K,Z+X*K,A,!0)+2:f.cap==="square"&&(D+=g1(j,Z,Y,X,F,K,!0,A))),A.push(j-Y*F,Z-X*F),A.push(j+Y*K,Z+X*K);for(let ft=1;ft<R-1;++ft){j=n[(ft-1)*2],Z=n[(ft-1)*2+1],nt=n[ft*2],V=n[ft*2+1],ht=n[(ft+1)*2],N=n[(ft+1)*2+1],Y=-(Z-V),X=j-nt,bt=Math.sqrt(Y*Y+X*X),Y/=bt,X/=bt,Y*=P,X*=P,$=-(V-N),ct=nt-ht,bt=Math.sqrt($*$+ct*ct),$/=bt,ct/=bt,$*=P,ct*=P;const z=nt-j,it=Z-V,At=nt-ht,Rt=N-V,yt=z*At+it*Rt,Mt=it*At-Rt*z,Ft=Mt<0;if(Math.abs(Mt)<.001*Math.abs(yt)){A.push(nt-Y*F,V-X*F),A.push(nt+Y*K,V+X*K),yt>=0&&(f.join==="round"?D+=ku(nt,V,nt-Y*F,V-X*F,nt-$*F,V-ct*F,A,!1)+4:D+=2,A.push(nt-$*K,V-ct*K),A.push(nt+$*F,V+ct*F));continue}const Pe=(-Y+j)*(-X+V)-(-Y+nt)*(-X+Z),Gt=(-$+ht)*(-ct+V)-(-$+nt)*(-ct+N),ne=(z*Gt-At*Pe)/Mt,ce=(Rt*Pe-it*Gt)/Mt,Te=(ne-nt)*(ne-nt)+(ce-V)*(ce-V),Be=nt+(ne-nt)*F,Fe=V+(ce-V)*F,ve=nt-(ne-nt)*K,ln=V-(ce-V)*K,Ge=Math.min(z*z+it*it,At*At+Rt*Rt),In=Ft?F:K,sr=Ge+In*In*G;Te<=sr?f.join==="bevel"||Te/G>H?(Ft?(A.push(Be,Fe),A.push(nt+Y*K,V+X*K),A.push(Be,Fe),A.push(nt+$*K,V+ct*K)):(A.push(nt-Y*F,V-X*F),A.push(ve,ln),A.push(nt-$*F,V-ct*F),A.push(ve,ln)),D+=2):f.join==="round"?Ft?(A.push(Be,Fe),A.push(nt+Y*K,V+X*K),D+=ku(nt,V,nt+Y*K,V+X*K,nt+$*K,V+ct*K,A,!0)+4,A.push(Be,Fe),A.push(nt+$*K,V+ct*K)):(A.push(nt-Y*F,V-X*F),A.push(ve,ln),D+=ku(nt,V,nt-Y*F,V-X*F,nt-$*F,V-ct*F,A,!1)+4,A.push(nt-$*F,V-ct*F),A.push(ve,ln)):(A.push(Be,Fe),A.push(ve,ln)):(A.push(nt-Y*F,V-X*F),A.push(nt+Y*K,V+X*K),f.join==="round"?Ft?D+=ku(nt,V,nt+Y*K,V+X*K,nt+$*K,V+ct*K,A,!0)+2:D+=ku(nt,V,nt-Y*F,V-X*F,nt-$*F,V-ct*F,A,!1)+2:f.join==="miter"&&Te/G<=H&&(Ft?(A.push(ve,ln),A.push(ve,ln)):(A.push(Be,Fe),A.push(Be,Fe)),D+=2),A.push(nt-$*F,V-ct*F),A.push(nt+$*K,V+ct*K),D+=2)}j=n[(R-2)*2],Z=n[(R-2)*2+1],nt=n[(R-1)*2],V=n[(R-1)*2+1],Y=-(Z-V),X=j-nt,bt=Math.sqrt(Y*Y+X*X),Y/=bt,X/=bt,Y*=P,X*=P,A.push(nt-Y*F,V-X*F),A.push(nt+Y*K,V+X*K),x||(f.cap==="round"?D+=ku(nt-Y*(F-K)*.5,V-X*(F-K)*.5,nt-Y*F,V-X*F,nt+Y*K,V+X*K,A,!1)+2:f.cap==="square"&&(D+=g1(nt,V,Y,X,F,K,!1,A)));const ut=yy*yy;for(let ft=B;ft<D+B-2;++ft)j=A[ft*2],Z=A[ft*2+1],nt=A[(ft+1)*2],V=A[(ft+1)*2+1],ht=A[(ft+2)*2],N=A[(ft+2)*2+1],!(Math.abs(j*(V-N)+nt*(N-Z)+ht*(Z-V))<ut)&&o.push(ft,ft+1,ft+2)}function j3(n,t,e,i){const s=Pb;if(n.length===0)return;const o=n[0],h=n[1],f=n[n.length-2],m=n[n.length-1],g=t||Math.abs(o-f)<s&&Math.abs(h-m)<s,b=e,x=n.length/2,E=b.length/2;for(let A=0;A<x;A++)b.push(n[A*2]),b.push(n[A*2+1]);for(let A=0;A<x-1;A++)i.push(E+A,E+A+1);g&&i.push(E+x-1,E)}function Gb(n,t,e,i,s,o,h){const f=o3(n,t,2);if(!f)return;for(let g=0;g<f.length;g+=3)o[h++]=f[g]+s,o[h++]=f[g+1]+s,o[h++]=f[g+2]+s;let m=s*i;for(let g=0;g<n.length;g+=2)e[m]=n[g],e[m+1]=n[g+1],m+=i}const W4=[],K3={extension:{type:q.ShapeBuilder,name:"polygon"},build(n,t){for(let e=0;e<n.points.length;e++)t[e]=n.points[e];return!0},triangulate(n,t,e,i,s,o){Gb(n,W4,t,e,i,s,o)}},W3={extension:{type:q.ShapeBuilder,name:"rectangle"},build(n,t){const e=n,i=e.x,s=e.y,o=e.width,h=e.height;return o>0&&h>0?(t[0]=i,t[1]=s,t[2]=i+o,t[3]=s,t[4]=i+o,t[5]=s+h,t[6]=i,t[7]=s+h,!0):!1},triangulate(n,t,e,i,s,o){let h=0;i*=e,t[i+h]=n[0],t[i+h+1]=n[1],h+=e,t[i+h]=n[2],t[i+h+1]=n[3],h+=e,t[i+h]=n[6],t[i+h+1]=n[7],h+=e,t[i+h]=n[4],t[i+h+1]=n[5],h+=e;const f=i/e;s[o++]=f,s[o++]=f+1,s[o++]=f+2,s[o++]=f+1,s[o++]=f+3,s[o++]=f+2}},Q3={extension:{type:q.ShapeBuilder,name:"triangle"},build(n,t){return t[0]=n.x,t[1]=n.y,t[2]=n.x2,t[3]=n.y2,t[4]=n.x3,t[5]=n.y3,!0},triangulate(n,t,e,i,s,o){let h=0;i*=e,t[i+h]=n[0],t[i+h+1]=n[1],h+=e,t[i+h]=n[2],t[i+h+1]=n[3],h+=e,t[i+h]=n[4],t[i+h+1]=n[5];const f=i/e;s[o++]=f,s[o++]=f+1,s[o++]=f+2}},Q4=new Pt,Z4=new Oe;function Z3(n,t,e,i){const s=t.matrix?n.copyFrom(t.matrix).invert():n.identity();if(t.textureSpace==="local"){const h=e.getBounds(Z4);t.width&&h.pad(t.width);const{x:f,y:m}=h,g=1/h.width,b=1/h.height,x=-f*g,E=-m*b,A=s.a,R=s.b,D=s.c,B=s.d;s.a*=g,s.b*=g,s.c*=b,s.d*=b,s.tx=x*A+E*D+s.tx,s.ty=x*R+E*B+s.ty}else s.translate(t.texture.frame.x,t.texture.frame.y),s.scale(1/t.texture.source.width,1/t.texture.source.height);const o=t.texture.source.style;return!(t.fill instanceof Ja)&&o.addressMode==="clamp-to-edge"&&(o.addressMode="repeat",o.update()),i&&s.append(Q4.copyFrom(i).invert()),s}const Yd={};De.handleByMap(q.ShapeBuilder,Yd);De.add(W3,K3,Q3,Th,X3,I3);const J4=new Oe,$4=new Pt;function J3(n,t){const{geometryData:e,batches:i}=t;i.length=0,e.indices.length=0,e.vertices.length=0,e.uvs.length=0;for(let s=0;s<n.instructions.length;s++){const o=n.instructions[s];if(o.action==="texture")tw(o.data,i,e);else if(o.action==="fill"||o.action==="stroke"){const h=o.action==="stroke",f=o.data.path.shapePath,m=o.data.style,g=o.data.hole;h&&g&&_1(g.shapePath,m,!0,i,e),g&&(f.shapePrimitives[f.shapePrimitives.length-1].holes=g.shapePath.shapePrimitives),_1(f,m,h,i,e)}}}function tw(n,t,e){const i=[],s=Yd.rectangle,o=J4;o.x=n.dx,o.y=n.dy,o.width=n.dw,o.height=n.dh;const h=n.transform;if(!s.build(o,i))return;const{vertices:f,uvs:m,indices:g}=e,b=g.length,x=f.length/2;h&&Ob(i,h),s.triangulate(i,f,2,x,g,b);const E=n.image,A=E.uvs;m.push(A.x0,A.y0,A.x1,A.y1,A.x3,A.y3,A.x2,A.y2);const R=mi.get(e_);R.indexOffset=b,R.indexSize=g.length-b,R.attributeOffset=x,R.attributeSize=f.length/2-x,R.baseColor=n.style,R.alpha=n.alpha,R.texture=E,R.geometryData=e,t.push(R)}function _1(n,t,e,i,s){const{vertices:o,uvs:h,indices:f}=s;n.shapePrimitives.forEach(({shape:m,transform:g,holes:b})=>{const x=[],E=Yd[m.type];if(!E.build(m,x))return;const A=f.length,R=o.length/2;let D="triangle-list";if(g&&Ob(x,g),e){const H=m.closePath??!0,j=t;j.pixelLine?(j3(x,H,o,f),D="line-list"):q3(x,j,!1,H,o,f)}else if(b){const H=[],j=x.slice();ew(b).forEach(nt=>{H.push(j.length/2),j.push(...nt)}),Gb(j,H,o,2,R,f,A)}else E.triangulate(x,o,2,R,f,A);const B=h.length/2,P=t.texture;if(P!==Ct.WHITE){const H=Z3($4,t,m,g);V3(o,2,R,h,B,2,o.length/2-R,H)}else k3(h,B,2,o.length/2-R);const G=mi.get(e_);G.indexOffset=A,G.indexSize=f.length-A,G.attributeOffset=R,G.attributeSize=o.length/2-R,G.baseColor=t.color,G.alpha=t.alpha,G.texture=P,G.geometryData=s,G.topology=D,i.push(G)})}function ew(n){const t=[];for(let e=0;e<n.length;e++){const i=n[e].shape,s=[];Yd[i.type].build(i,s)&&t.push(s)}return t}class $3{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class tT{constructor(){this.instructions=new mb}init(t){this.batcher=new t_({maxTextures:t}),this.instructions.reset()}get geometry(){return wt(wS,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const Nb=class by{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(t){by.defaultOptions.bezierSmoothness=(t==null?void 0:t.bezierSmoothness)??by.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),J3(t,e);const i=t.batchMode;t.customShader||i==="no-batch"?e.isBatchable=!1:i==="auto"?e.isBatchable=e.geometryData.vertices.length<400:e.isBatchable=!0,t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const e=mi.get(tT,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:i,geometryData:s}=this._gpuContextHash[t.uid],o=s.vertices.length,h=s.indices.length;for(let b=0;b<i.length;b++)i[b].applyTransform=!1;const f=e.batcher;f.ensureAttributeBuffer(o),f.ensureIndexBuffer(h),f.begin();for(let b=0;b<i.length;b++){const x=i[b];f.add(x)}f.finish(e.instructions);const m=f.geometry;m.indexBuffer.setDataWithSize(f.indexBuffer,f.indexSize,!0),m.buffers[0].setDataWithSize(f.attributeBuffer.float32View,f.attributeSize,!0);const g=f.batches;for(let b=0;b<g.length;b++){const x=g[b];x.bindGroup=Kg(x.textures.textures,x.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new $3;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(mi.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(i=>{mi.return(i)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};Nb.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"graphicsContext"};Nb.defaultOptions={bezierSmoothness:.5};let zb=Nb;const nw=8,Ym=11920929e-14,iw=1;function Lb(n,t,e,i,s,o,h,f,m,g){const x=Math.min(.99,Math.max(0,g??zb.defaultOptions.bezierSmoothness));let E=(iw-x)/1;return E*=E,rw(t,e,i,s,o,h,f,m,n,E),n}function rw(n,t,e,i,s,o,h,f,m,g){vy(n,t,e,i,s,o,h,f,m,g,0),m.push(h,f)}function vy(n,t,e,i,s,o,h,f,m,g,b){if(b>nw)return;const x=(n+e)/2,E=(t+i)/2,A=(e+s)/2,R=(i+o)/2,D=(s+h)/2,B=(o+f)/2,P=(x+A)/2,G=(E+R)/2,H=(A+D)/2,j=(R+B)/2,Z=(P+H)/2,nt=(G+j)/2;if(b>0){let V=h-n,ht=f-t;const N=Math.abs((e-h)*ht-(i-f)*V),Y=Math.abs((s-h)*ht-(o-f)*V);if(N>Ym&&Y>Ym){if((N+Y)*(N+Y)<=g*(V*V+ht*ht)){m.push(Z,nt);return}}else if(N>Ym){if(N*N<=g*(V*V+ht*ht)){m.push(Z,nt);return}}else if(Y>Ym){if(Y*Y<=g*(V*V+ht*ht)){m.push(Z,nt);return}}else if(V=Z-(n+h)/2,ht=nt-(t+f)/2,V*V+ht*ht<=g){m.push(Z,nt);return}}vy(n,t,x,E,P,G,Z,nt,m,g,b+1),vy(Z,nt,H,j,D,B,h,f,m,g,b+1)}const sw=8,aw=11920929e-14,lw=1;function eT(n,t,e,i,s,o,h,f){const g=Math.min(.99,Math.max(0,f??zb.defaultOptions.bezierSmoothness));let b=(lw-g)/1;return b*=b,ow(t,e,i,s,o,h,n,b),n}function ow(n,t,e,i,s,o,h,f){xy(h,n,t,e,i,s,o,f,0),h.push(s,o)}function xy(n,t,e,i,s,o,h,f,m){if(m>sw)return;const g=(t+i)/2,b=(e+s)/2,x=(i+o)/2,E=(s+h)/2,A=(g+x)/2,R=(b+E)/2;let D=o-t,B=h-e;const P=Math.abs((i-o)*B-(s-h)*D);if(P>aw){if(P*P<=f*(D*D+B*B)){n.push(A,R);return}}else if(D=A-(t+o)/2,B=R-(e+h)/2,D*D+B*B<=f){n.push(A,R);return}xy(n,t,e,g,b,A,R,f,m+1),xy(n,A,R,x,E,o,h,f,m+1)}function Hb(n,t,e,i,s,o,h,f){let m=Math.abs(s-o);(!h&&s>o||h&&o>s)&&(m=2*Math.PI-m),f||(f=Math.max(6,Math.floor(6*Math.pow(i,1/3)*(m/Math.PI)))),f=Math.max(f,3);let g=m/f,b=s;g*=h?-1:1;for(let x=0;x<f+1;x++){const E=Math.cos(b),A=Math.sin(b),R=t+E*i,D=e+A*i;n.push(R,D),b+=g}}function nT(n,t,e,i,s,o){const h=n[n.length-2],m=n[n.length-1]-e,g=h-t,b=s-e,x=i-t,E=Math.abs(m*x-g*b);if(E<1e-8||o===0){(n[n.length-2]!==t||n[n.length-1]!==e)&&n.push(t,e);return}const A=m*m+g*g,R=b*b+x*x,D=m*b+g*x,B=o*Math.sqrt(A)/E,P=o*Math.sqrt(R)/E,G=B*D/A,H=P*D/R,j=B*x+P*g,Z=B*b+P*m,nt=g*(P+G),V=m*(P+G),ht=x*(B+H),N=b*(B+H),Y=Math.atan2(V-Z,nt-j),X=Math.atan2(N-Z,ht-j);Hb(n,j+t,Z+e,o,Y,X,g*b>x*m)}const bd=Math.PI*2,O0={centerX:0,centerY:0,ang1:0,ang2:0},P0=({x:n,y:t},e,i,s,o,h,f,m)=>{n*=e,t*=i;const g=s*n-o*t,b=o*n+s*t;return m.x=g+h,m.y=b+f,m};function uw(n,t){const e=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=t===1.5707963267948966?.551915024494:e,s=Math.cos(n),o=Math.sin(n),h=Math.cos(n+t),f=Math.sin(n+t);return[{x:s-o*i,y:o+s*i},{x:h+f*i,y:f-h*i},{x:h,y:f}]}const y1=(n,t,e,i)=>{const s=n*i-t*e<0?-1:1;let o=n*e+t*i;return o>1&&(o=1),o<-1&&(o=-1),s*Math.acos(o)},cw=(n,t,e,i,s,o,h,f,m,g,b,x,E)=>{const A=Math.pow(s,2),R=Math.pow(o,2),D=Math.pow(b,2),B=Math.pow(x,2);let P=A*R-A*B-R*D;P<0&&(P=0),P/=A*B+R*D,P=Math.sqrt(P)*(h===f?-1:1);const G=P*s/o*x,H=P*-o/s*b,j=g*G-m*H+(n+e)/2,Z=m*G+g*H+(t+i)/2,nt=(b-G)/s,V=(x-H)/o,ht=(-b-G)/s,N=(-x-H)/o,Y=y1(1,0,nt,V);let X=y1(nt,V,ht,N);f===0&&X>0&&(X-=bd),f===1&&X<0&&(X+=bd),E.centerX=j,E.centerY=Z,E.ang1=Y,E.ang2=X};function iT(n,t,e,i,s,o,h,f=0,m=0,g=0){if(o===0||h===0)return;const b=Math.sin(f*bd/360),x=Math.cos(f*bd/360),E=x*(t-i)/2+b*(e-s)/2,A=-b*(t-i)/2+x*(e-s)/2;if(E===0&&A===0)return;o=Math.abs(o),h=Math.abs(h);const R=Math.pow(E,2)/Math.pow(o,2)+Math.pow(A,2)/Math.pow(h,2);R>1&&(o*=Math.sqrt(R),h*=Math.sqrt(R)),cw(t,e,i,s,o,h,m,g,b,x,E,A,O0);let{ang1:D,ang2:B}=O0;const{centerX:P,centerY:G}=O0;let H=Math.abs(B)/(bd/4);Math.abs(1-H)<1e-7&&(H=1);const j=Math.max(Math.ceil(H),1);B/=j;let Z=n[n.length-2],nt=n[n.length-1];const V={x:0,y:0};for(let ht=0;ht<j;ht++){const N=uw(D,B),{x:Y,y:X}=P0(N[0],o,h,x,b,P,G,V),{x:$,y:ct}=P0(N[1],o,h,x,b,P,G,V),{x:bt,y:Tt}=P0(N[2],o,h,x,b,P,G,V);Lb(n,Z,nt,Y,X,$,ct,bt,Tt),Z=bt,nt=Tt,D+=B}}function rT(n,t,e){const i=(h,f)=>{const m=f.x-h.x,g=f.y-h.y,b=Math.sqrt(m*m+g*g),x=m/b,E=g/b;return{len:b,nx:x,ny:E}},s=(h,f)=>{h===0?n.moveTo(f.x,f.y):n.lineTo(f.x,f.y)};let o=t[t.length-1];for(let h=0;h<t.length;h++){const f=t[h%t.length],m=f.radius??e;if(m<=0){s(h,f),o=f;continue}const g=t[(h+1)%t.length],b=i(f,o),x=i(f,g);if(b.len<1e-4||x.len<1e-4){s(h,f),o=f;continue}let E=Math.asin(b.nx*x.ny-b.ny*x.nx),A=1,R=!1;b.nx*x.nx-b.ny*-x.ny<0?E<0?E=Math.PI+E:(E=Math.PI-E,A=-1,R=!0):E>0&&(A=-1,R=!0);const D=E/2;let B,P=Math.abs(Math.cos(D)*m/Math.sin(D));P>Math.min(b.len/2,x.len/2)?(P=Math.min(b.len/2,x.len/2),B=Math.abs(P*Math.sin(D)/Math.cos(D))):B=m;const G=f.x+x.nx*P+-x.ny*B*A,H=f.y+x.ny*P+x.nx*B*A,j=Math.atan2(b.ny,b.nx)+Math.PI/2*A,Z=Math.atan2(x.ny,x.nx)-Math.PI/2*A;h===0&&n.moveTo(G+Math.cos(j)*B,H+Math.sin(j)*B),n.arc(G,H,B,j,Z,R),o=f}}function sT(n,t,e,i){const s=(f,m)=>Math.sqrt((f.x-m.x)**2+(f.y-m.y)**2),o=(f,m,g)=>({x:f.x+(m.x-f.x)*g,y:f.y+(m.y-f.y)*g}),h=t.length;for(let f=0;f<h;f++){const m=t[(f+1)%h],g=m.radius??e;if(g<=0){f===0?n.moveTo(m.x,m.y):n.lineTo(m.x,m.y);continue}const b=t[f],x=t[(f+2)%h],E=s(b,m);let A;if(E<1e-4)A=m;else{const B=Math.min(E/2,g);A=o(m,b,B/E)}const R=s(x,m);let D;if(R<1e-4)D=m;else{const B=Math.min(R/2,g);D=o(m,x,B/R)}f===0?n.moveTo(A.x,A.y):n.lineTo(A.x,A.y),n.quadraticCurveTo(m.x,m.y,D.x,D.y,i)}}const hw=new Oe;class aT{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new ti,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const i=this._currentPoly.points,s=i[i.length-2],o=i[i.length-1];return(s!==t||o!==e)&&i.push(t,e),this}arc(t,e,i,s,o,h){this._ensurePoly(!1);const f=this._currentPoly.points;return Hb(f,t,e,i,s,o,h),this}arcTo(t,e,i,s,o){this._ensurePoly();const h=this._currentPoly.points;return nT(h,t,e,i,s,o),this}arcToSvg(t,e,i,s,o,h,f){const m=this._currentPoly.points;return iT(m,this._currentPoly.lastX,this._currentPoly.lastY,h,f,t,e,i,s,o),this}bezierCurveTo(t,e,i,s,o,h,f){this._ensurePoly();const m=this._currentPoly;return Lb(this._currentPoly.points,m.lastX,m.lastY,t,e,i,s,o,h,f),this}quadraticCurveTo(t,e,i,s,o){this._ensurePoly();const h=this._currentPoly;return eT(this._currentPoly.points,h.lastX,h.lastY,t,e,i,s,o),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));const i=this.shapePrimitives,s=i.length;for(let o=0;o<t.instructions.length;o++){const h=t.instructions[o];this[h.action](...h.data)}if(t.checkForHoles&&i.length-s>1){let o=null;for(let h=s;h<i.length;h++){const f=i[h];if(f.shape.type==="polygon"){const m=f.shape,g=o==null?void 0:o.shape;g&&g.containsPolygon(m)?(o.holes||(o.holes=[]),o.holes.push(f),i.copyWithin(h,h+1),i.length--,h--):o=f}}}return this}finish(t=!1){this.endPoly(t)}rect(t,e,i,s,o){return this.drawShape(new Oe(t,e,i,s),o),this}circle(t,e,i,s){return this.drawShape(new Yg(t,e,i),s),this}poly(t,e,i){const s=new dh(t);return s.closePath=e,this.drawShape(s,i),this}regularPoly(t,e,i,s,o=0,h){s=Math.max(s|0,3);const f=-1*Math.PI/2+o,m=Math.PI*2/s,g=[];for(let b=0;b<s;b++){const x=f-b*m;g.push(t+i*Math.cos(x),e+i*Math.sin(x))}return this.poly(g,!0,h),this}roundPoly(t,e,i,s,o,h=0,f){if(s=Math.max(s|0,3),o<=0)return this.regularPoly(t,e,i,s,h);const m=i*Math.sin(Math.PI/s)-.001;o=Math.min(o,m);const g=-1*Math.PI/2+h,b=Math.PI*2/s,x=(s-2)*Math.PI/s/2;for(let E=0;E<s;E++){const A=E*b+g,R=t+i*Math.cos(A),D=e+i*Math.sin(A),B=A+Math.PI+x,P=A-Math.PI-x,G=R+o*Math.cos(B),H=D+o*Math.sin(B),j=R+o*Math.cos(P),Z=D+o*Math.sin(P);E===0?this.moveTo(G,H):this.lineTo(G,H),this.quadraticCurveTo(R,D,j,Z,f)}return this.closePath()}roundShape(t,e,i=!1,s){return t.length<3?this:(i?sT(this,t,e,s):rT(this,t,e),this.closePath())}filletRect(t,e,i,s,o){if(o===0)return this.rect(t,e,i,s);const h=Math.min(i,s)/2,f=Math.min(h,Math.max(-h,o)),m=t+i,g=e+s,b=f<0?-f:0,x=Math.abs(f);return this.moveTo(t,e+x).arcTo(t+b,e+b,t+x,e,x).lineTo(m-x,e).arcTo(m-b,e+b,m,e+x,x).lineTo(m,g-x).arcTo(m-b,g-b,t+i-x,g,x).lineTo(t+x,g).arcTo(t+b,g-b,t,g-x,x).closePath()}chamferRect(t,e,i,s,o,h){if(o<=0)return this.rect(t,e,i,s);const f=Math.min(o,Math.min(i,s)/2),m=t+i,g=e+s,b=[t+f,e,m-f,e,m,e+f,m,g-f,m-f,g,t+f,g,t,g-f,t,e+f];for(let x=b.length-1;x>=2;x-=2)b[x]===b[x-2]&&b[x-1]===b[x-3]&&b.splice(x-1,2);return this.poly(b,!0,h)}ellipse(t,e,i,s,o){return this.drawShape(new qg(t,e,i,s),o),this}roundRect(t,e,i,s,o,h){return this.drawShape(new jg(t,e,i,s,o),h),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),i=new dh,i.points.push(t,e),this._currentPoly=i,this}endPoly(t=!1){const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new dh,t)){const e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let i=e.shape.x,s=e.shape.y;if(e.transform&&!e.transform.isIdentity()){const o=e.transform,h=i;i=o.a*i+o.c*s+o.tx,s=o.b*h+o.d*s+o.ty}this._currentPoly.points.push(i,s)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let i=0;i<e.length;i++){const s=e[i],o=s.shape.getBounds(hw);s.transform?t.addRect(o,s.transform):t.addRect(o)}return t}}class Ju{constructor(t,e=!1){this.instructions=[],this.uid=rn("graphicsPath"),this._dirty=!0,this.checkForHoles=e,typeof t=="string"?m3(t,this):this.instructions=(t==null?void 0:t.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new aT(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,i,s,o){const h=this.instructions[this.instructions.length-1],f=this.getLastPoint(Xe.shared);let m=0,g=0;if(!h||h.action!=="bezierCurveTo")m=f.x,g=f.y;else{m=h.data[2],g=h.data[3];const b=f.x,x=f.y;m=b+(b-m),g=x+(x-g)}return this.instructions.push({action:"bezierCurveTo",data:[m,g,t,e,i,s,o]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,i){const s=this.instructions[this.instructions.length-1],o=this.getLastPoint(Xe.shared);let h=0,f=0;if(!s||s.action!=="quadraticCurveTo")h=o.x,f=o.y;else{h=s.data[0],f=s.data[1];const m=o.x,g=o.y;h=m+(m-h),f=g+(g-f)}return this.instructions.push({action:"quadraticCurveTo",data:[h,f,t,e,i]}),this._dirty=!0,this}rect(t,e,i,s,o){return this.instructions.push({action:"rect",data:[t,e,i,s,o]}),this._dirty=!0,this}circle(t,e,i,s){return this.instructions.push({action:"circle",data:[t,e,i,s]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,i,s,o,h,f){o||(o=s/2);const m=-1*Math.PI/2+h,g=i*2,b=Math.PI*2/g,x=[];for(let E=0;E<g;E++){const A=E%2?o:s,R=E*b+m;x.push(t+A*Math.cos(R),e+A*Math.sin(R))}return this.poly(x,!0,f),this}clone(t=!1){const e=new Ju;if(e.checkForHoles=this.checkForHoles,!t)e.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){const s=this.instructions[i];e.instructions.push({action:s.action,data:s.data.slice()})}return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,i=t.b,s=t.c,o=t.d,h=t.tx,f=t.ty;let m=0,g=0,b=0,x=0,E=0,A=0,R=0,D=0;for(let B=0;B<this.instructions.length;B++){const P=this.instructions[B],G=P.data;switch(P.action){case"moveTo":case"lineTo":m=G[0],g=G[1],G[0]=e*m+s*g+h,G[1]=i*m+o*g+f;break;case"bezierCurveTo":b=G[0],x=G[1],E=G[2],A=G[3],m=G[4],g=G[5],G[0]=e*b+s*x+h,G[1]=i*b+o*x+f,G[2]=e*E+s*A+h,G[3]=i*E+o*A+f,G[4]=e*m+s*g+h,G[5]=i*m+o*g+f;break;case"quadraticCurveTo":b=G[0],x=G[1],m=G[2],g=G[3],G[0]=e*b+s*x+h,G[1]=i*b+o*x+f,G[2]=e*m+s*g+h,G[3]=i*m+o*g+f;break;case"arcToSvg":m=G[5],g=G[6],R=G[0],D=G[1],G[0]=e*R+s*D,G[1]=i*R+o*D,G[5]=e*m+s*g+h,G[6]=i*m+o*g+f;break;case"circle":G[4]=ed(G[3],t);break;case"rect":G[4]=ed(G[4],t);break;case"ellipse":G[8]=ed(G[8],t);break;case"roundRect":G[5]=ed(G[5],t);break;case"addPath":G[0].transform(t);break;case"poly":G[2]=ed(G[2],t);break;default:Xt("unknown transform action",P.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,i=this.instructions[e];if(!i)return t.x=0,t.y=0,t;for(;i.action==="closePath";){if(e--,e<0)return t.x=0,t.y=0,t;i=this.instructions[e]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t);break}return t}}function ed(n,t){return n?n.prepend(t):t.clone()}function vn(n,t,e){const i=n.getAttribute(t);return i?Number(i):e}function lT(n,t){const e=n.querySelectorAll("defs");for(let i=0;i<e.length;i++){const s=e[i];for(let o=0;o<s.children.length;o++){const h=s.children[o];switch(h.nodeName.toLowerCase()){case"lineargradient":t.defs[h.id]=fw(h);break;case"radialgradient":t.defs[h.id]=dw();break}}}}function fw(n){const t=vn(n,"x1",0),e=vn(n,"y1",0),i=vn(n,"x2",1),s=vn(n,"y2",0),o=n.getAttribute("gradientUnits")||"objectBoundingBox",h=new Ja(t,e,i,s,o==="objectBoundingBox"?"local":"global");for(let f=0;f<n.children.length;f++){const m=n.children[f],g=vn(m,"offset",0),b=Ce.shared.setValue(m.getAttribute("stop-color")).toNumber();h.addColorStop(g,b)}return h}function dw(n){return Xt("[SVG Parser] Radial gradients are not yet supported"),new Ja(0,0,1,0)}function Sy(n){const t=n.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const Ey={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function Fb(n,t){const e=n.getAttribute("style"),i={},s={},o={strokeStyle:i,fillStyle:s,useFill:!1,useStroke:!1};for(const h in Ey){const f=n.getAttribute(h);f&&b1(t,o,h,f.trim())}if(e){const h=e.split(";");for(let f=0;f<h.length;f++){const m=h[f].trim(),[g,b]=m.split(":");Ey[g]&&b1(t,o,g,b.trim())}}return{strokeStyle:o.useStroke?i:null,fillStyle:o.useFill?s:null,useFill:o.useFill,useStroke:o.useStroke}}function b1(n,t,e,i){switch(e){case"stroke":if(i!=="none"){if(i.startsWith("url(")){const s=Sy(i);t.strokeStyle.fill=n.defs[s]}else t.strokeStyle.color=Ce.shared.setValue(i).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(i);break;case"fill":if(i!=="none"){if(i.startsWith("url(")){const s=Sy(i);t.fillStyle.fill=n.defs[s]}else t.fillStyle.color=Ce.shared.setValue(i).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(i);break;case"stroke-opacity":t.strokeStyle.alpha=Number(i);break;case"opacity":t.fillStyle.alpha=Number(i),t.strokeStyle.alpha=Number(i);break}}function oT(n,t){if(typeof n=="string"){const h=document.createElement("div");h.innerHTML=n.trim(),n=h.querySelector("svg")}const e={context:t,defs:{},path:new Ju};lT(n,e);const i=n.children,{fillStyle:s,strokeStyle:o}=Fb(n,e);for(let h=0;h<i.length;h++){const f=i[h];f.nodeName.toLowerCase()!=="defs"&&uT(f,e,s,o)}return t}function uT(n,t,e,i){const s=n.children,{fillStyle:o,strokeStyle:h}=Fb(n,t);o&&e?e={...e,...o}:o&&(e=o),h&&i?i={...i,...h}:h&&(i=h);const f=!e&&!i;f&&(e={color:0});let m,g,b,x,E,A,R,D,B,P,G,H,j,Z,nt,V,ht;switch(n.nodeName.toLowerCase()){case"path":Z=n.getAttribute("d"),n.getAttribute("fill-rule")==="evenodd"&&Xt("SVG Evenodd fill rule not supported, your svg may render incorrectly"),nt=new Ju(Z,!0),t.context.path(nt),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"circle":R=vn(n,"cx",0),D=vn(n,"cy",0),B=vn(n,"r",0),t.context.ellipse(R,D,B,B),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"rect":m=vn(n,"x",0),g=vn(n,"y",0),V=vn(n,"width",0),ht=vn(n,"height",0),P=vn(n,"rx",0),G=vn(n,"ry",0),P||G?t.context.roundRect(m,g,V,ht,P||G):t.context.rect(m,g,V,ht),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"ellipse":R=vn(n,"cx",0),D=vn(n,"cy",0),P=vn(n,"rx",0),G=vn(n,"ry",0),t.context.beginPath(),t.context.ellipse(R,D,P,G),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"line":b=vn(n,"x1",0),x=vn(n,"y1",0),E=vn(n,"x2",0),A=vn(n,"y2",0),t.context.beginPath(),t.context.moveTo(b,x),t.context.lineTo(E,A),i&&t.context.stroke(i);break;case"polygon":j=n.getAttribute("points"),H=j.match(/\d+/g).map(N=>parseInt(N,10)),t.context.poly(H,!0),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"polyline":j=n.getAttribute("points"),H=j.match(/\d+/g).map(N=>parseInt(N,10)),t.context.poly(H,!1),i&&t.context.stroke(i);break;case"g":case"svg":break;default:{Xt(`[SVG parser] <${n.nodeName}> elements unsupported`);break}}f&&(e=null);for(let N=0;N<s.length;N++)uT(s[N],t,e,i)}function pw(n){return Ce.isColorLike(n)}function v1(n){return n instanceof Id}function x1(n){return n instanceof Ja}function mw(n){return n instanceof Ct}function gw(n,t,e){const i=Ce.shared.setValue(t??0);return n.color=i.toNumber(),n.alpha=i.alpha===1?e.alpha:i.alpha,n.texture=Ct.WHITE,{...e,...n}}function _w(n,t,e){return n.texture=t,{...e,...n}}function S1(n,t,e){return n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,{...e,...n}}function E1(n,t,e){return t.buildGradient(),n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,n.textureSpace=t.textureSpace,{...e,...n}}function yw(n,t){const e={...t,...n},i=Ce.shared.setValue(e.color);return e.alpha*=i.alpha,e.color=i.toNumber(),e}function Vo(n,t){if(n==null)return null;const e={},i=n;return pw(n)?gw(e,n,t):mw(n)?_w(e,n,t):v1(n)?S1(e,n,t):x1(n)?E1(e,n,t):i.fill&&v1(i.fill)?S1(i,i.fill,t):i.fill&&x1(i.fill)?E1(i,i.fill,t):yw(i,t)}function Od(n,t){const{width:e,alignment:i,miterLimit:s,cap:o,join:h,pixelLine:f,...m}=t,g=Vo(n,m);return g?{width:e,alignment:i,miterLimit:s,cap:o,join:h,pixelLine:f,...g}:null}const bw=new Xe,T1=new Pt,Vb=class Ka extends ei{constructor(){super(...arguments),this.uid=rn("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Ju,this._transform=new Pt,this._fillStyle={...Ka.defaultFillStyle},this._strokeStyle={...Ka.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new ti,this._boundsDirty=!0}clone(){const t=new Ka;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=Vo(t,Ka.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=Od(t,Ka.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=Vo(t,Ka.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=Vo(t,Ka.defaultStrokeStyle),this}texture(t,e,i,s,o,h){return this.instructions.push({action:"texture",data:{image:t,dx:i||0,dy:s||0,dw:o||t.frame.width,dh:h||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?Ce.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Ju,this}fill(t,e){let i;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s&&s.action==="stroke"?i=s.data.path:i=this._activePath.clone(),i?(t!=null&&(e!==void 0&&typeof t=="number"&&(wt(Jt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:e}),this._fillStyle=Vo(t,Ka.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(Xe.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(t){let e;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?e=i.data.path:e=this._activePath.clone(),e?(t!=null&&(this._strokeStyle=Od(t,Ka.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:e}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(e&&(e.action==="stroke"||e.action==="fill"))if(e.data.hole)e.data.hole.addPath(i);else{e.data.hole=i;break}}return this._initNextPathLocation(),this}arc(t,e,i,s,o,h){this._tick++;const f=this._transform;return this._activePath.arc(f.a*t+f.c*e+f.tx,f.b*t+f.d*e+f.ty,i,s,o,h),this}arcTo(t,e,i,s,o){this._tick++;const h=this._transform;return this._activePath.arcTo(h.a*t+h.c*e+h.tx,h.b*t+h.d*e+h.ty,h.a*i+h.c*s+h.tx,h.b*i+h.d*s+h.ty,o),this}arcToSvg(t,e,i,s,o,h,f){this._tick++;const m=this._transform;return this._activePath.arcToSvg(t,e,i,s,o,m.a*h+m.c*f+m.tx,m.b*h+m.d*f+m.ty),this}bezierCurveTo(t,e,i,s,o,h,f){this._tick++;const m=this._transform;return this._activePath.bezierCurveTo(m.a*t+m.c*e+m.tx,m.b*t+m.d*e+m.ty,m.a*i+m.c*s+m.tx,m.b*i+m.d*s+m.ty,m.a*o+m.c*h+m.tx,m.b*o+m.d*h+m.ty,f),this}closePath(){var t;return this._tick++,(t=this._activePath)==null||t.closePath(),this}ellipse(t,e,i,s){return this._tick++,this._activePath.ellipse(t,e,i,s,this._transform.clone()),this}circle(t,e,i){return this._tick++,this._activePath.circle(t,e,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty),this}moveTo(t,e){this._tick++;const i=this._transform,s=this._activePath.instructions,o=i.a*t+i.c*e+i.tx,h=i.b*t+i.d*e+i.ty;return s.length===1&&s[0].action==="moveTo"?(s[0].data[0]=o,s[0].data[1]=h,this):(this._activePath.moveTo(o,h),this)}quadraticCurveTo(t,e,i,s,o){this._tick++;const h=this._transform;return this._activePath.quadraticCurveTo(h.a*t+h.c*e+h.tx,h.b*t+h.d*e+h.ty,h.a*i+h.c*s+h.tx,h.b*i+h.d*s+h.ty,o),this}rect(t,e,i,s){return this._tick++,this._activePath.rect(t,e,i,s,this._transform.clone()),this}roundRect(t,e,i,s,o){return this._tick++,this._activePath.roundRect(t,e,i,s,o,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,i,s,o=0,h){return this._tick++,this._activePath.regularPoly(t,e,i,s,o,h),this}roundPoly(t,e,i,s,o,h){return this._tick++,this._activePath.roundPoly(t,e,i,s,o,h),this}roundShape(t,e,i,s){return this._tick++,this._activePath.roundShape(t,e,i,s),this}filletRect(t,e,i,s,o){return this._tick++,this._activePath.filletRect(t,e,i,s,o),this}chamferRect(t,e,i,s,o,h){return this._tick++,this._activePath.chamferRect(t,e,i,s,o,h),this}star(t,e,i,s,o=0,h=0){return this._tick++,this._activePath.star(t,e,i,s,o,h,this._transform.clone()),this}svg(t){return this._tick++,oT(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,i,s,o,h){return t instanceof Pt?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,i,s,o,h),this)}transform(t,e,i,s,o,h){return t instanceof Pt?(this._transform.append(t),this):(T1.set(t,e,i,s,o,h),this._transform.append(T1),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const i=this.instructions[e],s=i.action;if(s==="fill"){const o=i.data;t.addBounds(o.path.bounds)}else if(s==="texture"){const o=i.data;t.addFrame(o.dx,o.dy,o.dx+o.dw,o.dy+o.dh,o.transform)}if(s==="stroke"){const o=i.data,h=o.style.alignment,f=o.style.width*(1-h),m=o.path.bounds;t.addFrame(m.minX-f,m.minY-f,m.maxX+f,m.maxY+f)}}return t}containsPoint(t){var s;if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let i=!1;for(let o=0;o<e.length;o++){const h=e[o],f=h.data,m=f.path;if(!h.action||!m)continue;const g=f.style,b=m.shapePath.shapePrimitives;for(let x=0;x<b.length;x++){const E=b[x].shape;if(!g||!E)continue;const A=b[x].transform,R=A?A.applyInverse(t,bw):t;if(h.action==="fill")i=E.contains(R.x,R.y);else{const B=g;i=E.strokeContains(R.x,R.y,B.width,B.alignment)}const D=f.hole;if(D){const B=(s=D.shapePath)==null?void 0:s.shapePrimitives;if(B)for(let P=0;P<B.length;P++)B[P].shape.contains(R.x,R.y)&&(i=!1)}if(i)return!0}}return i}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(i),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(i)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Vb.defaultFillStyle={color:16777215,alpha:1,texture:Ct.WHITE,matrix:null,fill:null,textureSpace:"local"};Vb.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Ct.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let ir=Vb;const A1=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function cT(n){const t=[];let e=0;for(let i=0;i<A1.length;i++){const s=`_${A1[i]}`;t[e++]=n[s]}return e=hT(n._fill,t,e),e=xw(n._stroke,t,e),e=Sw(n.dropShadow,t,e),e=vw(n.filters,t,e),t.join("-")}function vw(n,t,e){if(!n)return e;for(const i of n)t[e++]=i.uid;return e}function hT(n,t,e){var i;return n&&(t[e++]=n.color,t[e++]=n.alpha,t[e++]=(i=n.fill)==null?void 0:i.styleKey),e}function xw(n,t,e){return n&&(e=hT(n,t,e),t[e++]=n.width,t[e++]=n.alignment,t[e++]=n.cap,t[e++]=n.join,t[e++]=n.miterLimit),e}function Sw(n,t,e){return n&&(t[e++]=n.alpha,t[e++]=n.angle,t[e++]=n.blur,t[e++]=n.distance,t[e++]=Ce.shared.setValue(n.color).toNumber()),e}const kb=class sh extends ei{constructor(t={}){super(),Ew(t);const e={...sh.defaultTextStyle,...t};for(const i in e){const s=i;this[s]=e[i]}this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(t){t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...sh.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...sh.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get filters(){return this._filters}set filters(t){this._filters=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...ir.defaultFillStyle,...t},()=>{this._fill=Vo({...this._originalFill},ir.defaultFillStyle)})),this._fill=Vo(t===0?"black":t,ir.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...ir.defaultStrokeStyle,...t},()=>{this._stroke=Od({...this._originalStroke},ir.defaultStrokeStyle)})),this._stroke=Od(t,ir.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=cT(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const t=sh.defaultTextStyle;for(const e in t)this[e]=t[e]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new sh({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let t=0;if(this._filters)for(let e=0;e<this._filters.length;e++)t+=this._filters[e].padding;return Math.max(this._padding,t)}destroy(t=!1){var i,s,o,h;if(this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const f=typeof t=="boolean"?t:t==null?void 0:t.textureSource;(i=this._fill)!=null&&i.texture&&this._fill.texture.destroy(f),(s=this._originalFill)!=null&&s.texture&&this._originalFill.texture.destroy(f),(o=this._stroke)!=null&&o.texture&&this._stroke.texture.destroy(f),(h=this._originalStroke)!=null&&h.texture&&this._originalStroke.texture.destroy(f)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(i,s,o)=>(i[s]=o,e==null||e(s,o),this.update(),!0)})}_isFillStyle(t){return(t??null)!==null&&!(Ce.isColorLike(t)||t instanceof Ja||t instanceof Id)}};kb.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};kb.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Rr=kb;function Ew(n){const t=n;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const e=Rr.defaultDropShadow;n.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(t.strokeThickness!==void 0){wt(Jt,"strokeThickness is now a part of stroke");const e=t.stroke;let i={};if(Ce.isColorLike(e))i.color=e;else if(e instanceof Ja||e instanceof Id)i.fill=e;else if(Object.hasOwnProperty.call(e,"color")||Object.hasOwnProperty.call(e,"fill"))i=e;else throw new Error("Invalid stroke value.");n.stroke={...i,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){wt(Jt,"gradient fill is now a fill pattern: `new FillGradient(...)`");let e;n.fontSize==null?n.fontSize=Rr.defaultTextStyle.fontSize:typeof n.fontSize=="string"?e=parseInt(n.fontSize,10):e=n.fontSize;const i=new Ja({start:{x:0,y:0},end:{x:0,y:(e||0)*1.7}}),s=t.fillGradientStops.map(o=>Ce.shared.setValue(o).toNumber());s.forEach((o,h)=>{const f=h/(s.length-1);i.addColorStop(f,o)}),n.fill={fill:i}}}class fT{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,e){const i=pe.get().createCanvas();i.width=t,i.height=e;const s=i.getContext("2d");return{canvas:i,context:s}}getOptimalCanvasAndContext(t,e,i=1){t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6),t=Qu(t),e=Qu(e);const s=(t<<17)+(e<<1);this._canvasPool[s]||(this._canvasPool[s]=[]);let o=this._canvasPool[s].pop();return o||(o=this._createCanvasAndContext(t,e)),o}returnCanvasAndContext(t){const e=t.canvas,{width:i,height:s}=e,o=(i<<17)+(s<<1);t.context.clearRect(0,0,i,s),this._canvasPool[o].push(t)}clear(){this._canvasPool={}}}const Xl=new fT,C1=1e5;function Pd(n,t,e,i=0){if(n.texture===Ct.WHITE&&!n.fill)return Ce.shared.setValue(n.color).setAlpha(n.alpha??1).toHexa();if(n.fill){if(n.fill instanceof Id){const s=n.fill,o=t.createPattern(s.texture.source.resource,"repeat"),h=s.transform.copyTo(Pt.shared);return h.scale(s.texture.frame.width,s.texture.frame.height),o.setTransform(h),o}else if(n.fill instanceof Ja){const s=n.fill,o=s.type==="linear",h=s.textureSpace==="local";let f=1,m=1;h&&e&&(f=e.width+i,m=e.height+i);let g,b=!1;if(o){const{start:x,end:E}=s;g=t.createLinearGradient(x.x*f,x.y*m,E.x*f,E.y*m),b=Math.abs(E.x-x.x)<Math.abs((E.y-x.y)*.1)}else{const{center:x,innerRadius:E,outerCenter:A,outerRadius:R}=s;g=t.createRadialGradient(x.x*f,x.y*m,E*f,A.x*f,A.y*m,R*f)}if(b&&h&&e){const x=e.lineHeight/m;for(let E=0;E<e.lines.length;E++){const A=(E*e.lineHeight+i/2)/m;s.colorStops.forEach(R=>{const D=A+R.offset*x;g.addColorStop(Math.floor(D*C1)/C1,Ce.shared.setValue(R.color).toHex())})}}else s.colorStops.forEach(x=>{g.addColorStop(x.offset,Ce.shared.setValue(x.color).toHex())});return g}}else{const s=t.createPattern(n.texture.source.resource,"repeat"),o=n.matrix.copyTo(Pt.shared);return o.scale(n.texture.frame.width,n.texture.frame.height),s.setTransform(o),s}return Xt("FillStyle not recognised",n),"red"}const dT=class pT extends Mb{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const e={...pT.defaultOptions,...t};this._textureSize=e.textureSize,this._mipmap=e.mipmap;const i=e.style.clone();e.overrideFill&&(i._fill.color=16777215,i._fill.alpha=1,i._fill.texture=Ct.WHITE,i._fill.fill=null),this.applyFillAsTint=e.overrideFill;const s=i.fontSize;i.fontSize=this.baseMeasurementFontSize;const o=Ud(i);e.overrideSize?i._stroke&&(i._stroke.width*=this.baseRenderedFontSize/s):i.fontSize=this.baseRenderedFontSize=s,this._style=i,this._skipKerning=e.skipKerning??!1,this.resolution=e.resolution??1,this._padding=e.padding??4,e.textureStyle&&(this._textureStyle=e.textureStyle instanceof vs?e.textureStyle:new vs(e.textureStyle)),this.fontMetrics=_s.measureFont(o),this.lineHeight=i.lineHeight||this.fontMetrics.fontSize||i.fontSize}ensureCharacters(t){var B,P;const e=_s.graphemeSegmenter(t).filter(G=>!this._currentChars.includes(G)).filter((G,H,j)=>j.indexOf(G)===H);if(!e.length)return;this._currentChars=[...this._currentChars,...e];let i;this._currentPageIndex===-1?i=this._nextPage():i=this.pages[this._currentPageIndex];let{canvas:s,context:o}=i.canvasAndContext,h=i.texture.source;const f=this._style;let m=this._currentX,g=this._currentY,b=this._currentMaxCharHeight;const x=this.baseRenderedFontSize/this.baseMeasurementFontSize,E=this._padding*x;let A=!1;const R=s.width/this.resolution,D=s.height/this.resolution;for(let G=0;G<e.length;G++){const H=e[G],j=_s.measureText(H,f,s,!1);j.lineHeight=j.height;const Z=j.width*x,nt=Math.ceil((f.fontStyle==="italic"?2:1)*Z),V=j.height*x,ht=nt+E*2,N=V+E*2;if(A=!1,H!==`
`&&H!=="\r"&&H!=="	"&&H!==" "&&(A=!0,b=Math.ceil(Math.max(N,b))),m+ht>R&&(g+=b,b=N,m=0,g+b>D)){h.update();const X=this._nextPage();s=X.canvasAndContext.canvas,o=X.canvasAndContext.context,h=X.texture.source,m=0,g=0,b=0}const Y=Z/x-(((B=f.dropShadow)==null?void 0:B.distance)??0)-(((P=f._stroke)==null?void 0:P.width)??0);if(this.chars[H]={id:H.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:Y,kerning:{}},A){this._drawGlyph(o,j,m+E,g+E,x,f);const X=h.width*x,$=h.height*x,ct=new Oe(m/X*h.width,g/$*h.height,ht/X*h.width,N/$*h.height);this.chars[H].texture=new Ct({source:h,frame:ct}),m+=Math.ceil(ht)}}h.update(),this._currentX=m,this._currentY=g,this._currentMaxCharHeight=b,this._skipKerning&&this._applyKerning(e,o)}get pageTextures(){return wt(Jt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){const i=this._measureCache;for(let s=0;s<t.length;s++){const o=t[s];for(let h=0;h<this._currentChars.length;h++){const f=this._currentChars[h];let m=i[o];m||(m=i[o]=e.measureText(o).width);let g=i[f];g||(g=i[f]=e.measureText(f).width);let b=e.measureText(o+f).width,x=b-(m+g);x&&(this.chars[o].kerning[f]=x),b=e.measureText(o+f).width,x=b-(m+g),x&&(this.chars[f].kerning[o]=x)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,e=Xl.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(e.context,this._style,t);const i=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),s=new Ct({source:new Xo({resource:e.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(s.source.style=this._textureStyle);const o={canvasAndContext:e,texture:s};return this.pages[this._currentPageIndex]=o,o}_setupContext(t,e,i){e.fontSize=this.baseRenderedFontSize,t.scale(i,i),t.font=Ud(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;const s=e._stroke,o=(s==null?void 0:s.width)??0;if(s&&(t.lineWidth=o,t.lineJoin=s.join,t.miterLimit=s.miterLimit,t.strokeStyle=Pd(s,t)),e._fill&&(t.fillStyle=Pd(e._fill,t)),e.dropShadow){const h=e.dropShadow,f=Ce.shared.setValue(h.color).toArray(),m=h.blur*i,g=h.distance*i;t.shadowColor=`rgba(${f[0]*255},${f[1]*255},${f[2]*255},${h.alpha})`,t.shadowBlur=m,t.shadowOffsetX=Math.cos(h.angle)*g,t.shadowOffsetY=Math.sin(h.angle)*g}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,i,s,o,h){const f=e.text,m=e.fontProperties,g=h._stroke,b=((g==null?void 0:g.width)??0)*o,x=i+b/2,E=s-b/2,A=m.descent*o,R=e.lineHeight*o;h.stroke&&b&&t.strokeText(f,x,E+R-A),h._fill&&t.fillText(f,x,E+R-A)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:e,texture:i}=this.pages[t];Xl.returnCanvasAndContext(e),i.destroy(!0)}this.pages=null}};dT.defaultOptions={textureSize:512,style:new Rr,mipmap:!0};let Ty=dT;function Xb(n,t,e,i){const s={width:0,height:0,offsetY:0,scale:t.fontSize/e.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};s.offsetY=e.baseLineOffset;let o=s.lines[0],h=null,f=!0;const m={width:0,start:0,index:0,positions:[],chars:[]},g=R=>{const D=o.width;for(let B=0;B<m.index;B++){const P=R.positions[B];o.chars.push(R.chars[B]),o.charPositions.push(P+D)}o.width+=R.width,f=!1,m.width=0,m.index=0,m.chars.length=0},b=()=>{let R=o.chars.length-1;if(i){let D=o.chars[R];for(;D===" ";)o.width-=e.chars[D].xAdvance,D=o.chars[--R]}s.width=Math.max(s.width,o.width),o={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},f=!0,s.lines.push(o),s.height+=e.lineHeight},x=e.baseMeasurementFontSize/t.fontSize,E=t.letterSpacing*x,A=t.wordWrapWidth*x;for(let R=0;R<n.length+1;R++){let D;const B=R===n.length;B||(D=n[R]);const P=e.chars[D]||e.chars[" "];if(/(?:\s)/.test(D)||D==="\r"||D===`
`||B){if(!f&&t.wordWrap&&o.width+m.width-E>A?(b(),g(m),B||o.charPositions.push(0)):(m.start=o.width,g(m),B||o.charPositions.push(0)),D==="\r"||D===`
`)o.width!==0&&b();else if(!B){const Z=P.xAdvance+(P.kerning[h]||0)+E;o.width+=Z,o.spaceWidth=Z,o.spacesIndex.push(o.charPositions.length),o.chars.push(D)}}else{const j=P.kerning[h]||0,Z=P.xAdvance+j+E;m.positions[m.index++]=m.width+j,m.chars.push(D),m.width+=Z}h=D}return b(),t.align==="center"?Tw(s):t.align==="right"?Aw(s):t.align==="justify"&&Cw(s),s}function Tw(n){for(let t=0;t<n.lines.length;t++){const e=n.lines[t],i=n.width/2-e.width/2;for(let s=0;s<e.charPositions.length;s++)e.charPositions[s]+=i}}function Aw(n){for(let t=0;t<n.lines.length;t++){const e=n.lines[t],i=n.width-e.width;for(let s=0;s<e.charPositions.length;s++)e.charPositions[s]+=i}}function Cw(n){const t=n.width;for(let e=0;e<n.lines.length;e++){const i=n.lines[e];let s=0,o=i.spacesIndex[s++],h=0;const f=i.spacesIndex.length,g=(t-i.width)/f;for(let b=0;b<i.charPositions.length;b++)b===o&&(o=i.spacesIndex[s++],h+=g),i.charPositions[b]+=h}}function mT(n){if(n==="")return[];typeof n=="string"&&(n=[n]);const t=[];for(let e=0,i=n.length;e<i;e++){const s=n[e];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);if(s[0].length===0||s[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const o=s[0].charCodeAt(0),h=s[1].charCodeAt(0);if(h<o)throw new Error("[BitmapFont]: Invalid character range.");for(let f=o,m=h;f<=m;f++)t.push(String.fromCharCode(f))}else t.push(...Array.from(s))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}let qm=0;class Bw{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null}}getFont(t,e){var h;let i=`${e.fontFamily}-bitmap`,s=!0;if(e._fill.fill&&!e._stroke)i+=e._fill.fill.styleKey,s=!1;else if(e._stroke||e.dropShadow){let f=e.styleKey;f=f.substring(0,f.lastIndexOf("-")),i=`${f}-bitmap`,s=!1}if(!Qe.has(i)){const f=new Ty({style:e,overrideFill:s,overrideSize:!0,...this.defaultOptions});qm++,qm>50&&Xt("BitmapText",`You have dynamically created ${qm} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),f.once("destroy",()=>{qm--,Qe.remove(i)}),Qe.set(i,f)}const o=Qe.get(i);return(h=o.ensureCharacters)==null||h.call(o,t),o}getLayout(t,e,i=!0){const s=this.getFont(t,e),o=_s.graphemeSegmenter(t);return Xb(o,e,s,i)}measureText(t,e,i=!0){return this.getLayout(t,e,i)}install(...t){var g,b,x,E;let e=t[0];typeof e=="string"&&(e={name:e,style:t[1],chars:(g=t[2])==null?void 0:g.chars,resolution:(b=t[2])==null?void 0:b.resolution,padding:(x=t[2])==null?void 0:x.padding,skipKerning:(E=t[2])==null?void 0:E.skipKerning},wt(Jt,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const i=e==null?void 0:e.name;if(!i)throw new Error("[BitmapFontManager] Property `name` is required.");e={...this.defaultOptions,...e};const s=e.style,o=s instanceof Rr?s:new Rr(s),h=o._fill.fill!==null&&o._fill.fill!==void 0,f=new Ty({style:o,overrideFill:h,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1,textureStyle:e.textureStyle}),m=mT(e.chars);return f.ensureCharacters(m.join("")),Qe.set(`${i}-bitmap`,f),f.once("destroy",()=>Qe.remove(`${i}-bitmap`)),f}uninstall(t){const e=`${t}-bitmap`,i=Qe.get(e);i&&i.destroy()}}const Gd=new Bw;class Ib extends Mb{constructor(t,e){super();const{textures:i,data:s}=t;Object.keys(s.pages).forEach(o=>{const h=s.pages[parseInt(o,10)],f=i[h.id];this.pages.push({texture:f})}),Object.keys(s.chars).forEach(o=>{const h=s.chars[o],{frame:f,source:m}=i[h.page],g=new Oe(h.x+f.x,h.y+f.y,h.width,h.height),b=new Ct({source:m,frame:g});this.chars[o]={id:o.codePointAt(0),xOffset:h.xOffset,yOffset:h.yOffset,xAdvance:h.xAdvance,kerning:h.kerning??{},texture:b}}),this.baseRenderedFontSize=s.fontSize,this.baseMeasurementFontSize=s.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:s.fontSize},this.baseLineOffset=s.baseLineOffset,this.lineHeight=s.lineHeight,this.fontFamily=s.fontFamily,this.distanceField=s.distanceField??{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){Gd.install(t)}static uninstall(t){Gd.uninstall(t)}}const og={test(n){return typeof n=="string"&&n.startsWith("info face=")},parse(n){const t=n.match(/^[a-z]+\s+.+$/gm),e={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const x in t){const E=t[x].match(/^[a-z]+/gm)[0],A=t[x].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),R={};for(const D in A){const B=A[D].split("="),P=B[0],G=B[1].replace(/"/gm,""),H=parseFloat(G),j=isNaN(H)?G:H;R[P]=j}e[E].push(R)}const i={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[s]=e.info,[o]=e.common,[h]=e.distanceField??[];h&&(i.distanceField={range:parseInt(h.distanceRange,10),type:h.fieldType}),i.fontSize=parseInt(s.size,10),i.fontFamily=s.face,i.lineHeight=parseInt(o.lineHeight,10);const f=e.page;for(let x=0;x<f.length;x++)i.pages.push({id:parseInt(f[x].id,10)||0,file:f[x].file});const m={};i.baseLineOffset=i.lineHeight-parseInt(o.base,10);const g=e.char;for(let x=0;x<g.length;x++){const E=g[x],A=parseInt(E.id,10);let R=E.letter??E.char??String.fromCharCode(A);R==="space"&&(R=" "),m[A]=R,i.chars[R]={id:A,page:parseInt(E.page,10)||0,x:parseInt(E.x,10),y:parseInt(E.y,10),width:parseInt(E.width,10),height:parseInt(E.height,10),xOffset:parseInt(E.xoffset,10),yOffset:parseInt(E.yoffset,10),xAdvance:parseInt(E.xadvance,10),kerning:{}}}const b=e.kerning||[];for(let x=0;x<b.length;x++){const E=parseInt(b[x].first,10),A=parseInt(b[x].second,10),R=parseInt(b[x].amount,10);i.chars[m[A]].kerning[m[E]]=R}return i}},Ay={test(n){const t=n;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(n){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},e=n.getElementsByTagName("info")[0],i=n.getElementsByTagName("common")[0],s=n.getElementsByTagName("distanceField")[0];s&&(t.distanceField={type:s.getAttribute("fieldType"),range:parseInt(s.getAttribute("distanceRange"),10)});const o=n.getElementsByTagName("page"),h=n.getElementsByTagName("char"),f=n.getElementsByTagName("kerning");t.fontSize=parseInt(e.getAttribute("size"),10),t.fontFamily=e.getAttribute("face"),t.lineHeight=parseInt(i.getAttribute("lineHeight"),10);for(let g=0;g<o.length;g++)t.pages.push({id:parseInt(o[g].getAttribute("id"),10)||0,file:o[g].getAttribute("file")});const m={};t.baseLineOffset=t.lineHeight-parseInt(i.getAttribute("base"),10);for(let g=0;g<h.length;g++){const b=h[g],x=parseInt(b.getAttribute("id"),10);let E=b.getAttribute("letter")??b.getAttribute("char")??String.fromCharCode(x);E==="space"&&(E=" "),m[x]=E,t.chars[E]={id:x,page:parseInt(b.getAttribute("page"),10)||0,x:parseInt(b.getAttribute("x"),10),y:parseInt(b.getAttribute("y"),10),width:parseInt(b.getAttribute("width"),10),height:parseInt(b.getAttribute("height"),10),xOffset:parseInt(b.getAttribute("xoffset"),10),yOffset:parseInt(b.getAttribute("yoffset"),10),xAdvance:parseInt(b.getAttribute("xadvance"),10),kerning:{}}}for(let g=0;g<f.length;g++){const b=parseInt(f[g].getAttribute("first"),10),x=parseInt(f[g].getAttribute("second"),10),E=parseInt(f[g].getAttribute("amount"),10);t.chars[m[x]].kerning[m[b]]=E}return t}},Cy={test(n){return typeof n=="string"&&n.includes("<font>")?Ay.test(pe.get().parseXML(n)):!1},parse(n){return Ay.parse(pe.get().parseXML(n))}},Rw=[".xml",".fnt"],gT={extension:{type:q.CacheParser,name:"cacheBitmapFont"},test:n=>n instanceof Ib,getCacheableAssets(n,t){const e={};return n.forEach(i=>{e[i]=t,e[`${i}-bitmap`]=t}),e[`${t.fontFamily}-bitmap`]=t,e}},_T={extension:{type:q.LoadParser,priority:Mr.Normal},name:"loadBitmapFont",test(n){return Rw.includes(gi.extname(n).toLowerCase())},async testParse(n){return og.test(n)||Cy.test(n)},async parse(n,t,e){const i=og.test(n)?og.parse(n):Cy.parse(n),{src:s}=t,{pages:o}=i,h=[],f=i.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let x=0;x<o.length;++x){const E=o[x].file;let A=gi.join(gi.dirname(s),E);A=mg(A,s),h.push({src:A,data:f})}const m=await e.load(h),g=h.map(x=>m[x.src]);return new Ib({data:i,textures:g},s)},async load(n,t){return await(await pe.get().fetch(n)).text()},async unload(n,t,e){await Promise.all(n.pages.map(i=>e.unload(i.texture.source._sourceOrigin))),n.destroy()}};class yT{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}const bT={extension:{type:q.CacheParser,name:"cacheTextureArray"},test:n=>Array.isArray(n)&&n.every(t=>t instanceof Ct),getCacheableAssets:(n,t)=>{const e={};return n.forEach(i=>{t.forEach((s,o)=>{e[i+(o===0?"":o+1)]=s})}),e}};async function Yb(n){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(n)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const vT={extension:{type:q.DetectionParser,priority:1},test:async()=>Yb("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(t=>t!=="avif")},B1=["png","jpg","jpeg"],xT={extension:{type:q.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...B1],remove:async n=>n.filter(t=>!B1.includes(t))},Mw="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function n_(n){return Mw?!1:document.createElement("video").canPlayType(n)!==""}const ST={extension:{type:q.DetectionParser,priority:0},test:async()=>n_("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(t=>t!=="mp4"&&t!=="m4v")},ET={extension:{type:q.DetectionParser,priority:0},test:async()=>n_("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(t=>t!=="ogv")},TT={extension:{type:q.DetectionParser,priority:0},test:async()=>n_("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(t=>t!=="webm")},AT={extension:{type:q.DetectionParser,priority:0},test:async()=>Yb("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(t=>t!=="webp")};class CT{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,i)=>(this._parsersValidated=!1,t[e]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const i={promise:null,parser:null};return i.promise=(async()=>{var h,f;let s=null,o=null;if(e.loadParser&&(o=this._parserHash[e.loadParser],o||Xt(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!o){for(let m=0;m<this.parsers.length;m++){const g=this.parsers[m];if(g.load&&((h=g.test)!=null&&h.call(g,t,e,this))){o=g;break}}if(!o)return Xt(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await o.load(t,e,this),i.parser=o;for(let m=0;m<this.parsers.length;m++){const g=this.parsers[m];g.parse&&g.parse&&await((f=g.testParse)==null?void 0:f.call(g,s,e,this))&&(s=await g.parse(s,e,this)||s,i.parser=g)}return s})(),i}async load(t,e){this._parsersValidated||this._validateParsers();let i=0;const s={},o=Bd(t),h=gs(t,g=>({alias:[g],src:g,data:{}})),f=h.length,m=h.map(async g=>{const b=gi.toAbsolute(g.src);if(!s[g.src])try{this.promiseCache[b]||(this.promiseCache[b]=this._getLoadPromiseAndParser(b,g)),s[g.src]=await this.promiseCache[b].promise,e&&e(++i/f)}catch(x){throw delete this.promiseCache[b],delete s[g.src],new Error(`[Loader.load] Failed to load ${b}.
${x}`)}});return await Promise.all(m),o?s[h[0].src]:s}async unload(t){const i=gs(t,s=>({alias:[s],src:s})).map(async s=>{var f,m;const o=gi.toAbsolute(s.src),h=this.promiseCache[o];if(h){const g=await h.promise;delete this.promiseCache[o],await((m=(f=h.parser)==null?void 0:f.unload)==null?void 0:m.call(f,g,s,this))}});await Promise.all(i)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(e.name?t[e.name]&&Xt(`[Assets] loadParser name conflict "${e.name}"`):Xt("[Assets] loadParser should have a name"),{...t,[e.name]:e}),{})}}function nc(n,t){if(Array.isArray(t)){for(const e of t)if(n.startsWith(`data:${e}`))return!0;return!1}return n.startsWith(`data:${t}`)}function xs(n,t){const e=n.split("?")[0],i=gi.extname(e).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}const Dw=".json",ww="application/json",BT={extension:{type:q.LoadParser,priority:Mr.Low},name:"loadJson",test(n){return nc(n,ww)||xs(n,Dw)},async load(n){return await(await pe.get().fetch(n)).json()}},Uw=".txt",Ow="text/plain",RT={name:"loadTxt",extension:{type:q.LoadParser,priority:Mr.Low,name:"loadTxt"},test(n){return nc(n,Ow)||xs(n,Uw)},async load(n){return await(await pe.get().fetch(n)).text()}},Pw=["normal","bold","100","200","300","400","500","600","700","800","900"],Gw=[".ttf",".otf",".woff",".woff2"],Nw=["font/ttf","font/otf","font/woff","font/woff2"],zw=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function MT(n){const t=gi.extname(n),s=gi.basename(n,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1));let o=s.length>0;for(const f of s)if(!f.match(zw)){o=!1;break}let h=s.join(" ");return o||(h=`"${h.replace(/[\\"]/g,"\\$&")}"`),h}const Lw=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function Hw(n){return Lw.test(n)?n:encodeURI(n)}const DT={extension:{type:q.LoadParser,priority:Mr.Low},name:"loadWebFont",test(n){return nc(n,Nw)||xs(n,Gw)},async load(n,t){var i,s,o;const e=pe.get().getFontFaceSet();if(e){const h=[],f=((i=t.data)==null?void 0:i.family)??MT(n),m=((o=(s=t.data)==null?void 0:s.weights)==null?void 0:o.filter(b=>Pw.includes(b)))??["normal"],g=t.data??{};for(let b=0;b<m.length;b++){const x=m[b],E=new FontFace(f,`url(${Hw(n)})`,{...g,weight:x});await E.load(),e.add(E),h.push(E)}return Qe.set(`${f}-and-url`,{url:n,fontFaces:h}),h.length===1?h[0]:h}return Xt("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){(Array.isArray(n)?n:[n]).forEach(t=>{Qe.remove(`${t.family}-and-url`),pe.get().getFontFaceSet().delete(t)})}};function i_(n,t=1){var i;const e=(i=Yo.RETINA_PREFIX)==null?void 0:i.exec(n);return e?parseFloat(e[1]):t}function qo(n,t,e){n.label=e,n._sourceOrigin=e;const i=new Ct({source:n,label:e}),s=()=>{delete t.promiseCache[e],Qe.has(e)&&Qe.remove(e)};return i.source.once("destroy",()=>{t.promiseCache[e]&&(Xt("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),s())}),i.once("destroy",()=>{n.destroyed||(Xt("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),i}const Fw=".svg",Vw="image/svg+xml",wT={extension:{type:q.LoadParser,priority:Mr.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(n){return nc(n,Vw)||xs(n,Fw)},async load(n,t,e){var i;return((i=t.data)==null?void 0:i.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?Xw(n):kw(n,t,e,this.config.crossOrigin)},unload(n){n.destroy(!0)}};async function kw(n,t,e,i){var B,P,G;const o=await(await pe.get().fetch(n)).blob(),h=URL.createObjectURL(o),f=new Image;f.src=h,f.crossOrigin=i,await f.decode(),URL.revokeObjectURL(h);const m=document.createElement("canvas"),g=m.getContext("2d"),b=((B=t.data)==null?void 0:B.resolution)||i_(n),x=((P=t.data)==null?void 0:P.width)??f.width,E=((G=t.data)==null?void 0:G.height)??f.height;m.width=x*b,m.height=E*b,g.drawImage(f,0,0,x*b,E*b);const{parseAsGraphicsContext:A,...R}=t.data??{},D=new Xo({resource:m,alphaMode:"premultiply-alpha-on-upload",resolution:b,...R});return qo(D,e,n)}async function Xw(n){const e=await(await pe.get().fetch(n)).text(),i=new ir;return i.svg(e),i}const Iw=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let ph=null,By=class{constructor(){ph||(ph=URL.createObjectURL(new Blob([Iw],{type:"application/javascript"}))),this.worker=new Worker(ph)}};By.revokeObjectURL=function(){ph&&(URL.revokeObjectURL(ph),ph=null)};const Yw=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let mh=null,UT=class{constructor(){mh||(mh=URL.createObjectURL(new Blob([Yw],{type:"application/javascript"}))),this.worker=new Worker(mh)}};UT.revokeObjectURL=function(){mh&&(URL.revokeObjectURL(mh),mh=null)};let R1=0,G0;class qw{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new By;e.addEventListener("message",i=>{e.terminate(),By.revokeObjectURL(),t(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,e){var i;return this._run("loadImageBitmap",[t,(i=e==null?void 0:e.data)==null?void 0:i.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){G0===void 0&&(G0=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<G0&&(this._createdWorkers++,t=new UT().worker,t.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),this._resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const i=new Promise((s,o)=>{this._queue.push({id:t,arguments:e,resolve:s,reject:o})});return this._next(),i}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const e=this._queue.pop(),i=e.id;this._resolveHash[R1]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:R1++,id:i})}}const Ry=new qw,jw=[".jpeg",".jpg",".png",".webp",".avif"],Kw=["image/jpeg","image/png","image/webp","image/avif"];async function OT(n,t){var s;const e=await pe.get().fetch(n);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${e.status} ${e.statusText}`);const i=await e.blob();return((s=t==null?void 0:t.data)==null?void 0:s.alphaMode)==="premultiplied-alpha"?createImageBitmap(i,{premultiplyAlpha:"none"}):createImageBitmap(i)}const qb={name:"loadTextures",extension:{type:q.LoadParser,priority:Mr.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return nc(n,Kw)||xs(n,jw)},async load(n,t,e){var o;let i=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Ry.isImageBitmapSupported()?i=await Ry.loadImageBitmap(n,t):i=await OT(n,t):i=await new Promise((h,f)=>{i=new Image,i.crossOrigin=this.config.crossOrigin,i.src=n,i.complete?h(i):(i.onload=()=>{h(i)},i.onerror=f)});const s=new Xo({resource:i,alphaMode:"premultiply-alpha-on-upload",resolution:((o=t.data)==null?void 0:o.resolution)||i_(n),...t.data});return qo(s,e,n)},unload(n){n.destroy(!0)}},PT=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],Ww=PT.map(n=>`video/${n.substring(1)}`);function GT(n,t,e){e===void 0&&!t.startsWith("data:")?n.crossOrigin=zT(t):e!==!1&&(n.crossOrigin=typeof e=="string"?e:"anonymous")}function NT(n){return new Promise((t,e)=>{n.addEventListener("canplaythrough",i),n.addEventListener("error",s),n.load();function i(){o(),t()}function s(h){o(),e(h)}function o(){n.removeEventListener("canplaythrough",i),n.removeEventListener("error",s)}})}function zT(n,t=globalThis.location){if(n.startsWith("data:"))return"";t||(t=globalThis.location);const e=new URL(n,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}const LT={name:"loadVideo",extension:{type:q.LoadParser,name:"loadVideo"},test(n){const t=nc(n,Ww),e=xs(n,PT);return t||e},async load(n,t,e){var m,g;const i={..._d.defaultOptions,resolution:((m=t.data)==null?void 0:m.resolution)||i_(n),alphaMode:((g=t.data)==null?void 0:g.alphaMode)||await bb(),...t.data},s=document.createElement("video"),o={preload:i.autoLoad!==!1?"auto":void 0,"webkit-playsinline":i.playsinline!==!1?"":void 0,playsinline:i.playsinline!==!1?"":void 0,muted:i.muted===!0?"":void 0,loop:i.loop===!0?"":void 0,autoplay:i.autoPlay!==!1?"":void 0};Object.keys(o).forEach(b=>{const x=o[b];x!==void 0&&s.setAttribute(b,x)}),i.muted===!0&&(s.muted=!0),GT(s,n,i.crossorigin);const h=document.createElement("source");let f;if(n.startsWith("data:"))f=n.slice(5,n.indexOf(";"));else if(!n.startsWith("blob:")){const b=n.split("?")[0].slice(n.lastIndexOf(".")+1).toLowerCase();f=_d.MIME_TYPES[b]||`video/${b}`}return h.src=n,f&&(h.type=f),new Promise(b=>{const x=async()=>{const E=new _d({...i,resource:s});s.removeEventListener("canplay",x),t.data.preload&&await NT(s),b(qo(E,e,n))};i.preload&&!i.autoPlay&&s.load(),s.addEventListener("canplay",x),s.appendChild(h)})},unload(n){n.destroy(!0)}},jb={extension:{type:q.ResolveParser,name:"resolveTexture"},test:qb.test,parse:n=>{var t;return{resolution:parseFloat(((t=Yo.RETINA_PREFIX.exec(n))==null?void 0:t[1])??"1"),format:n.split(".").pop(),src:n}}},HT={extension:{type:q.ResolveParser,priority:-2,name:"resolveJson"},test:n=>Yo.RETINA_PREFIX.test(n)&&n.endsWith(".json"),parse:jb.parse};class FT{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Yo,this.loader=new CT,this.cache=Qe,this._backgroundLoader=new yT(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var o,h;if(this._initialized){Xt("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let f=t.manifest;typeof f=="string"&&(f=await this.load(f)),this.resolver.addManifest(f)}const e=((o=t.texturePreference)==null?void 0:o.resolution)??1,i=typeof e=="number"?[e]:e,s=await this._detectFormats({preferredFormats:(h=t.texturePreference)==null?void 0:h.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:i}}),t.preferences&&this.setPreferences(t.preferences)}add(t){this.resolver.add(t)}async load(t,e){this._initialized||await this.init();const i=Bd(t),s=gs(t).map(f=>{if(typeof f!="string"){const m=this.resolver.getAlias(f);return m.some(g=>!this.resolver.hasKey(g))&&this.add(f),Array.isArray(m)?m[0]:m}return this.resolver.hasKey(f)||this.add({alias:f,src:f}),f}),o=this.resolver.resolve(s),h=await this._mapLoadToResolve(o,e);return i?h[s[0]]:h}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);const s=this.resolver.resolveBundle(t),o={},h=Object.keys(s);let f=0,m=0;const g=()=>{e==null||e(++f/m)},b=h.map(x=>{const E=s[x];return m+=Object.keys(E).length,this._mapLoadToResolve(E,g).then(A=>{o[x]=A})});return await Promise.all(b),i?o[t[0]]:o}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Qe.get(t);const e={};for(let i=0;i<t.length;i++)e[i]=Qe.get(t[i]);return e}async _mapLoadToResolve(t,e){const i=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const s=await this.loader.load(i,e);this._backgroundLoader.active=!0;const o={};return i.forEach(h=>{const f=s[h.src],m=[h.src];h.alias&&m.push(...h.alias),m.forEach(g=>{o[g]=f}),Qe.set(m,f)}),o}async unload(t){this._initialized||await this.init();const e=gs(t).map(s=>typeof s!="string"?s.src:s),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=gs(t);const e=this.resolver.resolveBundle(t),i=Object.keys(e).map(s=>this._unloadFromResolved(e[s]));await Promise.all(i)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(i=>{Qe.remove(i.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const i of t.detections)t.skipDetections||await i.test()?e=await i.add(e):t.skipDetections||(e=await i.remove(e));return e=e.filter((i,s)=>e.indexOf(i)===s),e}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(i=>i in t).forEach(i=>{e.config[i]=t[i]})})}}const bs=new FT;De.handleByList(q.LoadParser,bs.loader.parsers).handleByList(q.ResolveParser,bs.resolver.parsers).handleByList(q.CacheParser,bs.cache.parsers).handleByList(q.DetectionParser,bs.detections);De.add(bT,xT,vT,AT,ST,ET,TT,BT,RT,DT,wT,qb,LT,_T,gT,jb,HT);const M1={loader:q.LoadParser,resolver:q.ResolveParser,cache:q.CacheParser,detection:q.DetectionParser};De.handle(q.Asset,n=>{const t=n.ref;Object.entries(M1).filter(([e])=>!!t[e]).forEach(([e,i])=>De.add(Object.assign(t[e],{extension:t[e].extension??i})))},n=>{const t=n.ref;Object.keys(M1).filter(e=>!!t[e]).forEach(e=>De.remove(t[e]))});const Qw={extension:{type:q.DetectionParser,priority:3},test:async()=>!!(await Xd()||kd()),add:async n=>[...n,"basis"],remove:async n=>n.filter(t=>t!=="basis")};class qd extends Sn{constructor(t){super(t),this.uploadMethodId="compressed",this.resource=t.resource,this.mipLevelCount=this.resource.length}}let jm;function My(){if(jm)return jm;const t=document.createElement("canvas").getContext("webgl");return t?(jm=[...t.getExtension("EXT_texture_compression_bptc")?["bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...t.getExtension("WEBGL_compressed_texture_s3tc")?["bc1-rgba-unorm","bc2-rgba-unorm","bc3-rgba-unorm"]:[],...t.getExtension("WEBGL_compressed_texture_s3tc_srgb")?["bc1-rgba-unorm-srgb","bc2-rgba-unorm-srgb","bc3-rgba-unorm-srgb"]:[],...t.getExtension("EXT_texture_compression_rgtc")?["bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm"]:[],...t.getExtension("WEBGL_compressed_texture_etc")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","eac-r11unorm","eac-rg11unorm"]:[],...t.getExtension("WEBGL_compressed_texture_astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],jm):[]}let Km;async function Dy(){if(Km)return Km;const n=await pe.get().getNavigator().gpu.requestAdapter();return Km=[...n.features.has("texture-compression-bc")?["bc1-rgba-unorm","bc1-rgba-unorm-srgb","bc2-rgba-unorm","bc2-rgba-unorm-srgb","bc3-rgba-unorm","bc3-rgba-unorm-srgb","bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm","bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...n.features.has("texture-compression-etc2")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","eac-r11unorm","eac-r11snorm","eac-rg11unorm","eac-rg11snorm"]:[],...n.features.has("texture-compression-astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Km}let Wm;async function Kb(){return Wm!==void 0||(Wm=await(async()=>{const n=await Xd(),t=kd();if(n&&t){const e=await Dy(),i=My();return e.filter(s=>i.includes(s))}else{if(n)return await Dy();if(t)return My()}return[]})()),Wm}const VT=["r8unorm","r8snorm","r8uint","r8sint","r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2unorm","rg11b10ufloat","rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float","rgba32uint","rgba32sint","rgba32float","stencil8","depth16unorm","depth24plus","depth24plus-stencil8","depth32float","depth32float-stencil8"];let Qm;async function jd(){if(Qm!==void 0)return Qm;const n=await Kb();return Qm=[...VT,...n],Qm}const Zw=`(function () {
    'use strict';

    function createLevelBuffers(basisTexture, basisTranscoderFormat) {
      const images = basisTexture.getNumImages();
      const levels = basisTexture.getNumLevels(0);
      const success = basisTexture.startTranscoding();
      if (!success) {
        throw new Error("startTranscoding failed");
      }
      const levelBuffers = [];
      for (let levelIndex = 0; levelIndex < levels; ++levelIndex) {
        for (let sliceIndex = 0; sliceIndex < images; ++sliceIndex) {
          const transcodeSize = basisTexture.getImageTranscodedSizeInBytes(sliceIndex, levelIndex, basisTranscoderFormat);
          const levelBuffer = new Uint8Array(transcodeSize);
          const success2 = basisTexture.transcodeImage(levelBuffer, sliceIndex, levelIndex, basisTranscoderFormat, 1, 0);
          if (!success2) {
            throw new Error("transcodeImage failed");
          }
          levelBuffers.push(levelBuffer);
        }
      }
      return levelBuffers;
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": 3,
      // cTFBC3_RGBA
      "bc7-rgba-unorm": 6,
      // cTFBC7_RGBA,
      "etc2-rgba8unorm": 1,
      // cTFETC2_RGBA,
      "astc-4x4-unorm": 10,
      // cTFASTC_4x4_RGBA,
      // Uncompressed
      rgba8unorm: 13,
      // cTFRGBA32,
      rgba4unorm: 16
      // cTFRGBA4444,
    };
    function gpuFormatToBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "basis/basis_transcoder.js",
      wasmUrl: "basis/basis_transcoder.wasm"
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let basisPromise;
    async function getBasis() {
      if (!basisPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        basisPromise = new Promise((resolve) => {
          BASIS({
            locateFile: (_file) => absoluteWasmUrl
          }).then((module) => {
            module.initializeBasis();
            resolve(module.BasisFile);
          });
        });
      }
      return basisPromise;
    }
    async function fetchBasisTexture(url, BasisTexture) {
      const basisResponse = await fetch(url);
      if (basisResponse.ok) {
        const basisArrayBuffer = await basisResponse.arrayBuffer();
        return new BasisTexture(new Uint8Array(basisArrayBuffer));
      }
      throw new Error(\`Failed to load Basis texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const BasisTexture = await getBasis();
      const basisTexture = await fetchBasisTexture(url, BasisTexture);
      const levelBuffers = createLevelBuffers(basisTexture, basisTranscoderFormat);
      return {
        width: basisTexture.getImageWidth(0, 0),
        height: basisTexture.getImageHeight(0, 0),
        format: basisTranscodedTextureFormat,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl)
        settings.jsUrl = jsUrl;
      if (wasmUrl)
        settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getBasis();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type](message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    };

})();
`;let gh=null,kT=class{constructor(){gh||(gh=URL.createObjectURL(new Blob([Zw],{type:"application/javascript"}))),this.worker=new Worker(gh)}};kT.revokeObjectURL=function(){gh&&(URL.revokeObjectURL(gh),gh=null)};const _g={jsUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.js",wasmUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.wasm"};function Jw(n){Object.assign(_g,n)}let nd;const XT={};function $w(n){return nd||(nd=new kT().worker,nd.onmessage=t=>{const{success:e,url:i,textureOptions:s}=t.data;e||console.warn("Failed to load Basis texture",i),XT[i](s)},nd.postMessage({type:"init",jsUrl:_g.jsUrl,wasmUrl:_g.wasmUrl,supportedTextures:n})),nd}function IT(n,t){const e=$w(t);return new Promise(i=>{XT[n]=i,e.postMessage({type:"load",url:n})})}const t8={extension:{type:q.LoadParser,priority:Mr.High,name:"loadBasis"},name:"loadBasis",test(n){return xs(n,[".basis"])},async load(n,t,e){const i=await jd(),s=await IT(n,i),o=new qd(s);return qo(o,e,n)},unload(n){Array.isArray(n)?n.forEach(t=>t.destroy(!0)):n.destroy(!0)}};function e8(n,t){const e=n.getNumImages(),i=n.getNumLevels(0);if(!n.startTranscoding())throw new Error("startTranscoding failed");const o=[];for(let h=0;h<i;++h)for(let f=0;f<e;++f){const m=n.getImageTranscodedSizeInBytes(f,h,t),g=new Uint8Array(m);if(!n.transcodeImage(g,f,h,t,1,0))throw new Error("transcodeImage failed");o.push(g)}return o}const n8={"bc3-rgba-unorm":3,"bc7-rgba-unorm":6,"etc2-rgba8unorm":1,"astc-4x4-unorm":10,rgba8unorm:13,rgba4unorm:16};function i8(n){const t=n8[n];if(t)return t;throw new Error(`Unsupported transcoderFormat: ${n}`)}const r8={MAGIC:0,SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19,PF_FLAGS:20,FOURCC:21,RGB_BITCOUNT:22,R_BIT_MASK:23,G_BIT_MASK:24,B_BIT_MASK:25,A_BIT_MASK:26},s8={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4};var Wb=(n=>(n[n.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",n[n.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",n[n.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",n[n.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",n[n.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",n[n.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",n[n.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",n[n.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",n[n.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",n[n.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",n[n.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",n[n.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",n[n.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",n[n.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",n[n.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",n[n.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",n[n.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",n[n.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",n[n.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",n[n.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",n[n.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",n[n.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",n[n.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",n[n.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",n[n.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",n[n.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",n[n.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",n[n.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",n[n.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",n[n.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",n[n.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",n[n.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",n[n.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",n[n.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",n[n.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",n[n.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",n[n.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",n[n.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",n[n.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",n[n.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",n[n.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",n[n.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",n[n.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",n[n.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",n[n.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",n[n.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",n[n.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",n[n.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",n[n.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",n[n.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",n[n.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",n[n.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",n[n.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",n[n.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",n[n.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",n[n.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",n[n.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",n[n.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",n[n.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",n[n.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",n[n.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",n[n.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",n[n.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",n[n.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",n[n.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",n[n.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",n[n.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",n[n.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",n[n.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",n[n.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",n[n.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",n[n.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",n[n.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",n[n.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",n[n.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",n[n.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",n[n.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",n[n.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",n[n.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",n[n.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",n[n.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",n[n.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",n[n.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",n[n.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",n[n.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",n[n.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",n[n.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",n[n.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",n[n.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",n[n.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",n[n.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",n[n.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",n[n.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",n[n.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",n[n.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",n[n.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",n[n.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",n[n.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",n[n.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",n[n.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",n[n.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",n[n.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",n[n.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",n[n.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",n[n.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",n[n.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",n[n.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",n[n.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",n[n.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",n[n.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",n[n.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",n[n.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",n[n.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",n[n.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",n[n.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",n[n.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",n[n.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",n[n.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",n[n.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",n[n.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",n[n.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",n[n.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",n))(Wb||{}),Qb=(n=>(n[n.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",n[n.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",n[n.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",n))(Qb||{});function di(n){return n.charCodeAt(0)+(n.charCodeAt(1)<<8)+(n.charCodeAt(2)<<16)+(n.charCodeAt(3)<<24)}var Er=(n=>(n[n.UNKNOWN=0]="UNKNOWN",n[n.R8G8B8=20]="R8G8B8",n[n.A8R8G8B8=21]="A8R8G8B8",n[n.X8R8G8B8=22]="X8R8G8B8",n[n.R5G6B5=23]="R5G6B5",n[n.X1R5G5B5=24]="X1R5G5B5",n[n.A1R5G5B5=25]="A1R5G5B5",n[n.A4R4G4B4=26]="A4R4G4B4",n[n.R3G3B2=27]="R3G3B2",n[n.A8=28]="A8",n[n.A8R3G3B2=29]="A8R3G3B2",n[n.X4R4G4B4=30]="X4R4G4B4",n[n.A2B10G10R10=31]="A2B10G10R10",n[n.A8B8G8R8=32]="A8B8G8R8",n[n.X8B8G8R8=33]="X8B8G8R8",n[n.G16R16=34]="G16R16",n[n.A2R10G10B10=35]="A2R10G10B10",n[n.A16B16G16R16=36]="A16B16G16R16",n[n.A8P8=40]="A8P8",n[n.P8=41]="P8",n[n.L8=50]="L8",n[n.A8L8=51]="A8L8",n[n.A4L4=52]="A4L4",n[n.V8U8=60]="V8U8",n[n.L6V5U5=61]="L6V5U5",n[n.X8L8V8U8=62]="X8L8V8U8",n[n.Q8W8V8U8=63]="Q8W8V8U8",n[n.V16U16=64]="V16U16",n[n.A2W10V10U10=67]="A2W10V10U10",n[n.Q16W16V16U16=110]="Q16W16V16U16",n[n.R16F=111]="R16F",n[n.G16R16F=112]="G16R16F",n[n.A16B16G16R16F=113]="A16B16G16R16F",n[n.R32F=114]="R32F",n[n.G32R32F=115]="G32R32F",n[n.A32B32G32R32F=116]="A32B32G32R32F",n[n.UYVY=di("UYVY")]="UYVY",n[n.R8G8_B8G8=di("RGBG")]="R8G8_B8G8",n[n.YUY2=di("YUY2")]="YUY2",n[n.D3DFMT_G8R8_G8B8=di("GRGB")]="D3DFMT_G8R8_G8B8",n[n.DXT1=di("DXT1")]="DXT1",n[n.DXT2=di("DXT2")]="DXT2",n[n.DXT3=di("DXT3")]="DXT3",n[n.DXT4=di("DXT4")]="DXT4",n[n.DXT5=di("DXT5")]="DXT5",n[n.ATI1=di("ATI1")]="ATI1",n[n.AT1N=di("AT1N")]="AT1N",n[n.ATI2=di("ATI2")]="ATI2",n[n.AT2N=di("AT2N")]="AT2N",n[n.BC4U=di("BC4U")]="BC4U",n[n.BC4S=di("BC4S")]="BC4S",n[n.BC5U=di("BC5U")]="BC5U",n[n.BC5S=di("BC5S")]="BC5S",n[n.DX10=di("DX10")]="DX10",n))(Er||{});const wy={[Er.DXT1]:"bc1-rgba-unorm",[Er.DXT2]:"bc2-rgba-unorm",[Er.DXT3]:"bc2-rgba-unorm",[Er.DXT4]:"bc3-rgba-unorm",[Er.DXT5]:"bc3-rgba-unorm",[Er.ATI1]:"bc4-r-unorm",[Er.BC4U]:"bc4-r-unorm",[Er.BC4S]:"bc4-r-snorm",[Er.ATI2]:"bc5-rg-unorm",[Er.BC5U]:"bc5-rg-unorm",[Er.BC5S]:"bc5-rg-snorm",36:"rgba16uint",110:"rgba16sint",111:"r16float",112:"rg16float",113:"rgba16float",114:"r32float",115:"rg32float",116:"rgba32float"},Tr={70:"bc1-rgba-unorm",71:"bc1-rgba-unorm",72:"bc1-rgba-unorm-srgb",73:"bc2-rgba-unorm",74:"bc2-rgba-unorm",75:"bc2-rgba-unorm-srgb",76:"bc3-rgba-unorm",77:"bc3-rgba-unorm",78:"bc3-rgba-unorm-srgb",79:"bc4-r-unorm",80:"bc4-r-unorm",81:"bc4-r-snorm",82:"bc5-rg-unorm",83:"bc5-rg-unorm",84:"bc5-rg-snorm",94:"bc6h-rgb-ufloat",95:"bc6h-rgb-ufloat",96:"bc6h-rgb-float",97:"bc7-rgba-unorm",98:"bc7-rgba-unorm",99:"bc7-rgba-unorm-srgb",28:"rgba8unorm",29:"rgba8unorm-srgb",87:"bgra8unorm",91:"bgra8unorm-srgb",41:"r32float",49:"rg8unorm",56:"r16uint",61:"r8unorm",24:"rgb10a2unorm",11:"rgba16uint",13:"rgba16sint",10:"rgba16float",54:"r16float",34:"rg16float",16:"rg32float",2:"rgba32float"},Qt={MAGIC_VALUE:542327876,MAGIC_SIZE:4,HEADER_SIZE:124,HEADER_DX10_SIZE:20,PIXEL_FORMAT_FLAGS:{ALPHAPIXELS:1,ALPHA:2,FOURCC:4,RGB:64,RGBA:65,YUV:512,LUMINANCE:131072,LUMINANCEA:131073},RESOURCE_MISC_TEXTURECUBE:4,HEADER_FIELDS:r8,HEADER_DX10_FIELDS:s8,DXGI_FORMAT:Wb,D3D10_RESOURCE_DIMENSION:Qb,D3DFMT:Er},YT={"bc1-rgba-unorm":8,"bc1-rgba-unorm-srgb":8,"bc2-rgba-unorm":16,"bc2-rgba-unorm-srgb":16,"bc3-rgba-unorm":16,"bc3-rgba-unorm-srgb":16,"bc4-r-unorm":8,"bc4-r-snorm":8,"bc5-rg-unorm":16,"bc5-rg-snorm":16,"bc6h-rgb-ufloat":16,"bc6h-rgb-float":16,"bc7-rgba-unorm":16,"bc7-rgba-unorm-srgb":16};function qT(n,t){const{format:e,fourCC:i,width:s,height:o,dataOffset:h,mipmapCount:f}=l8(n);if(!t.includes(e))throw new Error(`Unsupported texture format: ${i} ${e}, supported: ${t}`);if(f<=1)return{format:e,width:s,height:o,resource:[new Uint8Array(n,h)],alphaMode:"no-premultiply-alpha"};const m=a8(e,s,o,h,f,n);return{format:e,width:s,height:o,resource:m,alphaMode:"no-premultiply-alpha"}}function a8(n,t,e,i,s,o){const h=[],f=YT[n];let m=t,g=e,b=i;for(let x=0;x<s;++x){const E=Math.ceil(Math.max(4,m)/4)*4,A=Math.ceil(Math.max(4,g)/4)*4,R=f?E/4*A/4*f:m*g*4,D=new Uint8Array(o,b,R);h.push(D),b+=R,m=Math.max(m>>1,1),g=Math.max(g>>1,1)}return h}function l8(n){const t=new Uint32Array(n,0,Qt.HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(t[Qt.HEADER_FIELDS.MAGIC]!==Qt.MAGIC_VALUE)throw new Error("Invalid magic number in DDS header");const e=t[Qt.HEADER_FIELDS.HEIGHT],i=t[Qt.HEADER_FIELDS.WIDTH],s=Math.max(1,t[Qt.HEADER_FIELDS.MIPMAP_COUNT]),o=t[Qt.HEADER_FIELDS.PF_FLAGS],h=t[Qt.HEADER_FIELDS.FOURCC],f=o8(t,o,h,n),m=Qt.MAGIC_SIZE+Qt.HEADER_SIZE+(h===Qt.D3DFMT.DX10?Qt.HEADER_DX10_SIZE:0);return{format:f,fourCC:h,width:i,height:e,dataOffset:m,mipmapCount:s}}function o8(n,t,e,i){if(t&Qt.PIXEL_FORMAT_FLAGS.FOURCC){if(e===Qt.D3DFMT.DX10){const s=new Uint32Array(i,Qt.MAGIC_SIZE+Qt.HEADER_SIZE,Qt.HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(s[Qt.HEADER_DX10_FIELDS.MISC_FLAG]===Qt.RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(s[Qt.HEADER_DX10_FIELDS.RESOURCE_DIMENSION]===Qt.D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");const f=s[Qt.HEADER_DX10_FIELDS.DXGI_FORMAT];if(f in Tr)return Tr[f];throw new Error(`DDSParser cannot parse texture data with DXGI format ${f}`)}if(e in wy)return wy[e];throw new Error(`DDSParser cannot parse texture data with fourCC format ${e}`)}if(t&Qt.PIXEL_FORMAT_FLAGS.RGB||t&Qt.PIXEL_FORMAT_FLAGS.RGBA)return u8(n);throw t&Qt.PIXEL_FORMAT_FLAGS.YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):t&Qt.PIXEL_FORMAT_FLAGS.LUMINANCE||t&Qt.PIXEL_FORMAT_FLAGS.LUMINANCEA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):t&Qt.PIXEL_FORMAT_FLAGS.ALPHA||t&Qt.PIXEL_FORMAT_FLAGS.ALPHAPIXELS?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}function u8(n){const t=n[Qt.HEADER_FIELDS.RGB_BITCOUNT],e=n[Qt.HEADER_FIELDS.R_BIT_MASK],i=n[Qt.HEADER_FIELDS.G_BIT_MASK],s=n[Qt.HEADER_FIELDS.B_BIT_MASK],o=n[Qt.HEADER_FIELDS.A_BIT_MASK];switch(t){case 32:if(e===255&&i===65280&&s===16711680&&o===4278190080)return Tr[Qt.DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM];if(e===16711680&&i===65280&&s===255&&o===4278190080)return Tr[Qt.DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM];if(e===1072693248&&i===1047552&&s===1023&&o===3221225472)return Tr[Qt.DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM];if(e===65535&&i===4294901760&&s===0&&o===0)return Tr[Qt.DXGI_FORMAT.DXGI_FORMAT_R16G16_UNORM];if(e===4294967295&&i===0&&s===0&&o===0)return Tr[Qt.DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT];break;case 24:break;case 16:if(e===31744&&i===992&&s===31&&o===32768)return Tr[Qt.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];if(e===63488&&i===2016&&s===31&&o===0)return Tr[Qt.DXGI_FORMAT.DXGI_FORMAT_B5G6R5_UNORM];if(e===3840&&i===240&&s===15&&o===61440)return Tr[Qt.DXGI_FORMAT.DXGI_FORMAT_B4G4R4A4_UNORM];if(e===255&&i===0&&s===0&&o===65280)return Tr[Qt.DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM];if(e===65535&&i===0&&s===0&&o===0)return Tr[Qt.DXGI_FORMAT.DXGI_FORMAT_R16_UNORM];break;case 8:if(e===255&&i===0&&s===0&&o===0)return Tr[Qt.DXGI_FORMAT.DXGI_FORMAT_R8_UNORM];break}throw new Error(`DDSParser does not support uncompressed texture with configuration:
                bitCount = ${t}, rBitMask = ${e}, gBitMask = ${i}, aBitMask = ${o}`)}const c8={extension:{type:q.LoadParser,priority:Mr.High,name:"loadDDS"},name:"loadDDS",test(n){return xs(n,[".dds"])},async load(n,t,e){const i=await jd(),o=await(await fetch(n)).arrayBuffer(),h=qT(o,i),f=new qd(h);return qo(f,e,n)},unload(n){Array.isArray(n)?n.forEach(t=>t.destroy(!0)):n.destroy(!0)}};var jT=(n=>(n[n.RGBA8_SNORM=36759]="RGBA8_SNORM",n[n.RGBA=6408]="RGBA",n[n.RGBA8UI=36220]="RGBA8UI",n[n.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",n[n.RGBA8I=36238]="RGBA8I",n[n.RGBA8=32856]="RGBA8",n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",n[n.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",n[n.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",n[n.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",n[n.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",n[n.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",n[n.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",n[n.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",n[n.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",n[n.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",n[n.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",n[n.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",n[n.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",n[n.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",n[n.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",n[n.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",n[n.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",n[n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",n[n.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",n[n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",n[n.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",n[n.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",n))(jT||{});const h8={33776:"bc1-rgba-unorm",33777:"bc1-rgba-unorm",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",35916:"bc1-rgba-unorm-srgb",35917:"bc1-rgba-unorm-srgb",35918:"bc2-rgba-unorm-srgb",35919:"bc3-rgba-unorm-srgb",36283:"bc4-r-unorm",36284:"bc4-r-snorm",36285:"bc5-rg-unorm",36286:"bc5-rg-snorm",37488:"eac-r11unorm",37490:"eac-rg11snorm",37492:"etc2-rgb8unorm",37496:"etc2-rgba8unorm",37493:"etc2-rgb8unorm-srgb",37497:"etc2-rgba8unorm-srgb",37494:"etc2-rgb8a1unorm",37495:"etc2-rgb8a1unorm-srgb",37808:"astc-4x4-unorm",37840:"astc-4x4-unorm-srgb",37809:"astc-5x4-unorm",37841:"astc-5x4-unorm-srgb",37810:"astc-5x5-unorm",37842:"astc-5x5-unorm-srgb",37811:"astc-6x5-unorm",37843:"astc-6x5-unorm-srgb",37812:"astc-6x6-unorm",37844:"astc-6x6-unorm-srgb",37813:"astc-8x5-unorm",37845:"astc-8x5-unorm-srgb",37814:"astc-8x6-unorm",37846:"astc-8x6-unorm-srgb",37815:"astc-8x8-unorm",37847:"astc-8x8-unorm-srgb",37816:"astc-10x5-unorm",37848:"astc-10x5-unorm-srgb",37817:"astc-10x6-unorm",37849:"astc-10x6-unorm-srgb",37818:"astc-10x8-unorm",37850:"astc-10x8-unorm-srgb",37819:"astc-10x10-unorm",37851:"astc-10x10-unorm-srgb",37820:"astc-12x10-unorm",37852:"astc-12x10-unorm-srgb",37821:"astc-12x12-unorm",37853:"astc-12x12-unorm-srgb",36492:"bc7-rgba-unorm",36493:"bc7-rgba-unorm-srgb",36494:"bc6h-rgb-float",36495:"bc6h-rgb-ufloat",35907:"rgba8unorm-srgb",36759:"rgba8snorm",36220:"rgba8uint",36238:"rgba8sint",6408:"rgba8unorm"},f8=[171,75,84,88,32,49,49,187,13,10,26,10],d8={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},p8=64,m8=67305985,g8={5121:1,5123:2,5124:4,5125:4,5126:4,36193:8},_8={6408:4,6407:3,33319:2,6403:1,6409:1,6410:2,6406:1},y8={32819:2,32820:2,33635:2},b8={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,36283:.5,36284:.5,36285:1,36286:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,37808:1,37840:1,37809:.8,37841:.8,37810:.64,37842:.64,37811:.53375,37843:.53375,37812:.445,37844:.445,37813:.4,37845:.4,37814:.33375,37846:.33375,37815:.25,37847:.25,37816:.32,37848:.32,37817:.26625,37849:.26625,37818:.2,37850:.2,37819:.16,37851:.16,37820:.13375,37852:.13375,37821:.11125,37853:.11125,36492:1,36493:1,36494:1,36495:1},Un={FILE_HEADER_SIZE:p8,FILE_IDENTIFIER:f8,FORMATS_TO_COMPONENTS:_8,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:b8,INTERNAL_FORMAT_TO_TEXTURE_FORMATS:h8,FIELDS:d8,TYPES_TO_BYTES_PER_COMPONENT:g8,TYPES_TO_BYTES_PER_PIXEL:y8,ENDIANNESS:m8};function KT(n,t){const e=new DataView(n);if(!E8(e))throw new Error("Invalid KTX identifier in header");const{littleEndian:i,glType:s,glFormat:o,glInternalFormat:h,pixelWidth:f,pixelHeight:m,numberOfMipmapLevels:g,offset:b}=S8(e),x=Un.INTERNAL_FORMAT_TO_TEXTURE_FORMATS[h];if(!x)throw new Error(`Unknown texture format ${h}`);if(!t.includes(x))throw new Error(`Unsupported texture format: ${x}, supportedFormats: ${t}`);const E=x8(s,o,h),A=v8(e,s,E,f,m,b,g,i);return{format:x,width:f,height:m,resource:A,alphaMode:"no-premultiply-alpha"}}function v8(n,t,e,i,s,o,h,f){const m=i+3&-4,g=s+3&-4;let b=i*s;t===0&&(b=m*g);let x=b*e,E=i,A=s,R=m,D=g,B=o;const P=new Array(h);for(let G=0;G<h;G++){const H=n.getUint32(B,f);let j=B+4;P[G]=new Uint8Array(n.buffer,j,x),j+=x,B+=H+4,B=B%4!==0?B+4-B%4:B,E=E>>1||1,A=A>>1||1,R=E+4-1&-4,D=A+4-1&-4,x=R*D*e}return P}function x8(n,t,e){let i=Un.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[e];if(n!==0&&(Un.TYPES_TO_BYTES_PER_COMPONENT[n]?i=Un.TYPES_TO_BYTES_PER_COMPONENT[n]*Un.FORMATS_TO_COMPONENTS[t]:i=Un.TYPES_TO_BYTES_PER_PIXEL[n]),i===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");return i}function S8(n){const t=n.getUint32(Un.FIELDS.ENDIANNESS,!0)===Un.ENDIANNESS,e=n.getUint32(Un.FIELDS.GL_TYPE,t),i=n.getUint32(Un.FIELDS.GL_FORMAT,t),s=n.getUint32(Un.FIELDS.GL_INTERNAL_FORMAT,t),o=n.getUint32(Un.FIELDS.PIXEL_WIDTH,t),h=n.getUint32(Un.FIELDS.PIXEL_HEIGHT,t)||1,f=n.getUint32(Un.FIELDS.PIXEL_DEPTH,t)||1,m=n.getUint32(Un.FIELDS.NUMBER_OF_ARRAY_ELEMENTS,t)||1,g=n.getUint32(Un.FIELDS.NUMBER_OF_FACES,t),b=n.getUint32(Un.FIELDS.NUMBER_OF_MIPMAP_LEVELS,t),x=n.getUint32(Un.FIELDS.BYTES_OF_KEY_VALUE_DATA,t);if(h===0||f!==1)throw new Error("Only 2D textures are supported");if(g!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(m!==1)throw new Error("WebGL does not support array textures");return{littleEndian:t,glType:e,glFormat:i,glInternalFormat:s,pixelWidth:o,pixelHeight:h,numberOfMipmapLevels:b,offset:Un.FILE_HEADER_SIZE+x}}function E8(n){for(let t=0;t<Un.FILE_IDENTIFIER.length;t++)if(n.getUint8(t)!==Un.FILE_IDENTIFIER[t])return!1;return!0}const T8={extension:{type:q.LoadParser,priority:Mr.High,name:"loadKTX"},name:"loadKTX",test(n){return xs(n,".ktx")},async load(n,t,e){const i=await jd(),o=await(await fetch(n)).arrayBuffer(),h=KT(o,i),f=new qd(h);return qo(f,e,n)},unload(n){Array.isArray(n)?n.forEach(t=>t.destroy(!0)):n.destroy(!0)}},A8=`(function () {
    'use strict';

    const converters = {
      rgb8unorm: {
        convertedFormat: "rgba8unorm",
        convertFunction: convertRGBtoRGBA
      },
      "rgb8unorm-srgb": {
        convertedFormat: "rgba8unorm-srgb",
        convertFunction: convertRGBtoRGBA
      }
    };
    function convertFormatIfRequired(textureOptions) {
      const format = textureOptions.format;
      if (converters[format]) {
        const convertFunction = converters[format].convertFunction;
        const levelBuffers = textureOptions.resource;
        for (let i = 0; i < levelBuffers.length; i++) {
          levelBuffers[i] = convertFunction(levelBuffers[i]);
        }
        textureOptions.format = converters[format].convertedFormat;
      }
    }
    function convertRGBtoRGBA(levelBuffer) {
      const pixelCount = levelBuffer.byteLength / 3;
      const levelBufferWithAlpha = new Uint32Array(pixelCount);
      for (let i = 0; i < pixelCount; ++i) {
        levelBufferWithAlpha[i] = levelBuffer[i * 3] + (levelBuffer[i * 3 + 1] << 8) + (levelBuffer[i * 3 + 2] << 16) + 4278190080;
      }
      return new Uint8Array(levelBufferWithAlpha.buffer);
    }

    function createLevelBuffersFromKTX(ktxTexture) {
      const levelBuffers = [];
      for (let i = 0; i < ktxTexture.numLevels; i++) {
        const imageData = ktxTexture.getImageData(i, 0, 0);
        const levelBuffer = new Uint8Array(imageData.byteLength);
        levelBuffer.set(imageData);
        levelBuffers.push(levelBuffer);
      }
      return levelBuffers;
    }

    const glFormatToGPUFormatMap = {
      6408: "rgba8unorm",
      32856: "bgra8unorm",
      //
      32857: "rgb10a2unorm",
      33189: "depth16unorm",
      33190: "depth24plus",
      33321: "r8unorm",
      33323: "rg8unorm",
      33325: "r16float",
      33326: "r32float",
      33327: "rg16float",
      33328: "rg32float",
      33329: "r8sint",
      33330: "r8uint",
      33331: "r16sint",
      33332: "r16uint",
      33333: "r32sint",
      33334: "r32uint",
      33335: "rg8sint",
      33336: "rg8uint",
      33337: "rg16sint",
      33338: "rg16uint",
      33339: "rg32sint",
      33340: "rg32uint",
      33778: "bc2-rgba-unorm",
      33779: "bc3-rgba-unorm",
      34836: "rgba32float",
      34842: "rgba16float",
      35056: "depth24plus-stencil8",
      35898: "rg11b10ufloat",
      35901: "rgb9e5ufloat",
      35907: "rgba8unorm-srgb",
      // bgra8unorm-srgb
      36012: "depth32float",
      36013: "depth32float-stencil8",
      36168: "stencil8",
      36208: "rgba32uint",
      36214: "rgba16uint",
      36220: "rgba8uint",
      36226: "rgba32sint",
      36232: "rgba16sint",
      36238: "rgba8sint",
      36492: "bc7-rgba-unorm",
      36756: "r8snorm",
      36757: "rg8snorm",
      36759: "rgba8snorm",
      37496: "etc2-rgba8unorm",
      37808: "astc-4x4-unorm"
    };
    function glFormatToGPUFormat(glInternalFormat) {
      const format = glFormatToGPUFormatMap[glInternalFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported glInternalFormat: \${glInternalFormat}\`);
    }

    const vkFormatToGPUFormatMap = {
      23: "rgb8unorm",
      // VK_FORMAT_R8G8B8_UNORM
      37: "rgba8unorm",
      // VK_FORMAT_R8G8B8A8_UNORM
      43: "rgba8unorm-srgb"
      // VK_FORMAT_R8G8B8A8_SRGB
      // TODO add more!
    };
    function vkFormatToGPUFormat(vkFormat) {
      const format = vkFormatToGPUFormatMap[vkFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported VkFormat: \${vkFormat}\`);
    }

    function getTextureFormatFromKTXTexture(ktxTexture) {
      if (ktxTexture.classId === 2) {
        return vkFormatToGPUFormat(ktxTexture.vkFormat);
      }
      return glFormatToGPUFormat(ktxTexture.glInternalformat);
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": "BC3_RGBA",
      "bc7-rgba-unorm": "BC7_M5_RGBA",
      "etc2-rgba8unorm": "ETC2_RGBA",
      "astc-4x4-unorm": "ASTC_4x4_RGBA",
      // Uncompressed
      rgba8unorm: "RGBA32",
      rg11b10ufloat: "R11F_G11F_B10F"
    };
    function gpuFormatToKTXBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "",
      wasmUrl: ""
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let ktxPromise;
    async function getKTX() {
      if (!ktxPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        ktxPromise = new Promise((resolve) => {
          LIBKTX({
            locateFile: (_file) => absoluteWasmUrl
          }).then((libktx) => {
            resolve(libktx);
          });
        });
      }
      return ktxPromise;
    }
    async function fetchKTXTexture(url, ktx) {
      const ktx2Response = await fetch(url);
      if (ktx2Response.ok) {
        const ktx2ArrayBuffer = await ktx2Response.arrayBuffer();
        return new ktx.ktxTexture(new Uint8Array(ktx2ArrayBuffer));
      }
      throw new Error(\`Failed to load KTX(2) texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const ktx = await getKTX();
      const ktxTexture = await fetchKTXTexture(url, ktx);
      let format;
      if (ktxTexture.needsTranscoding) {
        format = basisTranscodedTextureFormat;
        const transcodeFormat = ktx.TranscodeTarget[basisTranscoderFormat];
        const result = ktxTexture.transcodeBasis(transcodeFormat, 0);
        if (result !== ktx.ErrorCode.SUCCESS) {
          throw new Error("Unable to transcode basis texture.");
        }
      } else {
        format = getTextureFormatFromKTXTexture(ktxTexture);
      }
      const levelBuffers = createLevelBuffersFromKTX(ktxTexture);
      const textureOptions = {
        width: ktxTexture.baseWidth,
        height: ktxTexture.baseHeight,
        format,
        mipLevelCount: ktxTexture.numLevels,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
      convertFormatIfRequired(textureOptions);
      return textureOptions;
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl)
        settings.jsUrl = jsUrl;
      if (wasmUrl)
        settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToKTXBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getKTX();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type]?.(message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    };

})();
`;let _h=null;class WT{constructor(){_h||(_h=URL.createObjectURL(new Blob([A8],{type:"application/javascript"}))),this.worker=new Worker(_h)}}WT.revokeObjectURL=function(){_h&&(URL.revokeObjectURL(_h),_h=null)};const yg={jsUrl:"https://files.pixijs.download/transcoders/ktx/libktx.js",wasmUrl:"https://files.pixijs.download/transcoders/ktx/libktx.wasm"};function C8(n){Object.assign(yg,n)}let id;const QT={};function B8(n){return id||(id=new WT().worker,id.onmessage=t=>{const{success:e,url:i,textureOptions:s}=t.data;e||console.warn("Failed to load KTX texture",i),QT[i](s)},id.postMessage({type:"init",jsUrl:yg.jsUrl,wasmUrl:yg.wasmUrl,supportedTextures:n})),id}function ZT(n,t){const e=B8(t);return new Promise(i=>{QT[n]=i,e.postMessage({type:"load",url:n})})}const R8={extension:{type:q.LoadParser,priority:Mr.High,name:"loadKTX2"},name:"loadKTX2",test(n){return xs(n,".ktx2")},async load(n,t,e){const i=await jd(),s=await ZT(n,i),o=new qd(s);return qo(o,e,n)},async unload(n){Array.isArray(n)?n.forEach(t=>t.destroy(!0)):n.destroy(!0)}},N0={rgb8unorm:{convertedFormat:"rgba8unorm",convertFunction:D1},"rgb8unorm-srgb":{convertedFormat:"rgba8unorm-srgb",convertFunction:D1}};function M8(n){const t=n.format;if(N0[t]){const e=N0[t].convertFunction,i=n.resource;for(let s=0;s<i.length;s++)i[s]=e(i[s]);n.format=N0[t].convertedFormat}}function D1(n){const t=n.byteLength/3,e=new Uint32Array(t);for(let i=0;i<t;++i)e[i]=n[i*3]+(n[i*3+1]<<8)+(n[i*3+2]<<16)+4278190080;return new Uint8Array(e.buffer)}function D8(n){const t=[];for(let e=0;e<n.numLevels;e++){const i=n.getImageData(e,0,0),s=new Uint8Array(i.byteLength);s.set(i),t.push(s)}return t}const w8={6408:"rgba8unorm",32856:"bgra8unorm",32857:"rgb10a2unorm",33189:"depth16unorm",33190:"depth24plus",33321:"r8unorm",33323:"rg8unorm",33325:"r16float",33326:"r32float",33327:"rg16float",33328:"rg32float",33329:"r8sint",33330:"r8uint",33331:"r16sint",33332:"r16uint",33333:"r32sint",33334:"r32uint",33335:"rg8sint",33336:"rg8uint",33337:"rg16sint",33338:"rg16uint",33339:"rg32sint",33340:"rg32uint",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",34836:"rgba32float",34842:"rgba16float",35056:"depth24plus-stencil8",35898:"rg11b10ufloat",35901:"rgb9e5ufloat",35907:"rgba8unorm-srgb",36012:"depth32float",36013:"depth32float-stencil8",36168:"stencil8",36208:"rgba32uint",36214:"rgba16uint",36220:"rgba8uint",36226:"rgba32sint",36232:"rgba16sint",36238:"rgba8sint",36492:"bc7-rgba-unorm",36756:"r8snorm",36757:"rg8snorm",36759:"rgba8snorm",37496:"etc2-rgba8unorm",37808:"astc-4x4-unorm"};function JT(n){const t=w8[n];if(t)return t;throw new Error(`Unsupported glInternalFormat: ${n}`)}const U8={23:"rgb8unorm",37:"rgba8unorm",43:"rgba8unorm-srgb"};function $T(n){const t=U8[n];if(t)return t;throw new Error(`Unsupported VkFormat: ${n}`)}function O8(n){return n.classId===2?$T(n.vkFormat):JT(n.glInternalformat)}const P8={"bc3-rgba-unorm":"BC3_RGBA","bc7-rgba-unorm":"BC7_M5_RGBA","etc2-rgba8unorm":"ETC2_RGBA","astc-4x4-unorm":"ASTC_4x4_RGBA",rgba8unorm:"RGBA32",rg11b10ufloat:"R11F_G11F_B10F"};function G8(n){const t=P8[n];if(t)return t;throw new Error(`Unsupported transcoderFormat: ${n}`)}const bg=["basis","bc7","bc6h","astc","etc2","bc5","bc4","bc3","bc2","bc1","eac"],N8={extension:q.ResolveParser,test:n=>xs(n,[".ktx",".ktx2",".dds"]),parse:n=>{var i;let t;const e=n.split(".");if(e.length>2){const s=e[e.length-2];bg.includes(s)&&(t=s)}else t=e[e.length-1];return{resolution:parseFloat(((i=Yo.RETINA_PREFIX.exec(n))==null?void 0:i[1])??"1"),format:t,src:n}}};let Zm;const z8={extension:{type:q.DetectionParser,priority:2},test:async()=>!!(await Xd()||kd()),add:async n=>{const t=await Kb();return Zm=L8(t),[...Zm,...n]},remove:async n=>Zm?n.filter(t=>!(t in Zm)):n};function L8(n){const t=["basis"],e={};return n.forEach(i=>{const s=i.split("-")[0];s&&!e[s]&&(e[s]=!0,t.push(s))}),t.sort((i,s)=>{const o=bg.indexOf(i),h=bg.indexOf(s);return o===-1?1:h===-1?-1:o-h}),t}const H8=new ti,Uy=class{cull(t,e,i=!0){this._cullRecursive(t,e,i)}_cullRecursive(t,e,i=!0){if(t.cullable&&t.measurable&&t.includeInBuild){const s=t.cullArea??Fd(t,i,H8);t.culled=s.x>=e.x+e.width||s.y>=e.y+e.height||s.x+s.width<=e.x||s.y+s.height<=e.y}else t.culled=!1;if(!(!t.cullableChildren||t.culled||!t.renderable||!t.measurable||!t.includeInBuild))for(let s=0;s<t.children.length;s++)this._cullRecursive(t.children[s],e,i)}};Uy.shared=new Uy;let tA=Uy;class eA{static init(){this._renderRef=this.render.bind(this),this.render=()=>{tA.shared.cull(this.stage,this.renderer.screen),this.renderer.render({container:this.stage})}}static destroy(){this.render=this._renderRef}}eA.extension={priority:10,type:q.Application,name:"culler"};class F8 extends $a{constructor(t={}){const{element:e,anchor:i,...s}=t;super({label:"DOMContainer",...s}),this.renderPipeId="dom",this.batched=!1,this._anchor=new Xe(0,0),i&&(this.anchor=i),this.element=t.element||document.createElement("div")}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set element(t){this._element!==t&&(this._element=t,this.onViewUpdate())}get element(){return this._element}updateBounds(){const t=this._bounds,e=this._element;if(!e){t.minX=0,t.minY=0,t.maxX=0,t.maxY=0;return}const{offsetWidth:i,offsetHeight:s}=e;t.minX=0,t.maxX=i,t.minY=0,t.maxY=s}destroy(t=!1){var e,i;super.destroy(t),(i=(e=this._element)==null?void 0:e.parentNode)==null||i.removeChild(this._element),this._element=null,this._anchor=null}}class nA{constructor(t){this._attachedDomElements=[],this._renderer=t,this._renderer.runners.postrender.add(this),this._domElement=document.createElement("div"),this._domElement.style.position="absolute",this._domElement.style.top="0",this._domElement.style.left="0",this._domElement.style.pointerEvents="none",this._domElement.style.zIndex="1000"}addRenderable(t,e){this._attachedDomElements.includes(t)||this._attachedDomElements.push(t)}updateRenderable(t){}validateRenderable(t){return!0}postrender(){var o;const t=this._attachedDomElements;if(t.length===0){this._domElement.remove();return}const e=this._renderer.view.canvas;this._domElement.parentNode!==e.parentNode&&((o=e.parentNode)==null||o.appendChild(this._domElement));const i=parseFloat(e.style.width)/e.width*this._renderer.resolution,s=parseFloat(e.style.height)/e.height*this._renderer.resolution;this._domElement.style.transform=`translate(${e.offsetLeft}px, ${e.offsetTop}px) scale(${i}, ${s})`;for(let h=0;h<t.length;h++){const f=t[h],m=f.element;if(!f.parent||f.globalDisplayStatus<7)m==null||m.remove(),t.splice(h,1),h--;else{this._domElement.contains(m)||(m.style.position="absolute",m.style.pointerEvents="auto",this._domElement.appendChild(m));const g=f.worldTransform,b=f._anchor,x=f.width*b.x,E=f.height*b.y;m.style.transformOrigin=`${x}px ${E}px`,m.style.transform=`matrix(${g.a}, ${g.b}, ${g.c}, ${g.d}, ${g.tx-x}, ${g.ty-E})`,m.style.opacity=f.groupAlpha.toString()}}}destroy(){var t;this._renderer.runners.postrender.remove(this);for(let e=0;e<this._attachedDomElements.length;e++)(t=this._attachedDomElements[e].element)==null||t.remove();this._attachedDomElements.length=0,this._domElement.remove(),this._renderer=null}}nA.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"dom"};var rd={},Nl={},Xu={},w1;function r_(){if(w1)return Xu;w1=1;function n(o,h,f){if(f===void 0&&(f=Array.prototype),o&&typeof f.find=="function")return f.find.call(o,h);for(var m=0;m<o.length;m++)if(Object.prototype.hasOwnProperty.call(o,m)){var g=o[m];if(h.call(void 0,g,m,o))return g}}function t(o,h){return h===void 0&&(h=Object),h&&typeof h.freeze=="function"?h.freeze(o):o}function e(o,h){if(o===null||typeof o!="object")throw new TypeError("target is not an object");for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(o[f]=h[f]);return o}var i=t({HTML:"text/html",isHTML:function(o){return o===i.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),s=t({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(o){return o===s.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Xu.assign=e,Xu.find=n,Xu.freeze=t,Xu.MIME_TYPE=i,Xu.NAMESPACE=s,Xu}var U1;function iA(){if(U1)return Nl;U1=1;var n=r_(),t=n.find,e=n.NAMESPACE;function i(M){return M!==""}function s(M){return M?M.split(/[\t\n\f\r ]+/).filter(i):[]}function o(M,O){return M.hasOwnProperty(O)||(M[O]=!0),M}function h(M){if(!M)return[];var O=s(M);return Object.keys(O.reduce(o,{}))}function f(M){return function(O){return M&&M.indexOf(O)!==-1}}function m(M,O){for(var k in M)Object.prototype.hasOwnProperty.call(M,k)&&(O[k]=M[k])}function g(M,O){var k=M.prototype;if(!(k instanceof O)){let at=function(){};at.prototype=O.prototype,at=new at,m(k,at),M.prototype=k=at}k.constructor!=M&&(typeof M!="function"&&console.error("unknown Class:"+M),k.constructor=M)}var b={},x=b.ELEMENT_NODE=1,E=b.ATTRIBUTE_NODE=2,A=b.TEXT_NODE=3,R=b.CDATA_SECTION_NODE=4,D=b.ENTITY_REFERENCE_NODE=5,B=b.ENTITY_NODE=6,P=b.PROCESSING_INSTRUCTION_NODE=7,G=b.COMMENT_NODE=8,H=b.DOCUMENT_NODE=9,j=b.DOCUMENT_TYPE_NODE=10,Z=b.DOCUMENT_FRAGMENT_NODE=11,nt=b.NOTATION_NODE=12,V={},ht={};V.INDEX_SIZE_ERR=(ht[1]="Index size error",1),V.DOMSTRING_SIZE_ERR=(ht[2]="DOMString size error",2);var N=V.HIERARCHY_REQUEST_ERR=(ht[3]="Hierarchy request error",3);V.WRONG_DOCUMENT_ERR=(ht[4]="Wrong document",4),V.INVALID_CHARACTER_ERR=(ht[5]="Invalid character",5),V.NO_DATA_ALLOWED_ERR=(ht[6]="No data allowed",6),V.NO_MODIFICATION_ALLOWED_ERR=(ht[7]="No modification allowed",7);var Y=V.NOT_FOUND_ERR=(ht[8]="Not found",8);V.NOT_SUPPORTED_ERR=(ht[9]="Not supported",9);var X=V.INUSE_ATTRIBUTE_ERR=(ht[10]="Attribute in use",10);V.INVALID_STATE_ERR=(ht[11]="Invalid state",11),V.SYNTAX_ERR=(ht[12]="Syntax error",12),V.INVALID_MODIFICATION_ERR=(ht[13]="Invalid modification",13),V.NAMESPACE_ERR=(ht[14]="Invalid namespace",14),V.INVALID_ACCESS_ERR=(ht[15]="Invalid access",15);function $(M,O){if(O instanceof Error)var k=O;else k=this,Error.call(this,ht[M]),this.message=ht[M],Error.captureStackTrace&&Error.captureStackTrace(this,$);return k.code=M,O&&(this.message=this.message+": "+O),k}$.prototype=Error.prototype,m(V,$);function ct(){}ct.prototype={length:0,item:function(M){return M>=0&&M<this.length?this[M]:null},toString:function(M,O){for(var k=[],at=0;at<this.length;at++)Ze(this[at],k,M,O);return k.join("")},filter:function(M){return Array.prototype.filter.call(this,M)},indexOf:function(M){return Array.prototype.indexOf.call(this,M)}};function bt(M,O){this._node=M,this._refresh=O,Tt(this)}function Tt(M){var O=M._node._inc||M._node.ownerDocument._inc;if(M._inc!==O){var k=M._refresh(M._node);if(Wo(M,"length",k.length),!M.$$length||k.length<M.$$length)for(var at=k.length;at in M;at++)Object.prototype.hasOwnProperty.call(M,at)&&delete M[at];m(k,M),M._inc=O}}bt.prototype.item=function(M){return Tt(this),this[M]||null},g(bt,ct);function F(){}function K(M,O){for(var k=M.length;k--;)if(M[k]===O)return k}function ut(M,O,k,at){if(at?O[K(O,at)]=k:O[O.length++]=k,M){k.ownerElement=M;var Et=M.ownerDocument;Et&&(at&&Ft(Et,M,at),Mt(Et,M,k))}}function ft(M,O,k){var at=K(O,k);if(at>=0){for(var Et=O.length-1;at<Et;)O[at]=O[++at];if(O.length=Et,M){var Vt=M.ownerDocument;Vt&&(Ft(Vt,M,k),k.ownerElement=null)}}else throw new $(Y,new Error(M.tagName+"@"+k))}F.prototype={length:0,item:ct.prototype.item,getNamedItem:function(M){for(var O=this.length;O--;){var k=this[O];if(k.nodeName==M)return k}},setNamedItem:function(M){var O=M.ownerElement;if(O&&O!=this._ownerElement)throw new $(X);var k=this.getNamedItem(M.nodeName);return ut(this._ownerElement,this,M,k),k},setNamedItemNS:function(M){var O=M.ownerElement,k;if(O&&O!=this._ownerElement)throw new $(X);return k=this.getNamedItemNS(M.namespaceURI,M.localName),ut(this._ownerElement,this,M,k),k},removeNamedItem:function(M){var O=this.getNamedItem(M);return ft(this._ownerElement,this,O),O},removeNamedItemNS:function(M,O){var k=this.getNamedItemNS(M,O);return ft(this._ownerElement,this,k),k},getNamedItemNS:function(M,O){for(var k=this.length;k--;){var at=this[k];if(at.localName==O&&at.namespaceURI==M)return at}return null}};function z(){}z.prototype={hasFeature:function(M,O){return!0},createDocument:function(M,O,k){var at=new yt;if(at.implementation=this,at.childNodes=new ct,at.doctype=k||null,k&&at.appendChild(k),O){var Et=at.createElementNS(M,O);at.appendChild(Et)}return at},createDocumentType:function(M,O,k){var at=new Es;return at.name=M,at.nodeName=M,at.publicId=O||"",at.systemId=k||"",at}};function it(){}it.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(M,O){return ni(this,M,O)},replaceChild:function(M,O){ni(this,M,O,sr),O&&this.removeChild(O)},removeChild:function(M){return Gt(this,M)},appendChild:function(M){return this.insertBefore(M,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(M){return Kl(this.ownerDocument||this,this,M)},normalize:function(){for(var M=this.firstChild;M;){var O=M.nextSibling;O&&O.nodeType==A&&M.nodeType==A?(this.removeChild(O),M.appendData(O.data)):(M.normalize(),M=O)}},isSupported:function(M,O){return this.ownerDocument.implementation.hasFeature(M,O)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(M){for(var O=this;O;){var k=O._nsMap;if(k){for(var at in k)if(Object.prototype.hasOwnProperty.call(k,at)&&k[at]===M)return at}O=O.nodeType==E?O.ownerDocument:O.parentNode}return null},lookupNamespaceURI:function(M){for(var O=this;O;){var k=O._nsMap;if(k&&Object.prototype.hasOwnProperty.call(k,M))return k[M];O=O.nodeType==E?O.ownerDocument:O.parentNode}return null},isDefaultNamespace:function(M){var O=this.lookupPrefix(M);return O==null}};function At(M){return M=="<"&&"&lt;"||M==">"&&"&gt;"||M=="&"&&"&amp;"||M=='"'&&"&quot;"||"&#"+M.charCodeAt()+";"}m(b,it),m(b,it.prototype);function Rt(M,O){if(O(M))return!0;if(M=M.firstChild)do if(Rt(M,O))return!0;while(M=M.nextSibling)}function yt(){this.ownerDocument=this}function Mt(M,O,k){M&&M._inc++;var at=k.namespaceURI;at===e.XMLNS&&(O._nsMap[k.prefix?k.localName:""]=k.value)}function Ft(M,O,k,at){M&&M._inc++;var Et=k.namespaceURI;Et===e.XMLNS&&delete O._nsMap[k.prefix?k.localName:""]}function Pe(M,O,k){if(M&&M._inc){M._inc++;var at=O.childNodes;if(k)at[at.length++]=k;else{for(var Et=O.firstChild,Vt=0;Et;)at[Vt++]=Et,Et=Et.nextSibling;at.length=Vt,delete at[at.length]}}}function Gt(M,O){var k=O.previousSibling,at=O.nextSibling;return k?k.nextSibling=at:M.firstChild=at,at?at.previousSibling=k:M.lastChild=k,O.parentNode=null,O.previousSibling=null,O.nextSibling=null,Pe(M.ownerDocument,M),O}function ne(M){return M&&(M.nodeType===it.DOCUMENT_NODE||M.nodeType===it.DOCUMENT_FRAGMENT_NODE||M.nodeType===it.ELEMENT_NODE)}function ce(M){return M&&(Be(M)||Fe(M)||Te(M)||M.nodeType===it.DOCUMENT_FRAGMENT_NODE||M.nodeType===it.COMMENT_NODE||M.nodeType===it.PROCESSING_INSTRUCTION_NODE)}function Te(M){return M&&M.nodeType===it.DOCUMENT_TYPE_NODE}function Be(M){return M&&M.nodeType===it.ELEMENT_NODE}function Fe(M){return M&&M.nodeType===it.TEXT_NODE}function ve(M,O){var k=M.childNodes||[];if(t(k,Be)||Te(O))return!1;var at=t(k,Te);return!(O&&at&&k.indexOf(at)>k.indexOf(O))}function ln(M,O){var k=M.childNodes||[];function at(Vt){return Be(Vt)&&Vt!==O}if(t(k,at))return!1;var Et=t(k,Te);return!(O&&Et&&k.indexOf(Et)>k.indexOf(O))}function Ge(M,O,k){if(!ne(M))throw new $(N,"Unexpected parent node type "+M.nodeType);if(k&&k.parentNode!==M)throw new $(Y,"child not in parent");if(!ce(O)||Te(O)&&M.nodeType!==it.DOCUMENT_NODE)throw new $(N,"Unexpected node type "+O.nodeType+" for parent node type "+M.nodeType)}function In(M,O,k){var at=M.childNodes||[],Et=O.childNodes||[];if(O.nodeType===it.DOCUMENT_FRAGMENT_NODE){var Vt=Et.filter(Be);if(Vt.length>1||t(Et,Fe))throw new $(N,"More than one element or text in fragment");if(Vt.length===1&&!ve(M,k))throw new $(N,"Element in fragment can not be inserted before doctype")}if(Be(O)&&!ve(M,k))throw new $(N,"Only one element can be added and only after doctype");if(Te(O)){if(t(at,Te))throw new $(N,"Only one doctype is allowed");var xe=t(at,Be);if(k&&at.indexOf(xe)<at.indexOf(k))throw new $(N,"Doctype can only be inserted before an element");if(!k&&xe)throw new $(N,"Doctype can not be appended since element is present")}}function sr(M,O,k){var at=M.childNodes||[],Et=O.childNodes||[];if(O.nodeType===it.DOCUMENT_FRAGMENT_NODE){var Vt=Et.filter(Be);if(Vt.length>1||t(Et,Fe))throw new $(N,"More than one element or text in fragment");if(Vt.length===1&&!ln(M,k))throw new $(N,"Element in fragment can not be inserted before doctype")}if(Be(O)&&!ln(M,k))throw new $(N,"Only one element can be added and only after doctype");if(Te(O)){if(t(at,function(Ui){return Te(Ui)&&Ui!==k}))throw new $(N,"Only one doctype is allowed");var xe=t(at,Be);if(k&&at.indexOf(xe)<at.indexOf(k))throw new $(N,"Doctype can only be inserted before an element")}}function ni(M,O,k,at){Ge(M,O,k),M.nodeType===it.DOCUMENT_NODE&&(at||In)(M,O,k);var Et=O.parentNode;if(Et&&Et.removeChild(O),O.nodeType===Z){var Vt=O.firstChild;if(Vt==null)return O;var xe=O.lastChild}else Vt=xe=O;var En=k?k.previousSibling:M.lastChild;Vt.previousSibling=En,xe.nextSibling=k,En?En.nextSibling=Vt:M.firstChild=Vt,k==null?M.lastChild=xe:k.previousSibling=xe;do Vt.parentNode=M;while(Vt!==xe&&(Vt=Vt.nextSibling));return Pe(M.ownerDocument||M,M),O.nodeType==Z&&(O.firstChild=O.lastChild=null),O}function Kn(M,O){return O.parentNode&&O.parentNode.removeChild(O),O.parentNode=M,O.previousSibling=M.lastChild,O.nextSibling=null,O.previousSibling?O.previousSibling.nextSibling=O:M.firstChild=O,M.lastChild=O,Pe(M.ownerDocument,M,O),O}yt.prototype={nodeName:"#document",nodeType:H,doctype:null,documentElement:null,_inc:1,insertBefore:function(M,O){if(M.nodeType==Z){for(var k=M.firstChild;k;){var at=k.nextSibling;this.insertBefore(k,O),k=at}return M}return ni(this,M,O),M.ownerDocument=this,this.documentElement===null&&M.nodeType===x&&(this.documentElement=M),M},removeChild:function(M){return this.documentElement==M&&(this.documentElement=null),Gt(this,M)},replaceChild:function(M,O){ni(this,M,O,sr),M.ownerDocument=this,O&&this.removeChild(O),Be(M)&&(this.documentElement=M)},importNode:function(M,O){return oa(this,M,O)},getElementById:function(M){var O=null;return Rt(this.documentElement,function(k){if(k.nodeType==x&&k.getAttribute("id")==M)return O=k,!0}),O},getElementsByClassName:function(M){var O=h(M);return new bt(this,function(k){var at=[];return O.length>0&&Rt(k.documentElement,function(Et){if(Et!==k&&Et.nodeType===x){var Vt=Et.getAttribute("class");if(Vt){var xe=M===Vt;if(!xe){var En=h(Vt);xe=O.every(f(En))}xe&&at.push(Et)}}}),at})},createElement:function(M){var O=new ie;O.ownerDocument=this,O.nodeName=M,O.tagName=M,O.localName=M,O.childNodes=new ct;var k=O.attributes=new F;return k._ownerElement=O,O},createDocumentFragment:function(){var M=new aa;return M.ownerDocument=this,M.childNodes=new ct,M},createTextNode:function(M){var O=new _i;return O.ownerDocument=this,O.appendData(M),O},createComment:function(M){var O=new Yl;return O.ownerDocument=this,O.appendData(M),O},createCDATASection:function(M){var O=new ql;return O.ownerDocument=this,O.appendData(M),O},createProcessingInstruction:function(M,O){var k=new il;return k.ownerDocument=this,k.tagName=k.nodeName=k.target=M,k.nodeValue=k.data=O,k},createAttribute:function(M){var O=new Nn;return O.ownerDocument=this,O.name=M,O.nodeName=M,O.localName=M,O.specified=!0,O},createEntityReference:function(M){var O=new jl;return O.ownerDocument=this,O.nodeName=M,O},createElementNS:function(M,O){var k=new ie,at=O.split(":"),Et=k.attributes=new F;return k.childNodes=new ct,k.ownerDocument=this,k.nodeName=O,k.tagName=O,k.namespaceURI=M,at.length==2?(k.prefix=at[0],k.localName=at[1]):k.localName=O,Et._ownerElement=k,k},createAttributeNS:function(M,O){var k=new Nn,at=O.split(":");return k.ownerDocument=this,k.nodeName=O,k.name=O,k.namespaceURI=M,k.specified=!0,at.length==2?(k.prefix=at[0],k.localName=at[1]):k.localName=O,k}},g(yt,it);function ie(){this._nsMap={}}ie.prototype={nodeType:x,hasAttribute:function(M){return this.getAttributeNode(M)!=null},getAttribute:function(M){var O=this.getAttributeNode(M);return O&&O.value||""},getAttributeNode:function(M){return this.attributes.getNamedItem(M)},setAttribute:function(M,O){var k=this.ownerDocument.createAttribute(M);k.value=k.nodeValue=""+O,this.setAttributeNode(k)},removeAttribute:function(M){var O=this.getAttributeNode(M);O&&this.removeAttributeNode(O)},appendChild:function(M){return M.nodeType===Z?this.insertBefore(M,null):Kn(this,M)},setAttributeNode:function(M){return this.attributes.setNamedItem(M)},setAttributeNodeNS:function(M){return this.attributes.setNamedItemNS(M)},removeAttributeNode:function(M){return this.attributes.removeNamedItem(M.nodeName)},removeAttributeNS:function(M,O){var k=this.getAttributeNodeNS(M,O);k&&this.removeAttributeNode(k)},hasAttributeNS:function(M,O){return this.getAttributeNodeNS(M,O)!=null},getAttributeNS:function(M,O){var k=this.getAttributeNodeNS(M,O);return k&&k.value||""},setAttributeNS:function(M,O,k){var at=this.ownerDocument.createAttributeNS(M,O);at.value=at.nodeValue=""+k,this.setAttributeNode(at)},getAttributeNodeNS:function(M,O){return this.attributes.getNamedItemNS(M,O)},getElementsByTagName:function(M){return new bt(this,function(O){var k=[];return Rt(O,function(at){at!==O&&at.nodeType==x&&(M==="*"||at.tagName==M)&&k.push(at)}),k})},getElementsByTagNameNS:function(M,O){return new bt(this,function(k){var at=[];return Rt(k,function(Et){Et!==k&&Et.nodeType===x&&(M==="*"||Et.namespaceURI===M)&&(O==="*"||Et.localName==O)&&at.push(Et)}),at})}},yt.prototype.getElementsByTagName=ie.prototype.getElementsByTagName,yt.prototype.getElementsByTagNameNS=ie.prototype.getElementsByTagNameNS,g(ie,it);function Nn(){}Nn.prototype.nodeType=E,g(Nn,it);function Wr(){}Wr.prototype={data:"",substringData:function(M,O){return this.data.substring(M,M+O)},appendData:function(M){M=this.data+M,this.nodeValue=this.data=M,this.length=M.length},insertData:function(M,O){this.replaceData(M,0,O)},appendChild:function(M){throw new Error(ht[N])},deleteData:function(M,O){this.replaceData(M,O,"")},replaceData:function(M,O,k){var at=this.data.substring(0,M),Et=this.data.substring(M+O);k=at+k+Et,this.nodeValue=this.data=k,this.length=k.length}},g(Wr,it);function _i(){}_i.prototype={nodeName:"#text",nodeType:A,splitText:function(M){var O=this.data,k=O.substring(M);O=O.substring(0,M),this.data=this.nodeValue=O,this.length=O.length;var at=this.ownerDocument.createTextNode(k);return this.parentNode&&this.parentNode.insertBefore(at,this.nextSibling),at}},g(_i,Wr);function Yl(){}Yl.prototype={nodeName:"#comment",nodeType:G},g(Yl,Wr);function ql(){}ql.prototype={nodeName:"#cdata-section",nodeType:R},g(ql,Wr);function Es(){}Es.prototype.nodeType=j,g(Es,it);function nl(){}nl.prototype.nodeType=nt,g(nl,it);function Ko(){}Ko.prototype.nodeType=B,g(Ko,it);function jl(){}jl.prototype.nodeType=D,g(jl,it);function aa(){}aa.prototype.nodeName="#document-fragment",aa.prototype.nodeType=Z,g(aa,it);function il(){}il.prototype.nodeType=P,g(il,it);function yi(){}yi.prototype.serializeToString=function(M,O,k){return sn.call(M,O,k)},it.prototype.toString=sn;function sn(M,O){var k=[],at=this.nodeType==9&&this.documentElement||this,Et=at.prefix,Vt=at.namespaceURI;if(Vt&&Et==null){var Et=at.lookupPrefix(Vt);if(Et==null)var xe=[{namespace:Vt,prefix:null}]}return Ze(this,k,M,O,xe),k.join("")}function la(M,O,k){var at=M.prefix||"",Et=M.namespaceURI;if(!Et||at==="xml"&&Et===e.XML||Et===e.XMLNS)return!1;for(var Vt=k.length;Vt--;){var xe=k[Vt];if(xe.prefix===at)return xe.namespace!==Et}return!0}function wi(M,O,k){M.push(" ",O,'="',k.replace(/[<>&"\t\n\r]/g,At),'"')}function Ze(M,O,k,at,Et){if(Et||(Et=[]),at)if(M=at(M),M){if(typeof M=="string"){O.push(M);return}}else return;switch(M.nodeType){case x:var Vt=M.attributes,xe=Vt.length,he=M.firstChild,En=M.tagName;k=e.isHTML(M.namespaceURI)||k;var Ui=En;if(!k&&!M.prefix&&M.namespaceURI){for(var bi,ar=0;ar<Vt.length;ar++)if(Vt.item(ar).name==="xmlns"){bi=Vt.item(ar).value;break}if(!bi)for(var lr=Et.length-1;lr>=0;lr--){var or=Et[lr];if(or.prefix===""&&or.namespace===M.namespaceURI){bi=or.namespace;break}}if(bi!==M.namespaceURI)for(var lr=Et.length-1;lr>=0;lr--){var or=Et[lr];if(or.namespace===M.namespaceURI){or.prefix&&(Ui=or.prefix+":"+En);break}}}O.push("<",Ui);for(var Wn=0;Wn<xe;Wn++){var Oi=Vt.item(Wn);Oi.prefix=="xmlns"?Et.push({prefix:Oi.localName,namespace:Oi.value}):Oi.nodeName=="xmlns"&&Et.push({prefix:"",namespace:Oi.value})}for(var Wn=0;Wn<xe;Wn++){var Oi=Vt.item(Wn);if(la(Oi,k,Et)){var ii=Oi.prefix||"",on=Oi.namespaceURI;wi(O,ii?"xmlns:"+ii:"xmlns",on),Et.push({prefix:ii,namespace:on})}Ze(Oi,O,k,at,Et)}if(En===Ui&&la(M,k,Et)){var ii=M.prefix||"",on=M.namespaceURI;wi(O,ii?"xmlns:"+ii:"xmlns",on),Et.push({prefix:ii,namespace:on})}if(he||k&&!/^(?:meta|link|img|br|hr|input)$/i.test(En)){if(O.push(">"),k&&/^script$/i.test(En))for(;he;)he.data?O.push(he.data):Ze(he,O,k,at,Et.slice()),he=he.nextSibling;else for(;he;)Ze(he,O,k,at,Et.slice()),he=he.nextSibling;O.push("</",Ui,">")}else O.push("/>");return;case H:case Z:for(var he=M.firstChild;he;)Ze(he,O,k,at,Et.slice()),he=he.nextSibling;return;case E:return wi(O,M.name,M.value);case A:return O.push(M.data.replace(/[<&>]/g,At));case R:return O.push("<![CDATA[",M.data,"]]>");case G:return O.push("<!--",M.data,"-->");case j:var ae=M.publicId,vi=M.systemId;if(O.push("<!DOCTYPE ",M.name),ae)O.push(" PUBLIC ",ae),vi&&vi!="."&&O.push(" ",vi),O.push(">");else if(vi&&vi!=".")O.push(" SYSTEM ",vi,">");else{var ua=M.internalSubset;ua&&O.push(" [",ua,"]"),O.push(">")}return;case P:return O.push("<?",M.target," ",M.data,"?>");case D:return O.push("&",M.nodeName,";");default:O.push("??",M.nodeName)}}function oa(M,O,k){var at;switch(O.nodeType){case x:at=O.cloneNode(!1),at.ownerDocument=M;case Z:break;case E:k=!0;break}if(at||(at=O.cloneNode(!1)),at.ownerDocument=M,at.parentNode=null,k)for(var Et=O.firstChild;Et;)at.appendChild(oa(M,Et,k)),Et=Et.nextSibling;return at}function Kl(M,O,k){var at=new O.constructor;for(var Et in O)if(Object.prototype.hasOwnProperty.call(O,Et)){var Vt=O[Et];typeof Vt!="object"&&Vt!=at[Et]&&(at[Et]=Vt)}switch(O.childNodes&&(at.childNodes=new ct),at.ownerDocument=M,at.nodeType){case x:var xe=O.attributes,En=at.attributes=new F,Ui=xe.length;En._ownerElement=at;for(var bi=0;bi<Ui;bi++)at.setAttributeNode(Kl(M,xe.item(bi),!0));break;case E:k=!0}if(k)for(var ar=O.firstChild;ar;)at.appendChild(Kl(M,ar,k)),ar=ar.nextSibling;return at}function Wo(M,O,k){M[O]=k}try{if(Object.defineProperty){let M=function(O){switch(O.nodeType){case x:case Z:var k=[];for(O=O.firstChild;O;)O.nodeType!==7&&O.nodeType!==8&&k.push(M(O)),O=O.nextSibling;return k.join("");default:return O.nodeValue}};Object.defineProperty(bt.prototype,"length",{get:function(){return Tt(this),this.$$length}}),Object.defineProperty(it.prototype,"textContent",{get:function(){return M(this)},set:function(O){switch(this.nodeType){case x:case Z:for(;this.firstChild;)this.removeChild(this.firstChild);(O||String(O))&&this.appendChild(this.ownerDocument.createTextNode(O));break;default:this.data=O,this.value=O,this.nodeValue=O}}}),Wo=function(O,k,at){O["$$"+k]=at}}}catch{}return Nl.DocumentType=Es,Nl.DOMException=$,Nl.DOMImplementation=z,Nl.Element=ie,Nl.Node=it,Nl.NodeList=ct,Nl.XMLSerializer=yi,Nl}var sd={},z0={},O1;function V8(){return O1||(O1=1,function(n){var t=r_().freeze;n.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=t({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),n.entityMap=n.HTML_ENTITIES}(z0)),z0}var Jm={},P1;function k8(){if(P1)return Jm;P1=1;var n=r_().NAMESPACE,t=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,e=new RegExp("[\\-\\.0-9"+t.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+t.source+e.source+"*(?::"+t.source+e.source+"*)?$"),s=0,o=1,h=2,f=3,m=4,g=5,b=6,x=7;function E(N,Y){this.message=N,this.locator=Y,Error.captureStackTrace&&Error.captureStackTrace(this,E)}E.prototype=new Error,E.prototype.name=E.name;function A(){}A.prototype={parse:function(N,Y,X){var $=this.domBuilder;$.startDocument(),j(Y,Y={}),R(N,Y,X,$,this.errorHandler),$.endDocument()}};function R(N,Y,X,$,ct){function bt(ie){if(ie>65535){ie-=65536;var Nn=55296+(ie>>10),Wr=56320+(ie&1023);return String.fromCharCode(Nn,Wr)}else return String.fromCharCode(ie)}function Tt(ie){var Nn=ie.slice(1,-1);return Object.hasOwnProperty.call(X,Nn)?X[Nn]:Nn.charAt(0)==="#"?bt(parseInt(Nn.substr(1).replace("x","0x"))):(ct.error("entity not found:"+ie),ie)}function F(ie){if(ie>yt){var Nn=N.substring(yt,ie).replace(/&#?\w+;/g,Tt);it&&K(yt),$.characters(Nn,0,ie-yt),yt=ie}}function K(ie,Nn){for(;ie>=ft&&(Nn=z.exec(N));)ut=Nn.index,ft=ut+Nn[0].length,it.lineNumber++;it.columnNumber=ie-ut+1}for(var ut=0,ft=0,z=/.*(?:\r\n?|\n)|.*$/g,it=$.locator,At=[{currentNSMap:Y}],Rt={},yt=0;;){try{var Mt=N.indexOf("<",yt);if(Mt<0){if(!N.substr(yt).match(/^\s*$/)){var Ft=$.doc,Pe=Ft.createTextNode(N.substr(yt));Ft.appendChild(Pe),$.currentElement=Pe}return}switch(Mt>yt&&F(Mt),N.charAt(Mt+1)){case"/":var Ge=N.indexOf(">",Mt+3),Gt=N.substring(Mt+2,Ge).replace(/[ \t\n\r]+$/g,""),ne=At.pop();Ge<0?(Gt=N.substring(Mt+2).replace(/[\s<].*/,""),ct.error("end tag name: "+Gt+" is not complete:"+ne.tagName),Ge=Mt+1+Gt.length):Gt.match(/\s</)&&(Gt=Gt.replace(/[\s<].*/,""),ct.error("end tag name: "+Gt+" maybe not complete"),Ge=Mt+1+Gt.length);var ce=ne.localNSMap,Te=ne.tagName==Gt,Be=Te||ne.tagName&&ne.tagName.toLowerCase()==Gt.toLowerCase();if(Be){if($.endElement(ne.uri,ne.localName,Gt),ce)for(var Fe in ce)Object.prototype.hasOwnProperty.call(ce,Fe)&&$.endPrefixMapping(Fe);Te||ct.fatalError("end tag name: "+Gt+" is not match the current start tagName:"+ne.tagName)}else At.push(ne);Ge++;break;case"?":it&&K(Mt),Ge=nt(N,Mt,$);break;case"!":it&&K(Mt),Ge=Z(N,Mt,$,ct);break;default:it&&K(Mt);var ve=new V,ln=At[At.length-1].currentNSMap,Ge=B(N,Mt,ve,ln,Tt,ct),In=ve.length;if(!ve.closed&&H(N,Ge,ve.tagName,Rt)&&(ve.closed=!0,X.nbsp||ct.warning("unclosed xml attribute")),it&&In){for(var sr=D(it,{}),ni=0;ni<In;ni++){var Kn=ve[ni];K(Kn.offset),Kn.locator=D(it,{})}$.locator=sr,P(ve,$,ln)&&At.push(ve),$.locator=it}else P(ve,$,ln)&&At.push(ve);n.isHTML(ve.uri)&&!ve.closed?Ge=G(N,Ge,ve.tagName,Tt,$):Ge++}}catch(ie){if(ie instanceof E)throw ie;ct.error("element parse error: "+ie),Ge=-1}Ge>yt?yt=Ge:F(Math.max(Mt,yt)+1)}}function D(N,Y){return Y.lineNumber=N.lineNumber,Y.columnNumber=N.columnNumber,Y}function B(N,Y,X,$,ct,bt){function Tt(it,At,Rt){X.attributeNames.hasOwnProperty(it)&&bt.fatalError("Attribute "+it+" redefined"),X.addValue(it,At.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,ct),Rt)}for(var F,K,ut=++Y,ft=s;;){var z=N.charAt(ut);switch(z){case"=":if(ft===o)F=N.slice(Y,ut),ft=f;else if(ft===h)ft=f;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(ft===f||ft===o)if(ft===o&&(bt.warning('attribute value must after "="'),F=N.slice(Y,ut)),Y=ut+1,ut=N.indexOf(z,Y),ut>0)K=N.slice(Y,ut),Tt(F,K,Y-1),ft=g;else throw new Error("attribute value no end '"+z+"' match");else if(ft==m)K=N.slice(Y,ut),Tt(F,K,Y),bt.warning('attribute "'+F+'" missed start quot('+z+")!!"),Y=ut+1,ft=g;else throw new Error('attribute value must after "="');break;case"/":switch(ft){case s:X.setTagName(N.slice(Y,ut));case g:case b:case x:ft=x,X.closed=!0;case m:case o:break;case h:X.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return bt.error("unexpected end of input"),ft==s&&X.setTagName(N.slice(Y,ut)),ut;case">":switch(ft){case s:X.setTagName(N.slice(Y,ut));case g:case b:case x:break;case m:case o:K=N.slice(Y,ut),K.slice(-1)==="/"&&(X.closed=!0,K=K.slice(0,-1));case h:ft===h&&(K=F),ft==m?(bt.warning('attribute "'+K+'" missed quot(")!'),Tt(F,K,Y)):((!n.isHTML($[""])||!K.match(/^(?:disabled|checked|selected)$/i))&&bt.warning('attribute "'+K+'" missed value!! "'+K+'" instead!!'),Tt(K,K,Y));break;case f:throw new Error("attribute value missed!!")}return ut;case"":z=" ";default:if(z<=" ")switch(ft){case s:X.setTagName(N.slice(Y,ut)),ft=b;break;case o:F=N.slice(Y,ut),ft=h;break;case m:var K=N.slice(Y,ut);bt.warning('attribute "'+K+'" missed quot(")!!'),Tt(F,K,Y);case g:ft=b;break}else switch(ft){case h:X.tagName,(!n.isHTML($[""])||!F.match(/^(?:disabled|checked|selected)$/i))&&bt.warning('attribute "'+F+'" missed value!! "'+F+'" instead2!!'),Tt(F,F,Y),Y=ut,ft=o;break;case g:bt.warning('attribute space is required"'+F+'"!!');case b:ft=o,Y=ut;break;case f:ft=m,Y=ut;break;case x:throw new Error("elements closed character '/' and '>' must be connected to")}}ut++}}function P(N,Y,X){for(var $=N.tagName,ct=null,z=N.length;z--;){var bt=N[z],Tt=bt.qName,F=bt.value,it=Tt.indexOf(":");if(it>0)var K=bt.prefix=Tt.slice(0,it),ut=Tt.slice(it+1),ft=K==="xmlns"&&ut;else ut=Tt,K=null,ft=Tt==="xmlns"&&"";bt.localName=ut,ft!==!1&&(ct==null&&(ct={},j(X,X={})),X[ft]=ct[ft]=F,bt.uri=n.XMLNS,Y.startPrefixMapping(ft,F))}for(var z=N.length;z--;){bt=N[z];var K=bt.prefix;K&&(K==="xml"&&(bt.uri=n.XML),K!=="xmlns"&&(bt.uri=X[K||""]))}var it=$.indexOf(":");it>0?(K=N.prefix=$.slice(0,it),ut=N.localName=$.slice(it+1)):(K=null,ut=N.localName=$);var At=N.uri=X[K||""];if(Y.startElement(At,ut,$,N),N.closed){if(Y.endElement(At,ut,$),ct)for(K in ct)Object.prototype.hasOwnProperty.call(ct,K)&&Y.endPrefixMapping(K)}else return N.currentNSMap=X,N.localNSMap=ct,!0}function G(N,Y,X,$,ct){if(/^(?:script|textarea)$/i.test(X)){var bt=N.indexOf("</"+X+">",Y),Tt=N.substring(Y+1,bt);if(/[&<]/.test(Tt))return/^script$/i.test(X)?(ct.characters(Tt,0,Tt.length),bt):(Tt=Tt.replace(/&#?\w+;/g,$),ct.characters(Tt,0,Tt.length),bt)}return Y+1}function H(N,Y,X,$){var ct=$[X];return ct==null&&(ct=N.lastIndexOf("</"+X+">"),ct<Y&&(ct=N.lastIndexOf("</"+X)),$[X]=ct),ct<Y}function j(N,Y){for(var X in N)Object.prototype.hasOwnProperty.call(N,X)&&(Y[X]=N[X])}function Z(N,Y,X,$){var ct=N.charAt(Y+2);switch(ct){case"-":if(N.charAt(Y+3)==="-"){var bt=N.indexOf("-->",Y+4);return bt>Y?(X.comment(N,Y+4,bt-Y-4),bt+3):($.error("Unclosed comment"),-1)}else return-1;default:if(N.substr(Y+3,6)=="CDATA["){var bt=N.indexOf("]]>",Y+9);return X.startCDATA(),X.characters(N,Y+9,bt-Y-9),X.endCDATA(),bt+3}var Tt=ht(N,Y),F=Tt.length;if(F>1&&/!doctype/i.test(Tt[0][0])){var K=Tt[1][0],ut=!1,ft=!1;F>3&&(/^public$/i.test(Tt[2][0])?(ut=Tt[3][0],ft=F>4&&Tt[4][0]):/^system$/i.test(Tt[2][0])&&(ft=Tt[3][0]));var z=Tt[F-1];return X.startDTD(K,ut,ft),X.endDTD(),z.index+z[0].length}}return-1}function nt(N,Y,X){var $=N.indexOf("?>",Y);if($){var ct=N.substring(Y,$).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return ct?(ct[0].length,X.processingInstruction(ct[1],ct[2]),$+2):-1}return-1}function V(){this.attributeNames={}}V.prototype={setTagName:function(N){if(!i.test(N))throw new Error("invalid tagName:"+N);this.tagName=N},addValue:function(N,Y,X){if(!i.test(N))throw new Error("invalid attribute:"+N);this.attributeNames[N]=this.length,this[this.length++]={qName:N,value:Y,offset:X}},length:0,getLocalName:function(N){return this[N].localName},getLocator:function(N){return this[N].locator},getQName:function(N){return this[N].qName},getURI:function(N){return this[N].uri},getValue:function(N){return this[N].value}};function ht(N,Y){var X,$=[],ct=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(ct.lastIndex=Y,ct.exec(N);X=ct.exec(N);)if($.push(X),X[1])return $}return Jm.XMLReader=A,Jm.ParseError=E,Jm}var G1;function X8(){if(G1)return sd;G1=1;var n=r_(),t=iA(),e=V8(),i=k8(),s=t.DOMImplementation,o=n.NAMESPACE,h=i.ParseError,f=i.XMLReader;function m(B){return B.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function g(B){this.options=B||{locator:{}}}g.prototype.parseFromString=function(B,P){var G=this.options,H=new f,j=G.domBuilder||new x,Z=G.errorHandler,nt=G.locator,V=G.xmlns||{},ht=/\/x?html?$/.test(P),N=ht?e.HTML_ENTITIES:e.XML_ENTITIES;nt&&j.setDocumentLocator(nt),H.errorHandler=b(Z,j,nt),H.domBuilder=G.domBuilder||j,ht&&(V[""]=o.HTML),V.xml=V.xml||o.XML;var Y=G.normalizeLineEndings||m;return B&&typeof B=="string"?H.parse(Y(B),V,N):H.errorHandler.error("invalid doc source"),j.doc};function b(B,P,G){if(!B){if(P instanceof x)return P;B=P}var H={},j=B instanceof Function;G=G||{};function Z(nt){var V=B[nt];!V&&j&&(V=B.length==2?function(ht){B(nt,ht)}:B),H[nt]=V&&function(ht){V("[xmldom "+nt+"]	"+ht+A(G))}||function(){}}return Z("warning"),Z("error"),Z("fatalError"),H}function x(){this.cdata=!1}function E(B,P){P.lineNumber=B.lineNumber,P.columnNumber=B.columnNumber}x.prototype={startDocument:function(){this.doc=new s().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(B,P,G,H){var j=this.doc,Z=j.createElementNS(B,G||P),nt=H.length;D(this,Z),this.currentElement=Z,this.locator&&E(this.locator,Z);for(var V=0;V<nt;V++){var B=H.getURI(V),ht=H.getValue(V),G=H.getQName(V),N=j.createAttributeNS(B,G);this.locator&&E(H.getLocator(V),N),N.value=N.nodeValue=ht,Z.setAttributeNode(N)}},endElement:function(B,P,G){var H=this.currentElement;H.tagName,this.currentElement=H.parentNode},startPrefixMapping:function(B,P){},endPrefixMapping:function(B){},processingInstruction:function(B,P){var G=this.doc.createProcessingInstruction(B,P);this.locator&&E(this.locator,G),D(this,G)},ignorableWhitespace:function(B,P,G){},characters:function(B,P,G){if(B=R.apply(this,arguments),B){if(this.cdata)var H=this.doc.createCDATASection(B);else var H=this.doc.createTextNode(B);this.currentElement?this.currentElement.appendChild(H):/^\s*$/.test(B)&&this.doc.appendChild(H),this.locator&&E(this.locator,H)}},skippedEntity:function(B){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(B){(this.locator=B)&&(B.lineNumber=0)},comment:function(B,P,G){B=R.apply(this,arguments);var H=this.doc.createComment(B);this.locator&&E(this.locator,H),D(this,H)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(B,P,G){var H=this.doc.implementation;if(H&&H.createDocumentType){var j=H.createDocumentType(B,P,G);this.locator&&E(this.locator,j),D(this,j),this.doc.doctype=j}},warning:function(B){console.warn("[xmldom warning]	"+B,A(this.locator))},error:function(B){console.error("[xmldom error]	"+B,A(this.locator))},fatalError:function(B){throw new h(B,this.locator)}};function A(B){if(B)return`
@`+(B.systemId||"")+"#[line:"+B.lineNumber+",col:"+B.columnNumber+"]"}function R(B,P,G){return typeof B=="string"?B.substr(P,G):B.length>=P+G||P?new java.lang.String(B,P,G)+"":B}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(B){x.prototype[B]=function(){return null}});function D(B,P){B.currentElement?B.currentElement.appendChild(P):B.doc.appendChild(P)}return sd.__DOMHandler=x,sd.normalizeLineEndings=m,sd.DOMParser=g,sd}var N1;function I8(){if(N1)return rd;N1=1;var n=iA();return rd.DOMImplementation=n.DOMImplementation,rd.XMLSerializer=n.XMLSerializer,rd.DOMParser=X8().DOMParser,rd}var Y8=I8();const q8={createCanvas:(n,t)=>new OffscreenCanvas(n??0,t??0),getCanvasRenderingContext2D:()=>OffscreenCanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>globalThis.location.href,getFontFaceSet:()=>globalThis.fonts,fetch:(n,t)=>fetch(n,t),parseXML:n=>new Y8.DOMParser().parseFromString(n,"text/xml")};class j8{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this._tickerAdded||!this.domElement||(Pn.system.add(this._tickerUpdate,this,Vl.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(Pn.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events._rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(this.events.supportsPointerEvents?new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY,pointerType:t.pointerType,pointerId:t.pointerId}):new MouseEvent("mousemove",{clientX:t.clientX,clientY:t.clientY}))}_tickerUpdate(t){this._deltaTime+=t.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}}const Hl=new j8;class Nd extends Ch{constructor(){super(...arguments),this.client=new Xe,this.movement=new Xe,this.offset=new Xe,this.global=new Xe,this.screen=new Xe}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,s,o,h,f,m,g,b,x,E,A,R,D){throw new Error("Method not implemented.")}}class ms extends Nd{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class $u extends Nd{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}$u.DOM_DELTA_PIXEL=0;$u.DOM_DELTA_LINE=1;$u.DOM_DELTA_PAGE=2;const K8=2048,W8=new Xe,ad=new Xe;class rA{constructor(t){this.dispatch=new ei,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((i,s)=>i.priority-s.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let i=0,s=e.length;i<s;i++)e[i].fn(t);else Xt(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){Hl.pauseUpdate=!0;const s=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",o=this[s](this.rootTarget,this.rootTarget.eventMode,W8.set(t,e),this.hitTestFn,this.hitPruneFn);return o&&o[0]}propagate(t,e){if(!t.target)return;const i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let s=0,o=i.length-1;s<o;s++)if(t.currentTarget=i[s],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let s=i.length-2;s>=0;s--)if(t.currentTarget=i[s],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,i=this._allInteractiveElements){if(i.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const s=Array.isArray(e)?e:[e];for(let o=i.length-1;o>=0;o--)s.forEach(h=>{t.currentTarget=i[o],this.notifyTarget(t,h)})}propagationPath(t){const e=[t];for(let i=0;i<K8&&t!==this.rootTarget&&t.parent;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,i,s,o,h=!1){let f=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Hl.pauseUpdate=!1),t.interactiveChildren&&t.children){const b=t.children;for(let x=b.length-1;x>=0;x--){const E=b[x],A=this.hitTestMoveRecursive(E,this._isInteractive(e)?e:E.eventMode,i,s,o,h||o(t,i));if(A){if(A.length>0&&!A[A.length-1].parent)continue;const R=t.isInteractive();(A.length>0||R)&&(R&&this._allInteractiveElements.push(t),A.push(t)),this._hitElements.length===0&&(this._hitElements=A),f=!0}}}const m=this._isInteractive(e),g=t.isInteractive();return g&&g&&this._allInteractiveElements.push(t),h||this._hitElements.length>0?null:f?this._hitElements:m&&!o(t,i)&&s(t,i)?g?[t]:[]:null}hitTestRecursive(t,e,i,s,o){if(this._interactivePrune(t)||o(t,i))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Hl.pauseUpdate=!1),t.interactiveChildren&&t.children){const m=t.children,g=i;for(let b=m.length-1;b>=0;b--){const x=m[b],E=this.hitTestRecursive(x,this._isInteractive(e)?e:x.eventMode,g,s,o);if(E){if(E.length>0&&!E[E.length-1].parent)continue;const A=t.isInteractive();return(E.length>0||A)&&E.push(t),E}}}const h=this._isInteractive(e),f=t.isInteractive();return h&&s(t,i)?f?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!t||!t.visible||!t.renderable||!t.measurable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren}hitPruneFn(t,e){if(t.hitArea&&(t.worldTransform.applyInverse(e,ad),!t.hitArea.contains(ad.x,ad.y)))return!0;if(t.effects&&t.effects.length)for(let i=0;i<t.effects.length;i++){const s=t.effects[i];if(s.containsPoint&&!s.containsPoint(e,this.hitTestFn))return!0}return!1}hitTestFn(t,e){return t.hitArea?!0:t!=null&&t.containsPoint?(t.worldTransform.applyInverse(e,ad),t.containsPoint(ad)):!1}notifyTarget(t,e){var o,h;if(!t.currentTarget.isInteractive())return;e??(e=t.type);const i=`on${e}`;(h=(o=t.currentTarget)[i])==null||h.call(o,t);const s=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this._notifyListeners(t,s),t.eventPhase===t.AT_TARGET&&this._notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof ms)){Xt("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){const s=e.button===2;this.dispatchEvent(e,s?"rightdown":"mousedown")}const i=this.trackingData(t.pointerId);i.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var m,g;if(!(t instanceof ms)){Xt("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const i=e.pointerType==="mouse"||e.pointerType==="pen",s=this.trackingData(t.pointerId),o=this.findMountedTarget(s.overTargets);if(((m=s.overTargets)==null?void 0:m.length)>0&&o!==e.target){const b=t.type==="mousemove"?"mouseout":"pointerout",x=this.createPointerEvent(t,b,o);if(this.dispatchEvent(x,"pointerout"),i&&this.dispatchEvent(x,"mouseout"),!e.composedPath().includes(o)){const E=this.createPointerEvent(t,"pointerleave",o);for(E.eventPhase=E.AT_TARGET;E.target&&!e.composedPath().includes(E.target);)E.currentTarget=E.target,this.notifyTarget(E),i&&this.notifyTarget(E,"mouseleave"),E.target=E.target.parent;this.freeEvent(E)}this.freeEvent(x)}if(o!==e.target){const b=t.type==="mousemove"?"mouseover":"pointerover",x=this.clonePointerEvent(e,b);this.dispatchEvent(x,"pointerover"),i&&this.dispatchEvent(x,"mouseover");let E=o==null?void 0:o.parent;for(;E&&E!==this.rootTarget.parent&&E!==e.target;)E=E.parent;if(!E||E===this.rootTarget.parent){const R=this.clonePointerEvent(e,"pointerenter");for(R.eventPhase=R.AT_TARGET;R.target&&R.target!==o&&R.target!==this.rootTarget.parent;)R.currentTarget=R.target,this.notifyTarget(R),i&&this.notifyTarget(R,"mouseenter"),R.target=R.target.parent;this.freeEvent(R)}this.freeEvent(x)}const h=[],f=this.enableGlobalMoveEvents??!0;this.moveOnAll?h.push("pointermove"):this.dispatchEvent(e,"pointermove"),f&&h.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?h.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),f&&h.push("globaltouchmove")),i&&(this.moveOnAll?h.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),f&&h.push("globalmousemove"),this.cursor=(g=e.target)==null?void 0:g.cursor),h.length>0&&this.all(e,h),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var h;if(!(t instanceof ms)){Xt("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.createPointerEvent(t),s=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),s&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(h=i.target)==null?void 0:h.cursor);const o=this.clonePointerEvent(i,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),s&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;e.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(o)}mapPointerOut(t){if(!(t instanceof ms)){Xt("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId);if(e.overTargets){const i=t.pointerType==="mouse"||t.pointerType==="pen",s=this.findMountedTarget(e.overTargets),o=this.createPointerEvent(t,"pointerout",s);this.dispatchEvent(o),i&&this.dispatchEvent(o,"mouseout");const h=this.createPointerEvent(t,"pointerleave",s);for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==this.rootTarget.parent;)h.currentTarget=h.target,this.notifyTarget(h),i&&this.notifyTarget(h,"mouseleave"),h.target=h.target.parent;e.overTargets=null,this.freeEvent(o),this.freeEvent(h)}this.cursor=null}mapPointerUp(t){if(!(t instanceof ms)){Xt("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=performance.now(),i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const f=i.button===2;this.dispatchEvent(i,f?"rightup":"mouseup")}const s=this.trackingData(t.pointerId),o=this.findMountedTarget(s.pressTargetsByButton[t.button]);let h=o;if(o&&!i.composedPath().includes(o)){let f=o;for(;f&&!i.composedPath().includes(f);){if(i.currentTarget=f,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const m=i.button===2;this.notifyTarget(i,m?"rightupoutside":"mouseupoutside")}f=f.parent}delete s.pressTargetsByButton[t.button],h=f}if(h){const f=this.clonePointerEvent(i,"click");f.target=h,f.path=null,s.clicksByButton[t.button]||(s.clicksByButton[t.button]={clickCount:0,target:f.target,timeStamp:e});const m=s.clicksByButton[t.button];if(m.target===f.target&&e-m.timeStamp<200?++m.clickCount:m.clickCount=1,m.target=f.target,m.timeStamp=e,f.detail=m.clickCount,f.pointerType==="mouse"){const g=f.button===2;this.dispatchEvent(f,g?"rightclick":"click")}else f.pointerType==="touch"&&this.dispatchEvent(f,"tap");this.dispatchEvent(f,"pointertap"),this.freeEvent(f)}this.freeEvent(i)}mapPointerUpOutside(t){if(!(t instanceof ms)){Xt("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.findMountedTarget(e.pressTargetsByButton[t.button]),s=this.createPointerEvent(t);if(i){let o=i;for(;o;)s.currentTarget=o,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),o=o.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(s)}mapWheel(t){if(!(t instanceof $u)){Xt("EventBoundary cannot map a non-wheel event as a wheel event");return}const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){const s=this.allocateEvent(ms);return this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t,s.target=i??this.hitTest(s.global.x,s.global.y)??this._hitElements[0],typeof e=="string"&&(s.type=e),s}createWheelEvent(t){const e=this.allocateEvent($u);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const i=this.allocateEvent(ms);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=e??i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof ms&&e instanceof ms&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof Nd&&e instanceof Nd&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.defaultPrevented=!1,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}_notifyListeners(t,e){const i=t.currentTarget._events[e];if(i)if("fn"in i)i.once&&t.currentTarget.removeListener(e,i.fn,void 0,!0),i.fn.call(i.context,t);else for(let s=0,o=i.length;s<o&&!t.propagationImmediatelyStopped;s++)i[s].once&&t.currentTarget.removeListener(e,i[s].fn,void 0,!0),i[s].fn.call(i[s].context,t)}}const Q8=1,Z8={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Zb=class Oy{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new rA(null),Hl.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new ms(null),this._rootWheelEvent=new $u(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Oy.defaultEventFeatures},{set:(e,i,s)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),e[i]=s,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{canvas:e,resolution:i}=this.renderer;this.setTargetElement(e),this.resolution=i,Oy._defaultEventMode=t.eventMode??"passive",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(t){t||(t="default");let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this._currentCursor===t)return;this._currentCursor=t;const i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.domElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.domElement.style,i);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this._rootPointerEvent}_onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this._normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let i=0,s=e.length;i<s;i++){const o=e[i],h=this._bootstrapEvent(this._rootPointerEvent,o);this.rootBoundary.mapEvent(h)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Hl.pointerMoved();const e=this._normalizeToPointerData(t);for(let i=0,s=e.length;i<s;i++){const o=this._bootstrapEvent(this._rootPointerEvent,e[i]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const i=e!==this.domElement?"outside":"",s=this._normalizeToPointerData(t);for(let o=0,h=s.length;o<h;o++){const f=this._bootstrapEvent(this._rootPointerEvent,s[o]);f.type+=i,this.rootBoundary.mapEvent(f)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this._normalizeToPointerData(t);for(let i=0,s=e.length;i<s;i++){const o=this._bootstrapEvent(this._rootPointerEvent,e[i]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this._removeEvents(),this.domElement=t,Hl.domElement=t,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;Hl.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;Hl.removeTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(t,e,i){const s=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},o=1/this.resolution;t.x=(e-s.left)*(this.domElement.width/s.width)*o,t.y=(i-s.top)*(this.domElement.height/s.height)*o}_normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let i=0,s=t.changedTouches.length;i<s;i++){const o=t.changedTouches[i];typeof o.button>"u"&&(o.button=0),typeof o.buttons>"u"&&(o.buttons=1),typeof o.isPrimary>"u"&&(o.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,o.type=t.type,e.push(o)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const i=t;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=Q8),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,e.push(i)}else e.push(t);return e}normalizeWheelEvent(t){const e=this._rootWheelEvent;return this._transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}_bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this._transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=Z8[t.type]||t.type),t}_transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};Zb.extension={name:"events",type:[q.WebGLSystem,q.CanvasSystem,q.WebGPUSystem],priority:-1};Zb.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let sA=Zb;const J8={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(n){this.eventMode=n?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??sA.defaultEventMode},set eventMode(n){this._internalEventMode=n},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(n,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,s=typeof e=="object"?e.signal:void 0,o=typeof e=="object"?e.once===!0:!1,h=typeof t=="function"?void 0:t;n=i?`${n}capture`:n;const f=typeof t=="function"?t:t.handleEvent,m=this;s&&s.addEventListener("abort",()=>{m.off(n,f,h)}),o?m.once(n,f,h):m.on(n,f,h)},removeEventListener(n,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,s=typeof t=="function"?void 0:t;n=i?`${n}capture`:n,t=typeof t=="function"?t:t.handleEvent,this.off(n,t,s)},dispatchEvent(n){if(!(n instanceof Ch))throw new Error("Container cannot propagate events outside of the Federated Events API");return n.defaultPrevented=!1,n.path=null,n.target=this,n.manager.dispatchEvent(n),!n.defaultPrevented}};var s_=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,aA=`
in vec2 vTextureCoord;

out vec4 finalColor;

uniform float uAlpha;
uniform sampler2D uTexture;

void main()
{
    finalColor =  texture(uTexture, vTextureCoord) * uAlpha;
}
`,Py=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct AlphaUniforms {
  uAlpha:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {
 
    var sample = textureSample(uTexture, uSampler, uv);
    
    return sample * alphaUniforms.uAlpha;
}`;const lA=class oA extends qi{constructor(t){t={...oA.defaultOptions,...t};const e=Dr.from({vertex:{source:Py,entryPoint:"mainVertex"},fragment:{source:Py,entryPoint:"mainFragment"}}),i=jr.from({vertex:s_,fragment:aA,name:"alpha-filter"}),{alpha:s,...o}=t,h=new Xn({uAlpha:{value:s,type:"f32"}});super({...o,gpuProgram:e,glProgram:i,resources:{alphaUniforms:h}})}get alpha(){return this.resources.alphaUniforms.uniforms.uAlpha}set alpha(t){this.resources.alphaUniforms.uniforms.uAlpha=t}};lA.defaultOptions={alpha:1};let $8=lA;const Jb={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},t5=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function uA(n){const t=Jb[n],e=t.length;let i=t5,s="";const o="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;";let h;for(let f=0;f<n;f++){let m=o.replace("%index%",f.toString());h=f,f>=e&&(h=n-f-1),m=m.replace("%value%",t[h].toString()),s+=m,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",n.toString()),i}const e5=`
    in vec2 aPosition;

    uniform float uStrength;

    out vec2 vBlurTexCoords[%size%];

    uniform vec4 uInputSize;
    uniform vec4 uOutputFrame;
    uniform vec4 uOutputTexture;

    vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

    vec2 filterTextureCoord( void )
    {
        return aPosition * (uOutputFrame.zw * uInputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        float pixelStrength = uInputSize.%dimension% * uStrength;

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function cA(n,t){const e=Math.ceil(n/2);let i=e5,s="",o;t?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let h=0;h<n;h++){let f=o.replace("%index%",h.toString());f=f.replace("%sampleIndex%",`${h-(e-1)}.0`),s+=f,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",n.toString()),i=i.replace("%dimension%",t?"z":"w"),i}function hA(n,t){const e=cA(t,n),i=uA(t);return jr.from({vertex:e,fragment:i,name:`blur-${n?"horizontal":"vertical"}-pass-filter`})}var fA=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
  uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    %blur-struct%
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {

  let filteredCord = filterTextureCoord(aPosition);

  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

  return VSOutput(
   filterVertexPosition(aPosition),
    %blur-vertex-out%
  );
}

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  %blur-fragment-in%
) -> @location(0) vec4<f32> {

    var   finalColor = vec4(0.0);

    %blur-sampling%

    return finalColor;
}`;function dA(n,t){const e=Jb[t],i=e.length,s=[],o=[],h=[];for(let x=0;x<t;x++){s[x]=`@location(${x}) offset${x}: vec2<f32>,`,n?o[x]=`filteredCord + vec2(${x-i+1} * pixelStrength, 0.0),`:o[x]=`filteredCord + vec2(0.0, ${x-i+1} * pixelStrength),`;const E=x<i?x:t-x-1,A=e[E].toString();h[x]=`finalColor += textureSample(uTexture, uSampler, offset${x}) * ${A};`}const f=s.join(`
`),m=o.join(`
`),g=h.join(`
`),b=fA.replace("%blur-struct%",f).replace("%blur-vertex-out%",m).replace("%blur-fragment-in%",f).replace("%blur-sampling%",g).replace("%dimension%",n?"z":"w");return Dr.from({vertex:{source:b,entryPoint:"mainVertex"},fragment:{source:b,entryPoint:"mainFragment"}})}const pA=class mA extends qi{constructor(t){t={...mA.defaultOptions,...t};const e=hA(t.horizontal,t.kernelSize),i=dA(t.horizontal,t.kernelSize);super({glProgram:e,gpuProgram:i,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}},...t}),this.horizontal=t.horizontal,this._quality=0,this.quality=t.quality,this.blur=t.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(t,e,i,s){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)t.applyFilter(this,e,i,s);else{const o=Vn.getSameSizeTexture(e);let h=e,f=o;this._state.blend=!1;const m=t.renderer.type===Br.WEBGPU;for(let g=0;g<this.passes-1;g++){t.applyFilter(this,h,f,g===0?!0:m);const b=f;f=h,h=b}this._state.blend=!0,t.applyFilter(this,h,i,s),Vn.returnTexture(o)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}};pA.defaultOptions={strength:8,quality:4,kernelSize:5};let ug=pA;class gA extends qi{constructor(...t){let e=t[0]??{};typeof e=="number"&&(wt(Jt,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),e={strength:e},t[1]!==void 0&&(e.quality=t[1]),t[2]!==void 0&&(e.resolution=t[2]||"inherit"),t[3]!==void 0&&(e.kernelSize=t[3])),e={...ug.defaultOptions,...e};const{strength:i,strengthX:s,strengthY:o,quality:h,...f}=e;super({...f,compatibleRenderers:Br.BOTH,resources:{}}),this._repeatEdgePixels=!1,this.blurXFilter=new ug({horizontal:!0,...e}),this.blurYFilter=new ug({horizontal:!1,...e}),this.quality=h,this.strengthX=s??i,this.strengthY=o??i,this.repeatEdgePixels=!1}apply(t,e,i,s){const o=Math.abs(this.blurXFilter.strength),h=Math.abs(this.blurYFilter.strength);if(o&&h){const f=Vn.getSameSizeTexture(e);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(t,e,f,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(t,f,i,s),Vn.returnTexture(f)}else h?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(t,e,i,s)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(t,e,i,s))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get strengthX(){return this.blurXFilter.blur}set strengthX(t){this.blurXFilter.blur=t,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(t){this.blurYFilter.blur=t,this.updatePadding()}get blur(){return wt("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength}set blur(t){wt("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength=t}get blurX(){return wt("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX}set blurX(t){wt("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX=t}get blurY(){return wt("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY}set blurY(t){wt("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}gA.defaultOptions={strength:8,quality:4,kernelSize:5};var _A=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uColorMatrix[20];
uniform float uAlpha;

uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * 0.2);
    float diff = (randomValue - 0.5) *  0.5;

    if (uAlpha == 0.0) {
        finalColor = color;
        return;
    }

    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    vec4 result;

    result.r = (uColorMatrix[0] * color.r);
        result.r += (uColorMatrix[1] * color.g);
        result.r += (uColorMatrix[2] * color.b);
        result.r += (uColorMatrix[3] * color.a);
        result.r += uColorMatrix[4];

    result.g = (uColorMatrix[5] * color.r);
        result.g += (uColorMatrix[6] * color.g);
        result.g += (uColorMatrix[7] * color.b);
        result.g += (uColorMatrix[8] * color.a);
        result.g += uColorMatrix[9];

    result.b = (uColorMatrix[10] * color.r);
       result.b += (uColorMatrix[11] * color.g);
       result.b += (uColorMatrix[12] * color.b);
       result.b += (uColorMatrix[13] * color.a);
       result.b += uColorMatrix[14];

    result.a = (uColorMatrix[15] * color.r);
       result.a += (uColorMatrix[16] * color.g);
       result.a += (uColorMatrix[17] * color.b);
       result.a += (uColorMatrix[18] * color.a);
       result.a += uColorMatrix[19];

    vec3 rgb = mix(color.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    finalColor = vec4(rgb, result.a);
}
`,Gy=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct ColorMatrixUniforms {
  uColorMatrix:array<vec4<f32>, 5>,
  uAlpha:f32,
};


@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(1) @binding(0) var<uniform> colorMatrixUniforms : ColorMatrixUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
  };
  
fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
  );
}


@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
) -> @location(0) vec4<f32> {


  var c = textureSample(uTexture, uSampler, uv);
  
  if (colorMatrixUniforms.uAlpha == 0.0) {
    return c;
  }

 
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.r /= c.a;
      c.g /= c.a;
      c.b /= c.a;
    }

    var cm = colorMatrixUniforms.uColorMatrix;


    var result = vec4<f32>(0.);

    result.r = (cm[0][0] * c.r);
    result.r += (cm[0][1] * c.g);
    result.r += (cm[0][2] * c.b);
    result.r += (cm[0][3] * c.a);
    result.r += cm[1][0];

    result.g = (cm[1][1] * c.r);
    result.g += (cm[1][2] * c.g);
    result.g += (cm[1][3] * c.b);
    result.g += (cm[2][0] * c.a);
    result.g += cm[2][1];

    result.b = (cm[2][2] * c.r);
    result.b += (cm[2][3] * c.g);
    result.b += (cm[3][0] * c.b);
    result.b += (cm[3][1] * c.a);
    result.b += cm[3][2];

    result.a = (cm[3][3] * c.r);
    result.a += (cm[4][0] * c.g);
    result.a += (cm[4][1] * c.b);
    result.a += (cm[4][2] * c.a);
    result.a += cm[4][3];

    var rgb = mix(c.rgb, result.rgb, colorMatrixUniforms.uAlpha);

    rgb.r *= result.a;
    rgb.g *= result.a;
    rgb.b *= result.a;

    return vec4(rgb, result.a);
}`;class n5 extends qi{constructor(t={}){const e=new Xn({uColorMatrix:{value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],type:"f32",size:20},uAlpha:{value:1,type:"f32"}}),i=Dr.from({vertex:{source:Gy,entryPoint:"mainVertex"},fragment:{source:Gy,entryPoint:"mainFragment"}}),s=jr.from({vertex:s_,fragment:_A,name:"color-matrix-filter"});super({...t,gpuProgram:i,glProgram:s,resources:{colorMatrixUniforms:e}}),this.alpha=1}_loadMatrix(t,e=!1){let i=t;e&&(this._multiply(i,this.matrix,t),i=this._colorMatrix(i)),this.resources.colorMatrixUniforms.uniforms.uColorMatrix=i,this.resources.colorMatrixUniforms.update()}_multiply(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}tint(t,e){const[i,s,o]=Ce.shared.setValue(t).toArray(),h=[i,0,0,0,0,0,s,0,0,0,0,0,o,0,0,0,0,0,1,0];this._loadMatrix(h,e)}greyscale(t,e){const i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}grayscale(t,e){this.greyscale(t,e)}blackAndWhite(t){const e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;const i=Math.cos(t),s=Math.sin(t),o=Math.sqrt,h=1/3,f=o(h),m=i+(1-i)*h,g=h*(1-i)-f*s,b=h*(1-i)+f*s,x=h*(1-i)+f*s,E=i+h*(1-i),A=h*(1-i)-f*s,R=h*(1-i)-f*s,D=h*(1-i)+f*s,B=i+h*(1-i),P=[m,g,b,0,0,x,E,A,0,0,R,D,B,0,0,0,0,0,1,0];this._loadMatrix(P,e)}contrast(t,e){const i=(t||0)+1,s=-.5*(i-1),o=[i,0,0,0,s,0,i,0,0,s,0,0,i,0,s,0,0,0,1,0];this._loadMatrix(o,e)}saturate(t=0,e){const i=t*2/3+1,s=(i-1)*-.5,o=[i,s,s,0,0,s,i,s,0,0,s,s,i,0,0,0,0,0,1,0];this._loadMatrix(o,e)}desaturate(){this.saturate(-1)}negative(t){const e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){const e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){const e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){const e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){const e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){const e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){const e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){const e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,i,s,o){t||(t=.2),e||(e=.15),i||(i=16770432),s||(s=3375104);const h=Ce.shared,[f,m,g]=h.setValue(i).toArray(),[b,x,E]=h.setValue(s).toArray(),A=[.3,.59,.11,0,0,f,m,g,t,0,b,x,E,e,0,f-b,m-x,g-E,0,0];this._loadMatrix(A,o)}night(t,e){t||(t=.1);const i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(i,e)}predator(t,e){const i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)}lsd(t){const e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.resources.colorMatrixUniforms.uniforms.uColorMatrix}set matrix(t){this.resources.colorMatrixUniforms.uniforms.uColorMatrix=t}get alpha(){return this.resources.colorMatrixUniforms.uniforms.uAlpha}set alpha(t){this.resources.colorMatrixUniforms.uniforms.uAlpha=t}}var yA=`
in vec2 vTextureCoord;
in vec2 vFilterUv;

out vec4 finalColor;

uniform sampler2D uTexture;
uniform sampler2D uMapTexture;

uniform vec4 uInputClamp;
uniform highp vec4 uInputSize;
uniform mat2 uRotation;
uniform vec2 uScale;

void main()
{
    vec4 map = texture(uMapTexture, vFilterUv);
    
    vec2 offset = uInputSize.zw * (uRotation * (map.xy - 0.5)) * uScale; 

    finalColor = texture(uTexture, clamp(vTextureCoord + offset, uInputClamp.xy, uInputClamp.zw));
}
`,bA=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 vFilterUv;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

uniform mat3 uFilterMatrix;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( void )
{
  return ( uFilterMatrix * vec3( filterTextureCoord(), 1.0)  ).xy;
}


void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
    vFilterUv = getFilterCoord();
}
`,Ny=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct DisplacementUniforms {
  uFilterMatrix:mat3x3<f32>,
  uScale:vec2<f32>,
  uRotation:mat2x2<f32>
};



@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : DisplacementUniforms;
@group(1) @binding(1) var uMapTexture: texture_2d<f32>;
@group(1) @binding(2) var uMapSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{

  
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var map = textureSample(uMapTexture, uMapSampler, filterUv);

    var offset =  gfu.uInputSize.zw * (filterUniforms.uRotation * (map.xy - 0.5)) * filterUniforms.uScale; 
   
    return textureSample(uTexture, uSampler, clamp(uv + offset, gfu.uInputClamp.xy, gfu.uInputClamp.zw));
}`;class i5 extends qi{constructor(...t){let e=t[0];e instanceof Di&&(t[1]&&wt(Jt,"DisplacementFilter now uses options object instead of params. {sprite, scale}"),e={sprite:e,scale:t[1]});const{sprite:i,scale:s,...o}=e;let h=s??20;typeof h=="number"&&(h=new Xe(h,h));const f=new Xn({uFilterMatrix:{value:new Pt,type:"mat3x3<f32>"},uScale:{value:h,type:"vec2<f32>"},uRotation:{value:new Float32Array([0,0,0,0]),type:"mat2x2<f32>"}}),m=jr.from({vertex:bA,fragment:yA,name:"displacement-filter"}),g=Dr.from({vertex:{source:Ny,entryPoint:"mainVertex"},fragment:{source:Ny,entryPoint:"mainFragment"}}),b=i.texture.source;super({...o,gpuProgram:g,glProgram:m,resources:{filterUniforms:f,uMapTexture:b,uMapSampler:b.style}}),this._sprite=e.sprite,this._sprite.renderable=!1}apply(t,e,i,s){const o=this.resources.filterUniforms.uniforms;t.calculateSpriteMatrix(o.uFilterMatrix,this._sprite);const h=this._sprite.worldTransform,f=Math.sqrt(h.a*h.a+h.b*h.b),m=Math.sqrt(h.c*h.c+h.d*h.d);f!==0&&m!==0&&(o.uRotation[0]=h.a/f,o.uRotation[1]=h.b/f,o.uRotation[2]=h.c/m,o.uRotation[3]=h.d/m),this.resources.uMapTexture=this._sprite.texture.source,t.applyFilter(this,e,i,s)}get scale(){return this.resources.filterUniforms.uniforms.uScale}}var vA=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) *  uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    finalColor = color;
}
`,zy=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct NoiseUniforms {
  uNoise:f32,
  uSeed:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

fn rand(co:vec2<f32>) -> f32
{
  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}



@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);
  
    
    var sample = textureSample(uTexture, uSampler, uv);
    var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);
    var diff = (randomValue - 0.5) * noiseUniforms.uNoise;
  
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (sample.a > 0.0) {
      sample.r /= sample.a;
      sample.g /= sample.a;
      sample.b /= sample.a;
    }

    sample.r += diff;
    sample.g += diff;
    sample.b += diff;

    // Premultiply alpha again.
    sample.r *= sample.a;
    sample.g *= sample.a;
    sample.b *= sample.a;
    
    return sample;
}`;const xA=class SA extends qi{constructor(t={}){t={...SA.defaultOptions,...t};const e=Dr.from({vertex:{source:zy,entryPoint:"mainVertex"},fragment:{source:zy,entryPoint:"mainFragment"}}),i=jr.from({vertex:s_,fragment:vA,name:"noise-filter"}),{noise:s,seed:o,...h}=t;super({...h,gpuProgram:e,glProgram:i,resources:{noiseUniforms:new Xn({uNoise:{value:1,type:"f32"},uSeed:{value:1,type:"f32"}})}}),this.noise=s,this.seed=o??Math.random()}get noise(){return this.resources.noiseUniforms.uniforms.uNoise}set noise(t){this.resources.noiseUniforms.uniforms.uNoise=t}get seed(){return this.resources.noiseUniforms.uniforms.uSeed}set seed(t){this.resources.noiseUniforms.uniforms.uSeed=t}};xA.defaultOptions={noise:.5};let r5=xA;class EA{constructor(t){this._renderer=t}push(t,e,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:e,filterEffect:t})}pop(t,e,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(t){t.action==="pushFilter"?this._renderer.filter.push(t):t.action==="popFilter"&&this._renderer.filter.pop()}destroy(){this._renderer=null}}EA.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"filter"};function TA(n,t){t.clear();const e=t.matrix;for(let i=0;i<n.length;i++){const s=n[i];s.globalDisplayStatus<7||(t.matrix=s.worldTransform,t.addBounds(s.bounds))}return t.matrix=e,t}const s5=new ec({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:2*4,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])});class a5{constructor(){this.skip=!1,this.inputTexture=null,this.backTexture=null,this.filters=null,this.bounds=new ti,this.container=null,this.blendRequired=!1,this.outputRenderSurface=null,this.outputOffset={x:0,y:0},this.globalFrame={x:0,y:0,width:0,height:0}}}class AA{constructor(t){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new Xn({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new Za({}),this.renderer=t}get activeBackTexture(){var t;return(t=this._activeFilterData)==null?void 0:t.backTexture}push(t){const e=this.renderer,i=t.filterEffect.filters,s=this._pushFilterData();s.skip=!1,s.filters=i,s.container=t.container,s.outputRenderSurface=e.renderTarget.renderSurface;const o=e.renderTarget.renderTarget.colorTexture.source,h=o.resolution,f=o.antialias;if(i.length===0){s.skip=!0;return}const m=s.bounds;if(t.renderables?TA(t.renderables,m):t.filterEffect.filterArea?(m.clear(),m.addRect(t.filterEffect.filterArea),m.applyMatrix(t.container.worldTransform)):t.container.getFastGlobalBounds(!0,m),t.container){const D=(t.container.renderGroup||t.container.parentRenderGroup).cacheToLocalTransform;D&&m.applyMatrix(D)}if(this._calculateFilterBounds(s,e.renderTarget.rootViewPort,f,h,1),s.skip)return;const g=this._getPreviousFilterData();let b=h,x=0,E=0;g&&(x=g.bounds.minX,E=g.bounds.minY,b=g.inputTexture.source._resolution),s.outputOffset.x=m.minX-x,s.outputOffset.y=m.minY-E;const A=s.globalFrame;if(A.x=x*b,A.y=E*b,A.width=o.width*b,A.height=o.height*b,s.backTexture=Ct.EMPTY,s.blendRequired){e.renderTarget.finishRenderPass();const R=e.renderTarget.getRenderTarget(s.outputRenderSurface);s.backTexture=this.getBackTexture(R,m,g==null?void 0:g.bounds)}s.inputTexture=Vn.getOptimalTexture(m.width,m.height,s.resolution,s.antialias),e.renderTarget.bind(s.inputTexture,!0),e.globalUniforms.push({offset:m})}generateFilteredTexture({texture:t,filters:e}){const i=this._pushFilterData();this._activeFilterData=i,i.skip=!1,i.filters=e;const s=t.source,o=s.resolution,h=s.antialias;if(e.length===0)return i.skip=!0,t;const f=i.bounds;if(f.addRect(t.frame),this._calculateFilterBounds(i,f.rectangle,h,o,0),i.skip)return t;const m=o,g=0,b=0;i.outputOffset.x=-f.minX,i.outputOffset.y=-f.minY;const x=i.globalFrame;x.x=g*m,x.y=b*m,x.width=s.width*m,x.height=s.height*m,i.outputRenderSurface=Vn.getOptimalTexture(f.width,f.height,i.resolution,i.antialias),i.backTexture=Ct.EMPTY,i.inputTexture=t,this.renderer.renderTarget.finishRenderPass(),this._applyFiltersToTexture(i,!0);const A=i.outputRenderSurface;return A.source.alphaMode="premultiplied-alpha",A}pop(){const t=this.renderer,e=this._popFilterData();e.skip||(t.globalUniforms.pop(),t.renderTarget.finishRenderPass(),this._activeFilterData=e,this._applyFiltersToTexture(e,!1),e.blendRequired&&Vn.returnTexture(e.backTexture),Vn.returnTexture(e.inputTexture))}getBackTexture(t,e,i){const s=t.colorTexture.source._resolution,o=Vn.getOptimalTexture(e.width,e.height,s,!1);let h=e.minX,f=e.minY;i&&(h-=i.minX,f-=i.minY),h=Math.floor(h*s),f=Math.floor(f*s);const m=Math.ceil(e.width*s),g=Math.ceil(e.height*s);return this.renderer.renderTarget.copyToTexture(t,o,{x:h,y:f},{width:m,height:g},{x:0,y:0}),o}applyFilter(t,e,i,s){const o=this.renderer,h=this._activeFilterData,f=h.outputRenderSurface,m=this._filterGlobalUniforms,g=m.uniforms,b=g.uOutputFrame,x=g.uInputSize,E=g.uInputPixel,A=g.uInputClamp,R=g.uGlobalFrame,D=g.uOutputTexture;f===i?(b[0]=h.outputOffset.x,b[1]=h.outputOffset.y):(b[0]=0,b[1]=0),b[2]=e.frame.width,b[3]=e.frame.height,x[0]=e.source.width,x[1]=e.source.height,x[2]=1/x[0],x[3]=1/x[1],E[0]=e.source.pixelWidth,E[1]=e.source.pixelHeight,E[2]=1/E[0],E[3]=1/E[1],A[0]=.5*E[2],A[1]=.5*E[3],A[2]=e.frame.width*x[2]-.5*E[2],A[3]=e.frame.height*x[3]-.5*E[3],R[0]=h.globalFrame.x,R[1]=h.globalFrame.y,R[2]=h.globalFrame.width,R[3]=h.globalFrame.height,i instanceof Ct&&(i.source.resource=null);const B=this.renderer.renderTarget.getRenderTarget(i);if(o.renderTarget.bind(i,!!s),i instanceof Ct?(D[0]=i.frame.width,D[1]=i.frame.height):(D[0]=B.width,D[1]=B.height),D[2]=B.isRoot?-1:1,m.update(),o.renderPipes.uniformBatch){const P=o.renderPipes.uniformBatch.getUboResource(m);this._globalFilterBindGroup.setResource(P,0)}else this._globalFilterBindGroup.setResource(m,0);this._globalFilterBindGroup.setResource(e.source,1),this._globalFilterBindGroup.setResource(e.source.style,2),t.groups[0]=this._globalFilterBindGroup,o.encoder.draw({geometry:s5,shader:t,state:t._state,topology:"triangle-list"}),o.type===Br.WEBGL&&o.renderTarget.finishRenderPass()}calculateSpriteMatrix(t,e){const i=this._activeFilterData,s=t.set(i.inputTexture._source.width,0,0,i.inputTexture._source.height,i.bounds.minX,i.bounds.minY),o=e.worldTransform.copyTo(Pt.shared),h=e.renderGroup||e.parentRenderGroup;return h&&h.cacheToLocalTransform&&o.prepend(h.cacheToLocalTransform),o.invert(),s.prepend(o),s.scale(1/e.texture.frame.width,1/e.texture.frame.height),s.translate(e.anchor.x,e.anchor.y),s}destroy(){}_applyFiltersToTexture(t,e){const i=t.inputTexture,s=t.bounds,o=t.filters;if(this._globalFilterBindGroup.setResource(i.source.style,2),this._globalFilterBindGroup.setResource(t.backTexture.source,3),o.length===1)o[0].apply(this,i,t.outputRenderSurface,e);else{let h=t.inputTexture;const f=Vn.getOptimalTexture(s.width,s.height,h.source._resolution,!1);let m=f,g=0;for(g=0;g<o.length-1;++g){o[g].apply(this,h,m,!0);const x=h;h=m,m=x}o[g].apply(this,h,t.outputRenderSurface,e),Vn.returnTexture(f)}}_calculateFilterBounds(t,e,i,s,o){var D;const h=this.renderer,f=t.bounds,m=t.filters;let g=1/0,b=0,x=!0,E=!1,A=!1,R=!0;for(let B=0;B<m.length;B++){const P=m[B];if(g=Math.min(g,P.resolution==="inherit"?s:P.resolution),b+=P.padding,P.antialias==="off"?x=!1:P.antialias==="inherit"&&x&&(x=i),P.clipToViewport||(R=!1),!!!(P.compatibleRenderers&h.type)){A=!1;break}if(P.blendRequired&&!(((D=h.backBuffer)==null?void 0:D.useBackBuffer)??!0)){Xt("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),A=!1;break}A=P.enabled||A,E||(E=P.blendRequired)}if(!A){t.skip=!0;return}if(R&&f.fitBounds(0,e.width/s,0,e.height/s),f.scale(g).ceil().scale(1/g).pad((b|0)*o),!f.isPositive){t.skip=!0;return}t.antialias=x,t.resolution=g,t.blendRequired=E}_popFilterData(){return this._filterStackIndex--,this._filterStack[this._filterStackIndex]}_getPreviousFilterData(){let t,e=this._filterStackIndex-1;for(;e>1&&(e--,t=this._filterStack[e],!!t.skip););return t}_pushFilterData(){let t=this._filterStack[this._filterStackIndex];return t||(t=this._filterStack[this._filterStackIndex]=new a5),this._filterStackIndex++,t}}AA.extension={type:[q.WebGLSystem,q.WebGPUSystem],name:"filter"};var CA=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
    float clip = step(3.5,
        step(uMaskClamp.x, vMaskCoord.x) +
        step(uMaskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, uMaskClamp.z) +
        step(vMaskCoord.y, uMaskClamp.w));

    // TODO look into why this is needed
    float npmAlpha = uAlpha;
    vec4 original = texture(uTexture, vTextureCoord);
    vec4 masky = texture(uMaskTexture, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    float a = alphaMul * masky.r * npmAlpha * clip;

    if (uInverse == 1.0) {
        a = 1.0 - a;
    }

    finalColor = original * a;
}
`,BA=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
       
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
    gl_Position = filterVertexPosition(aPosition);
    vTextureCoord = filterTextureCoord(aPosition);
    vMaskCoord = getFilterCoord(aPosition);
}
`,Ly=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
  uFilterMatrix:mat3x3<f32>,
  uMaskClamp:vec4<f32>,
  uAlpha:f32,
  uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var maskClamp = filterUniforms.uMaskClamp;
    var uAlpha = filterUniforms.uAlpha;

    var clip = step(3.5,
      step(maskClamp.x, filterUv.x) +
      step(maskClamp.y, filterUv.y) +
      step(filterUv.x, maskClamp.z) +
      step(filterUv.y, maskClamp.w));

    var mask = textureSample(uMaskTexture, uSampler, filterUv);
    var source = textureSample(uTexture, uSampler, uv);
    var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

    var a: f32 = alphaMul * mask.r * uAlpha * clip;

    if (filterUniforms.uInverse == 1.0) {
        a = 1.0 - a;
    }

    return source * a;
}
`;class RA extends qi{constructor(t){const{sprite:e,...i}=t,s=new cb(e.texture),o=new Xn({uFilterMatrix:{value:new Pt,type:"mat3x3<f32>"},uMaskClamp:{value:s.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:t.inverse?1:0,type:"f32"}}),h=Dr.from({vertex:{source:Ly,entryPoint:"mainVertex"},fragment:{source:Ly,entryPoint:"mainFragment"}}),f=jr.from({vertex:BA,fragment:CA,name:"mask-filter"});super({...i,gpuProgram:h,glProgram:f,resources:{filterUniforms:o,uMaskTexture:e.texture.source}}),this.sprite=e,this._textureMatrix=s}set inverse(t){this.resources.filterUniforms.uniforms.uInverse=t?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(t,e,i,s){this._textureMatrix.texture=this.sprite.texture,t.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,t.applyFilter(this,e,i,s)}}var l5=`fn getLuminosity(c: vec3<f32>) -> f32 {
  return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
}

fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32> {
  let d: f32 = lum - getLuminosity(c);
  let newColor: vec3<f32> = c.rgb + vec3<f32>(d, d, d);

  // clip back into legal range
  let newLum: f32 = getLuminosity(newColor);
  let cMin: f32 = min(newColor.r, min(newColor.g, newColor.b));
  let cMax: f32 = max(newColor.r, max(newColor.g, newColor.b));

  let t1: f32 = newLum / (newLum - cMin);
  let t2: f32 = (1.0 - newLum) / (cMax - newLum);

  let finalColor = mix(vec3<f32>(newLum, newLum, newLum), newColor, select(select(1.0, t2, cMax > 1.0), t1, cMin < 0.0));

  return finalColor;
}

fn getSaturation(c: vec3<f32>) -> f32 {
  return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
}

// Set saturation if color components are sorted in ascending order.
fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32> {
  var result: vec3<f32>;
  if (cSorted.z > cSorted.x) {
    let newY = (((cSorted.y - cSorted.x) * s) / (cSorted.z - cSorted.x));
    result = vec3<f32>(0.0, newY, s);
  } else {
    result = vec3<f32>(0.0, 0.0, 0.0);
  }
  return vec3<f32>(result.x, result.y, result.z);
}

fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32> {
    var result: vec3<f32> = c;

    if (c.r <= c.g && c.r <= c.b) {
        if (c.g <= c.b) {
            result = setSaturationMinMidMax(result, s);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.r, result.b, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.r, temp.b, temp.g);
        }
    } else if (c.g <= c.r && c.g <= c.b) {
        if (c.r <= c.b) {
            var temp: vec3<f32> = vec3<f32>(result.g, result.r, result.b);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.r, temp.b);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.g, result.b, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.b, temp.r);
        }
    } else {
        if (c.r <= c.g) {
            var temp: vec3<f32> = vec3<f32>(result.b, result.r, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.r, temp.g);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.b, result.g, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.g, temp.r);
        }
    }

    return result;
}`;function Hy(n,t,e,i,s,o,h,f){const m=h-e,g=f-i,b=s-e,x=o-i,E=n-e,A=t-i,R=m*m+g*g,D=m*b+g*x,B=m*E+g*A,P=b*b+x*x,G=b*E+x*A,H=1/(R*P-D*D),j=(P*B-D*G)*H,Z=(R*G-D*B)*H;return j>=0&&Z>=0&&j+Z<1}class $b{constructor(t=0,e=0,i=0,s=0,o=0,h=0){this.type="triangle",this.x=t,this.y=e,this.x2=i,this.y2=s,this.x3=o,this.y3=h}contains(t,e){const i=(this.x-this.x3)*(e-this.y3)-(this.y-this.y3)*(t-this.x3),s=(this.x2-this.x)*(e-this.y)-(this.y2-this.y)*(t-this.x);if(i<0!=s<0&&i!==0&&s!==0)return!1;const o=(this.x3-this.x2)*(e-this.y2)-(this.y3-this.y2)*(t-this.x2);return o===0||o<0==i+s<=0}strokeContains(t,e,i,s=.5){const o=i/2,h=o*o,{x:f,x2:m,x3:g,y:b,y2:x,y3:E}=this;return yd(t,e,f,b,m,E)<=h||yd(t,e,m,x,g,E)<=h||yd(t,e,g,E,f,b)<=h}clone(){return new $b(this.x,this.y,this.x2,this.y2,this.x3,this.y3)}copyFrom(t){return this.x=t.x,this.y=t.y,this.x2=t.x2,this.y2=t.y2,this.x3=t.x3,this.y3=t.y3,this}copyTo(t){return t.copyFrom(this),t}getBounds(t){t||(t=new Oe);const e=Math.min(this.x,this.x2,this.x3),i=Math.max(this.x,this.x2,this.x3),s=Math.min(this.y,this.y2,this.y3),o=Math.max(this.y,this.y2,this.y3);return t.x=e,t.y=s,t.width=i-e,t.height=o-s,t}}const MA=class DA{constructor(t){this._tick=()=>{this.timeout=setTimeout(this._processQueue,0)},this._processQueue=()=>{const{queue:e}=this;let i=0;for(;e.length&&i<DA.uploadsPerFrame;){const s=e.shift();this.uploadQueueItem(s),i++}e.length?Pn.system.addOnce(this._tick,this,Vl.UTILITY):this._resolve()},this.renderer=t,this.queue=[],this.resolves=[]}getQueue(){return[...this.queue]}add(t){const e=Array.isArray(t)?t:[t];for(const i of e)i instanceof kn?this._addContainer(i):this.resolveQueueItem(i,this.queue);return this}_addContainer(t){this.resolveQueueItem(t,this.queue);for(const e of t.children)this._addContainer(e)}upload(t){return t&&this.add(t),new Promise(e=>{this.queue.length?(this.resolves.push(e),this.dedupeQueue(),Pn.system.addOnce(this._tick,this,Vl.UTILITY)):e()})}dedupeQueue(){const t=Object.create(null);let e=0;for(let i=0;i<this.queue.length;i++){const s=this.queue[i];t[s.uid]||(t[s.uid]=!0,this.queue[e++]=s)}this.queue.length=e}_resolve(){const{resolves:t}=this,e=t.slice(0);t.length=0;for(const i of e)i()}};MA.uploadsPerFrame=4;let wA=MA;class tc extends $a{constructor(t){t instanceof ir&&(t={context:t});const{context:e,roundPixels:i,...s}=t||{};super({label:"Graphics",...s}),this.renderPipeId="graphics",e?this._context=e:this._context=this._ownedContext=new ir,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=i??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||(t==null?void 0:t.context)===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new tc(this._context.clone()):(this._ownedContext=null,new tc(this._context))}lineStyle(t,e,i){wt(Jt,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const s={};return t&&(s.width=t),e&&(s.color=e),i&&(s.alpha=i),this.context.strokeStyle=s,this}beginFill(t,e){wt(Jt,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return t!==void 0&&(i.color=t),e!==void 0&&(i.alpha=e),this.context.fillStyle=i,this}endFill(){wt(Jt,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==ir.defaultStrokeStyle.width||t.color!==ir.defaultStrokeStyle.color||t.alpha!==ir.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return wt(Jt,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return wt(Jt,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return wt(Jt,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return wt(Jt,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return wt(Jt,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return wt(Jt,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}const UA=class OA extends ec{constructor(...t){let e=t[0]??{};e instanceof Float32Array&&(wt(Jt,"use new MeshGeometry({ positions, uvs, indices }) instead"),e={positions:e,uvs:t[1],indices:t[2]}),e={...OA.defaultOptions,...e};const i=e.positions||new Float32Array([0,0,1,0,1,1,0,1]);let s=e.uvs;s||(e.positions?s=new Float32Array(i.length):s=new Float32Array([0,0,1,0,1,1,0,1]));const o=e.indices||new Uint32Array([0,1,2,0,2,3]),h=e.shrinkBuffersToFit,f=new Cr({data:i,label:"attribute-mesh-positions",shrinkToFit:h,usage:be.VERTEX|be.COPY_DST}),m=new Cr({data:s,label:"attribute-mesh-uvs",shrinkToFit:h,usage:be.VERTEX|be.COPY_DST}),g=new Cr({data:o,label:"index-mesh-buffer",shrinkToFit:h,usage:be.INDEX|be.COPY_DST});super({attributes:{aPosition:{buffer:f,format:"float32x2",stride:2*4,offset:0},aUV:{buffer:m,format:"float32x2",stride:2*4,offset:0}},indexBuffer:g,topology:e.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(t){this.attributes.aPosition.buffer.data=t}get uvs(){return this.attributes.aUV.buffer.data}set uvs(t){this.attributes.aUV.buffer.data=t}get indices(){return this.indexBuffer.data}set indices(t){this.indexBuffer.data=t}};UA.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let ic=UA;class wh extends $a{constructor(...t){let e=t[0];e instanceof ec&&(wt(Jt,"Mesh: use new Mesh({ geometry, shader }) instead"),e={geometry:e,shader:t[1]},t[3]&&(wt(Jt,"Mesh: drawMode argument has been removed, use geometry.topology instead"),e.geometry.topology=t[3]));const{geometry:i,shader:s,texture:o,roundPixels:h,state:f,...m}=e;super({label:"Mesh",...m}),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=s??null,this.texture=o??(s==null?void 0:s.texture)??Ct.WHITE,this.state=f??Yr.for2d(),this._geometry=i,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=h??!1}get material(){return wt(Jt,"mesh.material property has been removed, use mesh.shader instead"),this._shader}set shader(t){this._shader!==t&&(this._shader=t,this.onViewUpdate())}get shader(){return this._shader}set geometry(t){var e;this._geometry!==t&&((e=this._geometry)==null||e.off("update",this.onViewUpdate,this),t.on("update",this.onViewUpdate,this),this._geometry=t,this.onViewUpdate())}get geometry(){return this._geometry}set texture(t){t||(t=Ct.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=t),this._texture=t,this.onViewUpdate())}get texture(){return this._texture}get batched(){return this._shader||(this.state.data&12)!==0?!1:this._geometry instanceof ic?this._geometry.batchMode==="auto"?this._geometry.positions.length/2<=100:this._geometry.batchMode==="batch":!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(t){const{x:e,y:i}=t;if(!this.bounds.containsPoint(e,i))return!1;const s=this.geometry.getBuffer("aPosition").data,o=this.geometry.topology==="triangle-strip"?3:1;if(this.geometry.getIndex()){const h=this.geometry.getIndex().data,f=h.length;for(let m=0;m+2<f;m+=o){const g=h[m]*2,b=h[m+1]*2,x=h[m+2]*2;if(Hy(e,i,s[g],s[g+1],s[b],s[b+1],s[x],s[x+1]))return!0}}else{const h=s.length/2;for(let f=0;f+2<h;f+=o){const m=f*2,g=(f+1)*2,b=(f+2)*2;if(Hy(e,i,s[m],s[m+1],s[g],s[g+1],s[b],s[b+1]))return!0}}return!1}destroy(t){var i;if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const s=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(s)}(i=this._geometry)==null||i.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null,this._gpuData=null}}class zd extends Di{constructor(...t){let e=t[0];Array.isArray(t[0])&&(e={textures:t[0],autoUpdate:t[1]});const{animationSpeed:i=1,autoPlay:s=!1,autoUpdate:o=!0,loop:h=!0,onComplete:f=null,onFrameChange:m=null,onLoop:g=null,textures:b,updateAnchor:x=!1,...E}=e,[A]=b;super({...E,texture:A instanceof Ct?A:A.texture}),this._textures=null,this._durations=null,this._autoUpdate=o,this._isConnectedToTicker=!1,this.animationSpeed=i,this.loop=h,this.updateAnchor=x,this.onComplete=f,this.onFrameChange=m,this.onLoop=g,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=b,s&&this.play()}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Pn.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Pn.shared.add(this.update,this,Vl.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const e=t.deltaTime,i=this.animationSpeed*e,s=this.currentFrame;if(this._durations!==null){let o=this._currentTime%1*this._durations[this.currentFrame];for(o+=i/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];const h=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*h,this._currentTime+=h;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):s!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<s||this.animationSpeed<0&&this.currentFrame>s)&&this.onLoop(),this._updateTexture())}_updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this.texture=this._textures[t],this.updateAnchor&&this.texture.defaultAnchor&&this.anchor.copyFrom(this.texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(){this.stop(),super.destroy(),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const e=[];for(let i=0;i<t.length;++i)e.push(Ct.from(t[i]));return new zd(e)}static fromImages(t){const e=[];for(let i=0;i<t.length;++i)e.push(Ct.from(t[i]));return new zd(e)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof Ct)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this._updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this._updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Pn.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Pn.shared.add(this.update,this),this._isConnectedToTicker=!0))}}class PA{constructor({matrix:t,observer:e}={}){this.dirty=!0,this._matrix=t??new Pt,this.observer=e,this.position=new Fn(this,0,0),this.scale=new Fn(this,1,1),this.pivot=new Fn(this,0,0),this.skew=new Fn(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){const t=this._matrix;return this.dirty&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this.dirty=!1),t}_onUpdate(t){var e;this.dirty=!0,t===this.skew&&this.updateSkew(),(e=this.observer)==null||e._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return`[pixi.js/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}setFromMatrix(t){t.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this.skew))}}const GA=class cg extends $a{constructor(...t){let e=t[0]||{};e instanceof Ct&&(e={texture:e}),t.length>1&&(wt(Jt,"use new TilingSprite({ texture, width:100, height:100 }) instead"),e.width=t[1],e.height=t[2]),e={...cg.defaultOptions,...e};const{texture:i,anchor:s,tilePosition:o,tileScale:h,tileRotation:f,width:m,height:g,applyAnchorToTexture:b,roundPixels:x,...E}=e??{};super({label:"TilingSprite",...E}),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new Fn({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=b,this.texture=i,this._width=m??i.width,this._height=g??i.height,this._tileTransform=new PA({observer:{_onUpdate:()=>this.onViewUpdate()}}),s&&(this.anchor=s),this.tilePosition=o,this.tileScale=h,this.tileRotation=f,this.roundPixels=x??!1}static from(t,e={}){return typeof t=="string"?new cg({texture:Qe.get(t),...e}):new cg({texture:t,...e})}get uvRespectAnchor(){return Xt("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(t){Xt("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=t}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(t){this._texture.textureMatrix.clampMargin=t}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get tilePosition(){return this._tileTransform.position}set tilePosition(t){this._tileTransform.position.copyFrom(t)}get tileScale(){return this._tileTransform.scale}set tileScale(t){typeof t=="number"?this._tileTransform.scale.set(t):this._tileTransform.scale.copyFrom(t)}set tileRotation(t){this._tileTransform.rotation=t}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(t){t||(t=Ct.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this.onViewUpdate())}get texture(){return this._texture}set width(t){this._width=t,this.onViewUpdate()}get width(){return this._width}set height(t){this._height=t,this.onViewUpdate()}get height(){return this._height}setSize(t,e){typeof t=="object"&&(e=t.height??t.width,t=t.width),this._width=t,this._height=e??t,this.onViewUpdate()}getSize(t){return t||(t={}),t.width=this._width,t.height=this._height,t}updateBounds(){const t=this._bounds,e=this._anchor,i=this._width,s=this._height;t.minX=-e._x*i,t.maxX=t.minX+i,t.minY=-e._y*s,t.maxY=t.minY+s}containsPoint(t){const e=this._width,i=this._height,s=-e*this._anchor._x;let o=0;return t.x>=s&&t.x<=s+e&&(o=-i*this._anchor._y,t.y>=o&&t.y<=o+i)}destroy(t=!1){if(super.destroy(t),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(i)}this._texture=null}};GA.defaultOptions={texture:Ct.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};let NA=GA;class a_ extends $a{constructor(t,e){const{text:i,resolution:s,style:o,anchor:h,width:f,height:m,roundPixels:g,...b}=t;super({...b}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=e,this.text=i??"",this.style=o,this.resolution=s??null,this.allowChildren=!1,this._anchor=new Fn({_onUpdate:()=>{this.onViewUpdate()}}),h&&(this.anchor=h),this.roundPixels=g??!1,f!==void 0&&(this.width=f),m!==void 0&&(this.height=m)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){var e;t||(t={}),(e=this._style)==null||e.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this.bounds.width),e!==void 0&&this._setHeight(e,this.bounds.height)}containsPoint(t){const e=this.bounds.width,i=this.bounds.height,s=-e*this.anchor.x;let o=0;return t.x>=s&&t.x<=s+e&&(o=-i*this.anchor.y,t.y>=o&&t.y<=o+i)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t!=null&&t.style)&&this._style.destroy(t),this._style=null,this._text=null}}function l_(n,t){let e=n[0]??{};return(typeof e=="string"||n[1])&&(wt(Jt,`use new ${t}({ text: "hi!", style }) instead`),e={text:e,style:n[1]}),e}let Iu=null,Ll=null;function o5(n,t){Iu||(Iu=pe.get().createCanvas(256,128),Ll=Iu.getContext("2d",{willReadFrequently:!0}),Ll.globalCompositeOperation="copy",Ll.globalAlpha=1),(Iu.width<n||Iu.height<t)&&(Iu.width=Qu(n),Iu.height=Qu(t))}function z1(n,t,e){for(let i=0,s=4*e*t;i<t;++i,s+=4)if(n[s+3]!==0)return!1;return!0}function L1(n,t,e,i,s){const o=4*t;for(let h=i,f=i*o+4*e;h<=s;++h,f+=o)if(n[f+3]!==0)return!1;return!0}function zA(...n){let t=n[0];t.canvas||(t={canvas:n[0],resolution:n[1]});const{canvas:e}=t,i=Math.min(t.resolution??1,1),s=t.width??e.width,o=t.height??e.height;let h=t.output;if(o5(s,o),!Ll)throw new TypeError("Failed to get canvas 2D context");Ll.drawImage(e,0,0,s,o,0,0,s*i,o*i);const m=Ll.getImageData(0,0,s,o).data;let g=0,b=0,x=s-1,E=o-1;for(;b<o&&z1(m,s,b);)++b;if(b===o)return Oe.EMPTY;for(;z1(m,s,E);)--E;for(;L1(m,s,g,b,E);)++g;for(;L1(m,s,x,b,E);)--x;return++x,++E,Ll.globalCompositeOperation="source-over",Ll.strokeRect(g,b,x-g,E-b),Ll.globalCompositeOperation="copy",h??(h=new Oe),h.set(g/i,b/i,(x-g)/i,(E-b)/i),h}const H1=new Oe;class u5{getCanvasAndContext(t){const{text:e,style:i,resolution:s=1}=t,o=i._getFinalPadding(),h=_s.measureText(e||" ",i),f=Math.ceil(Math.ceil(Math.max(1,h.width)+o*2)*s),m=Math.ceil(Math.ceil(Math.max(1,h.height)+o*2)*s),g=Xl.getOptimalCanvasAndContext(f,m);this._renderTextToCanvas(e,i,o,s,g);const b=i.trim?zA({canvas:g.canvas,width:f,height:m,resolution:1,output:H1}):H1.set(0,0,f,m);return{canvasAndContext:g,frame:b}}returnCanvasAndContext(t){Xl.returnCanvasAndContext(t)}_renderTextToCanvas(t,e,i,s,o){var H,j,Z,nt;const{canvas:h,context:f}=o,m=Ud(e),g=_s.measureText(t||" ",e),b=g.lines,x=g.lineHeight,E=g.lineWidths,A=g.maxLineWidth,R=g.fontProperties,D=h.height;if(f.resetTransform(),f.scale(s,s),f.textBaseline=e.textBaseline,(H=e._stroke)!=null&&H.width){const V=e._stroke;f.lineWidth=V.width,f.miterLimit=V.miterLimit,f.lineJoin=V.join,f.lineCap=V.cap}f.font=m;let B,P;const G=e.dropShadow?2:1;for(let V=0;V<G;++V){const ht=e.dropShadow&&V===0,N=ht?Math.ceil(Math.max(1,D)+i*2):0,Y=N*s;if(ht){f.fillStyle="black",f.strokeStyle="black";const ct=e.dropShadow,bt=ct.color,Tt=ct.alpha;f.shadowColor=Ce.shared.setValue(bt).setAlpha(Tt).toRgbaString();const F=ct.blur*s,K=ct.distance*s;f.shadowBlur=F,f.shadowOffsetX=Math.cos(ct.angle)*K,f.shadowOffsetY=Math.sin(ct.angle)*K+Y}else{if(f.fillStyle=e._fill?Pd(e._fill,f,g):null,(j=e._stroke)!=null&&j.width){const ct=e._stroke.width*e._stroke.alignment;f.strokeStyle=Pd(e._stroke,f,g,ct)}f.shadowColor="black"}let X=(x-R.fontSize)/2;x-R.fontSize<0&&(X=0);const $=((Z=e._stroke)==null?void 0:Z.width)??0;for(let ct=0;ct<b.length;ct++)B=$/2,P=$/2+ct*x+R.ascent+X,e.align==="right"?B+=A-E[ct]:e.align==="center"&&(B+=(A-E[ct])/2),(nt=e._stroke)!=null&&nt.width&&this._drawLetterSpacing(b[ct],e,o,B+i,P+i-N,!0),e._fill!==void 0&&this._drawLetterSpacing(b[ct],e,o,B+i,P+i-N)}}_drawLetterSpacing(t,e,i,s,o,h=!1){const{context:f}=i,m=e.letterSpacing;let g=!1;if(_s.experimentalLetterSpacingSupported&&(_s.experimentalLetterSpacing?(f.letterSpacing=`${m}px`,f.textLetterSpacing=`${m}px`,g=!0):(f.letterSpacing="0px",f.textLetterSpacing="0px")),m===0||g){h?f.strokeText(t,s,o):f.fillText(t,s,o);return}let b=s;const x=_s.graphemeSegmenter(t);let E=f.measureText(t).width,A=0;for(let R=0;R<x.length;++R){const D=x[R];h?f.strokeText(D,b,o):f.fillText(D,b,o);let B="";for(let P=R+1;P<x.length;++P)B+=x[P];A=f.measureText(B).width,b+=E-A+m,E=A}}}const yh=new u5;class tv extends a_{constructor(...t){const e=l_(t,"Text");super(e,Rr),this.renderPipeId="text",e.textureStyle&&(this.textureStyle=e.textureStyle instanceof vs?e.textureStyle:new vs(e.textureStyle))}updateBounds(){const t=this._bounds,e=this._anchor;let i=0,s=0;if(this._style.trim){const{frame:o,canvasAndContext:h}=yh.getCanvasAndContext({text:this.text,style:this._style,resolution:1});yh.returnCanvasAndContext(h),i=o.width,s=o.height}else{const o=_s.measureText(this._text,this._style);i=o.width,s=o.height}t.minX=-e._x*i,t.maxX=t.minX+i,t.minY=-e._y*s,t.maxY=t.minY+s}}class LA extends wA{resolveQueueItem(t,e){return t instanceof kn?this.resolveContainerQueueItem(t,e):t instanceof Sn||t instanceof Ct?e.push(t.source):t instanceof ir&&e.push(t),null}resolveContainerQueueItem(t,e){t instanceof Di||t instanceof NA||t instanceof wh?e.push(t.texture.source):t instanceof tv?e.push(t):t instanceof tc?e.push(t.context):t instanceof zd&&t.textures.forEach(i=>{i.source?e.push(i.source):e.push(i.texture.source)})}resolveGraphicsContextQueueItem(t){this.renderer.graphicsContext.getGpuContext(t);const{instructions:e}=t;for(const i of e)if(i.action==="texture"){const{image:s}=i.data;return s.source}else if(i.action==="fill"){const{texture:s}=i.data.style;return s.source}return null}}class HA extends a_{constructor(...t){var e;const i=l_(t,"BitmapText");i.style??(i.style=i.style||{}),(e=i.style).fill??(e.fill=16777215),super(i,Rr),this.renderPipeId="bitmapText"}updateBounds(){const t=this._bounds,e=this._anchor,i=Gd.measureText(this.text,this._style),s=i.scale,o=i.offsetY*s;let h=i.width*s,f=i.height*s;const m=this._style._stroke;m&&(h+=m.width,f+=m.width),t.minX=-e._x*h,t.maxX=t.minX+h,t.minY=-e._y*(f+o),t.maxY=t.minY+f}set resolution(t){t!==null&&Xt("[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.")}get resolution(){return this._resolution}}function FA(n){const t=n._stroke,e=n._fill,s=[`div { ${[`color: ${Ce.shared.setValue(e.color).toHex()}`,`font-size: ${n.fontSize}px`,`font-family: ${n.fontFamily}`,`font-weight: ${n.fontWeight}`,`font-style: ${n.fontStyle}`,`font-variant: ${n.fontVariant}`,`letter-spacing: ${n.letterSpacing}px`,`text-align: ${n.align}`,`padding: ${n.padding}px`,`white-space: ${n.whiteSpace==="pre"&&n.wordWrap?"pre-wrap":n.whiteSpace}`,...n.lineHeight?[`line-height: ${n.lineHeight}px`]:[],...n.wordWrap?[`word-wrap: ${n.breakWords?"break-all":"break-word"}`,`max-width: ${n.wordWrapWidth}px`]:[],...t?[kA(t)]:[],...n.dropShadow?[VA(n.dropShadow)]:[],...n.cssOverrides].join(";")} }`];return c5(n.tagStyles,s),s.join(" ")}function VA(n){const t=Ce.shared.setValue(n.color).setAlpha(n.alpha).toHexa(),e=Math.round(Math.cos(n.angle)*n.distance),i=Math.round(Math.sin(n.angle)*n.distance),s=`${e}px ${i}px`;return n.blur>0?`text-shadow: ${s} ${n.blur}px ${t}`:`text-shadow: ${s} ${t}`}function kA(n){return[`-webkit-text-stroke-width: ${n.width}px`,`-webkit-text-stroke-color: ${Ce.shared.setValue(n.color).toHex()}`,`text-stroke-width: ${n.width}px`,`text-stroke-color: ${Ce.shared.setValue(n.color).toHex()}`,"paint-order: stroke"].join(";")}const F1={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},V1={fill:n=>`color: ${Ce.shared.setValue(n).toHex()}`,breakWords:n=>`word-wrap: ${n?"break-all":"break-word"}`,stroke:kA,dropShadow:VA};function c5(n,t){for(const e in n){const i=n[e],s=[];for(const o in i)V1[o]?s.push(V1[o](i[o])):F1[o]&&s.push(F1[o].replace("{{VALUE}}",i[o]));t.push(`${e} { ${s.join(";")} }`)}}class Kd extends Rr{constructor(t={}){super(t),this._cssOverrides=[],this.cssOverrides=t.cssOverrides??[],this.tagStyles=t.tagStyles??{}}set cssOverrides(t){this._cssOverrides=t instanceof Array?t:[t],this.update()}get cssOverrides(){return this._cssOverrides}update(){this._cssStyle=null,super.update()}clone(){return new Kd({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?{...this.dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides,tagStyles:{...this.tagStyles}})}get cssStyle(){return this._cssStyle||(this._cssStyle=FA(this)),this._cssStyle}addOverride(...t){const e=t.filter(i=>!this.cssOverrides.includes(i));e.length>0&&(this.cssOverrides.push(...e),this.update())}removeOverride(...t){const e=t.filter(i=>this.cssOverrides.includes(i));e.length>0&&(this.cssOverrides=this.cssOverrides.filter(i=>!e.includes(i)),this.update())}set fill(t){typeof t!="string"&&typeof t!="number"&&Xt("[HTMLTextStyle] only color fill is not supported by HTMLText"),super.fill=t}set stroke(t){t&&typeof t!="string"&&typeof t!="number"&&Xt("[HTMLTextStyle] only color stroke is not supported by HTMLText"),super.stroke=t}}const k1="http://www.w3.org/2000/svg",X1="http://www.w3.org/1999/xhtml";class ev{constructor(){this.svgRoot=document.createElementNS(k1,"svg"),this.foreignObject=document.createElementNS(k1,"foreignObject"),this.domElement=document.createElementNS(X1,"div"),this.styleElement=document.createElementNS(X1,"style"),this.image=new Image;const{foreignObject:t,svgRoot:e,styleElement:i,domElement:s}=this;t.setAttribute("width","10000"),t.setAttribute("height","10000"),t.style.overflow="hidden",e.appendChild(t),t.appendChild(i),t.appendChild(s)}}let I1;function nv(n,t,e,i){i||(i=I1||(I1=new ev));const{domElement:s,styleElement:o,svgRoot:h}=i;s.innerHTML=`<style>${t.cssStyle};</style><div style='padding:0'>${n}</div>`,s.setAttribute("style","transform-origin: top left; display: inline-block"),e&&(o.textContent=e),document.body.appendChild(h);const f=s.getBoundingClientRect();h.remove();const m=t.padding*2;return{width:f.width-m,height:f.height-m}}class XA extends a_{constructor(...t){const e=l_(t,"HtmlText");super(e,Kd),this.renderPipeId="htmlText",e.textureStyle&&(this.textureStyle=e.textureStyle instanceof vs?e.textureStyle:new vs(e.textureStyle))}updateBounds(){const t=this._bounds,e=this._anchor,i=nv(this.text,this._style),{width:s,height:o}=i;t.minX=-e._x*s,t.maxX=t.minX+s,t.minY=-e._y*o,t.maxY=t.minY+o}}class IA extends LA{uploadQueueItem(t){t instanceof Sn?this.uploadTextureSource(t):t instanceof tv?this.uploadText(t):t instanceof XA?this.uploadHTMLText(t):t instanceof HA?this.uploadBitmapText(t):t instanceof ir&&this.uploadGraphicsContext(t)}uploadTextureSource(t){this.renderer.texture.initSource(t)}uploadText(t){this.renderer.renderPipes.text.initGpuText(t)}uploadBitmapText(t){this.renderer.renderPipes.bitmapText.initGpuText(t)}uploadHTMLText(t){this.renderer.renderPipes.htmlText.initGpuText(t)}uploadGraphicsContext(t){this.renderer.graphicsContext.getGpuContext(t);const{instructions:e}=t;for(const i of e)if(i.action==="texture"){const{image:s}=i.data;this.uploadTextureSource(s.source)}else if(i.action==="fill"){const{texture:s}=i.data.style;this.uploadTextureSource(s.source)}return null}}class YA extends IA{destroy(){clearTimeout(this.timeout),this.renderer=null,this.queue=null,this.resolves=null}}YA.extension={type:[q.WebGLSystem,q.WebGPUSystem],name:"prepare"};class iv{constructor(){this._tempState=Yr.for2d(),this._didUploadHash={}}init(t){t.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(t,e,i){const s=t.renderer,o=this._didUploadHash[i.uid];s.shader.bind(i,o),o||(this._didUploadHash[i.uid]=!0),s.shader.updateUniformGroup(s.globalUniforms.uniformGroup),s.geometry.bind(e,i.glProgram)}execute(t,e){const i=t.renderer;this._tempState.blendMode=e.blendMode,i.state.set(this._tempState);const s=e.textures.textures;for(let o=0;o<e.textures.count;o++)i.texture.bind(s[o],o);i.geometry.draw(e.topology,e.size,e.start)}}iv.extension={type:[q.WebGLPipesAdaptor],name:"batch"};function h5(n){const t=[];let e=0;for(let i=0;i<n;i++)t[e]={texture:{sampleType:"float",viewDimension:"2d",multisampled:!1},binding:e,visibility:GPUShaderStage.FRAGMENT},e++,t[e]={sampler:{type:"filtering"},binding:e,visibility:GPUShaderStage.FRAGMENT},e++;return t}function f5(n){const t={};let e=0;for(let i=0;i<n;i++)t[`textureSource${i+1}`]=e++,t[`textureSampler${i+1}`]=e++;return t}const $m=Yr.for2d();class rv{start(t,e,i){const s=t.renderer,o=s.encoder,h=i.gpuProgram;this._shader=i,this._geometry=e,o.setGeometry(e,h),$m.blendMode="normal",s.pipeline.getPipeline(e,h,$m);const f=s.globalUniforms.bindGroup;o.resetBindGroup(1),o.setBindGroup(0,f,h)}execute(t,e){const i=this._shader.gpuProgram,s=t.renderer,o=s.encoder;if(!e.bindGroup){const m=e.textures;e.bindGroup=Kg(m.textures,m.count,s.limits.maxBatchableTextures)}$m.blendMode=e.blendMode;const h=s.bindGroup.getBindGroup(e.bindGroup,i,1),f=s.pipeline.getPipeline(this._geometry,i,$m,e.topology);e.bindGroup._touch(s.textureGC.count),o.setPipeline(f),o.renderPassEncoder.setBindGroup(1,h),o.renderPassEncoder.drawIndexed(e.size,1,e.start)}}rv.extension={type:[q.WebGPUPipesAdaptor],name:"batch"};const sv=class qA{constructor(t,e){var i,s;this.state=Yr.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null),this.renderer=t,this._adaptor=e,(s=(i=this._adaptor).init)==null||s.call(i,this)}static getBatcher(t){return new this._availableBatchers[t]}buildStart(t){let e=this._batchersByInstructionSet[t.uid];e||(e=this._batchersByInstructionSet[t.uid]=Object.create(null),e.default||(e.default=new t_({maxTextures:this.renderer.limits.maxBatchableTextures}))),this._activeBatches=e,this._activeBatch=this._activeBatches.default;for(const i in this._activeBatches)this._activeBatches[i].begin()}addToBatch(t,e){if(this._activeBatch.name!==t.batcherName){this._activeBatch.break(e);let i=this._activeBatches[t.batcherName];i||(i=this._activeBatches[t.batcherName]=qA.getBatcher(t.batcherName),i.begin()),this._activeBatch=i}this._activeBatch.add(t)}break(t){this._activeBatch.break(t)}buildEnd(t){this._activeBatch.break(t);const e=this._activeBatches;for(const i in e){const s=e[i],o=s.geometry;o.indexBuffer.setDataWithSize(s.indexBuffer,s.indexSize,!0),o.buffers[0].setDataWithSize(s.attributeBuffer.float32View,s.attributeSize,!1)}}upload(t){const e=this._batchersByInstructionSet[t.uid];for(const i in e){const s=e[i],o=s.geometry;s.dirty&&(s.dirty=!1,o.buffers[0].update(s.attributeSize*4))}}execute(t){if(t.action==="startBatch"){const e=t.batcher,i=e.geometry,s=e.shader;this._adaptor.start(this,i,s)}this._adaptor.execute(this,t)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(const t in this._activeBatches)this._activeBatches[t].destroy();this._activeBatches=null}};sv.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"batch"};sv._availableBatchers=Object.create(null);let av=sv;De.handleByMap(q.Batcher,av._availableBatchers);De.add(t_);function d5(n){const t=n.split(/([\n{}])/g).map(s=>s.trim()).filter(s=>s.length);let e="";return t.map(s=>{let o=e+s;return s==="{"?e+="    ":s==="}"&&(e=e.substr(0,e.length-4),o=e+s),o}).join(`
`)}const bh={name:"local-uniform-bit",vertex:{header:`

            struct LocalUniforms {
                uTransformMatrix:mat3x3<f32>,
                uColor:vec4<f32>,
                uRound:f32,
            }

            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `}},jA={...bh,vertex:{...bh.vertex,header:bh.vertex.header.replace("group(1)","group(2)")}},o_={name:"local-uniform-bit",vertex:{header:`

            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix = uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `}},KA={name:"texture-bit",vertex:{header:`

        struct TextureUniforms {
            uTextureMatrix:mat3x3<f32>,
        }

        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
        `,main:`
            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
            @group(2) @binding(0) var uTexture: texture_2d<f32>;
            @group(2) @binding(1) var uSampler: sampler;


        `,main:`
            outColor = textureSample(uTexture, uSampler, vUV);
        `}},WA={name:"texture-bit",vertex:{header:`
            uniform mat3 uTextureMatrix;
        `,main:`
            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
        uniform sampler2D uTexture;


        `,main:`
            outColor = texture(uTexture, vUV);
        `}},p5=new ti;class m5 extends Td{constructor(){super(),this.filters=[new RA({sprite:new Di(Ct.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(t){this.filters[0].sprite=t}get inverse(){return this.filters[0].inverse}set inverse(t){this.filters[0].inverse=t}}class lv{constructor(t){this._activeMaskStage=[],this._renderer=t}push(t,e,i){const s=this._renderer;if(s.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:t,inverse:e._maskOptions.inverse,canBundle:!1,maskedContainer:e}),t.inverse=e._maskOptions.inverse,t.renderMaskToTexture){const o=t.mask;o.includeInBuild=!0,o.collectRenderables(i,s,null),o.includeInBuild=!1}s.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:t,maskedContainer:e,inverse:e._maskOptions.inverse,canBundle:!1})}pop(t,e,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:t,inverse:e._maskOptions.inverse,canBundle:!1})}execute(t){const e=this._renderer,i=t.mask.renderMaskToTexture;if(t.action==="pushMaskBegin"){const s=mi.get(m5);if(s.inverse=t.inverse,i){t.mask.mask.measurable=!0;const o=Fd(t.mask.mask,!0,p5);t.mask.mask.measurable=!1,o.ceil();const h=e.renderTarget.renderTarget.colorTexture.source,f=Vn.getOptimalTexture(o.width,o.height,h._resolution,h.antialias);e.renderTarget.push(f,!0),e.globalUniforms.push({offset:o,worldColor:4294967295});const m=s.sprite;m.texture=f,m.worldTransform.tx=o.minX,m.worldTransform.ty=o.minY,this._activeMaskStage.push({filterEffect:s,maskedContainer:t.maskedContainer,filterTexture:f})}else s.sprite=t.mask.mask,this._activeMaskStage.push({filterEffect:s,maskedContainer:t.maskedContainer})}else if(t.action==="pushMaskEnd"){const s=this._activeMaskStage[this._activeMaskStage.length-1];i&&(e.type===Br.WEBGL&&e.renderTarget.finishRenderPass(),e.renderTarget.pop(),e.globalUniforms.pop()),e.filter.push({renderPipeId:"filter",action:"pushFilter",container:s.maskedContainer,filterEffect:s.filterEffect,canBundle:!1})}else if(t.action==="popMaskEnd"){e.filter.pop();const s=this._activeMaskStage.pop();i&&Vn.returnTexture(s.filterTexture),mi.return(s.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}}lv.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"alphaMask"};class ov{constructor(t){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=t}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(t,e,i){this._renderer.renderPipes.batch.break(i);const o=this._colorStack;o[this._colorStackIndex]=o[this._colorStackIndex-1]&t.mask;const h=this._colorStack[this._colorStackIndex];h!==this._currentColor&&(this._currentColor=h,i.add({renderPipeId:"colorMask",colorMask:h,canBundle:!1})),this._colorStackIndex++}pop(t,e,i){this._renderer.renderPipes.batch.break(i);const o=this._colorStack;this._colorStackIndex--;const h=o[this._colorStackIndex-1];h!==this._currentColor&&(this._currentColor=h,i.add({renderPipeId:"colorMask",colorMask:h,canBundle:!1}))}execute(t){this._renderer.colorMask.setMask(t.colorMask)}destroy(){this._colorStack=null}}ov.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"colorMask"};class g5{constructor(t){this.priority=0,this.pipe="scissorMask",this.mask=t,this.mask.renderable=!1,this.mask.measurable=!1}addBounds(t,e){Hg(this.mask,t,e)}addLocalBounds(t,e){Fg(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}reset(){this.mask.measurable=!0,this.mask=null}destroy(){this.reset()}}class uv{constructor(t){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=t}push(t,e,i){var s;const o=t,h=this._renderer;h.renderPipes.batch.break(i),h.renderPipes.blendMode.setBlendMode(o.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:t,inverse:e._maskOptions.inverse,canBundle:!1});const f=o.mask;f.includeInBuild=!0,this._maskHash.has(o)||this._maskHash.set(o,{instructionsStart:0,instructionsLength:0});const m=this._maskHash.get(o);m.instructionsStart=i.instructionSize,f.collectRenderables(i,h,null),f.includeInBuild=!1,h.renderPipes.batch.break(i),i.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:t,inverse:e._maskOptions.inverse,canBundle:!1});const g=i.instructionSize-m.instructionsStart-1;m.instructionsLength=g;const b=h.renderTarget.renderTarget.uid;(s=this._maskStackHash)[b]??(s[b]=0)}pop(t,e,i){const s=t,o=this._renderer;o.renderPipes.batch.break(i),o.renderPipes.blendMode.setBlendMode(s.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:e._maskOptions.inverse,canBundle:!1});const h=this._maskHash.get(t);for(let f=0;f<h.instructionsLength;f++)i.instructions[i.instructionSize++]=i.instructions[h.instructionsStart++];i.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(t){var e;const i=this._renderer,s=i.renderTarget.renderTarget.uid;let o=(e=this._maskStackHash)[s]??(e[s]=0);t.action==="pushMaskBegin"?(i.renderTarget.ensureDepthStencil(),i.stencil.setStencilMode(On.RENDERING_MASK_ADD,o),o++,i.colorMask.setMask(0)):t.action==="pushMaskEnd"?(t.inverse?i.stencil.setStencilMode(On.INVERSE_MASK_ACTIVE,o):i.stencil.setStencilMode(On.MASK_ACTIVE,o),i.colorMask.setMask(15)):t.action==="popMaskBegin"?(i.colorMask.setMask(0),o!==0?i.stencil.setStencilMode(On.RENDERING_MASK_REMOVE,o):(i.renderTarget.clear(null,Ar.STENCIL),i.stencil.setStencilMode(On.DISABLED,o)),o--):t.action==="popMaskEnd"&&(t.inverse?i.stencil.setStencilMode(On.INVERSE_MASK_ACTIVE,o):i.stencil.setStencilMode(On.MASK_ACTIVE,o),i.colorMask.setMask(15)),this._maskStackHash[s]=o}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}}uv.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"stencilMask"};var vd=(n=>(n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",n))(vd||{});class QA{constructor(t,e){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.type=e}}class cv{constructor(t){this._gpuBuffers=Object.create(null),this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuBuffers")}destroy(){this._renderer=null,this._gl=null,this._gpuBuffers=null,this._boundBufferBases=null}contextChange(){this._gl=this._renderer.gl,this._gpuBuffers=Object.create(null),this._maxBindings=this._renderer.limits.maxUniformBindings}getGlBuffer(t){return this._gpuBuffers[t.uid]||this.createGLBuffer(t)}bind(t){const{_gl:e}=this,i=this.getGlBuffer(t);e.bindBuffer(i.type,i.buffer)}bindBufferBase(t,e){const{_gl:i}=this;this._boundBufferBases[e]!==t&&(this._boundBufferBases[e]=t,t._lastBindBaseLocation=e,i.bindBufferBase(i.UNIFORM_BUFFER,e,t.buffer))}nextBindBase(t){this._bindCallId++,this._minBaseLocation=0,t&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(t){let e=this.getLastBindBaseLocation(t);if(e>=this._minBaseLocation)return t._lastBindCallId=this._bindCallId,e;let i=0,s=this._nextBindBaseIndex;for(;i<2;){s>=this._maxBindings&&(s=this._minBaseLocation,i++);const o=this._boundBufferBases[s];if(o&&o._lastBindCallId===this._bindCallId){s++;continue}break}return e=s,this._nextBindBaseIndex=s+1,i>=2?-1:(t._lastBindCallId=this._bindCallId,this._boundBufferBases[e]=null,e)}getLastBindBaseLocation(t){const e=t._lastBindBaseLocation;return this._boundBufferBases[e]===t?e:-1}bindBufferRange(t,e,i,s){const{_gl:o}=this;i||(i=0),e||(e=0),this._boundBufferBases[e]=null,o.bindBufferRange(o.UNIFORM_BUFFER,e||0,t.buffer,i*256,s||256)}updateBuffer(t){const{_gl:e}=this,i=this.getGlBuffer(t);if(t._updateID===i.updateID)return i;i.updateID=t._updateID,e.bindBuffer(i.type,i.buffer);const s=t.data,o=t.descriptor.usage&be.STATIC?e.STATIC_DRAW:e.DYNAMIC_DRAW;return s?i.byteLength>=s.byteLength?e.bufferSubData(i.type,0,s,0,t._updateSize/s.BYTES_PER_ELEMENT):(i.byteLength=s.byteLength,e.bufferData(i.type,s,o)):(i.byteLength=t.descriptor.size,e.bufferData(i.type,i.byteLength,o)),i}destroyAll(){const t=this._gl;for(const e in this._gpuBuffers)t.deleteBuffer(this._gpuBuffers[e].buffer);this._gpuBuffers=Object.create(null)}onBufferDestroy(t,e){const i=this._gpuBuffers[t.uid],s=this._gl;e||s.deleteBuffer(i.buffer),this._gpuBuffers[t.uid]=null}createGLBuffer(t){const{_gl:e}=this;let i=vd.ARRAY_BUFFER;t.descriptor.usage&be.INDEX?i=vd.ELEMENT_ARRAY_BUFFER:t.descriptor.usage&be.UNIFORM&&(i=vd.UNIFORM_BUFFER);const s=new QA(e.createBuffer(),i);return this._gpuBuffers[t.uid]=s,t.on("destroy",this.onBufferDestroy,this),s}resetState(){this._boundBufferBases=Object.create(null)}}cv.extension={type:[q.WebGLSystem],name:"buffer"};const hv=class ZA{constructor(t){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=t,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this._renderer.gl=t}init(t){t={...ZA.defaultOptions,...t};let e=this.multiView=t.multiView;if(t.context&&e&&(Xt("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),e=!1),e?this.canvas=pe.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,t.context)this.initFromContext(t.context);else{const i=this._renderer.background.alpha<1,s=t.premultipliedAlpha??!0,o=t.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(t.preferWebGLVersion,{alpha:i,premultipliedAlpha:s,antialias:o,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference??"default"})}}ensureCanvasSize(t){if(!this.multiView){t!==this.canvas&&Xt("multiView is disabled, but targetCanvas is not the main canvas");return}const{canvas:e}=this;(e.width<t.width||e.height<t.height)&&(e.width=Math.max(t.width,t.width),e.height=Math.max(t.height,t.height))}initFromContext(t){this.gl=t,this.webGLVersion=t instanceof pe.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(t),this._renderer.runners.contextChange.emit(t);const e=this._renderer.view.canvas;e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(t,e){let i;const s=this.canvas;if(t===2&&(i=s.getContext("webgl2",e)),!i&&(i=s.getContext("webgl",e),!i))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=i,this.initFromContext(this.gl)}getExtensions(){const{gl:t}=this,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc"),rgtc:t.getExtension("EXT_texture_compression_rgtc"),loseContext:t.getExtension("WEBGL_lose_context")};if(this.webGLVersion===1)this.extensions={...e,drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:t.getExtension("ANGLE_instanced_arrays"),srgb:t.getExtension("EXT_sRGB")};else{this.extensions={...e,colorBufferFloat:t.getExtension("EXT_color_buffer_float")};const i=t.getExtension("WEBGL_provoking_vertex");i&&i.provokingVertexWEBGL(i.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(t){t.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{var e;this.gl.isContextLost()&&((e=this.extensions.loseContext)==null||e.restoreContext())},0))}handleContextRestored(){this.getExtensions(),this._renderer.runners.contextChange.emit(this.gl)}destroy(){var e;const t=this._renderer.view.canvas;this._renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),(e=this.extensions.loseContext)==null||e.loseContext()}forceContextLoss(){var t;(t=this.extensions.loseContext)==null||t.loseContext(),this._contextLossForced=!0}validateContext(t){const e=t.getContextAttributes();e&&!e.stencil&&Xt("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=this.supports,s=this.webGLVersion===2,o=this.extensions;i.uint32Indices=s||!!o.uint32ElementIndex,i.uniformBufferObject=s,i.vertexArrayObject=s||!!o.vertexArrayObject,i.srgbTextures=s||!!o.srgb,i.nonPowOf2wrapping=s,i.nonPowOf2mipmaps=s,i.msaa=s,i.uint32Indices||Xt("Provided WebGL context does not support 32 index buffer, large scenes may not render correctly")}};hv.extension={type:[q.WebGLSystem],name:"context"};hv.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};let JA=hv;function fv(n,t){for(const e in n.attributes){const i=n.attributes[e],s=t[e];s?(i.format??(i.format=s.format),i.offset??(i.offset=s.offset),i.instance??(i.instance=s.instance)):Xt(`Attribute ${e} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}_5(n)}function _5(n){const{buffers:t,attributes:e}=n,i={},s={};for(const o in t){const h=t[o];i[h.uid]=0,s[h.uid]=0}for(const o in e){const h=e[o];i[h.buffer.uid]+=kl(h.format).stride}for(const o in e){const h=e[o];h.stride??(h.stride=i[h.buffer.uid]),h.start??(h.start=s[h.buffer.uid]),s[h.buffer.uid]+=kl(h.format).stride}}var vg=(n=>(n[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n))(vg||{}),dv=(n=>(n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n))(dv||{}),$A=(n=>(n[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n))($A||{}),Ae=(n=>(n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT",n))(Ae||{});const Y1={uint8x2:Ae.UNSIGNED_BYTE,uint8x4:Ae.UNSIGNED_BYTE,sint8x2:Ae.BYTE,sint8x4:Ae.BYTE,unorm8x2:Ae.UNSIGNED_BYTE,unorm8x4:Ae.UNSIGNED_BYTE,snorm8x2:Ae.BYTE,snorm8x4:Ae.BYTE,uint16x2:Ae.UNSIGNED_SHORT,uint16x4:Ae.UNSIGNED_SHORT,sint16x2:Ae.SHORT,sint16x4:Ae.SHORT,unorm16x2:Ae.UNSIGNED_SHORT,unorm16x4:Ae.UNSIGNED_SHORT,snorm16x2:Ae.SHORT,snorm16x4:Ae.SHORT,float16x2:Ae.HALF_FLOAT,float16x4:Ae.HALF_FLOAT,float32:Ae.FLOAT,float32x2:Ae.FLOAT,float32x3:Ae.FLOAT,float32x4:Ae.FLOAT,uint32:Ae.UNSIGNED_INT,uint32x2:Ae.UNSIGNED_INT,uint32x3:Ae.UNSIGNED_INT,uint32x4:Ae.UNSIGNED_INT,sint32:Ae.INT,sint32x2:Ae.INT,sint32x3:Ae.INT,sint32x4:Ae.INT};function tC(n){return Y1[n]??Y1.float32}const y5={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5};class pv{constructor(t){this._geometryVaoHash=Object.create(null),this._renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._renderer.renderableGC.addManagedHash(this,"_geometryVaoHash")}contextChange(){const t=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");const e=this._renderer.context.extensions.vertexArrayObject;e&&(t.createVertexArray=()=>e.createVertexArrayOES(),t.bindVertexArray=s=>e.bindVertexArrayOES(s),t.deleteVertexArray=s=>e.deleteVertexArrayOES(s));const i=this._renderer.context.extensions.vertexAttribDivisorANGLE;i&&(t.drawArraysInstanced=(s,o,h,f)=>{i.drawArraysInstancedANGLE(s,o,h,f)},t.drawElementsInstanced=(s,o,h,f,m)=>{i.drawElementsInstancedANGLE(s,o,h,f,m)},t.vertexAttribDivisor=(s,o)=>i.vertexAttribDivisorANGLE(s,o)),this._activeGeometry=null,this._activeVao=null,this._geometryVaoHash=Object.create(null)}bind(t,e){const i=this.gl;this._activeGeometry=t;const s=this.getVao(t,e);this._activeVao!==s&&(this._activeVao=s,i.bindVertexArray(s)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this._renderer.buffer;for(let i=0;i<t.buffers.length;i++){const s=t.buffers[i];e.updateBuffer(s)}}checkCompatibility(t,e){const i=t.attributes,s=e._attributeData;for(const o in s)if(!i[o])throw new Error(`shader and geometry incompatible, geometry missing the "${o}" attribute`)}getSignature(t,e){const i=t.attributes,s=e._attributeData,o=["g",t.uid];for(const h in i)s[h]&&o.push(h,s[h].location);return o.join("-")}getVao(t,e){var i;return((i=this._geometryVaoHash[t.uid])==null?void 0:i[e._key])||this.initGeometryVao(t,e)}initGeometryVao(t,e,i=!0){const s=this._renderer.gl,o=this._renderer.buffer;this._renderer.shader._getProgramData(e),this.checkCompatibility(t,e);const h=this.getSignature(t,e);this._geometryVaoHash[t.uid]||(this._geometryVaoHash[t.uid]=Object.create(null),t.on("destroy",this.onGeometryDestroy,this));const f=this._geometryVaoHash[t.uid];let m=f[h];if(m)return f[e._key]=m,m;fv(t,e._attributeData);const g=t.buffers;m=s.createVertexArray(),s.bindVertexArray(m);for(let b=0;b<g.length;b++){const x=g[b];o.bind(x)}return this.activateVao(t,e),f[e._key]=m,f[h]=m,s.bindVertexArray(null),m}onGeometryDestroy(t,e){const i=this._geometryVaoHash[t.uid],s=this.gl;if(i){if(e)for(const o in i)this._activeVao!==i[o]&&this.unbind(),s.deleteVertexArray(i[o]);this._geometryVaoHash[t.uid]=null}}destroyAll(t=!1){const e=this.gl;for(const i in this._geometryVaoHash){if(t)for(const s in this._geometryVaoHash[i]){const o=this._geometryVaoHash[i];this._activeVao!==o&&this.unbind(),e.deleteVertexArray(o[s])}this._geometryVaoHash[i]=null}}activateVao(t,e){var f;const i=this._renderer.gl,s=this._renderer.buffer,o=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);let h=null;for(const m in o){const g=o[m],b=g.buffer,x=s.getGlBuffer(b),E=e._attributeData[m];if(E){h!==x&&(s.bind(b),h=x);const A=E.location;i.enableVertexAttribArray(A);const R=kl(g.format),D=tC(g.format);if(((f=E.format)==null?void 0:f.substring(1,4))==="int"?i.vertexAttribIPointer(A,R.size,D,g.stride,g.offset):i.vertexAttribPointer(A,R.size,D,R.normalised,g.stride,g.offset),g.instance)if(this.hasInstance){const B=g.divisor??1;i.vertexAttribDivisor(A,B)}else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,i,s){const{gl:o}=this._renderer,h=this._activeGeometry,f=y5[t||h.topology];if(s??(s=h.instanceCount),h.indexBuffer){const m=h.indexBuffer.data.BYTES_PER_ELEMENT,g=m===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;s>1?o.drawElementsInstanced(f,e||h.indexBuffer.data.length,g,(i||0)*m,s):o.drawElements(f,e||h.indexBuffer.data.length,g,(i||0)*m)}else s>1?o.drawArraysInstanced(f,i||0,e||h.getSize(),s):o.drawArrays(f,i||0,e||h.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}}pv.extension={type:[q.WebGLSystem],name:"geometry"};const b5=new ec({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),mv=class eC{constructor(t){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=t}init(t={}){const{useBackBuffer:e,antialias:i}={...eC.defaultOptions,...t};this.useBackBuffer=e,this._antialias=i,this._renderer.context.supports.msaa||(Xt("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=Yr.for2d();const s=new jr({vertex:`
                attribute vec2 aPosition;
                out vec2 vUv;

                void main() {
                    gl_Position = vec4(aPosition, 0.0, 1.0);

                    vUv = (aPosition + 1.0) / 2.0;

                    // flip dem UVs
                    vUv.y = 1.0 - vUv.y;
                }`,fragment:`
                in vec2 vUv;
                out vec4 finalColor;

                uniform sampler2D uTexture;

                void main() {
                    finalColor = texture(uTexture, vUv);
                }`,name:"big-triangle"});this._bigTriangleShader=new Kr({glProgram:s,resources:{uTexture:Ct.WHITE.source}})}renderStart(t){const e=this._renderer.renderTarget.getRenderTarget(t.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!e.isRoot,this._useBackBufferThisRender){const i=this._renderer.renderTarget.getRenderTarget(t.target);this._targetTexture=i.colorTexture,t.target=this._getBackBufferTexture(i.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){const t=this._renderer;t.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(t.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,t.encoder.draw({geometry:b5,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(t){return this._backBufferTexture=this._backBufferTexture||new Ct({source:new Sn({width:t.width,height:t.height,resolution:t._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(t.width,t.height,t._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}};mv.extension={type:[q.WebGLSystem],name:"backBuffer",priority:1};mv.defaultOptions={useBackBuffer:!1};let nC=mv;class gv{constructor(t){this._colorMaskCache=15,this._renderer=t}setMask(t){this._colorMaskCache!==t&&(this._colorMaskCache=t,this._renderer.gl.colorMask(!!(t&8),!!(t&4),!!(t&2),!!(t&1)))}}gv.extension={type:[q.WebGLSystem],name:"colorMask"};class _v{constructor(t){this.commandFinished=Promise.resolve(),this._renderer=t}setGeometry(t,e){this._renderer.geometry.bind(t,e.glProgram)}finishRenderPass(){}draw(t){const e=this._renderer,{geometry:i,shader:s,state:o,skipSync:h,topology:f,size:m,start:g,instanceCount:b}=t;e.shader.bind(s,h),e.geometry.bind(i,e.shader._activeProgram),o&&e.state.set(o),e.geometry.draw(f,m,g,b??i.instanceCount)}destroy(){this._renderer=null}}_v.extension={type:[q.WebGLSystem],name:"encoder"};class yv{constructor(t){this._renderer=t}contextChange(){const t=this._renderer.gl;this.maxTextures=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.maxBatchableTextures=wb(this.maxTextures,t),this.maxUniformBindings=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS)}destroy(){}}yv.extension={type:[q.WebGLSystem],name:"limits"};class iC{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}}const Il=[];Il[On.NONE]=void 0;Il[On.DISABLED]={stencilWriteMask:0,stencilReadMask:0};Il[On.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}};Il[On.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}};Il[On.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}};Il[On.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"keep"},stencilBack:{compare:"not-equal",passOp:"keep"}};class bv{constructor(t){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:On.NONE},this._renderTargetStencilState=Object.create(null),t.renderTarget.onRenderTargetChange.add(this)}contextChange(t){this._gl=t,this._comparisonFuncMapping={always:t.ALWAYS,never:t.NEVER,equal:t.EQUAL,"not-equal":t.NOTEQUAL,less:t.LESS,"less-equal":t.LEQUAL,greater:t.GREATER,"greater-equal":t.GEQUAL},this._stencilOpsMapping={keep:t.KEEP,zero:t.ZERO,replace:t.REPLACE,invert:t.INVERT,"increment-clamp":t.INCR,"decrement-clamp":t.DECR,"increment-wrap":t.INCR_WRAP,"decrement-wrap":t.DECR_WRAP},this.resetState()}onRenderTargetChange(t){if(this._activeRenderTarget===t)return;this._activeRenderTarget=t;let e=this._renderTargetStencilState[t.uid];e||(e=this._renderTargetStencilState[t.uid]={stencilMode:On.DISABLED,stencilReference:0}),this.setStencilMode(e.stencilMode,e.stencilReference)}resetState(){this._stencilCache.enabled=!1,this._stencilCache.stencilMode=On.NONE,this._stencilCache.stencilReference=0}setStencilMode(t,e){const i=this._renderTargetStencilState[this._activeRenderTarget.uid],s=this._gl,o=Il[t],h=this._stencilCache;if(i.stencilMode=t,i.stencilReference=e,t===On.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,s.disable(s.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,s.enable(s.STENCIL_TEST)),(t!==h.stencilMode||h.stencilReference!==e)&&(h.stencilMode=t,h.stencilReference=e,s.stencilFunc(this._comparisonFuncMapping[o.stencilBack.compare],e,255),s.stencilOp(s.KEEP,s.KEEP,this._stencilOpsMapping[o.stencilBack.passOp]))}}bv.extension={type:[q.WebGLSystem],name:"stencil"};class vv{constructor(t){this._syncFunctionHash=Object.create(null),this._adaptor=t,this._systemCheck()}_systemCheck(){if(!Ab())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(t){const e=this.getUniformGroupData(t);t.buffer||(t.buffer=new Cr({data:new Float32Array(e.layout.size/4),usage:be.UNIFORM|be.COPY_DST}))}getUniformGroupData(t){return this._syncFunctionHash[t._signature]||this._initUniformGroup(t)}_initUniformGroup(t){const e=t._signature;let i=this._syncFunctionHash[e];if(!i){const s=Object.keys(t.uniformStructures).map(f=>t.uniformStructures[f]),o=this._adaptor.createUboElements(s),h=this._generateUboSync(o.uboElements);i=this._syncFunctionHash[e]={layout:o,syncFunction:h}}return this._syncFunctionHash[e]}_generateUboSync(t){return this._adaptor.generateUboSync(t)}syncUniformGroup(t,e,i){const s=this.getUniformGroupData(t);t.buffer||(t.buffer=new Cr({data:new Float32Array(s.layout.size/4),usage:be.UNIFORM|be.COPY_DST}));let o=null;return e||(e=t.buffer.data,o=t.buffer.dataInt32),i||(i=0),s.syncFunction(t.uniforms,e,o,i),!0}updateUniformGroup(t){if(t.isStatic&&!t._dirtyId)return!1;t._dirtyId=0;const e=this.syncUniformGroup(t);return t.buffer.update(),e}destroy(){this._syncFunctionHash=null}}const xv={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":16*2,"mat3x3<f32>":16*3,"mat4x4<f32>":16*4};function rC(n){const t=n.map(o=>({data:o,offset:0,size:0})),e=16;let i=0,s=0;for(let o=0;o<t.length;o++){const h=t[o];if(i=xv[h.data.type],!i)throw new Error(`Unknown type ${h.data.type}`);h.data.size>1&&(i=Math.max(i,e)*h.data.size);const f=i===12?16:i;h.size=i;const m=s%e;m>0&&e-m<f?s+=(e-m)%16:s+=(i-m%i)%i,h.offset=s,s+=i}return s=Math.ceil(s/16)*16,{uboElements:t,size:s}}const ko=[{type:"mat3x3<f32>",test:n=>n.value.a!==void 0,ubo:`
            var matrix = uv[name].toArray(true);
            data[offset] = matrix[0];
            data[offset + 1] = matrix[1];
            data[offset + 2] = matrix[2];
            data[offset + 4] = matrix[3];
            data[offset + 5] = matrix[4];
            data[offset + 6] = matrix[5];
            data[offset + 8] = matrix[6];
            data[offset + 9] = matrix[7];
            data[offset + 10] = matrix[8];
        `,uniform:`
            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
        `},{type:"vec4<f32>",test:n=>n.type==="vec4<f32>"&&n.size===1&&n.value.width!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
            data[offset + 2] = v.width;
            data[offset + 3] = v.height;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
                cv[0] = v.x;
                cv[1] = v.y;
                cv[2] = v.width;
                cv[3] = v.height;
                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
            }
        `},{type:"vec2<f32>",test:n=>n.type==="vec2<f32>"&&n.size===1&&n.value.x!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y) {
                cv[0] = v.x;
                cv[1] = v.y;
                gl.uniform2f(ud[name].location, v.x, v.y);
            }
        `},{type:"vec4<f32>",test:n=>n.type==="vec4<f32>"&&n.size===1&&n.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
            data[offset + 3] = v.alpha;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                cv[3] = v.alpha;
                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
            }
        `},{type:"vec3<f32>",test:n=>n.type==="vec3<f32>"&&n.size===1&&n.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
            }
        `}];function Sv(n,t,e,i){const s=[`
        var v = null;
        var v2 = null;
        var t = 0;
        var index = 0;
        var name = null;
        var arrayOffset = null;
    `];let o=0;for(let f=0;f<n.length;f++){const m=n[f],g=m.data.name;let b=!1,x=0;for(let E=0;E<ko.length;E++)if(ko[E].test(m.data)){x=m.offset/4,s.push(`name = "${g}";`,`offset += ${x-o};`,ko[E][t]||ko[E].ubo),b=!0;break}if(!b)if(m.data.size>1)x=m.offset/4,s.push(e(m,x-o));else{const E=i[m.data.type];x=m.offset/4,s.push(`
                    v = uv.${g};
                    offset += ${x-o};
                    ${E};
                `)}o=x}const h=s.join(`
`);return new Function("uv","data","dataInt32","offset",h)}function rh(n,t){return`
        for (let i = 0; i < ${n*t}; i++) {
            data[offset + (((i / ${n})|0) * 4) + (i % ${n})] = v[i];
        }
    `}const Ev={f32:`
        data[offset] = v;`,i32:`
        dataInt32[offset] = v;`,"vec2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];`,"vec3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];`,"vec4<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];`,"vec2<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];`,"vec3<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];`,"vec4<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];
        dataInt32[offset + 3] = v[3];`,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 4] = v[2];
        data[offset + 5] = v[3];`,"mat3x3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];
        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];`,"mat4x4<f32>":`
        for (let i = 0; i < 16; i++) {
            data[offset + i] = v[i];
        }`,"mat3x2<f32>":rh(3,2),"mat4x2<f32>":rh(4,2),"mat2x3<f32>":rh(2,3),"mat4x3<f32>":rh(4,3),"mat2x4<f32>":rh(2,4),"mat3x4<f32>":rh(3,4)},sC={...Ev,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];
    `};function aC(n,t){const e=Math.max(xv[n.data.type]/16,1),i=n.data.value.length/n.data.size,s=(4-i%4)%4,o=n.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
        v = uv.${n.data.name};
        offset += ${t};

        arrayOffset = offset;

        t = 0;

        for(var i=0; i < ${n.data.size*e}; i++)
        {
            for(var j = 0; j < ${i}; j++)
            {
                ${o}[arrayOffset++] = v[t++];
            }
            ${s!==0?`arrayOffset += ${s};`:""}
        }
    `}function lC(n){return Sv(n,"uboStd40",aC,Ev)}class Tv extends vv{constructor(){super({createUboElements:rC,generateUboSync:lC})}}Tv.extension={type:[q.WebGLSystem],name:"ubo"};class oC{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new Oe}init(t,e){this._renderer=t,this._renderTargetSystem=e,t.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new Oe}copyToTexture(t,e,i,s,o){const h=this._renderTargetSystem,f=this._renderer,m=h.getGpuRenderTarget(t),g=f.gl;return this.finishRenderPass(t),g.bindFramebuffer(g.FRAMEBUFFER,m.resolveTargetFramebuffer),f.texture.bind(e,0),g.copyTexSubImage2D(g.TEXTURE_2D,0,o.x,o.y,i.x,i.y,s.width,s.height),e}startRenderPass(t,e=!0,i,s){const o=this._renderTargetSystem,h=t.colorTexture,f=o.getGpuRenderTarget(t);let m=s.y;t.isRoot&&(m=h.pixelHeight-s.height),t.colorTextures.forEach(x=>{this._renderer.texture.unbind(x)});const g=this._renderer.gl;g.bindFramebuffer(g.FRAMEBUFFER,f.framebuffer);const b=this._viewPortCache;(b.x!==s.x||b.y!==m||b.width!==s.width||b.height!==s.height)&&(b.x=s.x,b.y=m,b.width=s.width,b.height=s.height,g.viewport(s.x,m,s.width,s.height)),!f.depthStencilRenderBuffer&&(t.stencil||t.depth)&&this._initStencil(f),this.clear(t,e,i)}finishRenderPass(t){const i=this._renderTargetSystem.getGpuRenderTarget(t);if(!i.msaa)return;const s=this._renderer.gl;s.bindFramebuffer(s.FRAMEBUFFER,i.resolveTargetFramebuffer),s.bindFramebuffer(s.READ_FRAMEBUFFER,i.framebuffer),s.blitFramebuffer(0,0,i.width,i.height,0,0,i.width,i.height,s.COLOR_BUFFER_BIT,s.NEAREST),s.bindFramebuffer(s.FRAMEBUFFER,i.framebuffer)}initGpuRenderTarget(t){const i=this._renderer.gl,s=new iC;return t.colorTexture instanceof Qa?(this._renderer.context.ensureCanvasSize(t.colorTexture.resource),s.framebuffer=null,s):(this._initColor(t,s),i.bindFramebuffer(i.FRAMEBUFFER,null),s)}destroyGpuRenderTarget(t){const e=this._renderer.gl;t.framebuffer&&(e.deleteFramebuffer(t.framebuffer),t.framebuffer=null),t.resolveTargetFramebuffer&&(e.deleteFramebuffer(t.resolveTargetFramebuffer),t.resolveTargetFramebuffer=null),t.depthStencilRenderBuffer&&(e.deleteRenderbuffer(t.depthStencilRenderBuffer),t.depthStencilRenderBuffer=null),t.msaaRenderBuffer.forEach(i=>{e.deleteRenderbuffer(i)}),t.msaaRenderBuffer=null}clear(t,e,i){if(!e)return;const s=this._renderTargetSystem;typeof e=="boolean"&&(e=e?Ar.ALL:Ar.NONE);const o=this._renderer.gl;if(e&Ar.COLOR){i??(i=s.defaultClearColor);const h=this._clearColorCache,f=i;(h[0]!==f[0]||h[1]!==f[1]||h[2]!==f[2]||h[3]!==f[3])&&(h[0]=f[0],h[1]=f[1],h[2]=f[2],h[3]=f[3],o.clearColor(f[0],f[1],f[2],f[3]))}o.clear(e)}resizeGpuRenderTarget(t){if(t.isRoot)return;const i=this._renderTargetSystem.getGpuRenderTarget(t);this._resizeColor(t,i),(t.stencil||t.depth)&&this._resizeStencil(i)}_initColor(t,e){const i=this._renderer,s=i.gl,o=s.createFramebuffer();if(e.resolveTargetFramebuffer=o,s.bindFramebuffer(s.FRAMEBUFFER,o),e.width=t.colorTexture.source.pixelWidth,e.height=t.colorTexture.source.pixelHeight,t.colorTextures.forEach((h,f)=>{const m=h.source;m.antialias&&(i.context.supports.msaa?e.msaa=!0:Xt("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),i.texture.bindSource(m,0);const b=i.texture.getGlSource(m).texture;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+f,3553,b,0)}),e.msaa){const h=s.createFramebuffer();e.framebuffer=h,s.bindFramebuffer(s.FRAMEBUFFER,h),t.colorTextures.forEach((f,m)=>{const g=s.createRenderbuffer();e.msaaRenderBuffer[m]=g})}else e.framebuffer=o;this._resizeColor(t,e)}_resizeColor(t,e){const i=t.colorTexture.source;if(e.width=i.pixelWidth,e.height=i.pixelHeight,t.colorTextures.forEach((s,o)=>{o!==0&&s.source.resize(i.width,i.height,i._resolution)}),e.msaa){const s=this._renderer,o=s.gl,h=e.framebuffer;o.bindFramebuffer(o.FRAMEBUFFER,h),t.colorTextures.forEach((f,m)=>{const g=f.source;s.texture.bindSource(g,0);const x=s.texture.getGlSource(g).internalFormat,E=e.msaaRenderBuffer[m];o.bindRenderbuffer(o.RENDERBUFFER,E),o.renderbufferStorageMultisample(o.RENDERBUFFER,4,x,g.pixelWidth,g.pixelHeight),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0+m,o.RENDERBUFFER,E)})}}_initStencil(t){if(t.framebuffer===null)return;const e=this._renderer.gl,i=e.createRenderbuffer();t.depthStencilRenderBuffer=i,e.bindRenderbuffer(e.RENDERBUFFER,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i),this._resizeStencil(t)}_resizeStencil(t){const e=this._renderer.gl;e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilRenderBuffer),t.msaa?e.renderbufferStorageMultisample(e.RENDERBUFFER,4,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,this._renderer.context.webGLVersion===2?e.DEPTH24_STENCIL8:e.DEPTH_STENCIL,t.width,t.height)}prerender(t){const e=t.colorTexture.resource;this._renderer.context.multiView&&Qa.test(e)&&this._renderer.context.ensureCanvasSize(e)}postrender(t){if(this._renderer.context.multiView&&Qa.test(t.colorTexture.resource)){const e=this._renderer.context.canvas,i=t.colorTexture;i.context2D.drawImage(e,0,i.pixelHeight-e.height)}}}function uC(n,t,e,i,s,o){const h=o?1:-1;return n.identity(),n.a=1/i*2,n.d=h*(1/s*2),n.tx=-1-t*n.a,n.ty=-h-e*n.d,n}const ah=new Map;function Av(n,t){if(!ah.has(n)){const e=new Ct({source:new Qa({resource:n,...t})}),i=()=>{ah.get(n)===e&&ah.delete(n)};e.once("destroy",i),e.source.once("destroy",i),ah.set(n,e)}return ah.get(n)}function v5(n){return ah.has(n)}function cC(n){const t=n.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement&&document.body.contains(t)}const hC=class fC{constructor(t={}){if(this.uid=rn("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,t={...fC.defaultOptions,...t},this.stencil=t.stencil,this.depth=t.depth,this.isRoot=t.isRoot,typeof t.colorTextures=="number"){this._managedColorTextures=!0;for(let e=0;e<t.colorTextures;e++)this.colorTextures.push(new Sn({width:t.width,height:t.height,resolution:t.resolution,antialias:t.antialias}))}else{this.colorTextures=[...t.colorTextures.map(i=>i.source)];const e=this.colorTexture.source;this.resize(e.width,e.height,e._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(t.depthStencilTexture||this.stencil)&&(t.depthStencilTexture instanceof Ct||t.depthStencilTexture instanceof Sn?this.depthStencilTexture=t.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){const t=this._size;return t[0]=this.pixelWidth,t[1]=this.pixelHeight,t}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(t){this.resize(t.width,t.height,t._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new Sn({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(t,e,i=this.resolution,s=!1){this.dirtyId++,this.colorTextures.forEach((o,h)=>{s&&h===0||o.source.resize(t,e,i)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(t,e,i)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(t=>{t.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}};hC.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1};let xg=hC;class Cv{constructor(t){this.rootViewPort=new Oe,this.viewport=new Oe,this.onRenderTargetChange=new Cb("onRenderTargetChange"),this.projectionMatrix=new Pt,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuRenderTargetHash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:t,clear:e,clearColor:i,frame:s}){var o,h;this._renderTargetStack.length=0,this.push(t,e,i,s),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=cC(this.rootRenderTarget),(h=(o=this.adaptor).prerender)==null||h.call(o,this.rootRenderTarget)}postrender(){var t,e;(e=(t=this.adaptor).postrender)==null||e.call(t,this.rootRenderTarget)}bind(t,e=!0,i,s){const o=this.getRenderTarget(t),h=this.renderTarget!==o;this.renderTarget=o,this.renderSurface=t;const f=this.getGpuRenderTarget(o);(o.pixelWidth!==f.width||o.pixelHeight!==f.height)&&(this.adaptor.resizeGpuRenderTarget(o),f.width=o.pixelWidth,f.height=o.pixelHeight);const m=o.colorTexture,g=this.viewport,b=m.pixelWidth,x=m.pixelHeight;if(!s&&t instanceof Ct&&(s=t.frame),s){const E=m._resolution;g.x=s.x*E+.5|0,g.y=s.y*E+.5|0,g.width=s.width*E+.5|0,g.height=s.height*E+.5|0}else g.x=0,g.y=0,g.width=b,g.height=x;return uC(this.projectionMatrix,0,0,g.width/m.resolution,g.height/m.resolution,!o.isRoot),this.adaptor.startRenderPass(o,e,i,g),h&&this.onRenderTargetChange.emit(o),o}clear(t,e=Ar.ALL,i){e&&(t&&(t=this.getRenderTarget(t)),this.adaptor.clear(t||this.renderTarget,e,i,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(t,e=Ar.ALL,i,s){const o=this.bind(t,e,i,s);return this._renderTargetStack.push({renderTarget:o,frame:s}),o}pop(){this._renderTargetStack.pop();const t=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(t.renderTarget,!1,null,t.frame)}getRenderTarget(t){return t.isTexture&&(t=t.source),this._renderSurfaceToRenderTargetHash.get(t)??this._initRenderTarget(t)}copyToTexture(t,e,i,s,o){i.x<0&&(s.width+=i.x,o.x-=i.x,i.x=0),i.y<0&&(s.height+=i.y,o.y-=i.y,i.y=0);const{pixelWidth:h,pixelHeight:f}=t;return s.width=Math.min(s.width,h-i.x),s.height=Math.min(s.height,f-i.y),this.adaptor.copyToTexture(t,e,i,s,o)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((t,e)=>{t!==e&&t.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(t){let e=null;return Qa.test(t)&&(t=Av(t).source),t instanceof xg?e=t:t instanceof Sn&&(e=new xg({colorTextures:[t]}),t.source instanceof Qa&&(e.isRoot=!0),t.once("destroy",()=>{e.destroy(),this._renderSurfaceToRenderTargetHash.delete(t);const i=this._gpuRenderTargetHash[e.uid];i&&(this._gpuRenderTargetHash[e.uid]=null,this.adaptor.destroyGpuRenderTarget(i))})),this._renderSurfaceToRenderTargetHash.set(t,e),e}getGpuRenderTarget(t){return this._gpuRenderTargetHash[t.uid]||(this._gpuRenderTargetHash[t.uid]=this.adaptor.initGpuRenderTarget(t))}resetState(){this.renderTarget=null,this.renderSurface=null}}class Bv extends Cv{constructor(t){super(t),this.adaptor=new oC,this.adaptor.init(t,this)}}Bv.extension={type:[q.WebGLSystem],name:"renderTarget"};class u_ extends ei{constructor({buffer:t,offset:e,size:i}){super(),this.uid=rn("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=rn("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=t,this.offset=e|0,this.size=i,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=rn("resource"),this.emit("change",this)}destroy(t=!1){this.destroyed=!0,t&&this.buffer.destroy(),this.emit("change",this),this.buffer=null}}function dC(n,t){const e=[],i=[`
        var g = s.groups;
        var sS = r.shader;
        var p = s.glProgram;
        var ugS = r.uniformGroup;
        var resources;
    `];let s=!1,o=0;const h=t._getProgramData(n.glProgram);for(const m in n.groups){const g=n.groups[m];e.push(`
            resources = g[${m}].resources;
        `);for(const b in g.resources){const x=g.resources[b];if(x instanceof Xn)if(x.ubo){const E=n._uniformBindMap[m][Number(b)];e.push(`
                        sS.bindUniformBlock(
                            resources[${b}],
                            '${E}',
                            ${n.glProgram._uniformBlockData[E].index}
                        );
                    `)}else e.push(`
                        ugS.updateUniformGroup(resources[${b}], p, sD);
                    `);else if(x instanceof u_){const E=n._uniformBindMap[m][Number(b)];e.push(`
                    sS.bindUniformBlock(
                        resources[${b}],
                        '${E}',
                        ${n.glProgram._uniformBlockData[E].index}
                    );
                `)}else if(x instanceof Sn){const E=n._uniformBindMap[m][b],A=h.uniformData[E];A&&(s||(s=!0,i.push(`
                        var tS = r.texture;
                        `)),t._gl.uniform1i(A.location,o),e.push(`
                        tS.bind(resources[${b}], ${o});
                    `),o++)}}}const f=[...i,...e].join(`
`);return new Function("r","s","sD",f)}class x5{}class pC{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}}function Fy(n,t,e){const i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}function L0(n){const t=new Array(n);for(let e=0;e<t.length;e++)t[e]=!1;return t}function Rv(n,t){switch(n){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return L0(2*t);case"bvec3":return L0(3*t);case"bvec4":return L0(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}let tg=null;const q1={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},S5={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"};function Mv(n,t){if(!tg){const e=Object.keys(q1);tg={};for(let i=0;i<e.length;++i){const s=e[i];tg[n[s]]=q1[s]}}return tg[t]}function mC(n,t){const e=Mv(n,t);return S5[e]||"float32"}function gC(n,t,e=!1){const i={},s=t.getProgramParameter(n,t.ACTIVE_ATTRIBUTES);for(let h=0;h<s;h++){const f=t.getActiveAttrib(n,h);if(f.name.startsWith("gl_"))continue;const m=mC(t,f.type);i[f.name]={location:0,format:m,stride:kl(m).stride,offset:0,instance:!1,start:0}}const o=Object.keys(i);if(e){o.sort((h,f)=>h>f?1:-1);for(let h=0;h<o.length;h++)i[o[h]].location=h,t.bindAttribLocation(n,h,o[h]);t.linkProgram(n)}else for(let h=0;h<o.length;h++)i[o[h]].location=t.getAttribLocation(n,o[h]);return i}function _C(n,t){if(!t.ACTIVE_UNIFORM_BLOCKS)return{};const e={},i=t.getProgramParameter(n,t.ACTIVE_UNIFORM_BLOCKS);for(let s=0;s<i;s++){const o=t.getActiveUniformBlockName(n,s),h=t.getUniformBlockIndex(n,o),f=t.getActiveUniformBlockParameter(n,s,t.UNIFORM_BLOCK_DATA_SIZE);e[o]={name:o,index:h,size:f}}return e}function yC(n,t){const e={},i=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(let s=0;s<i;s++){const o=t.getActiveUniform(n,s),h=o.name.replace(/\[.*?\]$/,""),f=!!o.name.match(/\[.*?\]$/),m=Mv(t,o.type);e[h]={name:h,index:s,type:m,size:o.size,isArray:f,value:Rv(m,o.size)}}return e}function j1(n,t){const e=n.getShaderSource(t).split(`
`).map((g,b)=>`${b}: ${g}`),i=n.getShaderInfoLog(t),s=i.split(`
`),o={},h=s.map(g=>parseFloat(g.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(g=>g&&!o[g]?(o[g]=!0,!0):!1),f=[""];h.forEach(g=>{e[g-1]=`%c${e[g-1]}%c`,f.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const m=e.join(`
`);f[0]=m,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...f),console.groupEnd()}function bC(n,t,e,i){n.getProgramParameter(t,n.LINK_STATUS)||(n.getShaderParameter(e,n.COMPILE_STATUS)||j1(n,e),n.getShaderParameter(i,n.COMPILE_STATUS)||j1(n,i),console.error("PixiJS Error: Could not initialize shader."),n.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(t)))}function vC(n,t){const e=Fy(n,n.VERTEX_SHADER,t.vertex),i=Fy(n,n.FRAGMENT_SHADER,t.fragment),s=n.createProgram();n.attachShader(s,e),n.attachShader(s,i);const o=t.transformFeedbackVaryings;o&&(typeof n.transformFeedbackVaryings!="function"?Xt("TransformFeedback is not supported but TransformFeedbackVaryings are given."):n.transformFeedbackVaryings(s,o.names,o.bufferMode==="separate"?n.SEPARATE_ATTRIBS:n.INTERLEAVED_ATTRIBS)),n.linkProgram(s),n.getProgramParameter(s,n.LINK_STATUS)||bC(n,s,e,i),t._attributeData=gC(s,n,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertex)),t._uniformData=yC(s,n),t._uniformBlockData=_C(s,n),n.deleteShader(e),n.deleteShader(i);const h={};for(const m in t._uniformData){const g=t._uniformData[m];h[m]={location:n.getUniformLocation(s,m),value:Rv(g.type,g.size)}}return new pC(s,h)}const eg={textureCount:0,blockIndex:0};class Dv{constructor(t){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_programDataHash")}contextChange(t){this._gl=t,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null}bind(t,e){if(this._setProgram(t.glProgram),e)return;eg.textureCount=0,eg.blockIndex=0;let i=this._shaderSyncFunctions[t.glProgram._key];i||(i=this._shaderSyncFunctions[t.glProgram._key]=this._generateShaderSync(t,this)),this._renderer.buffer.nextBindBase(!!t.glProgram.transformFeedbackVaryings),i(this._renderer,t,eg)}updateUniformGroup(t){this._renderer.uniformGroup.updateUniformGroup(t,this._activeProgram,eg)}bindUniformBlock(t,e,i=0){const s=this._renderer.buffer,o=this._getProgramData(this._activeProgram),h=t._bufferResource;h||this._renderer.ubo.updateUniformGroup(t);const f=t.buffer,m=s.updateBuffer(f),g=s.freeLocationForBufferBase(m);if(h){const{offset:x,size:E}=t;x===0&&E===f.data.byteLength?s.bindBufferBase(m,g):s.bindBufferRange(m,g,x)}else s.getLastBindBaseLocation(m)!==g&&s.bindBufferBase(m,g);const b=this._activeProgram._uniformBlockData[e].index;o.uniformBlockBindings[i]!==g&&(o.uniformBlockBindings[i]=g,this._renderer.gl.uniformBlockBinding(o.program,b,g))}_setProgram(t){if(this._activeProgram===t)return;this._activeProgram=t;const e=this._getProgramData(t);this._gl.useProgram(e.program)}_getProgramData(t){return this._programDataHash[t._key]||this._createProgramData(t)}_createProgramData(t){const e=t._key;return this._programDataHash[e]=vC(this._gl,t),this._programDataHash[e]}destroy(){for(const t of Object.keys(this._programDataHash))this._programDataHash[t].destroy(),this._programDataHash[t]=null;this._programDataHash=null}_generateShaderSync(t,e){return dC(t,e)}resetState(){this._activeProgram=null}}Dv.extension={type:[q.WebGLSystem],name:"shader"};const xC={f32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1f(location, v);
        }`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2f(location, v[0], v[1]);
        }`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3f(location, v[0], v[1], v[2]);
        }`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4f(location, v[0], v[1], v[2], v[3]);
        }`,i32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,u32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1ui(location, v);
        }`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2ui(location, v[0], v[1]);
        }`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3ui(location, v[0], v[1], v[2]);
        }`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
        }`,bool:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},SC={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"};function EC(n,t){const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
        var name = null;
    `];for(const i in n.uniforms){if(!t[i]){n.uniforms[i]instanceof Xn?n.uniforms[i].ubo?e.push(`
                        renderer.shader.bindUniformBlock(uv.${i}, "${i}");
                    `):e.push(`
                        renderer.shader.updateUniformGroup(uv.${i});
                    `):n.uniforms[i]instanceof u_&&e.push(`
                        renderer.shader.bindBufferResource(uv.${i}, "${i}");
                    `);continue}const s=n.uniformStructures[i];let o=!1;for(let h=0;h<ko.length;h++){const f=ko[h];if(s.type===f.type&&f.test(s)){e.push(`name = "${i}";`,ko[h].uniform),o=!0;break}}if(!o){const f=(s.size===1?xC:SC)[s.type].replace("location",`ud["${i}"].location`);e.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${f};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}class wv{constructor(t){this._cache={},this._uniformGroupSyncHash={},this._renderer=t,this.gl=null,this._cache={}}contextChange(t){this.gl=t}updateUniformGroup(t,e,i){const s=this._renderer.shader._getProgramData(e);(!t.isStatic||t._dirtyId!==s.uniformDirtyGroups[t.uid])&&(s.uniformDirtyGroups[t.uid]=t._dirtyId,this._getUniformSyncFunction(t,e)(s.uniformData,t.uniforms,this._renderer,i))}_getUniformSyncFunction(t,e){var i;return((i=this._uniformGroupSyncHash[t._signature])==null?void 0:i[e._key])||this._createUniformSyncFunction(t,e)}_createUniformSyncFunction(t,e){const i=this._uniformGroupSyncHash[t._signature]||(this._uniformGroupSyncHash[t._signature]={}),s=this._getSignature(t,e._uniformData,"u");return this._cache[s]||(this._cache[s]=this._generateUniformsSync(t,e._uniformData)),i[e._key]=this._cache[s],i[e._key]}_generateUniformsSync(t,e){return EC(t,e)}_getSignature(t,e,i){const s=t.uniforms,o=[`${i}-`];for(const h in s)o.push(h),e[h]&&o.push(e[h].type);return o.join("-")}destroy(){this._renderer=null,this._cache=null}}wv.extension={type:[q.WebGLSystem],name:"uniformGroup"};function E5(n){return n=n.replaceAll("texture2D","texture").replaceAll("gl_FragColor","finalColor").replaceAll("varying","in"),n=`
        out vec4 finalColor;
    ${n}
    `,n}const T5={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function A5(n){return T5[n]}function TC(n){const t={};if(t.normal=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t.add=[n.ONE,n.ONE],t.multiply=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],t.screen=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],t.none=[0,0],t["normal-npm"]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],t["add-npm"]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],t["screen-npm"]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],t.erase=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],!(n instanceof pe.get().getWebGLRenderingContext()))t.min=[n.ONE,n.ONE,n.ONE,n.ONE,n.MIN,n.MIN],t.max=[n.ONE,n.ONE,n.ONE,n.ONE,n.MAX,n.MAX];else{const i=n.getExtension("EXT_blend_minmax");i&&(t.min=[n.ONE,n.ONE,n.ONE,n.ONE,i.MIN_EXT,i.MIN_EXT],t.max=[n.ONE,n.ONE,n.ONE,n.ONE,i.MAX_EXT,i.MAX_EXT])}return t}const C5=0,B5=1,R5=2,M5=3,D5=4,w5=5,AC=class Vy{constructor(t){this._invertFrontFace=!1,this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[C5]=this.setBlend,this.map[B5]=this.setOffset,this.map[R5]=this.setCullFace,this.map[M5]=this.setDepthTest,this.map[D5]=this.setFrontFace,this.map[w5]=this.setDepthMask,this.checks=[],this.defaultState=Yr.for2d(),t.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(t){this._invertFrontFace=!t.isRoot,this._cullFace?this.setFrontFace(this._frontFace):this._frontFaceDirty=!0}contextChange(t){this.gl=t,this.blendModesMap=TC(t),this.resetState()}set(t){if(t||(t=this.defaultState),this.stateId!==t.data){let e=this.stateId^t.data,i=0;for(;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t||(t=this.defaultState);for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this._updateCheck(Vy._checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this._updateCheck(Vy._checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this._cullFace=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE),this._cullFace&&this._frontFaceDirty&&this.setFrontFace(this._frontFace)}setFrontFace(t){this._frontFace=t,this._frontFaceDirty=!1;const e=this._invertFrontFace?!t:t;this._glFrontFace!==e&&(this._glFrontFace=e,this.gl.frontFace(this.gl[e?"CW":"CCW"]))}setBlendMode(t){if(this.blendModesMap[t]||(t="normal"),t===this.blendMode)return;this.blendMode=t;const e=this.blendModesMap[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}resetState(){this._glFrontFace=!1,this._frontFace=!1,this._cullFace=!1,this._frontFaceDirty=!1,this._invertFrontFace=!1,this.gl.frontFace(this.gl.CCW),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(t,e){const i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)}static _checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static _checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}};AC.extension={type:[q.WebGLSystem],name:"state"};let CC=AC;class BC{constructor(t){this.target=dv.TEXTURE_2D,this.texture=t,this.width=-1,this.height=-1,this.type=Ae.UNSIGNED_BYTE,this.internalFormat=vg.RGBA,this.format=vg.RGBA,this.samplerType=0}}const RC={id:"buffer",upload(n,t,e){t.width===n.width||t.height===n.height?e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,t.format,t.type,n.resource):e.texImage2D(t.target,0,t.internalFormat,n.width,n.height,0,t.format,t.type,n.resource),t.width=n.width,t.height=n.height}},U5={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},MC={id:"compressed",upload(n,t,e){e.pixelStorei(e.UNPACK_ALIGNMENT,4);let i=n.pixelWidth,s=n.pixelHeight;const o=!!U5[n.format];for(let h=0;h<n.resource.length;h++){const f=n.resource[h];o?e.compressedTexImage2D(e.TEXTURE_2D,h,t.internalFormat,i,s,0,f):e.texImage2D(e.TEXTURE_2D,h,t.internalFormat,i,s,0,t.format,t.type,f),i=Math.max(i>>1,1),s=Math.max(s>>1,1)}}},Uv={id:"image",upload(n,t,e,i){const s=t.width,o=t.height,h=n.pixelWidth,f=n.pixelHeight,m=n.resourceWidth,g=n.resourceHeight;m<h||g<f?((s!==h||o!==f)&&e.texImage2D(t.target,0,t.internalFormat,h,f,0,t.format,t.type,null),i===2?e.texSubImage2D(e.TEXTURE_2D,0,0,0,m,g,t.format,t.type,n.resource):e.texSubImage2D(e.TEXTURE_2D,0,0,0,t.format,t.type,n.resource)):s===h&&o===f?e.texSubImage2D(e.TEXTURE_2D,0,0,0,t.format,t.type,n.resource):i===2?e.texImage2D(t.target,0,t.internalFormat,h,f,0,t.format,t.type,n.resource):e.texImage2D(t.target,0,t.internalFormat,t.format,t.type,n.resource),t.width=h,t.height=f}},DC={id:"video",upload(n,t,e,i){if(!n.isValid){e.texImage2D(t.target,0,t.internalFormat,1,1,0,t.format,t.type,null);return}Uv.upload(n,t,e,i)}},ky={linear:9729,nearest:9728},wC={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},hg={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},UC={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519};function Xy(n,t,e,i,s,o,h,f){const m=o;if(!f||n.addressModeU!=="repeat"||n.addressModeV!=="repeat"||n.addressModeW!=="repeat"){const g=hg[h?"clamp-to-edge":n.addressModeU],b=hg[h?"clamp-to-edge":n.addressModeV],x=hg[h?"clamp-to-edge":n.addressModeW];t[s](m,t.TEXTURE_WRAP_S,g),t[s](m,t.TEXTURE_WRAP_T,b),t.TEXTURE_WRAP_R&&t[s](m,t.TEXTURE_WRAP_R,x)}if((!f||n.magFilter!=="linear")&&t[s](m,t.TEXTURE_MAG_FILTER,ky[n.magFilter]),e){if(!f||n.mipmapFilter!=="linear"){const g=wC[n.minFilter][n.mipmapFilter];t[s](m,t.TEXTURE_MIN_FILTER,g)}}else t[s](m,t.TEXTURE_MIN_FILTER,ky[n.minFilter]);if(i&&n.maxAnisotropy>1){const g=Math.min(n.maxAnisotropy,t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));t[s](m,i.TEXTURE_MAX_ANISOTROPY_EXT,g)}n.compare&&t[s](m,t.TEXTURE_COMPARE_FUNC,UC[n.compare])}function OC(n){return{r8unorm:n.RED,r8snorm:n.RED,r8uint:n.RED,r8sint:n.RED,r16uint:n.RED,r16sint:n.RED,r16float:n.RED,rg8unorm:n.RG,rg8snorm:n.RG,rg8uint:n.RG,rg8sint:n.RG,r32uint:n.RED,r32sint:n.RED,r32float:n.RED,rg16uint:n.RG,rg16sint:n.RG,rg16float:n.RG,rgba8unorm:n.RGBA,"rgba8unorm-srgb":n.RGBA,rgba8snorm:n.RGBA,rgba8uint:n.RGBA,rgba8sint:n.RGBA,bgra8unorm:n.RGBA,"bgra8unorm-srgb":n.RGBA,rgb9e5ufloat:n.RGB,rgb10a2unorm:n.RGBA,rg11b10ufloat:n.RGB,rg32uint:n.RG,rg32sint:n.RG,rg32float:n.RG,rgba16uint:n.RGBA,rgba16sint:n.RGBA,rgba16float:n.RGBA,rgba32uint:n.RGBA,rgba32sint:n.RGBA,rgba32float:n.RGBA,stencil8:n.STENCIL_INDEX8,depth16unorm:n.DEPTH_COMPONENT,depth24plus:n.DEPTH_COMPONENT,"depth24plus-stencil8":n.DEPTH_STENCIL,depth32float:n.DEPTH_COMPONENT,"depth32float-stencil8":n.DEPTH_STENCIL}}function PC(n,t){let e={},i=n.RGBA;return n instanceof pe.get().getWebGLRenderingContext()?t.srgb&&(e={"rgba8unorm-srgb":t.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":t.srgb.SRGB8_ALPHA8_EXT}):(e={"rgba8unorm-srgb":n.SRGB8_ALPHA8,"bgra8unorm-srgb":n.SRGB8_ALPHA8},i=n.RGBA8),{r8unorm:n.R8,r8snorm:n.R8_SNORM,r8uint:n.R8UI,r8sint:n.R8I,r16uint:n.R16UI,r16sint:n.R16I,r16float:n.R16F,rg8unorm:n.RG8,rg8snorm:n.RG8_SNORM,rg8uint:n.RG8UI,rg8sint:n.RG8I,r32uint:n.R32UI,r32sint:n.R32I,r32float:n.R32F,rg16uint:n.RG16UI,rg16sint:n.RG16I,rg16float:n.RG16F,rgba8unorm:n.RGBA,...e,rgba8snorm:n.RGBA8_SNORM,rgba8uint:n.RGBA8UI,rgba8sint:n.RGBA8I,bgra8unorm:i,rgb9e5ufloat:n.RGB9_E5,rgb10a2unorm:n.RGB10_A2,rg11b10ufloat:n.R11F_G11F_B10F,rg32uint:n.RG32UI,rg32sint:n.RG32I,rg32float:n.RG32F,rgba16uint:n.RGBA16UI,rgba16sint:n.RGBA16I,rgba16float:n.RGBA16F,rgba32uint:n.RGBA32UI,rgba32sint:n.RGBA32I,rgba32float:n.RGBA32F,stencil8:n.STENCIL_INDEX8,depth16unorm:n.DEPTH_COMPONENT16,depth24plus:n.DEPTH_COMPONENT24,"depth24plus-stencil8":n.DEPTH24_STENCIL8,depth32float:n.DEPTH_COMPONENT32F,"depth32float-stencil8":n.DEPTH32F_STENCIL8,...t.s3tc?{"bc1-rgba-unorm":t.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":t.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":t.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{},...t.s3tc_sRGB?{"bc1-rgba-unorm-srgb":t.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":t.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":t.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{},...t.rgtc?{"bc4-r-unorm":t.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":t.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":t.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":t.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{},...t.bptc?{"bc6h-rgb-float":t.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":t.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":t.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":t.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{},...t.etc?{"etc2-rgb8unorm":t.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":t.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":t.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":t.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":t.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":t.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":t.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":t.etc.COMPRESSED_SIGNED_RG11_EAC}:{},...t.astc?{"astc-4x4-unorm":t.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":t.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":t.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":t.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":t.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":t.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":t.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{}}}function GC(n){return{r8unorm:n.UNSIGNED_BYTE,r8snorm:n.BYTE,r8uint:n.UNSIGNED_BYTE,r8sint:n.BYTE,r16uint:n.UNSIGNED_SHORT,r16sint:n.SHORT,r16float:n.HALF_FLOAT,rg8unorm:n.UNSIGNED_BYTE,rg8snorm:n.BYTE,rg8uint:n.UNSIGNED_BYTE,rg8sint:n.BYTE,r32uint:n.UNSIGNED_INT,r32sint:n.INT,r32float:n.FLOAT,rg16uint:n.UNSIGNED_SHORT,rg16sint:n.SHORT,rg16float:n.HALF_FLOAT,rgba8unorm:n.UNSIGNED_BYTE,"rgba8unorm-srgb":n.UNSIGNED_BYTE,rgba8snorm:n.BYTE,rgba8uint:n.UNSIGNED_BYTE,rgba8sint:n.BYTE,bgra8unorm:n.UNSIGNED_BYTE,"bgra8unorm-srgb":n.UNSIGNED_BYTE,rgb9e5ufloat:n.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:n.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:n.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:n.UNSIGNED_INT,rg32sint:n.INT,rg32float:n.FLOAT,rgba16uint:n.UNSIGNED_SHORT,rgba16sint:n.SHORT,rgba16float:n.HALF_FLOAT,rgba32uint:n.UNSIGNED_INT,rgba32sint:n.INT,rgba32float:n.FLOAT,stencil8:n.UNSIGNED_BYTE,depth16unorm:n.UNSIGNED_SHORT,depth24plus:n.UNSIGNED_INT,"depth24plus-stencil8":n.UNSIGNED_INT_24_8,depth32float:n.FLOAT,"depth32float-stencil8":n.FLOAT_32_UNSIGNED_INT_24_8_REV}}function O5(n){n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));const t=n.length;for(let e=0;e<t;e+=4){const i=n[e+3];if(i!==0){const s=255.001/i;n[e]=n[e]*s+.5,n[e+1]=n[e+1]*s+.5,n[e+2]=n[e+2]*s+.5}}}const P5=4;class Ov{constructor(t){this.managedTextures=[],this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:Uv,buffer:RC,video:DC,compressed:MC},this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_glTextures"),this._renderer.renderableGC.addManagedHash(this,"_glSamplers")}contextChange(t){this._gl=t,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=PC(t,this._renderer.context.extensions),this._mapFormatToType=GC(t),this._mapFormatToFormat=OC(t)),this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let e=0;e<16;e++)this.bind(Ct.EMPTY,e)}initSource(t){this.bind(t)}bind(t,e=0){const i=t.source;t?(this.bindSource(i,e),this._useSeparateSamplers&&this._bindSampler(i.style,e)):(this.bindSource(null,e),this._useSeparateSamplers&&this._bindSampler(null,e))}bindSource(t,e=0){const i=this._gl;if(t._touched=this._renderer.textureGC.count,this._boundTextures[e]!==t){this._boundTextures[e]=t,this._activateLocation(e),t||(t=Ct.EMPTY.source);const s=this.getGlSource(t);i.bindTexture(s.target,s.texture)}}_bindSampler(t,e=0){const i=this._gl;if(!t){this._boundSamplers[e]=null,i.bindSampler(e,null);return}const s=this._getGlSampler(t);this._boundSamplers[e]!==s&&(this._boundSamplers[e]=s,i.bindSampler(e,s))}unbind(t){const e=t.source,i=this._boundTextures,s=this._gl;for(let o=0;o<i.length;o++)if(i[o]===e){this._activateLocation(o);const h=this.getGlSource(e);s.bindTexture(h.target,null),i[o]=null}}_activateLocation(t){this._activeTextureLocation!==t&&(this._activeTextureLocation=t,this._gl.activeTexture(this._gl.TEXTURE0+t))}_initSource(t){const e=this._gl,i=new BC(e.createTexture());if(i.type=this._mapFormatToType[t.format],i.internalFormat=this._mapFormatToInternalFormat[t.format],i.format=this._mapFormatToFormat[t.format],t.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||t.isPowerOfTwo)){const s=Math.max(t.width,t.height);t.mipLevelCount=Math.floor(Math.log2(s))+1}return this._glTextures[t.uid]=i,this.managedTextures.includes(t)||(t.on("update",this.onSourceUpdate,this),t.on("resize",this.onSourceUpdate,this),t.on("styleChange",this.onStyleChange,this),t.on("destroy",this.onSourceDestroy,this),t.on("unload",this.onSourceUnload,this),t.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(t)),this.onSourceUpdate(t),this.updateStyle(t,!1),i}onStyleChange(t){this.updateStyle(t,!1)}updateStyle(t,e){const i=this._gl,s=this.getGlSource(t);i.bindTexture(i.TEXTURE_2D,s.texture),this._boundTextures[this._activeTextureLocation]=t,Xy(t.style,i,t.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",i.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!t.isPowerOfTwo,e)}onSourceUnload(t){const e=this._glTextures[t.uid];e&&(this.unbind(t),this._glTextures[t.uid]=null,this._gl.deleteTexture(e.texture))}onSourceUpdate(t){const e=this._gl,i=this.getGlSource(t);e.bindTexture(e.TEXTURE_2D,i.texture),this._boundTextures[this._activeTextureLocation]=t;const s=t.alphaMode==="premultiply-alpha-on-upload";this._premultiplyAlpha!==s&&(this._premultiplyAlpha=s,e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s)),this._uploads[t.uploadMethodId]?this._uploads[t.uploadMethodId].upload(t,i,e,this._renderer.context.webGLVersion):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.pixelWidth,t.pixelHeight,0,e.RGBA,e.UNSIGNED_BYTE,null),t.autoGenerateMipmaps&&t.mipLevelCount>1&&this.onUpdateMipmaps(t,!1)}onUpdateMipmaps(t,e=!0){e&&this.bindSource(t,0);const i=this.getGlSource(t);this._gl.generateMipmap(i.target)}onSourceDestroy(t){t.off("destroy",this.onSourceDestroy,this),t.off("update",this.onSourceUpdate,this),t.off("resize",this.onSourceUpdate,this),t.off("unload",this.onSourceUnload,this),t.off("styleChange",this.onStyleChange,this),t.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(t),1),this.onSourceUnload(t)}_initSampler(t){const e=this._gl,i=this._gl.createSampler();return this._glSamplers[t._resourceId]=i,Xy(t,e,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",i,!1,!0),this._glSamplers[t._resourceId]}_getGlSampler(t){return this._glSamplers[t._resourceId]||this._initSampler(t)}getGlSource(t){return this._glTextures[t.uid]||this._initSource(t)}generateCanvas(t){const{pixels:e,width:i,height:s}=this.getPixels(t),o=pe.get().createCanvas();o.width=i,o.height=s;const h=o.getContext("2d");if(h){const f=h.createImageData(i,s);f.data.set(e),h.putImageData(f,0,0)}return o}getPixels(t){const e=t.source.resolution,i=t.frame,s=Math.max(Math.round(i.width*e),1),o=Math.max(Math.round(i.height*e),1),h=new Uint8Array(P5*s*o),f=this._renderer,m=f.renderTarget.getRenderTarget(t),g=f.renderTarget.getGpuRenderTarget(m),b=f.gl;return b.bindFramebuffer(b.FRAMEBUFFER,g.resolveTargetFramebuffer),b.readPixels(Math.round(i.x*e),Math.round(i.y*e),s,o,b.RGBA,b.UNSIGNED_BYTE,h),{pixels:new Uint8ClampedArray(h.buffer),width:s,height:o}}destroy(){this.managedTextures.slice().forEach(t=>this.onSourceDestroy(t)),this.managedTextures=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(Ct.EMPTY.source),this._boundSamplers=Object.create(null);const t=this._gl;this._premultiplyAlpha=!1,t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha)}}Ov.extension={type:[q.WebGLSystem],name:"texture"};class Pv{contextChange(t){const e=new Xn({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new Pt,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),i=t.limits.maxBatchableTextures,s=Rh({name:"graphics",bits:[Qg,Jg(i),o_,Dh]});this.shader=new Kr({glProgram:s,resources:{localUniforms:e,batchSamplers:$g(i)}})}execute(t,e){const i=e.context,s=i.customShader||this.shader,o=t.renderer,h=o.graphicsContext,{batcher:f,instructions:m}=h.getContextRenderData(i);s.groups[0]=o.globalUniforms.bindGroup,o.state.set(t.state),o.shader.bind(s),o.geometry.bind(f.geometry,s.glProgram);const g=m.instructions;for(let b=0;b<m.instructionSize;b++){const x=g[b];if(x.size){for(let E=0;E<x.textures.count;E++)o.texture.bind(x.textures.textures[E],E);o.geometry.draw(x.topology,x.size,x.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}}Pv.extension={type:[q.WebGLPipesAdaptor],name:"graphics"};class Gv{init(){const t=Rh({name:"mesh",bits:[o_,WA,Dh]});this._shader=new Kr({glProgram:t,resources:{uTexture:Ct.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new Pt}}}})}execute(t,e){const i=t.renderer;let s=e._shader;if(s){if(!s.glProgram){Xt("Mesh shader has no glProgram",e.shader);return}}else{s=this._shader;const o=e.texture,h=o.source;s.resources.uTexture=h,s.resources.uSampler=h.style,s.resources.textureUniforms.uniforms.uTextureMatrix=o.textureMatrix.mapCoord}s.groups[100]=i.globalUniforms.bindGroup,s.groups[101]=t.localUniformsBindGroup,i.encoder.draw({geometry:e._geometry,shader:s,state:e.state})}destroy(){this._shader.destroy(!0),this._shader=null}}Gv.extension={type:[q.WebGLPipesAdaptor],name:"mesh"};class Nv{constructor(t){this._renderer=t}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(t,e){this._renderer.renderPipes.batch.break(e),e.add(t)}execute(t){t.isRenderable&&t.render(this._renderer)}destroy(){this._renderer=null}}Nv.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"customRender"};class Wd{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}destroy(){}}function Sg(n,t){const e=n.instructionSet,i=e.instructions;for(let s=0;s<e.instructionSize;s++){const o=i[s];t[o.renderPipeId].execute(o)}}const G5=new Pt;class zv{constructor(t){this._renderer=t}addRenderGroup(t,e){t.isCachedAsTexture?this._addRenderableCacheAsTexture(t,e):this._addRenderableDirect(t,e)}execute(t){t.isRenderable&&(t.isCachedAsTexture?this._executeCacheAsTexture(t):this._executeDirect(t))}destroy(){this._renderer=null}_addRenderableDirect(t,e){this._renderer.renderPipes.batch.break(e),t._batchableRenderGroup&&(mi.return(t._batchableRenderGroup),t._batchableRenderGroup=null),e.add(t)}_addRenderableCacheAsTexture(t,e){const i=t._batchableRenderGroup??(t._batchableRenderGroup=mi.get(Wd));i.renderable=t.root,i.transform=t.root.relativeGroupTransform,i.texture=t.texture,i.bounds=t._textureBounds,e.add(t),this._renderer.renderPipes.batch.addToBatch(i,e)}_executeCacheAsTexture(t){if(t.textureNeedsUpdate){t.textureNeedsUpdate=!1;const e=G5.identity().translate(-t._textureBounds.x,-t._textureBounds.y);this._renderer.renderTarget.push(t.texture,!0,null,t.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:e,worldColor:4294967295}),Sg(t,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}t._batchableRenderGroup._batcher.updateElement(t._batchableRenderGroup),t._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(t){this._renderer.globalUniforms.push({worldTransformMatrix:t.inverseParentTextureTransform,worldColor:t.worldColorAlpha}),Sg(t,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}}zv.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"renderGroup"};function Eg(n,t){t||(t=0);for(let e=t;e<n.length&&n[e];e++)n[e]=null}const N5=new kn,K1=fh|Cd|Lg;function Lv(n,t=!1){NC(n);const e=n.childrenToUpdate,i=n.updateTick++;for(const s in e){const o=Number(s),h=e[s],f=h.list,m=h.index;for(let g=0;g<m;g++){const b=f[g];b.parentRenderGroup===n&&b.relativeRenderGroupDepth===o&&Hv(b,i,0)}Eg(f,m),h.index=0}if(t)for(let s=0;s<n.renderGroupChildren.length;s++)Lv(n.renderGroupChildren[s],t)}function NC(n){const t=n.root;let e;if(n.renderGroupParent){const i=n.renderGroupParent;n.worldTransform.appendFrom(t.relativeGroupTransform,i.worldTransform),n.worldColor=Ad(t.groupColor,i.worldColor),e=t.groupAlpha*i.worldAlpha}else n.worldTransform.copyFrom(t.localTransform),n.worldColor=t.localColor,e=t.localAlpha;e=e<0?0:e>1?1:e,n.worldAlpha=e,n.worldColorAlpha=n.worldColor+((e*255|0)<<24)}function Hv(n,t,e){if(t===n.updateTick)return;n.updateTick=t,n.didChange=!1;const i=n.localTransform;n.updateLocalTransform();const s=n.parent;if(s&&!s.renderGroup?(e|=n._updateFlags,n.relativeGroupTransform.appendFrom(i,s.relativeGroupTransform),e&K1&&W1(n,s,e)):(e=n._updateFlags,n.relativeGroupTransform.copyFrom(i),e&K1&&W1(n,N5,e)),!n.renderGroup){const o=n.children,h=o.length;for(let g=0;g<h;g++)Hv(o[g],t,e);const f=n.parentRenderGroup,m=n;m.renderPipeId&&!f.structureDidChange&&f.updateRenderable(m)}}function W1(n,t,e){if(e&Cd){n.groupColor=Ad(n.localColor,t.groupColor);let i=n.localAlpha*t.groupAlpha;i=i<0?0:i>1?1:i,n.groupAlpha=i,n.groupColorAlpha=n.groupColor+((i*255|0)<<24)}e&Lg&&(n.groupBlendMode=n.localBlendMode==="inherit"?t.groupBlendMode:n.localBlendMode),e&fh&&(n.globalDisplayStatus=n.localDisplayStatus&t.globalDisplayStatus),n._updateFlags=0}function zC(n,t){const{list:e,index:i}=n.childrenRenderablesToUpdate;let s=!1;for(let o=0;o<i;o++){const h=e[o];if(s=t[h.renderPipeId].validateRenderable(h),s)break}return n.structureDidChange=s,s}const z5=new Pt;class Fv{constructor(t){this._renderer=t}render({container:t,transform:e}){const i=t.parent,s=t.renderGroup.renderGroupParent;t.parent=null,t.renderGroup.renderGroupParent=null;const o=this._renderer;let h=z5;e&&(h=h.copyFrom(t.renderGroup.localTransform),t.renderGroup.localTransform.copyFrom(e));const f=o.renderPipes;this._updateCachedRenderGroups(t.renderGroup,null),this._updateRenderGroups(t.renderGroup),o.globalUniforms.start({worldTransformMatrix:e?t.renderGroup.localTransform:t.renderGroup.worldTransform,worldColor:t.renderGroup.worldColorAlpha}),Sg(t.renderGroup,f),f.uniformBatch&&f.uniformBatch.renderEnd(),e&&t.renderGroup.localTransform.copyFrom(h),t.parent=i,t.renderGroup.renderGroupParent=s}destroy(){this._renderer=null}_updateCachedRenderGroups(t,e){if(t.isCachedAsTexture){if(!t.updateCacheTexture)return;e=t}t._parentCacheAsTextureRenderGroup=e;for(let i=t.renderGroupChildren.length-1;i>=0;i--)this._updateCachedRenderGroups(t.renderGroupChildren[i],e);if(t.invalidateMatrices(),t.isCachedAsTexture){if(t.textureNeedsUpdate){const i=t.root.getLocalBounds();i.ceil();const s=t.texture;t.texture&&Vn.returnTexture(t.texture);const o=this._renderer,h=t.textureOptions.resolution||o.view.resolution,f=t.textureOptions.antialias??o.view.antialias;t.texture=Vn.getOptimalTexture(i.width,i.height,h,f),t._textureBounds||(t._textureBounds=new ti),t._textureBounds.copyFrom(i),s!==t.texture&&t.renderGroupParent&&(t.renderGroupParent.structureDidChange=!0)}}else t.texture&&(Vn.returnTexture(t.texture),t.texture=null)}_updateRenderGroups(t){const e=this._renderer,i=e.renderPipes;if(t.runOnRender(e),t.instructionSet.renderPipes=i,t.structureDidChange?Eg(t.childrenRenderablesToUpdate.list,0):zC(t,i),Lv(t),t.structureDidChange?(t.structureDidChange=!1,this._buildInstructions(t,e)):this._updateRenderables(t),t.childrenRenderablesToUpdate.index=0,e.renderPipes.batch.upload(t.instructionSet),!(t.isCachedAsTexture&&!t.textureNeedsUpdate))for(let s=0;s<t.renderGroupChildren.length;s++)this._updateRenderGroups(t.renderGroupChildren[s])}_updateRenderables(t){const{list:e,index:i}=t.childrenRenderablesToUpdate;for(let s=0;s<i;s++){const o=e[s];o.didViewUpdate&&t.updateRenderable(o)}Eg(e,i)}_buildInstructions(t,e){const i=t.root,s=t.instructionSet;s.reset();const o=e.renderPipes?e:e.batch.renderer,h=o.renderPipes;h.batch.buildStart(s),h.blendMode.buildStart(),h.colorMask.buildStart(),i.sortableChildren&&i.sortChildren(),i.collectRenderablesWithEffects(s,o,null),h.batch.buildEnd(s),h.blendMode.buildEnd(s)}}Fv.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"renderGroup"};class Vv{constructor(t){this._renderer=t}addRenderable(t,e){const i=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,i),this._renderer.renderPipes.batch.addToBatch(i,e)}updateRenderable(t){const e=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,e),e._batcher.updateElement(e)}validateRenderable(t){const e=this._getGpuSprite(t);return!e._batcher.checkAndUpdateTexture(e,t._texture)}_updateBatchableSprite(t,e){e.bounds=t.visualBounds,e.texture=t._texture}_getGpuSprite(t){return t._gpuData[this._renderer.uid]||this._initGPUSprite(t)}_initGPUSprite(t){const e=new Wd;return e.renderable=t,e.transform=t.groupTransform,e.texture=t._texture,e.bounds=t.visualBounds,e.roundPixels=this._renderer._roundPixels|t._roundPixels,t._gpuData[this._renderer.uid]=e,e}destroy(){this._renderer=null}}Vv.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"sprite"};const kv=class LC{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Ce(0),this.color=this._backgroundColor,this.alpha=1}init(t){t={...LC.defaultOptions,...t},this.clearBeforeRender=t.clearBeforeRender,this.color=t.background||t.backgroundColor||this._backgroundColor,this.alpha=t.backgroundAlpha,this._backgroundColor.setAlpha(t.backgroundAlpha)}get color(){return this._backgroundColor}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}};kv.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"background",priority:0};kv.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};let HC=kv;const xd={};De.handle(q.BlendMode,n=>{if(!n.name)throw new Error("BlendMode extension must have a name property");xd[n.name]=n.ref},n=>{delete xd[n.name]});class Xv{constructor(t){this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=t,this._renderer.runners.prerender.add(this)}prerender(){this._activeBlendMode="normal",this._isAdvanced=!1}setBlendMode(t,e,i){if(this._activeBlendMode===e){this._isAdvanced&&this._renderableList.push(t);return}this._activeBlendMode=e,this._isAdvanced&&this._endAdvancedBlendMode(i),this._isAdvanced=!!xd[e],this._isAdvanced&&(this._beginAdvancedBlendMode(i),this._renderableList.push(t))}_beginAdvancedBlendMode(t){this._renderer.renderPipes.batch.break(t);const e=this._activeBlendMode;if(!xd[e]){Xt(`Unable to assign BlendMode: '${e}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);return}let i=this._filterHash[e];i||(i=this._filterHash[e]=new Td,i.filters=[new xd[e]]);const s={renderPipeId:"filter",action:"pushFilter",renderables:[],filterEffect:i,canBundle:!1};this._renderableList=s.renderables,t.add(s)}_endAdvancedBlendMode(t){this._renderableList=null,this._renderer.renderPipes.batch.break(t),t.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(t){this._isAdvanced&&this._endAdvancedBlendMode(t)}destroy(){this._renderer=null,this._renderableList=null;for(const t in this._filterHash)this._filterHash[t].destroy();this._filterHash=null}}Xv.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"blendMode"};const H0={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},Iv=class FC{constructor(t){this._renderer=t}_normalizeOptions(t,e={}){return t instanceof kn||t instanceof Ct?{target:t,...e}:{...e,...t}}async image(t){const e=new Image;return e.src=await this.base64(t),e}async base64(t){t=this._normalizeOptions(t,FC.defaultImageOptions);const{format:e,quality:i}=t,s=this.canvas(t);if(s.toBlob!==void 0)return new Promise((o,h)=>{s.toBlob(f=>{if(!f){h(new Error("ICanvas.toBlob failed!"));return}const m=new FileReader;m.onload=()=>o(m.result),m.onerror=h,m.readAsDataURL(f)},H0[e],i)});if(s.toDataURL!==void 0)return s.toDataURL(H0[e],i);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:H0[e],quality:i});return new Promise((h,f)=>{const m=new FileReader;m.onload=()=>h(m.result),m.onerror=f,m.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t){t=this._normalizeOptions(t);const e=t.target,i=this._renderer;if(e instanceof Ct)return i.texture.generateCanvas(e);const s=i.textureGenerator.generateTexture(t),o=i.texture.generateCanvas(s);return s.destroy(!0),o}pixels(t){t=this._normalizeOptions(t);const e=t.target,i=this._renderer,s=e instanceof Ct?e:i.textureGenerator.generateTexture(t),o=i.texture.getPixels(s);return e instanceof kn&&s.destroy(!0),o}texture(t){return t=this._normalizeOptions(t),t.target instanceof Ct?t.target:this._renderer.textureGenerator.generateTexture(t)}download(t){t=this._normalizeOptions(t);const e=this.canvas(t),i=document.createElement("a");i.download=t.filename??"image.png",i.href=e.toDataURL("image/png"),document.body.appendChild(i),i.click(),document.body.removeChild(i)}log(t){const e=t.width??200;t=this._normalizeOptions(t);const i=this.canvas(t),s=i.toDataURL();console.log(`[Pixi Texture] ${i.width}px ${i.height}px`);const o=["font-size: 1px;",`padding: ${e}px 300px;`,`background: url(${s}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",o)}destroy(){this._renderer=null}};Iv.extension={type:[q.WebGLSystem,q.WebGPUSystem],name:"extract"};Iv.defaultImageOptions={format:"png",quality:1};let VC=Iv;class c_ extends Ct{static create(t){return new c_({source:new Sn(t)})}resize(t,e,i){return this.source.resize(t,e,i),this}}const L5=new Oe,H5=new ti,F5=[0,0,0,0];class Yv{constructor(t){this._renderer=t}generateTexture(t){var g;t instanceof kn&&(t={target:t,frame:void 0,textureSourceOptions:{},resolution:void 0});const e=t.resolution||this._renderer.resolution,i=t.antialias||this._renderer.view.antialias,s=t.target;let o=t.clearColor;o?o=Array.isArray(o)&&o.length===4?o:Ce.shared.setValue(o).toArray():o=F5;const h=((g=t.frame)==null?void 0:g.copyTo(L5))||zg(s,H5).rectangle;h.width=Math.max(h.width,1/e)|0,h.height=Math.max(h.height,1/e)|0;const f=c_.create({...t.textureSourceOptions,width:h.width,height:h.height,resolution:e,antialias:i}),m=Pt.shared.translate(-h.x,-h.y);return this._renderer.render({container:s,transform:m,target:f,clearColor:o}),f.source.updateMipmaps(),f}destroy(){this._renderer=null}}Yv.extension={type:[q.WebGLSystem,q.WebGPUSystem],name:"textureGenerator"};function V5(n,t,e,i){e[i++]=(n>>16&255)/255,e[i++]=(n>>8&255)/255,e[i++]=(n&255)/255,e[i++]=t}function Uh(n,t,e){const i=(n>>24&255)/255;t[e++]=(n&255)/255*i,t[e++]=(n>>8&255)/255*i,t[e++]=(n>>16&255)/255*i,t[e++]=i}class qv{constructor(t){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=t}reset(){this._stackIndex=0;for(let t=0;t<this._activeUniforms.length;t++)this._uniformsPool.push(this._activeUniforms[t]);for(let t=0;t<this._activeBindGroups.length;t++)this._bindGroupPool.push(this._activeBindGroups[t]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(t){this.reset(),this.push(t)}bind({size:t,projectionMatrix:e,worldTransformMatrix:i,worldColor:s,offset:o}){const h=this._renderer.renderTarget.renderTarget,f=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{worldTransformMatrix:new Pt,worldColor:4294967295,offset:new Xe},m={projectionMatrix:e||this._renderer.renderTarget.projectionMatrix,resolution:t||h.size,worldTransformMatrix:i||f.worldTransformMatrix,worldColor:s||f.worldColor,offset:o||f.offset,bindGroup:null},g=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(g);const b=g.uniforms;b.uProjectionMatrix=m.projectionMatrix,b.uResolution=m.resolution,b.uWorldTransformMatrix.copyFrom(m.worldTransformMatrix),b.uWorldTransformMatrix.tx-=m.offset.x,b.uWorldTransformMatrix.ty-=m.offset.y,Uh(m.worldColor,b.uWorldColorAlpha,0),g.update();let x;this._renderer.renderPipes.uniformBatch?x=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(g,!1):(x=this._bindGroupPool.pop()||new Za,this._activeBindGroups.push(x),x.setResource(g,0)),m.bindGroup=x,this._currentGlobalUniformData=m}push(t){this.bind(t),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===Br.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new Xn({uProjectionMatrix:{value:new Pt,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new Pt,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null}}qv.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"globalUniforms"};let k5=1;class jv{constructor(){this._tasks=[],this._offset=0}init(){Pn.system.add(this._update,this)}repeat(t,e,i=!0){const s=k5++;let o=0;return i&&(this._offset+=1e3,o=this._offset),this._tasks.push({func:t,duration:e,start:performance.now(),offset:o,last:performance.now(),repeat:!0,id:s}),s}cancel(t){for(let e=0;e<this._tasks.length;e++)if(this._tasks[e].id===t){this._tasks.splice(e,1);return}}_update(){const t=performance.now();for(let e=0;e<this._tasks.length;e++){const i=this._tasks[e];if(t-i.offset-i.last>=i.duration){const s=t-i.start;i.func(s),i.last=t}}}destroy(){Pn.system.remove(this._update,this),this._tasks.length=0}}jv.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"scheduler",priority:0};let Q1=!1;function kC(n){if(!Q1){if(pe.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){const t=[`%c  %c  %c  %c  %c PixiJS %c v${wd} (${n}) http://www.pixijs.com/

`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...t)}else globalThis.console&&globalThis.console.log(`PixiJS ${wd} - ${n} - http://www.pixijs.com/`);Q1=!0}}class h_{constructor(t){this._renderer=t}init(t){if(t.hello){let e=this._renderer.name;this._renderer.type===Br.WEBGL&&(e+=` ${this._renderer.context.webGLVersion}`),kC(e)}}}h_.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"hello",priority:-2};h_.defaultOptions={hello:!1};function XC(n){let t=!1;for(const i in n)if(n[i]==null){t=!0;break}if(!t)return n;const e=Object.create(null);for(const i in n){const s=n[i];s&&(e[i]=s)}return e}function IC(n){let t=0;for(let e=0;e<n.length;e++)n[e]==null?t++:n[e-t]=n[e];return n.length-=t,n}let X5=0;const Kv=class YC{constructor(t){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=t}init(t){t={...YC.defaultOptions,...t},this.maxUnusedTime=t.renderableGCMaxUnusedTime,this._frequency=t.renderableGCFrequency,this.enabled=t.renderableGCActive}get enabled(){return!!this._handler}set enabled(t){this.enabled!==t&&(t?(this._handler=this._renderer.scheduler.repeat(()=>this.run(),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat(()=>{for(const e of this._managedHashes)e.context[e.hash]=XC(e.context[e.hash])},this._frequency),this._arrayHandler=this._renderer.scheduler.repeat(()=>{for(const e of this._managedArrays)IC(e.context[e.hash])},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(t,e){this._managedHashes.push({context:t,hash:e})}addManagedArray(t,e){this._managedArrays.push({context:t,hash:e})}prerender({container:t}){this._now=performance.now(),t.renderGroup.gcTick=X5++,this._updateInstructionGCTick(t.renderGroup,t.renderGroup.gcTick)}addRenderable(t){this.enabled&&(t._lastUsed===-1&&(this._managedRenderables.push(t),t.once("destroyed",this._removeRenderable,this)),t._lastUsed=this._now)}run(){var o;const t=this._now,e=this._managedRenderables,i=this._renderer.renderPipes;let s=0;for(let h=0;h<e.length;h++){const f=e[h];if(f===null){s++;continue}const m=f.renderGroup??f.parentRenderGroup,g=((o=m==null?void 0:m.instructionSet)==null?void 0:o.gcTick)??-1;if(((m==null?void 0:m.gcTick)??0)===g&&(f._lastUsed=t),t-f._lastUsed>this.maxUnusedTime){if(!f.destroyed){const b=i;m&&(m.structureDidChange=!0),b[f.renderPipeId].destroyRenderable(f)}f._lastUsed=-1,s++,f.off("destroyed",this._removeRenderable,this)}else e[h-s]=f}e.length-=s}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(t){const e=this._managedRenderables.indexOf(t);e>=0&&(t.off("destroyed",this._removeRenderable,this),this._managedRenderables[e]=null)}_updateInstructionGCTick(t,e){t.instructionSet.gcTick=e;for(const i of t.renderGroupChildren)this._updateInstructionGCTick(i,e)}};Kv.extension={type:[q.WebGLSystem,q.WebGPUSystem],name:"renderableGC",priority:0};Kv.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4};let qC=Kv;const Wv=class jC{constructor(t){this._renderer=t,this.count=0,this.checkCount=0}init(t){t={...jC.defaultOptions,...t},this.checkCountMax=t.textureGCCheckCountMax,this.maxIdle=t.textureGCAMaxIdle??t.textureGCMaxIdle,this.active=t.textureGCActive}postrender(){this._renderer.renderingToScreen&&(this.count++,this.active&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this._renderer.texture.managedTextures;for(let e=0;e<t.length;e++){const i=t[e];i.autoGarbageCollect&&i.resource&&i._touched>-1&&this.count-i._touched>this.maxIdle&&(i._touched=-1,i.unload())}}destroy(){this._renderer=null}};Wv.extension={type:[q.WebGLSystem,q.WebGPUSystem],name:"textureGC"};Wv.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:60*60,textureGCCheckCountMax:600};let KC=Wv;const Qv=class WC{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(t){this.texture.source.autoDensity=t}get resolution(){return this.texture.source._resolution}set resolution(t){this.texture.source.resize(this.texture.source.width,this.texture.source.height,t)}init(t){t={...WC.defaultOptions,...t},t.view&&(wt(Jt,"ViewSystem.view has been renamed to ViewSystem.canvas"),t.canvas=t.view),this.screen=new Oe(0,0,t.width,t.height),this.canvas=t.canvas||pe.get().createCanvas(),this.antialias=!!t.antialias,this.texture=Av(this.canvas,t),this.renderTarget=new xg({colorTextures:[this.texture],depth:!!t.depth,isRoot:!0}),this.texture.source.transparent=t.backgroundAlpha<1,this.resolution=t.resolution}resize(t,e,i){this.texture.source.resize(t,e,i),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(t=!1){(typeof t=="boolean"?t:!!(t!=null&&t.removeView))&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}};Qv.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"view",priority:0};Qv.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1};let QC=Qv;const Zv=[HC,qv,h_,QC,Fv,KC,Yv,VC,Rb,qC,jv],Jv=[Xv,av,Vv,zv,lv,uv,ov,Nv],I5=[...Zv,Tv,nC,JA,yv,cv,Ov,Bv,pv,wv,Dv,_v,CC,bv,gv],Y5=[...Jv],q5=[iv,Gv,Pv],ZC=[],JC=[],$C=[];De.handleByNamedList(q.WebGLSystem,ZC);De.handleByNamedList(q.WebGLPipes,JC);De.handleByNamedList(q.WebGLPipesAdaptor,$C);De.add(...I5,...Y5,...q5);class tB extends Vd{constructor(){const t={name:"webgl",type:Br.WEBGL,systems:ZC,renderPipes:JC,renderPipeAdaptors:$C};super(t)}}const j5=Object.freeze(Object.defineProperty({__proto__:null,WebGLRenderer:tB},Symbol.toStringTag,{value:"Module"}));class $v{constructor(t){this._hash=Object.create(null),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_hash")}contextChange(t){this._gpu=t}getBindGroup(t,e,i){return t._updateKey(),this._hash[t._key]||this._createBindGroup(t,e,i)}_createBindGroup(t,e,i){const s=this._gpu.device,o=e.layout[i],h=[],f=this._renderer;for(const b in o){const x=t.resources[b]??t.resources[o[b]];let E;if(x._resourceType==="uniformGroup"){const A=x;f.ubo.updateUniformGroup(A);const R=A.buffer;E={buffer:f.buffer.getGPUBuffer(R),offset:0,size:R.descriptor.size}}else if(x._resourceType==="buffer"){const A=x;E={buffer:f.buffer.getGPUBuffer(A),offset:0,size:A.descriptor.size}}else if(x._resourceType==="bufferResource"){const A=x;E={buffer:f.buffer.getGPUBuffer(A.buffer),offset:A.offset,size:A.size}}else if(x._resourceType==="textureSampler"){const A=x;E=f.texture.getGpuSampler(A)}else if(x._resourceType==="textureSource"){const A=x;E=f.texture.getGpuSource(A).createView({})}h.push({binding:o[b],resource:E})}const m=f.shader.getProgramData(e).bindGroups[i],g=s.createBindGroup({layout:m,entries:h});return this._hash[t._key]=g,g}destroy(){for(const t of Object.keys(this._hash))this._hash[t]=null;this._hash=null,this._renderer=null}}$v.extension={type:[q.WebGPUSystem],name:"bindGroup"};class t2{constructor(t){this._gpuBuffers=Object.create(null),this._managedBuffers=[],t.renderableGC.addManagedHash(this,"_gpuBuffers")}contextChange(t){this._gpu=t}getGPUBuffer(t){return this._gpuBuffers[t.uid]||this.createGPUBuffer(t)}updateBuffer(t){const e=this._gpuBuffers[t.uid]||this.createGPUBuffer(t),i=t.data;return t._updateID&&i&&(t._updateID=0,this._gpu.device.queue.writeBuffer(e,0,i.buffer,0,(t._updateSize||i.byteLength)+3&-4)),e}destroyAll(){for(const t in this._gpuBuffers)this._gpuBuffers[t].destroy();this._gpuBuffers={}}createGPUBuffer(t){this._gpuBuffers[t.uid]||(t.on("update",this.updateBuffer,this),t.on("change",this.onBufferChange,this),t.on("destroy",this.onBufferDestroy,this),this._managedBuffers.push(t));const e=this._gpu.device.createBuffer(t.descriptor);return t._updateID=0,t.data&&(gg(t.data.buffer,e.getMappedRange()),e.unmap()),this._gpuBuffers[t.uid]=e,e}onBufferChange(t){this._gpuBuffers[t.uid].destroy(),t._updateID=0,this._gpuBuffers[t.uid]=this.createGPUBuffer(t)}onBufferDestroy(t){this._managedBuffers.splice(this._managedBuffers.indexOf(t),1),this._destroyBuffer(t)}destroy(){this._managedBuffers.forEach(t=>this._destroyBuffer(t)),this._managedBuffers=null,this._gpuBuffers=null}_destroyBuffer(t){this._gpuBuffers[t.uid].destroy(),t.off("update",this.updateBuffer,this),t.off("change",this.onBufferChange,this),t.off("destroy",this.onBufferDestroy,this),this._gpuBuffers[t.uid]=null}}t2.extension={type:[q.WebGPUSystem],name:"buffer"};class eB{constructor({minUniformOffsetAlignment:t}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=t,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(t){if(t>this._minUniformOffsetAlignment/4)throw new Error(`UniformBufferBatch: array is too large: ${t*4}`);const e=this.byteIndex;let i=e+t*4;if(i=Math.ceil(i/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,i>this.data.length*4)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=i,e}addGroup(t){const e=this.addEmptyGroup(t.length);for(let i=0;i<t.length;i++)this.data[e/4+i]=t[i];return e}destroy(){this.data=null}}class e2{constructor(t){this._colorMaskCache=15,this._renderer=t}setMask(t){this._colorMaskCache!==t&&(this._colorMaskCache=t,this._renderer.pipeline.setColorMask(t))}destroy(){this._renderer=null,this._colorMaskCache=null}}e2.extension={type:[q.WebGPUSystem],name:"colorMask"};class f_{constructor(t){this._renderer=t}async init(t){return this._initPromise?this._initPromise:(this._initPromise=this._createDeviceAndAdaptor(t).then(e=>{this.gpu=e,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise)}contextChange(t){this._renderer.gpu=t}async _createDeviceAndAdaptor(t){const e=await pe.get().getNavigator().gpu.requestAdapter({powerPreference:t.powerPreference,forceFallbackAdapter:t.forceFallbackAdapter}),i=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter(o=>e.features.has(o)),s=await e.requestDevice({requiredFeatures:i});return{adapter:e,device:s}}destroy(){this.gpu=null,this._renderer=null}}f_.extension={type:[q.WebGPUSystem],name:"device"};f_.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1};class n2{constructor(t){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=t}renderStart(){this.commandFinished=new Promise(t=>{this._resolveCommandFinished=t}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(t){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(t.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(t){this.renderPassEncoder.setViewport(t.x,t.y,t.width,t.height,0,1)}setPipelineFromGeometryProgramAndState(t,e,i,s){const o=this._renderer.pipeline.getPipeline(t,e,i,s);this.setPipeline(o)}setPipeline(t){this._boundPipeline!==t&&(this._boundPipeline=t,this.renderPassEncoder.setPipeline(t))}_setVertexBuffer(t,e){this._boundVertexBuffer[t]!==e&&(this._boundVertexBuffer[t]=e,this.renderPassEncoder.setVertexBuffer(t,this._renderer.buffer.updateBuffer(e)))}_setIndexBuffer(t){if(this._boundIndexBuffer===t)return;this._boundIndexBuffer=t;const e=t.data.BYTES_PER_ELEMENT===2?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(t),e)}resetBindGroup(t){this._boundBindGroup[t]=null}setBindGroup(t,e,i){if(this._boundBindGroup[t]===e)return;this._boundBindGroup[t]=e,e._touch(this._renderer.textureGC.count);const s=this._renderer.bindGroup.getBindGroup(e,i,t);this.renderPassEncoder.setBindGroup(t,s)}setGeometry(t,e){const i=this._renderer.pipeline.getBufferNamesToBind(t,e);for(const s in i)this._setVertexBuffer(s,t.attributes[i[s]].buffer);t.indexBuffer&&this._setIndexBuffer(t.indexBuffer)}_setShaderBindGroups(t,e){for(const i in t.groups){const s=t.groups[i];e||this._syncBindGroup(s),this.setBindGroup(i,s,t.gpuProgram)}}_syncBindGroup(t){for(const e in t.resources){const i=t.resources[e];i.isUniformGroup&&this._renderer.ubo.updateUniformGroup(i)}}draw(t){const{geometry:e,shader:i,state:s,topology:o,size:h,start:f,instanceCount:m,skipSync:g}=t;this.setPipelineFromGeometryProgramAndState(e,i.gpuProgram,s,o),this.setGeometry(e,i.gpuProgram),this._setShaderBindGroups(i,g),e.indexBuffer?this.renderPassEncoder.drawIndexed(h||e.indexBuffer.data.length,m??e.instanceCount,f||0):this.renderPassEncoder.draw(h||e.getSize(),m??e.instanceCount,f||0)}finishRenderPass(){this.renderPassEncoder&&(this.renderPassEncoder.end(),this.renderPassEncoder=null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){const t=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1]);this.renderPassEncoder=this.commandEncoder.beginRenderPass(t);const e=this._boundPipeline,i={...this._boundVertexBuffer},s=this._boundIndexBuffer,o={...this._boundBindGroup};this._clearCache();const h=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(h.x,h.y,h.width,h.height,0,1),this.setPipeline(e);for(const f in i)this._setVertexBuffer(f,i[f]);for(const f in o)this.setBindGroup(f,o[f],null);this._setIndexBuffer(s)}_clearCache(){for(let t=0;t<16;t++)this._boundBindGroup[t]=null,this._boundVertexBuffer[t]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(t){this._gpu=t}}n2.extension={type:[q.WebGPUSystem],name:"encoder",priority:1};class i2{constructor(t){this._renderer=t}contextChange(){this.maxTextures=this._renderer.device.gpu.device.limits.maxSampledTexturesPerShaderStage,this.maxBatchableTextures=this.maxTextures}destroy(){}}i2.extension={type:[q.WebGPUSystem],name:"limits"};class r2{constructor(t){this._renderTargetStencilState=Object.create(null),this._renderer=t,t.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(t){let e=this._renderTargetStencilState[t.uid];e||(e=this._renderTargetStencilState[t.uid]={stencilMode:On.DISABLED,stencilReference:0}),this._activeRenderTarget=t,this.setStencilMode(e.stencilMode,e.stencilReference)}setStencilMode(t,e){const i=this._renderTargetStencilState[this._activeRenderTarget.uid];i.stencilMode=t,i.stencilReference=e;const s=this._renderer;s.pipeline.setStencilMode(t),s.encoder.renderPassEncoder.setStencilReference(e)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}}r2.extension={type:[q.WebGPUSystem],name:"stencil"};const Sd={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}};function nB(n){const t=n.map(i=>({data:i,offset:0,size:0}));let e=0;for(let i=0;i<t.length;i++){const s=t[i];let o=Sd[s.data.type].size;const h=Sd[s.data.type].align;if(!Sd[s.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${s.data.type}`);s.data.size>1&&(o=Math.max(o,h)*s.data.size),e=Math.ceil(e/h)*h,s.size=o,s.offset=e,e+=o}return e=Math.ceil(e/16)*16,{uboElements:t,size:e}}function iB(n,t){const{size:e,align:i}=Sd[n.data.type],s=(i-e)/4,o=n.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
         v = uv.${n.data.name};
         ${t!==0?`offset += ${t};`:""}

         arrayOffset = offset;

         t = 0;

         for(var i=0; i < ${n.data.size*(e/4)}; i++)
         {
             for(var j = 0; j < ${e/4}; j++)
             {
                 ${o}[arrayOffset++] = v[t++];
             }
             ${s!==0?`arrayOffset += ${s};`:""}
         }
     `}function rB(n){return Sv(n,"uboWgsl",iB,sC)}class s2 extends vv{constructor(){super({createUboElements:nB,generateUboSync:rB})}}s2.extension={type:[q.WebGPUSystem],name:"ubo"};const Lo=128;class a2{constructor(t){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_bindGroupHash"),this._batchBuffer=new eB({minUniformOffsetAlignment:Lo});const e=256/Lo;for(let i=0;i<e;i++){let s=be.UNIFORM|be.COPY_DST;i===0&&(s|=be.COPY_SRC),this._buffers.push(new Cr({data:this._batchBuffer.data,usage:s}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){for(const t in this._bindGroupHash)this._bindGroupHash[t]=null;this._batchBuffer.clear()}getUniformBindGroup(t,e){if(!e&&this._bindGroupHash[t.uid])return this._bindGroupHash[t.uid];this._renderer.ubo.ensureUniformGroup(t);const i=t.buffer.data,s=this._batchBuffer.addEmptyGroup(i.length);return this._renderer.ubo.syncUniformGroup(t,this._batchBuffer.data,s/4),this._bindGroupHash[t.uid]=this._getBindGroup(s/Lo),this._bindGroupHash[t.uid]}getUboResource(t){this._renderer.ubo.updateUniformGroup(t);const e=t.buffer.data,i=this._batchBuffer.addGroup(e);return this._getBufferResource(i/Lo)}getArrayBindGroup(t){const e=this._batchBuffer.addGroup(t);return this._getBindGroup(e/Lo)}getArrayBufferResource(t){const i=this._batchBuffer.addGroup(t)/Lo;return this._getBufferResource(i)}_getBufferResource(t){if(!this._bufferResources[t]){const e=this._buffers[t%2];this._bufferResources[t]=new u_({buffer:e,offset:(t/2|0)*256,size:Lo})}return this._bufferResources[t]}_getBindGroup(t){if(!this._bindGroups[t]){const e=new Za({0:this._getBufferResource(t)});this._bindGroups[t]=e}return this._bindGroups[t]}_uploadBindGroups(){const t=this._renderer.buffer,e=this._buffers[0];e.update(this._batchBuffer.byteIndex),t.updateBuffer(e);const i=this._renderer.gpu.device.createCommandEncoder();for(let s=1;s<this._buffers.length;s++){const o=this._buffers[s];i.copyBufferToBuffer(t.getGPUBuffer(e),Lo,t.getGPUBuffer(o),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([i.finish()])}destroy(){for(let t=0;t<this._bindGroups.length;t++)this._bindGroups[t].destroy();this._bindGroups=null,this._bindGroupHash=null;for(let t=0;t<this._buffers.length;t++)this._buffers[t].destroy();this._buffers=null;for(let t=0;t<this._bufferResources.length;t++)this._bufferResources[t].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._bindGroupHash=null,this._renderer=null}}a2.extension={type:[q.WebGPUPipes],name:"uniformBatch"};const K5={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4};function W5(n,t,e,i,s){return n<<24|t<<16|e<<10|i<<5|s}function Q5(n,t,e,i){return e<<6|n<<3|i<<1|t}class l2{constructor(t){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._renderer=t}contextChange(t){this._gpu=t,this.setStencilMode(On.DISABLED),this._updatePipeHash()}setMultisampleCount(t){this._multisampleCount!==t&&(this._multisampleCount=t,this._updatePipeHash())}setRenderTarget(t){this._multisampleCount=t.msaaSamples,this._depthStencilAttachment=t.descriptor.depthStencilAttachment?1:0,this._updatePipeHash()}setColorMask(t){this._colorMask!==t&&(this._colorMask=t,this._updatePipeHash())}setStencilMode(t){this._stencilMode!==t&&(this._stencilMode=t,this._stencilState=Il[t],this._updatePipeHash())}setPipeline(t,e,i,s){const o=this.getPipeline(t,e,i);s.setPipeline(o)}getPipeline(t,e,i,s){t._layoutKey||(fv(t,e.attributeData),this._generateBufferKey(t)),s||(s=t.topology);const o=W5(t._layoutKey,e._layoutKey,i.data,i._blendModeId,K5[s]);return this._pipeCache[o]?this._pipeCache[o]:(this._pipeCache[o]=this._createPipeline(t,e,i,s),this._pipeCache[o])}_createPipeline(t,e,i,s){const o=this._gpu.device,h=this._createVertexBufferLayouts(t,e),f=this._renderer.state.getColorTargets(i);f[0].writeMask=this._stencilMode===On.RENDERING_MASK_ADD?0:this._colorMask;const m=this._renderer.shader.getProgramData(e).pipeline,g={vertex:{module:this._getModule(e.vertex.source),entryPoint:e.vertex.entryPoint,buffers:h},fragment:{module:this._getModule(e.fragment.source),entryPoint:e.fragment.entryPoint,targets:f},primitive:{topology:s,cullMode:i.cullMode},layout:m,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};return this._depthStencilAttachment&&(g.depthStencil={...this._stencilState,format:"depth24plus-stencil8",depthWriteEnabled:i.depthTest,depthCompare:i.depthTest?"less":"always"}),o.createRenderPipeline(g)}_getModule(t){return this._moduleCache[t]||this._createModule(t)}_createModule(t){const e=this._gpu.device;return this._moduleCache[t]=e.createShaderModule({code:t}),this._moduleCache[t]}_generateBufferKey(t){const e=[];let i=0;const s=Object.keys(t.attributes).sort();for(let h=0;h<s.length;h++){const f=t.attributes[s[h]];e[i++]=f.offset,e[i++]=f.format,e[i++]=f.stride,e[i++]=f.instance}const o=e.join("|");return t._layoutKey=xh(o,"geometry"),t._layoutKey}_generateAttributeLocationsKey(t){const e=[];let i=0;const s=Object.keys(t.attributeData).sort();for(let h=0;h<s.length;h++){const f=t.attributeData[s[h]];e[i++]=f.location}const o=e.join("|");return t._attributeLocationsKey=xh(o,"programAttributes"),t._attributeLocationsKey}getBufferNamesToBind(t,e){const i=t._layoutKey<<16|e._attributeLocationsKey;if(this._bindingNamesCache[i])return this._bindingNamesCache[i];const s=this._createVertexBufferLayouts(t,e),o=Object.create(null),h=e.attributeData;for(let f=0;f<s.length;f++){const g=Object.values(s[f].attributes)[0].shaderLocation;for(const b in h)if(h[b].location===g){o[f]=b;break}}return this._bindingNamesCache[i]=o,o}_createVertexBufferLayouts(t,e){e._attributeLocationsKey||this._generateAttributeLocationsKey(e);const i=t._layoutKey<<16|e._attributeLocationsKey;if(this._bufferLayoutsCache[i])return this._bufferLayoutsCache[i];const s=[];return t.buffers.forEach(o=>{const h={arrayStride:0,stepMode:"vertex",attributes:[]},f=h.attributes;for(const m in e.attributeData){const g=t.attributes[m];(g.divisor??1)!==1&&Xt(`Attribute ${m} has an invalid divisor value of '${g.divisor}'. WebGPU only supports a divisor value of 1`),g.buffer===o&&(h.arrayStride=g.stride,h.stepMode=g.instance?"instance":"vertex",f.push({shaderLocation:e.attributeData[m].location,offset:g.offset,format:g.format}))}f.length&&s.push(h)}),this._bufferLayoutsCache[i]=s,s}_updatePipeHash(){const t=Q5(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment);this._pipeStateCaches[t]||(this._pipeStateCaches[t]=Object.create(null)),this._pipeCache=this._pipeStateCaches[t]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}}l2.extension={type:[q.WebGPUSystem],name:"pipeline"};class sB{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}}class aB{init(t,e){this._renderer=t,this._renderTargetSystem=e}copyToTexture(t,e,i,s,o){const h=this._renderer,f=this._getGpuColorTexture(t),m=h.texture.getGpuSource(e.source);return h.encoder.commandEncoder.copyTextureToTexture({texture:f,origin:i},{texture:m,origin:o},s),e}startRenderPass(t,e=!0,i,s){const h=this._renderTargetSystem.getGpuRenderTarget(t),f=this.getDescriptor(t,e,i);h.descriptor=f,this._renderer.pipeline.setRenderTarget(h),this._renderer.encoder.beginRenderPass(h),this._renderer.encoder.setViewport(s)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(t){const e=this._renderTargetSystem.getGpuRenderTarget(t);return e.contexts[0]?e.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(t.colorTextures[0].source)}getDescriptor(t,e,i){typeof e=="boolean"&&(e=e?Ar.ALL:Ar.NONE);const s=this._renderTargetSystem,o=s.getGpuRenderTarget(t),h=t.colorTextures.map((g,b)=>{const x=o.contexts[b];let E,A;x?E=x.getCurrentTexture().createView():E=this._renderer.texture.getGpuSource(g).createView({mipLevelCount:1}),o.msaaTextures[b]&&(A=E,E=this._renderer.texture.getTextureView(o.msaaTextures[b]));const R=e&Ar.COLOR?"clear":"load";return i??(i=s.defaultClearColor),{view:E,resolveTarget:A,clearValue:i,storeOp:"store",loadOp:R}});let f;if((t.stencil||t.depth)&&!t.depthStencilTexture&&(t.ensureDepthStencilTexture(),t.depthStencilTexture.source.sampleCount=o.msaa?4:1),t.depthStencilTexture){const g=e&Ar.STENCIL?"clear":"load",b=e&Ar.DEPTH?"clear":"load";f={view:this._renderer.texture.getGpuSource(t.depthStencilTexture.source).createView(),stencilStoreOp:"store",stencilLoadOp:g,depthClearValue:1,depthLoadOp:b,depthStoreOp:"store"}}return{colorAttachments:h,depthStencilAttachment:f}}clear(t,e=!0,i,s){if(!e)return;const{gpu:o,encoder:h}=this._renderer,f=o.device;if(h.commandEncoder===null){const g=f.createCommandEncoder(),b=this.getDescriptor(t,e,i),x=g.beginRenderPass(b);x.setViewport(s.x,s.y,s.width,s.height,0,1),x.end();const E=g.finish();f.queue.submit([E])}else this.startRenderPass(t,e,i,s)}initGpuRenderTarget(t){t.isRoot=!0;const e=new sB;return t.colorTextures.forEach((i,s)=>{if(i instanceof Qa){const o=i.resource.getContext("webgpu"),h=i.transparent?"premultiplied":"opaque";try{o.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:h})}catch(f){console.error(f)}e.contexts[s]=o}if(e.msaa=i.source.antialias,i.source.antialias){const o=new Sn({width:0,height:0,sampleCount:4});e.msaaTextures[s]=o}}),e.msaa&&(e.msaaSamples=4,t.depthStencilTexture&&(t.depthStencilTexture.source.sampleCount=4)),e}destroyGpuRenderTarget(t){t.contexts.forEach(e=>{e.unconfigure()}),t.msaaTextures.forEach(e=>{e.destroy()}),t.msaaTextures.length=0,t.contexts.length=0}ensureDepthStencilTexture(t){const e=this._renderTargetSystem.getGpuRenderTarget(t);t.depthStencilTexture&&e.msaa&&(t.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(t){const e=this._renderTargetSystem.getGpuRenderTarget(t);e.width=t.width,e.height=t.height,e.msaa&&t.colorTextures.forEach((i,s)=>{const o=e.msaaTextures[s];o==null||o.resize(i.source.width,i.source.height,i.source._resolution)})}}class o2 extends Cv{constructor(t){super(t),this.adaptor=new aB,this.adaptor.init(t,this)}}o2.extension={type:[q.WebGPUSystem],name:"renderTarget"};class u2{constructor(){this._gpuProgramData=Object.create(null)}contextChange(t){this._gpu=t}getProgramData(t){return this._gpuProgramData[t._layoutKey]||this._createGPUProgramData(t)}_createGPUProgramData(t){const e=this._gpu.device,i=t.gpuLayout.map(o=>e.createBindGroupLayout({entries:o})),s={bindGroupLayouts:i};return this._gpuProgramData[t._layoutKey]={bindGroups:i,pipeline:e.createPipelineLayout(s)},this._gpuProgramData[t._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}}u2.extension={type:[q.WebGPUSystem],name:"shader"};const rr={};rr.normal={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}};rr.add={alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}};rr.multiply={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}};rr.screen={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};rr.overlay={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};rr.none={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}};rr["normal-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}};rr["add-npm"]={alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}};rr["screen-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}};rr.erase={alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}};rr.min={alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}};rr.max={alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}};class c2{constructor(){this.defaultState=new Yr,this.defaultState.blend=!0}contextChange(t){this.gpu=t}getColorTargets(t){return[{format:"bgra8unorm",writeMask:0,blend:rr[t.blendMode]||rr.normal}]}destroy(){this.gpu=null}}c2.extension={type:[q.WebGPUSystem],name:"state"};const lB={type:"image",upload(n,t,e){const i=n.resource,s=(n.pixelWidth|0)*(n.pixelHeight|0),o=i.byteLength/s;e.device.queue.writeTexture({texture:t},i,{offset:0,rowsPerImage:n.pixelHeight,bytesPerRow:n.pixelHeight*o},{width:n.pixelWidth,height:n.pixelHeight,depthOrArrayLayers:1})}},h2={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},Z5={blockBytes:4,blockWidth:1,blockHeight:1},oB={type:"compressed",upload(n,t,e){let i=n.pixelWidth,s=n.pixelHeight;const o=h2[n.format]||Z5;for(let h=0;h<n.resource.length;h++){const f=n.resource[h],m=Math.ceil(i/o.blockWidth)*o.blockBytes;e.device.queue.writeTexture({texture:t,mipLevel:h},f,{offset:0,bytesPerRow:m},{width:Math.ceil(i/o.blockWidth)*o.blockWidth,height:Math.ceil(s/o.blockHeight)*o.blockHeight,depthOrArrayLayers:1}),i=Math.max(i>>1,1),s=Math.max(s>>1,1)}}},f2={type:"image",upload(n,t,e){const i=n.resource;if(!i)return;if(globalThis.HTMLImageElement&&i instanceof HTMLImageElement){const f=pe.get().createCanvas(i.width,i.height);f.getContext("2d").drawImage(i,0,0,i.width,i.height),n.resource=f,Xt("ImageSource: Image element passed, converting to canvas and replacing resource.")}const s=Math.min(t.width,n.resourceWidth||n.pixelWidth),o=Math.min(t.height,n.resourceHeight||n.pixelHeight),h=n.alphaMode==="premultiply-alpha-on-upload";e.device.queue.copyExternalImageToTexture({source:i},{texture:t,premultipliedAlpha:h},{width:s,height:o})}},uB={type:"video",upload(n,t,e){f2.upload(n,t,e)}};class cB{constructor(t){this.device=t,this.sampler=t.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(t){let e=this.pipelines[t];return e||(this.mipmapShaderModule||(this.mipmapShaderModule=this.device.createShaderModule({code:`
                        var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
                        vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

                        struct VertexOutput {
                        @builtin(position) position : vec4<f32>,
                        @location(0) texCoord : vec2<f32>,
                        };

                        @vertex
                        fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
                        var output : VertexOutput;
                        output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
                        output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
                        return output;
                        }

                        @group(0) @binding(0) var imgSampler : sampler;
                        @group(0) @binding(1) var img : texture_2d<f32>;

                        @fragment
                        fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
                        return textureSample(img, imgSampler, texCoord);
                        }
                    `})),e=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:t}]}}),this.pipelines[t]=e),e}generateMipmap(t){const e=this._getMipmapPipeline(t.format);if(t.dimension==="3d"||t.dimension==="1d")throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let i=t;const s=t.depthOrArrayLayers||1,o=t.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!o){const m={size:{width:Math.ceil(t.width/2),height:Math.ceil(t.height/2),depthOrArrayLayers:s},format:t.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:t.mipLevelCount-1};i=this.device.createTexture(m)}const h=this.device.createCommandEncoder({}),f=e.getBindGroupLayout(0);for(let m=0;m<s;++m){let g=t.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:m,arrayLayerCount:1}),b=o?1:0;for(let x=1;x<t.mipLevelCount;++x){const E=i.createView({baseMipLevel:b++,mipLevelCount:1,dimension:"2d",baseArrayLayer:m,arrayLayerCount:1}),A=h.beginRenderPass({colorAttachments:[{view:E,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),R=this.device.createBindGroup({layout:f,entries:[{binding:0,resource:this.sampler},{binding:1,resource:g}]});A.setPipeline(e),A.setBindGroup(0,R),A.draw(3,1,0,0),A.end(),g=E}}if(!o){const m={width:Math.ceil(t.width/2),height:Math.ceil(t.height/2),depthOrArrayLayers:s};for(let g=1;g<t.mipLevelCount;++g)h.copyTextureToTexture({texture:i,mipLevel:g-1},{texture:t,mipLevel:g},m),m.width=Math.ceil(m.width/2),m.height=Math.ceil(m.height/2)}return this.device.queue.submit([h.finish()]),o||i.destroy(),t}}class d2{constructor(t){this.managedTextures=[],this._gpuSources=Object.create(null),this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._textureViewHash=Object.create(null),this._uploads={image:f2,buffer:lB,video:uB,compressed:oB},this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuSources"),t.renderableGC.addManagedHash(this,"_gpuSamplers"),t.renderableGC.addManagedHash(this,"_bindGroupHash"),t.renderableGC.addManagedHash(this,"_textureViewHash")}contextChange(t){this._gpu=t}initSource(t){if(t.autoGenerateMipmaps){const m=Math.max(t.pixelWidth,t.pixelHeight);t.mipLevelCount=Math.floor(Math.log2(m))+1}let e=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;t.uploadMethodId!=="compressed"&&(e|=GPUTextureUsage.RENDER_ATTACHMENT,e|=GPUTextureUsage.COPY_SRC);const i=h2[t.format]||{blockWidth:1,blockHeight:1},s=Math.ceil(t.pixelWidth/i.blockWidth)*i.blockWidth,o=Math.ceil(t.pixelHeight/i.blockHeight)*i.blockHeight,h={label:t.label,size:{width:s,height:o},format:t.format,sampleCount:t.sampleCount,mipLevelCount:t.mipLevelCount,dimension:t.dimension,usage:e},f=this._gpu.device.createTexture(h);return this._gpuSources[t.uid]=f,this.managedTextures.includes(t)||(t.on("update",this.onSourceUpdate,this),t.on("resize",this.onSourceResize,this),t.on("destroy",this.onSourceDestroy,this),t.on("unload",this.onSourceUnload,this),t.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(t)),this.onSourceUpdate(t),f}onSourceUpdate(t){const e=this.getGpuSource(t);e&&(this._uploads[t.uploadMethodId]&&this._uploads[t.uploadMethodId].upload(t,e,this._gpu),t.autoGenerateMipmaps&&t.mipLevelCount>1&&this.onUpdateMipmaps(t))}onSourceUnload(t){const e=this._gpuSources[t.uid];e&&(this._gpuSources[t.uid]=null,e.destroy())}onUpdateMipmaps(t){this._mipmapGenerator||(this._mipmapGenerator=new cB(this._gpu.device));const e=this.getGpuSource(t);this._mipmapGenerator.generateMipmap(e)}onSourceDestroy(t){t.off("update",this.onSourceUpdate,this),t.off("unload",this.onSourceUnload,this),t.off("destroy",this.onSourceDestroy,this),t.off("resize",this.onSourceResize,this),t.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(t),1),this.onSourceUnload(t)}onSourceResize(t){const e=this._gpuSources[t.uid];e?(e.width!==t.pixelWidth||e.height!==t.pixelHeight)&&(this._textureViewHash[t.uid]=null,this._bindGroupHash[t.uid]=null,this.onSourceUnload(t),this.initSource(t)):this.initSource(t)}_initSampler(t){return this._gpuSamplers[t._resourceId]=this._gpu.device.createSampler(t),this._gpuSamplers[t._resourceId]}getGpuSampler(t){return this._gpuSamplers[t._resourceId]||this._initSampler(t)}getGpuSource(t){return this._gpuSources[t.uid]||this.initSource(t)}getTextureBindGroup(t){return this._bindGroupHash[t.uid]??this._createTextureBindGroup(t)}_createTextureBindGroup(t){const e=t.source;return this._bindGroupHash[t.uid]=new Za({0:e,1:e.style,2:new Xn({uTextureMatrix:{type:"mat3x3<f32>",value:t.textureMatrix.mapCoord}})}),this._bindGroupHash[t.uid]}getTextureView(t){const e=t.source;return this._textureViewHash[e.uid]??this._createTextureView(e)}_createTextureView(t){return this._textureViewHash[t.uid]=this.getGpuSource(t).createView(),this._textureViewHash[t.uid]}generateCanvas(t){const e=this._renderer,i=e.gpu.device.createCommandEncoder(),s=pe.get().createCanvas();s.width=t.source.pixelWidth,s.height=t.source.pixelHeight;const o=s.getContext("webgpu");return o.configure({device:e.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:pe.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),i.copyTextureToTexture({texture:e.texture.getGpuSource(t.source),origin:{x:0,y:0}},{texture:o.getCurrentTexture()},{width:s.width,height:s.height}),e.gpu.device.queue.submit([i.finish()]),s}getPixels(t){const e=this.generateCanvas(t),i=Xl.getOptimalCanvasAndContext(e.width,e.height),s=i.context;s.drawImage(e,0,0);const{width:o,height:h}=e,f=s.getImageData(0,0,o,h),m=new Uint8ClampedArray(f.data.buffer);return Xl.returnCanvasAndContext(i),{pixels:m,width:o,height:h}}destroy(){this.managedTextures.slice().forEach(t=>this.onSourceDestroy(t)),this.managedTextures=null;for(const t of Object.keys(this._bindGroupHash)){const e=Number(t),i=this._bindGroupHash[e];i==null||i.destroy(),this._bindGroupHash[e]=null}this._gpu=null,this._mipmapGenerator=null,this._gpuSources=null,this._bindGroupHash=null,this._textureViewHash=null,this._gpuSamplers=null}}d2.extension={type:[q.WebGPUSystem],name:"texture"};class p2{constructor(){this._maxTextures=0}contextChange(t){const e=new Xn({uTransformMatrix:{value:new Pt,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}});this._maxTextures=t.limits.maxBatchableTextures;const i=Bh({name:"graphics",bits:[Wg,Zg(this._maxTextures),jA,Mh]});this.shader=new Kr({gpuProgram:i,resources:{localUniforms:e}})}execute(t,e){const i=e.context,s=i.customShader||this.shader,o=t.renderer,h=o.graphicsContext,{batcher:f,instructions:m}=h.getContextRenderData(i),g=o.encoder;g.setGeometry(f.geometry,s.gpuProgram);const b=o.globalUniforms.bindGroup;g.setBindGroup(0,b,s.gpuProgram);const x=o.renderPipes.uniformBatch.getUniformBindGroup(s.resources.localUniforms,!0);g.setBindGroup(2,x,s.gpuProgram);const E=m.instructions;let A=null;for(let R=0;R<m.instructionSize;R++){const D=E[R];if(D.topology!==A&&(A=D.topology,g.setPipelineFromGeometryProgramAndState(f.geometry,s.gpuProgram,t.state,D.topology)),s.groups[1]=D.bindGroup,!D.gpuBindGroup){const B=D.textures;D.bindGroup=Kg(B.textures,B.count,this._maxTextures),D.gpuBindGroup=o.bindGroup.getBindGroup(D.bindGroup,s.gpuProgram,1)}g.setBindGroup(1,D.bindGroup,s.gpuProgram),g.renderPassEncoder.drawIndexed(D.size,1,D.start)}}destroy(){this.shader.destroy(!0),this.shader=null}}p2.extension={type:[q.WebGPUPipesAdaptor],name:"graphics"};class m2{init(){const t=Bh({name:"mesh",bits:[bh,KA,Mh]});this._shader=new Kr({gpuProgram:t,resources:{uTexture:Ct.EMPTY._source,uSampler:Ct.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new Pt}}}})}execute(t,e){const i=t.renderer;let s=e._shader;if(!s)s=this._shader,s.groups[2]=i.texture.getTextureBindGroup(e.texture);else if(!s.gpuProgram){Xt("Mesh shader has no gpuProgram",e.shader);return}const o=s.gpuProgram;if(o.autoAssignGlobalUniforms&&(s.groups[0]=i.globalUniforms.bindGroup),o.autoAssignLocalUniforms){const h=t.localUniforms;s.groups[1]=i.renderPipes.uniformBatch.getUniformBindGroup(h,!0)}i.encoder.draw({geometry:e._geometry,shader:s,state:e.state})}destroy(){this._shader.destroy(!0),this._shader=null}}m2.extension={type:[q.WebGPUPipesAdaptor],name:"mesh"};const J5=[...Zv,s2,n2,f_,i2,t2,d2,o2,u2,c2,l2,e2,r2,$v],$5=[...Jv,a2],tU=[rv,m2,p2],hB=[],fB=[],dB=[];De.handleByNamedList(q.WebGPUSystem,hB);De.handleByNamedList(q.WebGPUPipes,fB);De.handleByNamedList(q.WebGPUPipesAdaptor,dB);De.add(...J5,...$5,...tU);class pB extends Vd{constructor(){const t={name:"webgpu",type:Br.WEBGPU,systems:hB,renderPipes:fB,renderPipeAdaptors:dB};super(t)}}const eU=Object.freeze(Object.defineProperty({__proto__:null,WebGPURenderer:pB},Symbol.toStringTag,{value:"Module"})),Z1={POINTS:"point-list",LINES:"line-list",LINE_STRIP:"line-strip",TRIANGLES:"triangle-list",TRIANGLE_STRIP:"triangle-strip"},nU=new Proxy(Z1,{get(n,t){return wt(Jt,`DRAW_MODES.${t} is deprecated, use '${Z1[t]}' instead`),n[t]}});var Tg=(n=>(n.CLAMP="clamp-to-edge",n.REPEAT="repeat",n.MIRRORED_REPEAT="mirror-repeat",n))(Tg||{});const iU=new Proxy(Tg,{get(n,t){return wt(Jt,`DRAW_MODES.${t} is deprecated, use '${Tg[t]}' instead`),n[t]}});var Ag=(n=>(n.NEAREST="nearest",n.LINEAR="linear",n))(Ag||{});const rU=new Proxy(Ag,{get(n,t){return wt(Jt,`DRAW_MODES.${t} is deprecated, use '${Ag[t]}' instead`),n[t]}});class sU{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,i){const s=e.width,o=e.height;if(i){const h=t.width/2/s,f=t.height/2/o,m=t.x/s+h,g=t.y/o+f;i=me.add(i,me.NW),this.x0=m+h*me.uX(i),this.y0=g+f*me.uY(i),i=me.add(i,2),this.x1=m+h*me.uX(i),this.y1=g+f*me.uY(i),i=me.add(i,2),this.x2=m+h*me.uX(i),this.y2=g+f*me.uY(i),i=me.add(i,2),this.x3=m+h*me.uX(i),this.y3=g+f*me.uY(i)}else this.x0=t.x/s,this.y0=t.y/o,this.x1=(t.x+t.width)/s,this.y1=t.y/o,this.x2=(t.x+t.width)/s,this.y2=(t.y+t.height)/o,this.x3=t.x/s,this.y3=(t.y+t.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[pixi.js/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}function aU(n){const t=n.toString(),e=t.indexOf("{"),i=t.lastIndexOf("}");if(e===-1||i===-1)throw new Error("getFunctionBody: No body found in function definition");return t.slice(e+1,i).trim()}function lU(n,t){return wt("8.7.0","Use container.getFastGlobalBounds() instead"),n.getFastGlobalBounds(!0,t)}class oU extends $a{constructor(t){typeof t=="function"&&(t={render:t});const{render:e,...i}=t;super({label:"RenderContainer",...i}),this.renderPipeId="customRender",this.batched=!1,e&&(this.render=e),this.containsPoint=t.containsPoint??(()=>!1),this.addBounds=t.addBounds??(()=>!1)}updateBounds(){this._bounds.clear(),this.addBounds(this._bounds)}render(t){}}function uU(n,t,e){wt("8.7.0","Please use container.collectRenderables instead.");const i=e.renderPipes?e:e.batch.renderer;return n.collectRenderables(t,i,null)}function cU(n,t){const e=t._scale,i=t._pivot,s=t._position,o=e._x,h=e._y,f=i._x,m=i._y;n.a=t._cx*o,n.b=t._sx*o,n.c=t._cy*h,n.d=t._sy*h,n.tx=s._x-(f*n.a+m*n.c),n.ty=s._y-(f*n.b+m*n.d)}function hU(n,t,e){const i=n.a,s=n.b,o=n.c,h=n.d,f=n.tx,m=n.ty,g=t.a,b=t.b,x=t.c,E=t.d;e.a=i*g+s*x,e.b=i*b+s*E,e.c=o*g+h*x,e.d=o*b+h*E,e.tx=f*g+m*x+t.tx,e.ty=f*b+m*E+t.ty}class mB{constructor(){this.batches=[],this.batched=!1}destroy(){this.batches.forEach(t=>{mi.return(t)}),this.batches.length=0}}class gB{constructor(t,e){this.state=Yr.for2d(),this.renderer=t,this._adaptor=e,this.renderer.runners.contextChange.add(this)}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(t){const e=t.context,i=!!t._gpuData,s=this.renderer.graphicsContext.updateGpuContext(e);return!!(s.isBatchable||i!==s.isBatchable)}addRenderable(t,e){const i=this.renderer.graphicsContext.updateGpuContext(t.context);t.didViewUpdate&&this._rebuild(t),i.isBatchable?this._addToBatcher(t,e):(this.renderer.renderPipes.batch.break(e),e.add(t))}updateRenderable(t){const i=this._getGpuDataForRenderable(t).batches;for(let s=0;s<i.length;s++){const o=i[s];o._batcher.updateElement(o)}}execute(t){if(!t.isRenderable)return;const e=this.renderer,i=t.context;if(!e.graphicsContext.getGpuContext(i).batches.length)return;const o=i.customShader||this._adaptor.shader;this.state.blendMode=t.groupBlendMode;const h=o.resources.localUniforms.uniforms;h.uTransformMatrix=t.groupTransform,h.uRound=e._roundPixels|t._roundPixels,Uh(t.groupColorAlpha,h.uColor,0),this._adaptor.execute(this,t)}_rebuild(t){const e=this._getGpuDataForRenderable(t),i=this.renderer.graphicsContext.updateGpuContext(t.context);e.destroy(),i.isBatchable&&this._updateBatchesForRenderable(t,e)}_addToBatcher(t,e){const i=this.renderer.renderPipes.batch,s=this._getGpuDataForRenderable(t).batches;for(let o=0;o<s.length;o++){const h=s[o];i.addToBatch(h,e)}}_getGpuDataForRenderable(t){return t._gpuData[this.renderer.uid]||this._initGpuDataForRenderable(t)}_initGpuDataForRenderable(t){const e=new mB;return t._gpuData[this.renderer.uid]=e,e}_updateBatchesForRenderable(t,e){const i=t.context,s=this.renderer.graphicsContext.getGpuContext(i),o=this.renderer._roundPixels|t._roundPixels;e.batches=s.batches.map(h=>{const f=mi.get(e_);return h.copyTo(f),f.renderable=t,f.roundPixels=o,f})}destroy(){this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null}}gB.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"graphics"};const _B=class yB extends kn{constructor(t={}){t={...yB.defaultOptions,...t},super(),this.renderLayerChildren=[],this.sortableChildren=t.sortableChildren,this.sortFunction=t.sortFunction}attach(...t){for(let e=0;e<t.length;e++){const i=t[e];if(i.parentRenderLayer){if(i.parentRenderLayer===this)continue;i.parentRenderLayer.detach(i)}this.renderLayerChildren.push(i),i.parentRenderLayer=this;const s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0)}return t[0]}detach(...t){for(let e=0;e<t.length;e++){const i=t[e],s=this.renderLayerChildren.indexOf(i);s!==-1&&this.renderLayerChildren.splice(s,1),i.parentRenderLayer=null;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0)}return t[0]}detachAll(){const t=this.renderLayerChildren;for(let e=0;e<t.length;e++)t[e].parentRenderLayer=null;this.renderLayerChildren.length=0}collectRenderables(t,e,i){const s=this.renderLayerChildren,o=s.length;this.sortableChildren&&this.sortRenderLayerChildren();for(let h=0;h<o;h++)s[h].parent||Xt("Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)",s[h]),s[h].collectRenderables(t,e,this)}sortRenderLayerChildren(){this.renderLayerChildren.sort(this.sortFunction)}_getGlobalBoundsRecursive(t,e,i){if(!t)return;const s=this.renderLayerChildren;for(let o=0;o<s.length;o++)s[o]._getGlobalBoundsRecursive(!0,e,this)}};_B.defaultOptions={sortableChildren:!1,sortFunction:(n,t)=>n.zIndex-t.zIndex};let fU=_B;const dU=fU,bB=class vB extends ic{constructor(...t){super({});let e=t[0]??{};typeof e=="number"&&(wt(Jt,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),e={width:e,height:t[1],verticesX:t[2],verticesY:t[3]}),this.build(e)}build(t){t={...vB.defaultOptions,...t},this.verticesX=this.verticesX??t.verticesX,this.verticesY=this.verticesY??t.verticesY,this.width=this.width??t.width,this.height=this.height??t.height;const e=this.verticesX*this.verticesY,i=[],s=[],o=[],h=this.verticesX-1,f=this.verticesY-1,m=this.width/h,g=this.height/f;for(let x=0;x<e;x++){const E=x%this.verticesX,A=x/this.verticesX|0;i.push(E*m,A*g),s.push(E/h,A/f)}const b=h*f;for(let x=0;x<b;x++){const E=x%h,A=x/h|0,R=A*this.verticesX+E,D=A*this.verticesX+E+1,B=(A+1)*this.verticesX+E,P=(A+1)*this.verticesX+E+1;o.push(R,D,B,D,P,B)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(s),this.indexBuffer.data=new Uint32Array(o),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};bB.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};let d_=bB;function xB(n,t,e,i){const s=e.buffers[0],o=s.data,{verticesX:h,verticesY:f}=e,m=n/(h-1),g=t/(f-1);let b=0;const x=i[0],E=i[1],A=i[2],R=i[3],D=i[4],B=i[5],P=i[6],G=i[7],H=i[8];for(let j=0;j<o.length;j+=2){const Z=b%h*m,nt=(b/h|0)*g,V=x*Z+E*nt+A,ht=R*Z+D*nt+B,N=P*Z+G*nt+H;o[j]=V/N,o[j+1]=ht/N,b++}s.update()}function SB(n,t){const e=t[0],i=t[1],s=t[2],o=t[3],h=t[4],f=t[5],m=t[6],g=t[7],b=t[8];return n[0]=h*b-f*g,n[1]=s*g-i*b,n[2]=i*f-s*h,n[3]=f*m-o*b,n[4]=e*b-s*m,n[5]=s*o-e*f,n[6]=o*g-h*m,n[7]=i*m-e*g,n[8]=e*h-i*o,n}function EB(n,t,e){const i=t[0],s=t[1],o=t[2],h=t[3],f=t[4],m=t[5],g=t[6],b=t[7],x=t[8],E=e[0],A=e[1],R=e[2],D=e[3],B=e[4],P=e[5],G=e[6],H=e[7],j=e[8];return n[0]=E*i+A*h+R*g,n[1]=E*s+A*f+R*b,n[2]=E*o+A*m+R*x,n[3]=D*i+B*h+P*g,n[4]=D*s+B*f+P*b,n[5]=D*o+B*m+P*x,n[6]=G*i+H*h+j*g,n[7]=G*s+H*f+j*b,n[8]=G*o+H*m+j*x,n}function pU(n,t,e){const i=e[0],s=e[1],o=e[2];return n[0]=t[0]*i+t[1]*s+t[2]*o,n[1]=t[3]*i+t[4]*s+t[5]*o,n[2]=t[6]*i+t[7]*s+t[8]*o,n}const mU=[0,0,0,0,0,0,0,0,0],gU=[0,0,0],ng=[0,0,0];function J1(n,t,e,i,s,o,h,f,m){const g=mU;g[0]=t,g[1]=i,g[2]=o,g[3]=e,g[4]=s,g[5]=h,g[6]=1,g[7]=1,g[8]=1;const b=SB(n,g);ng[0]=f,ng[1]=m,ng[2]=1;const x=pU(gU,b,ng),E=n;return n[0]=x[0],n[1]=0,n[2]=0,n[3]=0,n[4]=x[1],n[5]=0,n[6]=0,n[7]=0,n[8]=x[2],EB(n,E,g)}const _U=[0,0,0,0,0,0,0,0,0],yU=[0,0,0,0,0,0,0,0,0];function TB(n,t,e,i,s,o,h,f,m,g,b,x,E,A,R,D,B){const P=J1(_U,t,e,o,h,g,b,A,R),G=J1(yU,i,s,f,m,x,E,D,B);return EB(n,SB(P,P),G)}class AB extends d_{constructor(t){super(t),this._projectionMatrix=[0,0,0,0,0,0,0,0,0];const{width:e,height:i}=t;this.corners=[0,0,e,0,e,i,0,i]}setCorners(t,e,i,s,o,h,f,m){const g=this.corners;g[0]=t,g[1]=e,g[2]=i,g[3]=s,g[4]=o,g[5]=h,g[6]=f,g[7]=m,this.updateProjection()}updateProjection(){const{width:t,height:e}=this,i=this.corners,s=TB(this._projectionMatrix,0,0,i[0],i[1],t,0,i[2],i[3],t,e,i[4],i[5],0,e,i[6],i[7]);xB(t,e,this,s)}}const CB=class BB extends wh{constructor(t){t={...BB.defaultOptions,...t};const{texture:e,verticesX:i,verticesY:s,...o}=t,h=new AB(sa({width:e.width,height:e.height,verticesX:i,verticesY:s}));super(sa({...o,geometry:h})),this._texture=e,this.geometry.setCorners(t.x0,t.y0,t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}textureUpdated(){const t=this.geometry;if(!t)return;const{width:e,height:i}=this.texture;(t.width!==e||t.height!==i)&&(t.width=e,t.height=i,t.updateProjection())}set texture(t){this._texture!==t&&(super.texture=t,this.textureUpdated())}get texture(){return this._texture}setCorners(t,e,i,s,o,h,f,m){this.geometry.setCorners(t,e,i,s,o,h,f,m)}};CB.defaultOptions={texture:Ct.WHITE,verticesX:10,verticesY:10,x0:0,y0:0,x1:100,y1:0,x2:100,y2:100,x3:0,y3:100};let bU=CB;class vU extends wh{constructor(t){const{texture:e,verticesX:i,verticesY:s,...o}=t,h=new d_(sa({width:e.width,height:e.height,verticesX:i,verticesY:s}));super(sa({...o,geometry:h,texture:e})),this.texture=e,this.autoResize=!0}textureUpdated(){const t=this.geometry,{width:e,height:i}=this.texture;this.autoResize&&(t.width!==e||t.height!==i)&&(t.width=e,t.height=i,t.build({}))}set texture(t){var e;(e=this._texture)==null||e.off("update",this.textureUpdated,this),super.texture=t,t.on("update",this.textureUpdated,this),this.textureUpdated()}get texture(){return this._texture}destroy(t){this.texture.off("update",this.textureUpdated,this),super.destroy(t)}}const RB=class MB extends ic{constructor(t){const{width:e,points:i,textureScale:s}={...MB.defaultOptions,...t};super({positions:new Float32Array(i.length*4),uvs:new Float32Array(i.length*4),indices:new Uint32Array((i.length-1)*6)}),this.points=i,this._width=e,this.textureScale=s,this._build()}get width(){return this._width}_build(){const t=this.points;if(!t)return;const e=this.getBuffer("aPosition"),i=this.getBuffer("aUV"),s=this.getIndex();if(t.length<1)return;e.data.length/4!==t.length&&(e.data=new Float32Array(t.length*4),i.data=new Float32Array(t.length*4),s.data=new Uint16Array((t.length-1)*6));const o=i.data,h=s.data;o[0]=0,o[1]=0,o[2]=0,o[3]=1;let f=0,m=t[0];const g=this._width*this.textureScale,b=t.length;for(let E=0;E<b;E++){const A=E*4;if(this.textureScale>0){const R=m.x-t[E].x,D=m.y-t[E].y,B=Math.sqrt(R*R+D*D);m=t[E],f+=B/g}else f=E/(b-1);o[A]=f,o[A+1]=0,o[A+2]=f,o[A+3]=1}let x=0;for(let E=0;E<b-1;E++){const A=E*2;h[x++]=A,h[x++]=A+1,h[x++]=A+2,h[x++]=A+2,h[x++]=A+1,h[x++]=A+3}i.update(),s.update(),this.updateVertices()}updateVertices(){const t=this.points;if(t.length<1)return;let e=t[0],i,s=0,o=0;const h=this.buffers[0].data,f=t.length,m=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let g=0;g<f;g++){const b=t[g],x=g*4;g<t.length-1?i=t[g+1]:i=b,o=-(i.x-e.x),s=i.y-e.y;const E=Math.sqrt(s*s+o*o);E<1e-6?(s=0,o=0):(s/=E,o/=E,s*=m,o*=m),h[x]=b.x+s,h[x+1]=b.y+o,h[x+2]=b.x-s,h[x+3]=b.y-o,e=b}this.buffers[0].update()}update(){this.textureScale>0?this._build():this.updateVertices()}};RB.defaultOptions={width:200,points:[],textureScale:0};let DB=RB;const wB=class UB extends wh{constructor(t){const{texture:e,points:i,textureScale:s,...o}={...UB.defaultOptions,...t},h=new DB(sa({width:e.height,points:i,textureScale:s}));s>0&&(e.source.style.addressMode="repeat"),super(sa({...o,texture:e,geometry:h})),this.autoUpdate=!0,this.onRender=this._render}_render(){const t=this.geometry;(this.autoUpdate||t._width!==this.texture.height)&&(t._width=this.texture.height,t.update())}};wB.defaultOptions={textureScale:0};let xU=wB;class SU extends wh{constructor(t){const{texture:e,vertices:i,uvs:s,indices:o,topology:h,...f}=t,m=new ic(sa({positions:i,uvs:s,indices:o,topology:h}));super(sa({...f,texture:e,geometry:m})),this.autoUpdate=!0,this.onRender=this._render}get vertices(){return this.geometry.getBuffer("aPosition").data}set vertices(t){this.geometry.getBuffer("aPosition").data=t}_render(){this.autoUpdate&&this.geometry.getBuffer("aPosition").update()}}class p_{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._textureMatrixUpdateId=-1,this._uvUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(t){this._topology=t}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(t){this.texture!==t&&(this.texture=t,this._textureMatrixUpdateId=-1)}get uvs(){const e=this.geometry.getBuffer("aUV"),i=e.data;let s=i;const o=this.texture.textureMatrix;return o.isSimple||(s=this._transformedUvs,(this._textureMatrixUpdateId!==o._updateID||this._uvUpdateId!==e._updateID)&&((!s||s.length<i.length)&&(s=this._transformedUvs=new Float32Array(i.length)),this._textureMatrixUpdateId=o._updateID,this._uvUpdateId=e._updateID,o.multiplyUvs(i,s))),s}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}function EU(n,t){const{width:e,height:i}=n.frame;return t.scale(1/e,1/i),t}class Iy{destroy(){}}class OB{constructor(t,e){this.localUniforms=new Xn({uTransformMatrix:{value:new Pt,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new Za({0:this.localUniforms}),this.renderer=t,this._adaptor=e,this._adaptor.init()}validateRenderable(t){const e=this._getMeshData(t),i=e.batched,s=t.batched;if(e.batched=s,i!==s)return!0;if(s){const o=t._geometry;if(o.indices.length!==e.indexSize||o.positions.length!==e.vertexSize)return e.indexSize=o.indices.length,e.vertexSize=o.positions.length,!0;const h=this._getBatchableMesh(t);return h.texture.uid!==t._texture.uid&&(h._textureMatrixUpdateId=-1),!h._batcher.checkAndUpdateTexture(h,t._texture)}return!1}addRenderable(t,e){const i=this.renderer.renderPipes.batch,{batched:s}=this._getMeshData(t);if(s){const o=this._getBatchableMesh(t);o.setTexture(t._texture),o.geometry=t._geometry,i.addToBatch(o,e)}else i.break(e),e.add(t)}updateRenderable(t){if(t.batched){const e=this._getBatchableMesh(t);e.setTexture(t._texture),e.geometry=t._geometry,e._batcher.updateElement(e)}}execute(t){if(!t.isRenderable)return;t.state.blendMode=Eh(t.groupBlendMode,t.texture._source);const e=this.localUniforms;e.uniforms.uTransformMatrix=t.groupTransform,e.uniforms.uRound=this.renderer._roundPixels|t._roundPixels,e.update(),Uh(t.groupColorAlpha,e.uniforms.uColor,0),this._adaptor.execute(this,t)}_getMeshData(t){var e,i;return(e=t._gpuData)[i=this.renderer.uid]||(e[i]=new Iy),t._gpuData[this.renderer.uid].meshData||this._initMeshData(t)}_initMeshData(t){var e,i;return t._gpuData[this.renderer.uid].meshData={batched:t.batched,indexSize:(e=t._geometry.indices)==null?void 0:e.length,vertexSize:(i=t._geometry.positions)==null?void 0:i.length},t._gpuData[this.renderer.uid].meshData}_getBatchableMesh(t){var e,i;return(e=t._gpuData)[i=this.renderer.uid]||(e[i]=new Iy),t._gpuData[this.renderer.uid].batchableMesh||this._initBatchableMesh(t)}_initBatchableMesh(t){const e=new p_;return e.renderable=t,e.setTexture(t._texture),e.transform=t.groupTransform,e.roundPixels=this.renderer._roundPixels|t._roundPixels,t._gpuData[this.renderer.uid].batchableMesh=e,e}destroy(){this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}}OB.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"mesh"};class PB{execute(t,e){const i=t.state,s=t.renderer,o=e.shader||t.defaultShader;o.resources.uTexture=e.texture._source,o.resources.uniforms=t.localUniforms;const h=s.gl,f=t.getBuffers(e);s.shader.bind(o),s.state.set(i),s.geometry.bind(f.geometry,o.glProgram);const g=f.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?h.UNSIGNED_SHORT:h.UNSIGNED_INT;h.drawElements(h.TRIANGLES,e.particleChildren.length*6,g,0)}}class GB{execute(t,e){const i=t.renderer,s=e.shader||t.defaultShader;s.groups[0]=i.renderPipes.uniformBatch.getUniformBindGroup(t.localUniforms,!0),s.groups[1]=i.texture.getTextureBindGroup(e.texture);const o=t.state,h=t.getBuffers(e);i.encoder.draw({geometry:h.geometry,shader:e.shader||t.defaultShader,state:o,size:e.particleChildren.length*6})}}function Yy(n,t=null){const e=n*6;if(e>65535?t||(t=new Uint32Array(e)):t||(t=new Uint16Array(e)),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let i=0,s=0;i<e;i+=6,s+=4)t[i+0]=s+0,t[i+1]=s+1,t[i+2]=s+2,t[i+3]=s+0,t[i+4]=s+2,t[i+5]=s+3;return t}function NB(n){return{dynamicUpdate:$1(n,!0),staticUpdate:$1(n,!1)}}function $1(n,t){const e=[];e.push(`

        var index = 0;

        for (let i = 0; i < ps.length; ++i)
        {
            const p = ps[i];

            `);let i=0;for(const o in n){const h=n[o];if(t!==h.dynamic)continue;e.push(`offset = index + ${i}`),e.push(h.code);const f=kl(h.format);i+=f.stride/4}e.push(`
            index += stride * 4;
        }
    `),e.unshift(`
        var stride = ${i};
    `);const s=e.join(`
`);return new Function("ps","f32v","u32v",s)}class zB{constructor(t){this._size=0,this._generateParticleUpdateCache={};const e=this._size=t.size??1e3,i=t.properties;let s=0,o=0;for(const b in i){const x=i[b],E=kl(x.format);x.dynamic?o+=E.stride:s+=E.stride}this._dynamicStride=o/4,this._staticStride=s/4,this.staticAttributeBuffer=new Wu(e*4*s),this.dynamicAttributeBuffer=new Wu(e*4*o),this.indexBuffer=Yy(e);const h=new ec;let f=0,m=0;this._staticBuffer=new Cr({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:be.VERTEX|be.COPY_DST}),this._dynamicBuffer=new Cr({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:be.VERTEX|be.COPY_DST});for(const b in i){const x=i[b],E=kl(x.format);x.dynamic?(h.addAttribute(x.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:f*4,format:x.format}),f+=E.size):(h.addAttribute(x.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:m*4,format:x.format}),m+=E.size)}h.addIndex(this.indexBuffer);const g=this.getParticleUpdate(i);this._dynamicUpload=g.dynamicUpdate,this._staticUpload=g.staticUpdate,this.geometry=h}getParticleUpdate(t){const e=TU(t);return this._generateParticleUpdateCache[e]?this._generateParticleUpdateCache[e]:(this._generateParticleUpdateCache[e]=this.generateParticleUpdate(t),this._generateParticleUpdateCache[e])}generateParticleUpdate(t){return NB(t)}update(t,e){t.length>this._size&&(e=!0,this._size=Math.max(t.length,this._size*1.5|0),this.staticAttributeBuffer=new Wu(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new Wu(this._size*this._dynamicStride*4*4),this.indexBuffer=Yy(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));const i=this.dynamicAttributeBuffer;if(this._dynamicUpload(t,i.float32View,i.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,t.length*this._dynamicStride*4,!0),e){const s=this.staticAttributeBuffer;this._staticUpload(t,s.float32View,s.uint32View),this._staticBuffer.setDataWithSize(s.float32View,t.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}}function TU(n){const t=[];for(const e in n){const i=n[e];t.push(e,i.code,i.dynamic?"d":"s")}return t.join("_")}var LB=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
    vec4 color = texture2D(uTexture, vUV) * vColor;
    gl_FragColor = color;
}`,HB=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
    float cosRotation = cos(aRotation);
    float sinRotation = sin(aRotation);
    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

    vec2 v = vec2(x, y);
    v = v + aPosition;

    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    if(uRound == 1.0)
    {
        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
    }

    vUV = aUV;
    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`,qy=`
struct ParticleUniforms {
  uProjectionMatrix:mat3x3<f32>,
  uColor:vec4<f32>,
  uResolution:vec2<f32>,
  uRoundPixels:f32,
};

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) color : vec4<f32>,
  };
@vertex
fn mainVertex(
  @location(0) aVertex: vec2<f32>,
  @location(1) aPosition: vec2<f32>,
  @location(2) aUV: vec2<f32>,
  @location(3) aColor: vec4<f32>,
  @location(4) aRotation: f32,
) -> VSOutput {
  
   let v = vec2(
       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
   ) + aPosition;

   let position = vec4((uniforms.uProjectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

  return VSOutput(
   position,
   aUV,
   vColor,
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) color: vec4<f32>,
  @builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

    var sample = textureSample(uTexture, uSampler, uv) * color;
   
    return sample;
}`;class FB extends Kr{constructor(){const t=jr.from({vertex:HB,fragment:LB}),e=Dr.from({fragment:{source:qy,entryPoint:"mainFragment"},vertex:{source:qy,entryPoint:"mainVertex"}});super({glProgram:t,gpuProgram:e,resources:{uTexture:Ct.WHITE.source,uSampler:new vs({}),uniforms:{uTranslationMatrix:{value:new Pt,type:"mat3x3<f32>"},uColor:{value:new Ce(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}}class g2{constructor(t,e){this.state=Yr.for2d(),this.localUniforms=new Xn({uTranslationMatrix:{value:new Pt,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=t,this.adaptor=e,this.defaultShader=new FB,this.state=Yr.for2d()}validateRenderable(t){return!1}addRenderable(t,e){this.renderer.renderPipes.batch.break(e),e.add(t)}getBuffers(t){return t._gpuData[this.renderer.uid]||this._initBuffer(t)}_initBuffer(t){return t._gpuData[this.renderer.uid]=new zB({size:t.particleChildren.length,properties:t._properties}),t._gpuData[this.renderer.uid]}updateRenderable(t){}execute(t){const e=t.particleChildren;if(e.length===0)return;const i=this.renderer,s=this.getBuffers(t);t.texture||(t.texture=e[0].texture);const o=this.state;s.update(e,t._childrenDirty),t._childrenDirty=!1,o.blendMode=Eh(t.blendMode,t.texture._source);const h=this.localUniforms.uniforms,f=h.uTranslationMatrix;t.worldTransform.copyTo(f),f.prepend(i.globalUniforms.globalUniformData.projectionMatrix),h.uResolution=i.globalUniforms.globalUniformData.resolution,h.uRound=i._roundPixels|t._roundPixels,Uh(t.groupColorAlpha,h.uColor,0),this.adaptor.execute(this,t)}destroy(){this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}}class VB extends g2{constructor(t){super(t,new PB)}}VB.extension={type:[q.WebGLPipes],name:"particle"};class kB extends g2{constructor(t){super(t,new GB)}}kB.extension={type:[q.WebGPUPipes],name:"particle"};const XB=class jy{constructor(t){if(t instanceof Ct)this.texture=t,pg(this,jy.defaultOptions,{});else{const e={...jy.defaultOptions,...t};pg(this,e,{})}}get alpha(){return this._alpha}set alpha(t){this._alpha=Math.min(Math.max(t,0),1),this._updateColor()}get tint(){return hh(this._tint)}set tint(t){typeof t=="number"?this._tint=t:this._tint=Ce.shared.setValue(t??16777215).toBgrNumber(),this._updateColor()}_updateColor(){this.color=this._tint+((this._alpha*255|0)<<24)}};XB.defaultOptions={anchorX:0,anchorY:0,x:0,y:0,scaleX:1,scaleY:1,rotation:0,tint:16777215,alpha:1};let AU=XB;const Ky={vertex:{attributeName:"aVertex",format:"float32x2",code:`
            const texture = p.texture;
            const sx = p.scaleX;
            const sy = p.scaleY;
            const ax = p.anchorX;
            const ay = p.anchorY;
            const trim = texture.trim;
            const orig = texture.orig;

            if (trim)
            {
                w1 = trim.x - (ax * orig.width);
                w0 = w1 + trim.width;

                h1 = trim.y - (ay * orig.height);
                h0 = h1 + trim.height;
            }
            else
            {
                w1 = -ax * (orig.width);
                w0 = w1 + orig.width;

                h1 = -ay * (orig.height);
                h0 = h1 + orig.height;
            }

            f32v[offset] = w1 * sx;
            f32v[offset + 1] = h1 * sy;

            f32v[offset + stride] = w0 * sx;
            f32v[offset + stride + 1] = h1 * sy;

            f32v[offset + (stride * 2)] = w0 * sx;
            f32v[offset + (stride * 2) + 1] = h0 * sy;

            f32v[offset + (stride * 3)] = w1 * sx;
            f32v[offset + (stride * 3) + 1] = h0 * sy;
        `,dynamic:!1},position:{attributeName:"aPosition",format:"float32x2",code:`
            var x = p.x;
            var y = p.y;

            f32v[offset] = x;
            f32v[offset + 1] = y;

            f32v[offset + stride] = x;
            f32v[offset + stride + 1] = y;

            f32v[offset + (stride * 2)] = x;
            f32v[offset + (stride * 2) + 1] = y;

            f32v[offset + (stride * 3)] = x;
            f32v[offset + (stride * 3) + 1] = y;
        `,dynamic:!0},rotation:{attributeName:"aRotation",format:"float32",code:`
            var rotation = p.rotation;

            f32v[offset] = rotation;
            f32v[offset + stride] = rotation;
            f32v[offset + (stride * 2)] = rotation;
            f32v[offset + (stride * 3)] = rotation;
        `,dynamic:!1},uvs:{attributeName:"aUV",format:"float32x2",code:`
            var uvs = p.texture.uvs;

            f32v[offset] = uvs.x0;
            f32v[offset + 1] = uvs.y0;

            f32v[offset + stride] = uvs.x1;
            f32v[offset + stride + 1] = uvs.y1;

            f32v[offset + (stride * 2)] = uvs.x2;
            f32v[offset + (stride * 2) + 1] = uvs.y2;

            f32v[offset + (stride * 3)] = uvs.x3;
            f32v[offset + (stride * 3) + 1] = uvs.y3;
        `,dynamic:!1},color:{attributeName:"aColor",format:"unorm8x4",code:`
            const c = p.color;

            u32v[offset] = c;
            u32v[offset + stride] = c;
            u32v[offset + (stride * 2)] = c;
            u32v[offset + (stride * 3)] = c;
        `,dynamic:!1}},CU=new ti(0,0,0,0),IB=class Wy extends $a{constructor(t={}){t={...Wy.defaultOptions,...t,dynamicProperties:{...Wy.defaultOptions.dynamicProperties,...t==null?void 0:t.dynamicProperties}};const{dynamicProperties:e,shader:i,roundPixels:s,texture:o,particles:h,...f}=t;super({label:"ParticleContainer",...f}),this.renderPipeId="particle",this.batched=!1,this._childrenDirty=!1,this.texture=o||null,this.shader=i,this._properties={};for(const m in Ky){const g=Ky[m],b=e[m];this._properties[m]={...g,dynamic:b}}this.allowChildren=!0,this.roundPixels=s??!1,this.particleChildren=h??[]}addParticle(...t){for(let e=0;e<t.length;e++)this.particleChildren.push(t[e]);return this.onViewUpdate(),t[0]}removeParticle(...t){let e=!1;for(let i=0;i<t.length;i++){const s=this.particleChildren.indexOf(t[i]);s>-1&&(this.particleChildren.splice(s,1),e=!0)}return e&&this.onViewUpdate(),t[0]}update(){this._childrenDirty=!0}onViewUpdate(){this._childrenDirty=!0,super.onViewUpdate()}get bounds(){return CU}updateBounds(){}destroy(t=!1){var i,s;if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const o=typeof t=="boolean"?t:t==null?void 0:t.textureSource,h=this.texture??((i=this.particleChildren[0])==null?void 0:i.texture);h&&h.destroy(o)}this.texture=null,(s=this.shader)==null||s.destroy()}removeParticles(t,e){t??(t=0),e??(e=this.particleChildren.length);const i=this.particleChildren.splice(t,e-t);return this.onViewUpdate(),i}removeParticleAt(t){const e=this.particleChildren.splice(t,1);return this.onViewUpdate(),e[0]}addParticleAt(t,e){return this.particleChildren.splice(e,0,t),this.onViewUpdate(),t}addChild(...t){throw new Error("ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()")}removeChild(...t){throw new Error("ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()")}removeChildren(t,e){throw new Error("ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()")}removeChildAt(t){throw new Error("ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()")}getChildAt(t){throw new Error("ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()")}setChildIndex(t,e){throw new Error("ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()")}getChildIndex(t){throw new Error("ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()")}addChildAt(t,e){throw new Error("ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()")}swapChildren(t,e){throw new Error("ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()")}reparentChild(...t){throw new Error("ParticleContainer.reparentChild() is not available with the particle container")}reparentChildAt(t,e){throw new Error("ParticleContainer.reparentChildAt() is not available with the particle container")}};IB.defaultOptions={dynamicProperties:{vertex:!1,position:!0,rotation:!1,uvs:!1,color:!1},roundPixels:!1};let BU=IB;const YB=class qB extends d_{constructor(t={}){t={...qB.defaultOptions,...t},super({width:t.width,height:t.height,verticesX:4,verticesY:4}),this.update(t)}update(t){var e,i;this.width=t.width??this.width,this.height=t.height??this.height,this._originalWidth=t.originalWidth??this._originalWidth,this._originalHeight=t.originalHeight??this._originalHeight,this._leftWidth=t.leftWidth??this._leftWidth,this._rightWidth=t.rightWidth??this._rightWidth,this._topHeight=t.topHeight??this._topHeight,this._bottomHeight=t.bottomHeight??this._bottomHeight,this._anchorX=(e=t.anchor)==null?void 0:e.x,this._anchorY=(i=t.anchor)==null?void 0:i.y,this.updateUvs(),this.updatePositions()}updatePositions(){const t=this.positions,{width:e,height:i,_leftWidth:s,_rightWidth:o,_topHeight:h,_bottomHeight:f,_anchorX:m,_anchorY:g}=this,b=s+o,x=e>b?1:e/b,E=h+f,A=i>E?1:i/E,R=Math.min(x,A),D=m*e,B=g*i;t[0]=t[8]=t[16]=t[24]=-D,t[2]=t[10]=t[18]=t[26]=s*R-D,t[4]=t[12]=t[20]=t[28]=e-o*R-D,t[6]=t[14]=t[22]=t[30]=e-D,t[1]=t[3]=t[5]=t[7]=-B,t[9]=t[11]=t[13]=t[15]=h*R-B,t[17]=t[19]=t[21]=t[23]=i-f*R-B,t[25]=t[27]=t[29]=t[31]=i-B,this.getBuffer("aPosition").update()}updateUvs(){const t=this.uvs;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1;const e=1/this._originalWidth,i=1/this._originalHeight;t[2]=t[10]=t[18]=t[26]=e*this._leftWidth,t[9]=t[11]=t[13]=t[15]=i*this._topHeight,t[4]=t[12]=t[20]=t[28]=1-e*this._rightWidth,t[17]=t[19]=t[21]=t[23]=1-i*this._bottomHeight,this.getBuffer("aUV").update()}};YB.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};let Ho=YB;const jB=class KB extends $a{constructor(t){var E,A,R,D;t instanceof Ct&&(t={texture:t});const{width:e,height:i,anchor:s,leftWidth:o,rightWidth:h,topHeight:f,bottomHeight:m,texture:g,roundPixels:b,...x}=t;super({label:"NineSliceSprite",...x}),this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=o??((E=g==null?void 0:g.defaultBorders)==null?void 0:E.left)??Ho.defaultOptions.leftWidth,this._topHeight=f??((A=g==null?void 0:g.defaultBorders)==null?void 0:A.top)??Ho.defaultOptions.topHeight,this._rightWidth=h??((R=g==null?void 0:g.defaultBorders)==null?void 0:R.right)??Ho.defaultOptions.rightWidth,this._bottomHeight=m??((D=g==null?void 0:g.defaultBorders)==null?void 0:D.bottom)??Ho.defaultOptions.bottomHeight,this._width=e??g.width??Ho.defaultOptions.width,this._height=i??g.height??Ho.defaultOptions.height,this.allowChildren=!1,this.texture=g??KB.defaultOptions.texture,this.roundPixels=b??!1,this._anchor=new Fn({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:this.texture.defaultAnchor&&(this.anchor=this.texture.defaultAnchor)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return this._width}set width(t){this._width=t,this.onViewUpdate()}get height(){return this._height}set height(t){this._height=t,this.onViewUpdate()}setSize(t,e){typeof t=="object"&&(e=t.height??t.width,t=t.width),this._width=t,this._height=e??t,this.onViewUpdate()}getSize(t){return t||(t={}),t.width=this._width,t.height=this._height,t}get leftWidth(){return this._leftWidth}set leftWidth(t){this._leftWidth=t,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(t){this._topHeight=t,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(t){this._rightWidth=t,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(t){this._bottomHeight=t,this.onViewUpdate()}get texture(){return this._texture}set texture(t){t||(t=Ct.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this.onViewUpdate())}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(t){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(i)}this._texture=null}updateBounds(){const t=this._bounds,e=this._anchor,i=this._width,s=this._height;t.minX=-e._x*i,t.maxX=t.minX+i,t.minY=-e._y*s,t.maxY=t.minY+s}};jB.defaultOptions={texture:Ct.EMPTY};let WB=jB;class RU extends WB{constructor(...t){let e=t[0];e instanceof Ct&&(wt(Jt,"NineSlicePlane now uses the options object {texture, leftWidth, rightWidth, topHeight, bottomHeight}"),e={texture:e,leftWidth:t[1],topHeight:t[2],rightWidth:t[3],bottomHeight:t[4]}),wt(Jt,"NineSlicePlane is deprecated. Use NineSliceSprite instead."),super(e)}}class QB extends p_{constructor(){super(),this.geometry=new Ho}destroy(){this.geometry.destroy()}}class ZB{constructor(t){this._renderer=t}addRenderable(t,e){const i=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,i),this._renderer.renderPipes.batch.addToBatch(i,e)}updateRenderable(t){const e=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,e),e._batcher.updateElement(e)}validateRenderable(t){const e=this._getGpuSprite(t);return!e._batcher.checkAndUpdateTexture(e,t._texture)}_updateBatchableSprite(t,e){e.geometry.update(t),e.setTexture(t._texture)}_getGpuSprite(t){return t._gpuData[this._renderer.uid]||this._initGPUSprite(t)}_initGPUSprite(t){const e=t._gpuData[this._renderer.uid]=new QB,i=e;return i.renderable=t,i.transform=t.groupTransform,i.texture=t._texture,i.roundPixels=this._renderer._roundPixels|t._roundPixels,t.didViewUpdate||this._updateBatchableSprite(t,i),e}destroy(){this._renderer=null}}ZB.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"nineSliceSprite"};const JB={name:"tiling-bit",vertex:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`
            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
        `},fragment:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`

            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
            var unclamped = coord;
            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

            var bias = 0.;

            if(unclamped.x == coord.x && unclamped.y == coord.y)
            {
                bias = -32.;
            }

            outColor = textureSampleBias(uTexture, uSampler, coord, bias);
        `}},$B={name:"tiling-bit",vertex:{header:`
            uniform mat3 uTextureTransform;
            uniform vec4 uSizeAnchor;

        `,main:`
            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
        `},fragment:{header:`
            uniform sampler2D uTexture;
            uniform mat3 uMapCoord;
            uniform vec4 uClampFrame;
            uniform vec2 uClampOffset;
        `,main:`

        vec2 coord = vUV + ceil(uClampOffset - vUV);
        coord = (uMapCoord * vec3(coord, 1.0)).xy;
        vec2 unclamped = coord;
        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0

        `}};let F0,V0;class tR extends Kr{constructor(){F0??(F0=Bh({name:"tiling-sprite-shader",bits:[bh,JB,Mh]})),V0??(V0=Rh({name:"tiling-sprite-shader",bits:[o_,$B,Dh]}));const t=new Xn({uMapCoord:{value:new Pt,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new Pt,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:V0,gpuProgram:F0,resources:{localUniforms:new Xn({uTransformMatrix:{value:new Pt,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:t,uTexture:Ct.EMPTY.source,uSampler:Ct.EMPTY.source.style}})}updateUniforms(t,e,i,s,o,h){const f=this.resources.tilingUniforms,m=h.width,g=h.height,b=h.textureMatrix,x=f.uniforms.uTextureTransform;x.set(i.a*m/t,i.b*m/e,i.c*g/t,i.d*g/e,i.tx/t,i.ty/e),x.invert(),f.uniforms.uMapCoord=b.mapCoord,f.uniforms.uClampFrame=b.uClampFrame,f.uniforms.uClampOffset=b.uClampOffset,f.uniforms.uTextureTransform=x,f.uniforms.uSizeAnchor[0]=t,f.uniforms.uSizeAnchor[1]=e,f.uniforms.uSizeAnchor[2]=s,f.uniforms.uSizeAnchor[3]=o,h&&(this.resources.uTexture=h.source,this.resources.uSampler=h.source.style)}}class eR extends ic{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}}function nR(n,t){const e=n.anchor.x,i=n.anchor.y;t[0]=-e*n.width,t[1]=-i*n.height,t[2]=(1-e)*n.width,t[3]=-i*n.height,t[4]=(1-e)*n.width,t[5]=(1-i)*n.height,t[6]=-e*n.width,t[7]=(1-i)*n.height}function iR(n,t,e,i){let s=0;const o=n.length/(t||2),h=i.a,f=i.b,m=i.c,g=i.d,b=i.tx,x=i.ty;for(e*=t;s<o;){const E=n[e],A=n[e+1];n[e]=h*E+m*A+b,n[e+1]=f*E+g*A+x,e+=t,s++}}function rR(n,t){const e=n.texture,i=e.frame.width,s=e.frame.height;let o=0,h=0;n.applyAnchorToTexture&&(o=n.anchor.x,h=n.anchor.y),t[0]=t[6]=-o,t[2]=t[4]=1-o,t[1]=t[3]=-h,t[5]=t[7]=1-h;const f=Pt.shared;f.copyFrom(n._tileTransform.matrix),f.tx/=n.width,f.ty/=n.height,f.invert(),f.scale(n.width/i,n.height/s),iR(t,2,0,f)}const fg=new eR;class sR{constructor(){this.canBatch=!0,this.geometry=new ic({indices:fg.indices.slice(),positions:fg.positions.slice(),uvs:fg.uvs.slice()})}destroy(){var t;this.geometry.destroy(),(t=this.shader)==null||t.destroy()}}class aR{constructor(t){this._state=Yr.default2d,this._renderer=t}validateRenderable(t){const e=this._getTilingSpriteData(t),i=e.canBatch;this._updateCanBatch(t);const s=e.canBatch;if(s&&s===i){const{batchableMesh:o}=e;return!o._batcher.checkAndUpdateTexture(o,t.texture)}return i!==s}addRenderable(t,e){const i=this._renderer.renderPipes.batch;this._updateCanBatch(t);const s=this._getTilingSpriteData(t),{geometry:o,canBatch:h}=s;if(h){s.batchableMesh||(s.batchableMesh=new p_);const f=s.batchableMesh;t.didViewUpdate&&(this._updateBatchableMesh(t),f.geometry=o,f.renderable=t,f.transform=t.groupTransform,f.setTexture(t._texture)),f.roundPixels=this._renderer._roundPixels|t._roundPixels,i.addToBatch(f,e)}else i.break(e),s.shader||(s.shader=new tR),this.updateRenderable(t),e.add(t)}execute(t){const{shader:e}=this._getTilingSpriteData(t);e.groups[0]=this._renderer.globalUniforms.bindGroup;const i=e.resources.localUniforms.uniforms;i.uTransformMatrix=t.groupTransform,i.uRound=this._renderer._roundPixels|t._roundPixels,Uh(t.groupColorAlpha,i.uColor,0),this._state.blendMode=Eh(t.groupBlendMode,t.texture._source),this._renderer.encoder.draw({geometry:fg,shader:e,state:this._state})}updateRenderable(t){const e=this._getTilingSpriteData(t),{canBatch:i}=e;if(i){const{batchableMesh:s}=e;t.didViewUpdate&&this._updateBatchableMesh(t),s._batcher.updateElement(s)}else if(t.didViewUpdate){const{shader:s}=e;s.updateUniforms(t.width,t.height,t._tileTransform.matrix,t.anchor.x,t.anchor.y,t.texture)}}_getTilingSpriteData(t){return t._gpuData[this._renderer.uid]||this._initTilingSpriteData(t)}_initTilingSpriteData(t){const e=new sR;return e.renderable=t,t._gpuData[this._renderer.uid]=e,e}_updateBatchableMesh(t){const e=this._getTilingSpriteData(t),{geometry:i}=e,s=t.texture.source.style;s.addressMode!=="repeat"&&(s.addressMode="repeat",s.update()),rR(t,i.uvs),nR(t,i.positions)}destroy(){this._renderer=null}_updateCanBatch(t){const e=this._getTilingSpriteData(t),i=t.texture;let s=!0;return this._renderer.type===Br.WEBGL&&(s=this._renderer.context.supports.nonPowOf2wrapping),e.canBatch=i.textureMatrix.isSimple&&(s||i.source.isPowerOfTwo),e.canBatch}}aR.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"tilingSprite"};const lR={name:"local-uniform-msdf-bit",vertex:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32,
                uRound:f32,
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `},fragment:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
         `,main:`
            outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));
        `}},oR={name:"local-uniform-msdf-bit",vertex:{header:`
            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix *= uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `},fragment:{header:`
            uniform float uDistance;
         `,main:`
            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
        `}},uR={name:"msdf-bit",fragment:{header:`
            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {

                // MSDF
                var median = msdfColor.r + msdfColor.g + msdfColor.b -
                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                var screenPxDistance = distance * (median - 0.5);
                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
                var coverage: f32 = pow(shapeColor.a * alpha, gamma);

                return coverage;

            }
        `}},cR={name:"msdf-bit",fragment:{header:`
            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {

                // MSDF
                float median = msdfColor.r + msdfColor.g + msdfColor.b -
                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                float screenPxDistance = distance * (median - 0.5);
                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);

                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
                float gamma = mix(1.0, 1.0 / 2.2, luma);
                float coverage = pow(shapeColor.a * alpha, gamma);

                return coverage;
            }
        `}};let k0,X0;class hR extends Kr{constructor(t){const e=new Xn({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new Pt,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}});k0??(k0=Bh({name:"sdf-shader",bits:[Wg,Zg(t),lR,uR,Mh]})),X0??(X0=Rh({name:"sdf-shader",bits:[Qg,Jg(t),oR,cR,Dh]})),super({glProgram:X0,gpuProgram:k0,resources:{localUniforms:e,batchSamplers:$g(t)}})}}class fR extends tc{destroy(){this.context.customShader&&this.context.customShader.destroy(),super.destroy()}}class dR{constructor(t){this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuBitmapText")}validateRenderable(t){const e=this._getGpuBitmapText(t);return t._didTextUpdate&&(t._didTextUpdate=!1,this._updateContext(t,e)),this._renderer.renderPipes.graphics.validateRenderable(e)}addRenderable(t,e){const i=this._getGpuBitmapText(t);tS(t,i),t._didTextUpdate&&(t._didTextUpdate=!1,this._updateContext(t,i)),this._renderer.renderPipes.graphics.addRenderable(i,e),i.context.customShader&&this._updateDistanceField(t)}updateRenderable(t){const e=this._getGpuBitmapText(t);tS(t,e),this._renderer.renderPipes.graphics.updateRenderable(e),e.context.customShader&&this._updateDistanceField(t)}_updateContext(t,e){const{context:i}=e,s=Gd.getFont(t.text,t._style);i.clear(),s.distanceField.type!=="none"&&(i.customShader||(i.customShader=new hR(this._renderer.limits.maxBatchableTextures)));const o=_s.graphemeSegmenter(t.text),h=t._style;let f=s.baseLineOffset;const m=Xb(o,h,s,!0);let g=0;const b=h.padding,x=m.scale;let E=m.width,A=m.height+m.offsetY;h._stroke&&(E+=h._stroke.width/x,A+=h._stroke.width/x),i.translate(-t._anchor._x*E-b,-t._anchor._y*A-b).scale(x,x);const R=s.applyFillAsTint?h._fill.color:16777215;for(let D=0;D<m.lines.length;D++){const B=m.lines[D];for(let P=0;P<B.charPositions.length;P++){const G=o[g++],H=s.chars[G];H!=null&&H.texture&&i.texture(H.texture,R||"black",Math.round(B.charPositions[P]+H.xOffset),Math.round(f+H.yOffset))}f+=s.lineHeight}}_getGpuBitmapText(t){return t._gpuData[this._renderer.uid]||this.initGpuText(t)}initGpuText(t){const e=new fR;return t._gpuData[this._renderer.uid]=e,this._updateContext(t,e),e}_updateDistanceField(t){const e=this._getGpuBitmapText(t).context,i=t._style.fontFamily,s=Qe.get(`${i}-bitmap`),{a:o,b:h,c:f,d:m}=t.groupTransform,g=Math.sqrt(o*o+h*h),b=Math.sqrt(f*f+m*m),x=(Math.abs(g)+Math.abs(b))/2,E=s.baseRenderedFontSize/t._style.fontSize,A=x*s.distanceField.range*(1/E);e.customShader.resources.localUniforms.uniforms.uDistance=A}destroy(){this._renderer=null}}dR.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"bitmapText"};function tS(n,t){t.groupTransform=n.groupTransform,t.groupColorAlpha=n.groupColorAlpha,t.groupColor=n.groupColor,t.groupBlendMode=n.groupBlendMode,t.globalDisplayStatus=n.globalDisplayStatus,t.groupTransform=n.groupTransform,t.localDisplayStatus=n.localDisplayStatus,t.groupAlpha=n.groupAlpha,t._roundPixels=n._roundPixels}class pR extends Wd{constructor(t){super(),this.generatingTexture=!1,this._renderer=t,t.runners.resolutionChange.add(this)}resolutionChange(){const t=this.renderable;t._autoResolution&&t.onViewUpdate()}destroy(){this._renderer.htmlText.returnTexturePromise(this.texturePromise),this.texturePromise=null,this._renderer=null}}function Cg(n,t){const{texture:e,bounds:i}=n;hb(i,t._anchor,e);const s=t._style._getFinalPadding();i.minX-=s,i.minY-=s,i.maxX-=s,i.maxY-=s}class mR{constructor(t){this._renderer=t}validateRenderable(t){return t._didTextUpdate}addRenderable(t,e){const i=this._getGpuText(t);t._didTextUpdate&&(this._updateGpuText(t).catch(s=>{console.error(s)}),t._didTextUpdate=!1,Cg(i,t)),this._renderer.renderPipes.batch.addToBatch(i,e)}updateRenderable(t){const e=this._getGpuText(t);e._batcher.updateElement(e)}async _updateGpuText(t){t._didTextUpdate=!1;const e=this._getGpuText(t);if(e.generatingTexture)return;e.texturePromise&&(this._renderer.htmlText.returnTexturePromise(e.texturePromise),e.texturePromise=null),e.generatingTexture=!0,t._resolution=t._autoResolution?this._renderer.resolution:t.resolution;const i=this._renderer.htmlText.getTexturePromise(t);e.texturePromise=i,e.texture=await i;const s=t.renderGroup||t.parentRenderGroup;s&&(s.structureDidChange=!0),e.generatingTexture=!1,Cg(e,t)}_getGpuText(t){return t._gpuData[this._renderer.uid]||this.initGpuText(t)}initGpuText(t){const e=new pR(this._renderer);return e.renderable=t,e.transform=t.groupTransform,e.texture=Ct.EMPTY,e.bounds={minX:0,maxX:1,minY:0,maxY:0},e.roundPixels=this._renderer._roundPixels|t._roundPixels,t._resolution=t._autoResolution?this._renderer.resolution:t.resolution,t._gpuData[this._renderer.uid]=e,e}destroy(){this._renderer=null}}mR.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"htmlText"};function gR(){const{userAgent:n}=pe.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(n)}const MU=new ti;function _2(n,t,e,i){const s=MU;s.minX=0,s.minY=0,s.maxX=n.width/i|0,s.maxY=n.height/i|0;const o=Vn.getOptimalTexture(s.width,s.height,i,!1);return o.source.uploadMethodId="image",o.source.resource=n,o.source.alphaMode="premultiply-alpha-on-upload",o.frame.width=t/i,o.frame.height=e/i,o.source.emit("update",o.source),o.updateUvs(),o}function _R(n,t){const e=t.fontFamily,i=[],s={},o=/font-family:([^;"\s]+)/g,h=n.match(o);function f(m){s[m]||(i.push(m),s[m]=!0)}if(Array.isArray(e))for(let m=0;m<e.length;m++)f(e[m]);else f(e);h&&h.forEach(m=>{const g=m.split(":")[1].trim();f(g)});for(const m in t.tagStyles){const g=t.tagStyles[m].fontFamily;f(g)}return i}async function yR(n){const e=await(await pe.get().fetch(n)).blob(),i=new FileReader;return await new Promise((o,h)=>{i.onloadend=()=>o(i.result),i.onerror=h,i.readAsDataURL(e)})}async function Qy(n,t){const e=await yR(t);return`@font-face {
        font-family: "${n.fontFamily}";
        src: url('${e}');
        font-weight: ${n.fontWeight};
        font-style: ${n.fontStyle};
    }`}const fd=new Map;async function bR(n,t,e){const i=n.filter(s=>Qe.has(`${s}-and-url`)).map((s,o)=>{if(!fd.has(s)){const{url:h}=Qe.get(`${s}-and-url`);o===0?fd.set(s,Qy({fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:s},h)):fd.set(s,Qy({fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:s},h))}return fd.get(s)});return(await Promise.all(i)).join(`
`)}function vR(n,t,e,i,s){const{domElement:o,styleElement:h,svgRoot:f}=s;o.innerHTML=`<style>${t.cssStyle}</style><div style='padding:0;'>${n}</div>`,o.setAttribute("style",`transform: scale(${e});transform-origin: top left; display: inline-block`),h.textContent=i;const{width:m,height:g}=s.image;return f.setAttribute("width",m.toString()),f.setAttribute("height",g.toString()),new XMLSerializer().serializeToString(f)}function xR(n,t){const e=Xl.getOptimalCanvasAndContext(n.width,n.height,t),{context:i}=e;return i.clearRect(0,0,n.width,n.height),i.drawImage(n,0,0),e}function SR(n,t,e){return new Promise(async i=>{e&&await new Promise(s=>setTimeout(s,100)),n.onload=()=>{i()},n.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(t)}`,n.crossOrigin="anonymous"})}class ER{constructor(t){this._renderer=t,this._createCanvas=t.type===Br.WEBGPU}getTexture(t){return this.getTexturePromise(t)}getTexturePromise(t){return this._buildTexturePromise(t)}async _buildTexturePromise(t){const{text:e,style:i,resolution:s,textureStyle:o}=t,h=mi.get(ev),f=_R(e,i),m=await bR(f,i,Kd.defaultTextStyle),g=nv(e,i,m,h),b=Math.ceil(Math.ceil(Math.max(1,g.width)+i.padding*2)*s),x=Math.ceil(Math.ceil(Math.max(1,g.height)+i.padding*2)*s),E=h.image,A=2;E.width=(b|0)+A,E.height=(x|0)+A;const R=vR(e,i,s,m,h);await SR(E,R,gR()&&f.length>0);const D=E;let B;this._createCanvas&&(B=xR(E,s));const P=_2(B?B.canvas:D,E.width-A,E.height-A,s);return o&&(P.source.style=o),this._createCanvas&&(this._renderer.texture.initSource(P.source),Xl.returnCanvasAndContext(B)),mi.return(h),P}returnTexturePromise(t){t.then(e=>{this._cleanUp(e)}).catch(()=>{Xt("HTMLTextSystem: Failed to clean texture")})}_cleanUp(t){Vn.returnTexture(t,!0),t.source.resource=null,t.source.uploadMethodId="unknown"}destroy(){this._renderer=null}}ER.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"htmlText"};class TR extends Wd{constructor(t){super(),this._renderer=t,t.runners.resolutionChange.add(this)}resolutionChange(){const t=this.renderable;t._autoResolution&&t.onViewUpdate()}destroy(){this._renderer.canvasText.returnTexture(this.texture),this._renderer=null}}class AR{constructor(t){this._renderer=t}validateRenderable(t){return t._didTextUpdate}addRenderable(t,e){const i=this._getGpuText(t);t._didTextUpdate&&(this._updateGpuText(t),t._didTextUpdate=!1),this._renderer.renderPipes.batch.addToBatch(i,e)}updateRenderable(t){const e=this._getGpuText(t);e._batcher.updateElement(e)}_updateGpuText(t){const e=this._getGpuText(t);e.texture&&this._renderer.canvasText.returnTexture(e.texture),t._resolution=t._autoResolution?this._renderer.resolution:t.resolution,e.texture=e.texture=this._renderer.canvasText.getTexture(t),Cg(e,t)}_getGpuText(t){return t._gpuData[this._renderer.uid]||this.initGpuText(t)}initGpuText(t){const e=new TR(this._renderer);return e.renderable=t,e.transform=t.groupTransform,e.bounds={minX:0,maxX:1,minY:0,maxY:0},e.roundPixels=this._renderer._roundPixels|t._roundPixels,t._gpuData[this._renderer.uid]=e,e}destroy(){this._renderer=null}}AR.extension={type:[q.WebGLPipes,q.WebGPUPipes,q.CanvasPipes],name:"text"};class CR{constructor(t){this._renderer=t}getTexture(t,e,i,s){typeof t=="string"&&(wt("8.0.0","CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments"),t={text:t,style:i,resolution:e}),t.style instanceof Rr||(t.style=new Rr(t.style)),t.textureStyle instanceof vs||(t.textureStyle=new vs(t.textureStyle)),typeof t.text!="string"&&(t.text=t.text.toString());const{text:o,style:h,textureStyle:f}=t,m=t.resolution??this._renderer.resolution,{frame:g,canvasAndContext:b}=yh.getCanvasAndContext({text:o,style:h,resolution:m}),x=_2(b.canvas,g.width,g.height,m);if(f&&(x.source.style=f),h.trim&&(g.pad(h.padding),x.frame.copyFrom(g),x.updateUvs()),h.filters){const E=this._applyFilters(x,h.filters);return this.returnTexture(x),yh.returnCanvasAndContext(b),E}return this._renderer.texture.initSource(x._source),yh.returnCanvasAndContext(b),x}returnTexture(t){const e=t.source;e.resource=null,e.uploadMethodId="unknown",e.alphaMode="no-premultiply-alpha",Vn.returnTexture(t,!0)}renderTextToCanvas(){wt("8.10.0","CanvasTextSystem.renderTextToCanvas: no longer supported, use CanvasTextSystem.getTexture instead")}_applyFilters(t,e){const i=this._renderer.renderTarget.renderTarget,s=this._renderer.filter.generateFilteredTexture({texture:t,filters:e});return this._renderer.renderTarget.bind(i,!1),s}destroy(){this._renderer=null}}CR.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"canvasText"};async function DU(n,t,e=200){const i=await t.extract.base64(n);await t.encoder.commandFinished;const s=e;console.log(`logging texture ${n.source.width}px ${n.source.height}px`);const o=["font-size: 1px;",`padding: ${s}px 300px;`,`background: url(${i}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",o)}const wU=["#000080","#228B22","#8B0000","#4169E1","#008080","#800000","#9400D3","#FF8C00","#556B2F","#8B008B"];let UU=0;function BR(n,t=0,e={color:"#000000"}){n.renderGroup&&(e.color=wU[UU++]);let i="";for(let h=0;h<t;h++)i+="    ";let s=n.label;!s&&n instanceof Di&&(s=`sprite:${n.texture.label}`);let o=`%c ${i}|- ${s} (worldX:${n.worldTransform.tx}, relativeRenderX:${n.relativeGroupTransform.tx}, renderX:${n.groupTransform.tx}, localX:${n.x})`;n.renderGroup&&(o+=" (RenderGroup)"),n.filters&&(o+="(*filters)"),console.log(o,`color:${e.color}; font-weight:bold;`),t++;for(let h=0;h<n.children.length;h++){const f=n.children[h];BR(f,t,{...e})}}function RR(n,t=0,e={index:0,color:"#000000"}){let i="";for(let o=0;o<t;o++)i+="    ";const s=`%c ${i}- ${e.index}: ${n.root.label} worldX:${n.worldTransform.tx}`;console.log(s,`color:${e.color}; font-weight:bold;`),t++;for(let o=0;o<n.renderGroupChildren.length;o++){const h=n.renderGroupChildren[o];RR(h,t,{...e,index:o})}}De.add(AS,CS);const OU=Object.freeze(Object.defineProperty({__proto__:null,AbstractBitmapFont:Mb,AbstractRenderer:Vd,AbstractText:a_,AccessibilitySystem:e4,AlphaFilter:$8,AlphaMask:gb,AlphaMaskPipe:lv,AnimatedSprite:zd,Application:Ig,ApplicationInitHook:Bb,Assets:bs,AssetsClass:FT,BLEND_TO_NPM:_3,BUFFER_TYPE:vd,BackgroundLoader:yT,BackgroundSystem:HC,Batch:v3,BatchGeometry:C3,BatchTextureArray:b3,BatchableGraphics:e_,BatchableHTMLText:pR,BatchableMesh:p_,BatchableSprite:Wd,BatchableText:TR,Batcher:T3,BatcherPipe:av,BigPool:mi,BindGroup:Za,BindGroupSystem:$v,BitmapFont:Ib,BitmapFontManager:Gd,BitmapText:HA,BitmapTextGraphics:fR,BitmapTextPipe:dR,BlendModeFilter:Gn,BlendModePipe:Xv,BlurFilter:gA,BlurFilterPass:ug,Bounds:ti,BrowserAdapter:rE,Buffer:Cr,BufferImageSource:Pg,BufferResource:u_,BufferUsage:be,CLEAR:Ar,Cache:Qe,CanvasPool:Xl,CanvasPoolClass:fT,CanvasSource:Qa,CanvasTextGenerator:yh,CanvasTextMetrics:_s,CanvasTextPipe:AR,CanvasTextSystem:CR,Circle:Yg,Color:Ce,ColorBlend:zE,ColorBurnBlend:LE,ColorDodgeBlend:HE,ColorMask:_b,ColorMaskPipe:ov,ColorMatrixFilter:n5,CompressedSource:qd,Container:kn,Culler:tA,CullerPlugin:eA,CustomRenderPipe:Nv,D3D10_RESOURCE_DIMENSION:Qb,D3DFMT:Er,DATA_URI:A4,DDS:Qt,DEG_TO_RAD:MS,DEPRECATED_SCALE_MODES:Ag,DEPRECATED_WRAP_MODES:Tg,DOMAdapter:pe,DOMContainer:F8,DOMPipe:nA,DRAW_MODES:nU,DXGI_FORMAT:Wb,DXGI_TO_TEXTURE_FORMAT:Tr,DarkenBlend:FE,DefaultBatcher:t_,DefaultShader:L3,DifferenceBlend:VE,DisplacementFilter:i5,DivideBlend:kE,DynamicBitmapFont:Ty,Ellipse:qg,EventBoundary:rA,EventEmitter:ei,EventSystem:sA,EventsTicker:Hl,ExclusionBlend:XE,ExtensionType:q,ExtractSystem:VC,FOURCC_TO_TEXTURE_FORMAT:wy,FederatedContainer:J8,FederatedEvent:Ch,FederatedMouseEvent:Nd,FederatedPointerEvent:ms,FederatedWheelEvent:$u,FillGradient:Ja,FillPattern:Id,Filter:qi,FilterEffect:Td,FilterPipe:EA,FilterSystem:AA,FontStylePromiseCache:fd,GAUSSIAN_VALUES:Jb,GL_FORMATS:vg,GL_INTERNAL_FORMAT:jT,GL_TARGETS:dv,GL_TYPES:Ae,GL_WRAP_MODES:$A,GenerateTextureSystem:Yv,Geometry:ec,GlBackBufferSystem:nC,GlBatchAdaptor:iv,GlBuffer:QA,GlBufferSystem:cv,GlColorMaskSystem:gv,GlContextSystem:JA,GlEncoderSystem:_v,GlGeometrySystem:pv,GlGraphicsAdaptor:Pv,GlLimitsSystem:yv,GlMeshAdaptor:Gv,GlParticleContainerAdaptor:PB,GlParticleContainerPipe:VB,GlProgram:jr,GlProgramData:pC,GlRenderTarget:iC,GlRenderTargetAdaptor:oC,GlRenderTargetSystem:Bv,GlShaderSystem:Dv,GlStateSystem:CC,GlStencilSystem:bv,GlTexture:BC,GlTextureSystem:Ov,GlUboSystem:Tv,GlUniformGroupSystem:wv,GlobalUniformSystem:qv,GpuBatchAdaptor:rv,GpuBlendModesToPixi:rr,GpuBufferSystem:t2,GpuColorMaskSystem:e2,GpuDeviceSystem:f_,GpuEncoderSystem:n2,GpuGraphicsAdaptor:p2,GpuGraphicsContext:$3,GpuLimitsSystem:i2,GpuMeshAdapter:m2,GpuMipmapGenerator:cB,GpuParticleContainerAdaptor:GB,GpuParticleContainerPipe:kB,GpuProgram:Dr,GpuRenderTarget:sB,GpuRenderTargetAdaptor:aB,GpuRenderTargetSystem:o2,GpuShaderSystem:u2,GpuStateSystem:c2,GpuStencilModesToPixi:Il,GpuStencilSystem:r2,GpuTextureSystem:d2,GpuUboSystem:s2,GpuUniformBatchPipe:a2,Graphics:tc,GraphicsContext:ir,GraphicsContextRenderData:tT,GraphicsContextSystem:zb,GraphicsGpuData:mB,GraphicsPath:Ju,GraphicsPipe:gB,HTMLText:XA,HTMLTextPipe:mR,HTMLTextRenderData:ev,HTMLTextStyle:Kd,HTMLTextSystem:ER,HardLightBlend:IE,HardMixBlend:YE,HelloSystem:h_,IGLUniformData:x5,ImageSource:Xo,InstructionSet:mb,KTX:Un,LightenBlend:qE,LinearBurnBlend:jE,LinearDodgeBlend:KE,LinearLightBlend:WE,Loader:CT,LoaderParserPriority:Mr,LuminosityBlend:QE,MaskEffectManager:dg,MaskEffectManagerClass:IS,MaskFilter:RA,Matrix:Pt,Mesh:wh,MeshGeometry:ic,MeshGpuData:Iy,MeshPipe:OB,MeshPlane:vU,MeshRope:xU,MeshSimple:SU,NOOP:ub,NegationBlend:ZE,NineSliceGeometry:Ho,NineSlicePlane:RU,NineSliceSprite:WB,NineSliceSpriteGpuData:QB,NineSliceSpritePipe:ZB,NoiseFilter:r5,ObservablePoint:Fn,OverlayBlend:JE,PI_2:BS,Particle:AU,ParticleBuffer:zB,ParticleContainer:BU,ParticleContainerPipe:g2,ParticleShader:FB,PerspectiveMesh:bU,PerspectivePlaneGeometry:AB,PinLightBlend:$E,PipelineSystem:l2,PlaneGeometry:d_,Point:Xe,Polygon:dh,Pool:Gg,PoolGroupClass:FS,PrepareBase:wA,PrepareQueue:LA,PrepareSystem:YA,PrepareUpload:IA,QuadGeometry:eR,RAD_TO_DEG:RS,Rectangle:Oe,RenderContainer:oU,RenderGroup:nE,RenderGroupPipe:zv,RenderGroupSystem:Fv,RenderLayer:dU,RenderTarget:xg,RenderTargetSystem:Cv,RenderTexture:c_,RenderableGCSystem:qC,RendererInitHook:Rb,RendererType:Br,ResizePlugin:d3,Resolver:Yo,RopeGeometry:DB,RoundedRectangle:jg,SCALE_MODES:rU,STENCIL_MODES:On,SVGParser:oT,SaturationBlend:t3,SchedulerSystem:jv,ScissorMask:g5,SdfShader:hR,Shader:Kr,ShaderStage:oh,ShapePath:aT,SharedRenderPipes:Jv,SharedSystems:Zv,SoftLightBlend:e3,Sprite:Di,SpritePipe:Vv,Spritesheet:ry,State:Yr,StencilMask:yb,StencilMaskPipe:uv,SubtractBlend:n3,SystemRunner:Cb,TEXTURE_FORMAT_BLOCK_SIZE:YT,Text:tv,TextStyle:Rr,Texture:Ct,TextureGCSystem:KC,TextureMatrix:cb,TexturePool:Vn,TexturePoolClass:eE,TextureSource:Sn,TextureStyle:vs,TextureUvs:sU,Ticker:Pn,TickerListener:ag,TickerPlugin:p3,TilingSprite:NA,TilingSpriteGpuData:sR,TilingSpritePipe:aR,TilingSpriteShader:tR,Transform:PA,Triangle:$b,UNIFORM_TO_ARRAY_SETTERS:SC,UNIFORM_TO_SINGLE_SETTERS:xC,UNIFORM_TYPES_MAP:RE,UNIFORM_TYPES_VALUES:Eb,UPDATE_BLEND:Lg,UPDATE_COLOR:Cd,UPDATE_PRIORITY:Vl,UPDATE_TRANSFORM:HD,UPDATE_VISIBLE:fh,UboBatch:eB,UboSystem:vv,UniformGroup:Xn,VERSION:wd,VideoSource:_d,ViewContainer:$a,ViewSystem:QC,ViewableBuffer:Wu,VividLightBlend:i3,WGSL_ALIGN_SIZE_DATA:Sd,WGSL_TO_STD40_SIZE:xv,WRAP_MODES:iU,WebGLRenderer:tB,WebGPURenderer:pB,WebWorkerAdapter:q8,WorkerManager:Ry,accessibilityTarget:n4,addBits:py,addMaskBounds:Hg,addMaskLocalBounds:Fg,addProgramDefines:yE,alphaFrag:aA,alphaWgsl:Py,applyMatrix:iR,applyProjectiveTransformationToPlane:xB,applyStyleParams:Xy,assignWithIgnore:pg,autoDetectEnvironment:l4,autoDetectRenderer:h3,autoDetectSource:kD,basisTranscoderUrls:_g,bgr2rgb:hh,bitmapFontCachePlugin:gT,bitmapFontTextParser:og,bitmapFontXMLParser:Ay,bitmapFontXMLStringParser:Cy,blendTemplateFrag:PE,blendTemplateVert:GE,blendTemplateWgsl:NE,blockDataMap:h2,blurTemplateWgsl:fA,boundsPool:Wa,browserExt:AS,buildAdaptiveBezier:Lb,buildAdaptiveQuadratic:eT,buildArc:Hb,buildArcTo:nT,buildArcToSvg:iT,buildCircle:Th,buildContextBatches:J3,buildEllipse:X3,buildLine:q3,buildPixelLine:j3,buildPolygon:K3,buildRectangle:W3,buildRoundedRectangle:I3,buildSimpleUvs:k3,buildTriangle:Q3,buildUvs:V3,cacheAsTextureMixin:VS,cacheTextureArray:bT,calculateProjection:uC,checkChildrenDidChange:pb,checkDataUrl:nc,checkExtension:xs,checkMaxIfStatementsInShader:wb,childrenHelperMixin:kS,cleanArray:IC,cleanHash:XC,clearList:Eg,closePointEps:Pb,collectAllRenderables:uU,collectRenderablesMixin:XS,color32BitToUniform:Uh,colorBit:Wg,colorBitGl:Qg,colorMatrixFilterFrag:_A,colorMatrixFilterWgsl:Gy,colorToUniform:V5,compareModeToGlCompare:UC,compileHighShader:R3,compileHighShaderGl:M3,compileHighShaderGlProgram:Rh,compileHighShaderGpuProgram:Bh,compileHooks:my,compileInputs:gy,compileOutputs:B3,compileShader:Fy,compute2DProjection:TB,convertFormatIfRequired:M8,convertToList:gs,copySearchParams:mg,createIdFromString:xh,createIndicesForQuads:Yy,createLevelBuffers:e8,createLevelBuffersFromKTX:D8,createStringVariations:cE,createTexture:qo,createUboElementsSTD40:rC,createUboElementsWGSL:nB,createUboSyncFunction:Sv,createUboSyncFunctionSTD40:lC,createUboSyncFunctionWGSL:rB,crossOrigin:GT,cullingMixin:HS,curveEps:yy,defaultFilterVert:s_,defaultValue:Rv,definedProps:sa,deprecation:wt,detectAvif:vT,detectBasis:Qw,detectCompressed:z8,detectDefaults:xT,detectMp4:ST,detectOgv:ET,detectVideoAlphaMode:bb,detectWebm:TT,detectWebp:AT,determineCrossOrigin:zT,displacementFrag:yA,displacementVert:bA,displacementWgsl:Ny,earcut:o3,effectsMixin:YS,ensureAttributes:fv,ensureIsBuffer:Ub,ensurePrecision:bE,ensureTextOptions:l_,executeInstructions:Sg,extensions:De,extractAttributesFromGlProgram:gC,extractAttributesFromGpuProgram:TE,extractFontFamilies:_R,extractStructAndGroups:lg,extractSvgUrlId:Sy,fastCopy:gg,findMixin:qS,fontStringFromTextStyle:Ud,formatShader:d5,fragmentGPUTemplate:O3,fragmentGlTemplate:G3,generateArraySyncSTD40:aC,generateArraySyncWGSL:iB,generateBlurFragSource:uA,generateBlurGlProgram:hA,generateBlurProgram:dA,generateBlurVertSource:cA,generateGPULayout:h5,generateGpuLayoutGroups:AE,generateLayout:f5,generateLayoutHash:CE,generateParticleUpdateFunction:NB,generateProgram:vC,generateShaderSyncCode:dC,generateTextStyleKey:cT,generateTextureBatchBit:Zg,generateTextureBatchBitGl:Jg,generateTextureMatrix:Z3,generateUniformsSync:EC,getAdjustedBlendModeBlend:Eh,getAttributeInfoFromFormat:kl,getBatchSamplersUniformGroup:$g,getBitmapTextLayout:Xb,getCanvasBoundingBox:zA,getCanvasFillStyle:Pd,getCanvasTexture:Av,getDefaultUniformValue:ME,getFastGlobalBounds:lU,getFastGlobalBoundsMixin:jS,getFontCss:bR,getFontFamilyName:MT,getGeometryBounds:A3,getGlTypeFromFormat:tC,getGlobalBounds:Fd,getGlobalMixin:WS,getGlobalRenderableBounds:TA,getLocalBounds:zg,getMaxFragmentPrecision:_E,getMaxTexturesPerBatch:y3,getOrientationOfPoints:Y3,getPo2TextureFromSource:_2,getResolutionOfUrl:i_,getSVGUrl:vR,getSupportedCompressedTextureFormats:Kb,getSupportedGPUCompressedTextureFormats:Dy,getSupportedGlCompressedTextureFormats:My,getSupportedTextureFormats:jd,getTemporaryCanvasFromImage:xR,getTestContext:Sb,getTextureBatchBindGroup:Kg,getTextureDefaultMatrix:EU,getTextureFormatFromKTXTexture:O8,getUboData:_C,getUniformData:yC,getUrlExtension:hE,glFormatToGPUFormat:JT,glUploadBufferImageResource:RC,glUploadCompressedTextureResource:MC,glUploadImageResource:Uv,glUploadVideoResource:DC,globalUniformsBit:N3,globalUniformsBitGl:z3,globalUniformsUBOBitGl:I4,gpuFormatToBasisTranscoderFormat:i8,gpuFormatToKTXBasisTranscoderFormat:G8,gpuUploadBufferImageResource:lB,gpuUploadCompressedTextureResource:oB,gpuUploadImageResource:f2,gpuUploadVideoResource:uB,groupD8:me,hasCachedCanvasTexture:v5,hslWgsl:l5,hslgl:kg,hslgpu:Xg,injectBits:_y,insertVersion:vE,isMobile:mE,isPow2:ty,isRenderingToScreen:cC,isSafari:gR,isSingleItem:Bd,isWebGLSupported:kd,isWebGPUSupported:Xd,ktxTranscoderUrls:yg,loadBasis:t8,loadBasisOnWorker:IT,loadBitmapFont:_T,loadDDS:c8,loadEnvironmentExtensions:Tb,loadFontAsBase64:yR,loadFontCSS:Qy,loadImageBitmap:OT,loadJson:BT,loadKTX:T8,loadKTX2:R8,loadKTX2onWorker:ZT,loadSVGImage:SR,loadSvg:wT,loadTextures:qb,loadTxt:RT,loadVideoTextures:LT,loadWebFont:DT,localUniformBit:bh,localUniformBitGl:o_,localUniformBitGroup2:jA,localUniformMSDFBit:lR,localUniformMSDFBitGl:oR,log2:TD,logDebugTexture:DU,logProgramError:bC,logRenderGroupScene:RR,logScene:BR,mSDFBit:uR,mSDFBitGl:cR,mapFormatToGlFormat:OC,mapFormatToGlInternalFormat:PC,mapFormatToGlType:GC,mapGlToVertexFormat:mC,mapSize:A5,mapType:Mv,mapWebGLBlendModesToPixi:TC,maskFrag:CA,maskVert:BA,maskWgsl:Ly,matrixPool:Yi,measureHtmlText:nv,measureMixin:ZS,migrateFragmentFromV7toV8:E5,mipmapScaleModeToGlFilter:wC,multiplyColors:Ad,multiplyHexColors:db,nextPow2:Qu,noiseFrag:vA,noiseWgsl:zy,nonCompressedFormats:VT,normalizeExtensionPriority:od,onRenderMixin:JS,parseDDS:qT,parseFunctionBody:aU,parseKTX:KT,parseSVGDefinitions:lT,parseSVGFloatAttribute:vn,parseSVGPath:m3,parseSVGStyle:Fb,particleData:Ky,particlesFrag:LB,particlesVert:HB,particlesWgsl:qy,path:gi,pointInTriangle:Hy,preloadVideo:NT,removeItems:fb,removeStructAndGroupDuplicates:BE,resetUids:ED,resolveCharacters:mT,resolveCompressedTextureUrl:N8,resolveJsonUrl:HT,resolveTextureUrl:jb,resourceToTexture:lE,roundPixelsBit:Mh,roundPixelsBitGl:Dh,roundedShapeArc:rT,roundedShapeQuadraticCurve:sT,sayHello:kC,scaleModeToGlFilter:ky,setBasisTranscoderPath:Jw,setKTXTranscoderPath:C8,setPositions:nR,setProgramName:xE,setUvs:rR,shapeBuilders:Yd,sortMixin:$S,spritesheetAsset:pE,squaredDistanceToLineSegment:yd,stripVersion:SE,styleAttributes:Ey,testImageFormat:Yb,testVideoFormat:n_,textStyleToCSS:FA,textureBit:KA,textureBitGl:WA,textureFrom:oE,tilingBit:JB,tilingBitGl:$B,toFillStyle:Vo,toLocalGlobalMixin:tE,toStrokeStyle:Od,transformVertices:Ob,triangulateWithHoles:Gb,uboSyncFunctionsSTD40:Ev,uboSyncFunctionsWGSL:sC,uid:rn,uniformParsers:ko,unpremultiplyAlpha:O5,unsafeEvalSupported:Ab,updateLocalTransform:cU,updateQuadBounds:hb,updateRenderGroupTransform:NC,updateRenderGroupTransforms:Lv,updateTextBounds:Cg,updateTransformAndChildren:Hv,updateTransformBackwards:Ng,updateWorldTransform:hU,v8_0_0:Jt,v8_3_4:wS,validFormats:bg,validateRenderables:zC,vertexGPUTemplate:U3,vertexGlTemplate:P3,vkFormatToGPUFormat:$T,warn:Xt,webworkerExt:CS,wrapModeToGlAddress:hg},Symbol.toStringTag,{value:"Module"}));function PU(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var MR={exports:{}},zl={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eS;function GU(){return eS||(eS=1,zl.ConcurrentRoot=1,zl.ContinuousEventPriority=8,zl.DefaultEventPriority=32,zl.DiscreteEventPriority=2,zl.IdleEventPriority=268435456,zl.LegacyRoot=0,zl.NoEventPriority=0),zl}MR.exports=GU();var uh=MR.exports;const y2=zt.createContext({}),NU=y2.Provider;y2.Consumer;function DR(n,t){const e=Object.getPrototypeOf(n),i=Object.getOwnPropertyDescriptor(e,t);return!(typeof i>"u"||i.writable||i.set)}const Io={currentUpdatePriority:uh.DefaultEventPriority,unmountQueue:new Set};function nS(n,...t){}function wR(n,t={}){const e=n;return e.__pixireact=Object.assign({filters:[],parent:null,root:null,type:""},t),e}var zU="0.0.0-development",LU={version:zU};function HU(){}function UR(n,t,e){t instanceof qi&&(t.__pixireact.parent=n,typeof e=="number"?n.__pixireact.filters.splice(e,0,t):n.__pixireact.filters.push(t),n.filters=n.__pixireact.filters)}function I0(n,t){t&&(t instanceof kn?n.addChild(t):t instanceof qi&&UR(n,t))}function FU(){}function VU(){return!1}const Zy=Object.freeze({onclick:"onClick",onglobalmousemove:"onGlobalMouseMove",onglobalpointermove:"onGlobalPointerMove",onglobaltouchmove:"onGlobalTouchMove",onmousedown:"onMouseDown",onmouseenter:"onMouseEnter",onmouseleave:"onMouseLeave",onmousemove:"onMouseMove",onmouseout:"onMouseOut",onmouseover:"onMouseOver",onmouseup:"onMouseUp",onmouseupoutside:"onMouseUpOutside",onpointercancel:"onPointerCancel",onpointerdown:"onPointerDown",onpointerenter:"onPointerEnter",onpointerleave:"onPointerLeave",onpointermove:"onPointerMove",onpointerout:"onPointerOut",onpointerover:"onPointerOver",onpointertap:"onPointerTap",onpointerup:"onPointerUp",onpointerupoutside:"onPointerUpOutside",onrightclick:"onRightClick",onrightdown:"onRightDown",onrightup:"onRightUp",onrightupoutside:"onRightUpOutside",ontap:"onTap",ontouchcancel:"onTouchCancel",ontouchend:"onTouchEnd",ontouchendoutside:"onTouchEndOutside",ontouchmove:"onTouchMove",ontouchstart:"onTouchStart",onwheel:"onWheel"}),Bg=Object.freeze({onClick:"onclick",onGlobalMouseMove:"onglobalmousemove",onGlobalPointerMove:"onglobalpointermove",onGlobalTouchMove:"onglobaltouchmove",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseUpOutside:"onmouseupoutside",onPointerCancel:"onpointercancel",onPointerDown:"onpointerdown",onPointerEnter:"onpointerenter",onPointerLeave:"onpointerleave",onPointerMove:"onpointermove",onPointerOut:"onpointerout",onPointerOver:"onpointerover",onPointerTap:"onpointertap",onPointerUp:"onpointerup",onPointerUpOutside:"onpointerupoutside",onRightClick:"onrightclick",onRightDown:"onrightdown",onRightUp:"onrightup",onRightUpOutside:"onrightupoutside",onTap:"ontap",onTouchCancel:"ontouchcancel",onTouchEnd:"ontouchend",onTouchEndOutside:"ontouchendoutside",onTouchMove:"ontouchmove",onTouchStart:"ontouchstart",onWheel:"onwheel"});function OR(n){return Array.isArray(n)}function PR(n,t,e={arrays:"reference",objects:"reference",strict:!0}){const{arrays:i,objects:s,strict:o}=e;if(typeof n!=typeof t||!!n!=!!t)return!1;if(YU(n)||XU(n))return n===t;const h=IU(n);if(h&&s==="reference")return n===t;const f=OR(n);if(f&&i==="reference")return n===t;if((f||h)&&n===t)return!0;let m;for(m in n)if(!(m in t))return!1;let g=n;if(o&&(g=t),h&&i==="shallow"&&s==="shallow"){for(m in g)if(!PR(n[m],t[m],{strict:o,objects:"reference"}))return!1}else for(m in g)if(n[m]!==t[m])return!1;if(GR(m)){if(f&&n.length===0&&t.length===0||h&&Object.keys(n).length===0&&Object.keys(t).length===0)return!0;if(n!==t)return!1}return!0}function kU(n){return n===null}function XU(n){return typeof n=="number"}function IU(n){return!(n!==Object(n)||OR(n)||typeof n=="function")}function YU(n){return typeof n=="string"}function GR(n){return n===void 0}const qU=Object.freeze(["children","key","ref"]);function jU(n,t=[]){const e={};return Object.entries(n).reduce((i,[s,o])=>(t.includes(s)||(i[s]=o),i),e)}function Jy(n,t=[]){return jU(n,qU.concat(t))}const KU="__default";function NR(n,t={},e=!1){const i=Jy(n),s=Jy(t),o=Object.entries(i),h=[];if(e){const f=Object.keys(s);let m=0;for(;m<f.length;){const g=f[m];!(g in i)&&o.unshift([g,`${KU}remove`]),m+=1}}return o.forEach(([f,m])=>{if(PR(m,s[f]))return;if(f in Bg){h.push([f,m,!0,[]]);return}let g=[];f.includes("-")&&(g=f.split("-")),h.push([f,m,!1,g]);for(const b in i){const x=i[b];b.startsWith(`${f}-`)&&h.push([b,x,!1,b.split("-")])}}),{changes:h}}function WU(n){const t=n;return!(!t||!t.changes)}const QU="__default",iS=new Map,rS={};function sS(n,t){if(n){const e=n[t];if(!GR(e)&&!kU(e))return e}return n}function zR(n,t){const{__pixireact:e={},...i}=n;let s;WU(t)?s=t:s=NR(t,i);const{changes:o}=s;let h=0;for(;h<o.length;){const f=o[h];let m=!1,g=f[0],b=f[1];const x=f[2],E=f[3];let A=n,R=A[g];if(g==="draw"&&typeof b=="function"&&(n instanceof tc?b(n):(m=!0,nS("warn",`The \`draw\` prop was used on a \`${e.type}\` component, but it's only valid on \`graphics\` components.`))),g in Zy){const D=g;m=!0,rS[g]||(rS[g]=!0,nS("warn",`Event names must be pascal case; instead of \`${g}\`, you probably want \`${Zy[D]}\`.`))}if(!m){if(E.length&&(R=E.reduce(sS,A),!(R&&R.set))){const[D,...B]=E.reverse();A=B.reverse().reduce(sS,A),g=D}if(b===`${QU}remove`)if(A instanceof kn){let D=iS.get(A.constructor);D||(D=A.constructor,D=new D,iS.set(A.constructor,D)),b=D[g]}else b=0;if(x&&e){const B=Bg[g];b?A[B]=b:delete A[B]}else DR(A,g)||(A[g]=b)}h+=1}return n}function ZU(n,t,e,i){const{children:s,...o}=i,{children:h,...f}=e,m=NR(o,f,!0);return m.changes.length?m:null}function JU(n,t,e,i){const s=ZU(n,t,e,i);s&&zR(n,s)}const $U=Object.freeze([...Object.keys(Zy),"draw"]),$y={};function tO(n){const t=n.charAt(0),e=n.substring(1);return`${t.toUpperCase()}${e}`}function eO(n,t){return t.toLowerCase()}function nO(n){let t=n;return n.startsWith("pixi")&&(t=n.replace(/^pixi([A-Z])/,eO)),t}function iO(n,t,e){const i=nO(n),s=tO(i);if(!(s in $y))throw new Error(`${s} is not part of the PIXI namespace! Did you forget to extend?`);const o=$y[s],h=Jy(t,$U);Object.entries(t).forEach(([m,g])=>{if(m in Bg){const b=Bg[m];h[b]=g}});const f=wR(new o(h),{root:e,type:i});return zR(f,t),f}var LR={exports:{}},Y0={exports:{}},q0={exports:{}},j0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aS;function rO(){return aS||(aS=1,function(n){function t(F,K){var ut=F.length;F.push(K);t:for(;0<ut;){var ft=ut-1>>>1,z=F[ft];if(0<s(z,K))F[ft]=K,F[ut]=z,ut=ft;else break t}}function e(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var K=F[0],ut=F.pop();if(ut!==K){F[0]=ut;t:for(var ft=0,z=F.length,it=z>>>1;ft<it;){var At=2*(ft+1)-1,Rt=F[At],yt=At+1,Mt=F[yt];if(0>s(Rt,ut))yt<z&&0>s(Mt,Rt)?(F[ft]=Mt,F[yt]=ut,ft=yt):(F[ft]=Rt,F[At]=ut,ft=At);else if(yt<z&&0>s(Mt,ut))F[ft]=Mt,F[yt]=ut,ft=yt;else break t}}return K}function s(F,K){var ut=F.sortIndex-K.sortIndex;return ut!==0?ut:F.id-K.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var h=Date,f=h.now();n.unstable_now=function(){return h.now()-f}}var m=[],g=[],b=1,x=null,E=3,A=!1,R=!1,D=!1,B=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function H(F){for(var K=e(g);K!==null;){if(K.callback===null)i(g);else if(K.startTime<=F)i(g),K.sortIndex=K.expirationTime,t(m,K);else break;K=e(g)}}function j(F){if(D=!1,H(F),!R)if(e(m)!==null)R=!0,bt();else{var K=e(g);K!==null&&Tt(j,K.startTime-F)}}var Z=!1,nt=-1,V=5,ht=-1;function N(){return!(n.unstable_now()-ht<V)}function Y(){if(Z){var F=n.unstable_now();ht=F;var K=!0;try{t:{R=!1,D&&(D=!1,P(nt),nt=-1),A=!0;var ut=E;try{e:{for(H(F),x=e(m);x!==null&&!(x.expirationTime>F&&N());){var ft=x.callback;if(typeof ft=="function"){x.callback=null,E=x.priorityLevel;var z=ft(x.expirationTime<=F);if(F=n.unstable_now(),typeof z=="function"){x.callback=z,H(F),K=!0;break e}x===e(m)&&i(m),H(F)}else i(m);x=e(m)}if(x!==null)K=!0;else{var it=e(g);it!==null&&Tt(j,it.startTime-F),K=!1}}break t}finally{x=null,E=ut,A=!1}K=void 0}}finally{K?X():Z=!1}}}var X;if(typeof G=="function")X=function(){G(Y)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ct=$.port2;$.port1.onmessage=Y,X=function(){ct.postMessage(null)}}else X=function(){B(Y,0)};function bt(){Z||(Z=!0,X())}function Tt(F,K){nt=B(function(){F(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){R||A||(R=!0,bt())},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return e(m)},n.unstable_next=function(F){switch(E){case 1:case 2:case 3:var K=3;break;default:K=E}var ut=E;E=K;try{return F()}finally{E=ut}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,K){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ut=E;E=F;try{return K()}finally{E=ut}},n.unstable_scheduleCallback=function(F,K,ut){var ft=n.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?ft+ut:ft):ut=ft,F){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=ut+z,F={id:b++,callback:K,priorityLevel:F,startTime:ut,expirationTime:z,sortIndex:-1},ut>ft?(F.sortIndex=ut,t(g,F),e(m)===null&&F===e(g)&&(D?(P(nt),nt=-1):D=!0,Tt(j,ut-ft))):(F.sortIndex=z,t(m,F),R||A||(R=!0,bt())),F},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(F){var K=E;return function(){var ut=E;E=K;try{return F.apply(this,arguments)}finally{E=ut}}}}(j0)),j0}var lS;function sO(){return lS||(lS=1,q0.exports=rO()),q0.exports}var oS;function aO(){return oS||(oS=1,function(n){n.exports=function(t){function e(l,u,p,y){return new Rp(l,u,p,y)}function i(){}function s(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(l){return l===null||typeof l!="object"?null:(l=we&&l[we]||l["@@iterator"],typeof l=="function"?l:null)}function h(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Cn?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case Ca:return"Fragment";case rs:return"Portal";case Ba:return"Profiler";case yl:return"StrictMode";case Fs:return"Suspense";case Ru:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case Ra:return(l.displayName||"Context")+".Provider";case cf:return(l._context.displayName||"Context")+".Consumer";case Rc:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case mo:return u=l.displayName||null,u!==null?u:h(l.type)||"Memo";case Vs:u=l._payload,l=l._init;try{return h(l(u))}catch{}}return null}function f(l){if(Ma===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);Ma=u&&u[1]||"",Da=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ma+l+Da}function m(l,u){if(!l||go)return"";go=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var Bt=function(){throw Error()};if(Object.defineProperty(Bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Bt,[])}catch(Wt){var xt=Wt}Reflect.construct(l,[],Bt)}else{try{Bt.call()}catch(Wt){xt=Wt}l.call(Bt.prototype)}}else{try{throw Error()}catch(Wt){xt=Wt}(Bt=l())&&typeof Bt.catch=="function"&&Bt.catch(function(){})}}catch(Wt){if(Wt&&xt&&typeof Wt.stack=="string")return[Wt.stack,xt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=y.DetermineComponentFrameRoot(),U=T[0],I=T[1];if(U&&I){var et=U.split(`
`),pt=I.split(`
`);for(S=y=0;y<et.length&&!et[y].includes("DetermineComponentFrameRoot");)y++;for(;S<pt.length&&!pt[S].includes("DetermineComponentFrameRoot");)S++;if(y===et.length||S===pt.length)for(y=et.length-1,S=pt.length-1;1<=y&&0<=S&&et[y]!==pt[S];)S--;for(;1<=y&&0<=S;y--,S--)if(et[y]!==pt[S]){if(y!==1||S!==1)do if(y--,S--,0>S||et[y]!==pt[S]){var St=`
`+et[y].replace(" at new "," at ");return l.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",l.displayName)),St}while(1<=y&&0<=S);break}}}finally{go=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?f(p):""}function g(l){switch(l.tag){case 26:case 27:case 5:return f(l.type);case 16:return f("Lazy");case 13:return f("Suspense");case 19:return f("SuspenseList");case 0:case 15:return l=m(l.type,!1),l;case 11:return l=m(l.type.render,!1),l;case 1:return l=m(l.type,!0),l;default:return""}}function b(l){try{var u="";do u+=g(l),l=l.return;while(l);return u}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function x(l){var u=l,p=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(p=u.return),l=u.return;while(l)}return u.tag===3?p:null}function E(l){if(x(l)!==l)throw Error(s(188))}function A(l){var u=l.alternate;if(!u){if(u=x(l),u===null)throw Error(s(188));return u!==l?null:l}for(var p=l,y=u;;){var S=p.return;if(S===null)break;var T=S.alternate;if(T===null){if(y=S.return,y!==null){p=y;continue}break}if(S.child===T.child){for(T=S.child;T;){if(T===p)return E(S),l;if(T===y)return E(S),u;T=T.sibling}throw Error(s(188))}if(p.return!==y.return)p=S,y=T;else{for(var U=!1,I=S.child;I;){if(I===p){U=!0,p=S,y=T;break}if(I===y){U=!0,y=S,p=T;break}I=I.sibling}if(!U){for(I=T.child;I;){if(I===p){U=!0,p=T,y=S;break}if(I===y){U=!0,y=T,p=S;break}I=I.sibling}if(!U)throw Error(s(189))}}if(p.alternate!==y)throw Error(s(190))}if(p.tag!==3)throw Error(s(188));return p.stateNode.current===p?l:u}function R(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=R(l),u!==null)return u;l=l.sibling}return null}function D(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(l.tag!==4&&(u=D(l),u!==null))return u;l=l.sibling}return null}function B(l){return{current:l}}function P(l){0>Pa||(l.current=Vc[Pa],Vc[Pa]=null,Pa--)}function G(l,u){Pa++,Vc[Pa]=l.current,l.current=u}function H(l){return l>>>=0,l===0?32:31-(Pf(l)/M_|0)|0}function j(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Z(l,u){var p=l.pendingLanes;if(p===0)return 0;var y=0,S=l.suspendedLanes,T=l.pingedLanes,U=l.warmLanes;l=l.finishedLanes!==0;var I=p&134217727;return I!==0?(p=I&~S,p!==0?y=j(p):(T&=I,T!==0?y=j(T):l||(U=I&~U,U!==0&&(y=j(U))))):(I=p&~S,I!==0?y=j(I):T!==0?y=j(T):l||(U=p&~U,U!==0&&(y=j(U)))),y===0?0:u!==0&&u!==y&&(u&S)===0&&(S=y&-y,U=u&-u,S>=U||S===32&&(U&4194176)!==0)?u:y}function nt(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function V(l,u){switch(l){case 1:case 2:case 4:case 8:return u+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ht(){var l=Uu;return Uu<<=1,(Uu&4194176)===0&&(Uu=128),l}function N(){var l=xo;return xo<<=1,(xo&62914560)===0&&(xo=4194304),l}function Y(l){for(var u=[],p=0;31>p;p++)u.push(l);return u}function X(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function $(l,u,p,y,S,T){var U=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var I=l.entanglements,et=l.expirationTimes,pt=l.hiddenUpdates;for(p=U&~p;0<p;){var St=31-pn(p),Bt=1<<St;I[St]=0,et[St]=-1;var xt=pt[St];if(xt!==null)for(pt[St]=null,St=0;St<xt.length;St++){var Wt=xt[St];Wt!==null&&(Wt.lane&=-536870913)}p&=~Bt}y!==0&&ct(l,y,0),T!==0&&S===0&&l.tag!==0&&(l.suspendedLanes|=T&~(U&~u))}function ct(l,u,p){l.pendingLanes|=u,l.suspendedLanes&=~u;var y=31-pn(u);l.entangledLanes|=u,l.entanglements[y]=l.entanglements[y]|1073741824|p&4194218}function bt(l,u){var p=l.entangledLanes|=u;for(l=l.entanglements;p;){var y=31-pn(p),S=1<<y;S&u|l[y]&u&&(l[y]|=u),p&=~S}}function Tt(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function F(l){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(Eo,l,void 0,(l.current.flags&128)===128)}catch{}}function K(l){if(typeof ai=="function"&&Xc(l),Bn&&typeof Bn.setStrictMode=="function")try{Bn.setStrictMode(Eo,l)}catch{}}function ut(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}function ft(l,u){if(typeof l=="object"&&l!==null){var p=Ic.get(l);return p!==void 0?p:(u={value:l,source:u,stack:b(u)},Ic.set(l,u),u)}return{value:l,source:u,stack:b(u)}}function z(l,u){$i[tr++]=To,$i[tr++]=Na,Na=l,To=u}function it(l,u,p){Vi[li++]=os,Vi[li++]=us,Vi[li++]=zr,zr=l;var y=os;l=us;var S=32-pn(y)-1;y&=~(1<<S),p+=1;var T=32-pn(u)+S;if(30<T){var U=S-S%5;T=(y&(1<<U)-1).toString(32),y>>=U,S-=U,os=1<<32-pn(u)+S|p<<S|y,us=T+l}else os=1<<T|p<<S|y,us=l}function At(l){l.return!==null&&(z(l,1),it(l,1,0))}function Rt(l){for(;l===Na;)Na=$i[--tr],$i[tr]=null,To=$i[--tr],$i[tr]=null;for(;l===zr;)zr=Vi[--li],Vi[li]=null,us=Vi[--li],Vi[li]=null,os=Vi[--li],Vi[li]=null}function yt(l,u){G(qs,u),G(dr,l),G(mn,null),l=hf(u),P(mn),G(mn,l)}function Mt(){P(mn),P(dr),P(qs)}function Ft(l){l.memoizedState!==null&&G(Pu,l);var u=mn.current,p=Mp(u,l.type);u!==p&&(G(dr,l),G(mn,p))}function Pe(l){dr.current===l&&(P(mn),P(dr)),Pu.current===l&&(P(Pu),Pr?Xs._currentValue=vl:Xs._currentValue2=vl)}function Gt(l){var u=Error(s(418,""));throw Fe(ft(u,l)),Gu}function ne(l,u){if(!Fi)throw Error(s(175));El(l.stateNode,l.type,l.memoizedProps,u,l)||Gt(l)}function ce(l){for(gn=l.return;gn;)switch(gn.tag){case 3:case 27:Lr=!0;return;case 5:case 13:Lr=!1;return;default:gn=gn.return}}function Te(l){if(!Fi||l!==gn)return!1;if(!_e)return ce(l),_e=!0,!1;var u=!1;if(qn?l.tag!==3&&l.tag!==27&&(l.tag!==5||Tf(l.type)&&!$n(l.type,l.memoizedProps))&&(u=!0):l.tag!==3&&(l.tag!==5||Tf(l.type)&&!$n(l.type,l.memoizedProps))&&(u=!0),u&&Ne&&Gt(l),ce(l),l.tag===13){if(!Fi)throw Error(s(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));Ne=lm(l)}else Ne=gn?Oa(l.stateNode):null;return!0}function Be(){Fi&&(Ne=gn=null,_e=!1)}function Fe(l){pr===null?pr=[l]:pr.push(l)}function ve(){for(var l=js,u=Hr=js=0;u<l;){var p=ki[u];ki[u++]=null;var y=ki[u];ki[u++]=null;var S=ki[u];ki[u++]=null;var T=ki[u];if(ki[u++]=null,y!==null&&S!==null){var U=y.pending;U===null?S.next=S:(S.next=U.next,U.next=S),y.pending=S}T!==0&&sr(p,S,T)}}function ln(l,u,p,y){ki[js++]=l,ki[js++]=u,ki[js++]=p,ki[js++]=y,Hr|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function Ge(l,u,p,y){return ln(l,u,p,y),ni(l)}function In(l,u){return ln(l,null,null,u),ni(l)}function sr(l,u,p){l.lanes|=p;var y=l.alternate;y!==null&&(y.lanes|=p);for(var S=!1,T=l.return;T!==null;)T.childLanes|=p,y=T.alternate,y!==null&&(y.childLanes|=p),T.tag===22&&(l=T.stateNode,l===null||l._visibility&1||(S=!0)),l=T,T=T.return;S&&u!==null&&l.tag===3&&(T=l.stateNode,S=31-pn(p),T=T.hiddenUpdates,l=T[S],l===null?T[S]=[u]:l.push(u),u.lane=p|536870912)}function ni(l){if(50<wl)throw wl=0,Hf=null,Error(s(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}function Kn(l){l!==za&&l.next===null&&(za===null?je=za=l:za=za.next=l),_n=!0,Yc||(Yc=!0,ql(Nn))}function ie(l,u){if(!qc&&_n){qc=!0;do for(var p=!1,y=je;y!==null;){if(l!==0){var S=y.pendingLanes;if(S===0)var T=0;else{var U=y.suspendedLanes,I=y.pingedLanes;T=(1<<31-pn(42|l)+1)-1,T&=S&~(U&~I),T=T&201326677?T&201326677|1:T?T|2:0}T!==0&&(p=!0,Yl(y,T))}else T=ue,T=Z(y,y===Le?T:0),(T&3)===0||nt(y,T)||(p=!0,Yl(y,T));y=y.next}while(p);qc=!1}}function Nn(){_n=Yc=!1;var l=0;Ao!==0&&(Op()&&(l=Ao),Ao=0);for(var u=Ji(),p=null,y=je;y!==null;){var S=y.next,T=Wr(y,u);T===0?(y.next=null,p===null?je=S:p.next=S,S===null&&(za=p)):(p=y,(l!==0||(T&3)!==0)&&(_n=!0)),y=S}ie(l)}function Wr(l,u){for(var p=l.suspendedLanes,y=l.pingedLanes,S=l.expirationTimes,T=l.pendingLanes&-62914561;0<T;){var U=31-pn(T),I=1<<U,et=S[U];et===-1?((I&p)===0||(I&y)!==0)&&(S[U]=V(I,u)):et<=u&&(l.expiredLanes|=I),T&=~I}if(u=Le,p=ue,p=Z(l,l===u?p:0),y=l.callbackNode,p===0||l===u&&Ue===2||l.cancelPendingCommit!==null)return y!==null&&y!==null&&Nr(y),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||nt(l,p)){if(u=p&-p,u===l.callbackPriority)return u;switch(y!==null&&Nr(y),Tt(p)){case 2:case 8:p=Ou;break;case 32:p=So;break;case 268435456:p=Al;break;default:p=So}return y=_i.bind(null,l),p=ls(p,y),l.callbackPriority=u,l.callbackNode=p,u}return y!==null&&y!==null&&Nr(y),l.callbackPriority=2,l.callbackNode=null,2}function _i(l,u){var p=l.callbackNode;if(Sa()&&l.callbackNode!==p)return null;var y=ue;return y=Z(l,l===Le?y:0),y===0?null:(Wi(l,y,u),Wr(l,Ji()),l.callbackNode!=null&&l.callbackNode===p?_i.bind(null,l):null)}function Yl(l,u){if(Sa())return null;Wi(l,u,!0)}function ql(l){zp?Lp(function(){(oe&6)!==0?ls(kc,l):l()}):ls(kc,l)}function Es(){return Ao===0&&(Ao=ht()),Ao}function nl(l,u){if(Co===null){var p=Co=[];jc=0,Ke=Es(),jn={status:"pending",value:void 0,then:function(y){p.push(y)}}}return jc++,u.then(Ko,Ko),u}function Ko(){if(--jc===0&&Co!==null){jn!==null&&(jn.status="fulfilled");var l=Co;Co=null,Ke=0,jn=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function jl(l,u){var p=[],y={status:"pending",value:null,reason:null,then:function(S){p.push(S)}};return l.then(function(){y.status="fulfilled",y.value=u;for(var S=0;S<p.length;S++)(0,p[S])(u)},function(S){for(y.status="rejected",y.reason=S,S=0;S<p.length;S++)(0,p[S])(void 0)}),y}function aa(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function il(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function yi(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function sn(l,u,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(oe&2)!==0){var S=y.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),y.pending=u,u=ni(l),sr(l,null,p),u}return ln(l,y,u,p),ni(l)}function la(l,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194176)!==0)){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,bt(l,p)}}function wi(l,u){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var S=null,T=null;if(p=p.firstBaseUpdate,p!==null){do{var U={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};T===null?S=T=U:T=T.next=U,p=p.next}while(p!==null);T===null?S=T=u:T=T.next=u}else S=T=u;p={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:T,shared:y.shared,callbacks:y.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=u}function Ze(){if(Kc){var l=jn;if(l!==null)throw l}}function oa(l,u,p,y){Kc=!1;var S=l.updateQueue;oi=!1;var T=S.firstBaseUpdate,U=S.lastBaseUpdate,I=S.shared.pending;if(I!==null){S.shared.pending=null;var et=I,pt=et.next;et.next=null,U===null?T=pt:U.next=pt,U=et;var St=l.alternate;St!==null&&(St=St.updateQueue,I=St.lastBaseUpdate,I!==U&&(I===null?St.firstBaseUpdate=pt:I.next=pt,St.lastBaseUpdate=et))}if(T!==null){var Bt=S.baseState;U=0,St=pt=et=null,I=T;do{var xt=I.lane&-536870913,Wt=xt!==I.lane;if(Wt?(ue&xt)===xt:(y&xt)===xt){xt!==0&&xt===Ke&&(Kc=!0),St!==null&&(St=St.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});t:{var Sr=l,Uo=I;xt=u;var Ul=p;switch(Uo.tag){case 1:if(Sr=Uo.payload,typeof Sr=="function"){Bt=Sr.call(Ul,Bt,xt);break t}Bt=Sr;break t;case 3:Sr.flags=Sr.flags&-65537|128;case 0:if(Sr=Uo.payload,xt=typeof Sr=="function"?Sr.call(Ul,Bt,xt):Sr,xt==null)break t;Bt=fn({},Bt,xt);break t;case 2:oi=!0}}xt=I.callback,xt!==null&&(l.flags|=64,Wt&&(l.flags|=8192),Wt=S.callbacks,Wt===null?S.callbacks=[xt]:Wt.push(xt))}else Wt={lane:xt,tag:I.tag,payload:I.payload,callback:I.callback,next:null},St===null?(pt=St=Wt,et=Bt):St=St.next=Wt,U|=xt;if(I=I.next,I===null){if(I=S.shared.pending,I===null)break;Wt=I,I=Wt.next,Wt.next=null,S.lastBaseUpdate=Wt,S.shared.pending=null}}while(!0);St===null&&(et=Bt),S.baseState=et,S.firstBaseUpdate=pt,S.lastBaseUpdate=St,T===null&&(S.shared.lanes=0),vr|=U,l.lanes=U,l.memoizedState=Bt}}function Kl(l,u){if(typeof l!="function")throw Error(s(191,l));l.call(u)}function Wo(l,u){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)Kl(p[l],u)}function M(l,u){if(Ti(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var p=Object.keys(l),y=Object.keys(u);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var S=p[y];if(!mm.call(u,S)||!Ti(l[S],u[S]))return!1}return!0}function O(l){return l=l.status,l==="fulfilled"||l==="rejected"}function k(){}function at(l,u,p){switch(p=l[p],p===void 0?l.push(u):p!==u&&(u.then(k,k),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,l===Nu?Error(s(483)):l;default:if(typeof u.status=="string")u.then(k,k);else{if(l=Le,l!==null&&100<l.shellSuspendCounter)throw Error(s(482));l=u,l.status="pending",l.then(function(y){if(u.status==="pending"){var S=u;S.status="fulfilled",S.value=y}},function(y){if(u.status==="pending"){var S=u;S.status="rejected",S.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,l===Nu?Error(s(483)):l}throw ui=u,Nu}}function Et(){if(ui===null)throw Error(s(459));var l=ui;return ui=null,l}function Vt(l){var u=ci;return ci+=1,Cl===null&&(Cl=[]),at(Cl,l,u)}function xe(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function En(l,u){throw u.$$typeof===uf?Error(s(525)):(l=Object.prototype.toString.call(u),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function Ui(l){var u=l._init;return u(l._payload)}function bi(l){function u(st,J){if(l){var ot=st.deletions;ot===null?(st.deletions=[J],st.flags|=16):ot.push(J)}}function p(st,J){if(!l)return null;for(;J!==null;)u(st,J),J=J.sibling;return null}function y(st){for(var J=new Map;st!==null;)st.key!==null?J.set(st.key,st):J.set(st.index,st),st=st.sibling;return J}function S(st,J){return st=zs(st,J),st.index=0,st.sibling=null,st}function T(st,J,ot){return st.index=ot,l?(ot=st.alternate,ot!==null?(ot=ot.index,ot<J?(st.flags|=33554434,J):ot):(st.flags|=33554434,J)):(st.flags|=1048576,J)}function U(st){return l&&st.alternate===null&&(st.flags|=33554434),st}function I(st,J,ot,vt){return J===null||J.tag!==6?(J=Bu(ot,st.mode,vt),J.return=st,J):(J=S(J,ot),J.return=st,J)}function et(st,J,ot,vt){var Ut=ot.type;return Ut===Ca?St(st,J,ot.props.children,vt,ot.key):J!==null&&(J.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===Vs&&Ui(Ut)===J.type)?(J=S(J,ot.props),xe(J,ot),J.return=st,J):(J=_l(ot.type,ot.key,ot.props,null,st.mode,vt),xe(J,ot),J.return=st,J)}function pt(st,J,ot,vt){return J===null||J.tag!==4||J.stateNode.containerInfo!==ot.containerInfo||J.stateNode.implementation!==ot.implementation?(J=Hi(ot,st.mode,vt),J.return=st,J):(J=S(J,ot.children||[]),J.return=st,J)}function St(st,J,ot,vt,Ut){return J===null||J.tag!==7?(J=Ta(ot,st.mode,vt,Ut),J.return=st,J):(J=S(J,ot),J.return=st,J)}function Bt(st,J,ot){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=Bu(""+J,st.mode,ot),J.return=st,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Aa:return ot=_l(J.type,J.key,J.props,null,st.mode,ot),xe(ot,J),ot.return=st,ot;case rs:return J=Hi(J,st.mode,ot),J.return=st,J;case Vs:var vt=J._init;return J=vt(J._payload),Bt(st,J,ot)}if(wa(J)||o(J))return J=Ta(J,st.mode,ot,null),J.return=st,J;if(typeof J.then=="function")return Bt(st,Vt(J),ot);if(J.$$typeof===Ra)return Bt(st,hu(st,J),ot);En(st,J)}return null}function xt(st,J,ot,vt){var Ut=J!==null?J.key:null;if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return Ut!==null?null:I(st,J,""+ot,vt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case Aa:return ot.key===Ut?et(st,J,ot,vt):null;case rs:return ot.key===Ut?pt(st,J,ot,vt):null;case Vs:return Ut=ot._init,ot=Ut(ot._payload),xt(st,J,ot,vt)}if(wa(ot)||o(ot))return Ut!==null?null:St(st,J,ot,vt,null);if(typeof ot.then=="function")return xt(st,J,Vt(ot),vt);if(ot.$$typeof===Ra)return xt(st,J,hu(st,ot),vt);En(st,ot)}return null}function Wt(st,J,ot,vt,Ut){if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return st=st.get(ot)||null,I(J,st,""+vt,Ut);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case Aa:return st=st.get(vt.key===null?ot:vt.key)||null,et(J,st,vt,Ut);case rs:return st=st.get(vt.key===null?ot:vt.key)||null,pt(J,st,vt,Ut);case Vs:var He=vt._init;return vt=He(vt._payload),Wt(st,J,ot,vt,Ut)}if(wa(vt)||o(vt))return st=st.get(ot)||null,St(J,st,vt,Ut,null);if(typeof vt.then=="function")return Wt(st,J,ot,Vt(vt),Ut);if(vt.$$typeof===Ra)return Wt(st,J,ot,hu(J,vt),Ut);En(J,vt)}return null}function Sr(st,J,ot,vt){for(var Ut=null,He=null,It=J,se=J=0,ke=null;It!==null&&se<ot.length;se++){It.index>se?(ke=It,It=null):ke=It.sibling;var fe=xt(st,It,ot[se],vt);if(fe===null){It===null&&(It=ke);break}l&&It&&fe.alternate===null&&u(st,It),J=T(fe,J,se),He===null?Ut=fe:He.sibling=fe,He=fe,It=ke}if(se===ot.length)return p(st,It),_e&&z(st,se),Ut;if(It===null){for(;se<ot.length;se++)It=Bt(st,ot[se],vt),It!==null&&(J=T(It,J,se),He===null?Ut=It:He.sibling=It,He=It);return _e&&z(st,se),Ut}for(It=y(It);se<ot.length;se++)ke=Wt(It,st,se,ot[se],vt),ke!==null&&(l&&ke.alternate!==null&&It.delete(ke.key===null?se:ke.key),J=T(ke,J,se),He===null?Ut=ke:He.sibling=ke,He=ke);return l&&It.forEach(function(qa){return u(st,qa)}),_e&&z(st,se),Ut}function Uo(st,J,ot,vt){if(ot==null)throw Error(s(151));for(var Ut=null,He=null,It=J,se=J=0,ke=null,fe=ot.next();It!==null&&!fe.done;se++,fe=ot.next()){It.index>se?(ke=It,It=null):ke=It.sibling;var qa=xt(st,It,fe.value,vt);if(qa===null){It===null&&(It=ke);break}l&&It&&qa.alternate===null&&u(st,It),J=T(qa,J,se),He===null?Ut=qa:He.sibling=qa,He=qa,It=ke}if(fe.done)return p(st,It),_e&&z(st,se),Ut;if(It===null){for(;!fe.done;se++,fe=ot.next())fe=Bt(st,fe.value,vt),fe!==null&&(J=T(fe,J,se),He===null?Ut=fe:He.sibling=fe,He=fe);return _e&&z(st,se),Ut}for(It=y(It);!fe.done;se++,fe=ot.next())fe=Wt(It,st,se,fe.value,vt),fe!==null&&(l&&fe.alternate!==null&&It.delete(fe.key===null?se:fe.key),J=T(fe,J,se),He===null?Ut=fe:He.sibling=fe,He=fe);return l&&It.forEach(function(_m){return u(st,_m)}),_e&&z(st,se),Ut}function Ul(st,J,ot,vt){if(typeof ot=="object"&&ot!==null&&ot.type===Ca&&ot.key===null&&(ot=ot.props.children),typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case Aa:t:{for(var Ut=ot.key;J!==null;){if(J.key===Ut){if(Ut=ot.type,Ut===Ca){if(J.tag===7){p(st,J.sibling),vt=S(J,ot.props.children),vt.return=st,st=vt;break t}}else if(J.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===Vs&&Ui(Ut)===J.type){p(st,J.sibling),vt=S(J,ot.props),xe(vt,ot),vt.return=st,st=vt;break t}p(st,J);break}else u(st,J);J=J.sibling}ot.type===Ca?(vt=Ta(ot.props.children,st.mode,vt,ot.key),vt.return=st,st=vt):(vt=_l(ot.type,ot.key,ot.props,null,st.mode,vt),xe(vt,ot),vt.return=st,st=vt)}return U(st);case rs:t:{for(Ut=ot.key;J!==null;){if(J.key===Ut)if(J.tag===4&&J.stateNode.containerInfo===ot.containerInfo&&J.stateNode.implementation===ot.implementation){p(st,J.sibling),vt=S(J,ot.children||[]),vt.return=st,st=vt;break t}else{p(st,J);break}else u(st,J);J=J.sibling}vt=Hi(ot,st.mode,vt),vt.return=st,st=vt}return U(st);case Vs:return Ut=ot._init,ot=Ut(ot._payload),Ul(st,J,ot,vt)}if(wa(ot))return Sr(st,J,ot,vt);if(o(ot)){if(Ut=o(ot),typeof Ut!="function")throw Error(s(150));return ot=Ut.call(ot),Uo(st,J,ot,vt)}if(typeof ot.then=="function")return Ul(st,J,Vt(ot),vt);if(ot.$$typeof===Ra)return Ul(st,J,hu(st,ot),vt);En(st,ot)}return typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint"?(ot=""+ot,J!==null&&J.tag===6?(p(st,J.sibling),vt=S(J,ot),vt.return=st,st=vt):(p(st,J),vt=Bu(ot,st.mode,vt),vt.return=st,st=vt),U(st)):p(st,J)}return function(st,J,ot,vt){try{ci=0;var Ut=Ul(st,J,ot,vt);return Cl=null,Ut}catch(It){if(It===Nu)throw It;var He=e(29,It,null,st.mode);return He.lanes=vt,He.return=st,He}finally{}}}function ar(l,u){l=Xr,G(Vr,l),G(Fr,u),Xr=l|u.baseLanes}function lr(){G(Vr,Xr),G(Fr,Fr.current)}function or(){Xr=Vr.current,P(Fr),P(Vr)}function Wn(l){var u=l.alternate;G(Ye,Ye.current&1),G(Xi,l),mr===null&&(u===null||Fr.current!==null||u.memoizedState!==null)&&(mr=l)}function Oi(l){if(l.tag===22){if(G(Ye,Ye.current),G(Xi,l),mr===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(mr=l)}}else ii()}function ii(){G(Ye,Ye.current),G(Xi,Xi.current)}function on(l){P(Xi),mr===l&&(mr=null),P(Ye)}function he(l){for(var u=l;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||xl(p)||wu(p)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function ae(){throw Error(s(321))}function vi(l,u){if(u===null)return!1;for(var p=0;p<u.length&&p<l.length;p++)if(!Ti(l[p],u[p]))return!1;return!0}function ua(l,u,p,y,S,T){return Ks=T,jt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Yt.H=l===null||l.memoizedState===null?Zs:Ci,Ha=!1,T=p(y,S),Ha=!1,Bl&&(T=Jd(u,p,y,S)),Zd(l),T}function Zd(l){Yt.H=yn;var u=Se!==null&&Se.next!==null;if(Ks=0,en=Se=jt=null,Ws=!1,Bo=0,Qs=null,u)throw Error(s(300));l===null||Rn||(l=l.dependencies,l!==null&&cu(l)&&(Rn=!0))}function Jd(l,u,p,y){jt=l;var S=0;do{if(Bl&&(Qs=null),Bo=0,Bl=!1,25<=S)throw Error(s(301));if(S+=1,en=Se=null,l.updateQueue!=null){var T=l.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}Yt.H=Va,T=u(p,y)}while(Bl);return T}function $d(){var l=Yt.H,u=l.useState()[0];return u=typeof u.then=="function"?Qr(u):u,l=l.useState()[0],(Se!==null?Se.memoizedState:null)!==l&&(jt.flags|=1024),u}function rl(){var l=Fa!==0;return Fa=0,l}function Qo(l,u,p){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~p}function Ts(l){if(Ws){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Ws=!1}Ks=0,en=Se=jt=null,Bl=!1,Bo=Fa=0,Qs=null}function zn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?jt.memoizedState=en=l:en=en.next=l,en}function Je(){if(Se===null){var l=jt.alternate;l=l!==null?l.memoizedState:null}else l=Se.next;var u=en===null?jt.memoizedState:en.next;if(u!==null)en=u,Se=l;else{if(l===null)throw jt.alternate===null?Error(s(467)):Error(s(310));Se=l,l={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},en===null?jt.memoizedState=en=l:en=en.next=l}return en}function Qr(l){var u=Bo;return Bo+=1,Qs===null&&(Qs=[]),l=at(Qs,l,u),u=jt,(en===null?u.memoizedState:en.next)===null&&(u=u.alternate,Yt.H=u===null||u.memoizedState===null?Zs:Ci),l}function hn(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Qr(l);if(l.$$typeof===Ra)return Zn(l)}throw Error(s(438,String(l)))}function rc(l){var u=null,p=jt.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var y=jt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(S){return S.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=Gf(),jt.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(l),y=0;y<l;y++)p[y]=$t;return u.index++,p}function Zr(l,u){return typeof u=="function"?u(l):u}function Jr(l){var u=Je();return ca(u,Se,l)}function ca(l,u,p){var y=l.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=p;var S=l.baseQueue,T=y.pending;if(T!==null){if(S!==null){var U=S.next;S.next=T.next,T.next=U}u.baseQueue=S=T,y.pending=null}if(T=l.baseState,S===null)l.memoizedState=T;else{u=S.next;var I=U=null,et=null,pt=u,St=!1;do{var Bt=pt.lane&-536870913;if(Bt!==pt.lane?(ue&Bt)===Bt:(Ks&Bt)===Bt){var xt=pt.revertLane;if(xt===0)et!==null&&(et=et.next={lane:0,revertLane:0,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null}),Bt===Ke&&(St=!0);else if((Ks&xt)===xt){pt=pt.next,xt===Ke&&(St=!0);continue}else Bt={lane:0,revertLane:pt.revertLane,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null},et===null?(I=et=Bt,U=T):et=et.next=Bt,jt.lanes|=xt,vr|=xt;Bt=pt.action,Ha&&p(T,Bt),T=pt.hasEagerState?pt.eagerState:p(T,Bt)}else xt={lane:Bt,revertLane:pt.revertLane,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null},et===null?(I=et=xt,U=T):et=et.next=xt,jt.lanes|=Bt,vr|=Bt;pt=pt.next}while(pt!==null&&pt!==u);if(et===null?U=T:et.next=I,!Ti(T,l.memoizedState)&&(Rn=!0,St&&(p=jn,p!==null)))throw p;l.memoizedState=T,l.baseState=U,l.baseQueue=et,y.lastRenderedState=T}return S===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function wr(l){var u=Je(),p=u.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=l;var y=p.dispatch,S=p.pending,T=u.memoizedState;if(S!==null){p.pending=null;var U=S=S.next;do T=l(T,U.action),U=U.next;while(U!==S);Ti(T,u.memoizedState)||(Rn=!0),u.memoizedState=T,u.baseQueue===null&&(u.baseState=T),p.lastRenderedState=T}return[T,y]}function tp(l,u,p){var y=jt,S=Je(),T=_e;if(T){if(p===void 0)throw Error(s(407));p=p()}else p=u();var U=!Ti((Se||S).memoizedState,p);if(U&&(S.memoizedState=p,Rn=!0),S=S.queue,eu(ep.bind(null,y,S,l),[l]),S.getSnapshot!==u||U||en!==null&&en.memoizedState.tag&1){if(y.flags|=2048,sl(9,Ph.bind(null,y,S,p,u),{destroy:void 0},null),Le===null)throw Error(s(349));T||(Ks&60)!==0||Oh(y,u,p)}return p}function Oh(l,u,p){l.flags|=16384,l={getSnapshot:u,value:p},u=jt.updateQueue,u===null?(u=Gf(),jt.updateQueue=u,u.stores=[l]):(p=u.stores,p===null?u.stores=[l]:p.push(l))}function Ph(l,u,p,y){u.value=p,u.getSnapshot=y,Zo(u)&&Jo(l)}function ep(l,u,p){return p(function(){Zo(u)&&Jo(l)})}function Zo(l){var u=l.getSnapshot;l=l.value;try{var p=u();return!Ti(l,p)}catch{return!0}}function Jo(l){var u=In(l,2);u!==null&&Ie(u,l,2)}function Ur(l){var u=zn();if(typeof l=="function"){var p=l;if(l=p(),Ha){K(!0);try{p()}finally{K(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zr,lastRenderedState:l},u}function ji(l,u,p,y){return l.baseState=p,ca(l,Se,typeof y=="function"?y:Zr)}function np(l,u,p,y,S){if(su(l))throw Error(s(485));if(l=u.action,l!==null){var T={payload:S,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){T.listeners.push(U)}};Yt.T!==null?p(!0):T.isTransition=!1,y(T),p=u.pending,p===null?(T.next=u.pending=T,ip(u,T)):(T.next=p.next,u.pending=p.next=T)}}function ip(l,u){var p=u.action,y=u.payload,S=l.state;if(u.isTransition){var T=Yt.T,U={};Yt.T=U;try{var I=p(S,y),et=Yt.S;et!==null&&et(U,I),$o(l,u,I)}catch(pt){Wl(l,u,pt)}finally{Yt.T=T}}else try{T=p(S,y),$o(l,u,T)}catch(pt){Wl(l,u,pt)}}function $o(l,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){Gh(l,u,y)},function(y){return Wl(l,u,y)}):Gh(l,u,p)}function Gh(l,u,p){u.status="fulfilled",u.value=p,rp(u),l.state=p,u=l.pending,u!==null&&(p=u.next,p===u?l.pending=null:(p=p.next,u.next=p,ip(l,p)))}function Wl(l,u,p){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=p,rp(u),u=u.next;while(u!==y)}l.action=null}function rp(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function Ki(l,u){return u}function sc(l,u){if(_e){var p=Le.formState;if(p!==null){t:{var y=jt;if(_e){if(Ne){var S=im(Ne,Lr);if(S){Ne=Oa(S),y=as(S);break t}}Gt(y)}y=!1}y&&(u=p[0])}}p=zn(),p.memoizedState=p.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:u},p.queue=y,p=Vh.bind(null,jt,y),y.dispatch=p,y=Ur(!1);var T=$l.bind(null,jt,!1,y.queue);return y=zn(),S={state:u,dispatch:null,action:l,pending:null},y.queue=S,p=np.bind(null,jt,S,T,p),S.dispatch=p,y.memoizedState=l,[u,p,!1]}function Nh(l){var u=Je();return ac(u,Se,l)}function ac(l,u,p){u=ca(l,u,Ki)[0],l=Jr(Zr)[0],u=typeof u=="object"&&u!==null&&typeof u.then=="function"?Qr(u):u;var y=Je(),S=y.queue,T=S.dispatch;return p!==y.memoizedState&&(jt.flags|=2048,sl(9,Ql.bind(null,S,p),{destroy:void 0},null)),[u,T,l]}function Ql(l,u){l.action=u}function zh(l){var u=Je(),p=Se;if(p!==null)return ac(u,p,l);Je(),u=u.memoizedState,p=Je();var y=p.queue.dispatch;return p.memoizedState=l,[u,y,!1]}function sl(l,u,p,y){return l={tag:l,create:u,inst:p,deps:y,next:null},u=jt.updateQueue,u===null&&(u=Gf(),jt.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,u.lastEffect=l),l}function al(){return Je().memoizedState}function lc(l,u,p,y){var S=zn();jt.flags|=l,S.memoizedState=sl(1|u,p,{destroy:void 0},y===void 0?null:y)}function tu(l,u,p,y){var S=Je();y=y===void 0?null:y;var T=S.memoizedState.inst;Se!==null&&y!==null&&vi(y,Se.memoizedState.deps)?S.memoizedState=sl(u,p,T,y):(jt.flags|=l,S.memoizedState=sl(1|u,p,T,y))}function Lh(l,u){lc(8390656,8,l,u)}function eu(l,u){tu(2048,8,l,u)}function sp(l,u){return tu(4,2,l,u)}function ap(l,u){return tu(4,4,l,u)}function nu(l,u){if(typeof u=="function"){l=l();var p=u(l);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function oc(l,u,p){p=p!=null?p.concat([l]):null,tu(4,4,nu.bind(null,u,l),p)}function iu(){}function ll(l,u){var p=Je();u=u===void 0?null:u;var y=p.memoizedState;return u!==null&&vi(u,y[1])?y[0]:(p.memoizedState=[l,u],l)}function ol(l,u){var p=Je();u=u===void 0?null:u;var y=p.memoizedState;if(u!==null&&vi(u,y[1]))return y[0];if(y=l(),Ha){K(!0);try{l()}finally{K(!1)}}return p.memoizedState=[y,u],y}function uc(l,u,p){return p===void 0||(Ks&1073741824)!==0?l.memoizedState=u:(l.memoizedState=p,l=vu(),jt.lanes|=l,vr|=l,p)}function cc(l,u,p,y){return Ti(p,u)?p:Fr.current!==null?(l=uc(l,p,y),Ti(l,u)||(Rn=!0),l):(Ks&42)===0?(Rn=!0,l.memoizedState=p):(l=vu(),jt.lanes|=l,vr|=l,u)}function Hh(l,u,p,y,S){var T=Ua();Ei(T!==0&&8>T?T:8);var U=Yt.T,I={};Yt.T=I,$l(l,!1,u,p);try{var et=S(),pt=Yt.S;if(pt!==null&&pt(I,et),et!==null&&typeof et=="object"&&typeof et.then=="function"){var St=jl(et,y);ha(l,u,St,ri(l))}else ha(l,u,y,ri(l))}catch(Bt){ha(l,u,{then:function(){},status:"rejected",reason:Bt},ri())}finally{Ei(T),Yt.T=U}}function Zl(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:vl,baseState:vl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zr,lastRenderedState:vl},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zr,lastRenderedState:p},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function ru(){return Zn(Xs)}function Jl(){return Je().memoizedState}function As(){return Je().memoizedState}function Fh(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var p=ri();l=yi(p);var y=sn(u,l,p);y!==null&&(Ie(y,u,p),la(y,u,p)),u={cache:ma()},l.payload=u;return}u=u.return}}function hc(l,u,p){var y=ri();p={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},su(l)?xi(u,p):(p=Ge(l,u,p,y),p!==null&&(Ie(p,l,y),fa(p,u,y)))}function Vh(l,u,p){var y=ri();ha(l,u,p,y)}function ha(l,u,p,y){var S={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(su(l))xi(u,S);else{var T=l.alternate;if(l.lanes===0&&(T===null||T.lanes===0)&&(T=u.lastRenderedReducer,T!==null))try{var U=u.lastRenderedState,I=T(U,p);if(S.hasEagerState=!0,S.eagerState=I,Ti(I,U))return ln(l,u,S,0),Le===null&&ve(),!1}catch{}finally{}if(p=Ge(l,u,S,y),p!==null)return Ie(p,l,y),fa(p,u,y),!0}return!1}function $l(l,u,p,y){if(y={lane:2,revertLane:Es(),action:y,hasEagerState:!1,eagerState:null,next:null},su(l)){if(u)throw Error(s(479))}else u=Ge(l,p,y,2),u!==null&&Ie(u,l,2)}function su(l){var u=l.alternate;return l===jt||u!==null&&u===jt}function xi(l,u){Bl=Ws=!0;var p=l.pending;p===null?u.next=u:(u.next=p.next,p.next=u),l.pending=u}function fa(l,u,p){if((p&4194176)!==0){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,bt(l,p)}}function to(l,u,p,y){u=l.memoizedState,p=p(y,u),p=p==null?u:fn({},u,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}function eo(l,u,p,y,S,T,U){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,T,U):u.prototype&&u.prototype.isPureReactComponent?!M(p,y)||!M(S,T):!0}function lp(l,u,p,y){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,y),u.state!==l&&Ro.enqueueReplaceState(u,u.state,null)}function Cs(l,u){var p=u;if("ref"in u){p={};for(var y in u)y!=="ref"&&(p[y]=u[y])}if(l=l.defaultProps){p===u&&(p=fn({},p));for(var S in l)p[S]===void 0&&(p[S]=l[S])}return p}function no(l,u){try{var p=l.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function io(l,u,p){try{var y=l.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function ro(l,u,p){return p=yi(p),p.tag=3,p.payload={element:null},p.callback=function(){no(l,u)},p}function kh(l){return l=yi(l),l.tag=3,l}function op(l,u,p,y){var S=p.type.getDerivedStateFromError;if(typeof S=="function"){var T=y.value;l.payload=function(){return S(T)},l.callback=function(){io(u,p,y)}}var U=p.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(l.callback=function(){io(u,p,y),typeof S!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var I=y.stack;this.componentDidCatch(y.value,{componentStack:I!==null?I:""})})}function y_(l,u,p,y,S){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=p.alternate,u!==null&&uu(u,p,S,!0),p=Xi.current,p!==null){switch(p.tag){case 13:return mr===null?fr():p.alternate===null&&nn===0&&(nn=3),p.flags&=-257,p.flags|=65536,p.lanes=S,y===Ai?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([y]):u.add(y),Ea(l,y,S)),!1;case 22:return p.flags|=65536,y===Ai?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([y]):p.add(y)),Ea(l,y,S)),!1}throw Error(s(435,p.tag))}return Ea(l,y,S),fr(),!1}if(_e)return u=Xi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=S,y!==Gu&&(l=Error(s(422),{cause:y}),Fe(ft(l,p)))):(y!==Gu&&(u=Error(s(423),{cause:y}),Fe(ft(u,p))),l=l.current.alternate,l.flags|=65536,S&=-S,l.lanes|=S,y=ft(y,p),S=ro(l.stateNode,y,S),wi(l,S),nn!==4&&(nn=2)),!1;var T=Error(s(520),{cause:y});if(T=ft(T,p),Do===null?Do=[T]:Do.push(T),nn!==4&&(nn=2),u===null)return!0;y=ft(y,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,l=S&-S,p.lanes|=l,l=ro(p.stateNode,y,l),wi(p,l),!1;case 1:if(u=p.type,T=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ds===null||!ds.has(T))))return p.flags|=65536,S&=-S,p.lanes|=S,S=kh(S),op(S,l,p,y),wi(p,S),!1}p=p.return}while(p!==null);return!1}function Qn(l,u,p,y){u.child=l===null?cs(u,null,p,y):La(u,l.child,p,y)}function fc(l,u,p,y,S){p=p.render;var T=u.ref;if("ref"in y){var U={};for(var I in y)I!=="ref"&&(U[I]=y[I])}else U=y;return pa(u),y=ua(l,u,p,U,T,S),I=rl(),l!==null&&!Rn?(Qo(l,u,S),Bs(l,u,S)):(_e&&I&&At(u),u.flags|=1,Qn(l,u,y,S),u.child)}function up(l,u,p,y,S){if(l===null){var T=p.type;return typeof T=="function"&&!Ns(T)&&T.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=T,cp(l,u,T,y,S)):(l=_l(p.type,null,y,u,u.mode,S),l.ref=u.ref,l.return=u,u.child=l)}if(T=l.child,!jh(l,S)){var U=T.memoizedProps;if(p=p.compare,p=p!==null?p:M,p(U,y)&&l.ref===u.ref)return Bs(l,u,S)}return u.flags|=1,l=zs(T,y),l.ref=u.ref,l.return=u,u.child=l}function cp(l,u,p,y,S){if(l!==null){var T=l.memoizedProps;if(M(T,y)&&l.ref===u.ref)if(Rn=!1,u.pendingProps=y=T,jh(l,S))(l.flags&131072)!==0&&(Rn=!0);else return u.lanes=l.lanes,Bs(l,u,S)}return dc(l,u,p,y,S)}function hp(l,u,p){var y=u.pendingProps,S=y.children,T=(u.stateNode._pendingVisibility&2)!==0,U=l!==null?l.memoizedState:null;if(au(l,u),y.mode==="hidden"||T){if((u.flags&128)!==0){if(y=U!==null?U.baseLanes|p:p,l!==null){for(S=u.child=l.child,T=0;S!==null;)T=T|S.lanes|S.childLanes,S=S.sibling;u.childLanes=T&~y}else u.childLanes=0,u.child=null;return fp(l,u,y,p)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&mc(u,U!==null?U.cachePool:null),U!==null?ar(u,U):lr(),Oi(u);else return u.lanes=u.childLanes=536870912,fp(l,u,U!==null?U.baseLanes|p:p,p)}else U!==null?(mc(u,U.cachePool),ar(u,U),ii(),u.memoizedState=null):(l!==null&&mc(u,null),lr(),ii());return Qn(l,u,S,p),u.child}function fp(l,u,p,y){var S=Wh();return S=S===null?null:{parent:Pr?cn._currentValue:cn._currentValue2,pool:S},u.memoizedState={baseLanes:p,cachePool:S},l!==null&&mc(u,null),lr(),Oi(u),l!==null&&uu(l,u,y,!0),null}function au(l,u){var p=u.ref;if(p===null)l!==null&&l.ref!==null&&(u.flags|=2097664);else{if(typeof p!="function"&&typeof p!="object")throw Error(s(284));(l===null||l.ref!==p)&&(u.flags|=2097664)}}function dc(l,u,p,y,S){return pa(u),p=ua(l,u,p,y,void 0,S),y=rl(),l!==null&&!Rn?(Qo(l,u,S),Bs(l,u,S)):(_e&&y&&At(u),u.flags|=1,Qn(l,u,p,S),u.child)}function dp(l,u,p,y,S,T){return pa(u),u.updateQueue=null,p=Jd(u,y,p,S),Zd(l),y=rl(),l!==null&&!Rn?(Qo(l,u,T),Bs(l,u,T)):(_e&&y&&At(u),u.flags|=1,Qn(l,u,p,T),u.child)}function pp(l,u,p,y,S){if(pa(u),u.stateNode===null){var T=Tl,U=p.contextType;typeof U=="object"&&U!==null&&(T=Zn(U)),T=new p(y,T),u.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Ro,u.stateNode=T,T._reactInternals=u,T=u.stateNode,T.props=y,T.state=u.memoizedState,T.refs={},aa(u),U=p.contextType,T.context=typeof U=="object"&&U!==null?Zn(U):Tl,T.state=u.memoizedState,U=p.getDerivedStateFromProps,typeof U=="function"&&(to(u,p,U,y),T.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(U=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),U!==T.state&&Ro.enqueueReplaceState(T,T.state,null),oa(u,y,T,S),Ze(),T.state=u.memoizedState),typeof T.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(l===null){T=u.stateNode;var I=u.memoizedProps,et=Cs(p,I);T.props=et;var pt=T.context,St=p.contextType;U=Tl,typeof St=="object"&&St!==null&&(U=Zn(St));var Bt=p.getDerivedStateFromProps;St=typeof Bt=="function"||typeof T.getSnapshotBeforeUpdate=="function",I=u.pendingProps!==I,St||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(I||pt!==U)&&lp(u,T,y,U),oi=!1;var xt=u.memoizedState;T.state=xt,oa(u,y,T,S),Ze(),pt=u.memoizedState,I||xt!==pt||oi?(typeof Bt=="function"&&(to(u,p,Bt,y),pt=u.memoizedState),(et=oi||eo(u,p,et,y,xt,pt,U))?(St||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(u.flags|=4194308)):(typeof T.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=pt),T.props=y,T.state=pt,T.context=U,y=et):(typeof T.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{T=u.stateNode,il(l,u),U=u.memoizedProps,St=Cs(p,U),T.props=St,Bt=u.pendingProps,xt=T.context,pt=p.contextType,et=Tl,typeof pt=="object"&&pt!==null&&(et=Zn(pt)),I=p.getDerivedStateFromProps,(pt=typeof I=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(U!==Bt||xt!==et)&&lp(u,T,y,et),oi=!1,xt=u.memoizedState,T.state=xt,oa(u,y,T,S),Ze();var Wt=u.memoizedState;U!==Bt||xt!==Wt||oi||l!==null&&l.dependencies!==null&&cu(l.dependencies)?(typeof I=="function"&&(to(u,p,I,y),Wt=u.memoizedState),(St=oi||eo(u,p,St,y,xt,Wt,et)||l!==null&&l.dependencies!==null&&cu(l.dependencies))?(pt||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(y,Wt,et),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(y,Wt,et)),typeof T.componentDidUpdate=="function"&&(u.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof T.componentDidUpdate!="function"||U===l.memoizedProps&&xt===l.memoizedState||(u.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&xt===l.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=Wt),T.props=y,T.state=Wt,T.context=et,y=St):(typeof T.componentDidUpdate!="function"||U===l.memoizedProps&&xt===l.memoizedState||(u.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&xt===l.memoizedState||(u.flags|=1024),y=!1)}return T=y,au(l,u),y=(u.flags&128)!==0,T||y?(T=u.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:T.render(),u.flags|=1,l!==null&&y?(u.child=La(u,l.child,null,S),u.child=La(u,null,p,S)):Qn(l,u,p,S),u.memoizedState=T.state,l=u.child):l=Bs(l,u,S),l}function mp(l,u,p,y){return Be(),u.flags|=256,Qn(l,u,p,y),u.child}function Xh(l){return{baseLanes:l,cachePool:Qh()}}function lu(l,u,p){return l=l!==null?l.childLanes&~p:0,u&&(l|=er),l}function gp(l,u,p){var y=u.pendingProps,S=!1,T=(u.flags&128)!==0,U;if((U=T)||(U=l!==null&&l.memoizedState===null?!1:(Ye.current&2)!==0),U&&(S=!0,u.flags&=-129),U=(u.flags&32)!==0,u.flags&=-33,l===null){if(_e){if(S?Wn(u):ii(),_e){var I=Ne,et;(et=I)&&(I=sm(I,Lr),I!==null?(u.memoizedState={dehydrated:I,treeContext:zr!==null?{id:os,overflow:us}:null,retryLane:536870912},et=e(18,null,null,0),et.stateNode=I,et.return=u,u.child=et,gn=u,Ne=null,et=!0):et=!1),et||Gt(u)}if(I=u.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return wu(I)?u.lanes=16:u.lanes=536870912,null;on(u)}return I=y.children,y=y.fallback,S?(ii(),S=u.mode,I=Yh({mode:"hidden",children:I},S),y=Ta(y,S,p,null),I.return=u,y.return=u,I.sibling=y,u.child=I,S=u.child,S.memoizedState=Xh(p),S.childLanes=lu(l,U,p),u.memoizedState=Lu,y):(Wn(u),Ih(u,I))}if(et=l.memoizedState,et!==null&&(I=et.dehydrated,I!==null)){if(T)u.flags&256?(Wn(u),u.flags&=-257,u=pc(l,u,p)):u.memoizedState!==null?(ii(),u.child=l.child,u.flags|=128,u=null):(ii(),S=y.fallback,I=u.mode,y=Yh({mode:"visible",children:y.children},I),S=Ta(S,I,p,null),S.flags|=2,y.return=u,S.return=u,y.sibling=S,u.child=y,La(u,l.child,null,p),y=u.child,y.memoizedState=Xh(p),y.childLanes=lu(l,U,p),u.memoizedState=Lu,u=S);else if(Wn(u),wu(I))U=Nc(I).digest,y=Error(s(419)),y.stack="",y.digest=U,Fe({value:y,source:null,stack:null}),u=pc(l,u,p);else if(Rn||uu(l,u,p,!1),U=(p&l.childLanes)!==0,Rn||U){if(U=Le,U!==null){if(y=p&-p,(y&42)!==0)y=1;else switch(y){case 2:y=1;break;case 8:y=4;break;case 32:y=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:y=64;break;case 268435456:y=134217728;break;default:y=0}if(y=(y&(U.suspendedLanes|p))!==0?0:y,y!==0&&y!==et.retryLane)throw et.retryLane=y,In(l,y),Ie(U,l,y),Nf}xl(I)||fr(),u=pc(l,u,p)}else xl(I)?(u.flags|=128,u.child=l.child,u=Cu.bind(null,l),nm(I,u),u=null):(l=et.treeContext,Fi&&(Ne=xf(I),gn=u,_e=!0,pr=null,Lr=!1,l!==null&&(Vi[li++]=os,Vi[li++]=us,Vi[li++]=zr,os=l.id,us=l.overflow,zr=u)),u=Ih(u,y.children),u.flags|=4096);return u}return S?(ii(),S=y.fallback,I=u.mode,et=l.child,T=et.sibling,y=zs(et,{mode:"hidden",children:y.children}),y.subtreeFlags=et.subtreeFlags&31457280,T!==null?S=zs(T,S):(S=Ta(S,I,p,null),S.flags|=2),S.return=u,y.return=u,y.sibling=S,u.child=y,y=S,S=u.child,I=l.child.memoizedState,I===null?I=Xh(p):(et=I.cachePool,et!==null?(T=Pr?cn._currentValue:cn._currentValue2,et=et.parent!==T?{parent:T,pool:T}:et):et=Qh(),I={baseLanes:I.baseLanes|p,cachePool:et}),S.memoizedState=I,S.childLanes=lu(l,U,p),u.memoizedState=Lu,y):(Wn(u),p=l.child,l=p.sibling,p=zs(p,{mode:"visible",children:y.children}),p.return=u,p.sibling=null,l!==null&&(U=u.deletions,U===null?(u.deletions=[l],u.flags|=16):U.push(l)),u.child=p,u.memoizedState=null,p)}function Ih(l,u){return u=Yh({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Yh(l,u){return Bc(l,u,0,null)}function pc(l,u,p){return La(u,l.child,null,p),l=Ih(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function _p(l,u,p){l.lanes|=u;var y=l.alternate;y!==null&&(y.lanes|=u),ou(l.return,u,p)}function qh(l,u,p,y,S){var T=l.memoizedState;T===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:S}:(T.isBackwards=u,T.rendering=null,T.renderingStartTime=0,T.last=y,T.tail=p,T.tailMode=S)}function yp(l,u,p){var y=u.pendingProps,S=y.revealOrder,T=y.tail;if(Qn(l,u,y.children,p),y=Ye.current,(y&2)!==0)y=y&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)t:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&_p(l,p,u);else if(l.tag===19)_p(l,p,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break t;for(;l.sibling===null;){if(l.return===null||l.return===u)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}switch(G(Ye,y),S){case"forwards":for(p=u.child,S=null;p!==null;)l=p.alternate,l!==null&&he(l)===null&&(S=p),p=p.sibling;p=S,p===null?(S=u.child,u.child=null):(S=p.sibling,p.sibling=null),qh(u,!1,S,p,T);break;case"backwards":for(p=null,S=u.child,u.child=null;S!==null;){if(l=S.alternate,l!==null&&he(l)===null){u.child=S;break}l=S.sibling,S.sibling=p,p=S,S=l}qh(u,!0,p,null,T);break;case"together":qh(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Bs(l,u,p){if(l!==null&&(u.dependencies=l.dependencies),vr|=u.lanes,(p&u.childLanes)===0)if(l!==null){if(uu(l,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(s(153));if(u.child!==null){for(l=u.child,p=zs(l,l.pendingProps),u.child=p,p.return=u;l.sibling!==null;)l=l.sibling,p=p.sibling=zs(l,l.pendingProps),p.return=u;p.sibling=null}return u.child}function jh(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&cu(l)))}function b_(l,u,p){switch(u.tag){case 3:yt(u,u.stateNode.containerInfo),da(u,cn,l.memoizedState.cache),Be();break;case 27:case 5:Ft(u);break;case 4:yt(u,u.stateNode.containerInfo);break;case 10:da(u,u.type,u.memoizedProps.value);break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(Wn(u),u.flags|=128,null):(p&u.child.childLanes)!==0?gp(l,u,p):(Wn(u),l=Bs(l,u,p),l!==null?l.sibling:null);Wn(u);break;case 19:var S=(l.flags&128)!==0;if(y=(p&u.childLanes)!==0,y||(uu(l,u,p,!1),y=(p&u.childLanes)!==0),S){if(y)return yp(l,u,p);u.flags|=128}if(S=u.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),G(Ye,Ye.current),y)break;return null;case 22:case 23:return u.lanes=0,hp(l,u,p);case 24:da(u,cn,l.memoizedState.cache)}return Bs(l,u,p)}function bp(l,u,p){if(l!==null)if(l.memoizedProps!==u.pendingProps)Rn=!0;else{if(!jh(l,p)&&(u.flags&128)===0)return Rn=!1,b_(l,u,p);Rn=(l.flags&131072)!==0}else Rn=!1,_e&&(u.flags&1048576)!==0&&it(u,To,u.index);switch(u.lanes=0,u.tag){case 16:t:{l=u.pendingProps;var y=u.elementType,S=y._init;if(y=S(y._payload),u.type=y,typeof y=="function")Ns(y)?(l=Cs(y,l),u.tag=1,u=pp(null,u,y,l,p)):(u.tag=0,u=dc(null,u,y,l,p));else{if(y!=null){if(S=y.$$typeof,S===Rc){u.tag=11,u=fc(null,u,y,l,p);break t}else if(S===mo){u.tag=14,u=up(null,u,y,l,p);break t}}throw u=h(y)||y,Error(s(306,u,""))}}return u;case 0:return dc(l,u,u.type,u.pendingProps,p);case 1:return y=u.type,S=Cs(y,u.pendingProps),pp(l,u,y,S,p);case 3:t:{if(yt(u,u.stateNode.containerInfo),l===null)throw Error(s(387));var T=u.pendingProps;S=u.memoizedState,y=S.element,il(l,u),oa(u,T,null,p);var U=u.memoizedState;if(T=U.cache,da(u,cn,T),T!==S.cache&&ul(u,[cn],p,!0),Ze(),T=U.element,Fi&&S.isDehydrated)if(S={element:T,isDehydrated:!1,cache:U.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=mp(l,u,T,p);break t}else if(T!==y){y=ft(Error(s(424)),u),Fe(y),u=mp(l,u,T,p);break t}else for(Fi&&(Ne=Sl(u.stateNode.containerInfo),gn=u,_e=!0,pr=null,Lr=!0),p=cs(u,null,T,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Be(),T===y){u=Bs(l,u,p);break t}Qn(l,u,T,p)}u=u.child}return u;case 26:if(Zi)return au(l,u),l===null?(p=Af(u.type,null,u.pendingProps,null))?u.memoizedState=p:_e||(u.stateNode=Mf(u.type,u.pendingProps,qs.current,u)):u.memoizedState=Af(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:if(qn)return Ft(u),l===null&&qn&&_e&&(y=u.stateNode=Hc(u.type,u.pendingProps,qs.current,mn.current,!1),gn=u,Lr=!0,Ne=Is(y)),y=u.pendingProps.children,l!==null||_e?Qn(l,u,y,p):u.child=La(u,null,y,p),au(l,u),u.child;case 5:return l===null&&_e&&(cm(u.type,u.pendingProps,mn.current),(S=y=Ne)&&(y=Sf(y,u.type,u.pendingProps,Lr),y!==null?(u.stateNode=y,gn=u,Ne=Is(y),Lr=!1,S=!0):S=!1),S||Gt(u)),Ft(u),S=u.type,T=u.pendingProps,U=l!==null?l.memoizedProps:null,y=T.children,$n(S,T)?y=null:U!==null&&$n(S,U)&&(u.flags|=32),u.memoizedState!==null&&(S=ua(l,u,$d,null,null,p),Pr?Xs._currentValue=S:Xs._currentValue2=S),au(l,u),Qn(l,u,y,p),u.child;case 6:return l===null&&_e&&(R_(u.pendingProps,mn.current),(l=p=Ne)&&(p=rm(p,u.pendingProps,Lr),p!==null?(u.stateNode=p,gn=u,Ne=null,l=!0):l=!1),l||Gt(u)),null;case 13:return gp(l,u,p);case 4:return yt(u,u.stateNode.containerInfo),y=u.pendingProps,l===null?u.child=La(u,null,y,p):Qn(l,u,y,p),u.child;case 11:return fc(l,u,u.type,u.pendingProps,p);case 7:return Qn(l,u,u.pendingProps,p),u.child;case 8:return Qn(l,u,u.pendingProps.children,p),u.child;case 12:return Qn(l,u,u.pendingProps.children,p),u.child;case 10:return y=u.pendingProps,da(u,u.type,y.value),Qn(l,u,y.children,p),u.child;case 9:return S=u.type._context,y=u.pendingProps.children,pa(u),S=Zn(S),y=y(S),u.flags|=1,Qn(l,u,y,p),u.child;case 14:return up(l,u,u.type,u.pendingProps,p);case 15:return cp(l,u,u.type,u.pendingProps,p);case 19:return yp(l,u,p);case 22:return hp(l,u,p);case 24:return pa(u),y=Zn(cn),l===null?(S=Wh(),S===null&&(S=Le,T=ma(),S.pooledCache=T,T.refCount++,T!==null&&(S.pooledCacheLanes|=p),S=T),u.memoizedState={parent:y,cache:S},aa(u),da(u,cn,S)):((l.lanes&p)!==0&&(il(l,u),oa(u,null,null,p),Ze()),S=l.memoizedState,T=u.memoizedState,S.parent!==y?(S={parent:y,cache:y},u.memoizedState=S,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=S),da(u,cn,y)):(y=T.cache,da(u,cn,y),y!==S.cache&&ul(u,[cn],p,!0))),Qn(l,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(s(156,u.tag))}function da(l,u,p){Pr?(G(gr,u._currentValue),u._currentValue=p):(G(gr,u._currentValue2),u._currentValue2=p)}function Rs(l){var u=gr.current;Pr?l._currentValue=u:l._currentValue2=u,P(gr)}function ou(l,u,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),l===p)break;l=l.return}}function ul(l,u,p,y){var S=l.child;for(S!==null&&(S.return=l);S!==null;){var T=S.dependencies;if(T!==null){var U=S.child;T=T.firstContext;t:for(;T!==null;){var I=T;T=S;for(var et=0;et<u.length;et++)if(I.context===u[et]){T.lanes|=p,I=T.alternate,I!==null&&(I.lanes|=p),ou(T.return,p,l),y||(U=null);break t}T=I.next}}else if(S.tag===18){if(U=S.return,U===null)throw Error(s(341));U.lanes|=p,T=U.alternate,T!==null&&(T.lanes|=p),ou(U,p,l),U=null}else U=S.child;if(U!==null)U.return=S;else for(U=S;U!==null;){if(U===l){U=null;break}if(S=U.sibling,S!==null){S.return=U.return,U=S;break}U=U.return}S=U}}function uu(l,u,p,y){l=null;for(var S=u,T=!1;S!==null;){if(!T){if((S.flags&524288)!==0)T=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var U=S.alternate;if(U===null)throw Error(s(387));if(U=U.memoizedProps,U!==null){var I=S.type;Ti(S.pendingProps.value,U.value)||(l!==null?l.push(I):l=[I])}}else if(S===Pu.current){if(U=S.alternate,U===null)throw Error(s(387));U.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(l!==null?l.push(Xs):l=[Xs])}S=S.return}l!==null&&ul(u,l,p,y),u.flags|=262144}function cu(l){for(l=l.firstContext;l!==null;){var u=l.context;if(!Ti(Pr?u._currentValue:u._currentValue2,l.memoizedValue))return!0;l=l.next}return!1}function pa(l){Xa=l,_r=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Zn(l){return Kh(Xa,l)}function hu(l,u){return Xa===null&&pa(l),Kh(l,u)}function Kh(l,u){var p=Pr?u._currentValue:u._currentValue2;if(u={context:u,memoizedValue:p,next:null},_r===null){if(l===null)throw Error(s(308));_r=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else _r=_r.next=u;return p}function ma(){return{controller:new Hu,data:new Map,refCount:0}}function fu(l){l.refCount--,l.refCount===0&&an(D_,function(){l.controller.abort()})}function Wh(){var l=Rl.current;return l!==null?l:Le.pooledCache}function mc(l,u){u===null?G(Rl,Rl.current):G(Rl,u.pool)}function Qh(){var l=Wh();return l===null?null:{parent:Pr?cn._currentValue:cn._currentValue2,pool:l}}function Pi(l){l.flags|=4}function so(l,u){if(l!==null&&l.child===u.child)return!1;if((u.flags&16)!==0)return!0;for(l=u.child;l!==null;){if((l.flags&13878)!==0||(l.subtreeFlags&13878)!==0)return!0;l=l.sibling}return!1}function cl(l,u,p,y){if(tn)for(p=u.child;p!==null;){if(p.tag===5||p.tag===6)Mu(l,p.stateNode);else if(!(p.tag===4||qn&&p.tag===27)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return;p=p.return}p.sibling.return=p.return,p=p.sibling}else if(Gr)for(var S=u.child;S!==null;){if(S.tag===5){var T=S.stateNode;p&&y&&(T=em(T,S.type,S.memoizedProps)),Mu(l,T)}else if(S.tag===6)T=S.stateNode,p&&y&&(T=vf(T,S.memoizedProps)),Mu(l,T);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)T=S.child,T!==null&&(T.return=S),cl(l,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function vp(l,u,p,y){if(Gr)for(var S=u.child;S!==null;){if(S.tag===5){var T=S.stateNode;p&&y&&(T=em(T,S.type,S.memoizedProps)),bf(l,T)}else if(S.tag===6)T=S.stateNode,p&&y&&(T=vf(T,S.memoizedProps)),bf(l,T);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)T=S.child,T!==null&&(T.return=S),vp(l,S,!(S.memoizedProps!==null&&S.memoizedProps.mode==="manual"),!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function du(l,u){if(Gr&&so(l,u)){l=u.stateNode;var p=l.containerInfo,y=Gc();vp(y,u,!1,!1),l.pendingChildren=y,Pi(u),$p(p,y)}}function gc(l,u,p,y){if(tn)l.memoizedProps!==y&&Pi(u);else if(Gr){var S=l.stateNode,T=l.memoizedProps;if((l=so(l,u))||T!==y){var U=mn.current;T=Jp(S,p,T,y,!l,null),T===S?u.stateNode=S:(Mc(T,p,y,U)&&Pi(u),u.stateNode=T,l?cl(T,u,!1,!1):Pi(u))}else u.stateNode=S}}function _c(l,u,p){if(df(u,p)){if(l.flags|=16777216,!pf(u,p))if(Yn())l.flags|=8192;else throw ui=Ai,zu}else l.flags&=-16777217}function yc(l,u){if(dm(u)){if(l.flags|=16777216,!Df(u))if(Yn())l.flags|=8192;else throw ui=Ai,zu}else l.flags&=-16777217}function ao(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?N():536870912,l.lanes|=u,Dn|=u)}function lo(l,u){if(!_e)switch(l.tailMode){case"hidden":u=l.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function $e(l){var u=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(u)for(var S=l.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags&31457280,y|=S.flags&31457280,S.return=l,S=S.sibling;else for(S=l.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=l,S=S.sibling;return l.subtreeFlags|=y,l.childLanes=p,u}function xp(l,u,p){var y=u.pendingProps;switch(Rt(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(u),null;case 1:return $e(u),null;case 3:return p=u.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),Rs(cn),Mt(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(Te(u)?Pi(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,pr!==null&&(Ps(pr),pr=null))),du(l,u),$e(u),null;case 26:if(Zi){p=u.type;var S=u.memoizedState;return l===null?(Pi(u),S!==null?($e(u),yc(u,S)):($e(u),_c(u,p,y))):S?S!==l.memoizedState?(Pi(u),$e(u),yc(u,S)):($e(u),u.flags&=-16777217):(tn?l.memoizedProps!==y&&Pi(u):gc(l,u,p,y),$e(u),_c(u,p,y)),null}case 27:if(qn){if(Pe(u),p=qs.current,S=u.type,l!==null&&u.stateNode!=null)tn?l.memoizedProps!==y&&Pi(u):gc(l,u,S,y);else{if(!y){if(u.stateNode===null)throw Error(s(166));return $e(u),null}l=mn.current,Te(u)?ne(u,l):(l=Hc(S,y,p,l,!0),u.stateNode=l,Pi(u))}return $e(u),null}case 5:if(Pe(u),p=u.type,l!==null&&u.stateNode!=null)gc(l,u,p,y);else{if(!y){if(u.stateNode===null)throw Error(s(166));return $e(u),null}l=mn.current,Te(u)?ne(u,l):(S=ff(p,y,qs.current,l,u),cl(S,u,!1,!1),u.stateNode=S,Mc(S,p,y,l)&&Pi(u))}return $e(u),_c(u,u.type,u.pendingProps),null;case 6:if(l&&u.stateNode!=null)p=l.memoizedProps,tn?p!==y&&Pi(u):Gr&&(p!==y?(u.stateNode=dn(y,qs.current,mn.current,u),Pi(u)):u.stateNode=l.stateNode);else{if(typeof y!="string"&&u.stateNode===null)throw Error(s(166));if(l=qs.current,p=mn.current,Te(u)){if(!Fi)throw Error(s(176));if(l=u.stateNode,p=u.memoizedProps,y=null,S=gn,S!==null)switch(S.tag){case 27:case 5:y=S.memoizedProps}zc(l,p,u,y)||Gt(u)}else u.stateNode=dn(y,l,p,u)}return $e(u),null;case 13:if(y=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(S=Te(u),y!==null&&y.dehydrated!==null){if(l===null){if(!S)throw Error(s(318));if(!Fi)throw Error(s(344));if(S=u.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(s(317));am(S,u)}else Be(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;$e(u),S=!1}else pr!==null&&(Ps(pr),pr=null),S=!0;if(!S)return u.flags&256?(on(u),u):(on(u),null)}if(on(u),(u.flags&128)!==0)return u.lanes=p,u;if(p=y!==null,l=l!==null&&l.memoizedState!==null,p){y=u.child,S=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(S=y.alternate.memoizedState.cachePool.pool);var T=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(T=y.memoizedState.cachePool.pool),T!==S&&(y.flags|=2048)}return p!==l&&p&&(u.child.flags|=8192),ao(u,u.updateQueue),$e(u),null;case 4:return Mt(),du(l,u),l===null&&wp(u.stateNode.containerInfo),$e(u),null;case 10:return Rs(u.type),$e(u),null;case 19:if(P(Ye),S=u.memoizedState,S===null)return $e(u),null;if(y=(u.flags&128)!==0,T=S.rendering,T===null)if(y)lo(S,!1);else{if(nn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(T=he(l),T!==null){for(u.flags|=128,lo(S,!1),l=T.updateQueue,u.updateQueue=l,ao(u,l),u.subtreeFlags=0,l=p,p=u.child;p!==null;)gl(p,l),p=p.sibling;return G(Ye,Ye.current&1|2),u.child}l=l.sibling}S.tail!==null&&Ji()>nr&&(u.flags|=128,y=!0,lo(S,!1),u.lanes=4194304)}else{if(!y)if(l=he(T),l!==null){if(u.flags|=128,y=!0,l=l.updateQueue,u.updateQueue=l,ao(u,l),lo(S,!0),S.tail===null&&S.tailMode==="hidden"&&!T.alternate&&!_e)return $e(u),null}else 2*Ji()-S.renderingStartTime>nr&&p!==536870912&&(u.flags|=128,y=!0,lo(S,!1),u.lanes=4194304);S.isBackwards?(T.sibling=u.child,u.child=T):(l=S.last,l!==null?l.sibling=T:u.child=T,S.last=T)}return S.tail!==null?(u=S.tail,S.rendering=u,S.tail=u.sibling,S.renderingStartTime=Ji(),u.sibling=null,l=Ye.current,G(Ye,y?l&1|2:l&1),u):($e(u),null);case 22:case 23:return on(u),or(),y=u.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(p&536870912)!==0&&(u.flags&128)===0&&($e(u),u.subtreeFlags&6&&(u.flags|=8192)):$e(u),p=u.updateQueue,p!==null&&ao(u,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048),l!==null&&P(Rl),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),Rs(cn),$e(u),null;case 25:return null}throw Error(s(156,u.tag))}function v_(l,u){switch(Rt(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Rs(cn),Mt(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Pe(u),null;case 13:if(on(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(s(340));Be()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return P(Ye),null;case 4:return Mt(),null;case 10:return Rs(u.type),null;case 22:case 23:return on(u),or(),l!==null&&P(Rl),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Rs(cn),null;case 25:return null;default:return null}}function Sp(l,u){switch(Rt(u),u.tag){case 3:Rs(cn),Mt();break;case 26:case 27:case 5:Pe(u);break;case 4:Mt();break;case 13:on(u);break;case 19:P(Ye);break;case 10:Rs(u.type);break;case 22:case 23:on(u),or(),l!==null&&P(Rl);break;case 24:Rs(cn)}}function pu(l,u){try{var p=u.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var S=y.next;p=S;do{if((p.tag&l)===l){y=void 0;var T=p.create,U=p.inst;y=T(),U.destroy=y}p=p.next}while(p!==S)}}catch(I){Re(u,u.return,I)}}function ga(l,u,p){try{var y=u.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var T=S.next;y=T;do{if((y.tag&l)===l){var U=y.inst,I=U.destroy;if(I!==void 0){U.destroy=void 0,S=u;var et=p;try{I()}catch(pt){Re(S,et,pt)}}}y=y.next}while(y!==T)}}catch(pt){Re(u,u.return,pt)}}function Ep(l){var u=l.updateQueue;if(u!==null){var p=l.stateNode;try{Wo(u,p)}catch(y){Re(l,l.return,y)}}}function Gi(l,u,p){p.props=Cs(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(y){Re(l,u,y)}}function Or(l,u){try{var p=l.ref;if(p!==null){var y=l.stateNode;switch(l.tag){case 26:case 27:case 5:var S=bl(y);break;default:S=y}typeof p=="function"?l.refCleanup=p(S):p.current=S}}catch(T){Re(l,u,T)}}function Ni(l,u){var p=l.ref,y=l.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(S){Re(l,u,S)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(S){Re(l,u,S)}else p.current=null}function Zh(l){var u=l.type,p=l.memoizedProps,y=l.stateNode;try{Ip(y,u,p,l)}catch(S){Re(l,l.return,S)}}function Jh(l,u,p){try{Yp(l.stateNode,l.type,p,u,l)}catch(y){Re(l,l.return,y)}}function $h(l){return l.tag===5||l.tag===3||(Zi?l.tag===26:!1)||(qn?l.tag===27:!1)||l.tag===4}function mu(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||$h(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&(!qn||l.tag!==27)&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function tf(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?_f(p,l,u):gf(p,l);else if(!(y===4||qn&&y===27)&&(l=l.child,l!==null))for(tf(l,u,p),l=l.sibling;l!==null;)tf(l,u,p),l=l.sibling}function bc(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?qp(p,l,u):kp(p,l);else if(!(y===4||qn&&y===27)&&(l=l.child,l!==null))for(bc(l,u,p),l=l.sibling;l!==null;)bc(l,u,p),l=l.sibling}function hl(l,u,p){l=l.containerInfo;try{tm(l,p)}catch(y){Re(u,u.return,y)}}function ef(l,u){for(Dp(l.containerInfo),kt=u;kt!==null;)if(l=kt,u=l.child,(l.subtreeFlags&1028)!==0&&u!==null)u.return=l,kt=u;else for(;kt!==null;){l=kt;var p=l.alternate;switch(u=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&p!==null){u=void 0;var y=l,S=p.memoizedProps;p=p.memoizedState;var T=y.stateNode;try{var U=Cs(y.type,S,y.elementType===y.type);u=T.getSnapshotBeforeUpdate(U,p),T.__reactInternalSnapshotBeforeUpdate=u}catch(I){Re(y,y.return,I)}}break;case 3:(u&1024)!==0&&tn&&Zp(l.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(s(163))}if(u=l.sibling,u!==null){u.return=l.return,kt=u;break}kt=l.return}return U=Ve,Ve=!1,U}function oo(l,u,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Ds(l,p),y&4&&pu(5,p);break;case 1:if(Ds(l,p),y&4)if(l=p.stateNode,u===null)try{l.componentDidMount()}catch(I){Re(p,p.return,I)}else{var S=Cs(p.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(S,u,l.__reactInternalSnapshotBeforeUpdate)}catch(I){Re(p,p.return,I)}}y&64&&Ep(p),y&512&&Or(p,p.return);break;case 3:if(Ds(l,p),y&64&&(y=p.updateQueue,y!==null)){if(l=null,p.child!==null)switch(p.child.tag){case 27:case 5:l=bl(p.child.stateNode);break;case 1:l=p.child.stateNode}try{Wo(y,l)}catch(I){Re(p,p.return,I)}}break;case 26:if(Zi){Ds(l,p),y&512&&Or(p,p.return);break}case 27:case 5:Ds(l,p),u===null&&y&4&&Zh(p),y&512&&Or(p,p.return);break;case 12:Ds(l,p);break;case 13:Ds(l,p),y&4&&fl(l,p);break;case 22:if(S=p.memoizedState!==null||Js,!S){u=u!==null&&u.memoizedState!==null||Kt;var T=Js,U=Kt;Js=S,(Kt=u)&&!U?_a(l,p,(p.subtreeFlags&8772)!==0):Ds(l,p),Js=T,Kt=U}y&512&&(p.memoizedProps.mode==="manual"?Or(p,p.return):Ni(p,p.return));break;default:Ds(l,p)}}function vc(l){var u=l.alternate;u!==null&&(l.alternate=null,vc(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Pp(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function ur(l,u,p){for(p=p.child;p!==null;)Ms(l,u,p),p=p.sibling}function Ms(l,u,p){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(Eo,p)}catch{}switch(p.tag){case 26:if(Zi){Kt||Ni(p,u),ur(l,u,p),p.memoizedState?Bf(p.memoizedState):p.stateNode&&vo(p.stateNode);break}case 27:if(qn){Kt||Ni(p,u);var y=Ee,S=bn;Ee=p.stateNode,ur(l,u,p),Of(p.stateNode),Ee=y,bn=S;break}case 5:Kt||Ni(p,u);case 6:if(tn){if(y=Ee,S=bn,Ee=null,ur(l,u,p),Ee=y,bn=S,Ee!==null)if(bn)try{Kp(Ee,p.stateNode)}catch(T){Re(p,u,T)}else try{jp(Ee,p.stateNode)}catch(T){Re(p,u,T)}}else ur(l,u,p);break;case 18:tn&&Ee!==null&&(bn?Ef(Ee,p.stateNode):um(Ee,p.stateNode));break;case 4:tn?(y=Ee,S=bn,Ee=p.stateNode.containerInfo,bn=!0,ur(l,u,p),Ee=y,bn=S):(Gr&&hl(p.stateNode,p,Gc()),ur(l,u,p));break;case 0:case 11:case 14:case 15:Kt||ga(2,p,u),Kt||ga(4,p,u),ur(l,u,p);break;case 1:Kt||(Ni(p,u),y=p.stateNode,typeof y.componentWillUnmount=="function"&&Gi(p,u,y)),ur(l,u,p);break;case 21:ur(l,u,p);break;case 22:Kt||Ni(p,u),Kt=(y=Kt)||p.memoizedState!==null,ur(l,u,p),Kt=y;break;default:ur(l,u,p)}}function fl(l,u){if(Fi&&u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Lc(l)}catch(p){Re(u,u.return,p)}}function nf(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new re),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new re),u;default:throw Error(s(435,l.tag))}}function xc(l,u){var p=nf(l);u.forEach(function(y){var S=Cc.bind(null,l,y);p.has(y)||(p.add(y),y.then(S,S))})}function Tn(l,u){var p=u.deletions;if(p!==null)for(var y=0;y<p.length;y++){var S=p[y],T=l,U=u;if(tn){var I=U;t:for(;I!==null;){switch(I.tag){case 27:case 5:Ee=I.stateNode,bn=!1;break t;case 3:Ee=I.stateNode.containerInfo,bn=!0;break t;case 4:Ee=I.stateNode.containerInfo,bn=!0;break t}I=I.return}if(Ee===null)throw Error(s(160));Ms(T,U,S),Ee=null,bn=!1}else Ms(T,U,S);T=S.alternate,T!==null&&(T.return=null),S.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)rf(u,l),u=u.sibling}function rf(l,u){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Tn(u,l),zi(l),y&4&&(ga(3,l,l.return),pu(3,l),ga(5,l,l.return));break;case 1:Tn(u,l),zi(l),y&512&&(Kt||p===null||Ni(p,p.return)),y&64&&Js&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:if(Zi){var S=hi;Tn(u,l),zi(l),y&512&&(Kt||p===null||Ni(p,p.return)),y&4&&(y=p!==null?p.memoizedState:null,u=l.memoizedState,p===null?u===null?l.stateNode===null?l.stateNode=hm(S,l.type,l.memoizedProps,l):Rf(S,l.type,l.stateNode):l.stateNode=Cf(S,u,l.memoizedProps):y!==u?(y===null?p.stateNode!==null&&vo(p.stateNode):Bf(y),u===null?Rf(S,l.type,l.stateNode):Cf(S,u,l.memoizedProps)):u===null&&l.stateNode!==null&&Jh(l,l.memoizedProps,p.memoizedProps));break}case 27:if(qn&&y&4&&l.alternate===null){S=l.stateNode;var T=l.memoizedProps;try{pm(S),Uf(l.type,T,S,l)}catch(St){Re(l,l.return,St)}}case 5:if(Tn(u,l),zi(l),y&512&&(Kt||p===null||Ni(p,p.return)),tn){if(l.flags&32){u=l.stateNode;try{Pc(u)}catch(St){Re(l,l.return,St)}}y&4&&l.stateNode!=null&&(u=l.memoizedProps,Jh(l,u,p!==null?p.memoizedProps:u)),y&1024&&(ze=!0)}break;case 6:if(Tn(u,l),zi(l),y&4&&tn){if(l.stateNode===null)throw Error(s(162));y=l.memoizedProps,p=p!==null?p.memoizedProps:y,u=l.stateNode;try{Xp(u,p,y)}catch(St){Re(l,l.return,St)}}break;case 3:if(Zi?(fm(),S=hi,hi=Hn(u.containerInfo),Tn(u,l),hi=S):Tn(u,l),zi(l),y&4){if(tn&&Fi&&p!==null&&p.memoizedState.isDehydrated)try{om(u.containerInfo)}catch(St){Re(l,l.return,St)}if(Gr){y=u.containerInfo,p=u.pendingChildren;try{tm(y,p)}catch(St){Re(l,l.return,St)}}}ze&&(ze=!1,sf(l));break;case 4:Zi?(p=hi,hi=Hn(l.stateNode.containerInfo),Tn(u,l),zi(l),hi=p):(Tn(u,l),zi(l)),y&4&&Gr&&hl(l.stateNode,l,l.stateNode.pendingChildren);break;case 12:Tn(u,l),zi(l);break;case 13:Tn(u,l),zi(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Lf=Ji()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,xc(l,y)));break;case 22:y&512&&(Kt||p===null||Ni(p,p.return)),S=l.memoizedState!==null;var U=p!==null&&p.memoizedState!==null,I=Js,et=Kt;if(Js=I||S,Kt=et||U,Tn(u,l),Kt=et,Js=I,zi(l),u=l.stateNode,u._current=l,u._visibility&=-3,u._visibility|=u._pendingVisibility&2,y&8192&&(u._visibility=S?u._visibility&-2:u._visibility|1,S&&(u=Js||Kt,p===null||U||u||uo(l)),tn&&(l.memoizedProps===null||l.memoizedProps.mode!=="manual"))){t:if(p=null,tn)for(u=l;;){if(u.tag===5||Zi&&u.tag===26||qn&&u.tag===27){if(p===null){U=p=u;try{T=U.stateNode,S?Wp(T):B_(U.stateNode,U.memoizedProps)}catch(St){Re(U,U.return,St)}}}else if(u.tag===6){if(p===null){U=u;try{var pt=U.stateNode;S?Qp(pt):yf(pt,U.memoizedProps)}catch(St){Re(U,U.return,St)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break t;for(;u.sibling===null;){if(u.return===null||u.return===l)break t;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}}y&4&&(y=l.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,xc(l,p))));break;case 19:Tn(u,l),zi(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,xc(l,y)));break;case 21:break;default:Tn(u,l),zi(l)}}function zi(l){var u=l.flags;if(u&2){try{if(tn&&(!qn||l.tag!==27)){t:{for(var p=l.return;p!==null;){if($h(p)){var y=p;break t}p=p.return}throw Error(s(160))}switch(y.tag){case 27:if(qn){var S=y.stateNode,T=mu(l);bc(l,T,S);break}case 5:var U=y.stateNode;y.flags&32&&(Pc(U),y.flags&=-33);var I=mu(l);bc(l,I,U);break;case 3:case 4:var et=y.stateNode.containerInfo,pt=mu(l);tf(l,pt,et);break;default:throw Error(s(161))}}}catch(St){Re(l,l.return,St)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function sf(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;sf(u),u.tag===5&&u.flags&1024&&Np(u.stateNode),l=l.sibling}}function Ds(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)oo(l,u.alternate,u),u=u.sibling}function uo(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:ga(4,u,u.return),uo(u);break;case 1:Ni(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&Gi(u,u.return,p),uo(u);break;case 26:case 27:case 5:Ni(u,u.return),uo(u);break;case 22:Ni(u,u.return),u.memoizedState===null&&uo(u);break;default:uo(u)}l=l.sibling}}function _a(l,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,S=l,T=u,U=T.flags;switch(T.tag){case 0:case 11:case 15:_a(S,T,p),pu(4,T);break;case 1:if(_a(S,T,p),y=T,S=y.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(pt){Re(y,y.return,pt)}if(y=T,S=y.updateQueue,S!==null){var I=y.stateNode;try{var et=S.shared.hiddenCallbacks;if(et!==null)for(S.shared.hiddenCallbacks=null,S=0;S<et.length;S++)Kl(et[S],I)}catch(pt){Re(y,y.return,pt)}}p&&U&64&&Ep(T),Or(T,T.return);break;case 26:case 27:case 5:_a(S,T,p),p&&y===null&&U&4&&Zh(T),Or(T,T.return);break;case 12:_a(S,T,p);break;case 13:_a(S,T,p),p&&U&4&&fl(S,T);break;case 22:T.memoizedState===null&&_a(S,T,p),Or(T,T.return);break;default:_a(S,T,p)}u=u.sibling}}function Sc(l,u){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&fu(p))}function Ec(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&fu(l))}function ws(l,u,p,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)cr(l,u,p,y),u=u.sibling}function cr(l,u,p,y){var S=u.flags;switch(u.tag){case 0:case 11:case 15:ws(l,u,p,y),S&2048&&pu(9,u);break;case 3:ws(l,u,p,y),S&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&fu(l)));break;case 12:if(S&2048){ws(l,u,p,y),l=u.stateNode;try{var T=u.memoizedProps,U=T.id,I=T.onPostCommit;typeof I=="function"&&I(U,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(et){Re(u,u.return,et)}}else ws(l,u,p,y);break;case 23:break;case 22:T=u.stateNode,u.memoizedState!==null?T._visibility&4?ws(l,u,p,y):$r(l,u):T._visibility&4?ws(l,u,p,y):(T._visibility|=4,Jn(l,u,p,y,(u.subtreeFlags&10256)!==0)),S&2048&&Sc(u.alternate,u);break;case 24:ws(l,u,p,y),S&2048&&Ec(u.alternate,u);break;default:ws(l,u,p,y)}}function Jn(l,u,p,y,S){for(S=S&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var T=l,U=u,I=p,et=y,pt=U.flags;switch(U.tag){case 0:case 11:case 15:Jn(T,U,I,et,S),pu(8,U);break;case 23:break;case 22:var St=U.stateNode;U.memoizedState!==null?St._visibility&4?Jn(T,U,I,et,S):$r(T,U):(St._visibility|=4,Jn(T,U,I,et,S)),S&&pt&2048&&Sc(U.alternate,U);break;case 24:Jn(T,U,I,et,S),S&&pt&2048&&Ec(U.alternate,U);break;default:Jn(T,U,I,et,S)}u=u.sibling}}function $r(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=l,y=u,S=y.flags;switch(y.tag){case 22:$r(p,y),S&2048&&Sc(y.alternate,y);break;case 24:$r(p,y),S&2048&&Ec(y.alternate,y);break;default:$r(p,y)}u=u.sibling}}function Us(l){if(l.subtreeFlags&Ia)for(l=l.child;l!==null;)gu(l),l=l.sibling}function gu(l){switch(l.tag){case 26:Us(l),l.flags&Ia&&(l.memoizedState!==null?wf(hi,l.memoizedState,l.memoizedProps):mf(l.type,l.memoizedProps));break;case 5:Us(l),l.flags&Ia&&mf(l.type,l.memoizedProps);break;case 3:case 4:if(Zi){var u=hi;hi=Hn(l.stateNode.containerInfo),Us(l),hi=u}else Us(l);break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=Ia,Ia=16777216,Us(l),Ia=u):Us(l));break;default:Us(l)}}function _u(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function dl(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];kt=y,bu(y,l)}_u(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Os(l),l=l.sibling}function Os(l){switch(l.tag){case 0:case 11:case 15:dl(l),l.flags&2048&&ga(9,l,l.return);break;case 3:dl(l);break;case 12:dl(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&4&&(l.return===null||l.return.tag!==13)?(u._visibility&=-5,yu(l)):dl(l);break;default:dl(l)}}function yu(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];kt=y,bu(y,l)}_u(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:ga(8,u,u.return),yu(u);break;case 22:p=u.stateNode,p._visibility&4&&(p._visibility&=-5,yu(u));break;default:yu(u)}l=l.sibling}}function bu(l,u){for(;kt!==null;){var p=kt;switch(p.tag){case 0:case 11:case 15:ga(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:fu(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,kt=y;else t:for(p=l;kt!==null;){y=kt;var S=y.sibling,T=y.return;if(vc(y),y===p){kt=null;break t}if(S!==null){S.return=T,kt=S;break t}kt=T}}}function ya(l){var u=wc(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(s(364));return u}if(l=Hp(l),l===null)throw Error(s(362));return l.stateNode.current}function Tc(l,u){var p=l.tag;switch(u.$$typeof){case We:if(l.type===u.value)return!0;break;case kr:t:{for(u=u.value,l=[l,0],p=0;p<l.length;){var y=l[p++],S=y.tag,T=l[p++],U=u[T];if(S!==5&&S!==26&&S!==27||!ss(y)){for(;U!=null&&Tc(y,U);)T++,U=u[T];if(T===u.length){u=!0;break t}else for(y=y.child;y!==null;)l.push(y,T),y=y.sibling}}u=!1}return u;case hs:if((p===5||p===26||p===27)&&Vp(l.stateNode,u.value))return!0;break;case Bi:if((p===5||p===6||p===26||p===27)&&(l=Fp(l),l!==null&&0<=l.indexOf(u.value)))return!0;break;case Mo:if((p===5||p===26||p===27)&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Li(l){switch(l.$$typeof){case We:return"<"+(h(l.value)||"Unknown")+">";case kr:return":has("+(Li(l)||"")+")";case hs:return'[role="'+l.value+'"]';case Bi:return'"'+l.value+'"';case Mo:return'[data-testname="'+l.value+'"]';default:throw Error(s(365))}}function pl(l,u){var p=[];l=[l,0];for(var y=0;y<l.length;){var S=l[y++],T=S.tag,U=l[y++],I=u[U];if(T!==5&&T!==26&&T!==27||!ss(S)){for(;I!=null&&Tc(S,I);)U++,I=u[U];if(U===u.length)p.push(S);else for(S=S.child;S!==null;)l.push(S,U),S=S.sibling}}return p}function ba(l,u){if(!bo)throw Error(s(363));l=ya(l),l=pl(l,u),u=[],l=Array.from(l);for(var p=0;p<l.length;){var y=l[p++],S=y.tag;if(S===5||S===26||S===27)ss(y)||u.push(y.stateNode);else for(y=y.child;y!==null;)l.push(y),y=y.sibling}return u}function ri(){if((oe&2)!==0&&ue!==0)return ue&-ue;if(Yt.T!==null){var l=Ke;return l!==0?l:Es()}return Up()}function vu(){er===0&&(er=(ue&536870912)===0||_e?ht():536870912);var l=Xi.current;return l!==null&&(l.flags|=32),er}function Ie(l,u,p){(l===Le&&Ue===2||l.cancelPendingCommit!==null)&&(va(l,0),Si(l,ue,er,!1)),X(l,p),((oe&2)===0||l!==Le)&&(l===Le&&((oe&2)===0&&(ta|=p),nn===4&&Si(l,ue,er,!1)),Kn(l))}function Wi(l,u,p){if((oe&6)!==0)throw Error(s(327));var y=!p&&(u&60)===0&&(u&l.expiredLanes)===0||nt(l,u),S=y?Tp(l,u):Su(l,u,!0),T=y;do{if(S===0){br&&!y&&Si(l,u,0,!1);break}else if(S===6)Si(l,u,0,!yr);else{if(p=l.current.alternate,T&&!Gs(p)){S=Su(l,u,!1),T=!1;continue}if(S===2){if(T=u,l.errorRecoveryDisabledLanes&T)var U=0;else U=l.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){u=U;t:{var I=l;S=Do;var et=Fi&&I.current.memoizedState.isDehydrated;if(et&&(va(I,U).flags|=256),U=Su(I,U,!1),U!==2){if(Ml&&!et){I.errorRecoveryDisabledLanes|=T,ta|=T,S=4;break t}T=xr,xr=S,T!==null&&Ps(T)}S=U}if(T=!1,S!==2)continue}}if(S===1){va(l,0),Si(l,u,0,!0);break}t:{switch(y=l,S){case 0:case 1:throw Error(s(345));case 4:if((u&4194176)===u){Si(y,u,er,!yr);break t}break;case 2:xr=null;break;case 3:case 5:break;default:throw Error(s(329))}if(y.finishedWork=p,y.finishedLanes=u,(u&62914560)===u&&(T=Lf+300-Ji(),10<T)){if(Si(y,u,er,!yr),Z(y,0)!==0)break t;y.timeoutHandle=Dc(ts.bind(null,y,p,xr,Dl,Wc,u,er,ta,Dn,yr,2,-0,0),T);break t}ts(y,p,xr,Dl,Wc,u,er,ta,Dn,yr,0,-0,0)}}break}while(!0);Kn(l)}function Ps(l){xr===null?xr=l:xr.push.apply(xr,l)}function ts(l,u,p,y,S,T,U,I,et,pt,St,Bt,xt){var Wt=u.subtreeFlags;if((Wt&8192||(Wt&16785408)===16785408)&&(A_(),gu(u),u=Gp(),u!==null)){l.cancelPendingCommit=u(Ac.bind(null,l,p,y,S,U,I,et,1,Bt,xt)),Si(l,T,U,!pt);return}Ac(l,p,y,S,U,I,et,St,Bt,xt)}function Gs(l){for(var u=l;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var S=p[y],T=S.getSnapshot;S=S.value;try{if(!Ti(T(),S))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Si(l,u,p,y){u&=~Ri,u&=~ta,l.suspendedLanes|=u,l.pingedLanes&=~u,y&&(l.warmLanes|=u),y=l.expirationTimes;for(var S=u;0<S;){var T=31-pn(S),U=1<<T;y[T]=-1,S&=~U}p!==0&&ct(l,p,u)}function af(){return(oe&6)===0?(ie(0),!1):!0}function xu(){if(te!==null){if(Ue===0)var l=te.return;else l=te,_r=Xa=null,Ts(l),Cl=null,ci=0,l=te;for(;l!==null;)Sp(l.alternate,l),l=l.return;te=null}}function va(l,u){l.finishedWork=null,l.finishedLanes=0;var p=l.timeoutHandle;p!==yo&&(l.timeoutHandle=yo,Du(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),xu(),Le=l,te=p=zs(l.current,null),ue=u,Ue=0,Mn=null,yr=!1,br=nt(l,u),Ml=!1,Dn=er=Ri=ta=vr=nn=0,xr=Do=null,Wc=!1,(u&8)!==0&&(u|=u&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=u;0<y;){var S=31-pn(y),T=1<<S;u|=l[S],y&=~T}return Xr=u,ve(),p}function si(l,u){jt=null,Yt.H=yn,u===Nu?(u=Et(),Ue=3):u===zu?(u=Et(),Ue=4):Ue=u===Nf?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Mn=u,te===null&&(nn=1,no(l,ft(u,l.current)))}function Yn(){var l=Xi.current;return l===null?!0:(ue&4194176)===ue?mr===null:(ue&62914560)===ue||(ue&536870912)!==0?l===mr:!1}function ge(){var l=Yt.H;return Yt.H=yn,l===null?yn:l}function hr(){var l=Yt.A;return Yt.A=$s,l}function fr(){nn=4,yr||(ue&4194176)!==ue&&Xi.current!==null||(br=!0),(vr&134217727)===0&&(ta&134217727)===0||Le===null||Si(Le,ue,er,!1)}function Su(l,u,p){var y=oe;oe|=2;var S=ge(),T=hr();(Le!==l||ue!==u)&&(Dl=null,va(l,u)),u=!1;var U=nn;t:do try{if(Ue!==0&&te!==null){var I=te,et=Mn;switch(Ue){case 8:xu(),U=6;break t;case 3:case 2:case 6:Xi.current===null&&(u=!0);var pt=Ue;if(Ue=0,Mn=null,es(l,I,et,pt),p&&br){U=0;break t}break;default:pt=Ue,Ue=0,Mn=null,es(l,I,et,pt)}}ml(),U=nn;break}catch(St){si(l,St)}while(!0);return u&&l.shellSuspendCounter++,_r=Xa=null,oe=y,Yt.H=S,Yt.A=T,te===null&&(Le=null,ue=0,ve()),U}function ml(){for(;te!==null;)co(te)}function Tp(l,u){var p=oe;oe|=2;var y=ge(),S=hr();Le!==l||ue!==u?(Dl=null,nr=Ji()+500,va(l,u)):br=nt(l,u);t:do try{if(Ue!==0&&te!==null){u=te;var T=Mn;e:switch(Ue){case 1:Ue=0,Mn=null,es(l,u,T,1);break;case 2:if(O(T)){Ue=0,Mn=null,ho(u);break}u=function(){Ue===2&&Le===l&&(Ue=7),Kn(l)},T.then(u,u);break t;case 3:Ue=7;break t;case 4:Ue=5;break t;case 7:O(T)?(Ue=0,Mn=null,ho(u)):(Ue=0,Mn=null,es(l,u,T,7));break;case 5:var U=null;switch(te.tag){case 26:U=te.memoizedState;case 5:case 27:var I=te,et=I.type,pt=I.pendingProps;if(U?Df(U):pf(et,pt)){Ue=0,Mn=null;var St=I.sibling;if(St!==null)te=St;else{var Bt=I.return;Bt!==null?(te=Bt,xa(Bt)):te=null}break e}}Ue=0,Mn=null,es(l,u,T,5);break;case 6:Ue=0,Mn=null,es(l,u,T,6);break;case 8:xu(),nn=6;break t;default:throw Error(s(462))}}Ap();break}catch(xt){si(l,xt)}while(!0);return _r=Xa=null,Yt.H=y,Yt.A=S,oe=p,te!==null?0:(Le=null,ue=0,ve(),nn)}function Ap(){for(;te!==null&&!Ga();)co(te)}function co(l){var u=bp(l.alternate,l,Xr);l.memoizedProps=l.pendingProps,u===null?xa(l):te=u}function ho(l){var u=l,p=u.alternate;switch(u.tag){case 15:case 0:u=dp(p,u,u.pendingProps,u.type,void 0,ue);break;case 11:u=dp(p,u,u.pendingProps,u.type.render,u.ref,ue);break;case 5:Ts(u);default:Sp(p,u),u=te=gl(u,Xr),u=bp(p,u,Xr)}l.memoizedProps=l.pendingProps,u===null?xa(l):te=u}function es(l,u,p,y){_r=Xa=null,Ts(u),Cl=null,ci=0;var S=u.return;try{if(y_(l,S,u,p,ue)){nn=1,no(l,ft(p,l.current)),te=null;return}}catch(T){if(S!==null)throw te=S,T;nn=1,no(l,ft(p,l.current)),te=null;return}u.flags&32768?(_e||y===1?l=!0:br||(ue&536870912)!==0?l=!1:(yr=l=!0,(y===2||y===3||y===6)&&(y=Xi.current,y!==null&&y.tag===13&&(y.flags|=16384))),lf(u,l)):xa(u)}function xa(l){var u=l;do{if((u.flags&32768)!==0){lf(u,yr);return}l=u.return;var p=xp(u.alternate,u,Xr);if(p!==null){te=p;return}if(u=u.sibling,u!==null){te=u;return}te=u=l}while(u!==null);nn===0&&(nn=5)}function lf(l,u){do{var p=v_(l.alternate,l);if(p!==null){p.flags&=32767,te=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(l=l.sibling,l!==null)){te=l;return}te=l=p}while(l!==null);nn=6,te=null}function Ac(l,u,p,y,S,T,U,I,et,pt){var St=Yt.T,Bt=Ua();try{Ei(2),Yt.T=null,Cp(l,u,p,y,Bt,S,T,U,I,et,pt)}finally{Yt.T=St,Ei(Bt)}}function Cp(l,u,p,y,S,T,U,I){do Sa();while(Ya!==null);if((oe&6)!==0)throw Error(s(327));var et=l.finishedWork;if(y=l.finishedLanes,et===null)return null;if(l.finishedWork=null,l.finishedLanes=0,et===l.current)throw Error(s(177));l.callbackNode=null,l.callbackPriority=0,l.cancelPendingCommit=null;var pt=et.lanes|et.childLanes;if(pt|=Hr,$(l,y,pt,T,U,I),l===Le&&(te=Le=null,ue=0),(et.subtreeFlags&10256)===0&&(et.flags&10256)===0||ea||(ea=!0,Qc=pt,Vu=p,Bp(So,function(){return Sa(),null})),p=(et.flags&15990)!==0,(et.subtreeFlags&15990)!==0||p?(p=Yt.T,Yt.T=null,T=Ua(),Ei(2),U=oe,oe|=4,ef(l,et),rf(et,l),T_(l.containerInfo),l.current=et,oo(l,et.alternate,et),Ys(),oe=U,Ei(T),Yt.T=p):l.current=et,ea?(ea=!1,Ya=l,wo=y):Eu(l,pt),pt=l.pendingLanes,pt===0&&(ds=null),F(et.stateNode),Kn(l),u!==null)for(S=l.onRecoverableError,et=0;et<u.length;et++)pt=u[et],S(pt.value,{componentStack:pt.stack});return(wo&3)!==0&&Sa(),pt=l.pendingLanes,(y&4194218)!==0&&(pt&42)!==0?l===Hf?wl++:(wl=0,Hf=l):wl=0,ie(0),null}function Eu(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,fu(u)))}function Sa(){if(Ya!==null){var l=Ya,u=Qc;Qc=0;var p=Tt(wo),y=32>p?32:p;p=Yt.T;var S=Ua();try{if(Ei(y),Yt.T=null,Ya===null)var T=!1;else{y=Vu,Vu=null;var U=Ya,I=wo;if(Ya=null,wo=0,(oe&6)!==0)throw Error(s(331));var et=oe;if(oe|=4,Os(U.current),cr(U,U.current,I,y),oe=et,ie(0,!1),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(Eo,U)}catch{}T=!0}return T}finally{Ei(S),Yt.T=p,Eu(l,u)}}return!1}function fo(l,u,p){u=ft(p,u),u=ro(l.stateNode,u,2),l=sn(l,u,2),l!==null&&(X(l,2),Kn(l))}function Re(l,u,p){if(l.tag===3)fo(l,l,p);else for(;u!==null;){if(u.tag===3){fo(u,l,p);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(ds===null||!ds.has(y))){l=ft(p,l),p=kh(2),y=sn(u,p,2),y!==null&&(op(p,y,u,l),X(y,2),Kn(y));break}}u=u.return}}function Ea(l,u,p){var y=l.pingCache;if(y===null){y=l.pingCache=new Fu;var S=new Set;y.set(u,S)}else S=y.get(u),S===void 0&&(S=new Set,y.set(u,S));S.has(p)||(Ml=!0,S.add(p),l=Tu.bind(null,l,u,p),u.then(l,l))}function Tu(l,u,p){var y=l.pingCache;y!==null&&y.delete(u),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,Le===l&&(ue&p)===p&&(nn===4||nn===3&&(ue&62914560)===ue&&300>Ji()-Lf?(oe&2)===0&&va(l,0):Ri|=p,Dn===ue&&(Dn=0)),Kn(l)}function Au(l,u){u===0&&(u=N()),l=In(l,u),l!==null&&(X(l,u),Kn(l))}function Cu(l){var u=l.memoizedState,p=0;u!==null&&(p=u.retryLane),Au(l,p)}function Cc(l,u){var p=0;switch(l.tag){case 13:var y=l.stateNode,S=l.memoizedState;S!==null&&(p=S.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(s(314))}y!==null&&y.delete(u),Au(l,p)}function Bp(l,u){return ls(l,u)}function Rp(l,u,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ns(l){return l=l.prototype,!(!l||!l.isReactComponent)}function zs(l,u){var p=l.alternate;return p===null?(p=e(l.tag,u,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=u,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&31457280,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,u=l.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function gl(l,u){l.flags&=31457282;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,u=p.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function _l(l,u,p,y,S,T){var U=0;if(y=l,typeof l=="function")Ns(l)&&(U=1);else if(typeof l=="string")U=Zi&&qn?Ln(l,p,mn.current)?26:Fc(l)?27:5:Zi?Ln(l,p,mn.current)?26:5:qn&&Fc(l)?27:5;else t:switch(l){case Ca:return Ta(p.children,S,T,u);case yl:U=8,S|=24;break;case Ba:return l=e(12,p,u,S|2),l.elementType=Ba,l.lanes=T,l;case Fs:return l=e(13,p,u,S),l.elementType=Fs,l.lanes=T,l;case Ru:return l=e(19,p,u,S),l.elementType=Ru,l.lanes=T,l;case ks:return Bc(p,S,T,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case S_:case Ra:U=10;break t;case cf:U=9;break t;case Rc:U=11;break t;case mo:U=14;break t;case Vs:U=16,y=null;break t}U=29,p=Error(s(130,l===null?"null":typeof l,"")),y=null}return u=e(U,p,u,S),u.elementType=l,u.type=y,u.lanes=T,u}function Ta(l,u,p,y){return l=e(7,l,y,u),l.lanes=p,l}function Bc(l,u,p,y){l=e(22,l,y,u),l.elementType=ks,l.lanes=p;var S={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var T=S._current;if(T===null)throw Error(s(456));if((S._pendingVisibility&2)===0){var U=In(T,2);U!==null&&(S._pendingVisibility|=2,Ie(U,T,2))}},attach:function(){var T=S._current;if(T===null)throw Error(s(456));if((S._pendingVisibility&2)!==0){var U=In(T,2);U!==null&&(S._pendingVisibility&=-3,Ie(U,T,2))}}};return l.stateNode=S,l}function Bu(l,u,p){return l=e(6,l,null,u),l.lanes=p,l}function Hi(l,u,p){return u=e(4,l.children!==null?l.children:[],l.key,u),u.lanes=p,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function ns(l,u,p,y,S,T,U,I){this.tag=1,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=yo,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Y(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Y(0),this.hiddenUpdates=Y(null),this.identifierPrefix=y,this.onUncaughtError=S,this.onCaughtError=T,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function Ls(l,u,p,y,S,T,U,I,et,pt,St,Bt){return l=new ns(l,u,p,U,I,et,pt,Bt),u=1,T===!0&&(u|=24),T=e(3,null,null,u),l.current=T,T.stateNode=l,u=ma(),u.refCount++,l.pooledCache=u,u.refCount++,T.memoizedState={element:y,isDehydrated:p,cache:u},aa(T),l}function of(l){return l?(l=Tl,l):Tl}function Hs(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return l=A(u),l=l!==null?R(l):null,l===null?null:bl(l.stateNode)}function is(l,u,p,y,S,T){S=of(S),y.context===null?y.context=S:y.pendingContext=S,y=yi(u),y.payload={element:p},T=T===void 0?null:T,T!==null&&(y.callback=T),p=sn(l,y,u),p!==null&&(Ie(p,l,u),la(p,l,u))}function An(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<u?p:u}}function po(l,u){An(l,u),(l=l.alternate)&&An(l,u)}var le={},x_=lb,Qi=sO(),fn=Object.assign,uf=Symbol.for("react.element"),Aa=Symbol.for("react.transitional.element"),rs=Symbol.for("react.portal"),Ca=Symbol.for("react.fragment"),yl=Symbol.for("react.strict_mode"),Ba=Symbol.for("react.profiler"),S_=Symbol.for("react.provider"),cf=Symbol.for("react.consumer"),Ra=Symbol.for("react.context"),Rc=Symbol.for("react.forward_ref"),Fs=Symbol.for("react.suspense"),Ru=Symbol.for("react.suspense_list"),mo=Symbol.for("react.memo"),Vs=Symbol.for("react.lazy"),ks=Symbol.for("react.offscreen"),$t=Symbol.for("react.memo_cache_sentinel"),we=Symbol.iterator,Cn=Symbol.for("react.client.reference"),Yt=x_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ma,Da,go=!1,wa=Array.isArray,_o=t.rendererVersion,E_=t.rendererPackageName,un=t.extraDevToolsConfig,bl=t.getPublicInstance,hf=t.getRootHostContext,Mp=t.getChildHostContext,Dp=t.prepareForCommit,T_=t.resetAfterCommit,ff=t.createInstance,Mu=t.appendInitialChild,Mc=t.finalizeInitialChildren,$n=t.shouldSetTextContent,dn=t.createTextInstance,Dc=t.scheduleTimeout,Du=t.cancelTimeout,yo=t.noTimeout,Pr=t.isPrimaryRenderer;t.warnsIfNotActing;var tn=t.supportsMutation,Gr=t.supportsPersistence,Fi=t.supportsHydration,wc=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var wp=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Ei=t.setCurrentUpdatePriority,Ua=t.getCurrentUpdatePriority,Up=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var Op=t.shouldAttemptEagerTransition,Pp=t.detachDeletedInstance;t.requestPostPaintCallback;var df=t.maySuspendCommit,pf=t.preloadInstance,A_=t.startSuspendingCommit,mf=t.suspendInstance,Gp=t.waitForCommitToBeReady,vl=t.NotPendingTransition,Xs=t.HostTransitionContext,Np=t.resetFormInstance;t.bindToConsole;var zp=t.supportsMicrotasks,Lp=t.scheduleMicrotask,bo=t.supportsTestSelectors,Hp=t.findFiberRoot,C_=t.getBoundingRect,Fp=t.getTextContent,ss=t.isHiddenSubtree,Vp=t.matchAccessibilityRole,Uc=t.setFocusIfFocusable,Oc=t.setupIntersectionObserver,kp=t.appendChild,gf=t.appendChildToContainer,Xp=t.commitTextUpdate,Ip=t.commitMount,Yp=t.commitUpdate,qp=t.insertBefore,_f=t.insertInContainerBefore,jp=t.removeChild,Kp=t.removeChildFromContainer,Pc=t.resetTextContent,Wp=t.hideInstance,Qp=t.hideTextInstance,B_=t.unhideInstance,yf=t.unhideTextInstance,Zp=t.clearContainer,Jp=t.cloneInstance,Gc=t.createContainerChildSet,bf=t.appendChildToContainerChildSet,$p=t.finalizeContainerChildren,tm=t.replaceContainerChildren,em=t.cloneHiddenInstance,vf=t.cloneHiddenTextInstance,xl=t.isSuspenseInstancePending,wu=t.isSuspenseInstanceFallback,Nc=t.getSuspenseInstanceFallbackErrorDetails,nm=t.registerSuspenseInstanceRetry,im=t.canHydrateFormStateMarker,as=t.isFormStateMarkerMatching,Oa=t.getNextHydratableSibling,Is=t.getFirstHydratableChild,Sl=t.getFirstHydratableChildWithinContainer,xf=t.getFirstHydratableChildWithinSuspenseInstance,Sf=t.canHydrateInstance,rm=t.canHydrateTextInstance,sm=t.canHydrateSuspenseInstance,El=t.hydrateInstance,zc=t.hydrateTextInstance,am=t.hydrateSuspenseInstance,lm=t.getNextHydratableInstanceAfterSuspenseInstance,om=t.commitHydratedContainer,Lc=t.commitHydratedSuspenseInstance,um=t.clearSuspenseBoundary,Ef=t.clearSuspenseBoundaryFromContainer,Tf=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var cm=t.validateHydratableInstance,R_=t.validateHydratableTextInstance,Zi=t.supportsResources,Ln=t.isHostHoistableType,Hn=t.getHoistableRoot,Af=t.getResource,Cf=t.acquireResource,Bf=t.releaseResource,hm=t.hydrateHoistable,Rf=t.mountHoistable,vo=t.unmountHoistable,Mf=t.createHoistableInstance,fm=t.prepareToCommitHoistables,dm=t.mayResourceSuspendCommit,Df=t.preloadResource,wf=t.suspendResource,qn=t.supportsSingletons,Hc=t.resolveSingletonInstance,pm=t.clearSingleton,Uf=t.acquireSingletonInstance,Of=t.releaseSingletonInstance,Fc=t.isHostSingletonType,Vc=[],Pa=-1,Tl={},pn=Math.clz32?Math.clz32:H,Pf=Math.log,M_=Math.LN2,Uu=128,xo=4194304,ls=Qi.unstable_scheduleCallback,Nr=Qi.unstable_cancelCallback,Ga=Qi.unstable_shouldYield,Ys=Qi.unstable_requestPaint,Ji=Qi.unstable_now,kc=Qi.unstable_ImmediatePriority,Ou=Qi.unstable_UserBlockingPriority,So=Qi.unstable_NormalPriority,Al=Qi.unstable_IdlePriority,ai=Qi.log,Xc=Qi.unstable_setDisableYieldValue,Eo=null,Bn=null,Ti=typeof Object.is=="function"?Object.is:ut,Ic=new WeakMap,$i=[],tr=0,Na=null,To=0,Vi=[],li=0,zr=null,os=1,us="",mn=B(null),dr=B(null),qs=B(null),Pu=B(null),gn=null,Ne=null,_e=!1,pr=null,Lr=!1,Gu=Error(s(519)),ki=[],js=0,Hr=0,je=null,za=null,Yc=!1,_n=!1,qc=!1,Ao=0,Co=null,jc=0,Ke=0,jn=null,oi=!1,Kc=!1,mm=Object.prototype.hasOwnProperty,Nu=Error(s(460)),zu=Error(s(474)),Ai={then:function(){}},ui=null,Cl=null,ci=0,La=bi(!0),cs=bi(!1),Fr=B(null),Vr=B(0),Xi=B(null),mr=null,Ye=B(0),Ks=0,jt=null,Se=null,en=null,Ws=!1,Bl=!1,Ha=!1,Fa=0,Bo=0,Qs=null,gm=0,Gf=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},yn={readContext:Zn,use:hn,useCallback:ae,useContext:ae,useEffect:ae,useImperativeHandle:ae,useLayoutEffect:ae,useInsertionEffect:ae,useMemo:ae,useReducer:ae,useRef:ae,useState:ae,useDebugValue:ae,useDeferredValue:ae,useTransition:ae,useSyncExternalStore:ae,useId:ae};yn.useCacheRefresh=ae,yn.useMemoCache=ae,yn.useHostTransitionStatus=ae,yn.useFormState=ae,yn.useActionState=ae,yn.useOptimistic=ae;var Zs={readContext:Zn,use:hn,useCallback:function(l,u){return zn().memoizedState=[l,u===void 0?null:u],l},useContext:Zn,useEffect:Lh,useImperativeHandle:function(l,u,p){p=p!=null?p.concat([l]):null,lc(4194308,4,nu.bind(null,u,l),p)},useLayoutEffect:function(l,u){return lc(4194308,4,l,u)},useInsertionEffect:function(l,u){lc(4,2,l,u)},useMemo:function(l,u){var p=zn();u=u===void 0?null:u;var y=l();if(Ha){K(!0);try{l()}finally{K(!1)}}return p.memoizedState=[y,u],y},useReducer:function(l,u,p){var y=zn();if(p!==void 0){var S=p(u);if(Ha){K(!0);try{p(u)}finally{K(!1)}}}else S=u;return y.memoizedState=y.baseState=S,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:S},y.queue=l,l=l.dispatch=hc.bind(null,jt,l),[y.memoizedState,l]},useRef:function(l){var u=zn();return l={current:l},u.memoizedState=l},useState:function(l){l=Ur(l);var u=l.queue,p=Vh.bind(null,jt,u);return u.dispatch=p,[l.memoizedState,p]},useDebugValue:iu,useDeferredValue:function(l,u){var p=zn();return uc(p,l,u)},useTransition:function(){var l=Ur(!1);return l=Hh.bind(null,jt,l.queue,!0,!1),zn().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,p){var y=jt,S=zn();if(_e){if(p===void 0)throw Error(s(407));p=p()}else{if(p=u(),Le===null)throw Error(s(349));(ue&60)!==0||Oh(y,u,p)}S.memoizedState=p;var T={value:p,getSnapshot:u};return S.queue=T,Lh(ep.bind(null,y,T,l),[l]),y.flags|=2048,sl(9,Ph.bind(null,y,T,p,u),{destroy:void 0},null),p},useId:function(){var l=zn(),u=Le.identifierPrefix;if(_e){var p=us,y=os;p=(y&~(1<<32-pn(y)-1)).toString(32)+p,u=":"+u+"R"+p,p=Fa++,0<p&&(u+="H"+p.toString(32)),u+=":"}else p=gm++,u=":"+u+"r"+p.toString(32)+":";return l.memoizedState=u},useCacheRefresh:function(){return zn().memoizedState=Fh.bind(null,jt)}};Zs.useMemoCache=rc,Zs.useHostTransitionStatus=ru,Zs.useFormState=sc,Zs.useActionState=sc,Zs.useOptimistic=function(l){var u=zn();u.memoizedState=u.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=$l.bind(null,jt,!0,p),p.dispatch=u,[l,u]};var Ci={readContext:Zn,use:hn,useCallback:ll,useContext:Zn,useEffect:eu,useImperativeHandle:oc,useInsertionEffect:sp,useLayoutEffect:ap,useMemo:ol,useReducer:Jr,useRef:al,useState:function(){return Jr(Zr)},useDebugValue:iu,useDeferredValue:function(l,u){var p=Je();return cc(p,Se.memoizedState,l,u)},useTransition:function(){var l=Jr(Zr)[0],u=Je().memoizedState;return[typeof l=="boolean"?l:Qr(l),u]},useSyncExternalStore:tp,useId:Jl};Ci.useCacheRefresh=As,Ci.useMemoCache=rc,Ci.useHostTransitionStatus=ru,Ci.useFormState=Nh,Ci.useActionState=Nh,Ci.useOptimistic=function(l,u){var p=Je();return ji(p,Se,l,u)};var Va={readContext:Zn,use:hn,useCallback:ll,useContext:Zn,useEffect:eu,useImperativeHandle:oc,useInsertionEffect:sp,useLayoutEffect:ap,useMemo:ol,useReducer:wr,useRef:al,useState:function(){return wr(Zr)},useDebugValue:iu,useDeferredValue:function(l,u){var p=Je();return Se===null?uc(p,l,u):cc(p,Se.memoizedState,l,u)},useTransition:function(){var l=wr(Zr)[0],u=Je().memoizedState;return[typeof l=="boolean"?l:Qr(l),u]},useSyncExternalStore:tp,useId:Jl};Va.useCacheRefresh=As,Va.useMemoCache=rc,Va.useHostTransitionStatus=ru,Va.useFormState=zh,Va.useActionState=zh,Va.useOptimistic=function(l,u){var p=Je();return Se!==null?ji(p,Se,l,u):(p.baseState=l,[l,p.queue.dispatch])};var Ro={isMounted:function(l){return(l=l._reactInternals)?x(l)===l:!1},enqueueSetState:function(l,u,p){l=l._reactInternals;var y=ri(),S=yi(y);S.payload=u,p!=null&&(S.callback=p),u=sn(l,S,y),u!==null&&(Ie(u,l,y),la(u,l,y))},enqueueReplaceState:function(l,u,p){l=l._reactInternals;var y=ri(),S=yi(y);S.tag=1,S.payload=u,p!=null&&(S.callback=p),u=sn(l,S,y),u!==null&&(Ie(u,l,y),la(u,l,y))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var p=ri(),y=yi(p);y.tag=2,u!=null&&(y.callback=u),u=sn(l,y,p),u!==null&&(Ie(u,l,p),la(u,l,p))}},ka=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Nf=Error(s(461)),Rn=!1,Lu={dehydrated:null,treeContext:null,retryLane:0},gr=B(null),Xa=null,_r=null,Hu=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(p,y){l.push(y)}};this.abort=function(){u.aborted=!0,l.forEach(function(p){return p()})}},an=Qi.unstable_scheduleCallback,D_=Qi.unstable_NormalPriority,cn={$$typeof:Ra,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},zf=Yt.S;Yt.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&nl(l,u),zf!==null&&zf(l,u)};var Rl=B(null),Js=!1,Kt=!1,ze=!1,re=typeof WeakSet=="function"?WeakSet:Set,kt=null,Ve=!1,Ee=null,bn=!1,hi=null,Ia=8192,$s={getCacheForType:function(l){var u=Zn(cn),p=u.data.get(l);return p===void 0&&(p=l(),u.data.set(l,p)),p}},We=0,kr=1,hs=2,Mo=3,Bi=4;if(typeof Symbol=="function"&&Symbol.for){var fs=Symbol.for;We=fs("selector.component"),kr=fs("selector.has_pseudo_class"),hs=fs("selector.role"),Mo=fs("selector.test_id"),Bi=fs("selector.text")}var Fu=typeof WeakMap=="function"?WeakMap:Map,oe=0,Le=null,te=null,ue=0,Ue=0,Mn=null,yr=!1,br=!1,Ml=!1,Xr=0,nn=0,vr=0,ta=0,Ri=0,er=0,Dn=0,Do=null,xr=null,Wc=!1,Lf=0,nr=1/0,Dl=null,ds=null,ea=!1,Ya=null,wo=0,Qc=0,Vu=null,wl=0,Hf=null;return le.attemptContinuousHydration=function(l){if(l.tag===13){var u=In(l,67108864);u!==null&&Ie(u,l,67108864),po(l,67108864)}},le.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var u=ri(),p=In(l,u);p!==null&&Ie(p,l,u),po(l,u)}},le.attemptSynchronousHydration=function(l){switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var u=j(l.pendingLanes);if(u!==0){for(l.pendingLanes|=2,l.entangledLanes|=2;u;){var p=1<<31-pn(u);l.entanglements[1]|=p,u&=~p}Kn(l),(oe&6)===0&&(nr=Ji()+500,ie(0))}}break;case 13:u=In(l,2),u!==null&&Ie(u,l,2),af(),po(l,2)}},le.batchedUpdates=function(l,u){return l(u)},le.createComponentSelector=function(l){return{$$typeof:We,value:l}},le.createContainer=function(l,u,p,y,S,T,U,I,et,pt){return Ls(l,u,!1,null,p,y,T,U,I,et,pt,null)},le.createHasPseudoClassSelector=function(l){return{$$typeof:kr,value:l}},le.createHydrationContainer=function(l,u,p,y,S,T,U,I,et,pt,St,Bt,xt){return l=Ls(p,y,!0,l,S,T,I,et,pt,St,Bt,xt),l.context=of(null),p=l.current,y=ri(),S=yi(y),S.callback=u??null,sn(p,S,y),l.current.lanes=y,X(l,y),Kn(l),l},le.createPortal=function(l,u,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rs,key:y==null?null:""+y,children:l,containerInfo:u,implementation:p}},le.createRoleSelector=function(l){return{$$typeof:hs,value:l}},le.createTestNameSelector=function(l){return{$$typeof:Mo,value:l}},le.createTextSelector=function(l){return{$$typeof:Bi,value:l}},le.defaultOnCaughtError=function(l){console.error(l)},le.defaultOnRecoverableError=function(l){ka(l)},le.defaultOnUncaughtError=function(l){ka(l)},le.deferredUpdates=function(l){var u=Yt.T,p=Ua();try{return Ei(32),Yt.T=null,l()}finally{Ei(p),Yt.T=u}},le.discreteUpdates=function(l,u,p,y,S){var T=Yt.T,U=Ua();try{return Ei(2),Yt.T=null,l(u,p,y,S)}finally{Ei(U),Yt.T=T,oe===0&&(nr=Ji()+500)}},le.findAllNodes=ba,le.findBoundingRects=function(l,u){if(!bo)throw Error(s(363));u=ba(l,u),l=[];for(var p=0;p<u.length;p++)l.push(C_(u[p]));for(u=l.length-1;0<u;u--){p=l[u];for(var y=p.x,S=y+p.width,T=p.y,U=T+p.height,I=u-1;0<=I;I--)if(u!==I){var et=l[I],pt=et.x,St=pt+et.width,Bt=et.y,xt=Bt+et.height;if(y>=pt&&T>=Bt&&S<=St&&U<=xt){l.splice(u,1);break}else if(y!==pt||p.width!==et.width||xt<T||Bt>U){if(!(T!==Bt||p.height!==et.height||St<y||pt>S)){pt>y&&(et.width+=pt-y,et.x=y),St<S&&(et.width=S-pt),l.splice(u,1);break}}else{Bt>T&&(et.height+=Bt-T,et.y=T),xt<U&&(et.height=U-Bt),l.splice(u,1);break}}}return l},le.findHostInstance=Hs,le.findHostInstanceWithNoPortals=function(l){return l=A(l),l=l!==null?D(l):null,l===null?null:bl(l.stateNode)},le.findHostInstanceWithWarning=function(l){return Hs(l)},le.flushPassiveEffects=Sa,le.flushSyncFromReconciler=function(l){var u=oe;oe|=1;var p=Yt.T,y=Ua();try{if(Ei(2),Yt.T=null,l)return l()}finally{Ei(y),Yt.T=p,oe=u,(oe&6)===0&&ie(0)}},le.flushSyncWork=af,le.focusWithin=function(l,u){if(!bo)throw Error(s(363));for(l=ya(l),u=pl(l,u),u=Array.from(u),l=0;l<u.length;){var p=u[l++],y=p.tag;if(!ss(p)){if((y===5||y===26||y===27)&&Uc(p.stateNode))return!0;for(p=p.child;p!==null;)u.push(p),p=p.sibling}}return!1},le.getFindAllNodesFailureDescription=function(l,u){if(!bo)throw Error(s(363));var p=0,y=[];l=[ya(l),0];for(var S=0;S<l.length;){var T=l[S++],U=T.tag,I=l[S++],et=u[I];if((U!==5&&U!==26&&U!==27||!ss(T))&&(Tc(T,et)&&(y.push(Li(et)),I++,I>p&&(p=I)),I<u.length))for(T=T.child;T!==null;)l.push(T,I),T=T.sibling}if(p<u.length){for(l=[];p<u.length;p++)l.push(Li(u[p]));return`findAllNodes was able to match part of the selector:
  `+(y.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},le.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 27:case 5:return bl(l.child.stateNode);default:return l.child.stateNode}},le.injectIntoDevTools=function(){var l={bundleType:0,version:_o,rendererPackageName:E_,currentDispatcherRef:Yt,findFiberByHostInstance:wc,reconcilerVersion:"19.0.0"};if(un!==null&&(l.rendererConfig=un),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{Eo=u.inject(l),Bn=u}catch{}l=!!u.checkDCE}}return l},le.isAlreadyRendering=function(){return!1},le.observeVisibleRects=function(l,u,p,y){if(!bo)throw Error(s(363));l=ba(l,u);var S=Oc(l,p,y).disconnect;return{disconnect:function(){S()}}},le.shouldError=function(){return null},le.shouldSuspend=function(){return!1},le.startHostTransition=function(l,u,p,y){if(l.tag!==5)throw Error(s(476));var S=Zl(l).queue;Hh(l,S,u,vl,p===null?i:function(){var T=Zl(l).next.queue;return ha(l,T,{},ri()),p(y)})},le.updateContainer=function(l,u,p,y){var S=u.current,T=ri();return is(S,T,l,u,p,y),T},le.updateContainerSync=function(l,u,p,y){return u.tag===0&&Sa(),is(u.current,2,l,u,p,y),2},le},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})}(Y0)),Y0.exports}LR.exports=aO();var lO=LR.exports,oO=PU(lO);const uO=oO;function cO(n,t,e,i){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")}function hO(){}function fO(){return!1}const HR={};function dO(n){return n??HR}function pO(){return Io.currentUpdatePriority}function mO(){return null}function gO(n){throw new Error("Not yet implemented.")}function _O(n){return n}function yO(){return HR}function bO(n){n instanceof kn?n.visible=!1:n instanceof qi&&(n.enabled=!1)}function vO(n){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")}function FR(n){if(n instanceof qi){const t=n.__pixireact.parent;if(t){const e=t.__pixireact.filters.indexOf(n);t.__pixireact.filters.splice(e,1),t.filters=t.__pixireact.filters}n.__pixireact.parent=null}}function b2(n,t,...e){}function uS(n,t,e){if(b2(),t instanceof kn){const i=t,s=t,o=e;i.parent===n&&n.removeChild(s);const h=n.getChildIndex(o);n.addChildAt(s,h)}else if(t instanceof qi){const o=t.__pixireact.filters.indexOf(e);FR(t),UR(n,t,o)}}function xO(){return!1}function SO(){return!0}function EO(){return null}function TO(){}function AO(){}function cS(n,t){t instanceof qi&&FR(t),t.destroy()}function CO(n){}function BO(){}function RO(){}function MO(){return-1.1}function DO(){return null}function wO(){var e;if(Io.currentUpdatePriority)return Io.currentUpdatePriority;const n=typeof self<"u"&&self||typeof window<"u"&&window;if(!n)return uh.DefaultEventPriority;switch((e=n.event)==null?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return uh.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return uh.ContinuousEventPriority;default:return uh.DefaultEventPriority}}function UO(n){Io.currentUpdatePriority=n}function OO(){return!1}function PO(){return!1}function GO(){}function NO(){}function zO(){}function LO(n){n instanceof kn?n.visible=!0:n instanceof qi&&(n.enabled=!0)}function HO(n){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")}function FO(){return null}const VO={isPrimaryRenderer:!1,noTimeout:-1,NotPendingTransition:null,supportsHydration:!1,supportsMutation:!0,supportsPersistence:!1,warnsIfNotActing:!1,afterActiveInstanceBlur:HU,appendChild:I0,appendChildToContainer:I0,appendInitialChild:I0,beforeActiveInstanceBlur:FU,cancelTimeout:clearTimeout,clearContainer:VU,commitUpdate:JU,createInstance:iO,createTextInstance:cO,hideTextInstance:vO,unhideTextInstance:HO,detachDeletedInstance:hO,finalizeInitialChildren:fO,getChildHostContext:dO,getCurrentUpdatePriority:pO,getInstanceFromNode:mO,getInstanceFromScope:gO,getPublicInstance:_O,getRootHostContext:yO,hideInstance:bO,insertBefore:uS,insertInContainerBefore:uS,maySuspendCommit:xO,preloadInstance:SO,prepareForCommit:EO,preparePortalMount:TO,prepareScopeUpdate:AO,removeChild:cS,removeChildFromContainer:cS,requestPostPaintCallback:CO,resetAfterCommit:BO,resetFormInstance:RO,resolveEventTimeStamp:MO,resolveEventType:DO,resolveUpdatePriority:wO,scheduleTimeout:setTimeout,shouldAttemptEagerTransition:OO,setCurrentUpdatePriority:UO,shouldSetTextContent:PO,startSuspendingCommit:GO,suspendInstance:NO,trackSchedulerEvent:zO,unhideInstance:LO,waitForCommitToBeReady:FO},Rg=uO(VO);Rg.injectIntoDevTools({bundleType:0,rendererPackageName:"@pixi/react",version:LU.version});const Ah=new Map;function kO(n,t={}){let e=Ah.get(n),i=(e==null?void 0:e.applicationState)??{isInitialised:!1,isInitialising:!1};const s=(e==null?void 0:e.internalState)??{};e||(i.app=new Ig,s.rootContainer=wR(i.app.stage));const o=(e==null?void 0:e.fiber)??Rg.createContainer(s.rootContainer,uh.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null);if(!e){let h;n instanceof HTMLCanvasElement&&(h=n),h||(h=document.createElement("canvas"),n.innerHTML="",n.appendChild(h)),s.canvas=h,e={applicationState:i,fiber:o,internalState:s,render:async(m,g)=>{var b;return!i.app.renderer&&!i.isInitialised&&!i.isInitialising&&(i.isInitialising=!0,await i.app.init({...g,canvas:h}),i.isInitialising=!1,i.isInitialised=!0,i={...i},(b=t.onInit)==null||b.call(t,i.app)),Object.entries(g).forEach(([x,E])=>{const A=x;DR(g,A)||(i.app[A]=E)}),Rg.updateContainer(Nt.jsx(NU,{value:i,children:m}),o,null,()=>{}),i.app}},Ah.set(h,e)}return e}function VR(n){Io.unmountQueue.delete(n);const t=n.fiber;t&&Rg.updateContainer(null,t,null,()=>{n.applicationState.app&&n.applicationState.app.destroy(),Ah.delete(n.internalState.canvas)})}function XO(){for(const n of Io.unmountQueue)VR(n)}function IO(n){const t=Ah.get(n);t&&(t.applicationState.isInitialised?VR(t):Io.unmountQueue.add(t))}function YO(n){const t=Ah.get(n);t&&Io.unmountQueue.delete(t)}var vS,xS;const dd=typeof window<"u"&&((vS=window.document)!=null&&vS.createElement||((xS=window.navigator)==null?void 0:xS.product)==="ReactNative")?zt.useLayoutEffect:zt.useEffect,qO={...Rr.defaultTextStyle},jO=zt.forwardRef(function(t,e){const{children:i,className:s,defaultTextStyle:o,extensions:h,onInit:f,resizeTo:m,...g}=t,b=mD(),x=zt.useRef(null),E=zt.useRef(null),A=zt.useRef(new Set);zt.useImperativeHandle(e,()=>({getApplication(){return x.current},getCanvas(){return E.current}}));const R=zt.useCallback(()=>{const B=x.current;B&&(m?"current"in m?m.current instanceof HTMLElement&&(B.resizeTo=m.current):B.resizeTo=m:B.resizeTo=void 0)},[m]),D=zt.useCallback(B=>{XO(),x.current=B,R(),f==null||f(B)},[f]);return dd(()=>{if(h){const B=[...h],P=A.current;for(const G of P.values()){const H=B.indexOf(G);H===-1&&(De.remove(G),P.delete(G)),B.splice(H,1)}for(const G in B)De.add(G),P.add(G)}},[h]),dd(()=>{const B=E.current;if(B){let P=Ah.get(B);P||(P=kO(B,{onInit:D})),P.render(Nt.jsx(b,{children:i}),g)}},[g,i,D,m]),dd(()=>{R()},[m]),dd(()=>{o?Object.assign(Rr.defaultTextStyle,o):Object.assign(Rr.defaultTextStyle,qO)},[o]),zt.useEffect(()=>{const B=E.current;if(B)return YO(B),()=>{IO(B)}},[]),Nt.jsx("canvas",{ref:E,className:s})}),KO=zt.forwardRef(function(t,e){return Nt.jsx(TS,{children:Nt.jsx(jO,{ref:e,...t})})});function WO(n){Object.assign($y,n)}function Qd(){const n=zt.useContext(y2);return b2(n.app instanceof Ig,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider"),n}function m_(n){const{app:t,isInitialised:e}=Qd();let i,s,o=!0,h;typeof n=="function"?i=n:(i=n.callback,s=n.context,o=n.isEnabled??!0,h=n.priority),b2(),dd(()=>{if(e){const f=t==null?void 0:t.ticker,m=o,g=s,b=i;return o&&f&&f.add(i,s,h),()=>{m&&(f==null||f.remove(b,g))}}},[i,s,e,h])}const QO=()=>{const[n,t]=zt.useState({left:!1,right:!1,touchX:0,up:!1,down:!1,touchY:0});return zt.useEffect(()=>{const e=o=>{(o.key==="ArrowLeft"||o.key.toLowerCase()==="a")&&t(h=>({...h,left:!0})),(o.key==="ArrowRight"||o.key.toLowerCase()==="d")&&t(h=>({...h,right:!0})),(o.key==="ArrowUp"||o.key.toLowerCase()==="w")&&t(h=>({...h,up:!0})),(o.key==="ArrowDown"||o.key.toLowerCase()==="s")&&t(h=>({...h,down:!0}))},i=o=>{(o.key==="ArrowLeft"||o.key.toLowerCase()==="a")&&t(h=>({...h,left:!1})),(o.key==="ArrowRight"||o.key.toLowerCase()==="d")&&t(h=>({...h,right:!1})),(o.key==="ArrowUp"||o.key.toLowerCase()==="w")&&t(h=>({...h,up:!1})),(o.key==="ArrowDown"||o.key.toLowerCase()==="s")&&t(h=>({...h,down:!1}))},s=o=>{t(h=>({...h,touchX:o.touches[0].clientX})),t(h=>({...h,touchY:o.touches[0].clientY}))};return window.addEventListener("keydown",e),window.addEventListener("keyup",i),window.addEventListener("touchmove",s),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",i),window.removeEventListener("touchmove",s)}},[]),n},ra=10,pd={},hS=(n,t)=>n.unstable_is?n.unstable_is(t):t===n,fS=n=>"init"in n,K0=n=>!!n.write,dS=n=>"v"in n||"e"in n,ig=n=>{if("e"in n)throw n.e;if((pd?"production":void 0)!=="production"&&!("v"in n))throw new Error("[Bug] atom state is not initialized");return n.v},Mg=new WeakMap,pS=n=>{var t;return Dg(n)&&!!((t=Mg.get(n))!=null&&t[0])},ZO=n=>{const t=Mg.get(n);t!=null&&t[0]&&(t[0]=!1,t[1].forEach(e=>e()))},kR=(n,t)=>{let e=Mg.get(n);if(!e){e=[!0,new Set],Mg.set(n,e);const i=()=>{e[0]=!1};n.then(i,i)}e[1].add(t)},Dg=n=>typeof(n==null?void 0:n.then)=="function",XR=(n,t,e)=>{e.p.has(n)||(e.p.add(n),t.then(()=>{e.p.delete(n)},()=>{e.p.delete(n)}))},W0=(n,t,e)=>{const i=e(n),s="v"in i,o=i.v;if(Dg(t))for(const h of i.d.keys())XR(n,t,e(h));i.v=t,delete i.e,(!s||!Object.is(o,i.v))&&(++i.n,Dg(o)&&ZO(o))},mS=(n,t,e)=>{var i;const s=new Set;for(const o of((i=e.get(n))==null?void 0:i.t)||[])e.has(o)&&s.add(o);for(const o of t.p)s.add(o);return s},JO=()=>{const n=new Set,t=()=>{n.forEach(e=>e())};return t.add=e=>(n.add(e),()=>{n.delete(e)}),t},Q0=()=>{const n={},t=new WeakMap,e=i=>{var s,o;(s=t.get(n))==null||s.forEach(h=>h(i)),(o=t.get(i))==null||o.forEach(h=>h())};return e.add=(i,s)=>{const o=i||n,h=(t.has(o)?t:t.set(o,new Set)).get(o);return h.add(s),()=>{h==null||h.delete(s),h.size||t.delete(o)}},e},$O=n=>(n.c||(n.c=Q0()),n.m||(n.m=Q0()),n.u||(n.u=Q0()),n.f||(n.f=JO()),n),t6=Symbol(),e6=(n=new WeakMap,t=new WeakMap,e=new WeakMap,i=new Set,s=new Set,o=new Set,h={},f=(E,...A)=>E.read(...A),m=(E,...A)=>E.write(...A),g=(E,A)=>{var R;return(R=E.unstable_onInit)==null?void 0:R.call(E,A)},b=(E,A)=>{var R;return(R=E.onMount)==null?void 0:R.call(E,A)},...x)=>{const E=x[0]||(V=>{if((pd?"production":void 0)!=="production"&&!V)throw new Error("Atom is undefined or null");let ht=n.get(V);return ht||(ht={d:new Map,p:new Set,n:0},n.set(V,ht),g==null||g(V,nt)),ht}),A=x[1]||(()=>{const V=[],ht=N=>{try{N()}catch(Y){V.push(Y)}};do{h.f&&ht(h.f);const N=new Set,Y=N.add.bind(N);i.forEach(X=>{var $;return($=t.get(X))==null?void 0:$.l.forEach(Y)}),i.clear(),o.forEach(Y),o.clear(),s.forEach(Y),s.clear(),N.forEach(ht),i.size&&R()}while(i.size||o.size||s.size);if(V.length)throw new AggregateError(V)}),R=x[2]||(()=>{const V=[],ht=new WeakSet,N=new WeakSet,Y=Array.from(i);for(;Y.length;){const X=Y[Y.length-1],$=E(X);if(N.has(X)){Y.pop();continue}if(ht.has(X)){if(e.get(X)===$.n)V.push([X,$]);else if((pd?"production":void 0)!=="production"&&e.has(X))throw new Error("[Bug] invalidated atom exists");N.add(X),Y.pop();continue}ht.add(X);for(const ct of mS(X,$,t))ht.has(ct)||Y.push(ct)}for(let X=V.length-1;X>=0;--X){const[$,ct]=V[X];let bt=!1;for(const Tt of ct.d.keys())if(Tt!==$&&i.has(Tt)){bt=!0;break}bt&&(D($),G($)),e.delete($)}}),D=x[3]||(V=>{var ht;const N=E(V);if(dS(N)&&(t.has(V)&&e.get(V)!==N.n||Array.from(N.d).every(([K,ut])=>D(K).n===ut)))return N;N.d.clear();let Y=!0;const X=()=>{t.has(V)&&(G(V),R(),A())},$=K=>{var ut;if(hS(V,K)){const z=E(K);if(!dS(z))if(fS(K))W0(K,K.init,E);else throw new Error("no atom init");return ig(z)}const ft=D(K);try{return ig(ft)}finally{N.d.set(K,ft.n),pS(N.v)&&XR(V,N.v,ft),(ut=t.get(K))==null||ut.t.add(V),Y||X()}};let ct,bt;const Tt={get signal(){return ct||(ct=new AbortController),ct.signal},get setSelf(){return(pd?"production":void 0)!=="production"&&!K0(V)&&console.warn("setSelf function cannot be used with read-only atom"),!bt&&K0(V)&&(bt=(...K)=>{if((pd?"production":void 0)!=="production"&&Y&&console.warn("setSelf function cannot be called in sync"),!Y)try{return P(V,...K)}finally{R(),A()}}),bt}},F=N.n;try{const K=f(V,$,Tt);return W0(V,K,E),Dg(K)&&(kR(K,()=>ct==null?void 0:ct.abort()),K.then(X,X)),N}catch(K){return delete N.v,N.e=K,++N.n,N}finally{Y=!1,F!==N.n&&e.get(V)===F&&(e.set(V,N.n),i.add(V),(ht=h.c)==null||ht.call(h,V))}}),B=x[4]||(V=>{const ht=[V];for(;ht.length;){const N=ht.pop(),Y=E(N);for(const X of mS(N,Y,t)){const $=E(X);e.set(X,$.n),ht.push(X)}}}),P=x[5]||((V,...ht)=>{let N=!0;const Y=$=>ig(D($)),X=($,...ct)=>{var bt;const Tt=E($);try{if(hS(V,$)){if(!fS($))throw new Error("atom not writable");const F=Tt.n,K=ct[0];W0($,K,E),G($),F!==Tt.n&&(i.add($),(bt=h.c)==null||bt.call(h,$),B($));return}else return P($,...ct)}finally{N||(R(),A())}};try{return m(V,Y,X,...ht)}finally{N=!1}}),G=x[6]||(V=>{var ht;const N=E(V),Y=t.get(V);if(Y&&!pS(N.v)){for(const[X,$]of N.d)if(!Y.d.has(X)){const ct=E(X);H(X).t.add(V),Y.d.add(X),$!==ct.n&&(i.add(X),(ht=h.c)==null||ht.call(h,X),B(X))}for(const X of Y.d||[])if(!N.d.has(X)){Y.d.delete(X);const $=j(X);$==null||$.t.delete(V)}}}),H=x[7]||(V=>{var ht;const N=E(V);let Y=t.get(V);if(!Y){D(V);for(const X of N.d.keys())H(X).t.add(V);if(Y={l:new Set,d:new Set(N.d.keys()),t:new Set},t.set(V,Y),(ht=h.m)==null||ht.call(h,V),K0(V)){const X=()=>{let $=!0;const ct=(...bt)=>{try{return P(V,...bt)}finally{$||(R(),A())}};try{const bt=b(V,ct);bt&&(Y.u=()=>{$=!0;try{bt()}finally{$=!1}})}finally{$=!1}};s.add(X)}}return Y}),j=x[8]||(V=>{var ht;const N=E(V);let Y=t.get(V);if(Y&&!Y.l.size&&!Array.from(Y.t).some(X=>{var $;return($=t.get(X))==null?void 0:$.d.has(V)})){Y.u&&o.add(Y.u),Y=void 0,t.delete(V),(ht=h.u)==null||ht.call(h,V);for(const X of N.d.keys()){const $=j(X);$==null||$.t.delete(V)}return}return Y}),Z=[n,t,e,i,s,o,h,f,m,g,b,E,A,R,D,B,P,G,H,j],nt={get:V=>ig(D(V)),set:(V,...ht)=>{try{return P(V,...ht)}finally{R(),A()}},sub:(V,ht)=>{const Y=H(V).l;return Y.add(ht),A(),()=>{Y.delete(ht),j(V),A()}}};return Object.defineProperty(nt,t6,{value:Z}),nt},IR=e6,n6=$O,gS=kR,v2={};let i6=0;function qr(n,t){const e=`atom${++i6}`,i={toString(){return(v2?"production":void 0)!=="production"&&this.debugLabel?e+":"+this.debugLabel:e}};return typeof n=="function"?i.read=n:(i.init=n,i.read=r6,i.write=s6),t&&(i.write=t),i}function r6(n){return n(this)}function s6(n,t,e){return t(this,typeof e=="function"?e(n(this)):e)}const a6=()=>{let n=0;const t=n6({}),e=new WeakMap,i=new WeakMap,s=IR(e,i,void 0,void 0,void 0,void 0,t,void 0,(f,m,g,...b)=>n?g(f,...b):f.write(m,g,...b)),o=new Set;return t.m.add(void 0,f=>{o.add(f);const m=e.get(f);m.m=i.get(f)}),t.u.add(void 0,f=>{o.delete(f);const m=e.get(f);delete m.m}),Object.assign(s,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),e),dev4_get_mounted_atoms:()=>o,dev4_restore_atoms:f=>{const m={read:()=>null,write:(g,b)=>{++n;try{for(const[x,E]of f)"init"in x&&b(x,E)}finally{--n}}};s.set(m)}})};function l6(){return(v2?"production":void 0)!=="production"?a6():IR()}let ld;function o6(){return ld||(ld=l6(),(v2?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=ld),globalThis.__JOTAI_DEFAULT_STORE__!==ld&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),ld}const u6={},c6=zt.createContext(void 0);function YR(n){return zt.useContext(c6)||o6()}const tb=n=>typeof(n==null?void 0:n.then)=="function",eb=n=>{n.status||(n.status="pending",n.then(t=>{n.status="fulfilled",n.value=t},t=>{n.status="rejected",n.reason=t}))},h6=lb.use||(n=>{if(n.status==="pending")throw n;if(n.status==="fulfilled")return n.value;throw n.status==="rejected"?n.reason:(eb(n),n)}),Z0=new WeakMap,_S=(n,t)=>{let e=Z0.get(n);return e||(e=new Promise((i,s)=>{let o=n;const h=g=>b=>{o===g&&i(b)},f=g=>b=>{o===g&&s(b)},m=()=>{try{const g=t();tb(g)?(Z0.set(g,e),o=g,g.then(h(g),f(g)),gS(g,m)):i(g)}catch(g){s(g)}};n.then(h(n),f(n)),gS(n,m)}),Z0.set(n,e)),e};function el(n,t){const{delay:e,unstable_promiseStatus:i=!lb.use}={},s=YR(),[[o,h,f],m]=zt.useReducer(b=>{const x=s.get(n);return Object.is(b[0],x)&&b[1]===s&&b[2]===n?b:[x,s,n]},void 0,()=>[s.get(n),s,n]);let g=o;if((h!==s||f!==n)&&(m(),g=s.get(n)),zt.useEffect(()=>{const b=s.sub(n,()=>{if(i)try{const x=s.get(n);tb(x)&&eb(_S(x,()=>s.get(n)))}catch{}if(typeof e=="number"){setTimeout(m,e);return}m()});return m(),b},[s,n,e,i]),zt.useDebugValue(g),tb(g)){const b=_S(g,()=>s.get(n));return i&&eb(b),h6(b)}return g}function Ss(n,t){const e=YR();return zt.useCallback((...s)=>{if((u6?"production":void 0)!=="production"&&!("write"in n))throw new Error("not writable atom");return e.set(n,...s)},[e,n])}function jo(n,t){return[el(n),Ss(n)]}const Fl={Player:[{name:"missile_1",speed:2,damage:100,scale:1,fireInterval:500},{name:"missile_2",speed:7,damage:150,scale:1.2,fireInterval:300},{name:"missile_3",speed:5,damage:200,scale:1.5,fireInterval:400}],Enemy:[{name:"enemy_1_missile_1",speed:.5,damage:15,scale:1,fireInterval:1e3},{name:"enemy_1_missile_1",speed:.5,damage:20,scale:1,fireInterval:700}]},qR=qr([]),f6=()=>jo(qR),jR=()=>Ss(qR),KR=qr(Fl.Player[0]),d6=()=>el(KR),WR=()=>Ss(KR),x2=[{name:"player_jet_1",speed:5,scale:1,acceleration:.2,health:100}],QR=qr(null),ZR=()=>el(QR),p6=()=>Ss(QR),S2=qr(x2[0].health),m6=()=>jo(S2),g6=()=>el(S2),_6=()=>Ss(S2),y6=qr(x2[0]),E2=()=>el(y6);let JR;function b6(n){return JR=n,n}function Ld(){return JR}class nb{static setParamValue(t,e){if(t.setValueAtTime){const i=Ld().context;t.setValueAtTime(e,i.audioContext.currentTime)}else t.value=e;return e}}class v6 extends ei{constructor(){super(...arguments),this.speed=1,this.muted=!1,this.volume=1,this.paused=!1}refresh(){this.emit("refresh")}refreshPaused(){this.emit("refreshPaused")}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(t){console.warn("HTML Audio does not support filters")}get audioContext(){return console.warn("HTML Audio does not support audioContext"),null}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this.paused}destroy(){this.removeAllListeners()}}let x6=0;const ib=class extends ei{constructor(n){super(),this.id=x6++,this.init(n)}set(n,t){if(this[n]===void 0)throw new Error(`Property with name ${n} does not exist.`);switch(n){case"speed":this.speed=t;break;case"volume":this.volume=t;break;case"paused":this.paused=t;break;case"loop":this.loop=t;break;case"muted":this.muted=t;break}return this}get progress(){const{currentTime:n}=this._source;return n/this._duration}get paused(){return this._paused}set paused(n){this._paused=n,this.refreshPaused()}_onPlay(){this._playing=!0}_onPause(){this._playing=!1}init(n){this._playing=!1,this._duration=n.source.duration;const t=this._source=n.source.cloneNode(!1);t.src=n.parent.url,t.onplay=this._onPlay.bind(this),t.onpause=this._onPause.bind(this),n.context.on("refresh",this.refresh,this),n.context.on("refreshPaused",this.refreshPaused,this),this._media=n}_internalStop(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())}stop(){this._internalStop(),this._source&&this.emit("stop")}get speed(){return this._speed}set speed(n){this._speed=n,this.refresh()}get volume(){return this._volume}set volume(n){this._volume=n,this.refresh()}get loop(){return this._loop}set loop(n){this._loop=n,this.refresh()}get muted(){return this._muted}set muted(n){this._muted=n,this.refresh()}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(n){console.warn("HTML Audio does not support filters")}refresh(){const n=this._media.context,t=this._media.parent;this._source.loop=this._loop||t.loop;const e=n.volume*(n.muted?0:1),i=t.volume*(t.muted?0:1),s=this._volume*(this._muted?0:1);this._source.volume=s*e*i,this._source.playbackRate=this._speed*n.speed*t.speed}refreshPaused(){const n=this._media.context,t=this._media.parent,e=this._paused||t.paused||n.paused;e!==this._pausedReal&&(this._pausedReal=e,e?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",e))}play(n){const{start:t,end:e,speed:i,loop:s,volume:o,muted:h}=n;e&&console.assert(e>t,"End time is before start time"),this._speed=i,this._volume=o,this._loop=!!s,this._muted=h,this.refresh(),this.loop&&e!==null&&(console.warn('Looping not support when specifying an "end" time'),this.loop=!1),this._start=t,this._end=e||this._duration,this._start=Math.max(0,this._start-ib.PADDING),this._end=Math.min(this._end+ib.PADDING,this._duration),this._source.onloadedmetadata=()=>{this._source&&(this._source.currentTime=t,this._source.onloadedmetadata=null,this.emit("progress",t/this._duration,this._duration),Pn.shared.add(this._onUpdate,this))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")}_onUpdate(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()}_onComplete(){Pn.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)}destroy(){Pn.shared.remove(this._onUpdate,this),this.removeAllListeners();const n=this._source;n&&(n.onended=null,n.onplay=null,n.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)}toString(){return`[HTMLAudioInstance id=${this.id}]`}};let $R=ib;$R.PADDING=.1;class S6 extends ei{init(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)}create(){return new $R(this)}get isPlayable(){return!!this._source&&this._source.readyState===4}get duration(){return this._source.duration}get context(){return this.parent.context}get filters(){return null}set filters(t){console.warn("HTML Audio does not support filters")}destroy(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)}get source(){return this._source}load(t){const e=this._source,i=this.parent;if(e.readyState===4){i.isLoaded=!0;const m=i.autoPlayStart();t&&setTimeout(()=>{t(null,i,m)},0);return}if(!i.url){t(new Error("sound.url or sound.source must be set"));return}e.src=i.url;const s=()=>{f(),i.isLoaded=!0;const m=i.autoPlayStart();t&&t(null,i,m)},o=()=>{f(),t&&t(new Error("Sound loading has been aborted"))},h=()=>{f();const m=`Failed to load audio element (code: ${e.error.code})`;t?t(new Error(m)):console.error(m)},f=()=>{e.removeEventListener("canplaythrough",s),e.removeEventListener("load",s),e.removeEventListener("abort",o),e.removeEventListener("error",h)};e.addEventListener("canplaythrough",s,!1),e.addEventListener("load",s,!1),e.addEventListener("abort",o,!1),e.addEventListener("error",h,!1),e.load()}}class E6{constructor(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start,console.assert(this.duration>0,"End time must be after start time")}play(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})}destroy(){this.parent=null}}const wg=["ogg","oga","opus","m4a","mp3","mpeg","wav","aiff","wma","mid","caf"],T6=["audio/mpeg","audio/ogg"],Ug={};function A6(n){const t={m4a:"audio/mp4",oga:"audio/ogg",opus:'audio/ogg; codecs="opus"',caf:'audio/x-caf; codecs="opus"'},e=document.createElement("audio"),i={},s=/^no$/;wg.forEach(o=>{const h=e.canPlayType(`audio/${o}`).replace(s,""),f=t[o]?e.canPlayType(t[o]).replace(s,""):"";i[o]=!!h||!!f}),Object.assign(Ug,i)}A6();let C6=0;class B6 extends ei{constructor(t){super(),this.id=C6++,this._media=null,this._paused=!1,this._muted=!1,this._elapsed=0,this.init(t)}set(t,e){if(this[t]===void 0)throw new Error(`Property with name ${t} does not exist.`);switch(t){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"muted":this.muted=e;break;case"loop":this.loop=e;break;case"paused":this.paused=e;break}return this}stop(){this._source&&(this._internalStop(),this.emit("stop"))}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh(),this._update(!0)}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}get filters(){return this._filters}set filters(t){var e;this._filters&&((e=this._filters)==null||e.filter(i=>i).forEach(i=>i.disconnect()),this._filters=null,this._source.connect(this._gain)),this._filters=t!=null&&t.length?t.slice(0):null,this.refresh()}refresh(){if(!this._source)return;const t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;const i=t.volume*(t.muted?0:1),s=e.volume*(e.muted?0:1),o=this._volume*(this._muted?0:1);nb.setParamValue(this._gain.gain,o*s*i),nb.setParamValue(this._source.playbackRate,this._speed*e.speed*t.speed),this.applyFilters()}applyFilters(){var t;if((t=this._filters)!=null&&t.length){this._source.disconnect();let e=this._source;this._filters.forEach(i=>{e.connect(i.destination),e=i}),e.connect(this._gain)}}refreshPaused(){const t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",i))}play(t){const{start:e,end:i,speed:s,loop:o,volume:h,muted:f,filters:m}=t;i&&console.assert(i>e,"End time is before start time"),this._paused=!1;const{source:g,gain:b}=this._media.nodes.cloneBufferSource();this._source=g,this._gain=b,this._speed=s,this._volume=h,this._loop=!!o,this._muted=f,this._filters=m,this.refresh();const x=this._source.buffer.duration;this._duration=x,this._end=i,this._lastUpdate=this._now(),this._elapsed=e,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=i,this._source.loopStart=e,this._source.start(0,e)):i?this._source.start(0,e,i-e):this._source.start(0,e),this.emit("start"),this._update(!0),this.enableTicker(!0)}enableTicker(t){Pn.shared.remove(this._updateListener,this),t&&Pn.shared.add(this._updateListener,this)}get progress(){return this._progress}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}destroy(){var t;this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),(t=this._filters)==null||t.forEach(e=>e.disconnect()),this._filters=null,this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1}toString(){return`[WebAudioInstance id=${this.id}]`}_now(){return this._media.context.audioContext.currentTime}_updateListener(){this._update()}_update(t=!1){if(this._source){const e=this._now(),i=e-this._lastUpdate;if(i>0||t){const s=this._source.playbackRate.value;this._elapsed+=i*s,this._lastUpdate=e;const o=this._duration;let h;if(this._source.loopStart){const f=this._source.loopEnd-this._source.loopStart;h=(this._source.loopStart+this._elapsed%f)/o}else h=this._elapsed%o/o;this._progress=h,this.emit("progress",this._progress,o)}}}init(t){this._media=t,t.context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)}_internalStop(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.stop(0),this._source.disconnect();try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}this._source=null}}_onComplete(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.disconnect();try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}}this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)}}class tM{constructor(t,e){this._output=e,this._input=t}get destination(){return this._input}get filters(){return this._filters}set filters(t){if(this._filters&&(this._filters.forEach(e=>{e&&e.disconnect()}),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();let e=null;t.forEach(i=>{e===null?this._input.connect(i.destination):e.connect(i.destination),e=i}),e.connect(this._output)}}destroy(){this.filters=null,this._input=null,this._output=null}}const eM=class extends tM{constructor(n){const t=n.audioContext,e=t.createBufferSource(),i=t.createGain(),s=t.createAnalyser();e.connect(s),s.connect(i),i.connect(n.destination),super(s,i),this.context=n,this.bufferSource=e,this.gain=i,this.analyser=s}get script(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(eM.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script}destroy(){super.destroy(),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null}cloneBufferSource(){const n=this.bufferSource,t=this.context.audioContext.createBufferSource();t.buffer=n.buffer,nb.setParamValue(t.playbackRate,n.playbackRate.value),t.loop=n.loop;const e=this.context.audioContext.createGain();return t.connect(e),e.connect(this.destination),{source:t,gain:e}}get bufferSize(){return this.script.bufferSize}};let nM=eM;nM.BUFFER_SIZE=0;class R6{init(t){this.parent=t,this._nodes=new nM(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source}destroy(){this.parent=null,this._nodes.destroy(),this._nodes=null;try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}this._source=null,this.source=null}create(){return new B6(this)}get context(){return this.parent.context}get isPlayable(){return!!this._source&&!!this._source.buffer}get filters(){return this._nodes.filters}set filters(t){this._nodes.filters=t}get duration(){return console.assert(this.isPlayable,"Sound not yet playable, no duration"),this._source.buffer.duration}get buffer(){return this._source.buffer}set buffer(t){this._source.buffer=t}get nodes(){return this._nodes}load(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t?t(new Error("sound.url or sound.source must be set")):console.error("sound.url or sound.source must be set")}async _loadUrl(t){const e=this.parent.url,i=await pe.get().fetch(e);this._decode(await i.arrayBuffer(),t)}_decode(t,e){const i=(s,o)=>{if(s)e&&e(s);else{this.parent.isLoaded=!0,this.buffer=o;const h=this.parent.autoPlayStart();e&&e(null,this.parent,h)}};t instanceof AudioBuffer?i(null,t):this.parent.context.decode(t,i)}}const lh=class{static from(n){let t={};typeof n=="string"?t.url=n:n instanceof ArrayBuffer||n instanceof AudioBuffer||n instanceof HTMLAudioElement?t.source=n:Array.isArray(n)?t.url=n:t=n,t={autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1,...t},Object.freeze(t);const e=Ld().useLegacy?new S6:new R6;return new lh(e,t)}constructor(n,t){this.media=n,this.options=t,this._instances=[],this._sprites={},this.media.init(this);const e=t.complete;this._autoPlayOptions=e?{complete:e}:null,this.isLoaded=!1,this._preloadQueue=null,this.isPlaying=!1,this.autoPlay=t.autoPlay,this.singleInstance=t.singleInstance,this.preload=t.preload||this.autoPlay,this.url=Array.isArray(t.url)?this.preferUrl(t.url):t.url,this.speed=t.speed,this.volume=t.volume,this.loop=t.loop,t.sprites&&this.addSprites(t.sprites),this.preload&&this._preload(t.loaded)}preferUrl(n){const[t]=n.map(e=>({url:e,ext:gi.extname(e).slice(1)})).filter(({ext:e})=>Ug[e]).sort((e,i)=>wg.indexOf(e.ext)-wg.indexOf(i.ext));if(!t)throw new Error("No supported file type found");return t.url}get context(){return Ld().context}pause(){return this.isPlaying=!1,this.paused=!0,this}resume(){return this.isPlaying=this._instances.length>0,this.paused=!1,this}get paused(){return this._paused}set paused(n){this._paused=n,this.refreshPaused()}get speed(){return this._speed}set speed(n){this._speed=n,this.refresh()}get filters(){return this.media.filters}set filters(n){this.media.filters=n}addSprites(n,t){if(typeof n=="object"){const i={};for(const s in n)i[s]=this.addSprites(s,n[s]);return i}console.assert(!this._sprites[n],`Alias ${n} is already taken`);const e=new E6(this,t);return this._sprites[n]=e,e}destroy(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null}removeSprites(n){if(n){const t=this._sprites[n];t!==void 0&&(t.destroy(),delete this._sprites[n])}else for(const t in this._sprites)this.removeSprites(t);return this}get isPlayable(){return this.isLoaded&&this.media&&this.media.isPlayable}stop(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(let n=this._instances.length-1;n>=0;n--)this._instances[n].stop();return this}play(n,t){let e;if(typeof n=="string"?e={sprite:n,loop:this.loop,complete:t}:typeof n=="function"?(e={},e.complete=n):e=n,e={complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1,...e||{}},e.sprite){const s=e.sprite;console.assert(!!this._sprites[s],`Alias ${s} is not available`);const o=this._sprites[s];e.start=o.start+(e.start||0),e.end=o.end,e.speed=o.speed||1,e.loop=o.loop||e.loop,delete e.sprite}if(e.offset&&(e.start=e.offset),!this.isLoaded)return this._preloadQueue?new Promise(s=>{this._preloadQueue.push(()=>{s(this.play(e))})}):(this._preloadQueue=[],this.autoPlay=!0,this._autoPlayOptions=e,new Promise((s,o)=>{this._preload((h,f,m)=>{this._preloadQueue.forEach(g=>g()),this._preloadQueue=null,h?o(h):(e.loaded&&e.loaded(h,f,m),s(m))})}));(this.singleInstance||e.singleInstance)&&this._removeInstances();const i=this._createInstance();return this._instances.push(i),this.isPlaying=!0,i.once("end",()=>{e.complete&&e.complete(this),this._onComplete(i)}),i.once("stop",()=>{this._onComplete(i)}),i.play(e),i}refresh(){const n=this._instances.length;for(let t=0;t<n;t++)this._instances[t].refresh()}refreshPaused(){const n=this._instances.length;for(let t=0;t<n;t++)this._instances[t].refreshPaused()}get volume(){return this._volume}set volume(n){this._volume=n,this.refresh()}get muted(){return this._muted}set muted(n){this._muted=n,this.refresh()}get loop(){return this._loop}set loop(n){this._loop=n,this.refresh()}_preload(n){this.media.load(n)}get instances(){return this._instances}get sprites(){return this._sprites}get duration(){return this.media.duration}autoPlayStart(){let n;return this.autoPlay&&(n=this.play(this._autoPlayOptions)),n}_removeInstances(){for(let n=this._instances.length-1;n>=0;n--)this._poolInstance(this._instances[n]);this._instances.length=0}_onComplete(n){if(this._instances){const t=this._instances.indexOf(n);t>-1&&this._instances.splice(t,1),this.isPlaying=this._instances.length>0}this._poolInstance(n)}_createInstance(){if(lh._pool.length>0){const n=lh._pool.pop();return n.init(this.media),n}return this.media.create()}_poolInstance(n){n.destroy(),lh._pool.indexOf(n)<0&&lh._pool.push(n)}};let Og=lh;Og._pool=[];class Hd extends tM{constructor(){const t=window,e=new Hd.AudioContext,i=e.createDynamicsCompressor(),s=e.createAnalyser();s.connect(i),i.connect(e.destination),super(s,i),this.autoPause=!0,this._ctx=e,this._offlineCtx=new Hd.OfflineAudioContext(1,2,t.OfflineAudioContext?Math.max(8e3,Math.min(96e3,e.sampleRate)):44100),this.compressor=i,this.analyser=s,this.events=new ei,this.volume=1,this.speed=1,this.muted=!1,this.paused=!1,this._locked=e.state==="suspended"&&("ontouchstart"in globalThis||"onclick"in globalThis),this._locked&&(this._unlock(),this._unlock=this._unlock.bind(this),document.addEventListener("mousedown",this._unlock,!0),document.addEventListener("touchstart",this._unlock,!0),document.addEventListener("touchend",this._unlock,!0)),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),globalThis.addEventListener("focus",this.onFocus),globalThis.addEventListener("blur",this.onBlur)}onFocus(){if(!this.autoPause)return;const t=this._ctx.state;(t==="suspended"||t==="interrupted"||!this._locked)&&(this.paused=this._pausedOnBlur,this.refreshPaused())}onBlur(){this.autoPause&&(this._locked||(this._pausedOnBlur=this._paused,this.paused=!0,this.refreshPaused()))}_unlock(){this._locked&&(this.playEmptySound(),this._ctx.state==="running"&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._locked=!1))}playEmptySound(){const t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0),t.context.state==="suspended"&&t.context.resume()}static get AudioContext(){const t=window;return t.AudioContext||t.webkitAudioContext||null}static get OfflineAudioContext(){const t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null}destroy(){super.destroy();const t=this._ctx;typeof t.close<"u"&&t.close(),globalThis.removeEventListener("focus",this.onFocus),globalThis.removeEventListener("blur",this.onBlur),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null}get audioContext(){return this._ctx}get offlineContext(){return this._offlineCtx}set paused(t){t&&this._ctx.state==="running"?this._ctx.suspend():!t&&this._ctx.state==="suspended"&&this._ctx.resume(),this._paused=t}get paused(){return this._paused}refresh(){this.events.emit("refresh")}refreshPaused(){this.events.emit("refreshPaused")}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this._paused}decode(t,e){const i=o=>{e(new Error((o==null?void 0:o.message)||"Unable to decode file"))},s=this._offlineCtx.decodeAudioData(t,o=>{e(null,o)},i);s&&s.catch(i)}}class M6{constructor(){this.init()}init(){return this.supported&&(this._webAudioContext=new Hd),this._htmlAudioContext=new v6,this._sounds={},this.useLegacy=!this.supported,this}get context(){return this._context}get filtersAll(){return this.useLegacy?[]:this._context.filters}set filtersAll(t){this.useLegacy||(this._context.filters=t)}get supported(){return Hd.AudioContext!==null}add(t,e){if(typeof t=="object"){const o={};for(const h in t){const f=this._getOptions(t[h],e);o[h]=this.add(h,f)}return o}if(console.assert(!this._sounds[t],`Sound with alias ${t} already exists.`),e instanceof Og)return this._sounds[t]=e,e;const i=this._getOptions(e),s=Og.from(i);return this._sounds[t]=s,s}_getOptions(t,e){let i;return typeof t=="string"?i={url:t}:Array.isArray(t)?i={url:t}:t instanceof ArrayBuffer||t instanceof AudioBuffer||t instanceof HTMLAudioElement?i={source:t}:i=t,i={...i,...e||{}},i}get useLegacy(){return this._useLegacy}set useLegacy(t){this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext}get disableAutoPause(){return!this._webAudioContext.autoPause}set disableAutoPause(t){this._webAudioContext.autoPause=!t}remove(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this}get volumeAll(){return this._context.volume}set volumeAll(t){this._context.volume=t,this._context.refresh()}get speedAll(){return this._context.speed}set speedAll(t){this._context.speed=t,this._context.refresh()}togglePauseAll(){return this._context.togglePause()}pauseAll(){return this._context.paused=!0,this._context.refreshPaused(),this}resumeAll(){return this._context.paused=!1,this._context.refreshPaused(),this}toggleMuteAll(){return this._context.toggleMute()}muteAll(){return this._context.muted=!0,this._context.refresh(),this}unmuteAll(){return this._context.muted=!1,this._context.refresh(),this}removeAll(){for(const t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this}stopAll(){for(const t in this._sounds)this._sounds[t].stop();return this}exists(t,e=!1){const i=!!this._sounds[t];return e&&console.assert(i,`No sound matching alias '${t}'.`),i}isPlaying(){for(const t in this._sounds)if(this._sounds[t].isPlaying)return!0;return!1}find(t){return this.exists(t,!0),this._sounds[t]}play(t,e){return this.find(t).play(e)}stop(t){return this.find(t).stop()}pause(t){return this.find(t).pause()}resume(t){return this.find(t).resume()}volume(t,e){const i=this.find(t);return e!==void 0&&(i.volume=e),i.volume}speed(t,e){const i=this.find(t);return e!==void 0&&(i.speed=e),i.speed}duration(t){return this.find(t).duration}close(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this}}const yS=n=>{var i;const t=n.src;let e=(i=n==null?void 0:n.alias)==null?void 0:i[0];return(!e||n.src===e)&&(e=gi.basename(t,gi.extname(t))),e},D6={extension:q.Asset,detection:{test:async()=>!0,add:async n=>[...n,...wg.filter(t=>Ug[t])],remove:async n=>n.filter(t=>n.includes(t))},loader:{name:"sound",extension:{type:[q.LoadParser],priority:Mr.High},test(n){const t=gi.extname(n).slice(1);return!!Ug[t]||T6.some(e=>n.startsWith(`data:${e}`))},async load(n,t){const e=await new Promise((i,s)=>Og.from({...t.data,url:n,preload:!0,loaded(o,h){var f,m;o?s(o):i(h),(m=(f=t.data)==null?void 0:f.loaded)==null||m.call(f,o,h)}}));return Ld().add(yS(t),e),e},async unload(n,t){Ld().remove(yS(t))}}};De.add(D6);const g_=b6(new M6),T2={},w6=Symbol((T2?"production":void 0)!=="production"?"RESET":""),iM=n=>typeof(n==null?void 0:n.then)=="function";function U6(n=()=>{try{return window.localStorage}catch(e){(T2?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(e);return}},t){var e;let i,s;const o={getItem:(m,g)=>{var b,x;const E=R=>{if(R=R||"",i!==R){try{s=JSON.parse(R,t==null?void 0:t.reviver)}catch{return g}i=R}return s},A=(x=(b=n())==null?void 0:b.getItem(m))!=null?x:null;return iM(A)?A.then(E):E(A)},setItem:(m,g)=>{var b;return(b=n())==null?void 0:b.setItem(m,JSON.stringify(g,void 0))},removeItem:m=>{var g;return(g=n())==null?void 0:g.removeItem(m)}},h=m=>(g,b,x)=>m(g,E=>{let A;try{A=JSON.parse(E||"")}catch{A=x}b(A)});let f;try{f=(e=n())==null?void 0:e.subscribe}catch{}return!f&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(f=(m,g)=>{if(!(n()instanceof window.Storage))return()=>{};const b=x=>{x.storageArea===n()&&x.key===m&&g(x.newValue)};return window.addEventListener("storage",b),()=>{window.removeEventListener("storage",b)}}),f&&(o.subscribe=h(f)),o}const O6=U6();function A2(n,t,e=O6,i){const s=qr(t);return(T2?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=h=>{h(e.getItem(n,t));let f;return e.subscribe&&(f=e.subscribe(n,h,t)),f},qr(h=>h(s),(h,f,m)=>{const g=typeof m=="function"?m(h(s)):m;return g===w6?(f(s,t),e.removeItem(n)):iM(g)?g.then(b=>(f(s,b),e.setItem(n,b))):(f(s,g),e.setItem(n,g))})}const rM=A2("effects_volume",1),P6=()=>jo(rM),sM=()=>el(rM),aM=A2("music_volume",1),G6=()=>jo(aM),N6=()=>el(aM),rg=.1,z6=100,L6=()=>{const n=zt.useRef(null),t=zt.useRef(null),e=zt.useRef(0),i=zt.useRef(0),{app:s}=Qd(),[o]=zt.useState(!0),[h,f]=zt.useState(0),{left:m,right:g,touchX:b,touchY:x,up:E,down:A}=QO(),R=d6(),D=sM(),B=E2(),P=jR(),G=p6();zt.useEffect(()=>{n.current&&G(n.current)},[G]);const H=()=>{if(!n.current||!B)return;const Z=n.current,nt=B.speed,V=B.acceleration;m?e.current=Math.max(e.current-V,-nt):g?e.current=Math.min(e.current+V,nt):e.current>0?e.current=Math.max(e.current-rg,0):e.current<0&&(e.current=Math.min(e.current+rg,0)),E?i.current=Math.max(i.current-V,-nt):A?i.current=Math.min(i.current+V,nt):i.current>0?i.current=Math.max(i.current-rg,0):i.current<0&&(i.current=Math.min(i.current+rg,0)),Z.x+=e.current,Z.y+=i.current,b&&(Z.x=b,e.current=0),x&&(Z.y=x-z6,i.current=0);const ht=Z.width/2,N=Z.height/2;Z.x=Math.max(ht+ra,Math.min(s.screen.width-ht-ra,Z.x)),Z.y=Math.max(N+ra,Math.min(s.screen.height-N-ra,Z.y))},j=()=>{var nt;if(!n.current||!t.current)return;const Z=new Di(bs.get(R.name));Z.anchor.set(.5),Z.scale.set(R.scale),Z.x=n.current.x,Z.y=n.current.y,(nt=t.current)==null||nt.addChild(Z),D&&g_.play(`${R.name}_audio`,{volume:D}),P(V=>[...V,{sprite:Z,data:R}])};return m_(Z=>{n.current&&(H(),o&&Z.lastTime-h>R.fireInterval&&(j(),f(Z.lastTime)),P(nt=>nt.filter(V=>{var ht;return V.sprite.y-=V.data.speed,V.sprite.y<-20?((ht=t.current)==null||ht.removeChild(V.sprite),!1):!0})))}),Nt.jsxs(Nt.Fragment,{children:[Nt.jsx("pixiSprite",{ref:n,texture:bs.get(B.name),scale:B.scale,anchor:.5,x:s.screen.width/2,y:s.screen.height-s.screen.height*10/100}),Nt.jsx("pixiContainer",{ref:t})]})},H6=()=>Nt.jsx("div",{children:"GameLoading"}),C2=qr("menu"),F6=()=>jo(C2),V6=()=>el(C2),B2=()=>Ss(C2),rb=[{id:"music_1",label:"music_1"},{id:"music_2",label:"music_2"}],k6=()=>{const[n,t]=P6(),[e,i]=G6(),s=h=>{console.log(h.target.value),t(Number(h.target.value))},o=h=>{i(Number(h.target.value))};return Nt.jsxs("div",{className:"volume-controls",children:[Nt.jsxs("div",{children:[Nt.jsx("label",{htmlFor:"effects_volume",children:"Effects Volume"}),Nt.jsx("input",{type:"range",id:"effects_volume",min:"0",max:"1",step:"0.1",value:n,onChange:s})]}),Nt.jsxs("div",{children:[Nt.jsx("label",{htmlFor:"music_volume",children:"Music Volume"}),Nt.jsx("input",{type:"range",id:"music_volume",min:"0",max:"1",step:"0.1",value:e,onChange:o})]})]})},X6=()=>{const n=B2(),t=_6(),e=N6(),i=E2(),s=()=>{t(i.health),n("playing"),e&&g_.play(rb[Math.floor(Math.random()*rb.length)].id,{loop:!0,volume:e})};return Nt.jsxs("div",{className:"game-menu",children:[Nt.jsx("h1",{children:"World's On Fire"}),Nt.jsx("button",{onClick:s,children:"Start Game"}),Nt.jsx(k6,{})]})},lM=qr([]),oM=()=>Ss(lM),I6=()=>jo(lM),uM=qr([]),Y6=()=>Ss(uM),q6=()=>jo(uM),j6=qr(null),K6=()=>Ss(j6),cM=qr(0),hM=()=>Ss(cM),__=()=>el(cM),fM=A2("highScore",0),W6=()=>Ss(fM),Q6=()=>el(fM),Z6=()=>{const n=__(),t=Q6(),e=B2(),i=jR(),s=oM(),o=hM(),h=WR(),f=()=>{i([]),s([]),o(0),h(Fl.Player[0]),e("menu"),g_.stopAll()};return Nt.jsxs("div",{className:"game-over",children:[Nt.jsx("div",{className:"game-over-title",children:"Game Over"}),Nt.jsxs("div",{className:"game-over-score",children:["Score: ",n]}),Nt.jsxs("div",{className:"game-over-high-score",children:["High Score: ",t]}),Nt.jsx("button",{onClick:f,children:"Menu"})]})},ch=[{name:"enemy_1",speed:2,scale:2,spawnInterval:2e3,spawnAfterScore:0,damage:45,health:100,missile:Fl.Enemy[0]},{name:"enemy_2",speed:2.5,scale:2.5,spawnInterval:1e3,spawnAfterScore:10,missile:Fl.Enemy[0],damage:20,health:300},{name:"enemy_3",speed:3,scale:2.5,spawnInterval:500,spawnAfterScore:20,missile:Fl.Enemy[1],damage:25,health:400}],bS=n=>{for(let t=ch.length-1;t>=0;t--)if(n>=ch[t].spawnAfterScore)return ch[t];return ch[0]},J6=()=>{const n=zt.useRef(null),t=oM(),e=__(),i=Y6(),s=zt.useRef(null),o=ZR(),[h,f]=zt.useState(0),[m,g]=zt.useState(0),{app:b}=Qd(),x=K6();zt.useEffect(()=>{s.current&&x(s.current)},[x,s]);const E=R=>{var H;if(!R.data.missile||!o)return;const D=new Di(bs.get(R.data.missile.name));D.anchor.set(.5),D.x=R.sprite.x,D.y=R.sprite.y,D.scale.set(R.data.missile.scale),D.tint=16753920,(H=s.current)==null||H.addChild(D);const B=o.x-R.sprite.x,P=o.y-R.sprite.y,G=Math.sqrt(B*B+P*P);i(j=>[...j,{sprite:D,data:{velocityX:B/G*R.data.missile.speed,velocityY:P/G*R.data.missile.speed,damage:R.data.missile.damage}}])},A=()=>{var B;const R=bS(e),D=new Di(bs.get(R.name));D.anchor.set(.5),D.scale.set(R.scale),D.rotation=Math.PI,D.x=Math.random()*(b.screen.width-ra*2)+ra,D.y=-ra,(B=n.current)==null||B.addChild(D),t(P=>[...P,{sprite:D,data:R}])};return m_(R=>{const D=bS(e);R.lastTime-h>D.spawnInterval&&(A(),f(R.lastTime)),t(B=>B.filter(P=>{var G;return P.sprite.y+=P.data.speed,D.missile&&R.lastTime-m>D.missile.fireInterval&&(E({sprite:P.sprite,data:D}),g(R.lastTime)),P.sprite.y>b.screen.height?((G=P.sprite.parent)==null||G.removeChild(P.sprite),!1):!0})),i(B=>B.filter(P=>{var G;return P.sprite.x+=P.data.velocityX,P.sprite.y+=P.data.velocityY,P.sprite.y>b.screen.height?((G=P.sprite.parent)==null||G.removeChild(P.sprite),!1):!0}))}),Nt.jsxs(Nt.Fragment,{children:[Nt.jsx("pixiContainer",{ref:n}),Nt.jsx("pixiContainer",{ref:s})]})},sg=(n,t)=>{if(!n||!t)return!1;const e=n.getBounds(),i=t.getBounds();return e.x<i.x+i.width&&e.x+e.width>i.x&&e.y<i.y+i.height&&e.y+e.height>i.y},dM=qr([]),$6=()=>jo(dM),tP=()=>Ss(dM),eP=()=>{const n=sM();return{playSound:e=>{n&&g_.play(e,{volume:n})}}},nP=()=>{const n=ZR(),t=zt.useRef(null),e=zt.useRef(null),i=__(),s=hM(),o=B2(),h=W6(),f=WR(),m=E2(),{playSound:g}=eP(),[b,x]=m6(),[E,A]=q6(),[R,D]=$6(),[B,P]=I6(),[G,H]=f6(),j=X=>{h($=>$<X?X:$)},Z=(X,$,ct,bt=2,Tt=300)=>{var K;const F=new Di(bs.get(X));F.anchor.set(.5),F.x=$,F.y=ct,F.scale.set(bt),(K=t.current)==null||K.addChild(F),setTimeout(()=>{var ut;(ut=F.parent)==null||ut.removeChild(F)},Tt)},nt=X=>{if(!n)return;const $=m.health*X/100;b>$?(g("player_hit_audio"),Z("player_hit",n.x,n.y,2,200),x(ct=>ct-$)):(g("enemy_destroyed_audio"),x(0),Z("player_destroyed",n.x,n.y,4),j(i),o("gameover"))},V=X=>{G.forEach($=>{var ct,bt;sg($.sprite,X.sprite)&&(g("enemy_destroyed_audio"),(ct=$.sprite.parent)==null||ct.removeChild($.sprite),(bt=X.sprite.parent)==null||bt.removeChild(X.sprite),H(Tt=>Tt.filter(F=>F!==$)),P(Tt=>Tt.filter(F=>F!==X)),s(Tt=>Tt+1),Z("enemy_hit",X.sprite.x,X.sprite.y))})},ht=X=>{var $;n&&sg(n,X.sprite)&&(g("enemy_destroyed_audio"),($=X.sprite.parent)==null||$.removeChild(X.sprite),P(ct=>ct.filter(bt=>bt!==X)),nt(X.data.damage))},N=()=>{E.forEach(X=>{var $;n&&sg(X.sprite,n)&&(($=X.sprite.parent)==null||$.removeChild(X.sprite),A(ct=>ct.filter(bt=>bt!==X)),nt(X.data.damage))})},Y=()=>{R.forEach(X=>{var $;n&&sg(n,X.sprite)&&(($=X.sprite.parent)==null||$.removeChild(X.sprite),D(ct=>ct.filter(bt=>bt!==X)),f(X.type))})};return m_(()=>{B.forEach(X=>{V(X),ht(X)}),N(),Y()}),Nt.jsxs(Nt.Fragment,{children:[Nt.jsx("pixiContainer",{ref:t}),Nt.jsx("pixiContainer",{ref:e})]})},iP=()=>{const n=__(),[t,e]=F6(),i=g6(),s=()=>{e(t==="paused"?"playing":"paused")};return Nt.jsx("div",{className:"game-stats",children:Nt.jsxs("div",{className:"content",children:[t==="playing"&&Nt.jsx("button",{onClick:s,children:"Pause"}),t==="paused"&&Nt.jsx("button",{onClick:s,children:"Play"}),Nt.jsxs("div",{className:"game-stats-score",children:["Score: ",n]}),Nt.jsxs("div",{className:"game-stats-score",children:["Health: ",i]})]})})};async function rP(n){var t;const e={importPixi:!1,...n};e.app&&(e.renderer=e.app.renderer,e.stage=e.app.stage),e.importPixi&&!e.pixi&&(e.pixi=await Ed(()=>Promise.resolve().then(()=>OU),void 0)),window.__PIXI_DEVTOOLS__={...window.__PIXI_DEVTOOLS__||{},app:e.app,stage:e.stage,renderer:e.renderer,extensions:[...((t=window.__PIXI_DEVTOOLS__)==null?void 0:t.extensions)||[],...e.extensions||[]],plugins:{}}}const sP=()=>{const{app:n}=Qd();return rP({app:n}),null},aP=1e4,lP=2,oP=()=>{const n=zt.useRef(null),[t,e]=zt.useState(0),{app:i}=Qd(),s=tP(),o=()=>{var f;const h=Fl.Player.filter(m=>m.name!=="missile_1")[Math.floor(Math.random()*Fl.Player.length)];if(h){const m=new Di(bs.get(h.name));m.anchor.set(.5),m.scale.set(3),m.x=Math.random()*(i.screen.width-ra*2)+ra,m.y=-ra,(f=n.current)==null||f.addChild(m),s(g=>[...g,{sprite:m,type:h}])}};return m_(h=>{h.lastTime-t>aP&&(o(),e(h.lastTime)),s(f=>f.filter(m=>{var g;return m.sprite.y+=lP,m.sprite.y>i.screen.height+ra?((g=n.current)==null||g.removeChild(m.sprite),!1):!0}))}),Nt.jsx(Nt.Fragment,{children:Nt.jsx("pixiContainer",{ref:n})})};WO({Container:kn,Sprite:Di});function uP(){const[n,t]=zt.useState(!1),[e,i]=zt.useState(null),s=zt.useRef(null),o=V6();return zt.useEffect(()=>{(async()=>{try{await bs.load([{alias:"enemy_destroyed_audio",src:"./assets/audio/enemy_destroyed.ogg"},{alias:"player_hit_audio",src:"./assets/audio/player_hit.ogg"},{alias:"enemy_hit",src:"./assets/hitmarks/enemy_hit.png"},{alias:"player_hit",src:"./assets/hitmarks/player_hit.png"},{alias:"player_destroyed",src:"./assets/hitmarks/player_destroyed.png"},...rb.map(f=>({alias:f.id,src:`./assets/audio/${f.label}.mp3`})),...Fl.Player.map(f=>({alias:`${f.name}_audio`,src:`./assets/audio/${f.name}.ogg`})),...x2.map(f=>({alias:f.name,src:`./assets/player_jets/${f.name}.png`})),...Fl.Player.map(f=>({alias:f.name,src:`./assets/missiles/${f.name}.png`})),...ch.map(f=>({alias:f.name,src:`./assets/enemies/${f.name}.png`})),...ch.filter(f=>f.missile).map(f=>({alias:f.missile.name,src:`./assets/missiles/${f.missile.name}.png`}))]),t(!0)}catch(f){i(f instanceof Error?f:new Error("Failed to load assets"))}})()},[]),zt.useEffect(()=>{var h,f;s.current&&(o==="playing"?(h=s.current.getApplication())==null||h.start():(f=s.current.getApplication())==null||f.stop())},[o]),e?Nt.jsxs("div",{children:["Error loading assets: ",e.message]}):n?o==="menu"?Nt.jsx(X6,{}):Nt.jsxs(Nt.Fragment,{children:[Nt.jsx(iP,{}),o==="gameover"&&Nt.jsx(Z6,{}),Nt.jsxs(KO,{background:"#1099bb",resizeTo:window,ref:s,children:[Nt.jsx(sP,{}),Nt.jsx(L6,{}),Nt.jsx(J6,{}),Nt.jsx(oP,{}),Nt.jsx(nP,{})]})]}):Nt.jsx(H6,{})}aD.createRoot(document.getElementById("pixi-container")).render(Nt.jsx(uP,{}));export{e4 as A,dR as B,kn as C,nA as D,sA as E,J8 as F,gB as G,ER as H,OB as M,ZB as N,d3 as R,p3 as T,n4 as a,zb as b,VB as c,kB as d,De as e,CR as f,AR as g,mR as h,aR as i,AA as j,EA as k};
